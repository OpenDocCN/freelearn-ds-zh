<html><head></head><body>
        

                            
                    <h1 class="header-title">Creating Maps</h1>
                
            
            
                
<p>0In this chapter, we will be creating maps using QGIS. We will use the styling and the data from the previous chapter. We will look at labeling features, before building a map using the data. QGIS is very good at creating maps. Have a look at this gallery to get an idea of the capabilities of QGIS: <a href="https://www.flickr.com/groups/qgis/pool/">https://www.flickr.com/groups/qgis/pool/</a>.</p>
<p>The topics covered in this chapter are as follows:</p>
<ul>
<li>Labeling</li>
<li>Creating maps</li>
<li>Saving and exporting maps</li>
<li>Creating an Atlas</li>
<li>Building a web map</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Labeling</h1>
                
            
            
                
<p>Open the QGIS project we built in <a href="e8289aa4-8eb7-4d2d-9662-4c17889a53e3.xhtml">Chapter 4</a>, <em>Styling Data</em>. We will be using it to build a map. Turn on the Label Toolbar by selecting View | Toolbars and select Label Toolbar. Label Toolbar is shown as follows:</p>
<div><img src="img/6f78000c-93ef-4c4f-a4f0-831b0579d2eb.png"/></div>
<p>Labeling toolbar</p>
<p>There are eight buttons on this toolbar; in order, these are the following:</p>
<ul>
<li>Clicking on Layer Labeling Options will open the Layer Styling Panel and the label tab by default</li>
<li>Layer Diagram Options</li>
<li>Highlight Pinned Labels and Diagrams</li>
<li>Pin/Unpin Labels And Diagrams</li>
<li>Show/Hide Labels And Diagrams</li>
<li>Move Label and Diagram</li>
<li>Rotate Label </li>
<li>Change Label, used for label editing</li>
</ul>
<p>Make sure that the <kbd>Airports</kbd> layer is selected in the Layers panel. Click on the layer labeling button on Label Toolbar. This will open the Layer Styling Panel; we used this in the previous chapter to style our layers. Choose Single labels and the label with NAME to label all <kbd>Airports</kbd>. I have reduced the Size of the text from 10.0000 to 8.0000 points. Make sure that the checkbox next to Live update is ticked so any updates can be seen as they are made. This is shown in the following screenshot:</p>
<div><img src="img/f1c61a11-c4bb-4c86-ac38-cf9e4689cc64.png" style=""/></div>
<p>Layer Styling Panel—label design focus</p>
<p>These are the default labeling options. Any changes you make will be instantly seen in the map. Not all labels will be placed perfectly. A good method is to try to get as many labels in the best location possible using the Placement tab, and then manually move individual labels if they are still not located optimally.</p>
<p>With the labels tab open, select the Placement tab (the icon with four arrows pointing north, south, east, and west). Choose the radio button next to Offset from point and click the top middle quadrant in the display. This will move all the labels directly north (as you view your map) from the <kbd>Airports</kbd> icon. Adjust Offset X,Y to 0.0000,-2.0000 to exaggerate the distance from the icon. This is shown in the following screenshot:</p>
<div><img src="img/87eaec75-c348-4e01-8f96-8f5a955e52aa.png" style=""/></div>
<p>Layer Styling Panel—label Placement focus</p>
<p>Now that we have placed the labels, let's style them using some of the options available to us. Click on the buffer tab (the icon shows abc with a blue background). Next, check the box next to Draw text buffer. This helps our labels stand out more from the map. Click on the customize effects button, check the box next to Drop Shadow, and set its Opacity to 50.0%. This is shown in the following screenshot:</p>
<div><img src="img/020af032-6c98-41cf-bcec-fc7bff74bb5e.png" style=""/></div>
<p>Layer Styling Panel—label Effects Properties</p>
<p>The map now looks like this:</p>
<div><img src="img/4b00f7a0-cd71-4679-bb3e-3832dfba50f8.png"/></div>
<p>Map with layers added</p>
<p>As you can see, there is an issue with labels near the Anchorage International Airport. Let's use the interactive Label Toolbar to move these labels manually. There are still some labels not being displayed; in the next section, we will move them manually.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Manually moving labels</h1>
                
            
            
                
<p>To interactively move a label, click on the Move Label and Diagram button on Label Toolbar and accept ID as the primary key. Next, click on a label and move it. As you click and drag a label, a placement box appears in green where the new location of the label will be. This is shown in the following screenshot:</p>
<div><img src="img/2d855b71-2b8a-412b-ab1b-7a18a4d07fed.png" style=""/></div>
<p>Placing labels</p>
<p>Keep zooming in and out of the map to ensure your labels are placed where best suited to your data. You have many other options that we will not cover in this quick start guide, but rotating (as shown highlighted on Label Toolbar as follows) is useful, especially on linear features:</p>
<div><img src="img/e67a486e-4785-4ded-874f-8573e0c8daf9.png"/></div>
<p>Label Toolbar</p>
<p>The final button on the right of Label Toolbar allows you to change the individual properties of one label at a time; size, color, and font size can all be set on a label-by-label basis. Your map will look similar to the following screenshot:</p>
<div><img src="img/e1204908-3286-4949-9015-89e3f1fb090f.png" style=""/></div>
<p>Label placement with adjustment</p>
<p>If you wanted to label rivers and the grassland areas, apply labels using the same tool we have just described.</p>
<p>We are now ready to bring this all together and make a map.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Making a map in QGIS</h1>
                
            
            
                
<p>Click on Project | New Print Layout (or click the corresponding button on Project Toolbar).</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>In the Create print layout Title dialog box (shown as follows), give your new, empty map a title and click OK:</p>
<div><img src="img/1326570d-a2db-44b4-a270-a39cdb489ebf.png" style=""/></div>
<p>Creating a new print layout</p>
<p>You will now have an empty canvas on which we will build our map. Add your map to the layout canvas via the menu by going to Add Item | Add Map. Then, click and drag the mouse to draw on the canvas in the location you want to put your map. This will add an Item called Map 1; we will add more items later. This is shown in the following screenshot:</p>
<div><img src="img/b3b79f56-e1b7-4234-8cb4-59ca56f33db3.png"/></div>
<p>Map layout</p>
<p>Please note that for ease of reading this book, the label size has been increased.<br/>
For this reason you will find that the screen shots are slightly different to your screen.</p>
<p>With Map 1 selected, click on the Item Properties tab and set the scale to <kbd>12000000</kbd>, as this will display all our data on the page. Ensure that Toolbox Toolbar is enabled (View | Toolbars | Toolbox). This is a very useful toolbar as it allow us to design our page. Click on the Move Item Content button, highlighted as follows:</p>
<div><img src="img/9d962782-3226-4687-829e-0b4a72a8e638.png"/></div>
<p>Move item button—used to move an item on the map</p>
<p>This tool allows us to move the data in the map around so it best fits the page. When you are happy it is in the right place, click on Pan Map (the hand icon).</p>
<p>To add a legend, click on the add legend button. Draw an area where the legend will appear on the map. The legend may appear messy at first, but we can adjust it in Item Properties. Make sure that the legend is selected in the Items panel, and then from the Item Properties tab add a title (Legend) and uncheck the auto update checkbox. We can remove any layers appearing in the legend that we don't want. In the map, the <kbd>Hillshade</kbd> and <kbd>landcover</kbd> rasters are still there. To remove these, click on the layer name and then click on the red minus button to remove it from the legend. If you wanted to add a layer back, then click on the green cross to bring up a list of layers to select. To finish the legend, scroll down Item Properties and expand Fonts.</p>
<p class="mce-root"/>
<p>Here, set Title font to bold. The map now looks like this:</p>
<div><img src="img/ed16881b-5384-4040-be1f-4b31e9c30197.png" style=""/></div>
<p>Map layout with Legend added</p>
<p>Next, add a scalebar. In Toolbox Toolbar, select the scalebar tool and click and drag a new scalebar to the lower-right corner of the map. In Item Properties for the scalebar, set Style as Double Box and the units to Miles. Change the Label for units value from mi to Miles.</p>
<p>Add a north arrow by clicking Add Item | Add Picture and draw a box to contain your north arrow. Use the item properties of the north arrow to point to the location on your computer where the QGIS SVG files are stored. In this example, I am using <kbd>C:\OSGeo4W64\apps\qgis\svg\arrows/NorthArrow_11.svg</kbd>.</p>
<p>Now, we need to add a title and a description. To add text to this map, select Add Item | Add label. Draw a box in the lower-left corner, and in the Item Properties window, copy the following text:</p>
<pre style="margin: 0in;margin-bottom: .0001pt">&lt;h1&gt;A QGIS built map of Alaska&lt;/h1&gt;<br/>&lt;h2&gt;This map was created in QGIS 3.4&lt;/h2&gt;<br/>&lt;p&gt;We used the following data&lt;/p&gt;<br/>&lt;ul&gt;&lt;li&gt;Airports&lt;/li&gt;<br/>&lt;li&gt;Grassland&lt;/li&gt;<br/>&lt;li&gt;Rivers&lt;/li&gt;<br/>&lt;li&gt;Alaska boundary&lt;/li&gt;&lt;/ul&gt;</pre>
<p> </p>
<p>Click on Render as HTML.</p>
<p>To finish, we can set a background color for the map. Select Map 1 in the Items panel and scroll to the background options in the Item Properties. Choose a neutral color; I have selected a light gray. Adjust the transparency to a suitable level so it doesn't distract the viewer. Select the legend in the Items panel and set the background to the same color as the map background.</p>
<p>Finally, from the Toolbox Toolbar, click on the Add Shape icon. Choose a rectangle and draw around the title. Select it as the item and, in Item Properties, change the fill to no fill and the boarder to black (it will be black by default). Then, set Corner radius to 3.00, so the corners are rounded in the textbox.</p>
<p>Your map will look similar to the following screenshot:</p>
<div><img src="img/e767821a-70ec-4858-a140-bc9fa3b80967.png"/></div>
<p>Map layout updated in QGIS 3.4</p>
<p>Save your map via Layout | Save Project. To save it as <kbd>.pdf</kbd>, click Layout | Export as pdf. You may need to adjust the export settings, such as dpi values, to make the optimal map output. To do this, click on the Layout tab on the right of the screen (next to Item Properties). On this screen, you will have the option to change a variety of settings. The Layout tab is shown in the following screenshot:</p>
<div><img src="img/720b12d4-9690-40ab-936c-0cdb2b447a04.png" style=""/></div>
<p>Layout settings</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating an Atlas</h1>
                
            
            
                
<p>Close the layout we have just created and return to the QGIS main project screen. In this example, we are going to create an Atlas of maps of the locations around civilian airports. To do this, use the NAME field, which contains only civilian airports. Let's create a new basic layout to show this functionality. We can do this by selecting Project | New Print Layout, or via Layout Manager Project | Layout Manager. Let's choose Layout Manager. This is a useful dialog box that lists all of our created layouts within a QGIS project. It is shown in the following screenshot:</p>
<div><img src="img/72d23729-e6ba-4b74-b7cc-b5d69a7e3a40.png" style=""/></div>
<p>QGIS Layout Manager</p>
<p>Select Empty layout and click on Create to open a new blank template. I am going to call my new layout <kbd>Airport_Atlas</kbd>:</p>
<div><img src="img/88fa9dff-c9d3-4e9b-92ce-f6f16258ca3f.png" style=""/></div>
<p>Create a new print layout</p>
<p>As we did when creating the Alaska map, select the add new map to layout button, and click and drag to fill the map page with the data from the QGIS project. From the menu bar, select Atlas | Atlas settings and then check the box next to Generate an atlas. Now, select Coverage layer as <kbd>Airports</kbd> and Page name as NAME. This will tell the Atlas to create one page per airport name:</p>
<div><img src="img/f083490d-550b-429f-a9df-ba064f5dcd96.png" style=""/></div>
<p>Options for generating an Atlas</p>
<p>In the Item Properties tab, make sure that Controlled by atlas is checked; this will mean the scale/view will adjust to each feature. Next, ensure that the Atlas toolbar is turned on. The toolbar is shown in the following screenshot:</p>
<div><img src="img/e6203dc3-dfe5-404e-add3-e867d2ee96e4.png"/></div>
<p>Atlas toolbar</p>
<p>Click on the preview button in the Atlas toolbar and use the arrows to scroll through the proposed Atlas. This is shown in the following screenshot:</p>
<div><img src="img/df0c5b09-b483-4783-84c7-efcaef8ac76b.png"/></div>
<p>Map created in the Atlas function</p>
<p>The scale may need adjusting to suit your needs. You can add a title, legend, scale bar, and north arrow as we did in the previous example. Once you have finished, select Atlas | Export Atlas from the menu as <kbd>.pdf</kbd> and save to disk. This is a simple example, but it shows the basics of creating an Atlas; you only need to build one layout to do it. Save and close your layout when finished.</p>
<p>Finally, in this chapter, we will have a quick look at creating a map for the web.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating a web map</h1>
                
            
            
                
<p>We can do more than just create printed or static digital maps. By creating a web map, a user has the ability to have more interaction with a map online. QGIS has a plugin that will allow you to display your data as a web map. This provides another option for sharing your maps. In this brief example, we will introduce QGIS plugins and how the <kbd>qgis2web</kbd> plugin allows us to create web maps.</p>
<p>Plugins are a really powerful and collaborative feature of QGIS. Developers and companies have created many plugins that extend the core features of QGIS. Some have been so integral to workflows that they have been incorporated into the main software. From the Plugins menu, select Manage and Install Plugins.</p>
<p>We will look at plugins more in the following two chapters, <a href="6cd8f808-67bd-4788-8e7a-ccd3ce12a11d.xhtml"/><a href="6cd8f808-67bd-4788-8e7a-ccd3ce12a11d.xhtml"/><a href="6cd8f808-67bd-4788-8e7a-ccd3ce12a11d.xhtml">Chapter 6</a>, <em>Spatial Processing</em> and <a href="bab7139e-9f38-4dff-b1eb-c5056be9c960.xhtml">Chapter 7</a>, <em>Expanding QGIS 3</em>.</p>
<p>From the plugin manager, with the ALL tab selected, search for and install <kbd>qgis2web</kbd>. Once installed, close the plugin manager. In the menu, there should be an option called Web. From here, select qgis2web | create web map. Adjust Layers and Groups to match the map you wish to create. In this example, <kbd>Airports</kbd>, <kbd>majrivers</kbd>, and <kbd>alaska</kbd> layers are selected. This map will use the <kbd>Leaflet</kbd> JavaScript library; this is a library designed to create lightweight web maps. A screenshot of qgis2web follows:</p>
<div><img src="img/fd34e901-9826-482c-91bb-c86d57c32558.png"/></div>
<p>The overview of qgis2web plugin for QGIS</p>
<p>When you are happy with the configuration, click on the Export button; this will save the web map at the location specified as the <kbd>Export</kbd> folder. Then, open the resulting web map in your web browser. You can copy the contents in the <kbd>Export</kbd> folder to a web server to publish the map. The <kbd>qgis2web</kbd> plugin is a very efficient way of creating web maps.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p>In this chapter, we have built maps with QGIS. We first looked at labeling options, both with rules and then interactively changing individual labels. Then, we built a map using the data we styled in the previous chapter. We then looked at how to create an Atlas, before finally looking at options to export the map to the web using the <kbd>qgis2web</kbd> plugin.</p>
<p>In the next chapter, we will look at spatial analysis, helping to derive more detailed spatial information about data. </p>


            

            
        
    </body></html>