<html><head></head><body>
        

                            
                    <h1 class="header-title">Preface</h1>
                
            
            
                
<p class="mce-root">How close is the nearest hospital from my children's school? Where were the property crimes in my city for the last three months? What is the shortest route from my home to my office? What route should I prescribe for my company's delivery truck to maximize equipment utilization and minimize fuel consumption? Where should the next fire station be built to minimize response times?</p>
<p class="mce-root">People ask these questions, and others like them, every day all over this planet. Answering these questions requires a mechanism capable of thinking in two or more dimensions. Historically, desktop GIS applications were the only ones capable of answering these questions. This method—though completely functional—is not viable for the average person; most people do not need all the functionalities that these applications can offer, or they do not know how to use them. In addition, more and more location-based services offer the specific features that people use and are accessible even from their smartphones. Clearly, the massification of these services requires the support of a robust backend platform to process a large number of geographical operations.</p>
<p class="mce-root">Since scalability, support for large datasets, and a direct input mechanism are required or desired, most developers have opted to adopt spatial databases as their support platform. There are several spatial database software available, some proprietary and others open source. PostGIS is an open source spatial database software available, and probably the most accessible of all spatial database software.</p>
<p class="mce-root">PostGIS runs as an extension to provide spatial capabilities to PostgreSQL databases. In this capacity, PostGIS permits the inclusion of spatial data alongside data typically found in a database. By having all the data together, questions such as "What is the rank of all the police stations, after taking into account the distance for each response time?" are possible. New or enhanced capabilities are possible by building upon the core functions provided by PostGIS and the inherent extensibility of PostgreSQL. Furthermore, this book also includes an invitation to include location privacy protection mechanisms in new GIS applications and in location-based services so that users feel respected and not necessarily at risk for sharing their information, especially information as sensitive as their whereabouts.</p>
<p class="mce-root"><em>PostGIS Cookbook, Second Edition</em> uses a problem-solving approach to help you acquire a solid understanding of PostGIS. It is hoped that this book provides answers to some common spatial questions and gives you the inspiration and confidence to use and enhance PostGIS in finding solutions to challenging spatial problems.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Who this book is for</h1>
                
            
            
                
<p>This book is written for those who are looking for the best method to solve their spatial problems using PostGIS. These problems can be as simple as finding the nearest restaurant to a specific location, or as complex as finding the shortest and/or most efficient route from point A to point B.</p>
<p>For readers who are just starting out with PostGIS, or even with spatial datasets, this book is structured to help them become comfortable and proficient at running spatial operations in the database. For experienced users, the book provides opportunities to dive into advanced topics such as point clouds, raster map-algebra, and PostGIS programming.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">What this book covers</h1>
                
            
            
                
<p class="NormalPACKT"><a href="38f20dd1-ca55-47e8-80cd-21670bcb32b2.xhtml">Chapter 1</a>, <em>Moving Data In and Out of PostGIS</em>, covers the processes available for importing and exporting spatial and non-spatial data to and from PostGIS. These processes include the use of utilities provided by PostGIS and by third parties, such as GDAL/OGR.</p>
<p class="NormalPACKT"><a href="dec6904b-477f-4c16-a90f-7563a36c4652.xhtml">Chapter 2</a>, <em>Structures That Work</em>, discusses how to organize PostGIS data using mechanisms available through PostgreSQL. These mechanisms are used to normalize potentially unclean and unstructured import data.</p>
<p class="NormalPACKT"><a href="68d3e400-24be-4757-ab79-5b395dd79f3c.xhtml">Chapter 3</a>, <em>Working with Vector Data – The Basics</em>, introduces PostGIS operations commonly done on vectors, known as geometries and geographies in PostGIS. Operations covered include the processing of invalid geometries, determining relationships between geometries, and simplifying complex geometries.</p>
<p class="NormalPACKT"><a href="68182eea-7041-4488-9f05-188b0a493ba5.xhtml">Chapter 4</a>, <em>Working with Vector Data – Advanced Recipes</em>, dives into advanced topics for analyzing geometries. You will learn how to make use of KNN filters to increase the performance of proximity queries, create polygons from LiDAR data, and compute Voronoi cells usable in neighborhood analyses.</p>
<p class="NormalPACKT"><a href="9e0e214c-c084-42dc-afdf-e58e021f9094.xhtml">Chapter 5</a>, <em>Working with Raster Data</em>, presents a realistic workflow for operating on rasters in PostGIS. You will learn how to import a raster, modify the raster, conduct analysis on the raster, and export the raster in standard raster formats.</p>
<p class="NormalPACKT"><a href="631edfb2-f555-465a-86fe-5422ec14bf48.xhtml">Chapter 6</a>, <em>Working with pgRouting</em>, introduces the pgRouting extension, which brings graph traversal and analysis capabilities to PostGIS. The recipes in this chapter answer real-world questions of conditionally navigating from point A to point B and accurately modeling complex routes, such as waterways.</p>
<p class="NormalPACKT"><a href="d571f938-c19d-4334-a8ca-1bf2ab75f911.xhtml">Chapter 7</a>, <em>Into the Nth Dimension</em>, focuses on the tools and techniques used to process and analyze multidimensional spatial data in PostGIS, including LiDAR-sourced point clouds. Topics covered include the loading of point clouds into PostGIS, creating 2.5D and 3D geometries from point clouds, and the application of several photogrammetry principles.</p>
<p class="NormalPACKT"><a href="be66552b-51b1-44b7-837b-afc8d2be06bf.xhtml">Chapter 8</a>, <em>PostGIS Programming</em>, shows how to use the Python language to write applications that operate on and interact with PostGIS. The applications written include methods to read and write external datasets to and from PostGIS, as well as a basic geocoding engine using OpenStreetMap datasets.</p>
<p class="NormalPACKT"><a href="a0f5055a-3de7-45b5-a2f1-95def0c53d41.xhtml">Chapter 9</a>, <em>PostGIS and the Web</em>, presents the use of OGC and REST web services to deliver PostGIS data and services to the web. This chapter discusses providing OGC, WFS, and WMS services with MapServer and GeoServer, and consuming them from clients such as OpenLayers and Leaflet. It then shows how to build a web application with GeoDjango and how to include your PostGIS data in a Mapbox application.</p>
<p class="NormalPACKT"><a href="c09c485d-c3e2-4469-8415-e823d45bbe75.xhtml">Chapter 10</a>, <em>Maintenance, Optimization, and Performance Tuning</em>, takes a step back from PostGIS and focuses on the capabilities of the PostgreSQL database server. By leveraging the tools provided by PostgreSQL, you can ensure the long-term viability of your spatial and non-spatial data, and maximize the performance of various PostGIS operations. In addition, it explores new features such as geospatial sharding and parallelism in PostgreSQL.</p>
<p class="NormalPACKT"><a href="e708d3c0-02ba-49ec-aaa1-b65693dee5ed.xhtml">Chapter 11</a>, <em>Using Desktop Clients</em>, tells you about how spatial data in PostGIS can be consumed and manipulated using various open source desktop GIS applications. Several applications are discussed so as to highlight the different approaches to interacting with spatial data and help you find the right tool for the task.</p>
<p class="NormalPACKT"><a href="42eee4e2-3f89-4633-a220-5827d0cca664.xhtml">Chapter 12</a>, <em>Introduction to Location Privacy Protection Mechanisms</em>, provides an introductory approximation to the concept of location privacy and presents the implementation of two different location privacy protection mechanisms that can be included in commercial applications to give a basic level of protection to the user's location data.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">To get the most out of this book</h1>
                
            
            
                
<p>Before going further into this book, you will want to install latest versions of PostgreSQL and PostGIS (9.6 or 103 and 2.3 or 2.41, respectively). You may also want to install pgAdmin (1.18) if you prefer a graphical SQL tool. For most computing environments (Windows, Linux, macOS X), installers and packages include all required dependencies of PostGIS. The minimum required dependencies for PostGIS are PROJ.4, GEOS, libjson and GDAL.<br/>
A basic understanding of the SQL language is required to understand and adapt the code found in this book's recipes.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Download the example code files</h1>
                
            
            
                
<p>You can download the example code files for this book from your account at <a href="http://www.packtpub.com" target="_blank">www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a href="http://www.packtpub.com/support" target="_blank">www.packtpub.com/support</a> and register to have the files emailed directly to you.</p>
<p>You can download the code files by following these steps:</p>
<ol>
<li>Log in or register at <a href="http://www.packtpub.com/support" target="_blank">www.packtpub.com</a>.</li>
<li>Select the SUPPORT tab.</li>
<li>Click on Code Downloads &amp; Errata.</li>
<li>Enter the name of the book in the Search box and follow the onscreen instructions.</li>
</ol>
<p>Once the file is downloaded, please make sure that you unzip or extract the folder using the latest version of:</p>
<ul>
<li>WinRAR/7-Zip for Windows</li>
<li>Zipeg/iZip/UnRarX for Mac</li>
<li>7-Zip/PeaZip for Linux</li>
</ul>
<p>The code bundle for the book is also hosted on GitHub at <a href="https://github.com/PacktPublishing/PostGIS-Cookbook-Second-Edition">https://github.com/PacktPublishing/PostGIS-Cookbook-Second-Edition</a>. In case there's an update to the code, it will be updated on the existing GitHub repository.</p>
<p>We also have other code bundles from our rich catalog of books and videos available at <strong><a href="https://github.com/PacktPublishing/" target="_blank">https://github.com/PacktPublishing/</a></strong>. Check them out!</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Download the color images</h1>
                
            
            
                
<p>We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You can download it here: <a href="https://www.packtpub.com/sites/default/files/downloads/PostGISCookbookSecondEdition_ColorImages.pdf">https://www.packtpub.com/sites/default/files/downloads/PostGISCookbookSecondEdition_ColorImages.pdf</a>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Conventions used</h1>
                
            
            
                
<p>There are a number of text conventions used throughout this book.</p>
<p><kbd>CodeInText</kbd>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: "We will import the <kbd>firenews.csv</kbd> file that stores a series of web news collected from various RSS feeds."</p>
<p>A block of code is set as follows:</p>
<pre>SELECT ROUND(SUM(chp02.proportional_sum(ST_Transform(a.geom,3734), b.geom, b.pop))) AS population <br/>  FROM nc_walkzone AS a, census_viewpolygon as b<br/>  WHERE ST_Intersects(ST_Transform(a.geom, 3734), b.geom)<br/>  GROUP BY a.id;</pre>
<p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p>
<pre>SELECT ROUND(SUM(chp02.proportional_sum(ST_Transform(a.geom,3734), b.geom, b.pop))) AS population <br/>  FROM nc_walkzone AS a, census_viewpolygon as b<br/>  WHERE <strong>ST_Intersects(ST_Transform(a.geom, 3734), b.geom)</strong><br/>  GROUP BY a.id;</pre>
<p>Any command-line input or output is written as follows:</p>
<pre><strong>&gt; raster2pgsql -s 4322 -t 100x100 -F -I -C -Y C:\postgis_cookbook\data\chap5\PRISM\us_tmin_2012.*.asc chap5.prism | psql -d postgis_cookbook</strong></pre>
<p><strong>Bold</strong>: Indicates a new term, an important word, or words that you see onscreen. For example, words in menus or dialog boxes appear in the text like this. Here is an example: "Clicking the Next button moves you to the next screen."</p>
<p>Warnings or important notes appear like this.</p>
<p>Tips and tricks appear like this.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Sections</h1>
                
            
            
                
<p>In this book, you will find several headings that appear frequently (<em>Getting ready</em>, <em>How to do it...</em>, <em>How it works...</em>, <em>There's more...</em>, and <em>See also</em>).</p>
<p>To give clear instructions on how to complete a recipe, use these sections as follows:</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This section tells you what to expect in the recipe and describes how to set up any software or any preliminary settings required for the recipe.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it…</h1>
                
            
            
                
<p>This section contains the steps required to follow the recipe.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How it works…</h1>
                
            
            
                
<p>This section usually consists of a detailed explanation of what happened in the previous section.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">There's more…</h1>
                
            
            
                
<p>This section consists of additional information about the recipe in order to make you more knowledgeable about the recipe.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">See also</h1>
                
            
            
                
<p>This section provides helpful links to other useful information for the recipe.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Get in touch</h1>
                
            
            
                
<p>Feedback from our readers is always welcome.</p>
<p class="mce-root"><strong>General feedback</strong>: Email <kbd>feedback@packtpub.com</kbd> and mention the book title in the subject of your message. If you have questions about any aspect of this book, please email us at <kbd>questions@packtpub.com</kbd>.</p>
<p><strong>Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="http://www.packtpub.com/submit-errata" target="_blank">www.packtpub.com/submit-errata</a>, selecting your book, clicking on the Errata Submission Form link, and entering the details.</p>
<p><strong>Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <kbd>copyright@packtpub.com</kbd> with a link to the material.</p>
<p class="mce-root"><strong>If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com/" target="_blank">authors.packtpub.com</a>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Reviews</h1>
                
            
            
                
<p>Please leave a review. Once you have read and used this book, why not leave a review on the site that you purchased it from? Potential readers can then see and use your unbiased opinion to make purchase decisions, we at Packt can understand what you think about our products, and our authors can see your feedback on their book. Thank you!</p>
<p>For more information about Packt, please visit <a href="https://www.packtpub.com/" target="_blank">packtpub.com</a>.</p>


            

            
        
    </body></html>