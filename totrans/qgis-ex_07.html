<html><head></head><body><div><div><div><div><h1 class="title"><a id="ch07"/>Chapter 7. Answering Questions with Suitability Analysis</h1></div></div></div><p>We live in a world full of various relationships that can be analyzed in functional, temporal, or spatial contexts. Spatial relationships are of particular interest when it comes to GIS, because here objects in space are represented in a way that facilitates explanations and analyses of their geographic relations. Suitability analysis is a fundamental part of GIS analysis that answers the question, "Where is the best place for something to be located?" In this chapter, you will be exposed to the fundamentals of suitability analysis through the search for the best place to live in. You will learn how to:</p><div><ul class="itemizedlist"><li class="listitem">interpret spatial relationships between objects</li><li class="listitem">express these relationships through spatial data</li><li class="listitem">analyze spatial data according to a set of predefined criteria</li><li class="listitem">overlap layers and interpret the results</li></ul></div><p>Before starting with this chapter, some essentials of suitability analysis and types of spatial relationships between objects will be explained.</p><div><div><div><div><h1 class="title"><a id="ch07lvl1sec49"/>Basics of suitability analysis</h1></div></div></div><p>Suitability analysis is recognized as a <a id="id434" class="indexterm"/>multi-criteria decision support approach. In other words, its main aim is to divide the area of interest into two categories based on a set of predefined criteria: appropriate for some kind of use (living, building, conservation, and so on) and inappropriate. A general approach that is used for suitability assessment is multiple layer overlays that support multi-criteria decisions. Depending on the data that represents suitability criteria and overlaid, there are two basic approaches available:</p><div><ol class="orderedlist arabic"><li class="listitem">Suitability analysis with vector data. This primarily utilizes operations such as buffering and their sequential combination using vector overlay operations, such as clipping, intersection, and union.</li><li class="listitem">Suitability analysis with raster data. This heavily relies on raster algebra, which is used to reclassify initial raster coverages and then combine them to produce binary or ranked suitability rasters. This approach is more flexible, as it makes it possible to produce multiple suitability classes and change the raster weight according<a id="id435" class="indexterm"/> to the importance of the factor it represents. As a result, the user is able to produce a compound result, but the workflow requires more effort connected to data preprocessing and consolidation decisions.</li></ol><div></div><p>The following table summarizes the main geoprocessing stages, advantages, and pitfalls of suitability assessment with vector and raster data:</p><div><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th valign="bottom"> </th><th valign="bottom">
<p>Vector data</p>
</th><th valign="bottom">
<p>Raster data</p>
</th></tr></thead><tbody><tr><td valign="top">
<p><strong>Main geoprocessing and analysis operations</strong></p>
</td><td valign="top">
<div><ul class="itemizedlist"><li class="listitem">Buffering</li><li class="listitem">Clip overlay</li><li class="listitem">Intersection overlay</li><li class="listitem">Union overlay</li></ul></div>
</td><td valign="top">
<div><ul class="itemizedlist"><li class="listitem">Vector data rasterization</li><li class="listitem">Proximity<a id="id436" class="indexterm"/> raster creation</li><li class="listitem">Raster reclassification</li><li class="listitem">Raster algebra addition</li><li class="listitem">Raster algebra multiplication</li><li class="listitem">Raster algebra subtraction</li></ul></div>
</td></tr><tr><td valign="top">
<p><strong>Advantages</strong></p>
</td><td valign="top">
<div><ul class="itemizedlist"><li class="listitem">Workflow <a id="id437" class="indexterm"/>quickness</li><li class="listitem">Workflow simplicity</li><li class="listitem">Good representation of man-made features</li></ul></div>
</td><td valign="top">
<div><ul class="itemizedlist"><li class="listitem">Simple data reclassification</li><li class="listitem">Good representation of continuous features</li><li class="listitem">Crisp and fuzzy classes are possible</li><li class="listitem">Possibility to weigh different coverages according to their importance</li><li class="listitem">Various assessments are possible, such as binary, ranked, and weighted</li></ul></div>
</td></tr><tr><td valign="top">
<p><strong>Limitations</strong></p>
</td><td valign="top">
<div><ul class="itemizedlist"><li class="listitem">Provide <a id="id438" class="indexterm"/>only crisp classes</li><li class="listitem">Usually provides binary (yes/no) assessments only</li></ul></div>
</td><td valign="top">
<div><ul class="itemizedlist"><li class="listitem">Reclassification<a id="id439" class="indexterm"/> and ranking subjectivity</li><li class="listitem">Workflow complexity</li></ul></div>
</td></tr></tbody></table></div><p>No matter what approach you will follow, the general suitability analysis workflow involves several common steps. We will now take a closer look at them to ensure better understanding of the suitability analysis system:</p><div><ol class="orderedlist arabic"><li class="listitem"><strong>Define the goal and objectives of your analysis</strong>: The question to be studied is formulated in general, and its applied significance is determined, which will later become the<a id="id440" class="indexterm"/> set of suitability criteria. Some popular suitability applications include the following:<div><ul class="itemizedlist"><li class="listitem"><strong>Agriculture</strong>: The <a id="id441" class="indexterm"/>appropriateness of the area for cultivation of certain crops is assessed.</li><li class="listitem"><strong>Retail</strong>: The area is assessed from a marketing prospective—whether it will attract new customers or buyers, or not. This type of analysis is in great <a id="id442" class="indexterm"/>demand when selecting preferable shopping locations.</li><li class="listitem"><strong>Renewable energy</strong>: Assessing<a id="id443" class="indexterm"/> land suitability for locations of wind power or solar power stations is a remarkable trend in the field of geospatial planning for sustainability.</li><li class="listitem"><strong>Nature conservation</strong>: Conservancy<a id="id444" class="indexterm"/> needs are prioritized using habitat suitability modeling, and the area is divided into locations that are more or less valuable for certain species' survival and reproduction.</li></ul></div><p>Generally speaking, the primary application of suitability analysis is in the field of land use planning, aimed at reasonable prioritization of various types of human activities within limited space and natural resources.</p></li><li class="listitem"><strong>Analyze the available data and define its relevance to the goals and objectives</strong>: Data's relevance to the goal and objectives is defined. Current data availability and<a id="id445" class="indexterm"/> future data requirements<a id="id446" class="indexterm"/> are analyzed, especially the knowledge of whether the current data derivatives can be used for analysis or not. For example, if we have to analyze suitability for agricultural needs, a DEM can be a great source. It provides not only basic information about the relief, but also some useful derivatives, such as slope and aspect. The main outcome of this stage is a list of primary data sources and their potential derivatives.</li><li class="listitem"><strong>Define the criteria of analysis</strong>: This is the most important stage, where the objectives of analysis<a id="id447" class="indexterm"/> are described as clear numerical criteria based on relevant data. Descriptive objectives are translated into the language of GIS analysis. At this stage, various types of spatial relationships between objects are analyzed, and some of the most popular relationships include the following:<div><ul class="itemizedlist"><li class="listitem"><strong>point-to-point relationships</strong>:<p>"is within": All schools that are<a id="id448" class="indexterm"/> within a distance of 1 km from a living place</p><p>"is nearest to": The primary school that is closest to a living place</p><div><img src="img/image00470.jpeg" alt="Basics of suitability analysis"/><div><p>Example of the "is within" point-to-point relationship</p></div></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem"><strong>point-to-line relationships</strong>:<p>"is nearest to": The<a id="id449" class="indexterm"/> street that is closest to a subway station entrance</p><div><img src="img/image00471.jpeg" alt="Basics of suitability analysis"/><div><p>Example of the "nearest to" point-to-line relationship</p></div></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem"><strong>point-to-polygon relationships</strong>:<p>"is contained in": All <a id="id450" class="indexterm"/>public schools within a certain community boundary</p><div><img src="img/image00472.jpeg" alt="Basics of suitability analysis"/><div><p>Example of the "is contained in" point-to-polygon relationship</p></div></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem"><strong>line-to-line relationships</strong>:<p>"crosses": Whether a<a id="id451" class="indexterm"/> particular trail crosses a road</p><p>"is within": Find all trails that are within a distance of 1 km from a particular river</p><p>"is connected to": Find all<a id="id452" class="indexterm"/> streets connected to a particular highway</p></li><li class="listitem"><strong>line-to-polygon relationships</strong>:<p>"intersects": Find all districts crossed<a id="id453" class="indexterm"/> by a cycleway</p><p>"contains": Find all streets that are completely within a certain district</p><div><img src="img/image00473.jpeg" alt="Basics of suitability analysis"/><div><p>Example of the "intersects" line-to-polygon relationship</p></div></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem"><strong>polygon-to-polygon</strong> <strong>relationships</strong>:<p>"completely within": Find all <a id="id454" class="indexterm"/>districts that are completely within a hazard zone</p><p>"is nearest to": Find the building that is nearest to a park</p></li></ul></div><div><img src="img/image00474.jpeg" alt="Basics of suitability analysis"/><div><p>Example of the "completely within" polygon-to-polygon relationship</p></div></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem"><strong>Primarily analyze and prepare the data</strong>: The data is analyzed according to the set of criteria defined in the previous stages. Common analysis operations involve selection by location, buffering, rasterization, proximity (raster distance), and so on. After all the necessary layers are ready, they should be prepared for <a id="id455" class="indexterm"/>overlay, which involves reprojection into a common coordinate reference system (if necessary), setting ranges for various ranks, and reclassification in the common ranking <a id="id456" class="indexterm"/>system. All the layers should contain values in uniform units, otherwise their overlay will be meaningless and hard to interpret.</li><li class="listitem"><strong>Overlay the data and interpret the results</strong>: Previously prepared layers are combined into a single<a id="id457" class="indexterm"/> coverage based on a set of user-defined rules. Depending on the data available and the rules applied, the following suitability assessments are possible:<div><ul class="itemizedlist"><li class="listitem"><strong>Binary suitability assessment</strong>: All of the area is divided into appropriate and inappropriate<a id="id458" class="indexterm"/> categories. This is the simplest type of assessment that can be obtained from vector data overlay.</li><li class="listitem"><strong>Ranked suitability assessment</strong>: Places are ranked from least appropriate to most appropriate<a id="id459" class="indexterm"/> based on the entire range of predefined criteria. This type of assessment can be derived from both vector and raster data. It lets you avoid simple yes/no assessments, which are not inherent to the real word. This advantage is counterbalanced by the subjectivity of data rankings and equal importance of various factors. Nevertheless, in the real world, their <a id="id460" class="indexterm"/>contribution to overall assessment can vary.</li><li class="listitem"><strong>Weighted suitability assessment</strong>: This is similar to the previous type of assessment and has <a id="id461" class="indexterm"/>only one significant difference: various factors can be weighted differently according to their importance for a certain type of activity. This type of assessments relies on the raster algebra approach and is thought to be all-inclusive, but not without some subjectivity, especially when it comes to factor weighting and interpreting the final result.</li></ul></div></li></ol><div></div><p>In the following sections, we will go through all of these stages individually and perform a weighted suitability assessment for living, combining various data types from the training dataset.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec50"/>Step 1 – define the goal and objectives of our analysis</h1></div></div></div><p>Throughout this tutorial, we<a id="id462" class="indexterm"/> will suppose that we are working on behalf of a young couple with a little child. They are looking for a perfect place to live in within a certain region of their interest. Our goal is to use the power of GIS-based suitability <a id="id463" class="indexterm"/>analysis methods and provide an objective and reliable answer to their question.</p><p>The goal of this analysis is to find areas that would be a good match for a young family with a child, given certain considerations. Many of their requirements are similar to those of a traditional housing estate development company. For example, proximity of subway stations, green zones, and public safety must be all taken into consideration. There are also some family-specific requirements that should be considered. As already mentioned, the family has a little baby, which means that we should take into account the existence of early childhood or elementary schools nearby. Also, they are keen on sports, and it would be great if the area they are going to live in has well-developed and active rest infrastructure. After this kind of review, we can formulate some more specific requirements and objectives:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Safety</strong>: The area should not be<a id="id464" class="indexterm"/> exposed to various natural and crime hazards</li><li class="listitem"><strong>Connectivity</strong>: It should be <a id="id465" class="indexterm"/>well-connected to the city's transport network</li><li class="listitem"><strong>Greenness and openness</strong>: It should be <a id="id466" class="indexterm"/>close to parks or other green areas</li><li class="listitem"><strong>Educational potential</strong>: Early<a id="id467" class="indexterm"/> childhood or elementary schools should be located in the neighborhood</li><li class="listitem"><strong>Active rest opportunities</strong>: These<a id="id468" class="indexterm"/> include a cycling network and athletic facilities</li><li class="listitem"><strong>Cultural life</strong>: Art galleries<a id="id469" class="indexterm"/> and museums can be recognized as general signs of cultural pulse beating</li></ul></div><p>Now that the main objectives and requirements have been clarified, we can proceed to the next step and study all of the available data to assess its relevance to our example.</p></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec51"/>Step 2 – analyze the available data and define its relevance</h1></div></div></div><p>As soon as we have defined<a id="id470" class="indexterm"/> the basic requirements, we need to<a id="id471" class="indexterm"/> explore the data layers that are potentially useful and relevant for our analysis. The training dataset contains a large number of datasets, and the most relevant among them are listed in the following table:</p><div><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th valign="bottom">
<p>Requirement</p>
</th><th valign="bottom">
<p>Layer</p>
</th><th valign="bottom">
<p>Potential relevance</p>
</th></tr></thead><tbody><tr><td rowspan="3" valign="top">
<p>Safety</p>
</td><td valign="top">
<p><code class="literal">hurricane_evacuation_zones</code></p>
</td><td valign="top">
<p>Hurricane evacuation zones are the areas of the city that may need to be evacuated due to life- and safety-related threats from a hurricane storm surge.</p>
</td></tr><tr><td valign="top">
<p><code class="literal">hurricane_inundation_zones</code></p>
</td><td valign="top">
<p>Hurricane inundation zones are the areas of worst-case storm surge inundation.</p>
</td></tr><tr><td valign="top">
<p><code class="literal">noise_heatmap</code></p>
</td><td valign="top">
<p>The raster created in the <em>Creating heat maps with the Heatmap plugin</em> section of <a class="link" title="Chapter 5. Answering Questions with Density Analysis" href="part0043.xhtml#aid-190861">Chapter 5</a>, <em>Answering Questions with Density Analysis</em>, that shows the spatial density of registered noise complaints might be useful for potential assessment for public safety.</p>
</td></tr><tr><td valign="top">
<p>Connectivity</p>
</td><td valign="top">
<p><code class="literal">subway_entrances</code></p>
</td><td valign="top">
<p>Locations of subway entrances.</p>
</td></tr><tr><td rowspan="2" valign="top">
<p>Greenness and openness</p>
</td><td valign="top">
<p><code class="literal">parks</code></p>
</td><td valign="top">
<p>A layer containing open space features, such as courts, tracks, parks, and so on.</p>
</td></tr><tr><td valign="top">
<p><code class="literal">tree_density</code></p>
</td><td valign="top">
<p>This is a raster layer created from the tree census data.</p>
</td></tr><tr><td valign="top">
<p>Educational potential</p>
</td><td valign="top">
<p><code class="literal">elementary_schools</code></p>
</td><td valign="top">
<p>These are the point locations of schools based on the official addresses. This layer includes some basic information about the school, such as the name, address, type, and principal's contact information.</p>
</td></tr><tr><td rowspan="2" valign="top">
<p>Active rest opportunities</p>
</td><td valign="top">
<p><code class="literal">bike_routes</code></p>
</td><td valign="top">
<p>Locations of bike lanes and routes throughout the city.</p>
</td></tr><tr><td valign="top">
<p><code class="literal">athletic_facilities</code></p>
</td><td valign="top">
<p>This layer contains athletic facilities and some basic information about them, including primary sport type, surface, dimensions, and so on.</p>
</td></tr><tr><td valign="top">
<p>Cultural life</p>
</td><td valign="top">
<p><code class="literal">museumart</code></p>
</td><td valign="top">
<p>Locations of museums and art galleries.</p>
</td></tr></tbody></table></div><p>These layers are primarily defined as most suitable<a id="id472" class="indexterm"/> for our analysis because they are directly related to the specified requirements, but most of them are represented as simple geometric primitives or density raster coverages that are<a id="id473" class="indexterm"/> difficult to be directly interpreted as suitability criteria. in the next stage, we will explore their main properties, including attributes, and will try to formulate specific and measurable criteria based on various types of spatial relationships between objects.</p></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec52"/>Step 3 – define the criteria of analysis</h1></div></div></div><p>According to the<a id="id474" class="indexterm"/> description of <code class="literal">hurricane_evacuation_zones</code>, there are six zones, ranked in the attribute field zone by risk of storm surge impact, with zone <code class="literal">1</code> being the region most likely to be flooded. In the event of a hurricane or tropical storm, residents in these zones may be ordered to evacuate. Areas with a zone value of <code class="literal">X</code> are not in any evacuation zone. Areas with a zone value of <code class="literal">0</code> are any of the following: water, small piers, or uninhabited islands. For the purpose of analysis, this layer should be rasterized and ranked according to the risk of hurricane impact, with rank values descending from areas that are not in any evacuation zone to those most likely to be flooded.</p><p>The <code class="literal">hurricane_inundation_zones</code> polygon layer contains information about the risk of storm surge inundation in the <code class="literal">category</code> attribute field, in which the value is the surge height in feet. Areas that are most likely to be inundated are assigned a value of <code class="literal">1</code>, and areas that are excluded from inundation modeling are assigned a value of <code class="literal">5</code>. This layer should be rasterized and ranked with the highest potential suitability values for excluded areas, and the lowest for the areas of the <code class="literal">1</code> category.</p><p>The <code class="literal">noise_heatmap</code> raster<a id="id475" class="indexterm"/> layer is a raster that should be ranked using several categories, with the lowest suitability values for the noisiest places and vice versa. A good thing here is that we don't need to rasterize this layer, as we did with the previous layers. At the same time, establishing the amount and ranges for the rankings brings subjectivity into our assessment. The <code class="literal">tree_density</code> layer, which is also a density raster, should be analyzed similarly.</p><p>The other selected layers should be analyzed first for their proximity. For this purpose, we will first rasterize them, then create continuous proximity rasters, and finally rank them under several categories according to the proximity values (the closer an object, the higher the suitability value). Again, in the case of user rankings, we will not be able to avoid some subjectivity in our assessments. Also, the final proximity rasters can be weighted according to their importance in the overall suitability assessment.</p></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec53"/>Step 4 – Analyze and prepare the data</h1></div></div></div><p>There are three main approaches to primary data analysis. These depend on the initial data type and available<a id="id476" class="indexterm"/> attributes:</p><div><ul class="itemizedlist"><li class="listitem"><strong>Rasterizing and ranking categorized vector layers</strong>: These are the layers that already<a id="id477" class="indexterm"/> contain all the necessary values, and at the preparation stage, all of them should be rasterized to the<a id="id478" class="indexterm"/> similar extent and resolution. Also, their categories should be<a id="id479" class="indexterm"/> ranked properly, with the highest values for the most suitable areas and vice versa. Examples of these layers are <code class="literal">hurricane_evacuation_zones</code>, <code class="literal">hurricane_inundation_zones</code>, and so on.</li><li class="listitem"><strong>Ranking density rasters</strong>: These are raster heat maps that should be converted from continuous coverages to categorized values where the highest value symbolizes<a id="id480" class="indexterm"/> the most appropriate area, and the lowest is related to the least suitable area. Examples of these layers are <code class="literal">noise_heatmap</code> and <code class="literal">tree_density</code>.</li><li class="listitem"><strong>Generating and ranking proximity rasters</strong>: This is the most tedious workflow. Vector<a id="id481" class="indexterm"/> layers should be rasterized first, and then<a id="id482" class="indexterm"/> proximity rasters should be created and ranked properly. This category encompasses the following vector layers: <code class="literal">subway_entrances</code>, <code class="literal">parks</code>, <code class="literal">public_schools</code>, <code class="literal">bike_routes</code>, <code class="literal">athletic_facilities</code>, and <code class="literal">museumart</code>.</li></ul></div><p>Note that for the final output, we will always have ranked unique value rasters, with the highest values denoting the most suitable areas. Also, it is important that all output rasters share a common extent, which is necessary for their proper overlay with the raster calculator and overall suitability assessment.</p><p>In the upcoming sections, we will go through the previously mentioned workflows for the example of raster layers. As soon as you grasp the principle, you will be able to prepare other layers independently.</p><div><div><div><div><h2 class="title"><a id="ch07lvl2sec51"/>Rasterizing and ranking categorized vector layers</h2></div></div></div><p>In this example, we will work on the <code class="literal">hurricane_evacuation_zones</code> layer. The attribute we are particularly interested in is <code class="literal">zone</code>. This is because by this attribute, areas are prioritized for evacuation. Areas with the lowest value, <code class="literal">1</code>, are the most likely to be evacuated, and vice versa. In this case, we can use these values directly to rank the raster. We have already done rasterization in <a class="link" title="Chapter 6. Answering Questions with Visibility Analysis" href="part0047.xhtml#aid-1CQAE1">Chapter 6</a>, <em>Answering Questions with Visibility Analysis</em>, in the <em>Step 1 – converting a buildings' vector layer to raster</em> section. This time, we will follow the same procedure.</p><p>One thing that prevents us from <a id="id483" class="indexterm"/>doing rasterization directly is that<a id="id484" class="indexterm"/> the attribute field that is used for rasterization should be numeric. If you check out the attribute field in the <strong>Fields</strong> section under <strong>Properties</strong>, you will see that the field zone has <strong>Type QString</strong>, and its values that contain numbers 1-6 and letters (X) are interpreted not as numbers but as sequences of symbols or strings. That's why this field is unavailable for rasterization and should first be converted to numbers. This can be done easily with <strong>Field calculator</strong>:</p><div><ol class="orderedlist arabic"><li class="listitem">
Open the attribute table of the layer using the right-click <strong>Open Attribute Table</strong> shortcut, or hit the relative button <img src="img/image00475.jpeg" alt="Rasterizing and ranking categorized vector layers"/> from the <strong>Attributes</strong> toolbar. In the attribute table toolbar, either click on the <strong>Open field calculator</strong> button or use the <em>Ctrl</em> + <em>I</em> keyboard shortcut.
</li><li class="listitem">First of all, we should get rid of the <code class="literal">X</code> value that cannot be interpreted as a number and cannot be converted to it. As we have only one line that contains the <code class="literal">X</code> value, we simply toggle editing mode by clicking on the <img src="img/image00476.jpeg" alt="Rasterizing and ranking categorized vector layers"/> button in the attribute table toolbar. Double-click on the cell and manually enter the new value of <code class="literal">7</code>. If <a id="id485" class="indexterm"/>you have multiple values to change, you can use the following expression in <strong>Field calculator</strong> to change some zone field values: <code class="literal">CASE WHEN "zone" = 'X' THEN '7' ELSE "zone" END</code>.</li><li class="listitem">
Click on the <img src="img/image00477.jpeg" alt="Rasterizing and ranking categorized vector layers"/> button to open the <strong>Field calculator</strong> dialog window as shown in the following screenshot, and make the following adjustments:
<div><ul class="itemizedlist"><li class="listitem">Make sure that the <strong>Create a new field</strong> toggle is on.</li><li class="listitem">Type the <strong>Output field</strong> name manually, for example, <code class="literal">rank</code>.</li><li class="listitem">Select <strong>Whole number (integer)</strong> from the <strong>Output field</strong> type list, as we are going to use short integers for ranking.</li><li class="listitem">Reduce <strong>Output field width</strong> to <code class="literal">1</code>. This is because the rank values don't exceed<a id="id486" class="indexterm"/> 10 and we don't want to create excess data by producing fields of length that exceed actual data values.</li></ul></div></li><li class="listitem">In the <strong>Expression</strong> field, we need to type a function that will be used to create the values of a new field. In the <strong>Functions</strong> list, expand the <strong>Conversions</strong> item and double-click on the <strong>toint</strong> function. According to its description, it converts a string to an integer number. Nothing changes if a value cannot be converted to integer (for example, <code class="literal">123asd</code> is invalid). After double-clicking, the function will be added to the expression with an open bracket, after which you should type (or double-click to add an item from <strong>Fields and Values</strong>) the field name to be converted in double quotation marks, and close the brackets. In our case, the resulting expression will be <code class="literal">toint( "zone" )</code>.</li><li class="listitem">After you've clicked on the <strong>OK</strong> button, the new field will appear at the end of the table. Deactivate editing mode, confirm saving of the edits, and exit the attribute table window.<div><img src="img/image00478.jpeg" alt="Rasterizing and ranking categorized vector layers"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div></div><p>The layer is ready for<a id="id487" class="indexterm"/> rasterization. Open a dialog window by going to <strong>Raster</strong> | <strong>Conversion</strong> | <strong>Rasterize (Vector to Raster)</strong>. In this dialog window as shown in the following screenshot, adjust the following settings:</p><div><ol class="orderedlist arabic"><li class="listitem">From the <strong>Input file (shapefile)</strong> drop-down list, select <code class="literal">hurricane_evacuation_zones</code>.</li><li class="listitem">From the <strong>Attribute</strong> drop-down list, select <code class="literal">rank</code>.</li><li class="listitem">In <strong>Output file for</strong><a id="id488" class="indexterm"/><strong> rasterized vectors (raster)</strong>, click on the <strong>Select</strong> button. Navigate to your working directory, and type <code class="literal">hurricane_evacuation_zones.tif</code> as the new layer name. This message will be shown: <strong>The output file doesn't exist. You must set up the output size or resolution to create it.</strong>. Click on <strong>OK</strong> and proceed to the next stage.</li><li class="listitem">
In the previous steps, you defined some major options. For convenience, we will create rasters in this tutorial with the same extent and resolution using <code class="literal">lidar_dem.tif</code> as a template. Click on the <img src="img/image00479.jpeg" alt="Rasterizing and ranking categorized vector layers"/> button to make the <code class="literal">gdal_rasterize</code> command-line parameters editable. After modification, the line should look similar<a id="id489" class="indexterm"/> to the following example:
<div><pre class="programlisting">
<strong>gdal_rasterize -a rank -l hurricane_evacuation_zones –a_nodata 0 -te 982199.3000000000465661 188224.6749999999883585 991709.3000000000465661 196484.6749999999883585 -tr 10 10 -ot UInt16 fullpath/hurricane_evacuation_zones.shp fullpath/hurricane_evacuation_zones.tif</strong>
</pre></div>This means that the output raster will contain rasterized values from the rank attribute field. Areas outside the layer polygons will be assigned a <a id="id490" class="indexterm"/>value of <code class="literal">0</code>, which will be interpreted as <code class="literal">nodata</code>. The output data type is a 16-bit unsigned integer.</li><li class="listitem">Click on the <strong>OK</strong> button. The result of rasterization will appear in the <strong>Layers</strong> panel.<div><img src="img/image00480.jpeg" alt="Rasterizing and ranking categorized vector layers"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div></div><p>The <code class="literal">hurricane_inundation_zones</code> layer should be preprocessed in a similar way. The layer contains some <code class="literal">zone</code> numbers. These can be interpreted as the severity of inundation risk; that is, the higher<a id="id491" class="indexterm"/> the number, the lower the risk. This means that we can use these values directly for ranking. In the case of this layer, the <code class="literal">gdal_rasterize</code><a id="id492" class="indexterm"/> command-line parameters will look as follows:</p><div><pre class="programlisting">
<strong>gdal_rasterize -a category -l hurricane_inundation_zones -a_nodata 0 -te 982199.3000000000465661 188224.6749999999883585 991709.3000000000465661 196484.6749999999883585 -tr 10 10 -ot UInt16 fullpath/hurricane_inundation_zones.shp fullpath/hurricane_inundation_zones.tif</strong>
</pre></div><p>When combined, these layers can give a cumulative assessment of suitability based on risk's severity from natural hazards.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec52"/>Ranking density rasters</h2></div></div></div><p>In the case of density rasters, we can use the ready <code class="literal">noise_heatamp.tif</code> created in the <em>Creating heat maps with the Heatmap plugin</em> section of <a class="link" title="Chapter 5. Answering Questions with Density Analysis" href="part0043.xhtml#aid-190861">Chapter 5</a>, <em>Answering Questions with Density Analysis</em>, and create the <code class="literal">tree_density.tif</code> layer ourselves. First, we will prepare a <code class="literal">noise_heatmap.tif</code> that is originally much larger by extent than the area of interest that we are working<a id="id493" class="indexterm"/> on in this chapter. To clip the raster layer go to <strong>Raster</strong> | <strong>Extraction</strong> | <strong>Clipper</strong>:</p><div><ol class="orderedlist arabic"><li class="listitem">From the <strong>Input file (raster)</strong> drop-down list select <strong>noise-heatmap</strong>, which is the raster to be clipped.</li><li class="listitem">In <strong>Output file</strong>, click on the <strong>Select</strong> button to set a path and name for the output file, for example, <code class="literal">noise_heatmap_clip.tif</code>.</li><li class="listitem">In the <strong>Clipping mode</strong> section, there are two possible modes:<div><ul class="itemizedlist"><li class="listitem"><strong>Extent</strong> is where you can enter the bounding box's coordinates manually or by dragging the map canvas. Use this approach to set the extent for your output file. Just remember that the extent should exceed the boundaries of the area of interest set by the <code class="literal">zipcode_bound</code> shapefile.</li><li class="listitem">If <strong>Mask layer</strong> is active, you can select a polygonal shapefile, and it will be used as a clipping boundary.</li></ul></div><p>After you have clicked on the <strong>OK</strong> button, the layer will be loaded into the map canvas.</p><div><img src="img/image00481.jpeg" alt="Ranking density rasters"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div></div><p>The following steps should be done to assess its value range, divide it into categories, and rank them:</p><div><ol class="orderedlist arabic"><li class="listitem">Double-click on the <code class="literal">noise_heatmap_clip</code> layer to open the <strong>Layer Properties</strong> window. In this window, go to the <strong>Metadata</strong> section. Explore the <strong>Properties</strong> window<a id="id494" class="indexterm"/> in the lower part of the dialog until you find the <strong>Band 1</strong> highlighted line with basic raster statistics, as shown here:<div><img src="img/image00482.jpeg" alt="Ranking density rasters"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">We will deal with the density raster, and its values are interpreted as the number of noise complaints per pixel area. This continuous surface should be divided into categories and they should be ranked according to the number of complaints. For this, a certain critical number of complaints should be set. There are no officially recognized limits and requirements, but we can interpret the mean dataset value as some critical number (it is slightly greater than 56, but we will use 50 for convenience). Divide the values into categories and assign<a id="id495" class="indexterm"/> them the following ranks (the less the number of complaints, the better):<div><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th valign="bottom">
<p>Category</p>
</th><th valign="bottom">
<p>Value range</p>
</th><th valign="bottom">
<p>Suitability rank</p>
</th></tr></thead><tbody><tr><td valign="top">
<p>1</p>
</td><td valign="top">
<p>Less than 50</p>
</td><td valign="top">
<p>5</p>
</td></tr><tr><td valign="top">
<p>2</p>
</td><td valign="top">
<p>50 to 100</p>
</td><td valign="top">
<p>4</p>
</td></tr><tr><td valign="top">
<p>3</p>
</td><td valign="top">
<p>100 to 150</p>
</td><td valign="top">
<p>3</p>
</td></tr><tr><td valign="top">
<p>4</p>
</td><td valign="top">
<p>150 to 200</p>
</td><td valign="top">
<p>2</p>
</td></tr><tr><td valign="top">
<p>5</p>
</td><td valign="top">
<p>Greater than 200</p>
</td><td valign="top">
<p>1</p>
</td></tr></tbody></table></div></li><li class="listitem">For the rankings, go to <strong>Raster</strong> | <strong>Raster Calculator</strong> and adjust the following options in its dialog window:<div><ul class="itemizedlist"><li class="listitem">Enter the <strong>Output layer</strong> path and name, for example, <code class="literal">noise_ranked</code></li><li class="listitem">Select the <code class="literal">noise_heatmap_clip @1</code> raster band and click on the <strong>Current layer extent</strong> button to make sure that the output layer will have the same resolution and extent</li><li class="listitem">In the <strong>Raster Calculator</strong> expression window, enter the following expression:<div><pre class="programlisting">("noise_heatmap_clip@1" &lt;= 50) *5 + ("noise_heatmap_clip@1" &gt; 50 AND"noise_heatmap_clip@1" &lt;= 100) *4 + ("noise_heatmap_clip@1" &gt; 100 AND "noise_heatmap_clip@1" &lt;= 150) *3 + ("noise_heatmap_clip@1" &gt; 150 AND "noise_heatmap_clip@1" &lt;= 200) *2+ ("noise_heatmap_clip@1" &gt; 200)*1</pre></div></li></ul></div><p>This expression means that every pixel that falls under a certain range given in brackets first assigned 1 value, and then it is ranked by a certain multiplier value, which is outside the brackets. After you click on the <strong>OK</strong> button, the reclassified raster will be loaded into the <strong>Layers</strong> panel.</p><div><img src="img/image00483.jpeg" alt="Ranking density rasters"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div></div><p>Pay attention to this: due to<a id="id496" class="indexterm"/> ranking, the heat map was inverted; that is, the noisiest hotspots get the lowest ranks and the quietest places get the highest.</p><p>In a similar way, we can create and rank heat maps for other point objects that are of interest in our suitability analysis, namely <code class="literal">trees</code> and <code class="literal">museumart</code>.</p></div><div><div><div><div><h2 class="title"><a id="ch07lvl2sec53"/>Generating and ranking proximity rasters</h2></div></div></div><p>The workflow will be explained in the<a id="id497" class="indexterm"/> example of the <code class="literal">subway_entrances</code> point vector layer:</p><div><ol class="orderedlist arabic"><li class="listitem">First, the layer should be<a id="id498" class="indexterm"/> rasterized in a common way. The <code class="literal">gdal_rasterize</code> line will contain the following parameters:<div><pre class="programlisting">
<strong>gdal_rasterize -l subway_entrances -burn 1 -a_nodata 0 -te 982199.3000000000465661 188224.6749999999883585 991709.3000000000465661 196484.6749999999883585 -tr 10 10 -ot Byte fullpath/subway_entrances.shp fullpath/subway_entances.tif</strong>
</pre></div><p>In the output layer, existing point locations will be marked by pixel values of <code class="literal">1</code>, while all other areas will be assigned the <code class="literal">nodata</code> values of <code class="literal">0</code>.</p></li><li class="listitem">Go to <strong>Raster</strong> | <strong>Analysis</strong> | <strong>Proximity (Raster Distance)</strong>. This dialog generates a raster proximity map that indicates the distance from the center of each pixel to the center of the nearest pixel identified as a target pixel. Target pixels are those pixels in the source raster for which the raster pixel value is in the set of target pixel values. If not specified, all nonzero pixels will be considered target pixels. In the dialog window, adjust the following parameters:<div><ul class="itemizedlist"><li class="listitem">From the <strong>Input file</strong> drop-down list, select the <code class="literal">subway_entrances</code> layer.</li><li class="listitem">In the <strong>Output file</strong>, click on the <strong>Select</strong> button and specify a path and a name for the output layer, for example, <code class="literal">subway_entances_proximity.tif</code>.</li><li class="listitem">Make sure that the <strong>Dist units</strong> parameter is activated and set to <strong>GEO</strong>. In this case, the distances generated will be in georeferenced coordinates (feet).</li></ul></div><p>The resulting parameters line will look like this:</p><div><pre class="programlisting">
<strong>gdal_proximity.bat fullpath/subway_entances.tif Ifullpath/subway_entances_proximity.tif -distunits GEO -of GTiff</strong>
</pre></div><div><h3 class="title"><a id="note33"/>Note</h3><p>To convert a vector to raster, we used a tool from the GDAL. It is called <code class="literal">gdal_proximity</code>. You <a id="id499" class="indexterm"/>can read an extensive synopsis of the <code class="literal">gdal_proximity</code> parameters and their values at <a class="ulink" href="http://www.gdal.org/gdal_proximity.html">http://www.gdal.org/gdal_proximity.html</a>.</p></div><div><img src="img/image00484.jpeg" alt="Generating and ranking proximity rasters"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">The proximity raster<a id="id500" class="indexterm"/> should be divided into discrete categories and they should be ranked. For this operation, we will use <strong>Raster Calculator</strong>. The major problem here is to decide on the amount and properly select<a id="id501" class="indexterm"/> the proximity categories for ranking. The optimal decision depends on the so-called walking radius, that is, the distance that people are comfortable to walk up to. Generally, transport planners have observed that the walking distance that most people seem to cover comfortably— beyond which ridership falls drastically—is about 400 m (approximately 1300 feet). We will apply this 400 m rule to categorize the layer values (min as zero and max as 4988.71) into four categories, with <a id="id502" class="indexterm"/>the following ranks:<div><table border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th valign="bottom">
<p>Category</p>
</th><th valign="bottom">
<p>Proximity values range (feet)</p>
</th><th valign="bottom">
<p>Suitability rank</p>
</th></tr></thead><tbody><tr><td valign="top">
<p>1</p>
</td><td valign="top">
<p>Less than 1,300</p>
</td><td valign="top">
<p>4</p>
</td></tr><tr><td valign="top">
<p>2</p>
</td><td valign="top">
<p>1,300 to 2,600</p>
</td><td valign="top">
<p>3</p>
</td></tr><tr><td valign="top">
<p>3</p>
</td><td valign="top">
<p>2,600 to 3,900</p>
</td><td valign="top">
<p>2</p>
</td></tr><tr><td valign="top">
<p>4</p>
</td><td valign="top">
<p>Greater than 3,900</p>
</td><td valign="top">
<p>1</p>
</td></tr></tbody></table></div><p>Go to <strong>Raster</strong> | <strong>Raster Calculator</strong> and adjust the main options. Enter the following <a id="id503" class="indexterm"/>expression to generate a new <code class="literal">subway_entrances_proximity_ranks</code> raster:</p><div><pre class="programlisting">
<strong>("subway_entances_proximity@1" &lt;= 1300) *4 + ("subway_entances_proximity@1" &gt; 1300 AND "subway_entances_proximity@1" &lt;= 2600) *3 + ("subway_entances_proximity@1" &gt; 2600 AND "subway_entances_proximity@1" &lt;= 3900) *2 + ("subway_entances_proximity@1" &gt; 3900)*1</strong>
</pre></div></li></ol><div></div><p>In the following screenshot, you can see what continuous (on the left) and ranked (on the right) rasters may look like:</p><div><img src="img/image00485.jpeg" alt="Generating and ranking proximity rasters"/></div><p style="clear:both; height: 1em;"> </p><p>In a similar way, you can <a id="id504" class="indexterm"/>preprocess other vector layers that should be analyzed from the proximity position, namely <code class="literal">parks</code>, <code class="literal">bike_routes</code>, <code class="literal">athletic_facilities</code>, and <code class="literal">elementary schools</code>. As a result, you will have a set of raster layers ranked with several categories<a id="id505" class="indexterm"/> according to the proximity of selected objects. The higher the rank, the closer the objects. As a general rule of thumb, apply the 400 m (or 1300 feet) value to rank the rasters properly.</p></div></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec54"/>Step 5 – overlay the data and interpret the results</h1></div></div></div><p>Now we have everything<a id="id506" class="indexterm"/> ready for overlaying the rasters and generating a cumulative suitability assessment. In the following table, you can see<a id="id507" class="indexterm"/> the full list of layers, weighted by their importance for general suitability. Weights are simple coefficients within a range of 0 to 1, and they are used to modify the rank properly.</p><div><table border="1"><colgroup><col/><col/><col/><col/><col/><col/><col/></colgroup><thead><tr><th valign="bottom">
<p>No.</p>
</th><th valign="bottom">
<p>Raster layer name</p>
</th><th valign="bottom">
<p>Raster layer type</p>
</th><th valign="bottom">
<p>Rank min</p>
</th><th valign="bottom">
<p>Rank max</p>
</th><th valign="bottom">
<p>Weight coefficient</p>
</th><th valign="bottom">
<p>Max possible value = max rank * weight</p>
</th></tr></thead><tbody><tr><td valign="top">
<p>1</p>
</td><td valign="top">
<p><code class="literal">athletic_facilities_proximity_ranks</code></p>
</td><td valign="top">
<p>Proximity</p>
</td><td valign="top">
<p>1</p>
</td><td valign="top">
<p>5</p>
</td><td valign="top">
<p>0.04</p>
</td><td valign="top">
<p>0.2</p>
</td></tr><tr><td valign="top">
<p>2</p>
</td><td valign="top">
<p><code class="literal">bike_routes_proximity_ranks</code></p>
</td><td valign="top">
<p>Proximity</p>
</td><td valign="top">
<p>1</p>
</td><td valign="top">
<p>3</p>
</td><td valign="top">
<p>0.06</p>
</td><td valign="top">
<p>0.18</p>
</td></tr><tr><td valign="top">
<p>3</p>
</td><td valign="top">
<p><code class="literal">hurricane_evacuation_zones</code></p>
</td><td valign="top">
<p>Zoning</p>
</td><td valign="top">
<p>1</p>
</td><td valign="top">
<p>7</p>
</td><td valign="top">
<p>0.16</p>
</td><td valign="top">
<p>1.12</p>
</td></tr><tr><td valign="top">
<p>4</p>
</td><td valign="top">
<p><code class="literal">hurricane_inundation_zones</code></p>
</td><td valign="top">
<p>Zoning</p>
</td><td valign="top">
<p>1</p>
</td><td valign="top">
<p>5</p>
</td><td valign="top">
<p>0.16</p>
</td><td valign="top">
<p>0.8</p>
</td></tr><tr><td valign="top">
<p>5</p>
</td><td valign="top">
<p><code class="literal">Museumart_ranked</code></p>
</td><td valign="top">
<p>Density</p>
</td><td valign="top">
<p>1</p>
</td><td valign="top">
<p>4</p>
</td><td valign="top">
<p>0.05</p>
</td><td valign="top">
<p>0.2</p>
</td></tr><tr><td valign="top">
<p>6</p>
</td><td valign="top">
<p><code class="literal">Noise_ranked</code></p>
</td><td valign="top">
<p>Density</p>
</td><td valign="top">
<p>1</p>
</td><td valign="top">
<p>5</p>
</td><td valign="top">
<p>0.13</p>
</td><td valign="top">
<p>0.65</p>
</td></tr><tr><td valign="top">
<p>7</p>
</td><td valign="top">
<p><code class="literal">Parks_proximity_ranks</code></p>
</td><td valign="top">
<p>Proximity</p>
</td><td valign="top">
<p>1</p>
</td><td valign="top">
<p>3</p>
</td><td valign="top">
<p>0.12</p>
</td><td valign="top">
<p>0.36</p>
</td></tr><tr><td valign="top">
<p>8</p>
</td><td valign="top">
<p><code class="literal">Schools_proximity_ranks</code></p>
</td><td valign="top">
<p>Proximity</p>
</td><td valign="top">
<p>1</p>
</td><td valign="top">
<p>4</p>
</td><td valign="top">
<p>0.15</p>
</td><td valign="top">
<p>0.6</p>
</td></tr><tr><td valign="top">
<p>9</p>
</td><td valign="top">
<p><code class="literal">subway_entrances_proximity_ranks</code></p>
</td><td valign="top">
<p>Proximity</p>
</td><td valign="top">
<p>1</p>
</td><td valign="top">
<p>4</p>
</td><td valign="top">
<p>0.06</p>
</td><td valign="top">
<p>0.24</p>
</td></tr><tr><td valign="top">
<p>10</p>
</td><td valign="top">
<p><code class="literal">Tree_ranked</code></p>
</td><td valign="top">
<p>Density</p>
</td><td valign="top">
<p>1</p>
</td><td valign="top">
<p>4</p>
</td><td valign="top">
<p>0.07</p>
</td><td valign="top">
<p>0.28</p>
</td></tr><tr><td colspan="3" valign="top" style="text-align: center">
<p>Total</p>
</td><td valign="top">
<p>10</p>
</td><td valign="top">
<p>44</p>
</td><td valign="top">
<p>1.0</p>
</td><td valign="top">
<p>4.63</p>
</td></tr></tbody></table></div><p>The expression to be used for our assessment of suitability can be constructed by several steps:</p><div><ol class="orderedlist arabic"><li class="listitem">All the available factors that are represented by raster layers should be multiplied by their weight coefficients and summarized, like this: <code class="literal">(factor_1*weight + factor_2*weight + factor_3*weight + … factor_n*weight)</code>. This kind of assessment gives gross suitability, which is difficult for interpretation because the obtained values are not calculated relatively to the possible minimum and maximum.</li><li class="listitem">For simplicity of interpretation, a gross suitability assessment can be divided into the sum of the maximum possible value. The extended formula will look like this: <em>(factor_1*weight + factor_2*weight + factor_3*weight + … factor_n*weight) / (factor_1_max*weight + factor_2_max*weight + factor_3_max*weight + … factor_n_max*weight)</em>. As a result, the output value range will<a id="id508" class="indexterm"/> be from 0 to 1, where the maximum suitability values are close to 1.</li><li class="listitem">Optionally, the result can be multiplied by 100. Then the output values will be a percentage of suitability.</li></ol><div></div><p>Go to <strong>Raster</strong> | <strong>Raster Calculator</strong> to perform an assessment:</p><div><ul class="itemizedlist"><li class="listitem">Set the path and name for <strong>Output layer</strong></li><li class="listitem">Select a layer from the <strong>Raster bands</strong> list to set up <strong>Current layer extent</strong>, for example, <code class="literal">hurricane_inundataion</code></li><li class="listitem">In the <strong>Expression</strong> window, enter the following formula (if you are not sure about the values, check out the preceding table):<div><pre class="programlisting">
<strong>( ( "athletic_facilities_proximity_ranks@1" * 0.04 + "bike_routes_proximity_ranks@1" * 0.06+"hurricane_evacuation_zones@1" * 0.16+"hurricane_inundation_zones@1" * 0.16+"museumart_ranked@1" * 0.05+"noise_ranked@1" * 0.13+"parks_proximity@1" * 0.12+"schools_proximity@1" * 0.15+"subway_entrances_proximity_ranks@1" * 0.06+"tree_ranked@1"*0.07) / 4.63 ) *1000</strong>
</pre></div></li></ul></div><p>After you have clicked on the <strong>OK</strong> button, the resulting layer will be added to the map canvas. The suitability raster value's range varies from 42 to 96 percent. Thus, it can easily be classified and interpreted. Navigate to <strong>Layer properties</strong> | <strong>Style</strong> and adjust the rendering properties to those shown in the following screenshot:</p><div><img src="img/image00486.jpeg" alt="Step 5 – overlay the data and interpret the results"/></div><p style="clear:both; height: 1em;"> </p><p>After applying these<a id="id509" class="indexterm"/> settings, the layer will look as follows:</p><div><img src="img/image00487.jpeg" alt="Step 5 – overlay the data and interpret the results"/></div><p style="clear:both; height: 1em;"> </p><p>We can use this raster<a id="id510" class="indexterm"/> as a basis for a primary visual suitability assessment of the area of our interest, or go further and combine it with other layers to identify the exact blocks that match best the entire range of suitability criteria.</p><p>In that case, we need to perform the<a id="id511" class="indexterm"/> inverse sequence of steps: select the most suitable areas, vectorize, and overlay the polygons of maximum suitability with residential living areas to identify the blocks and buildings that would be particularly suitable:</p><div><ol class="orderedlist arabic"><li class="listitem">The initial suitability raster should be categorized into only two classes by a limit of 90 percent suitability. Go to <strong>Raster</strong> | <strong>Raster Calculator</strong> and define the path and name for the output raster (for example <code class="literal">max_suitability</code>). In the <strong>Expression</strong> window, enter <code class="literal">"suitability, %@1" &gt;= 90</code>. On the next page, you can see that the resulting layer contains only two classes: suitable (the value is 1; assigned to areas with suitability greater than or equal to 90 percent), and unsuitable (the value is 0).</li><li class="listitem">Now we need to vectorize these areas to be able to query vector layers with them. Open the <strong>Polygonize (Raster to vector)</strong> dialog window by going to <strong>Raster</strong> | <strong>Conversion</strong> and<a id="id512" class="indexterm"/> adjust the following parameters:<div><img src="img/image00488.jpeg" alt="Step 5 – overlay the data and interpret the results"/></div><p style="clear:both; height: 1em;"> </p><div><ul class="itemizedlist"><li class="listitem">Select<a id="id513" class="indexterm"/> <code class="literal">max_suitability</code> as the raster to be polygonized from <strong>Input file (raster)</strong>.</li><li class="listitem">Provide the path and name of the output shapefile in <strong>Output file for polygons (shapefile)</strong>, for example, <code class="literal">max_suitability_polygons</code>.</li><li class="listitem">Activate the <strong>Field name</strong> toggle and accept the default <code class="literal">DN</code> value. This option is responsible for creating and populating field with class values from the initial raster.</li></ul></div><div><img src="img/image00489.jpeg" alt="Step 5 – overlay the data and interpret the results"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">After you click on<a id="id514" class="indexterm"/> the <strong>OK</strong> button, the resulting shapefile will be added to the <strong>Layers</strong> panel. Originally, the layer contains polygons of all <a id="id515" class="indexterm"/>classes, whereas we are interested only in class 1. For the purpose of selecting and deleting unnecessary polygons, we will use the <strong>Select features using an expression</strong> option:<div><ul class="itemizedlist"><li class="listitem">
Open the <code class="literal">max_suitability</code> attribute table by clicking on the <img src="img/image00475.jpeg" alt="Step 5 – overlay the data and interpret the results"/> button in the <strong>Attribute</strong> panel, or from the right-click <strong>Open Attribute Table</strong> layer shortcut.
</li><li class="listitem">
In the attribute table toolbar panel, click on the <strong>Select features using an expression</strong> button, <img src="img/image00490.jpeg" alt="Step 5 – overlay the data and interpret the results"/>, and enter the following expression: <code class="literal">"DN" = 0</code>. After clicking on <strong>OK</strong>, all the polygons that satisfy the<a id="id516" class="indexterm"/> condition will be highlighted in the attribute table and on the map canvas.</li><li class="listitem">
As we don't need these polygons for further analysis, we should delete them. In the attribute table toolbar panel, click on the <img src="img/image00476.jpeg" alt="Step 5 – overlay the data and interpret the results"/> button to toggle editing mode, or use the <em>Ctrl</em> + <em>E</em> keyboard shortcut. Now we <a id="id517" class="indexterm"/>can execute <strong>Delete selected features</strong> using the <img src="img/image00491.jpeg" alt="Step 5 – overlay the data and interpret the results"/> button, or just press <em>Del</em> from the keyboard.
</li><li class="listitem">
After deleting the unnecessary data, don't forget to save your edits (using <img src="img/image00492.jpeg" alt="Step 5 – overlay the data and interpret the results"/> or <em>Ctrl</em> + <em>S</em>) and deactivate editing mode. In the following screenshot, you can see that the layer contains only those polygons that encompass the maximum suitability values, which are set to 90 percent:
</li></ul></div><div><img src="img/image00493.jpeg" alt="Step 5 – overlay the data and interpret the results"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Now this layer can<a id="id518" class="indexterm"/> be used to overlay with other vector layers and analyze spatial relationships between objects, as was described in the <em>Basics of</em> <em>suitability analysis </em>section. For example, we can identify the zoning areas of primary residential living area that are of potential interest to<a id="id519" class="indexterm"/> us according to the suitability criteria:<div><ul class="itemizedlist"><li class="listitem">Open a dialog window by going to <strong>Vector</strong> | <strong>Research tools</strong> | <strong>Select by location</strong>. In this dialog, you should first select the layer from which objects are to be selected—<code class="literal">residential_zoning</code> from the <strong>Select features in:</strong> drop-down list—like this:<div><img src="img/image00494.jpeg" alt="Step 5 – overlay the data and interpret the results"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">the <strong>that intersect features in:</strong> drop-down list, select <code class="literal">max_suitability_polygons</code>, which will be used as a selector.</li><li class="listitem">There are several <a id="id520" class="indexterm"/>overlay selection options. Activate <strong>Include input features that intersect the selection features</strong>. Only those polygons that are within the query mask <a id="id521" class="indexterm"/>boundary or intersect it will be added to the selection. Click on the <strong>OK</strong> button. You will see the following result on the map canvas:</li></ul></div><div><img src="img/image00495.jpeg" alt="Step 5 – overlay the data and interpret the results"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">Similarly, you<a id="id522" class="indexterm"/> can try another type of query and<a id="id523" class="indexterm"/> identify the exact buildings that satisfy a suitability condition. In that case, the dialog window will look as follows:<div><img src="img/image00496.jpeg" alt="Step 5 – overlay the data and interpret the results"/></div><p style="clear:both; height: 1em;"> </p><p>After clicking <a id="id524" class="indexterm"/>on the <strong>OK</strong> button, you <a id="id525" class="indexterm"/>will see the following results on the map canvas:</p><div><img src="img/image00497.jpeg" alt="Step 5 – overlay the data and interpret the results"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div></div><p>Notice that this time, we<a id="id526" class="indexterm"/> have selected buildings that were completely within<a id="id527" class="indexterm"/> the maximum suitability areas. So, we are ready to provide a solid and specific answer to the question, "Which is the best place to live?"</p></div>
<div><div><div><div><h1 class="title"><a id="ch07lvl1sec55"/>Summary</h1></div></div></div><p>In this chapter, you followed the entire path of spatial analysis, from raising questions to providing concrete answers, that is, finding a specific place and objects on a map. You explored some basics of suitability analysis and saw how it defines and interprets spatial relations between objects. Also, you explored a lot of operations related to data preprocessing: rasterization, reclassification, raster algebra performance, and so on. Finally, you reviewed spatial queries that are based on overlaying spatial objects and analyzing spatial relationships between them.</p><p>Executing analysis operations step by step is good when you learn, but if you have a lot of data and limited time to provide the answer, then you should improve the performance of your analysis. This can be done with the QGIS Processing framework. It provides access to hundreds of geoprocessing tools (from the simplest to the most sophisticated).</p><p>In the next chapter, we will introduce QGIS Processing, and you will learn how to automate spatial analysis routines by creating your own chains of instruments (models).</p></div></body></html>