- en: Linking Data together
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将数据链接在一起
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍以下菜谱：
- en: Joining two tables
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接两个表
- en: Labeling features using a joined table
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用连接的表标注要素
- en: Querying data in a joined table
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在连接的表中查询数据
- en: Creating and using a Relate
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建和使用关联
- en: Joining features spatially
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 空间连接要素
- en: Creating and using a relationship class using existing data
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用现有数据创建和使用关系类
- en: Introduction
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: You now know that GIS data includes more than just what you may see in a map.
    Each layer has additional information linked to it which is stored in an Attribute
    Table. Also, not all data you display in a map is stored in a traditional GIS
    format. Some may be stored in standalone tables or even spreadsheets. These can
    also be displayed in a map if they include an address or *x* and *y* coordinates.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在知道，GIS 数据不仅包括您在地图上可能看到的内容。每个图层都附加了额外的信息，这些信息存储在属性表中。此外，您在地图中显示的所有数据并不都存储在传统的
    GIS 格式中。一些可能存储在独立的表中，甚至存储在电子表格中。如果它们包含地址或 *x* 和 *y* 坐标，这些也可以在地图中显示。
- en: However, there is a lot data out there in various databases which may not have
    *x* and *y* coordinates, or an address, or even be part of our GIS, but we need
    to be able to use that information to perform queries, display information, or
    conduct analysis in the GIS. This data may come from other systems, such as tax
    appraisal, permitting, inspections, work order, and asset management systems.
    If we want to use data stored in these systems we must be able to link it to our
    GIS data. ArcGIS Pro provides a couple of methods to do this, Join and Relate.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在各种数据库中存在大量数据，这些数据可能没有 *x* 和 *y* 坐标，或者地址，甚至可能不是我们 GIS 的一部分，但我们需要能够使用这些信息在
    GIS 中进行查询、显示信息或进行分析。这些数据可能来自其他系统，例如税务评估、许可、检查、工作订单和资产管理系统。如果我们想使用这些系统存储的数据，我们必须能够将其链接到我们的
    GIS 数据。ArcGIS Pro 提供了一些方法来实现这一点，即连接和关联。
- en: At other times, we may need to transfer or link data together that is in our
    GIS. ArcGIS Pro supports several tools which allow you to do this, including a
    Spatial Join and creating relationship classes within a geodatabase.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在其他时候，我们可能需要将我们 GIS 中的数据传输或链接在一起。ArcGIS Pro 支持几个工具，允许您执行此操作，包括空间连接和在地理数据库中创建关系类。
- en: In this chapter, you will learn the steps needed to link data in ArcGIS Pro
    to increase the capabilities of your datasets. You will learn how to create and
    use joins and relates. You will perform a spatial join to combine attributes between
    two layers based on a spatial relationship. Lastly, you will learn how to create
    and configure a relationship class within a geodatabase. You will start with a
    simple relationship class by creating an annotation feature class which is linked
    to another layer. Then you will create a relationship class manually, which will
    link two feature classes together.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将学习在 ArcGIS Pro 中链接数据以增强数据集功能的步骤。您将学习如何创建和使用连接和关联。您将执行空间连接，根据空间关系在两个图层之间结合属性。最后，您将学习如何在地理数据库中创建和配置关系类。您将从创建一个与另一个图层关联的注释要素类的一个简单关系类开始。然后您将手动创建关系类，这将连接两个要素类。
- en: Joining two tables
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连接两个表
- en: Join is one of two basic methods which can be used to link data in ArcGIS Pro.
    Joins link two datasets together to create a single virtual dataset within a single
    map in a project. This allows you to use the joined data to query, label, and
    symbolize using the information from both joined datasets.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 连接是两种基本方法之一，可用于在 ArcGIS Pro 中链接数据。连接将两个数据集连接在一起，在项目中的单个地图中创建一个单一虚拟数据集。这允许您使用连接的数据进行查询、标注和符号化，使用来自两个连接数据集的信息。
- en: In this recipe, you will join the Parcel layer to a table which contains a list
    of owner names. You will learn the requirements needed to join two tables and
    how to complete the join.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，您将把地块图层连接到一个包含所有者名单的表中。您将学习连接两个表所需的条件以及如何完成连接。
- en: Getting ready
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: For this recipe, you will need to ensure that you have installed the book data
    and have ArcGIS Pro installed. An ArcGIS Pro Basic license level will be sufficient
    for this recipe.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个菜谱，您需要确保已安装书籍数据和 ArcGIS Pro。ArcGIS Pro 基本许可证级别对于这个菜谱就足够了。
- en: How to do it...
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: To begin, you will need to start ArcGIS Pro.
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要开始，您需要启动 ArcGIS Pro。
- en: In the ArcGIS Pro start window, click on Open another project.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 ArcGIS Pro 的开始窗口中，点击打开另一个项目。
- en: 'Select Computer from the Open window and then click Browse in the area on the
    right:'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在打开窗口中选择计算机，然后点击右侧区域中的浏览：
- en: '![](img/387b3e86-65c1-4db8-a245-abaa85a2fd6c.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/387b3e86-65c1-4db8-a245-abaa85a2fd6c.png)'
- en: Navigate to `C:\Student\ArcGISProCookbook\Chapter3\Joining Data` by clicking
    on C:\ in the area on the left of the Open Project window. Then double-click on
    Student, ArcGISProCookbook, Chapter3, and Joining Data folders.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击打开项目窗口左侧的C:\，导航到`C:\Student\ArcGISProCookbook\Chapter3\Joining Data`。然后双击Student、ArcGISProCookbook、Chapter3和Joining
    Data文件夹。
- en: Select the Joining Data.aprx project file and click OK.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“Joining Data.aprx”项目文件并点击“确定”。
- en: The project will open with a single map named City of Thomasville. The map contains
    two layers, City Limits and Parcels, plus the Topographic basemap. First you will
    review the information contained in the Attribute Table for the Parcel layer.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 项目将以一个名为“托马斯维尔市”的单个地图打开。该地图包含两个图层，City Limits和Parcels，以及地形底图。首先，你将查看地块层的属性表中的信息。
- en: In the Contents pane, right click on the Parcels layer and select Attribute
    Table from the menu that appears. The Attribute Table for the Parcels layer should
    open in a window located at the bottom of the map view.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容窗格中，右键点击“地块”层，然后从出现的菜单中选择“属性表”。地块层的属性表应该在地图视图底部的窗口中打开。
- en: '![](img/eb92faeb-8057-4c50-ac0f-e29b6d558afc.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/eb92faeb-8057-4c50-ac0f-e29b6d558afc.png)'
- en: 'Take a moment to look at the fields the Attribute Table contains, and answer
    the following question:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 仔细查看属性表包含的字段，并回答以下问题：
- en: '**Question**: What fields does the Parcels Attribute Table contain?'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：地块属性表包含哪些字段？'
- en: '**Answer**:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: As you can see, the table contains information about the parcel, such as the
    **Parcel Identification Number** (**PIN**), RealKey, OwnerKey, and more. It does
    not, however, contain any information about who owns the parcels. However, you
    do know that information is available in the **Computer Aided Mass Appraisal**
    (**CAMA**) system located in the Tax Appraisal Office for the County.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，该表包含关于地块的信息，例如**地块识别号**（**PIN**）、RealKey、OwnerKey等。然而，它并没有包含任何关于谁拥有这些地块的信息。然而，你知道这些信息在位于县税务评估办公室的**计算机辅助大量评估**（**CAMA**）系统中是可用的。
- en: They have provided you with a table of all the land owners in the County. You
    now need to join it to your Parcels layer.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 他们已经为你提供了一个包含该县所有土地所有者信息的表格。现在你需要将它与你的地块层连接起来。
- en: In the Catalog pane, normally located on the right side of the interface, expand
    the Databases folder by clicking on the small arrowhead to the left.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录窗格中，通常位于界面的右侧，通过点击左侧的小箭头展开数据库文件夹。
- en: Expand the Thomaston.gbd so that you can see its contents. You should see at
    least three feature classes (CityLimits, Parcels, and Street_CL) and a couple
    of stand-alone tables (Owners and Parcels_Sales).
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开Thomaston.gbd，以便查看其内容。你应该能看到至少三个要素类（CityLimits、Parcels和Street_CL）以及几个独立的表（Owners和Parcels_Sales）。
- en: Right-click on the Owners table and select Add to Current Map.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击“所有者”表，然后选择“添加到当前地图”。
- en: '![](img/3740f774-d297-4758-b4dc-91d0a4a39cbc.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/3740f774-d297-4758-b4dc-91d0a4a39cbc.png)'
- en: The newly added table should appear in your Contents pane at the bottom of the
    list. Now you will look at the data contained within this newly added table.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 新添加的表应该出现在内容窗格的底部列表中。现在你将查看这个新添加表中的数据。
- en: In the Contents pane, right click on the Owner table you just added and select
    Open. The Owners table should open in the same area as the Parcels Attribute Table.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容窗格中，右键点击你刚刚添加的所有者表，然后选择“打开”。所有者表应该在地块属性表相同的区域打开。
- en: 'Review the Owners table, paying close attention to what fields it contains.
    Then answer the following question:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看所有者表，注意它包含的字段。然后回答以下问题：
- en: '**Question**: What fields does the Owner table contain?'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：所有者表包含哪些字段？'
- en: '**Answer**:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: As you can see, this table does have information about all the land owners in
    the County. However, it does not have any information about the parcels they own.
    In order to join the Owner information to the Parcels, you must identify a **key
    field**. A key field is a field in each table which contains data common to the
    two tables you are attempting to link. Now you will identify a key field in each
    table, which you will use to link them together.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，这个表确实包含了该县所有土地所有者的信息。然而，它并没有包含任何关于他们拥有的地块的信息。为了将所有者信息与地块连接起来，你必须识别一个**键字段**。键字段是每个表中包含两个你试图链接的表共有的数据的字段。现在你将在每个表中识别一个键字段，你将使用它来将它们连接起来。
- en: Key fields are not required to have the same names in both tables. The names
    can be different. However, they must be the same data type and contain the same
    data values. By the same data values, that means they must be exactly the same.
    This includes capitalization and the number of spaces if the key fields contain
    text. This why it is often best to use numeric values if possible.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 关键字段在两个表中不需要有相同的名称。名称可以不同。然而，它们必须是相同的数据类型，并包含相同的数据值。通过相同的数据值，这意味着它们必须完全相同。这包括如果关键字段包含文本，则大小写和空格的数量。这就是为什么如果可能的话，最好使用数值。
- en: 'In the table view area, click on the tab at the top of the table which says
    Owners. Hold your mouse button down and begin to drag it downward. A series of
    icons should appear in the middle of the table view. Drag your mouse to the icon
    which has the filled beige area located on the right side as shown ahead. Then
    release your mouse:'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在表格视图区域，单击表格顶部的选项卡，上面写着所有者。按住鼠标按钮并开始向下拖动。表格视图中应出现一系列图标。将鼠标拖到右侧有填充米色区域的图标，如图所示。然后释放鼠标：
- en: '**![](img/2e7744a1-9462-4f86-9efe-845ffb6fab57.png)**'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/2e7744a1-9462-4f86-9efe-845ffb6fab57.png)**'
- en: Click on Owners tab and drag to docking icon
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 点击所有者选项卡并将其拖动到停靠图标。
- en: You should now see the two tables side by side, as shown in the following image.
    This allows you to see data in both tables at the same time.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在应该看到两个表并排，如下面的图像所示。这允许您同时看到两个表中的数据。
- en: '**![](img/2bf17ff9-5db2-4513-b0cc-d8f1d38c3ac6.png)**'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/2bf17ff9-5db2-4513-b0cc-d8f1d38c3ac6.png)**'
- en: Two tables docked side by side
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 两个表并排停靠
- en: In ArcGIS Pro, you can actually drag the tables out so that they are viewable
    individually in their own window. These individual windows can then be positioned
    anywhere in your display, including on other monitors. They can also be sized
    individually as well. This can make it easier to view the multiple tables at one
    time.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在ArcGIS Pro中，您实际上可以将表拖出，以便在它们自己的窗口中单独查看。然后，这些单独的窗口可以放置在您的显示中的任何位置，包括在其他监视器上。它们也可以单独调整大小。这可以使同时查看多个表更容易。
- en: In the Parcels table, right click on the Ownerkey field and select Sort Descending.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在包裹表中，右键单击所有者键字段并选择降序排序。
- en: In the Owners table, right click on the OwnKey field and select Sort Descending.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在所有者表中，右键单击所有者键字段并选择降序排序。
- en: 'Review and compare the values for these fields in each table, then answer the
    following question:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查并比较每个表中的这些字段的值，然后回答以下问题：
- en: '**Question**: These two fields appear to contain the same values?'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：这两个字段看起来包含相同的值吗？'
- en: '**Answer**:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: Now that you have verified the two fields contain like values, you need to verify
    the field types are the same.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经验证了这两个字段包含类似值，您需要验证字段类型是否相同。
- en: 'Right-click on the OwnerKey field in the Parcels table and select Fields from
    the menu that appears:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在包裹表中的所有者键字段上右键单击，然后从出现的菜单中选择字段：
- en: '**![](img/f34e048e-3b9c-42fc-bb18-23cadda19827.png)**'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/f34e048e-3b9c-42fc-bb18-23cadda19827.png)**'
- en: Perform the same operation on the OwnKey in the Owners table.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在所有者表中对所有者键执行相同的操作。
- en: 'Your table view should now look like this:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 您的表格视图现在应该看起来像这样：
- en: '**![](img/171f0e55-d9c6-495a-81b4-523b7db9c55d.png)**'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/171f0e55-d9c6-495a-81b4-523b7db9c55d.png)**'
- en: Table design views side by side
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 侧边表设计视图
- en: Verify that the Data Type is the same for the Ownerkey field in the Parcels
    table and the OwnKey in the Owners table.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证包裹表中的所有者键字段和所有者表中的所有者键字段的数据类型是否相同。
- en: As you can see, the fields are both a Double data type. Since the fields contain
    the same data values and the field types are the same, these fields can be used
    to link the two tables. Now, it is time to link them.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，字段都是双精度数据类型。由于字段包含相同的数据值且字段类型相同，因此可以使用这些字段将两个表链接起来。现在，是时候将它们链接起来。
- en: Close the Tables and the Fields tab by clicking on the small X.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过单击小X关闭表和字段选项卡。
- en: It is not required to close the tables before joining them. You can leave them
    open if desired. It is just cleaner to close them before you join, to reduce screen
    clutter.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在连接表之前不需要关闭表。如果需要，可以保持它们打开。但在连接之前关闭它们会更整洁，以减少屏幕杂乱。
- en: In the Contents pane, right click on the Parcels layer. Go to Joins and Relates
    and select Add Join.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容面板中，右键单击包裹层。转到连接和关系并选择添加连接。
- en: '![](img/b6f9181e-aae6-43c7-8f81-6010b1342e21.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b6f9181e-aae6-43c7-8f81-6010b1342e21.png)'
- en: The Geoprocessing pane should open with the Add Join tool.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 地理处理面板应该打开，并带有添加连接工具。
- en: Verify that the Layer Name or Table View in the Add Join tool is set to Parcels.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认添加连接工具中的层名称或表视图设置为Parcels。
- en: For the Input Join Field, select OwnerKey.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于输入连接字段，选择OwnerKey。
- en: For the Join Table, select Owners by clicking on the small drop-down arrow in
    the cell. The Owners table may automatically be populated into the cell. If so,
    you do not need to change it.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于连接表，通过点击单元格中的小下拉箭头选择所有者。所有者表可能会自动填充到单元格中。如果是这样，您不需要更改它。
- en: Set the Output Join Field to OwnKey using the drop-down arrow if needed. It
    may be automatically set.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，使用下拉箭头将输出连接字段设置为OwnKey。它可能已经自动设置。
- en: 'Verify that the Add Join tool looks like the following screenshot. If it does,
    click Run:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认添加连接工具看起来像以下截图。如果是这样，点击运行：
- en: '![](img/63eebde1-5cbb-4cac-8a83-fd10a74cb019.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/63eebde1-5cbb-4cac-8a83-fd10a74cb019.png)'
- en: Close the Geoprocessing pane once the Add Join tool has completed successfully
    by clicking on the small X in the upper-right corner of the pane.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦添加连接工具成功完成，点击窗格右上角的小X关闭地理处理窗格。
- en: Right-click on the Parcels layer in the Contents pane and select Attribute Table.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容窗格中右键点击地块层，选择属性表。
- en: Using the scroll bar at the bottom of the Parcels table, scroll through the
    table fields.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用Parcels表底部的滚动条浏览表字段。
- en: '**Question**: What do you see now that you have joined the Parcel and Owners
    table?'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：您现在连接了地块和所有者表，看到了什么？'
- en: '**Answer**:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: As you can see, the fields that were on the Owners table have now been added
    to the Parcels Attribute Table. Now that those fields have been added, you can
    use that information to locate all parcels owned by a specific owner, or label
    parcels with the owner. Let’s put that to the test.  You will start with labeling
    the parcels with fields from the joined table in the next recipe.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，之前在所有者表中存在的字段现在已经被添加到了地块属性表中。现在这些字段已经添加，您可以使用这些信息来定位特定所有者的所有地块，或者用所有者标签标记地块。让我们来测试一下。在下一个菜谱中，您将开始使用连接表中的字段来标记地块。
- en: Close the Parcels table by clicking on the small X in the tab which shows the
    table name.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击标签页中显示的表名旁边的小X关闭Parcels表。
- en: Click on the Project tab in the ribbon, and click on Save, located in the panel
    on the left side.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区中点击“项目”标签，然后点击左侧面板中的“保存”。
- en: If you are continuing to the next recipe, keep ArcGIS Pro open. If you are not
    you may close ArcGIS Pro.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您正在继续下一个菜谱，请保持ArcGIS Pro打开。如果您不继续，您可以关闭ArcGIS Pro。
- en: How it works...
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In this recipe, you joined the Owners table to the Parcels table. ArcGIS Pro
    links these two tables together, based on a key field in each table. The key fields
    are not required to have the same name, but must have the exact same values and
    be the same data type. ArcGIS Pro then compares the two tables and where the values
    are identical, it adds those fields and values to the primary table in the map.
    Where the values are not identical, it leaves the field values for the joined
    fields blank or null.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，您将所有者表连接到了地块表。ArcGIS Pro根据每个表中的键字段将这两个表链接在一起。键字段不需要有相同的名称，但必须具有完全相同的值和相同的数据类型。然后ArcGIS
    Pro比较这两个表，当值相同的地方，它会将这些字段和值添加到地图的主表中。当值不同时，它会为连接字段留空或空值。
- en: The Join only exists in the map in which you create it. It will not be applied
    to other maps within the ArcGIS Pro project. It is also not permanently applied
    to the feature class or table. Join works best when you want to link data which
    comes from other systems or datasets which will not be maintained in your GIS
    directly, such as the Owners table, which is maintained in the County’s CAMA system.
    You just get an updated download of the data on a regular basis and replace the
    old table with the new one, so that when you open the map which contains the join,
    you always see the most current available information.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 连接只存在于您创建它的地图中。它不会应用于ArcGIS Pro项目中的其他地图。它也不会永久应用于要素类或表。连接在您想要链接来自其他系统或数据集的数据时效果最佳，这些数据集不会直接在您的GIS中维护，例如，所有者表是在县CAMA系统中维护的。您只需定期下载数据的更新版本，并用新表替换旧表，这样当您打开包含连接的地图时，您总是看到最新的可用信息。
- en: Labeling features using a joined table
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用连接表标记要素
- en: Now that you have learned how to join tables, and seen how it links them to
    provide more information, what can you do with that information? In short, you
    can do anything with the joined information that you can do with the normal attributes
    in the layers Attribute Table.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经学会了如何连接表，并看到了它是如何将它们链接起来以提供更多信息，那么您可以用这些信息做什么呢？简而言之，您可以用连接信息做任何您可以在层的属性表中用正常属性做的事情。
- en: In this recipe, you will learn how you label features using the data from the
    joined table. You will label each parcel with its PIN and Owner Name. You will
    use the new Arcade language to do this. You will learn more about Arcade in [Chapter
    11](6de6f9c1-9e73-4d0d-98b3-1b27818c49c5.xhtml), *Introducing Arcade*.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个配方中，您将学习如何使用连接表中的数据标记要素。您将使用PIN和业主名称标记每个地块。您将使用新的Arcade语言来完成这项工作。您将在第11章中了解更多关于Arcade的信息，*介绍Arcade*。
- en: Getting ready
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: You will need to have completed the previous recipe before you can begin this
    one.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在您开始这个之前，您需要完成前面的配方。
- en: How to do it...
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: If you closed ArcGIS Pro after completing the previous recipe, open the `Joining
    Data.aprx` project by following the same instructions as shown in the beginning
    of the previous recipe.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您在完成前面的配方后关闭了ArcGIS Pro，请按照前面配方开头所示的同一步骤打开`Joining Data.aprx`项目。
- en: Click on Bookmarks on the Map tab in the ribbon. Select the Labeling bookmark.
    This will zoom you in to an area located in the center of the City.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区地图标签页上点击书签。选择标签书签。这将使您放大到位于城市中心的区域。
- en: Select the Parcels layer in the Contents pane so that the Feature Layer Contextual
    menu appears with three new tabs.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容窗格中选择地块层，以便出现带有三个新标签的要素层上下文菜单。
- en: Click on the Labeling tab in the ribbon.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区中点击标签页。
- en: '![](img/6e656114-1fcd-4477-8f18-49cb5b9e4490.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6e656114-1fcd-4477-8f18-49cb5b9e4490.png)'
- en: Click on the Label button located in the Layer group on the Labeling tab. It
    should be the located on the far-left side of the ribbon.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击标签页上的标签组中的标签按钮。它应该位于功能区最左侧。
- en: Text will appear in the map showing the PIN for each parcel. The values being
    displayed are being pulled from the Attribute Table for the Parcels layer. If
    you look in the Label Class group on the Labeling tab, you will see a setting
    for Field. It is set to Parcels.PIN. This means that the values being displayed
    are those found in the PIN field from the original Parcels table. You will now
    build an expression using the Arcade language, which will label each parcel with
    its PIN from the Parcels table and with its owner from the joined Owners table.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 文本将出现在地图上，显示每个地块的PIN。正在显示的值是从地块层的属性表中提取的。如果您查看标签页上的标签类组，您会看到一个字段设置。它设置为Parcels.PIN。这意味着正在显示的值是来自原始地块表的PIN字段中的值。您现在将使用Arcade语言构建一个表达式，该表达式将使用地块表的PIN和所有者从连接的业主表中标记每个地块。
- en: 'Click on the Expression button located to the right of the Field cell in the
    Label Class group. The Label Class pane should appear on the right of the interface.
    This is where you will build your labeling expression:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于字段单元格右侧的表达式按钮。标签类面板应该出现在界面的右侧。这就是您将构建您的标签表达式的地方：
- en: '**![](img/703bf266-1bf9-42d3-8cdf-c74ed89bdbce.png)**'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/703bf266-1bf9-42d3-8cdf-c74ed89bdbce.png)**'
- en: 'Click in form of `$feature[‘Parcels.Pin’]`, the expression area in the Label
    Class pane. Type `“PIN: “+` in the expression area, as shown ahead:'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '在标签类面板的表达式区域中点击`$feature[‘Parcels.Pin’]`，在表达式区域中输入`“PIN: “+`，如以下所示：'
- en: '**![](img/841e32ec-0c3d-42d1-9cd0-7ad57dec8c84.png)**'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/841e32ec-0c3d-42d1-9cd0-7ad57dec8c84.png)**'
- en: Click on the Validate button located at the bottom of the expression area. It
    looks like a green check mark. If it says Expression is valid, continue. If it
    does not, double check your expression against the previous graphic to make sure
    you typed in the correct syntax.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击表达式区域底部的验证按钮。它看起来像绿色的勾号。如果它说表达式有效，请继续。如果不有效，请仔细检查您的表达式与前面的图形，以确保您输入了正确的语法。
- en: 'In the expression area, add the following to the end of the expression you
    have already created: `+Textformatting.Newline+"Owner: "`.'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '在表达式区域中，将以下内容添加到您已经创建的表达式末尾：`+Textformatting.Newline+"业主: "`.'
- en: In the Fields window in the Labeling Class pane, scroll down until you see Owners.LASTNAME.
    Double click on Owners.LASTNAME to add it to the expression.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在标签类面板的字段窗口中，向下滚动直到看到Owners.LASTNAME。双击Owners.LASTNAME将其添加到表达式中。
- en: 'Your full labeling expression should now say:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 您的完整标签表达式现在应该是这样的：
- en: '[PRE0]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Click on the Validate button once again to verify your syntax. If it says, Your
    expression is valid, click Apply. If it does not, verify your expression. If you
    continue to have issues, read the following tip:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次点击验证按钮以验证您的语法。如果它说，您的表达式有效，请点击应用。如果不，请验证您的表达式。如果您继续遇到问题，请阅读以下提示：
- en: If you are having issues creating the expression, you can load one that has
    already been created. Just click on the Import button located next to the validate
    button and navigate to `C:\Student\ArcGISProCookbook\Chapter3\Joining Data. Select
    the PIN_Owner_Label_Expression.lxp`. Then click OK to import the expression.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在创建表达式时遇到问题，可以加载一个已经创建的表达式。只需点击位于验证按钮旁边的导入按钮，导航到`C:\Student\ArcGISProCookbook\Chapter3\Joining
    Data`。选择`PIN_Owner_Label_Expression.lxp`。然后点击确定导入表达式。
- en: Save your project.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目。
- en: You have just labeled each parcel using the PIN field found in the original
    Parcels Attribute Table and the LastName field from the Owners table. You also
    added descriptive text to the label to make it easier to know what the labels
    were. Now you will clean up your labels so they are easier to read.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经使用原始地块属性表中的PIN字段和所有者表中的LastName字段找到的每个地块进行标记。您还添加了描述性文本到标签，使其更容易知道标签是什么。现在您将清理您的标签，使它们更容易阅读。
- en: ArcGIS Pro supports several languages for writing labeling expressions. In addition
    to Arcade, you can write expressions using Python, VBScript, and Jscript. Labeling
    expressions written for ArcMap and saved to expression files (`.exp`) are not
    compatible with ArcGIS Pro.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: ArcGIS Pro支持多种语言编写标签表达式。除了Arcade之外，您还可以使用Python、VBScript和Jscript编写表达式。为ArcMap编写的标签表达式，并保存到表达式文件（`.exp`）中，与ArcGIS
    Pro不兼容。
- en: 'Click on the Position tab in the Label Class pane, as shown in the following
    screenshot:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在标签类窗格中，点击位置选项卡，如图下所示：
- en: '![](img/6c74fb81-07a0-401a-b85a-010b520f83a9.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6c74fb81-07a0-401a-b85a-010b520f83a9.png)'
- en: Click on the Position button in the Position tab in the Label Class pane.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击标签类窗格位置选项卡中的位置按钮。
- en: If required, expand the Placement option and select Land Parcel placement from
    the drop-down menu.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，展开放置选项，并从下拉菜单中选择土地地块放置。
- en: Locate where it says Horizontal in polygon and click on the drop-down arrow.
    Select Straight in polygon.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位到说水平在多边形的地方，点击下拉箭头。在多边形中选择直线。
- en: Click on the Fitting Strategy button located at the top of the Labeling Class
    pane. It looks like a Knight chess piece.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击标签类窗格顶部的适配策略按钮。它看起来像一枚骑士棋子。
- en: Expand Reduce size by clicking on the small arrowhead.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击小箭头展开“缩小尺寸”。
- en: Click on the box next to Reduce font size to enable this function.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击旁边的“减少字体大小”框以启用此功能。
- en: 'Set the following parameters:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置以下参数：
- en: 'Font size reduction:'
  id: totrans-124
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 字体大小减少：
- en: 'Lower limit: 4.0'
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下限：4.0
- en: 'Step interval: 1.0'
  id: totrans-126
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 步长间隔：1.0
- en: 'Font width compression:'
  id: totrans-127
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 字体宽度压缩：
- en: 'Lower limit: 60'
  id: totrans-128
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下限：60
- en: 'Step interval: 5.0'
  id: totrans-129
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 步长间隔：5.0
- en: 'The Label Class pane should now look like the following screenshot:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 标签类窗格现在应该看起来像以下截图：
- en: '![](img/3324d95e-3cb8-46d8-966d-26631e334ba7.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3324d95e-3cb8-46d8-966d-26631e334ba7.png)'
- en: Click on the Labeling tab in the ribbon.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击功能区中的标签选项卡。
- en: In the Visibility Range group, click on the drop-down arrow for Out Beyond and
    select <Current>. This will mean that the labels you just configured will only
    appear when you zoom in to the current scale of your map. If you zoom out to show
    a larger area, the labels will not be displayed.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在可见范围组中，点击“超出”的下拉箭头，选择<当前>。这意味着您刚刚配置的标签只有在放大到地图当前比例时才会显示。如果您缩小以显示更大的区域，标签将不会显示。
- en: '**![](img/88526b58-be13-4b03-b9b4-b2717817bdc0.png)**'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/88526b58-be13-4b03-b9b4-b2717817bdc0.png)**'
- en: Save your project.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目。
- en: In this recipe, you labeled the parcels in the map with values from the PIN
    field in the Parcels Attribute Table and the LASTNAME field in the Owners table
    which you had joined to the parcels in the last recipe. You did this using Esri’s
    new Arcade expression language.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，您使用Esri的新Arcade表达式语言，将地图中的地块用PIN字段在地块属性表中的值和从上一个菜谱中连接到地块的所有者表中的LASTNAME字段的值进行标记。您是这样做的。
- en: 'In the first part of your expression, you added descriptive text which allowed
    users to know what the labeled values were. You did this in Arcade by using double
    quotes. This tells ArcGIS Pro to simply display the text values found inside the
    double quotes. For example, your expression contained `“PIN: “`. This produced
    a label which showed up in the map a `PIN:` .'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '在表达式的第一部分，您添加了描述性文本，使用户知道标签的值是什么。您在Arcade中使用双引号来完成此操作。这告诉ArcGIS Pro简单地显示双引号内找到的文本值。例如，您的表达式包含`“PIN:
    “`。这产生了一个在地图上显示为`PIN:`的标签。'
- en: 'This was then followed up with a reference to a database field. In Arcade,
    you did this using the `+` to indicate another part of the expression, followed
    by `$feature[‘Parcels.PIN]`. This displays the value found in the PIN field within
    the Parcels Attribute Table. The `+` sign must be used between each part of the
    expression. You then displayed the owner name on another line in the label using
    `Textformatting.Newline` in your expression.  Once you set the owner name to be
    displayed on a separate line, you add more descriptive text by including `“Owner:
    “` in your expression. Lastly, you displayed the owners name by calling to the
    LASTNAME field in the joined Owners table by including `$feature[‘Owners.LASTNAME’]`
    at the end of your expression. This produced a label for each parcel that looked
    like this in the map:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '然后是对数据库字段的引用。在Arcade中，您使用`+`来表示表达式的另一部分，然后是`$feature[‘Parcels.PIN’]`。这显示了在地块属性表中的PIN字段中找到的值。必须在表达式的每一部分之间使用`+`符号。然后，您在标签的另一行上显示所有者名称，在表达式中使用`Textformatting.Newline`。一旦将所有者名称设置为单独一行，您通过在表达式中包含`“Owner:
    “`来添加更多描述性文本。最后，您通过在表达式的末尾包含`$feature[‘Owners.LASTNAME’]`来调用连接的所有者表中的LASTNAME字段，显示了每个地块在地图上的标签，如下所示：'
- en: 'PIN: `T22 028`'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PIN：`T22 028`
- en: 'Owner: `Unknown`'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有者：`未知`
- en: You then adjusted several configuration settings for the labels in the Label
    Class pane to make the labels fit in the parcels better and to be easier to read.
    You did this by setting the placement option to Land parcel placement. This automatically
    applies some settings that are preconfigured in ArcGIS Pro for placing text within
    a parcel. This cleaned up several of the overlapping labels, but left many parcels
    without a label.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，您在标签类窗格中调整了几个标签的配置设置，以使标签更好地适应地块并更容易阅读。您通过将放置选项设置为土地地块放置来完成此操作。这会自动应用ArcGIS
    Pro中预先配置的一些设置，用于在地块内放置文本。这清理了几个重叠的标签，但仍有许多地块没有标签。
- en: So, next you set the positioning to be Straight in a polygon as opposed to the
    default Horizontal in a polygon. This allows ArcGIS Pro to fit labels diagonally
    within the polygon if needed, first adjusting the size of the font. This allowed
    ArcGIS Pro to label a few more parcels, but still not all of them.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，接下来您将定位设置为多边形中的直线，而不是默认的横向。这允许ArcGIS Pro在需要时以对角线方式在多边形内适应标签，首先调整字体大小。这允许ArcGIS
    Pro为更多地块添加标签，但仍然不是全部。
- en: Next, you moved over to the Fitting Strategy to adjust the font size for your
    labels. You enabled Reduce font size. This allowed ArcGIS Pro to automatically
    resize the font within the parameters you designated to help fit the label within
    the parcels. By making this adjustment you were able to get all the parcels in
    the view labeled.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您转到拟合策略，调整标签的字体大小。您启用了“减小字体大小”。这允许ArcGIS Pro在您指定的参数内自动调整字体大小，以帮助将标签适应地块。通过这次调整，您能够为视图中的所有地块添加标签。
- en: Querying data in a joined table
  id: totrans-144
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在连接的表中查询数据
- en: Labeling is not the only thing you can do with a joined table. You can also
    use the joined information to perform queries and analysis. In this recipe, you
    will perform a query to locate all the parcels owned by the City of Thomaston.
    You will then export that information to a spreadsheet using a geoprocessing tool.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 标记不是您可以使用连接表做的唯一事情。您还可以使用连接的信息来执行查询和分析。在本食谱中，您将执行查询以定位Thomaston市拥有的所有地块。然后，您将使用地理处理工具将此信息导出到电子表格中。
- en: Getting ready
  id: totrans-146
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: You must have completed the recipe titled *Joining two tables* from this chapter
    before you can perform this recipe. You will also need to have Microsoft Excel
    or a similar application installed which will open a spreadsheet.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在您执行此食谱之前，您必须完成本章中标题为“连接两个表”的食谱。您还需要安装Microsoft Excel或类似的应用程序，该程序可以打开电子表格。
- en: How to do it...
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: If you closed ArcGIS Pro after completing the previous recipe, open the `Joining
    Data.aprx` project by following the same instructions as shown in the beginning
    of the previous recipe. Otherwise continue with this recipe.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你完成了前面的食谱后关闭了ArcGIS Pro，请按照前面食谱开头所示的同一步骤打开`Joining Data.aprx`项目。否则，继续此食谱。
- en: Click on the Map tab in the ribbon.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击功能区上的地图标签页。
- en: Click on the Full Extent button in the Navigate group on the Map tab. It looks
    like a small globe.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击地图标签页上的导航组中的全范围按钮。它看起来像一个小地球。
- en: Click on the Select by Attributes tool in the Selection group on the Map tab
    in the ribbon. This will open the Select Layer by Attribute tool in the Geoprocessing
    pane.
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区地图标签页上的选择组中点击选择属性工具。这将在地理处理窗格中打开选择图层属性工具。
- en: Set the Layer Name or Table View to Parcels using the drop-down arrow.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将图层名称或表视图设置为包裹。
- en: Ensure the Selection type is set to New selection.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保选择类型设置为新的选择。
- en: Under Expression, click on the Add Clause button.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在表达式下，点击添加条款按钮。
- en: '![](img/2a5f234f-3a7c-4624-a409-f49480993b76.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2a5f234f-3a7c-4624-a409-f49480993b76.png)'
- en: Set the Field to LASTNAME using the drop-down arrow.
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将字段设置为LASTNAME。
- en: Ensure the operator is set to is Equal to.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保运算符设置为等于。
- en: In the last cell, either type City of Thomaston, or pick it from the list of
    values shown with the drop-down arrow.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在最后一个单元格中，要么输入汤姆斯顿市，要么使用下拉箭头从显示的值列表中选择它。
- en: '**![](img/a9389df5-ddf7-4aa2-b418-2687d6a5a844.png)**'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/a9389df5-ddf7-4aa2-b418-2687d6a5a844.png)**'
- en: Verify that your clause looks like the preceding screenshot and click Add.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认你的条款看起来像前面的截图，然后点击添加。
- en: Click the Verify button located below the Expression to make sure your syntax
    is correct. The Verify button looks like a green check mark.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于表达式下方下面的验证按钮，以确保你的语法正确。验证按钮看起来像绿色的勾号。
- en: If your SQL expression is valid, click Run.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你的SQL表达式有效，点击运行。
- en: Click on the List by Selection button located at the top of the Contents pane.
    The button is three polygons, one blue and two white. Look at the number to the
    right of Parcels. Verify that you have selected 84 parcels.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于内容窗格顶部的列表按选择按钮。按钮是三个多边形，一个蓝色和两个白色。查看包裹右侧的数字。确认你已经选择了84个包裹。
- en: You have just selected all the parcels owned by the City of Thomaston using
    a Select by Attributes query. You were able to do that using data from the joined
    Owners table.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 你刚刚使用属性查询选择了汤姆斯顿市拥有的所有包裹。你能够做到这一点是因为使用了连接的“所有者”表中的数据。
- en: If you are already familiar with writing SQL where clauses, you can click on
    the small SQL button located under Expression and manually type the query you
    just built. The proper syntax would be `Owners.LASTNAME = 'City of Thomaston'`.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已经熟悉编写SQL where子句，你可以点击位于表达式下方的小SQL按钮，手动输入你刚刚构建的查询。正确的语法将是`Owners.LASTNAME
    = 'City of Thomaston'`。
- en: Click on the small arrow in a circle located at the top of the Geoprocessing
    pane.
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于地理处理窗格顶部的圆形中的小箭头。
- en: '![](img/a4481b26-8d5a-4767-b87a-f4be979f1018.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a4481b26-8d5a-4767-b87a-f4be979f1018.png)'
- en: Click on the Toolboxes tab located near the top of the Geoprocessing pane.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于工具箱标签页顶部的工具箱标签。
- en: Expand the Conversion Tools toolbox by clicking on the small arrowhead.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击小箭头展开转换工具箱。
- en: Expand the Excel toolset using the same method.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用相同的方法扩展Excel工具集。
- en: Double-click on the Table to Excel python script.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击“表到Excel”Python脚本。
- en: In the toolboxes, different icons indicate different types of tools. Hammers
    indicate system tools. Scrolls indicate python scripts. Series of connected squares
    indicate models created with ModelBuilder.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在工具箱中，不同的图标表示不同类型的工具。锤子表示系统工具。卷轴表示Python脚本。一系列连接的方块表示使用模型构建器创建的模型。
- en: Set the Input Table to Parcels using the drop-down arrow.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将输入表设置为包裹。
- en: For the Output Excel File, click on the Browse button located at the end of
    the cell.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于输出Excel文件，点击单元格末尾的浏览按钮。
- en: In the Save As window that appears, navigate to the MyProjects folder located
    in `C:\Student\ArcGISProCookbook\`.
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在出现的“另存为”窗口中，导航到位于`C:\Student\ArcGISProCookbook\`的MyProjects文件夹。
- en: Type `Parcels owned by Thomaston` into the File Name cell.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件名单元格中输入“汤姆斯顿市拥有的包裹”。
- en: Verify that your Save As window looks similar to the following screenshot and
    click Save. The folders you see in the MyProject folder will be different.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认你的“另存为”窗口看起来类似于以下截图，然后点击保存。你在MyProject文件夹中看到的文件夹将不同。
- en: '![](img/29f1fe79-7f1e-4d43-8eda-97c82e7cded7.png)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![](img/29f1fe79-7f1e-4d43-8eda-97c82e7cded7.png)'
- en: Your Table to Excel tool should look like the following. If it does, click Run.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的 Table to Excel 工具应该看起来如下。如果它看起来是这样，请点击运行。
- en: '![](img/2023bb4e-cbed-4924-994f-8cb7745b86d5.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/2023bb4e-cbed-4924-994f-8cb7745b86d5.png)'
- en: When you run a geoprocessing tool with features selected, the tool only works
    on the selected features. So, in this case, you only exported the parcels which
    are owned by the City of Thomaston to a spreadsheet.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 当您运行具有选定要素的地理处理工具时，该工具仅对选定的要素起作用。因此，在这种情况下，您只导出了由汤姆斯顿市拥有的地块到电子表格中。
- en: Open File Explorer. It is normally located on your taskbar near the Start button,
    and looks like a file folder in a holder.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开文件资源管理器。它通常位于您的任务栏靠近开始按钮的位置，看起来像是一个放在夹子里的文件文件夹。
- en: In the tree on the left, select This PC or My Computer depending on what operating
    system you are running.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧的树状结构中，根据您正在运行的操作系统选择 This PC 或 My Computer。
- en: Double-click on your C:\ drive.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击您的 C:\ 驱动器。
- en: Navigate to `C:\Student\ArcGISProCookbook\MyProjects`. You should see the spreadsheet
    you just created from ArcGIS Pro.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到 `C:\Student\ArcGISProCookbook\MyProjects`。您应该能看到您刚才从 ArcGIS Pro 创建的电子表格。
- en: Double-click on the Parcels_owned_by_Thomaston.xls file to open it. Take a moment
    to explore the spreadsheet to see what you have created.
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击 Parcels_owned_by_Thomaston.xls 文件以打开它。花点时间探索电子表格，看看您创建了什么。
- en: When you are done reviewing the spreadsheet, close it and return to ArcGIS Pro.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 审查完电子表格后，关闭它并返回 ArcGIS Pro。
- en: Click back on the Map tab in ArcGIS Pro.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 ArcGIS Pro 中点击回到地图选项卡。
- en: Click on the Clear button in the Selection group on the Map tab in the ribbon.
    This deselects all selected features.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区地图选项卡的“选择”组中点击清除按钮。这将取消选择所有选定的要素。
- en: Close the Geoprocessing pane.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭地理处理面板。
- en: Save your project and close ArcGIS Pro.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目并关闭 ArcGIS Pro。
- en: In this recipe, you queried all the parcels owned by the City of Thomaston and
    then exported the selected list to a spreadsheet. To query the parcels owned by
    the City, you created an SQL where clause using the query builder. This allows
    you to create SQL expressions without having to know SQL.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 在本菜谱中，您查询了汤姆斯顿市拥有的所有地块，然后将所选列表导出到电子表格中。要查询市拥有的地块，您使用查询构建器创建了一个 SQL WHERE 子句。这允许您在不了解
    SQL 的情况下创建 SQL 表达式。
- en: '**SQL** stands for **Structured Query Language**. SQL is the standard language
    used by databases to communicate. It allows you to perform many functions within
    a relational database. Where clauses allow you to select records (or features
    within a GIS) which meet specific criteria. In the recipe you just completed,
    the criteria was where the Parcels owner equaled the City of Thomaston, thus why
    it is called a where clause. Like all languages, SQL has a specific syntax which
    must be followed to work. The ArcGIS Pro query builder you used knows the syntax
    and automatically creates the proper expression based on the parameters you provide.
    You used the Create Feature Class geoprocessing tool to generate the new shapefile.
    After you created the new shapefile, you added attribute fields to the table,
    which will store additional information about the street signs.'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '**SQL** 代表 **结构化查询语言**。SQL 是数据库用于通信的标准语言。它允许您在关系数据库中执行许多功能。WHERE 子句允许您选择满足特定标准的记录（或
    GIS 中的要素）。在您刚刚完成的菜谱中，标准是地块所有者等于汤姆斯顿市，因此它被称为 WHERE 子句。像所有语言一样，SQL 有一个特定的语法，必须遵循才能工作。您使用的
    ArcGIS Pro 查询构建器知道这个语法，并会根据您提供的参数自动创建正确的表达式。您使用了创建要素类地理处理工具来生成新的 shapefile。在您创建了新的
    shapefile 之后，您向表中添加了属性字段，这些字段将存储有关街道标志的附加信息。'
- en: After you selected the parcels owned by the City of Thomaston, you exported
    them to a spreadsheet using the Table to Excel python script tool found in the
    Conversion toolbox and Excel toolset. Python is a scripting language which has
    been heavily integrated in to the ArcGIS platform. Python scripts can be created
    to assist with automating and streamlining workflows. To learn more about using
    Python with ArcGIS, we recommend *Programming ArcGIS with Python Cookbook, 2nd
    Edition* by Eric Pimpler from Packt Publishing.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在您选择了汤姆斯顿市拥有的地块之后，您使用转换工具箱和 Excel 工具集中的 Table to Excel python 脚本工具将它们导出到电子表格中。Python
    是一种脚本语言，它已被大量集成到 ArcGIS 平台中。可以创建 Python 脚本来帮助自动化和简化工作流程。要了解更多关于使用 Python 与 ArcGIS
    的信息，我们推荐 Packt Publishing 出版的 Eric Pimpler 所著的 *Programming ArcGIS with Python
    Cookbook, 2nd Edition*。
- en: Creating and using a Relate
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建和使用关联
- en: A Join is just one of the basic methods you can use in ArcGIS Pro to link data
    together. Another method is a Relate. A Relate links two tables together, but
    unlike a Join, which adds information to the primary table, the two tables remain
    separate when related. This allows you to see all the related records in the linked
    table.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 连接（Join）只是您在ArcGIS Pro中可以用来链接数据的几种基本方法之一。另一种方法是“关联”（Relate）。关联将两个表连接在一起，但与添加信息到主表的连接不同，关联后的两个表仍然保持独立。这允许您查看链接表中所有相关的记录。
- en: A Relate works best when you have one record in your primary table which matches
    to multiple records in the linked table, or when you have multiple records in
    the primary that match multiple records in the linked table. In these situations,
    a Join would not work as well because it would have multiple records which match.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 当您的主表中有一个记录与链接表中的多个记录匹配，或者当主表中有多个记录与链接表中的多个记录匹配时，关联（Relate）效果最佳。在这些情况下，连接（Join）可能不会很好地工作，因为它会有多个匹配的记录。
- en: In this recipe, you will create a Relate between the Parcels and a land sales
    table. The land sales table contains all parcels sales which have occurred over
    the last several years. This table also comes from the County’s CAMA system, like
    the Owners table did. Once you relate the two tables, you will see how you can
    view all the sales for a selected parcel.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，您将在包裹和土地销售表之间创建一个关联。土地销售表包含过去几年内发生的所有土地销售。此表也来自县CAMA系统，就像所有者表一样。一旦关联这两个表，您将看到如何查看所选包裹的所有销售记录。
- en: Getting ready
  id: totrans-200
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: You will need to ensure that ArcGIS Pro and the book data is installed. This
    recipe is not based on previous recipes, so, you are not required to have completed
    any previous recipes before starting this one.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要确保ArcGIS Pro和书籍数据已安装。本食谱不基于之前的食谱，因此，在开始本食谱之前，您不需要完成任何之前的食谱。
- en: How to do it...
  id: totrans-202
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Start ArcGIS Pro and open the `Creating and using a Relate.aprx` project, located
    in `C:\Student\ArcGISProCookbook\Chapter3\Creating and using a Relate`.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动ArcGIS Pro并打开位于`C:\Student\ArcGISProCookbook\Chapter3\Creating and using a
    Relate`的`Creating and using a Relate.aprx`项目。
- en: In the Catalog pane located on the right of the ArcGIS Pro interface, expand
    Databases by clicking on the small arrowhead.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在ArcGIS Pro界面的右侧的目录窗格中，单击小箭头以展开数据库。
- en: Expand the Thomaston.gdb geodatabase so you can see its contents.
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开Thomaston.gdb地理数据库，以便查看其内容。
- en: Right-click on the Parcels_Sales table and select Add to Current Map. The table
    should then appear at the bottom of the list in the Contents pane.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击“包裹销售”表并选择“添加到当前地图”。该表应随后出现在内容窗格列表的底部。
- en: Right-click on the Parcels layer and select Attribute Table.
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击“包裹”层并选择“属性表”。
- en: Right-click on the Parcels_Sales table and select Open.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击“包裹销售”表并选择“打开”。
- en: Using the skills you learned in the previous recipe, try to determine the key
    field in each table which you will use to link the two tables together. Remember
    the key fields must contain the same data values and be the same field data type.
    The field names do not need to be the same.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用您在之前的食谱中学到的技能，尝试确定每个表中的关键字段，这些字段将用于将两个表连接在一起。请记住，关键字段必须包含相同的数据值，并且是相同的字段数据类型。字段名称不需要相同。
- en: '**Question**: What is the key field in each table?'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：每个表中的关键字段是什么？'
- en: '**Answer**:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: After reviewing each table, the key field should be fairly easy to pick out.
    The Realkey is the only field in each table which has the same data values and
    the same data type.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 审查完每个表后，关键字段应该很容易识别。Realkey是每个表中唯一具有相同数据值和相同数据类型的字段。
- en: In the Parcels Attribute Table, right-click on the Realkey field and select
    Sort Descending.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“包裹属性表”（Parcels Attribute Table）中，右键单击“Realkey”字段并选择“降序排序”。
- en: In the Parcels Attribute Table, locate the records with a Realkey value of 15812.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“包裹属性表”中，找到具有15812实际键值（Realkey value）的记录。
- en: You could also use the Select by Attribute tool to create a query which would
    select all parcels with a Realkey value of 15812.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以使用“按属性选择”工具创建一个查询，该查询将选择所有具有15812实际键值（Realkey value）的包裹。
- en: '**Question**: How many rows in the table contain a Realkey value of 15812?'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：表中包含实际键值（Realkey value）为15812的行数有多少？'
- en: '**Answer**:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: In the Parcels_Sales table, right-click on the REALKEY field and select Sort
    Descending.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“包裹销售”表（Parcels_Sales table）中，右键单击“REALKEY”字段并选择“降序排序”。
- en: In the Parcels_Sales table, locate the rows with a REALKEY value of 15812\.
    You will need to scroll down until you see that value, or you could use the Select
    by Attribute tool to select the records.
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Parcels_Sales 表中，找到 REALKEY 值为 15812 的行。您可能需要向下滚动直到看到该值，或者您可以使用“按属性选择”工具来选择记录。
- en: '**Question**: How many records in the Parcels_Sales table have a REALKEY value
    of 15812?'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：Parcels_Sales 表中有多少条记录的 REALKEY 值为 15812？'
- en: '**Answer**:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: You should now know that there is one parcel and two sales records which have
    a realkey value of 15812\. This means that you have a one to many cardinality,
    which works well with a Relate. Now you need to configure the Relate to link the
    Parcels to the Parcels_Sales table.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在应该知道有一个地块和两个销售记录具有 15812 的 realkey 值。这意味着您有一个一对多基数，这对于关联来说效果很好。现在您需要配置关联以将地块与
    Parcels_Sales 表链接起来。
- en: '**Cardinality** refers to how many records in one table match to records in
    another table, based on a comparison of values found in a key field. There are
    four types of cardinality, one to one, one to many, many to one, and many to many.
    This relationship between records in the two tables can impact how you are able
    to work with them. Traditionally, with older Esri software such as ArcMap, if
    you had a one to one or a many to many, you would always want to use a Join. If
    you had a one to many or a many to many, you would always want to use a Relate.
    This is not the case with ArcGIS Pro. ArcGIS Pro offers more flexibility so you
    can choose either a Join or a Relate depending on how you need to use the data.'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: '**基数**指的是一个表中的记录与另一个表中基于键字段中找到的值匹配的记录数。有四种类型的基数：一对一、一对多、多对一和多对多。这两个表中的记录之间的关系可能会影响您如何使用它们。传统上，在较老的
    Esri 软件（如 ArcMap）中，如果您有一对一或多对多，您总是会想使用连接。如果您有一对多或多对多，您总是会想使用关联。但在 ArcGIS Pro 中并非如此。ArcGIS
    Pro 提供了更多的灵活性，因此您可以根据需要使用数据来选择连接或关联。'
- en: Right-click on the Parcels layer in the Contents pane. Go to Joins and Relates
    and select Add Relate. The Add Relate tool should open the Geoprocessing pane
    on the right-hand side of the ArcGIS Pro interface.
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容窗格中右键单击“地块”图层。转到“连接和关联”并选择“添加关联”。添加关联工具应该在 ArcGIS Pro 界面右侧打开地理处理窗格。
- en: '**![](img/35216cda-4ef2-4f75-b216-f8c5d5f09c1f.png)**'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/35216cda-4ef2-4f75-b216-f8c5d5f09c1f.png)**'
- en: Ensure the Layer Name or Table View is set to Parcels. Since you right-clicked
    on the Parcels layer to add the Relate, this should be automatically populated.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保图层名称或表格视图设置为“地块”。由于您在“地块”图层上右键单击以添加关联，因此这应该会自动填充。
- en: Set the Input Relate Field to Realkey using the drop-down arrow.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将输入关联字段设置为 Realkey。
- en: The Relate Table and Output Relate Field should automatically populate because
    you have no other standalone tables in your map.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关联表和输出关联字段应该会自动填充，因为您的地图中没有其他独立的表。
- en: Change the Relate Name to `Parcel Sales`
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将关联名称更改为“地块销售”。
- en: Verify that your Add Relate tool looks like the following image. If it does
    click Run.
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认您的添加关联工具看起来与以下图像类似。如果它确实如此，请点击运行。
- en: '![](img/e8763e61-05fc-4f3f-857e-cf831673e55b.png)'
  id: totrans-231
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e8763e61-05fc-4f3f-857e-cf831673e55b.png)'
- en: Once the Add Relate tool has completed successfully, close the Geoprocessing
    pane.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦添加关联工具成功完成，请关闭地理处理窗格。
- en: Save your project.
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目。
- en: Select the Map tab in the ribbon.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区中选择地图标签页。
- en: Activate the Explore tool by clicking on it. Move your mouse point to the approximate
    center of the City and zoom in by pushing your scroll wheel away from you until
    your map looks similar in scale to the following.
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击激活“探索”工具。将鼠标指针移至城市的大致中心，通过将鼠标滚轮远离您来放大地图，直到您的地图比例与以下类似。
- en: '**![](img/d9b44b7f-9e45-4823-881f-85fa0881d48e.png)**'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/d9b44b7f-9e45-4823-881f-85fa0881d48e.png)**'
- en: Center on town square and zoom to 1:2,900 +/-
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 以城镇广场为中心，放大到 1:2,900 +/-
- en: Click on the Parcels Attribute Table in the table view.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在表格视图中点击“地块属性表”。
- en: Click on the List by Selection button near the top of the Contents pane.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击内容窗格顶部附近的“按选择列表”按钮。
- en: If it is checked, click on the small box located next to the CityLimits layer
    to make it not selectable.
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果已勾选，请点击位于 CityLimits 图层旁边的复选框，使其不可选择。
- en: Select the Parcels layer in the Contents pane.
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容窗格中选择“地块”图层。
- en: On the Map tab in the ribbon, select the Select tool.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区地图标签页中选择选择工具。
- en: 'Click on the parcel indicated in the following screenshot:'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击以下截图所示的地块：
- en: '**![](img/392561b5-7493-4923-aaca-07a5a43275e2.png)**'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/392561b5-7493-4923-aaca-07a5a43275e2.png)**'
- en: Select parcel due west of town square
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 选择位于城镇广场正西方向的地块
- en: Click on the Data tab in the ribbon.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击功能区中的数据选项卡。
- en: 'Click on the Related Data button and select Parcel_Sales:Parcel_Sales as shown
    ahead:'
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击相关数据按钮，并选择如前所示 Parcel_Sales:Parcel_Sales：
- en: '**![](img/8bf8cbe9-22b2-4c05-b48f-f5664c14837b.png)**'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '**![图片](img/8bf8cbe9-22b2-4c05-b48f-f5664c14837b.png)**'
- en: The records which show the two times that the selected parcel has been sold
    should be displayed in the Parcels_Sales table. So, as you can see, the two tables
    are linked but still remain separate.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 显示所选地块被出售两次的记录应显示在 Parcels_Sales 表中。因此，如您所见，这两个表是链接的，但仍然保持独立。
- en: Try selecting a few other Parcels and see if they have been sold multiple times.
    Some parcels may not have been sold even once. You may need to click the Related
    Data button with each selection to see the related records.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试选择几个其他地块，看看它们是否被出售多次。一些地块可能甚至一次都没有被出售。您可能需要为每个选择点击相关数据按钮，以查看相关记录。
- en: Save your project.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目。
- en: There is more….
  id: totrans-252
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多……
- en: As was mentioned earlier in this recipe, the cardinality was a major consideration
    when choosing whether you should use a Join or a Relate to link tables when using
    older Esri applications such as ArcMap. In ArcMap, you should always use a Join
    if you have a one to one or a many to one cardinality. However, if you have a
    one to many or many to many, you should use a relate in ArcMap otherwise you will
    miss data because the result would be a joined table that contained Null values
    or just the values from the first record it finds that matches.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 如在此菜谱中之前提到的，基数在选择是否使用连接或关联来链接表时是一个主要考虑因素，尤其是在使用较老的 Esri 应用程序，如 ArcMap 时。在 ArcMap
    中，如果您有一对一或多对一基数，您应始终使用连接。然而，如果您有一对多或多对多，您应在 ArcMap 中使用关联，否则您将丢失数据，因为结果将是一个包含空值或仅显示第一个找到的匹配记录值的连接表。
- en: 'ArcGIS Pro does not work that way. You can Join two tables regardless of the
    cardinality as long as they are in the same database. If you join two tables in
    ArcGIS Pro that have a one to many or a many to many cardinality, you see all
    the matched records. ArcGIS Pro does this by creating virtual records in the table
    view for each match, as shown ahead:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: ArcGIS Pro 的工作方式并非如此。只要它们位于同一数据库中，您就可以连接两个表，无论其基数如何。如果您在 ArcGIS Pro 中连接了具有一对多或多对多基数的两个表，您将看到所有匹配的记录。ArcGIS
    Pro 通过在表视图中为每个匹配项创建虚拟记录来实现这一点，如下所示：
- en: '![](img/97e5d7bf-fff1-4de8-851e-281aa94a4848.png)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/97e5d7bf-fff1-4de8-851e-281aa94a4848.png)'
- en: Single parcel selected but two records displayed in Attribute Table
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 单个地块被选中，但在属性表中显示了两个记录
- en: As you can see, you have a single parcel selected but two records are shown
    in the table view for the layer. This is because the Parcels_Sales table was joined
    to the Parcels Attribute Table. As you saw in the recipe, there is a one to many
    cardinality between these tables. So, there are two sales associated with the
    selected parcel in the Parcel_Sales table, and both are displayed.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，您选中了一个单一的地块，但在图层表视图中显示了两个记录。这是因为 Parcels_Sales 表被连接到 Parcels 属性表。如您在菜谱中看到的，这些表之间存在一对多基数。因此，Parcel_Sales
    表中有两个与所选地块相关的销售记录，并且都显示出来。
- en: In ArcGIS Pro, this method of joining tables with one to many and many to many
    has other advantages. You are able to label features with values from each record
    in the joined table. This is something ArcMap users are unable to do. However,
    remember this only works with tables in the same database. If the tables are in
    two different databases or are different formats such as linking a spreadsheet
    to a geodatabase feature class, then the normal rules about when to use a join
    and when to use a relate still apply.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 在 ArcGIS Pro 中，这种方法通过一对多和多对多连接表具有其他优势。您可以使用连接表中每条记录的值来标记要素。这是 ArcMap 用户无法做到的。然而，请记住，这仅适用于同一数据库中的表。如果表位于两个不同的数据库中，或者格式不同，例如将电子表格链接到地理数据库要素类，那么关于何时使用连接和何时使用关联的正常规则仍然适用。
- en: If you wish, use the skills you have learned in this and the previous recipe
    to join the Parcel_Sales table to the Parcels layer. Then explore how this join
    works by selecting several parcels while looking at the Attribute Table.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您愿意，可以使用在此和上一个菜谱中学到的技能将 Parcel_Sales 表连接到 Parcels 层。然后通过在查看属性表的同时选择几个地块来探索这种连接的工作方式。
- en: Joining features spatially
  id: totrans-260
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 空间要素连接
- en: So in the previous recipes, you have seen how you can link external data to
    layers or other tables using a Join or a Relate. However, what if you want to
    transfer data from one layer to another but there is no key field to use to link
    the data. Maybe the two layers in question overlap one another, or are next to
    one another, or share some other spatial relationship, surely there should be
    some way to link or join the two layers together based on a spatial relationship.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在之前的菜谱中，您已经看到了如何使用连接或关联将外部数据链接到图层或其他表。然而，如果您想从一个图层传输数据到另一个图层，但没有可用于链接数据的键字段，该怎么办？也许这两个图层相互重叠，或者相邻，或者共享某种其他空间关系，肯定应该有某种方式可以根据空间关系将两个图层链接或连接在一起。
- en: You can join two layers together based on a spatial relationship. This is called
    a **Spatial Join**. A Spatial Join creates a new feature class which adds the
    attributes from the joined feature class to the target feature class based on
    a spatial relationship you define when you run the tool. It is not required that
    the target and joined feature classes be the same type. You can spatially join
    lines with polygons, or points with lines, or points with polygons, as well as
    those of the same feature type.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以根据空间关系将两个图层合并在一起。这被称为**空间连接**。空间连接创建一个新的要素类，根据您在运行工具时定义的空间关系将连接要素类的属性添加到目标要素类。目标要素类和连接要素类不必是同一类型。您可以空间连接线与多边形、点与线或点与多边形，以及相同要素类型的要素。
- en: 'When you run the Spatial Join tool you can specify the Join Operation. This
    determines how joins between the target features and join features will be handled
    in the output feature class if multiple join features are found that have the
    same spatial relationship with a single target feature. The options for this include:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 当您运行空间连接工具时，您可以指定连接操作。这决定了如果发现多个连接特征与单个目标特征具有相同的空间关系，则如何在输出要素类中处理目标特征和连接特征之间的连接。此选项包括：
- en: JOIN_ONE_TO_ONE: When this option is chosen, if a single feature in the target
    layer matches to multiple features in the join layer because they have the same
    spatial relationship, the attributes from all the matched join features will be
    aggregated based on the field map merger rule you configure. For example, if you
    set the target layer to be the road centerlines and a road centerline crosses
    two wetland polygons which are in your join layer, the attributes from the two
    wetland polygons will be aggregated before being transferred to the output line
    feature class. If one wetland polygon has an area value of 2 acres and the other
    has an area value of 5 acres, and a Mean merge rule is specified, the aggregated
    value in the output feature class will be 3.5.
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JOIN_ONE_TO_ONE：当选择此选项时，如果目标层中的单个特征与连接层中的多个特征匹配，因为它们具有相同的空间关系，则将根据您配置的字段映射合并规则聚合所有匹配的连接特征的属性。例如，如果您将目标层设置为道路中心线，并且一条道路中心线穿过您连接层中的两个湿地多边形，则这两个湿地多边形的属性将在被传输到输出线要素类之前进行聚合。如果一个湿地多边形的面积值为2英亩，另一个的面积值为5英亩，并且指定了平均值合并规则，则输出要素类中的聚合值将是3.5。
- en: 'JOIN_ONE_TO_MANY: When this option is chosen, if a single feature in the target
    layer is found to match with multiple features in the join layer because they
    have same spatial relationship, the resulting output feature class will contain
    multiple records representing the single target feature and each match it has
    with features in the join layer. Using the same example as previous, if a single
    road centerline crosses two wetland polygons, the output feature class will contain
    two road centerlines: one will have the attributes from one of the wetland polygons
    it crossed and the second will have the attributes from the other.'
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JOIN_ONE_TO_MANY：当选择此选项时，如果目标层中的单个特征被发现与连接层中的多个特征匹配，因为它们具有相同的空间关系，则结果输出要素类将包含多个记录，代表单个目标特征及其与连接层中每个匹配特征的匹配。使用与之前相同的例子，如果一条道路中心线穿过两个湿地多边形，输出要素类将包含两个道路中心线：一个将具有它穿过的其中一个湿地多边形的属性，另一个将具有另一个湿地多边形的属性。
- en: In this recipe, you have been asked to assign each sewer line and sewer manhole
    the name of the watershed it is located within. This is for an annual report the
    sewer superintendent must submit to the state every year. You have the boundary
    of the existing watersheds in your area and you have layers for the sewer lines
    and sewer manholes, so you will use the Spatial Join geoprocessing tool to assign
    the name of each watershed to the sewer features that are inside it.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，你被要求为每条污水管线和污水检查井分配其所在流域的名称。这是污水管理员每年必须提交给州政府的年度报告。你拥有你所在地区的现有流域边界，并且你有污水管线和污水检查井图层，因此你将使用空间连接地理处理工具将每个流域的名称分配给其内部的污水要素。
- en: Getting ready
  id: totrans-267
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: This recipe can be completed with any license level of ArcGIS Pro. Completion
    of any other recipes is not required, though it is recommend that you complete
    the recipes in [Chapter 1](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml), *ArcGIS
    Pro Capabilities and Terminology*. This will ensure that you have the basic skills
    required to successfully complete this recipe. Of course, you must install the
    sample data before you begin.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 这个菜谱可以用ArcGIS Pro的任何许可级别完成。不需要完成任何其他菜谱，尽管建议你完成[第1章](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml)，“ArcGIS
    Pro功能和术语”中的菜谱。这将确保你拥有成功完成此菜谱所需的基本技能。当然，你必须在开始之前安装示例数据。
- en: How to do it...
  id: totrans-269
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: Start ArcGIS Pro and open the `Spatial Join.aprx` project located in `C:\Student\ArcGISProCookbook\Chapter3\Spatial
    Join\`.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动ArcGIS Pro并打开位于`C:\Student\ArcGISProCookbook\Chapter3\Spatial Join\`的`Spatial_Join.aprx`项目。
- en: Right-click on the Sewer Manholes layer in the Contents pane and click Attribute
    Table.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容面板中右键单击“污水检查井”图层，然后单击“属性表”。
- en: 'Explore the Attribute Table for the Sewer Manholes layer and answer the following
    question:'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 探索“污水检查井”图层属性表并回答以下问题：
- en: '**Question**: What fields do you see in the Attribute Table for the Sewer Manholes?'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：你在“污水检查井”图层的属性表中看到了哪些字段？'
- en: '**Answer**:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: You will notice that it does not indicate which watershed each manhole is located
    in. So, you need to add this attribute to each manhole. Luckily you do have a
    watershed layer which shows the boundary of each watershed and its name. You will
    be able to use the Spatial Join to add this information to the manholes. First
    you will explore the Attribute Table for the Watersheds layer. Then you will use
    the Spatial Join tool.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 你会注意到它没有指明每个检查井位于哪个流域。因此，你需要为每个检查井添加这个属性。幸运的是，你确实有一个显示每个流域边界及其名称的流域图层。你将能够使用空间连接将此信息添加到检查井中。首先，你将探索“流域”图层的属性表。然后，你将使用空间连接工具。
- en: Right-click on the Watersheds layer and select Attribute Table.
  id: totrans-276
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击“流域”图层并选择“属性表”。
- en: Explore the fields contained in the Attribute Table for the Watersheds layer.
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 探索“流域”图层属性表中的字段。
- en: '**Question**: What fields do you see in the Attribute Table for the Watersheds
    layer?'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：你在“流域”图层的属性表中看到了哪些字段？'
- en: '**Answer**:'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: Click on the Analysis tab in the ribbon.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在工具栏中单击“分析”选项卡。
- en: Select the Spatial Join tool from the Tools group on the Analysis tab in the
    ribbon. This will open the Geoprocessing pane with the Spatial Join tool.
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从工具栏中的“分析”选项卡的工具组中选择“空间连接”工具。这将打开包含“空间连接”工具的地理处理面板。
- en: '![](img/57d33fa0-9647-46c5-903c-a4b6e48ee511.png)'
  id: totrans-282
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/57d33fa0-9647-46c5-903c-a4b6e48ee511.png)'
- en: Select Spatial Join tool
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 选择“空间连接”工具
- en: Set the Target Features to Sewer Manholes using the drop-down arrow.
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将目标要素设置为“污水检查井”。
- en: Set the Join Features to Watersheds using the drop-down arrow.
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将连接要素设置为“流域”。
- en: For the Output Feature Class, click the Browse button. Then select the Databases
    folder located under Project in the tree on the left side of the Output Feature
    Class dialog window.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于输出要素类，单击浏览按钮。然后在输出要素类对话框窗口左侧的树中选择项目下的数据库文件夹。
- en: Double-click on the Spatial Join.gdb.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击“Spatial_Join.gdb”。
- en: In the Name cell, type `Sewer_Manholes_Watersheds` and click Save.
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“名称”单元格中键入`Sewer_Manholes_Watersheds`并单击“保存”。
- en: Set the Join Operation to Join one to one using the drop-down arrow.
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将连接操作设置为“一对一连接”。
- en: Set the Match Option to Within. This is the spatial relationship which will
    join the watershed name to each manhole that is inside the watershed.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将匹配选项设置为“在内部”。这是将流域名称与流域内的每个检查井连接的空间关系。
- en: Verify that your Spatial Join tool looks like the following and click Run.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认你的空间连接工具看起来如下，然后单击“运行”。
- en: '![](img/48808d95-139e-48d2-bba1-7c4596f42cb7.png)'
  id: totrans-292
  prefs: []
  type: TYPE_IMG
  zh: '![](img/48808d95-139e-48d2-bba1-7c4596f42cb7.png)'
- en: When the Spatial Join tool is complete, close the Geoprocessing pane.
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当空间连接工具完成时，关闭地理处理面板。
- en: A new layer should have been added to your map, called Sewer_Manhole_Watersheds.
    Right-click on this new layer and select Attribute Table.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 应该已经有一个新的图层添加到您的地图中，称为`Sewer_Manhole_Watersheds`。右键单击这个新图层并选择属性表。
- en: '**Question**: What fields does the Attribute Table for this new layer contain?'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：这个新图层的属性表包含哪些字段？'
- en: '**Answer**:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: '**Question**: How does the new table compare to the Attribute Table for the
    Sewer Manhole and the Watersheds layers?'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：新的表格与下水道检查井和流域图层的属性表相比如何？'
- en: '**Answer**:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: As you should hopefully see, the new layer contains the combined attributes
    of both the sewer manholes and watersheds layers. The output was a new point layer
    because the target was the sewer manholes, which was a point layer.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所希望看到的，新图层包含了下水道检查井和流域图层的合并属性。输出是一个新的点图层，因为目标是下水道检查井，它是一个点图层。
- en: Close the Attribute Table and save your project.
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭属性表并保存您的项目。
- en: Now, using the same process perform a spatial join between the sewer lines and
    the watersheds. However, this time set the Match Option to Intersect and the Output
    Feature Class to `Sewer_Lines_Watersheds`.
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用相同的过程在下水道线和流域之间执行空间连接。但是，这次将匹配选项设置为相交，并将输出要素类设置为`Sewer_Lines_Watersheds`。
- en: Your Spatial Join tool should look like this. If it does, click Run.
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的空间连接工具应该看起来像这样。如果它确实如此，请单击运行。
- en: '![](img/bdaf73ad-f33f-4e69-a680-01a93d241ef2.png)'
  id: totrans-303
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bdaf73ad-f33f-4e69-a680-01a93d241ef2.png)'
- en: The Crimes_2014 table should appear in the Contents pane. Right-click on the
    table and click Open.
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Crimes_2014`表应该出现在内容面板中。右键单击表并单击打开。'
- en: Once the tool is complete, close the Geoprocessing pane and save your project.
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦工具完成，关闭地理处理面板并保存您的项目。
- en: When the tool completes, the new layer you created should be added to the map.
    If you open the Attribute Table you will see it too contains the combined attributes
    from both the inputs. This time, the output was a line layer instead of a point
    because the target layer was the sewer lines layer, which, as the name indicates,
    is a line layer.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 当工具完成时，您创建的新图层应该被添加到地图中。如果您打开属性表，您也会看到它也包含了来自两个输入的合并属性。这次，输出是一个线图层而不是点图层，因为目标图层是下水道线图层，正如其名称所示，它是一个线图层。
- en: Close ArcGIS Pro.
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭ArcGIS Pro。
- en: You have now seen how a spatial join can be used to merge data in two different
    layers into a single layer or feature class. This can increase the types of analysis
    you can perform on the data or how you can display it. Remember, when you perform
    a spatial join, it does create a new data layer. This means that your original
    data is still intact for you to use as well.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已经看到了如何使用空间连接将两个不同图层中的数据合并到一个单独的图层或要素类中。这可以增加您可以对数据进行分析的类型或您如何显示数据的方式。记住，当您执行空间连接时，它确实创建了一个新的数据层。这意味着您的原始数据仍然完好无损，供您使用。
- en: Creating feature linked annotation
  id: totrans-309
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建特征链接注释
- en: You have now seen how to link data together based on a common key field using
    a Join or Relate, based on a spatial relationship. These methods are extremely
    useful. However, they do have limitations. Joins and Relates only exist in a single
    map and do not transfer easily to other maps or projects. Spatial Joins create
    new feature classes or tables while still leaving the original data unaltered.
    So, is there a way to permanently link two tables or two feature classes together?
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已经看到了如何使用连接或关联，基于一个共同的键字段，基于空间关系将数据链接在一起。这些方法非常有用。然而，它们确实有限制。连接和关联仅存在于单个地图中，并且不容易转移到其他地图或项目中。空间连接创建新的要素类或表，同时仍然保留原始数据不变。那么，是否有办法永久地将两个表或两个要素类链接在一起？
- en: The answer is yes, if the data is all in the same geodatabase. In a geodatabase,
    you can create a relationship class. A relationship class permanently links data
    together and the link carries over into any map, scene, or project you use the
    data in. You can create a relationship class between two feature classes, two
    standalone tables, or a feature class and a standalone table.
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 答案是肯定的，如果数据都在同一个地理数据库中。在地理数据库中，您可以创建一个关系类。关系类永久地将数据链接在一起，并且链接会传递到您使用数据的任何地图、场景或项目中。您可以在两个要素类、两个独立表或一个要素类和一个独立表之间创建关系类。
- en: Relationship classes provide greater flexibility than the other methods we have
    looked at in previous recipes. Not only can you link data together so you can
    access the additional information, the related data can also impact the behavior
    or contents. For example, if I relate a sewer line feature class to a manhole
    feature class, the relationship class can be configured to allow information such
    as an attribute value from one feature class to also pass to another, or if I
    delete a feature in one feature class it deletes the connected feature in the
    other feature class.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 关系类别比我们在之前的菜谱中查看的其他方法提供了更大的灵活性。您不仅可以链接数据以便访问附加信息，相关数据还可以影响行为或内容。例如，如果我将下水道线要素类与检查井要素类相关联，关系类别可以配置为允许一个要素类的属性值传递到另一个要素类，或者如果我在一个要素类中删除一个要素，它也会删除另一个要素类中连接的要素。
- en: One of the easiest relationship classes to create is called **Feature Linked
    Annotation**. In this recipe, you will create feature linked annotation and then
    explore its behavior.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 最容易创建的关系类别之一被称为**要素链接标注**。在此菜谱中，您将创建要素链接标注并探索其行为。
- en: Getting ready
  id: totrans-314
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: To complete this recipe, you will need a Standard or Advanced license of ArcGIS
    Pro. A Basic license does not support this level of functionality. If you are
    not sure what license you have, you can check it by doing the following. Open
    ArcGIS Pro, and on the bottom left of the start window, where you would normally
    select a project to open, click on About ArcGIS Pro. Then select Licensing from
    the list on the left. This will display the license level available to you and
    any extensions you may have access to as well.
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 要完成此菜谱，您需要ArcGIS Pro的标准或高级许可证。基本许可证不支持此级别的功能。如果您不确定您拥有哪种许可证，可以通过以下方式进行检查。打开ArcGIS
    Pro，在启动窗口的左下角，您通常会选择一个项目来打开的地方，点击关于ArcGIS Pro。然后从左侧的列表中选择许可证。这将显示您可用的许可证级别以及您可能有权访问的任何扩展。
- en: If you only have a Basic license, check with your account administrator to see
    if they can assign you a Standard or Advanced license at least temporarily. If
    a higher license is not available, you can request a trial license from Esri by
    going to their website, at [http://www.esri.com/arcgis/trial](http://www.esri.com/arcgis/trial).
    This will provide you with access to an Advanced license for ArcGIS Pro and more.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您只有基本许可证，请咨询您的账户管理员，看他们是否可以至少暂时为您分配标准或高级许可证。如果无法获得更高版本的许可证，您可以通过访问他们的网站，在[http://www.esri.com/arcgis/trial](http://www.esri.com/arcgis/trial)从Esri请求试用许可证。这将为您提供访问ArcGIS
    Pro的高级许可证以及更多功能的权限。
- en: How to do it...
  id: totrans-317
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: You will begin by starting ArcGIS Pro. Then open the `FeatureLinkedAnno.aprx`
    located in `C:\Student\ArcGISProCookbook\Chapter3\FeatureLinkedAnno`.
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将首先启动ArcGIS Pro。然后打开位于`C:\Student\ArcGISProCookbook\Chapter3\FeatureLinkedAnno`的`FeatureLinkedAnno.aprx`。
- en: The project should open with a single map called `Trippville`. Click on the
    Bookmarks button located in the Navigate group on the Map tab. Select Labeling
    Area to zoom to the middle of Trippville.
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 项目应从一个名为 `Trippville` 的单个地图开始。在地图选项卡上的导航组中点击书签按钮。选择标注区域以缩放到Trippville的中间位置。
- en: In the Contents pane, select the Street Centerline layer.
  id: totrans-320
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容窗格中，选择Street Centerline层。
- en: From the ribbon, select the Labeling tab, which appears in the Feature Layer
    contextual tab.
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从功能区，选择标注选项卡，它出现在要素层上下文选项卡中。
- en: In the Map group on the Labeling tab, select the More drop-down.
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在标注选项卡上的地图组中，选择更多下拉菜单。
- en: Click on the Label button located on the far-left side of the Labeling tab to
    turn on the labels for the Street Centerlines layer. Ensure Use Maplex Labeling
    Engine is not checked. If it is, click on it to deactivate. If you get a warning
    about switching the labeling engine, click Yes.
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击标注选项卡最左侧的标注按钮以打开Street Centerlines层的标注。确保未选中使用Maplex标注引擎。如果是，点击它以取消激活。如果您收到有关切换标注引擎的警告，请点击是。
- en: '![](img/8055569d-35c1-46a1-a3df-00c9d0879acc.png)'
  id: totrans-324
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/8055569d-35c1-46a1-a3df-00c9d0879acc.png)'
- en: Select Label button on far left
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 在最左侧选择标注按钮
- en: Set the Field locate in the Label Class group on the Labeling tab to ST_NAME
    using the drop-down arrow to scroll to the field.
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在标注选项卡上的标注类别组中，使用下拉箭头滚动到字段，将字段定位设置为ST_NAME。
- en: In the Label Placement group on the Labeling tab, select Curved Line.
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在标注选项卡上的标注位置组中，选择曲线线。
- en: '![](img/65992a45-8d25-4acf-a6b3-8f87f55dd397.png)'
  id: totrans-328
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/65992a45-8d25-4acf-a6b3-8f87f55dd397.png)'
- en: Verify that your font is set to Tahoma, size 10, and color is black in the Text
    Symbol group on the Labeling tab.
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请验证在标签选项卡的文本符号组中，您的字体设置为Tahoma，大小为10，颜色为黑色。
- en: You have added labels for the street names to the map. If you configured everything,
    your map should now look very similar to the following image. Yours may not be
    an exact match due to the size of your monitor being different or you may have
    other panes open.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经为地图上的街道名称添加了标签。如果您已配置一切，您的地图现在应该看起来非常类似于以下图像。由于您的显示器尺寸不同或您可能打开了其他窗格，您的地图可能不会完全匹配。
- en: '![](img/adf4521f-b84e-4fb3-b688-8754b1212e13.png)'
  id: totrans-331
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/adf4521f-b84e-4fb3-b688-8754b1212e13.png)'
- en: Click on the Map tab in the ribbon.
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区中单击地图选项卡。
- en: At the far-right end of the Map tab, click on the Convert To Annotation button.
    This will open the Convert Labels to Annotation tool in the Geoprocessing pane.
  id: totrans-333
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在地图选项卡的右侧末端，单击“转换为注释”按钮。这将打开Geoprocessing窗格中的“将标签转换为注释”工具。
- en: ArcGIS Pro supports two types of text display in a map or scene. The first is
    labels. Labels are dynamic text which is tied to a specific layer and attributes
    associated with that layer. The user can configure some settings which the computer
    will use when trying to determine where to place the label or if one will be placed
    at all. However, users are not able to individually place a label and guarantee
    it will always appear or be in a consistent location. The computer makes the final
    decision. Labels are extremely useful because they do automatically adjust as
    your map view changes in size or location. Annotation is the other method for
    displaying text. Annotation is fixed text, which can be individually placed and
    modified. This provides much greater control over the text, allowing you to put
    it exactly where and how you want it. Its big disadvantage is that it is more
    labor intensive to maintain and will not work at all scales. Feature Linked Annotation
    is the best of both worlds. It provides the control of annotation with some of
    the dynamic behavior of labels, as you will see in this recipe.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: ArcGIS Pro支持在地图或场景中显示两种类型的文本。第一种是标签。标签是与特定图层及其关联属性相关联的动态文本。用户可以配置一些设置，计算机将在尝试确定标签放置位置或是否放置标签时使用这些设置。然而，用户无法单独放置一个标签并保证它始终出现或位于一致的位置。最终决定由计算机做出。标签非常有用，因为它们会自动调整，以适应您的地图视图的大小或位置变化。注释是显示文本的另一种方法。注释是固定文本，可以单独放置和修改。这提供了对文本的更大控制，允许您将其放置在您想要的确切位置，并以您想要的方式显示。它的主要缺点是维护起来更加费时，并且不能在所有比例下工作。要素关联注释是两者的最佳结合。它提供了注释的控制，并具有标签的一些动态行为，您将在本食谱中看到这一点。
- en: Verify that the Input Map is set to Trippville.
  id: totrans-335
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请验证输入地图设置为Trippville。
- en: Click on the Browse button located to the right of the Output Geodatabase. Click
    on the Databases folder in the panel on the left side of the Output Geodatabase
    window that appears. Double-click on the Trippville_GIS.gdb. Select the Base feature
    dataset and click OK.
  id: totrans-336
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击位于输出地理数据库右侧的浏览按钮。在出现的输出地理数据库窗口左侧的面板中，单击数据库文件夹。双击Trippville_GIS.gdb。选择Base要素数据集，然后单击确定。
- en: For the Extent, select the Street Centerlines layer from the list using the
    drop-down arrow.
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于范围，使用下拉箭头从列表中选择Street Centerlines图层。
- en: Enable Create Feature Linked Annotation by clicking on the box next to it. Two
    other options will appear, Create Annotation when new features are added and Update
    annotation when features shape is modified. Ensure they are both enabled.
  id: totrans-338
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过单击其旁边的框来启用“创建与要素关联的注释”。将出现两个其他选项，即“在添加新要素时创建注释”和“在要素形状修改时更新注释”。确保它们都处于启用状态。
- en: Change the Output Layer to StreetNames.
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将输出图层更改为StreetNames。
- en: 'Verify that your Convert Labels to Annotation looks like the following graphic,
    and click Run:'
  id: totrans-340
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请验证您的“将标签转换为注释”看起来如下所示，然后单击运行：
- en: '![](img/8ff71dff-5a81-4095-91ce-a4cf2cf266e2.png)'
  id: totrans-341
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/8ff71dff-5a81-4095-91ce-a4cf2cf266e2.png)'
- en: The new StreetNames layer you just created should appear in the Contents pane
    if the tool runs successfully. If the new layer does appear, close the Geoprocessing
    pane.
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果工具运行成功，您刚刚创建的新StreetNames图层应该会出现在内容窗格中。如果新图层没有出现，请关闭Geoprocessing窗格。
- en: Now, let’s look at what you created. In the Contents pane, expand the StreetNames
    layer by clicking on the small arrow located next to the layer name.
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们看看您创建的内容。在内容窗格中，通过单击位于图层名称旁边的小箭头来展开StreetNames图层。
- en: Select the Street_CenterlinesAnno layer. Right-click on it and select Properties
    from the bottom of the context menu that appears.
  id: totrans-344
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择Street_CenterlinesAnno层。右键点击它，并从出现的上下文菜单底部选择属性。
- en: 'Select the Source option from the list on the left panel in the Layer Properties
    window, then answer the following questions:'
  id: totrans-345
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在图层属性窗口的左侧面板上的列表中选择源选项，然后回答以下问题：
- en: '**Question**: What is the data type and feature type for the new layer?'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：新层的数据类型和要素类型是什么？'
- en: '**Answer**:'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**:'
- en: '**Question**: What database is the feature class that the layer references
    named and where is it located?'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：引用该层的要素类所命名的数据库是什么，它位于哪里？'
- en: '**Answer**:'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**:'
- en: '**Question**: What is the name of the feature class you created which is referenced
    by the new layer?'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：您创建的、由新层引用的要素类的名称是什么？'
- en: '**Answer**:'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**:'
- en: As you can see when you answer the preceding questions, the Convert to Annotation
    tool created not only a new layer in your map, but also a new feature class within
    the geodatabase. It is an annotation feature class which is a specialized version
    of a standard Polygon feature class; basically it acts like a text box. Like all
    feature classes, an annotation feature class is another form of vector data. As
    such, it has both the spatial component as well as an attribute component.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 当您回答前面的问题时，您可以看到，将数据转换为注释工具不仅在您的地图中创建了一个新层，还在地理数据库中创建了一个新的要素类。它是一个注释要素类，是标准多边形要素类的专用版本；基本上它像一个文本框。像所有要素类一样，注释要素类是矢量数据的一种形式。因此，它既有空间组件也有属性组件。
- en: Click OK to close the Layer Properties window.
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击确定以关闭图层属性窗口。
- en: Right-click on the Street_CenterlinesAnno layer in the Contents pane. Select
    Attribute Table from the context menu which appears.
  id: totrans-354
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容面板中右键点击Street_CenterlinesAnno层。从出现的上下文菜单中选择属性表。
- en: 'Take a moment to explore the Attribute Table for the new layer you just created,
    then answer the following question:'
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 花点时间探索您刚刚创建的新层的属性表，然后回答以下问题：
- en: '**Question**: What attribute fields are in the table for the Street_CenterlineAnno
    layer?'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：Street_CenterlineAnno层的表中包含哪些属性字段？'
- en: '**Answer**:'
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**:'
- en: Click on the List by Selection button located near the top of the Contents pane.
    It looks like three polygons, one of which has a blue fill.
  id: totrans-358
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击内容面板顶部附近的位置的“按选择列表”按钮。它看起来像三个多边形，其中一个有蓝色填充。
- en: Set the Street Centerlines and Street_CenterlinesAnno layers as selectable and
    all others as not selectable. Those with a check mark in the box are selectable
    layers and those without a check mark are not. To change the status from selectable
    or not selectable simply click on the box next to the layer name.
  id: totrans-359
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Street Centerlines和Street_CenterlinesAnno层设置为可选择，其他所有层设置为不可选择。带有复选框的层是可选择层，没有复选框的层是不可选择层。要更改可选择或不可选择的状态，只需点击层名称旁边的复选框。
- en: Click on the Select tool in the Map tab in the ribbon. If you click on the drop-down
    arrow, select Rectangle.
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区中的地图标签页中点击选择工具。如果您点击下拉箭头，选择矩形。
- en: Click just to the southeast of Pine St, in the map. Continue to hold your mouse
    button down and move your pointer just to the northwest of Pine St as shown in
    the following screenshot, so you select both the street centerline and the road
    name.
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在地图上点击Pine街的东南方向，继续按住鼠标按钮并将指针移动到Pine街的西北方向，如图所示，以便选择街道中心线和道路名称。
- en: '![](img/6ccc0aad-e30d-49cd-ac22-82c98283019e.png)'
  id: totrans-362
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6ccc0aad-e30d-49cd-ac22-82c98283019e.png)'
- en: Right-click on the Street Centerline layer in the Contents pane and select Attribute
    Table from the context menu that appears.
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容面板中右键点击Street Centerline层，并从出现的上下文菜单中选择属性表。
- en: At the bottom of the table view, click on the Show Selected Records button to
    only display the attributes for the street centerline you have selected.
  id: totrans-364
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在表视图的底部，点击“显示所选记录”按钮，仅显示所选街道中心线的属性。
- en: Look at the attribute values for the selected street. Pay special attention
    to the value for the ObjectID.
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看所选街道的属性值。特别注意ObjectID的值。
- en: Ensure the Street Centerlines layer is still selected in the Content pane, then
    click on the Data tab in the Feature Layer contextual menu in the ribbon.
  id: totrans-366
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保在内容面板中仍然选中了街道中心线层，然后在功能区中的要素层上下文菜单中点击数据标签页。
- en: Select the Related Data button in the Relationship group on the Data tab in
    the ribbon. Choose the Anno_80_85:Street_CenterlinesAnno option that appears.
    The numbers identifying the relationship may be different. This should open the
    Attribute Table for the Street_CenterlinesAnno layer and select the related annotation
    record.
  id: totrans-367
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区数据选项卡的关系组中，选择相关数据按钮。选择出现的Anno_80_85:Street_CenterlinesAnno选项。识别关系的数字可能不同。这应该打开Street_CenterlinesAnno层的属性表并选择相关的注释记录。
- en: 'Review the attribute values for the selected record, then answer the following
    question:'
  id: totrans-368
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看所选记录的属性值，然后回答以下问题：
- en: '**Question**: Which fields for the Street_CenterlinesAnno layer contain similar
    values as those for the street centerline you have selected?'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：Street_CenterlinesAnno层的哪些字段包含与所选街道中心线相似的值？'
- en: '**Answer**:'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: Your comparison of the values for the selected street centerline and the related
    annotation should have revealed that the Object ID for the street centerline matched
    the FeatureID value for the annotation, and the ST_NAME value for the street centerline
    matched the TextString value for the annotation.
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 您对所选街道中心线和相关注释的值进行比较应该已经揭示，街道中心线的Object ID与注释的FeatureID值匹配，街道中心线的ST_NAME值与注释的TextString值匹配。
- en: The two feature classes are linked to one another in the relationship class
    using the ObjectID of the Street Centerlines and the FeatureID of the Annotation
    as the key field, similar to how you used a key field to create both a join and
    a relate in previous recipes. As you will see next, the ST_NAME field and TextString
    fields are also linked as part of the relationship class.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 两个要素类通过关系类相互链接，使用街道中心线的ObjectID和注释的FeatureID作为键字段，类似于您在之前的菜谱中使用键字段创建连接和关联的方式。正如您接下来将看到的，ST_NAME字段和TextString字段也作为关系类的一部分进行链接。
- en: Ensure that you still have the Pine St centerline selected, and then click on
    the Edit tab in the ribbon.
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保您仍然选择了Pine St中心线，然后单击功能区上的编辑选项卡。
- en: Click on the Attributes button located in the Selection group on the Edit tab.
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在编辑选项卡的选项组中，单击位于选择组中的属性按钮。
- en: '![](img/5173fcda-9e0f-4892-b303-f851a7047989.png)'
  id: totrans-375
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/5173fcda-9e0f-4892-b303-f851a7047989.png)'
- en: In the window at the top of the Attributes pane, select the Street Centerlines
    layer. This should display a list of all attributes associated with Pine St in
    the area below where you selected the layer.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在属性面板顶部的窗口中，选择街道中心线层。这应该在您选择层下方显示与该区域Pine St相关联的所有属性列表。
- en: Click in the cell located next to ST_NAME, which currently contains the value
    `PINE ST` and type `OAK AVE`. Hit your *Enter* key when done.
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在ST_NAME所在的单元格中单击，该单元格当前包含值`PINE ST`，并输入`OAK AVE`。完成后按*Enter*键。
- en: Notice what happens to the annotation for the street name in the map. It should
    have also changed because the ST_NAME field is linked to the TextString field
    for the annotation layer. Changing the ST_NAME value in the Street Centerlines
    layer automatically updates the value for the annotation layer because of the
    relationship class you created. For feature linked annotation, this is a one way
    relationship. This means the change is only pushed from the Street Centerlines
    layer to the Street_CenterlinesAnno layer, but not from the Street_CenterlinesAnno
    layer to the Street Centerlines.
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 注意地图中街道名称注释的变化。它也应该已经改变，因为ST_NAME字段与注释层的TextString字段相链接。在街道中心线层中更改ST_NAME值会自动更新注释层的值，这是由于您创建的关系类。对于链接的注释要素，这是一个单向关系。这意味着更改只从街道中心线层推送到Street_CenterlinesAnno层，但不会从Street_CenterlinesAnno层推送到街道中心线层。
- en: While on the Edit tab, click the Clear button in the Selection group to clear
    your selection.
  id: totrans-379
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在编辑选项卡上，在选项组中单击清除按钮以清除选择。
- en: In the Contents pane, right-click on the Street Centerlines layer and select
    Make this the only selectable layer.
  id: totrans-380
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容面板中，右键单击街道中心线层并选择将其作为唯一可选择的层。
- en: You may need to make sure you are still looking at the List by Selection option
    in the Contents pane.
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能需要确保您仍在内容面板中的列表选项下查看。
- en: Choose the Selection tool from the Selection group in the Edit tab on the ribbon.
  id: totrans-382
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从编辑选项卡上的选择组中选择选择工具。
- en: Click on the street centerline for the newly renamed Oak Ave, which was formerly
    Pine St.
  id: totrans-383
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击新命名的Oak Ave（以前是Pine St）的街道中心线。
- en: With Oak Ave selected and only Oak Ave selected, press your *Delete* key or
    click on the *Delete* button in the Features group on the Edit tab in the ribbon.
  id: totrans-384
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选择Oak Ave并且只选择Oak Ave的情况下，按你的*Delete*键或在功能区编辑选项卡上的特征组中的*Delete*按钮上单击。
- en: Notice that the annotation is also deleted when you delete the street centerline
    for Oak Ave. The relationship class not only links fields together, but also creates
    a link between the features in each feature class, so that by deleting the centerline
    it also deletes all related annotation features. Like the field relationship you
    explored earlier, this is only a one-way relationship. This means that if you
    were to delete the annotation it would not delete the related street centerline.
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，当你删除Oak Ave的街道中心线时，注释也会被删除。关系类不仅将字段链接在一起，还在每个特征类中的特征之间创建链接，因此删除中心线也会删除所有相关的注释特征。就像你之前探索的字段关系一样，这只是一个单向关系。这意味着如果你删除注释，它不会删除相关的街道中心线。
- en: Not all relationship classes are a one-way relationship. Feature linked annotation
    is just one example of how a relationship class works. They can be configured
    in several different ways, depending on what you wish to accomplish.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 并非所有关系类都是单向关系。特征链接注释只是关系类如何工作的一个例子。它们可以根据你希望达成的目标以几种不同的方式配置。
- en: On the Edit tab in the Manage Edits group, select Discard to discard all edits
    you have made.
  id: totrans-387
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区编辑选项卡上的管理编辑组中，选择丢弃以丢弃你已做的所有编辑。
- en: In the Catalog pane, expand the Databases folder so you see the two geodatabases
    connected to the project.
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录窗格中，展开数据库文件夹，以便看到连接到项目的两个地理数据库。
- en: Expand the Trippville_GIS.gdb geodatabase to see its contents.
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开Trippville_GIS.gdb地理数据库以查看其内容。
- en: Now expand the Base feature dataset and examine its contents. You should see
    the two feature classes which were referenced by the two layers you have been
    working with, Street_Centerlines and Street_CenterlinesAnno. You should also see
    the relationship class which you created when you created the feature linked annotation
    layer, Anno_80_85\. Again, the name of your relationship class may have different
    numbers.
  id: totrans-390
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在扩展基础特征数据集并检查其内容。你应该能看到两个由你所使用的两个图层引用的特征类，即Street_Centerlines和Street_CenterlinesAnno。你也应该看到当你创建特征链接注释图层Anno_80_85时创建的关系类。再次强调，你的关系类名称可能包含不同的数字。
- en: Because the feature classes and relationship classes exist as objects in your
    geodatabase, they may be used in other maps, scenes, or projects. This provides
    much greater flexibility than the joins and relates you performed in past recipes.
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 因为特征类和关系类作为对象存在于你的地理数据库中，它们可以被用于其他地图、场景或项目中。这比你在过去食谱中执行的连接和关联提供了更大的灵活性。
- en: How it works...
  id: totrans-392
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: As you saw in this recipe, feature linked annotation links text in one layer
    to the features in another layer. It does this using a relationship class. Like
    joins and relates, the relationship class relies on a key field from the Attribute
    Tables for both feature classes to establish a basic link between the text features
    in the annotation layer and the feature that the text references in the other
    feature class. In the case of feature linked annotation, the key field was automatically
    determined and the relationship class configured when you converted the labels
    for the street centerlines to annotation using the Convert to Annotation tool.
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你在本食谱中看到的那样，特征链接注释将一个图层中的文本链接到另一个图层中的特征。它是通过关系类来做到这一点的。就像连接和关联一样，关系类依赖于两个特征类的属性表中的键字段来在注释层中的文本特征和另一个特征类中引用的特征之间建立基本链接。在特征链接注释的情况下，键字段是在你使用转换为注释工具将街道中心线的标签转换为注释时自动确定的，并且配置了关系类。
- en: Feature Linked annotation takes advantage of the additional functionality the
    relationship class allows.  In addition to relating the two features classes together
    so you can located related features or records, it also allows you to push changes
    from the feature to the annotation. This is called a **composite relationship**.
    In a composite relationship, the existence or values of the origin feature controls
    or changes the existence or values of the destination feature or record. You saw
    this demonstrated when you changed the street name for the centerline and deleted
    the centerline, which caused changes to the street annotation layer.
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 特征链接注释利用了关系类提供的附加功能。除了将两个要素类关联起来以便您定位相关特征或记录外，它还允许您将特征的变化推送到注释中。这被称为**复合关系**。在复合关系中，源特征的存在或值控制或改变目标特征或记录的存在或值。您在更改中心线的街道名称并删除中心线时看到了这一演示，这导致了街道注释层的更改。
- en: Creating and using a relationship class using existing data
  id: totrans-395
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用现有数据创建和使用关系类
- en: You have seen the power of a relationship class in the previous recipe. You
    saw how linking two feature classes together allowed you to not only access information
    about the linked features but also control some behavior. However, this was all
    automatically set up by the Convert to Annotation tool. In many cases, the data
    you wish to link together already exists. So how do you create a relationship
    class which would link that existing data together?
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经在前一个菜谱中看到了关系类的强大功能。您看到了如何将两个要素类链接在一起，不仅允许您访问链接特征的信息，还可以控制某些行为。然而，所有这些都是由“转换为注释”工具自动设置的。在许多情况下，您希望链接在一起的数据已经存在。那么，您如何创建一个关系类来将现有数据链接在一起？
- en: In this recipe, you will create a relationship class between a feature class
    and a standalone table. This will be between the same parcel layer and sales table
    you related in the *Creating and using a Relate* recipe earlier in this chapter.
     However, once you establish the relationship class, the link becomes permanent,
    unlike the relate which is limited to the map in which it was created.
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，您将在一个要素类和一个独立表之间创建一个关系类。这将是在本章前面“创建和使用关联”菜谱中关联的相同地块层和销售表之间。然而，一旦建立了关系类，链接就变得永久，与关联不同，关联仅限于创建它的地图中。
- en: Getting ready
  id: totrans-398
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: To complete this recipe, you will need a Standard or Advanced license of ArcGIS
    Pro. A Basic license does not support this level of functionality. If you are
    not sure what license you have, you can check it by doing the following. Open
    ArcGIS Pro, and on the bottom left of the start window, where you would normally
    select a project to open, click on About ArcGIS Pro. Then select Licensing from
    the list on the left. This will display the license level available, to you and
    any extensions you may have access to as well.
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 要完成这个菜谱，您需要 ArcGIS Pro 的标准或高级许可证。基本许可证不支持此级别的功能。如果您不确定您拥有哪种许可证，可以通过以下步骤进行检查。打开
    ArcGIS Pro，在启动窗口的左下角，您通常会选择一个项目来打开的地方，点击“关于 ArcGIS Pro”。然后从左侧的列表中选择许可证。这将显示您可用的许可证级别，以及您可能有权访问的任何扩展。
- en: If you only have a Basic license, check with your account administrator to see
    if they can assign you a Standard or Advanced license at least temporarily. If
    a higher license is not available you can request a trial license from Esri by
    going to their website, at [http://www.esri.com/arcgis/trial](http://www.esri.com/arcgis/trial).
    This will provide you with access to an Advanced license for ArcGIS Pro and more.
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您只有基本许可证，请咨询您的账户管理员，看他们是否可以至少暂时为您分配标准或高级许可证。如果无法获得更高版本的许可证，您可以通过访问他们的网站，在
    [http://www.esri.com/arcgis/trial](http://www.esri.com/arcgis/trial) 从 Esri 获取试用许可证。这将为您提供访问
    ArcGIS Pro 高级许可证以及更多内容的权限。
- en: How to do it...
  id: totrans-401
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: As normal, you will need to start ArcGIS Pro and then open the `RelationshipClass.aprx`
    located in `C:\Student\ArcGISProCookbook\Chapter3\RelationshipClass\`. The project
    should open with a single map called Thomaston. If you completed the previous
    *Creating and using Relates* recipe it should look familiar.
  id: totrans-402
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 正常情况下，您需要启动 ArcGIS Pro 并打开位于 `C:\Student\ArcGISProCookbook\Chapter3\RelationshipClass\`
    的 `RelationshipClass.aprx`。项目应该以一个名为 Thomaston 的单个地图打开。如果您完成了前面的“创建和使用关联”菜谱，它应该看起来很熟悉。
- en: In the Contents pane, you need to verify that you see the Parcels layer and
    the Parcels_Sales table. If not, use skills you have learned to add them to the
    map from the Thomaston.gdb geodatabase which is connected to the project.
  id: totrans-403
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容面板中，您需要确认您能看到包裹层和包裹销售表。如果没有，请使用您已学到的技能，从连接到项目的Thomaston.gdb地理数据库中将它们添加到地图中。
- en: 'In order to create a relationship class between the Parcels layer and the Parcels_Sales
    table, you need to determine two things: a key field in each table and the cardinality.
    If you completed the *Creating and using a Relate* recipe, you will be using the
    same key field and should already know the cardinality, so you can skip to *step
    12* and continue from there. If you did not complete that recipe, continue to
    the next step.'
  id: totrans-404
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了在包裹层和包裹销售表之间创建关系类，您需要确定两件事：每个表中的关键字段和基数。如果您完成了*创建和使用关系*配方，您将使用相同的关键字段，并且应该已经知道基数，因此您可以跳到*步骤12*并继续。如果您没有完成该配方，请继续下一步。
- en: Right-click on the Parcels layer and select Attribute Table.
  id: totrans-405
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击包裹层并选择属性表。
- en: Right-click on the Parcels_Sales table and select Open.
  id: totrans-406
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击包裹销售表并选择打开。
- en: 'Click on the name of the Parcels_Sales located at the top of the table view,
    and drag it until your mouse point is over the docking icon, as shown ahead:'
  id: totrans-407
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于表视图顶部的包裹销售名称，并将其拖动，直到鼠标指针位于前面的停靠图标上，如图所示：
- en: '![](img/8b5f72a6-16d1-4e51-91b7-df224960a91a.png)'
  id: totrans-408
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/8b5f72a6-16d1-4e51-91b7-df224960a91a.png)'
- en: Drag and dock the tables so they can be seen side by side
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 拖动并停靠表，以便它们可以并排显示
- en: 'The two tables should now appear side by side so you can more easily assess
    each one:'
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，两个表应该并排显示，这样您可以更容易地评估每个表：
- en: '![](img/befa1460-1203-415f-b89b-ff35089930f7.png)'
  id: totrans-411
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/befa1460-1203-415f-b89b-ff35089930f7.png)'
- en: Tables viewed side by side
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 并排查看表
- en: Review each table to determine the key field in each table that you will use
    to link the two tables together. Remember the key fields must contain the same
    data values and be the same field data type. The field names do not need to be
    the same.
  id: totrans-413
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 审查每个表，以确定您将用于将两个表链接在一起的关键字段。请记住，关键字段必须包含相同的数据值，并且是相同的字段数据类型。字段名称不需要相同。
- en: '**Question**: What is the key field in each table?'
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：每个表中的关键字段是什么？'
- en: '**Answer**:'
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: After reviewing each table, the key field should be easy to pick out. The Realkey
    is the only field in each table which has the same data values and the same data
    type.
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: 审查完每个表后，关键字段应该很容易找到。Realkey是每个表中唯一具有相同数据值和相同数据类型的字段。
- en: In the Parcels Attribute Table, right-click on the Realkey field and select
    Sort Descending.
  id: totrans-417
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在包裹属性表中，右键单击Realkey字段并选择降序排序。
- en: In the Parcels Attribute Table, locate the records with a Realkey value of 15812.
  id: totrans-418
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在包裹属性表中，找到具有15812 Realkey值的记录。
- en: '**Question**: How many rows in the table contain a Realkey value of 15812?'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：表中包含15812这个Realkey值的行数有多少？'
- en: '**Answer**:'
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: In the Parcels_Sales table, right-click on the REALKEY field and select Sort
    Descending.
  id: totrans-421
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在包裹销售表中，右键单击REALKEY字段并选择降序排序。
- en: In the Parcels_Sales table, locate the rows with a REALKEY value of 15812\.
    You will need to scroll down until you see that value or you could use the Select
    by Attribute tool to select the records.
  id: totrans-422
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在包裹销售表中，找到具有15812 REALKEY值的行。您需要向下滚动直到看到该值，或者可以使用按属性选择工具来选择记录。
- en: '**Question**: How many records in the Parcels_Sales table have a REALKEY value
    of 15812?'
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：包裹销售表中有多少条记录的REALKEY值为15812？'
- en: '**Answer**:'
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: Close both tables by clicking on the small X next to their name in the table
    view.
  id: totrans-425
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击表视图名称旁边的小X关闭两个表。
- en: Click the Clear button located in the Selection group on the Map tab if you
    selected any records in either table.
  id: totrans-426
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您在任一表中选择了任何记录，请点击地图选项卡上的选择组中的清除按钮。
- en: You should now know that there is one parcel and two sales records which have
    a realkey value of 15812\. This means you have a one to many cardinality. So,
    you know the key field and the cardinality you will need to create the relationship
    class which will link the Parcels layer to the Parcels_Sales table.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在应该知道有一个包裹和两个销售记录具有15812这个realkey值。这意味着您有一个一对一的基数。因此，您知道您将需要创建关系类，该类将链接包裹层到包裹销售表。
- en: In the Catalog pane, expand the Database folder so you can see the two databases
    which are connected to the project.
  id: totrans-428
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录视图中，展开数据库文件夹，以便您可以看到连接到项目的两个数据库。
- en: Expand the Thomaston.gdb geodatabase, then right-click on it and select Relationship.
    The Create Relationship tool should open in the Geoprocessing pane.
  id: totrans-429
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开Thomaston.gdb地理数据库，然后右键单击它并选择关系。创建关系工具应在地理处理面板中打开。
- en: Set the Origin Table to Parcels using the drop-down arrow. This establishes
    the Parcels as the primary table for the relationship.
  id: totrans-430
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将原始表设置为Parcels。这确立了Parcels作为关系的主表。
- en: Set the Destination Table to Parcels_Sales using the drop-down arrow. This establishes
    it as the secondary or child table for the relationship.
  id: totrans-431
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将目标表设置为Parcels_Sales。这将其确立为关系的次要或子表。
- en: The Output Relationship Class should be automatically populated with Parcels_Parcels_Sales.
    You can change the name if you desire, or accept the default.
  id: totrans-432
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出关系类应自动填充为Parcels_Parcels_Sales。如果您想更改名称，或者接受默认值。
- en: Both the Forward Path Label and Backward Path Label should be automatically
    populated as well. Accept these default values.
  id: totrans-433
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前向路径标签和反向路径标签也应自动填充。接受这些默认值。
- en: Set the Message Direction to None using the drop-down arrow, since we just want
    to be able to view related records between the tables. We are not trying to have
    one table control the information in the other.
  id: totrans-434
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将消息方向设置为无，因为我们只想能够在表之间查看相关记录。我们不是试图让一个表控制另一个表中的信息。
- en: Using the drop-down arrow, set the Cardinality to One to Many (1:M), since this
    was what you determined the cardinality to be previously.
  id: totrans-435
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头，将基数设置为One to Many (1:M)，因为这是您之前确定的基数。
- en: Set the Origin Primary Key to Realkey and set the Origin Foreign Key to REALKEY.
  id: totrans-436
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将原始主键设置为Realkey，将原始外键设置为REALKEY。
- en: Verify that your Create Relationship Class looks like the following image. If
    it does, click Run.
  id: totrans-437
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证您的创建关系类看起来是否如下所示。如果是，请点击运行。
- en: '![](img/d24c6ae4-90bf-4aef-a8f1-1143ebe49620.png)'
  id: totrans-438
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/d24c6ae4-90bf-4aef-a8f1-1143ebe49620.png)'
- en: Create Relationship Class window in Geoprocessing pane
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: 在地理处理面板中创建关系类窗口
- en: Once the tool has completed successfully, close the Geoprocessing pane.
  id: totrans-440
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦工具成功完成，请关闭地理处理面板。
- en: In the Catalog pane, look at the contents of the Thomaston.gdb geodatabase.
    You should see the new relationship class you just created.
  id: totrans-441
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录面板中，查看Thomaston.gdb地理数据库的内容。您应该看到您刚刚创建的新关系类。
- en: Right-click on the Relationship class in the Catalog pane and select Properties.
  id: totrans-442
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录面板中，右键单击关系类并选择属性。
- en: Take a moment to review the properties. They should reflect the settings you
    defined in the Create Relationship Class tool.
  id: totrans-443
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 花点时间审查属性。它们应该反映您在创建关系类工具中定义的设置。
- en: Click OK when done reviewing the properties.
  id: totrans-444
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 审查完属性后，点击确定。
- en: Now to see if the new Relationship class you create works. Select the Parcels
    layer in the Contents pane.
  id: totrans-445
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在来检查您创建的新关系类是否工作。在内容面板中选择地块层。
- en: Using the Explore tool, zoom into the center of the City of Thomaston. Zoom
    in so you can easily see the boundary of the individual parcels. This should be
    somewhere close to a scale of `1:4800`.
  id: totrans-446
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用探索工具，将视图缩放到Thomaston市中心的中心。放大以便您可以轻松地看到单个地块的边界。这应该在比例约为`1:4800`的位置。
- en: On the Map tab in the ribbon, activate the Select tool and click on a single
    parcel in the map. The selected parcel should have a blue highlighted boarder
    around it.
  id: totrans-447
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区中的地图选项卡上，激活选择工具并点击地图上的单个地块。所选地块应有一个蓝色高亮边框。
- en: Click on the Data tab in the Feature Layer contextual menu in the ribbon.
  id: totrans-448
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区中的要素层上下文菜单中点击数据选项卡。
- en: 'Select the Related Data button and the Parcels_Parcels_Sales: Parcels option
    that is displayed. The Parcels_Sales table should open, displaying any sales associated
    with the parcel you selected. If no sales are displayed, try selecting another
    parcel.'
  id: totrans-449
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '选择相关数据按钮和显示的Parcels_Parcels_Sales: Parcels选项。Parcels_Sales表应该打开，显示与您所选地块相关的任何销售。如果没有显示销售，请尝试选择另一个地块。'
- en: You will need to click on the Related Data button each time you select a new
    parcel to refresh the table view.
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 每次选择一个新的地块时，您都需要点击相关数据按钮来刷新表格视图。
- en: Once you have verified that the relationship class is working, close the table
    view.
  id: totrans-451
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您已验证关系类正在工作，请关闭表格视图。
- en: Save your project and close ArcGIS Pro.
  id: totrans-452
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目并关闭ArcGIS Pro。
- en: In this recipe, you created a Relationship class which linked the Parcels feature
    class to the Parcels_Sales standalone table. This permanently linked these two
    objects in the geodatabase so that you were able to select a parcel in the map
    and easily see each time it had been sold from the Parcels_Sales table.
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，你创建了一个关系类，将地块要素类链接到独立的地块销售表。这样永久性地将这两个对象在地理数据库中链接起来，因此你可以选择地图中的地块，并轻松地看到每次它从地块销售表中销售的情况。
- en: This link was established using a key field you identified in each table. The
    key field used by a Relationship class, like a Relate or a Join, must contain
    the same exact values and be the same field type (text, long integer, short integer,
    and others). However, the field names are not required to be the same. ArcGIS
    Pro is then able to find records in both tables that have the same value and link
    those together, as you saw demonstrated in this recipe.
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: 此链接是通过在每个表中标识的关键字段建立的。关系类（如关联或连接）使用的关键字段必须包含相同的精确值，并且字段类型（文本、长整数、短整数等）必须相同。然而，字段名称不需要相同。然后
    ArcGIS Pro 能够找到两个表中具有相同值的记录并将它们链接起来，正如你在本食谱中看到的那样演示的。
- en: Unlike a Join or a Relate, a relationship class is part of your geodatabase.
    This means that anytime you add the Parcels feature class to a map in any project,
    you will have access to the data in the Parcels_Sales table automatically through
    the Related Data function.
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: 与连接或关联不同，关系类是地理数据库的一部分。这意味着每次你将地块要素类添加到任何项目中的地图时，你都可以通过相关数据功能自动访问地块销售表中的数据。
- en: Once you create a relationship class, you are not able to change how it is configured.
    If you wanted to change a simple relationship to a composite for example, you
    would have to create a completely new relationship class.
  id: totrans-456
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦创建了一个关系类，你就无法更改其配置。如果你想将简单的关系更改为复合关系，例如，你必须创建一个全新的关系类。
