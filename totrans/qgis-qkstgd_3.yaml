- en: Creating Data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建数据
- en: In this chapter, we will be creating GIS data. We will predominantly be working
    with GeoPackages. This is the default format for storing GIS data in QGIS 3.4\.
    Instead of the many extensions that a Shapefile has, a GeoPackage can have hundreds
    of layers contained in one file, making it simpler to share and manage.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将创建GIS数据。我们将主要使用GeoPackage。这是QGIS 3.4中存储GIS数据的默认格式。与Shapefile的许多扩展名相比，GeoPackage可以在一个文件中包含数百个图层，这使得共享和管理更加简单。
- en: We will look at creating geometries of points, lines, and polygons. We will
    add attributes to a attribute table and use the Field Calculator to calculate
    the area of a polygon. We will briefly discuss the use of scratch layers and exporting
    our data to a Shapefile. Finally, we will look at how raster data is imported
    into a GeoPackage.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将探讨创建点、线和多边形的几何形状。我们将向属性表中添加属性，并使用字段计算器计算多边形的面积。我们将简要讨论使用临时图层和将我们的数据导出为Shapefile的方法。最后，我们将探讨如何将栅格数据导入到GeoPackage中。
- en: 'In this chapter, you will learn about the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将学习以下主题：
- en: Creating a GeoPackage
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建GeoPackage
- en: 'Creating vector data:'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建矢量数据：
- en: Editing geometry
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编辑几何形状
- en: Creating attributes
  id: totrans-7
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建属性
- en: Scratch layers and saving as a Shapefile
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 临时图层和保存为Shapefile
- en: Working with raster data in a GeoPackage
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在GeoPackage中处理栅格数据
- en: Creating data
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建数据
- en: As we noted in [Chapter 1](44524991-c928-4616-a928-9fee41ef2270.xhtml), *Getting
    Started with QGIS 3,* and [Chapter 2](6dc781bb-3041-41ce-bd3b-bd355acac92d.xhtml),
    *Loading Data*, the default export GIS format in QGIS 3.4 is a GeoPackage. Any
    vector data operation that we perform can be applied to a Shapefile—at the end
    of this chapter, we will show how to export any vector layer in a GeoPackage into
    a Shapefile (you can also export to a number of other formats; see [https://www.gdal.org/ogr_formats.html](https://www.gdal.org/ogr_formats.html)).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们在[第1章](44524991-c928-4616-a928-9fee41ef2270.xhtml)“QGIS 3入门”和[第2章](6dc781bb-3041-41ce-bd3b-bd355acac92d.xhtml)“加载数据”中提到的，QGIS
    3.4的默认导出GIS格式是GeoPackage。我们进行的任何矢量数据操作都可以应用于Shapefile——在本章末尾，我们将展示如何将GeoPackage中的任何矢量层导出为Shapefile（您也可以导出为其他多种格式；见[https://www.gdal.org/ogr_formats.html](https://www.gdal.org/ogr_formats.html)）。
- en: 'Open the QGIS project we created in [Chapter 2](https://cdp.packtpub.com/qgis_quick_start_guide/wp-admin/post.php?post=26&action=edit#post_25),
    *Loading Data*. If you skipped the previous chapter, load the following layers
    from the GeoPackage associated with this book (available at this link): [https://github.com/PacktPublishing/QGIS-Quick-Start
    Guide/blob/master/Alaska_GeoPackage.zip:](https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip)'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 打开我们在[第2章](https://cdp.packtpub.com/qgis_quick_start_guide/wp-admin/post.php?post=26&action=edit#post_25)“加载数据”中创建的QGIS项目。如果您跳过了前面的章节，请从与本书相关的GeoPackage中加载以下图层（可在以下链接找到）：[https://github.com/PacktPublishing/QGIS-Quick-Start
    Guide/blob/master/Alaska_GeoPackage.zip](https://github.com/PacktPublishing/QGIS-Quick-Start
    Guide/blob/master/Alaska_GeoPackage.zip)
- en: '`Airports`'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Airports`'
- en: '`majrivers`'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`majrivers`'
- en: '`trees`'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`trees`'
- en: Also load `SR_50M_alasja_nad.tif` from `QGIS_sample_data` (downloaded from [https://qgis.org/downloads/data/qgis_sample_data.zip](https://qgis.org/downloads/data/qgis_sample_data.zip)).
    Save this project as `Chapter3.qgz`.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 还需从`QGIS_sample_data`加载`SR_50M_alasja_nad.tif`（从[https://qgis.org/downloads/data/qgis_sample_data.zip](https://qgis.org/downloads/data/qgis_sample_data.zip)下载）。将此项目保存为`Chapter3.qgz`。
- en: Creating a GeoPackage
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建GeoPackage
- en: In this chapter, we will create some data. It will be captured in the same location
    and projection as the QGIS sample data. We will focus on mapping the island off
    the coast of Anchorage called **Fire Island**. First off, let's create a GeoPackage
    called `Fire_Island`.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将创建一些数据。这些数据将采用与QGIS示例数据相同的地点和投影。我们将专注于绘制阿拉斯加海岸外的岛屿**火岛**。首先，让我们创建一个名为`Fire_Island`的GeoPackage。
- en: 'To create a New GeoPackage Layer (a layer within a GeoPackage), we first need
    to create a new GeoPackage. From the Layer menu, select Create Layer | New GeoPackage
    Layer, as shown in the following screenshot:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建新的GeoPackage图层（GeoPackage内的图层），我们首先需要创建一个新的GeoPackage。从图层菜单中选择创建图层 | 新GeoPackage图层，如下截图所示：
- en: '![](img/4eb0d4db-805c-450f-9614-1867b74c3ec6.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4eb0d4db-805c-450f-9614-1867b74c3ec6.png)'
- en: Creating a GeoPackage layer
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 创建GeoPackage图层
- en: 'In the resulting dialog box, fill in the parameters, as in the following screenshot:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在出现的对话框中，填写参数，如下截图所示：
- en: '![](img/fb645eb0-ea60-435f-9910-aeb83c8783bd.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/fb645eb0-ea60-435f-9910-aeb83c8783bd.png)'
- en: GeoPackage reference dialog box
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: GeoPackage参考对话框
- en: 'We are going to create a layer in this GeoPackage called `Fire_Island_Points`,
    with Geometry type as Point and the coordinate reference system as EPSG 2964\.
    Create a New field called `Description` and set its Type to Text data with a maximum
    Length of `25`. Click on Add to fields list to add it to the field. We can always
    add extra fields later. Click on OK. When you click OK, a new GeoPackage will
    be created and the `Fire_Island_Points` layer will be added. You should have a
    new layer in the Layers panel called `Fire_Island_Points`. If you right-click
    on this layer and select Open Attribute Table, the associated table for this layer
    will appear. It will be empty and will have a fid field (assigned by default)
    and the Description field that we just created. This is shown in the following
    screenshot:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在GeoPackage中创建一个名为`Fire_Island_Points`的层，其几何类型为点，坐标参考系统为EPSG 2964。创建一个名为`Description`的新字段，并将其类型设置为文本数据，最大长度为`25`。点击“添加到字段列表”将其添加到字段中。我们总是可以稍后添加额外的字段。点击“确定”。当你点击“确定”时，将创建一个新的GeoPackage，并将`Fire_Island_Points`层添加进去。你应该在图层面板中看到一个名为`Fire_Island_Points`的新层。如果你右键点击这个层并选择“打开属性表”，将出现与该层关联的表。它将是空的，并将有一个fid字段（默认分配）和刚刚创建的描述字段。这如图下所示：
- en: '![](img/f9276fb8-42eb-45ff-b9c1-70d34ae7a9b5.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/f9276fb8-42eb-45ff-b9c1-70d34ae7a9b5.png)'
- en: Layers and attribute table
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图层和属性表
- en: We have now created a GeoPackage and a Point layer within that GeoPackage. We
    now need to create some data. Before we do that, we need to locate Fire Island
    to have something we can base our data on! Fortunately for us, QGIS makes this
    very easy as it allows you to add `OpenStreetMap` to your project.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已创建了一个GeoPackage以及其中包含的点层。我们现在需要创建一些数据。在我们这样做之前，我们需要定位火岛，以便有一个可以基于我们的数据建立的基础！幸运的是，QGIS使这变得非常简单，因为它允许你将`OpenStreetMap`添加到你的项目中。
- en: 'In the Browser panel, find `XYZ Tiles` and expand it. Inside should be `OpenStreetMap`.
    Click and drag this into the map. It will appear as a new layer in the Layers
    panel. Adjust the order of the layers in the Layers panel to match those shown
    in the following screenshot:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在浏览器面板中，找到`XYZ Tiles`并展开它。内部应该有`OpenStreetMap`。点击并拖动它到地图上。它将作为新层出现在图层面板中。调整图层面板中图层的顺序，以匹配以下截图所示：
- en: '![](img/f39fd6cb-a722-4f1e-9384-89b574ba127e.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/f39fd6cb-a722-4f1e-9384-89b574ba127e.png)'
- en: Browser panel and Layers panel
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览器面板和图层面板
- en: Navigate the map to find Anchorage, and you should see Fire Island. It is located
    off the coast to the west of Anchorage. At this point, turn off all the other
    layers except for `Fire_Island_Points` and the `OpenStreetMap` layer.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 导航地图以找到安克雷奇，你应该能看到火岛。它位于安克雷奇西海岸外。在此阶段，关闭除`Fire_Island_Points`层和`OpenStreetMap`层之外的所有其他层。
- en: 'Your project should now look like the following screenshot:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 你的项目现在应该看起来像以下截图：
- en: '![](img/fb693e1f-77b4-4fe2-88d1-00d230e08552.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/fb693e1f-77b4-4fe2-88d1-00d230e08552.png)'
- en: Overview of OpenStreetMap displayed in QGIS 3.4
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: QGIS 3.4中显示的OpenStreetMap概述
- en: In the next section, we will create some data using Digitizing Toolbar.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将使用数字化工具栏创建一些数据。
- en: Digitizing data
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数字化数据
- en: In this section, we will create point, line, and polygon data in QGIS. We will
    create this data in the GeoPackage we have just created.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将在我们刚刚创建的GeoPackage中创建点、线和多边形数据。
- en: Creating points
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建点
- en: 'Zoom into Fire Island so that the airport appears. We will now create a point
    to represent this airport. Make sure that Digitizing Toolbar is visible. You can
    turn it on by selecting View | Toolbars | Digitizing Toolbar. Digitizing Toolbar
    is shown in the following screenshot:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 将地图放大到火岛，以便机场出现。我们现在将创建一个点来表示这个机场。确保数字化工具栏可见。你可以通过选择“视图”|“工具栏”|“数字化工具栏”来打开它。数字化工具栏如图下所示：
- en: '![](img/ac51595a-2ce7-40c3-8a1c-b575ab381331.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/ac51595a-2ce7-40c3-8a1c-b575ab381331.png)'
- en: Digitizing Toolbar
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 数字化工具栏
- en: 'Make sure that the `Fire_Island_Points` layer is selected in the Layers panel
    and click on the Toggle Editing button (yellow pencil) to start an editing session.
    The digitizing tools are now active in the toolbar, as shown in the following
    screenshot:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 确保在图层面板中选择了`Fire_Island_Points`层，并点击“切换编辑”按钮（黄色铅笔）以开始编辑会话。数字化工具现在在工具栏中处于活动状态，如图下所示：
- en: '![](img/7a257cfa-ebe4-471b-9a29-e723ce91453b.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/7a257cfa-ebe4-471b-9a29-e723ce91453b.png)'
- en: Digitizing tools with Toggle Editing activated
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 已激活切换编辑功能的数字化工具
- en: 'Click on the Add Point Feature button (three green dots). The mouse cursor
    will change to cross hairs. Click on the airport location in the `OpenStreetMap`
    data. A Feature Attributes dialog box will open. In here, accept Autogenerate
    for fid (this assigns a unique identifier to a feature), and for Description,
    type `Fire_Island_Airport`. This is shown in the following screenshot:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“添加点要素”按钮（三个绿色圆点）。鼠标光标将变为十字准星。在“OpenStreetMap”数据中点击机场位置。将打开一个要素属性对话框。在这里，接受自动生成fid（这将为要素分配一个唯一的标识符），并在描述中输入“Fire_Island_Airport”。如下截图所示：
- en: '![](img/202cf2bb-e3c0-4151-8224-9a0c9661afbd.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/202cf2bb-e3c0-4151-8224-9a0c9661afbd.png)'
- en: Fire_Island_Points feature attributes
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: Fire_Island_Points要素属性
- en: 'A new point will be created. On the Digitizing Toolbar, click on save (the
    blue disk). Open the attribute table. You will see this newly added point. While
    still in editing mode, let''s add a new field. With the attribute table opened,
    click on New field (Ctrl+W), as shown in the following screenshot:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 将创建一个新的点。在数字化工具栏上，点击保存（蓝色磁盘）。打开属性表。您将看到这个新添加的点。在编辑模式下，让我们添加一个新字段。在打开属性表的情况下，点击“新建字段”（Ctrl+W），如下截图所示：
- en: '![](img/b2cf4fcc-6547-4a25-853a-4e2ac2de0936.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/b2cf4fcc-6547-4a25-853a-4e2ac2de0936.png)'
- en: Attribute table
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 属性表
- en: 'This will open a dialog box called Add Field. Create a new field called `Type`
    and set its Length to `25` (`25` because we are not expecting any string entered
    to be greater than `25` characters). This is shown in the following screenshot:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 这将打开一个名为“添加字段”的对话框。创建一个名为“Type”的新字段，并将其长度设置为“25”（因为不期望输入的任何字符串超过“25”个字符）。如下截图所示：
- en: '![](img/c3b7ec45-0463-47d8-81d5-de2d4c195908.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c3b7ec45-0463-47d8-81d5-de2d4c195908.png)'
- en: Adding a field
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 添加字段
- en: Click on OK and the newly created field will appear as a NULL value in the attribute
    table. Click on the NULL value and change it to `Airport`. In the attribute table,
    click on the save button and then the Toggle Editing button (yellow pencil) to
    stop editing. We have now created a point layer in a GeoPackage, added attributes,
    and created a new field. Let's use this knowledge to create a road layer (line)
    and an island outline layer (polygon).
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“确定”，新创建的字段将作为属性表中的空值出现。点击空值并将其更改为“机场”。在属性表中，点击保存按钮然后点击切换编辑按钮（黄色铅笔）以停止编辑。我们现在已经在GeoPackage中创建了一个点图层，添加了属性，并创建了一个新字段。让我们利用这些知识来创建一个道路图层（线）和一个岛屿轮廓图层（多边形）。
- en: Creating line data
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建线数据
- en: 'From the Layer menu, select Layer | Create Layer | New GeoPackage Layer, as
    we did before. Fill in the dialog box to match the following screenshot:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 从图层菜单中选择图层 | 创建图层 | 新GeoPackage图层，就像我们之前做的那样。填写对话框以匹配以下截图：
- en: '![](img/4904b3fd-2d6a-482b-9392-2b997b70302b.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4904b3fd-2d6a-482b-9392-2b997b70302b.png)'
- en: Creating a Roads layer
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 创建道路图层
- en: 'Click on OK. You will be prompted as to whether you wish to Overwrite, Add
    new layer, or Cancel. In this case, click on Add new layer, as shown in the following
    screenshot:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“确定”。系统会提示您是否要覆盖、添加新图层或取消。在这种情况下，请点击“添加新图层”，如下截图所示：
- en: '![](img/00d5abc1-0d48-413a-826e-060105a556ff.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/00d5abc1-0d48-413a-826e-060105a556ff.png)'
- en: New GeoPackage layer message box
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 新GeoPackage图层消息框
- en: A `Roads` layer will appear in the Layers panel. Make sure it is selected and
    then click on Toggle Editing from Digitizing Toolbar. Click on Add Line Feature.
    This time, find an existing road on the island and digitize it. You digitize by
    left-clicking the mouse and then moving to a new location and left-clicking again—the
    software will join up these two clicks, known as **nodes or vertexes**. You can
    click on the zoom and pan tools while editing to zoom around and make the process
    easier. Don't worry about being too accurate, this is a learning exercise. When
    finished, right-click to complete the line. Set the `Road_Type` field to blacktop
    and click save.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在图层面板中会出现一个“Roads”图层。确保它被选中，然后从数字化工具栏中点击“切换编辑”。点击“添加线要素”。这次，在岛屿上找到一个现有的道路并数字化它。您通过左键点击鼠标并移动到新位置然后再次左键点击来完成数字化——软件会将这两个点击连接起来，称为**节点或顶点**。在编辑过程中，您可以点击缩放和平移工具来缩放并使过程更容易。不用担心过于精确，这是一个学习练习。完成时，右键点击以完成线条。将“Road_Type”字段设置为黑色沥青并点击保存。
- en: 'Let''s create another road. This will be another feature in our `Roads` layer.
    To maintain the topology, we will need to ensure that the road lines touch. This
    is done by snapping. We can snap to vertex, segment, or intersection in QGIS.
    Turn on Snapping Toolbar by clicking View | Toolbars | Snapping Toolbar. In an
    edit session, Snapping Toolbar looks as in the following screenshot:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们再创建一条道路。这将是我们的`Roads`图层中的另一个特性。为了保持拓扑，我们需要确保道路线条相接触。这是通过捕捉来实现的。在QGIS中，我们可以捕捉到顶点、线段或交叉点。通过点击视图
    | 工具栏 | 捕捉工具栏来打开捕捉工具栏。在编辑会话中，捕捉工具栏看起来如下面的截图所示：
- en: '![](img/3fb070a3-aeb1-46fe-b0df-7f092ea826be.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/3fb070a3-aeb1-46fe-b0df-7f092ea826be.png)'
- en: Snapping Toolbar
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 捕捉工具栏
- en: 'In this case, the snapping tolerance has been changed to 10 pixels, but you
    can make adjustments to this based on your zoom level. This is not necessarily
    a one-size-fits-all, and you will need to adjust this parameter to suit your requirements.
    Set the snapping environment to Vertex and Segment to ensure you have the chance
    to snap to an adjoining road, as shown in the following screenshot:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，捕捉容差已被更改为10像素，但你可以根据你的缩放级别进行相应的调整。这并不一定是一个通用的解决方案，你需要调整这个参数以满足你的需求。将捕捉环境设置为顶点和线段，以确保你有机会捕捉到相邻的道路，如下面的截图所示：
- en: '![](img/3f5d0b97-207d-4ff1-a849-87af7bc3f88d.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/3f5d0b97-207d-4ff1-a849-87af7bc3f88d.png)'
- en: Snapping options
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 捕捉选项
- en: 'You are looking for a pink square to appear inside your cross hair digitizing
    cursor. You may need to zoom in. It will look as in the following screenshot:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要在一个十字线数字化光标内看到一个粉红色的方块。你可能需要放大。它看起来如下面的截图所示：
- en: '![](img/20ea4da1-7cfa-4f8f-807b-429de46dd53c.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/20ea4da1-7cfa-4f8f-807b-429de46dd53c.png)'
- en: Snapping at the point
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在点上捕捉
- en: Create a new road and use snapping to ensure that the lines are topologically
    correct—that is, have no gaps. When you have finished digitizing, right-click
    and add blacktop in the `Road_Type` field and click save. Click Toggle Editing
    to finish the digitizing. You can continue to digitize more roads if you wish.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个新的道路并使用捕捉来确保线条是拓扑正确的——也就是说，没有间隙。当你完成数字化后，右键点击并在`Road_Type`字段中添加沥青，然后点击保存。点击切换编辑以完成数字化。如果你愿意，可以继续数字化更多道路。
- en: Creating polygons
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建多边形
- en: 'Finally, in this vector editing section, we will take a look at editing polygons.
    All the techniques we have learned for lines and points apply. Again, create a
    new layer in your GeoPackage, and this time call it `Island_Outline`. We are not
    going to be creating any fields, so accept the defaults shown in the following
    screenshot:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在这个矢量编辑部分，我们将看看如何编辑多边形。我们所学到的所有关于线和点的技术都适用于此。再次，在你的GeoPackage中创建一个新的图层，这次命名为`Island_Outline`。我们不会创建任何字段，所以接受以下截图所示的默认设置：
- en: '![](img/55a0340a-956f-4c16-8de9-0d42e1d8b8da.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/55a0340a-956f-4c16-8de9-0d42e1d8b8da.png)'
- en: Creating a polygon Layer
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 创建多边形图层
- en: 'Select the new layer in the Layers panel, click Toggle Editing and digitize
    the island. Don''t worry about being too detailed. The result will be a digitized
    island. In QGIS, the new polygon layer will appear similar to the following screenshot:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在图层面板中选择新的图层，点击切换编辑并数字化岛屿。不用担心过于详细。结果将是一个数字化的岛屿。在QGIS中，新的多边形图层将类似于以下截图：
- en: '![](img/f6900444-fec3-4421-a8a3-fbbdc39026af.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f6900444-fec3-4421-a8a3-fbbdc39026af.png)'
- en: Overview of editing inside QGIS
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: QGIS内编辑概述
- en: 'Now let''s create a field called `area` and populate its actual area. To do
    this, we will use the Field Calculator tool in Attributes Toolbar. With `Island_Outline`
    selected, click on the Field Calculator button (the abacus icon). Enter the following
    values: Create a new field called `area`, set it as Whole number, and in the Expression
    box enter `$area`. This is shown in the following screenshot:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们创建一个名为`area`的字段并填充其实际面积。为此，我们将使用属性工具栏中的字段计算器工具。选择`Island_Outline`后，点击字段计算器按钮（算盘图标）。输入以下值：创建一个名为`area`的新字段，将其设置为整数，并在表达式框中输入`$area`。如下面的截图所示：
- en: '![](img/36b6ee82-0460-402d-b733-cce7bdd3a57b.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/36b6ee82-0460-402d-b733-cce7bdd3a57b.png)'
- en: Field Calculator
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 字段计算器
- en: Click on OK. This will turn on Toggle Editing, create a new field called `area`,
    and populate it with the area. If you have multiple features, all the areas will
    be calculated. Or, you can select the features you want to calculate the area
    for by using the selection tools. The Field Calculator tool is a flexible and
    very powerful tool. The resulting area is shown in the attribute table. When calculating
    area remember all units will be calculated in the units of the projection. If
    you wanted to check the area, you could use the measure tool shown in [Chapter
    2](6dc781bb-3041-41ce-bd3b-bd355acac92d.xhtml), *Loading Data*, to verify this
    measurement. Untoggle the edit session and save the project.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“确定”。这将开启“切换编辑”功能，创建一个名为`area`的新字段，并用面积值填充它。如果你有多个要素，所有面积都将被计算。或者，你可以使用选择工具选择你想要计算面积的特征。字段计算工具是一个灵活且非常强大的工具。计算出的面积将在属性表中显示。在计算面积时，请记住所有单位都将使用投影的单位进行计算。如果你想检查面积，可以使用[第2章](6dc781bb-3041-41ce-bd3b-bd355acac92d.xhtml)中提到的“加载数据”部分展示的测量工具来验证这个测量值。取消编辑会话并保存项目。
- en: Scratch layers
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 临时图层
- en: Scratch layers are temporary vector layers that remain present while the QGIS
    project you are working on is open, but are lost upon closing—they are stored
    in memory. Scratch layers are useful when you want to quickly draw some features
    on a map. The benefit is that you don't need to think about file formats and locations
    for your temporary data. If you find you need to keep the layer, it can be exported
    as a permanent file—we will look at this in the next section.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 临时图层是临时矢量图层，在打开QGIS项目时保持存在，但在关闭时丢失——它们存储在内存中。当你想要快速在地图上绘制一些特征时，临时图层非常有用。好处是，你不需要考虑临时数据的文件格式和位置。如果你发现你需要保留这个图层，它可以被导出为永久文件——我们将在下一节中探讨这一点。
- en: 'To create a scratch layer, select Layer | Create Layer | New Temporary Scratch
    Layer. Select Polygon / CurvePolygon as Geometry type, as shown in the following
    screenshot:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个临时图层，选择“图层 | 创建图层 | 新建临时临时图层”。选择“多边形/曲线多边形”作为几何类型，如下面的截图所示：
- en: '![](img/a2212bed-59a7-4a49-97d7-d35528210d94.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/a2212bed-59a7-4a49-97d7-d35528210d94.png)'
- en: Creating a scratch layer
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 创建临时图层
- en: 'Digitize around one of the water bodies on `Fire_Island` using the techniques
    we have already highlighted. Your project will look like the following screenshot:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 使用我们已强调的技术在“Fire_Island”上的一个水体周围进行数字化。你的项目将看起来像下面的截图：
- en: '![](img/b35803fe-e904-4aaa-8bf2-775e17a6174f.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/b35803fe-e904-4aaa-8bf2-775e17a6174f.png)'
- en: Overview of Digitized water body
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 数字化水体的概述
- en: Save your edits and untoggle editing. Scratch layers should help you with data
    management—no need to create multiple `test.shp` files and not know what they
    are any more.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 保存你的编辑并取消编辑。临时图层可以帮助你进行数据管理——无需再创建多个`test.shp`文件，也不必再知道它们是什么。
- en: Saving data to Shapefiles
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将数据保存为Shapefile
- en: 'We might want to save this scratch layer to a Shapefile. In fact, we can follow
    the same method for saving any of our data to a Shapefile. Right-click on the
    layer and select Export | Save Features as. From the drop-down menu next to Format,
    choose ESRI Shapefile, as shown in the following screenshot:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可能希望将这个临时图层保存为Shapefile。实际上，我们可以使用相同的方法将我们的任何数据保存为Shapefile。在图层上右键单击并选择“导出
    | 保存要素为...”。在“格式”旁边的下拉菜单中选择ESRI Shapefile，如下面的截图所示：
- en: '![](img/65eb08da-f8d4-46ee-bc95-095129e6f6d8.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/65eb08da-f8d4-46ee-bc95-095129e6f6d8.png)'
- en: Saving to a Shapefile
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 保存到Shapefile
- en: Accept the defaults and a new Shapefile will be created.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 接受默认设置，将创建一个新的Shapefile。
- en: Raster data
  id: totrans-99
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 光栅数据
- en: For the main, raster data that you create will be created via processing tools
    such as interpolation or the gridding of point data. Sometimes, we may want to
    rasterize a vector layer. This can be done using the Raster | Conversion | Rasterize
    command.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 对于主要的光栅数据，你将通过处理工具如插值或点数据的网格化来创建。有时，我们可能想要将矢量图层栅格化。这可以通过使用“光栅 | 转换 | 栅格化”命令来完成。
- en: 'Let''s load the `SR_50M_alasak_nad.tif` raster into the GeoPackage we have
    just created. You can just drag the layer in the Browser panel into the GeoPackage.
    It will show a message box once loaded, as in the following screenshot:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将`SR_50M_alasak_nad.tif`光栅加载到我们刚刚创建的GeoPackage中。你只需将图层从浏览器面板拖到GeoPackage中。一旦加载，它将显示一个消息框，如下面的截图所示：
- en: '![](img/238b6cb9-6188-41e5-ae3e-cfe9fc9354f5.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/238b6cb9-6188-41e5-ae3e-cfe9fc9354f5.png)'
- en: Importing a Raster layer to a GeoPackage
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 将光栅图层导入GeoPackage
- en: 'The `Fire_Island.gpkg` GeoPackage will now look like the following screenshot:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '`Fire_Island.gpkg` GeoPackage现在将看起来像下面的截图：'
- en: '![](img/bb65b44d-a26b-4324-9bbe-4388e81d98ea.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/bb65b44d-a26b-4324-9bbe-4388e81d98ea.png)'
- en: Contents of the GeoPackage
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: GeoPackage的内容
- en: It is that simple to add data to a GeoPackage. Drag this layer into the map
    to check that it is actually present.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 向GeoPackage添加数据如此简单。将这个图层拖入地图中，以检查它是否确实存在。
- en: Creating a raster dataset
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建栅格数据集
- en: We are going to perform a query on the `landcover` data to create a new layer
    and then move it into the `Fire_Island` GeoPackage. Load the `landcover` raster
    from the `raster` folder in the QGIS sample data into the Layers panel.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将对`landcover`数据进行查询以创建一个新的图层，然后将其移动到`Fire_Island`GeoPackage中。将QGIS样本数据中的`landcover`栅格从`raster`文件夹加载到图层面板中。
- en: 'Next, select Raster | Raster Calculator from the main menu. Fill in Raster
    Calculator, as shown in the following screenshot:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，从主菜单中选择“栅格”|“栅格计算器”。填写栅格计算器，如图下截图所示：
- en: '![](img/6d6182e6-731a-4fe3-a33d-36267e24b9b6.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6d6182e6-731a-4fe3-a33d-36267e24b9b6.png)'
- en: Raster Calculator
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 栅格计算器
- en: Save the new raster to a GeoTIFF file and click on OK. This will create a mask—anything
    with a `landcover` value greater than five will be assigned a value of one, and
    everything less than five will be assigned a value of zero. In the next chapter,
    we will show how we can display this data in a more meaningful way, setting transparency
    and changing color ramps.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 将新的栅格保存为GeoTIFF文件并点击确定。这将创建一个掩膜——任何`landcover`值大于五的都将被分配一个值为一，而小于五的将被分配一个值为零。在下一章中，我们将展示如何以更有意义的方式显示这些数据，设置透明度和更改颜色渐变。
- en: Finally, drag this newly created layer into the `Fire_Island` GeoPackage.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，将这个新创建的图层拖入`Fire_Island`GeoPackage中。
- en: Summary
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: We have looked at creating vector and raster data. Using the default GeoPackage
    format in QGIS is a powerful, yet simple, way to manage our GIS data. In this
    chapter, we have built geometries for points, lines, and polygons, and assigned
    attributes. We have created scratch layers, Shapefiles, and rasters.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经探讨了创建矢量和栅格数据。在QGIS中使用默认的GeoPackage格式是一种强大而简单的方式来管理我们的GIS数据。在本章中，我们为点、线和多边形构建了几何形状，并分配了属性。我们创建了临时图层、Shapefiles和栅格。
- en: In the next chapter, we will look at this attribute data to style our data.
    We will use the values in a raster to utilize different color ramps. The next
    chapter is a stepping stone on our way to creating a map, which we will do in
    [Chapter 5](2481b8d1-b60c-4839-bb1c-c8654cd792b2.xhtml), *Creating Maps*.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将查看这些属性数据来样式化我们的数据。我们将使用栅格中的值来利用不同的颜色渐变。下一章是我们创建地图道路上的一个垫脚石，我们将在[第5章](2481b8d1-b60c-4839-bb1c-c8654cd792b2.xhtml)“创建地图”中完成这一任务。
