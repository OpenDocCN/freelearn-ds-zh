- en: Creating Data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we will be creating GIS data. We will predominantly be working
    with GeoPackages. This is the default format for storing GIS data in QGIS 3.4\.
    Instead of the many extensions that a Shapefile has, a GeoPackage can have hundreds
    of layers contained in one file, making it simpler to share and manage.
  prefs: []
  type: TYPE_NORMAL
- en: We will look at creating geometries of points, lines, and polygons. We will
    add attributes to a attribute table and use the Field Calculator to calculate
    the area of a polygon. We will briefly discuss the use of scratch layers and exporting
    our data to a Shapefile. Finally, we will look at how raster data is imported
    into a GeoPackage.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, you will learn about the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Creating a GeoPackage
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Creating vector data:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Editing geometry
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating attributes
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Scratch layers and saving as a Shapefile
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Working with raster data in a GeoPackage
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As we noted in [Chapter 1](44524991-c928-4616-a928-9fee41ef2270.xhtml), *Getting
    Started with QGIS 3,* and [Chapter 2](6dc781bb-3041-41ce-bd3b-bd355acac92d.xhtml),
    *Loading Data*, the default export GIS format in QGIS 3.4 is a GeoPackage. Any
    vector data operation that we perform can be applied to a Shapefile—at the end
    of this chapter, we will show how to export any vector layer in a GeoPackage into
    a Shapefile (you can also export to a number of other formats; see [https://www.gdal.org/ogr_formats.html](https://www.gdal.org/ogr_formats.html)).
  prefs: []
  type: TYPE_NORMAL
- en: 'Open the QGIS project we created in [Chapter 2](https://cdp.packtpub.com/qgis_quick_start_guide/wp-admin/post.php?post=26&action=edit#post_25),
    *Loading Data*. If you skipped the previous chapter, load the following layers
    from the GeoPackage associated with this book (available at this link): [https://github.com/PacktPublishing/QGIS-Quick-Start
    Guide/blob/master/Alaska_GeoPackage.zip:](https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip)'
  prefs: []
  type: TYPE_NORMAL
- en: '`Airports`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`majrivers`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`trees`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Also load `SR_50M_alasja_nad.tif` from `QGIS_sample_data` (downloaded from [https://qgis.org/downloads/data/qgis_sample_data.zip](https://qgis.org/downloads/data/qgis_sample_data.zip)).
    Save this project as `Chapter3.qgz`.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a GeoPackage
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we will create some data. It will be captured in the same location
    and projection as the QGIS sample data. We will focus on mapping the island off
    the coast of Anchorage called **Fire Island**. First off, let's create a GeoPackage
    called `Fire_Island`.
  prefs: []
  type: TYPE_NORMAL
- en: 'To create a New GeoPackage Layer (a layer within a GeoPackage), we first need
    to create a new GeoPackage. From the Layer menu, select Create Layer | New GeoPackage
    Layer, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4eb0d4db-805c-450f-9614-1867b74c3ec6.png)'
  prefs: []
  type: TYPE_IMG
- en: Creating a GeoPackage layer
  prefs: []
  type: TYPE_NORMAL
- en: 'In the resulting dialog box, fill in the parameters, as in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/fb645eb0-ea60-435f-9910-aeb83c8783bd.png)'
  prefs: []
  type: TYPE_IMG
- en: GeoPackage reference dialog box
  prefs: []
  type: TYPE_NORMAL
- en: 'We are going to create a layer in this GeoPackage called `Fire_Island_Points`,
    with Geometry type as Point and the coordinate reference system as EPSG 2964\.
    Create a New field called `Description` and set its Type to Text data with a maximum
    Length of `25`. Click on Add to fields list to add it to the field. We can always
    add extra fields later. Click on OK. When you click OK, a new GeoPackage will
    be created and the `Fire_Island_Points` layer will be added. You should have a
    new layer in the Layers panel called `Fire_Island_Points`. If you right-click
    on this layer and select Open Attribute Table, the associated table for this layer
    will appear. It will be empty and will have a fid field (assigned by default)
    and the Description field that we just created. This is shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f9276fb8-42eb-45ff-b9c1-70d34ae7a9b5.png)'
  prefs: []
  type: TYPE_IMG
- en: Layers and attribute table
  prefs: []
  type: TYPE_NORMAL
- en: We have now created a GeoPackage and a Point layer within that GeoPackage. We
    now need to create some data. Before we do that, we need to locate Fire Island
    to have something we can base our data on! Fortunately for us, QGIS makes this
    very easy as it allows you to add `OpenStreetMap` to your project.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the Browser panel, find `XYZ Tiles` and expand it. Inside should be `OpenStreetMap`.
    Click and drag this into the map. It will appear as a new layer in the Layers
    panel. Adjust the order of the layers in the Layers panel to match those shown
    in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f39fd6cb-a722-4f1e-9384-89b574ba127e.png)'
  prefs: []
  type: TYPE_IMG
- en: Browser panel and Layers panel
  prefs: []
  type: TYPE_NORMAL
- en: Navigate the map to find Anchorage, and you should see Fire Island. It is located
    off the coast to the west of Anchorage. At this point, turn off all the other
    layers except for `Fire_Island_Points` and the `OpenStreetMap` layer.
  prefs: []
  type: TYPE_NORMAL
- en: 'Your project should now look like the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/fb693e1f-77b4-4fe2-88d1-00d230e08552.png)'
  prefs: []
  type: TYPE_IMG
- en: Overview of OpenStreetMap displayed in QGIS 3.4
  prefs: []
  type: TYPE_NORMAL
- en: In the next section, we will create some data using Digitizing Toolbar.
  prefs: []
  type: TYPE_NORMAL
- en: Digitizing data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we will create point, line, and polygon data in QGIS. We will
    create this data in the GeoPackage we have just created.
  prefs: []
  type: TYPE_NORMAL
- en: Creating points
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Zoom into Fire Island so that the airport appears. We will now create a point
    to represent this airport. Make sure that Digitizing Toolbar is visible. You can
    turn it on by selecting View | Toolbars | Digitizing Toolbar. Digitizing Toolbar
    is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ac51595a-2ce7-40c3-8a1c-b575ab381331.png)'
  prefs: []
  type: TYPE_IMG
- en: Digitizing Toolbar
  prefs: []
  type: TYPE_NORMAL
- en: 'Make sure that the `Fire_Island_Points` layer is selected in the Layers panel
    and click on the Toggle Editing button (yellow pencil) to start an editing session.
    The digitizing tools are now active in the toolbar, as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/7a257cfa-ebe4-471b-9a29-e723ce91453b.png)'
  prefs: []
  type: TYPE_IMG
- en: Digitizing tools with Toggle Editing activated
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on the Add Point Feature button (three green dots). The mouse cursor
    will change to cross hairs. Click on the airport location in the `OpenStreetMap`
    data. A Feature Attributes dialog box will open. In here, accept Autogenerate
    for fid (this assigns a unique identifier to a feature), and for Description,
    type `Fire_Island_Airport`. This is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/202cf2bb-e3c0-4151-8224-9a0c9661afbd.png)'
  prefs: []
  type: TYPE_IMG
- en: Fire_Island_Points feature attributes
  prefs: []
  type: TYPE_NORMAL
- en: 'A new point will be created. On the Digitizing Toolbar, click on save (the
    blue disk). Open the attribute table. You will see this newly added point. While
    still in editing mode, let''s add a new field. With the attribute table opened,
    click on New field (Ctrl+W), as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/b2cf4fcc-6547-4a25-853a-4e2ac2de0936.png)'
  prefs: []
  type: TYPE_IMG
- en: Attribute table
  prefs: []
  type: TYPE_NORMAL
- en: 'This will open a dialog box called Add Field. Create a new field called `Type`
    and set its Length to `25` (`25` because we are not expecting any string entered
    to be greater than `25` characters). This is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c3b7ec45-0463-47d8-81d5-de2d4c195908.png)'
  prefs: []
  type: TYPE_IMG
- en: Adding a field
  prefs: []
  type: TYPE_NORMAL
- en: Click on OK and the newly created field will appear as a NULL value in the attribute
    table. Click on the NULL value and change it to `Airport`. In the attribute table,
    click on the save button and then the Toggle Editing button (yellow pencil) to
    stop editing. We have now created a point layer in a GeoPackage, added attributes,
    and created a new field. Let's use this knowledge to create a road layer (line)
    and an island outline layer (polygon).
  prefs: []
  type: TYPE_NORMAL
- en: Creating line data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'From the Layer menu, select Layer | Create Layer | New GeoPackage Layer, as
    we did before. Fill in the dialog box to match the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4904b3fd-2d6a-482b-9392-2b997b70302b.png)'
  prefs: []
  type: TYPE_IMG
- en: Creating a Roads layer
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on OK. You will be prompted as to whether you wish to Overwrite, Add
    new layer, or Cancel. In this case, click on Add new layer, as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/00d5abc1-0d48-413a-826e-060105a556ff.png)'
  prefs: []
  type: TYPE_IMG
- en: New GeoPackage layer message box
  prefs: []
  type: TYPE_NORMAL
- en: A `Roads` layer will appear in the Layers panel. Make sure it is selected and
    then click on Toggle Editing from Digitizing Toolbar. Click on Add Line Feature.
    This time, find an existing road on the island and digitize it. You digitize by
    left-clicking the mouse and then moving to a new location and left-clicking again—the
    software will join up these two clicks, known as **nodes or vertexes**. You can
    click on the zoom and pan tools while editing to zoom around and make the process
    easier. Don't worry about being too accurate, this is a learning exercise. When
    finished, right-click to complete the line. Set the `Road_Type` field to blacktop
    and click save.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s create another road. This will be another feature in our `Roads` layer.
    To maintain the topology, we will need to ensure that the road lines touch. This
    is done by snapping. We can snap to vertex, segment, or intersection in QGIS.
    Turn on Snapping Toolbar by clicking View | Toolbars | Snapping Toolbar. In an
    edit session, Snapping Toolbar looks as in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/3fb070a3-aeb1-46fe-b0df-7f092ea826be.png)'
  prefs: []
  type: TYPE_IMG
- en: Snapping Toolbar
  prefs: []
  type: TYPE_NORMAL
- en: 'In this case, the snapping tolerance has been changed to 10 pixels, but you
    can make adjustments to this based on your zoom level. This is not necessarily
    a one-size-fits-all, and you will need to adjust this parameter to suit your requirements.
    Set the snapping environment to Vertex and Segment to ensure you have the chance
    to snap to an adjoining road, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/3f5d0b97-207d-4ff1-a849-87af7bc3f88d.png)'
  prefs: []
  type: TYPE_IMG
- en: Snapping options
  prefs: []
  type: TYPE_NORMAL
- en: 'You are looking for a pink square to appear inside your cross hair digitizing
    cursor. You may need to zoom in. It will look as in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/20ea4da1-7cfa-4f8f-807b-429de46dd53c.png)'
  prefs: []
  type: TYPE_IMG
- en: Snapping at the point
  prefs: []
  type: TYPE_NORMAL
- en: Create a new road and use snapping to ensure that the lines are topologically
    correct—that is, have no gaps. When you have finished digitizing, right-click
    and add blacktop in the `Road_Type` field and click save. Click Toggle Editing
    to finish the digitizing. You can continue to digitize more roads if you wish.
  prefs: []
  type: TYPE_NORMAL
- en: Creating polygons
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Finally, in this vector editing section, we will take a look at editing polygons.
    All the techniques we have learned for lines and points apply. Again, create a
    new layer in your GeoPackage, and this time call it `Island_Outline`. We are not
    going to be creating any fields, so accept the defaults shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/55a0340a-956f-4c16-8de9-0d42e1d8b8da.png)'
  prefs: []
  type: TYPE_IMG
- en: Creating a polygon Layer
  prefs: []
  type: TYPE_NORMAL
- en: 'Select the new layer in the Layers panel, click Toggle Editing and digitize
    the island. Don''t worry about being too detailed. The result will be a digitized
    island. In QGIS, the new polygon layer will appear similar to the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f6900444-fec3-4421-a8a3-fbbdc39026af.png)'
  prefs: []
  type: TYPE_IMG
- en: Overview of editing inside QGIS
  prefs: []
  type: TYPE_NORMAL
- en: 'Now let''s create a field called `area` and populate its actual area. To do
    this, we will use the Field Calculator tool in Attributes Toolbar. With `Island_Outline`
    selected, click on the Field Calculator button (the abacus icon). Enter the following
    values: Create a new field called `area`, set it as Whole number, and in the Expression
    box enter `$area`. This is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/36b6ee82-0460-402d-b733-cce7bdd3a57b.png)'
  prefs: []
  type: TYPE_IMG
- en: Field Calculator
  prefs: []
  type: TYPE_NORMAL
- en: Click on OK. This will turn on Toggle Editing, create a new field called `area`,
    and populate it with the area. If you have multiple features, all the areas will
    be calculated. Or, you can select the features you want to calculate the area
    for by using the selection tools. The Field Calculator tool is a flexible and
    very powerful tool. The resulting area is shown in the attribute table. When calculating
    area remember all units will be calculated in the units of the projection. If
    you wanted to check the area, you could use the measure tool shown in [Chapter
    2](6dc781bb-3041-41ce-bd3b-bd355acac92d.xhtml), *Loading Data*, to verify this
    measurement. Untoggle the edit session and save the project.
  prefs: []
  type: TYPE_NORMAL
- en: Scratch layers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Scratch layers are temporary vector layers that remain present while the QGIS
    project you are working on is open, but are lost upon closing—they are stored
    in memory. Scratch layers are useful when you want to quickly draw some features
    on a map. The benefit is that you don't need to think about file formats and locations
    for your temporary data. If you find you need to keep the layer, it can be exported
    as a permanent file—we will look at this in the next section.
  prefs: []
  type: TYPE_NORMAL
- en: 'To create a scratch layer, select Layer | Create Layer | New Temporary Scratch
    Layer. Select Polygon / CurvePolygon as Geometry type, as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/a2212bed-59a7-4a49-97d7-d35528210d94.png)'
  prefs: []
  type: TYPE_IMG
- en: Creating a scratch layer
  prefs: []
  type: TYPE_NORMAL
- en: 'Digitize around one of the water bodies on `Fire_Island` using the techniques
    we have already highlighted. Your project will look like the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/b35803fe-e904-4aaa-8bf2-775e17a6174f.png)'
  prefs: []
  type: TYPE_IMG
- en: Overview of Digitized water body
  prefs: []
  type: TYPE_NORMAL
- en: Save your edits and untoggle editing. Scratch layers should help you with data
    management—no need to create multiple `test.shp` files and not know what they
    are any more.
  prefs: []
  type: TYPE_NORMAL
- en: Saving data to Shapefiles
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We might want to save this scratch layer to a Shapefile. In fact, we can follow
    the same method for saving any of our data to a Shapefile. Right-click on the
    layer and select Export | Save Features as. From the drop-down menu next to Format,
    choose ESRI Shapefile, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/65eb08da-f8d4-46ee-bc95-095129e6f6d8.png)'
  prefs: []
  type: TYPE_IMG
- en: Saving to a Shapefile
  prefs: []
  type: TYPE_NORMAL
- en: Accept the defaults and a new Shapefile will be created.
  prefs: []
  type: TYPE_NORMAL
- en: Raster data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: For the main, raster data that you create will be created via processing tools
    such as interpolation or the gridding of point data. Sometimes, we may want to
    rasterize a vector layer. This can be done using the Raster | Conversion | Rasterize
    command.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s load the `SR_50M_alasak_nad.tif` raster into the GeoPackage we have
    just created. You can just drag the layer in the Browser panel into the GeoPackage.
    It will show a message box once loaded, as in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/238b6cb9-6188-41e5-ae3e-cfe9fc9354f5.png)'
  prefs: []
  type: TYPE_IMG
- en: Importing a Raster layer to a GeoPackage
  prefs: []
  type: TYPE_NORMAL
- en: 'The `Fire_Island.gpkg` GeoPackage will now look like the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/bb65b44d-a26b-4324-9bbe-4388e81d98ea.png)'
  prefs: []
  type: TYPE_IMG
- en: Contents of the GeoPackage
  prefs: []
  type: TYPE_NORMAL
- en: It is that simple to add data to a GeoPackage. Drag this layer into the map
    to check that it is actually present.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a raster dataset
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We are going to perform a query on the `landcover` data to create a new layer
    and then move it into the `Fire_Island` GeoPackage. Load the `landcover` raster
    from the `raster` folder in the QGIS sample data into the Layers panel.
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, select Raster | Raster Calculator from the main menu. Fill in Raster
    Calculator, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/6d6182e6-731a-4fe3-a33d-36267e24b9b6.png)'
  prefs: []
  type: TYPE_IMG
- en: Raster Calculator
  prefs: []
  type: TYPE_NORMAL
- en: Save the new raster to a GeoTIFF file and click on OK. This will create a mask—anything
    with a `landcover` value greater than five will be assigned a value of one, and
    everything less than five will be assigned a value of zero. In the next chapter,
    we will show how we can display this data in a more meaningful way, setting transparency
    and changing color ramps.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, drag this newly created layer into the `Fire_Island` GeoPackage.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We have looked at creating vector and raster data. Using the default GeoPackage
    format in QGIS is a powerful, yet simple, way to manage our GIS data. In this
    chapter, we have built geometries for points, lines, and polygons, and assigned
    attributes. We have created scratch layers, Shapefiles, and rasters.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we will look at this attribute data to style our data.
    We will use the values in a raster to utilize different color ramps. The next
    chapter is a stepping stone on our way to creating a map, which we will do in
    [Chapter 5](2481b8d1-b60c-4839-bb1c-c8654cd792b2.xhtml), *Creating Maps*.
  prefs: []
  type: TYPE_NORMAL
