<html><head></head><body>
		<div><div></div>
		</div>
		<div><h1 id="_idParaDest-220">8. <a id="_idTextAnchor248"/>Data Analysis: Creating and Using Table Calculations</h1>
		</div>
		<div><p class="callout-heading">Overview</p>
			<p class="callout">In this chapter, you will learn about the different types of table calculations in Tableau, their benefits, and how to use them effectively. The goal of this chapter is to improve your analytical skills using table calculations by looking at data through different views to understand the underlying patterns. By the end of this chapter, you will be well positioned to perform complex analysis on the data in your visualizations using table calculations.</p>
			<h1 id="_idParaDest-221"><a id="_idTextAnchor249"/>Introduction</h1>
			<p>In any visualization, a virtual table is created based on the dimensions used in the view. This is added to the <code>Columns</code>, <code>Rows</code>, and <code>Marks</code> shelves.</p>
			<div><div><img src="img/B16342_08_01.jpg" alt="Figure 8.1: Virtual table in the view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.1: Virtual table in the view</p>
			<p>The highlighted area in the preceding figure consisting of the <code>Rows</code>, <code>Columns</code>, and <code>Marks</code> shelves will make up your level of detail. The empty canvas outline for dropping fields contains the virtual table that will be affected by table calculations.</p>
			<p>A table calculation is simply a calculation that computes results based on the table segment in scope. You will learn about segments and scope in detail in the following sections. For now, assume it is the entire empty canvas area. All table calculations will only be computed within the empty canvas outline or the virtual table.</p>
			<p>In previous chapters, you learned about visualization methods that present data in a meaningful way. There may be times where you need to analyze a table, such as when you want to find the most profitable sub-category within a category. This is where table calculations come in handy. </p>
			<p>In this chapter, you will learn about table calculations and their applications through various exercises. You will also learn about the functions that are a part of table calculations, and how to apply them. You will use the <code>Sample - Superstore</code> dataset throughout the exercises.</p>
			<h1 id="_idParaDest-222"><a id="_idTextAnchor250"/>Quick Table Calculations</h1>
			<p>Quick table calculations, as the name suggests, allow you to quickly apply frequently used table calculations to the view using the most typical settings for that calculation type. They save you the effort of using the column fields from data to create calculations. They have inbuilt logic , so you can use them directly in the view. Some of the most commonly used table calculations are as follows:</p>
			<ul>
				<li><code>Running Total</code></li>
				<li><code>Difference</code></li>
				<li><code>Percent of Total</code></li>
				<li><code>Percent Difference</code></li>
				<li><code>Percentile</code></li>
				<li><code>Rank</code></li>
				<li><code>Moving Average</code></li>
			</ul>
			<p>You will start by learning how to apply quick table calculations, using the <code>Sample - Superstore</code> dataset. This file can be found by following the <code>Documents</code> | <code>My Tableau Repository</code> | <code>Data Sources</code> system path, and then opening the <em class="italic">Sample - Superstore.xls</em> file.</p>
			<p>To begin, create a view that shows <code>Category</code> against <code>YEAR(Order Date)</code> and <code>SUM(Profit)</code>, as follows:</p>
			<div><div><img src="img/B16342_08_02.jpg" alt="Figure 8.2: Initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.2: Initial view</p>
			<p>Table calculations only work with measures, so you need a measure to add a calculation. To add a quick table calculation, first click on the measure dropdown, which is <code>SUM(Profit)</code> in this case.</p>
			<div><div><img src="img/B16342_08_03.jpg" alt="Figure 8.3: Accessing the Profit drilldown&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.3: Accessing the Profit drilldown</p>
			<p>Navigate to the <code>Quick Table Calculation</code> menu.</p>
			<div><div><img src="img/B16342_08_04.jpg" alt="Figure 8.4: Various quick table calculations&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.4: Various quick table calculations</p>
			<p>You can see that there are numerous quick calculations available, such as <code>Running Total</code>, <code>Percentile</code>, and <code>Rank</code>. You will now go through each of these in detail.</p>
			<h2 id="_idParaDest-223"><a id="_idTextAnchor251"/>Running Total</h2>
			<p><code>Running Total</code>, as the name suggests, is used to calculate the cumulative total of a measure across a specific dimension or table structure. It adds up the previous value with the current value to display that result in the current value's place in the running total. For example, consider that you are working on a project related to a car manufacturer. A common use case for this calculation, would be to calculate the month-by-month cumulative car sales for a year, to find out the total sales for that year. You can also further calculate it on a year-by-year basis to find out the overall car sales to date. The next exercise looks at this in detail.</p>
			<h2 id="_idParaDest-224"><a id="_idTextAnchor252"/>Exercise 8.01: Creating a Running Total Calculation</h2>
			<p>In this exercise, you will calculate the cumulative profit earned across different years for a particular category using the <code>Running Total</code> calculation. This allows you to view all years together for the profits earned, rather than individual years. The following steps will help you complete this exercise:</p>
			<ol>
				<li>Load the <code>Sample – Superstore</code> dataset in your Tableau instance. In the <code>Connect</code> pane, click on <code>Microsoft Excel</code> and navigate to <code>Documents</code> | <code>My Tableau Repository</code> | <code>Data Sources</code>, and then open the <code>Sample - Superstore.xls</code> file.</li>
				<li>Create a view that shows <code>Category</code> against <code>YEAR(Order Date)</code> and <code>SUM(Profit)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_05.jpg" alt="Figure 8.5: Running total initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.5: Running total initial view</p>
			<ol>
				<li value="3">Add a <code>Running Total</code> quick calculation to the view by selecting the following highlighted options:</li>
			</ol>
			<div><div><img src="img/B16342_08_06.jpg" alt="Figure 8.6: Accessing Quick Table Calculation | Running Total&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.6: Accessing Quick Table Calculation | Running Total</p>
			<ol>
				<li value="4">The following view shows the final output:</li>
			</ol>
			<div><div><img src="img/B16342_08_07.jpg" alt="Figure 8.7: Final output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.7: Final output</p>
			<p>As you can see, by comparing the previous figure (final view) with the next one (initial view), the profit has been summed cumulatively by taking the previous year's profit, as well as the current year's profit. With <code>Furniture</code>, for example, the second value under the running total is computed using the previous value and the current value, that is, 5,458 + 3,015 = 8,473, and this is done similarly for other values.</p>
			<div><div><img src="img/B16342_08_08.jpg" alt="Figure 8.8: Initial view &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.8: Initial view </p>
			<p>This view is helpful for calculating the cumulative profit earned, year after year, for the different categories, as well as for identifying which category has been performing well and which hasn't. These insights can help you make important business decisions to understand which products can be used to generate higher profits.</p>
			<p>Next, you will learn about the <code>Difference</code> table calculation.</p>
			<h2 id="_idParaDest-225"><a id="_idTextAnchor253"/>Difference</h2>
			<p><code>Difference</code>, as the name suggests, is used to calculate the difference of a measure across a specific dimension or table structure from its previous value. Often, you may need to analyze how individual categories compare with their past performances, i.e. comparing product sales from previous quarters. Continuing with the car manufacturer example, a common scenario to apply this calculation, would be to compare the sales for the months of a year. This allows you to find out whether the total sales are greater or fewer, compared to the previous months. In the following exercise, you will learn how to apply a <code>Difference</code> table calculation to a worksheet.</p>
			<h2 id="_idParaDest-226"><a id="_idTextAnchor254"/>Exercise 8.02: Creating a Difference Calculation</h2>
			<p>In this exercise, you will calculate the profit difference across years for a category. This will help you analyze whether that category is profitable or not:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Category</code> against <code>YEAR(Order Date)</code> and <code>SUM(Profit)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_09.jpg" alt="Figure 8.9: Initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.9: Initial view</p>
			<ol>
				<li value="3">Add the <code>Difference</code> quick calculation to the view, as shown in the following figure:</li>
			</ol>
			<div><div><img src="img/B16342_08_10.jpg" alt="Figure 8.10: Accessing quick table calculation difference&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.10: Accessing quick table calculation difference</p>
			<p>The final view will be as follows:</p>
			<div><div><img src="img/B16342_08_11.jpg" alt="Figure 8.11: Final output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.11: Final output</p>
			<p>As you can see, the result is the difference between the current year's profit and the previous year's profit; for example, for <code>Furniture</code>, the second value under <code>Difference</code> is computed using the previous value and the current value, that is, 3,015 – 5,458 = -2443. This is done similarly for the other categories. One thing to note here is the first year's value will always be blank, as there is nothing to compute the difference from.</p>
			<p>In the next section, you will learn about the <code>Percent of Total</code> table calculation.</p>
			<h2 id="_idParaDest-227"><a id="_idTextAnchor255"/>Percent of Total</h2>
			<p>A <code>Percent of Total</code> calculation is used to calculate the percent distribution of a measure across a specific dimension or table structure. For example, if you are analyzing a project that operates in multiple countries, you can calculate what percentage of the total revenue each country generates. This in turn can highlight underperforming countries, as well as the better-performing ones.</p>
			<p>You will use this calculation in the next exercise.</p>
			<h2 id="_idParaDest-228"><a id="_idTextAnchor256"/>Exercise 8.03: Creating a Percent of Total Calculation</h2>
			<p>In this exercise, you will calculate the <code>Percent of Total</code> profits earned in different years for a category. By doing so, you can understand how each category has contributed to yearly profits. Perform the following steps to complete this exercise:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Category</code> against <code>YEAR(Order Date)</code> and <code>SUM(Profit)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_09.jpg" alt="Figure 8.12: Initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.12: Initial view</p>
			<ol>
				<li value="3">Add the <code>Percent of Total</code> quick calculation to the view</li>
			</ol>
			<div><div><img src="img/B16342_08_13.jpg" alt="Figure 8.13: Accessing quick table calculation | percent of total&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.13: Accessing quick table calculation | percent of total</p>
			<p>The following view is the final output:</p>
			<div><div><img src="img/B16342_08_14.jpg" alt="Figure 8.14: Final output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.14: Final output</p>
			<p>You can see that the profit has been converted to a percentage of the total, from all the years' profits. For example, for <code>Furniture</code>, you can first compute the sum of all the years' profits, which comes to 18,451. Then, divide each year's profits with this number. So, for 2016, you can compute it as 5,458 / 18,451, which is 29.58%.</p>
			<p>This view helps find out which year has been better for generating profits for each category. The next step  is to identify patterns indicative of higher profits in those years, and to try to replicate the patterns for the current year to generate similar or higher profits.</p>
			<p>The next section looks at the <code>Percent Difference</code> table calculation.</p>
			<h2 id="_idParaDest-229"><a id="_idTextAnchor257"/>Percent Difference</h2>
			<p><code>Percent Difference</code>, as the name suggests, is used to calculate the change in the percent distribution of a measure across a specific dimension or table structure. This calculation will first subtract a value from its previous value, and then compute the percentage change. As you may have noticed, this table calculation is a combination of the <code>Difference</code> and <code>Percent of Total</code> calculations. The reason for using a percentage is that absolute numbers do not always show the complete picture. For example, the sale of 10 Ferrari cars will generate more profit compared to 50 Honda cars. But if you compare this using actual numbers, the data will say that Honda is more profitable, even though Ferrari is actually more profitable.</p>
			<p>You will learn more about using this calculation in the next exercise.</p>
			<h2 id="_idParaDest-230"><a id="_idTextAnchor258"/>Exercise 8.04: Creating a Percent Difference Calculation</h2>
			<p>In this exercise, you will be calculating <code>Percent Difference</code> across the different years for a particular category. This will help you analyze, in terms of percentage, the profit difference for the various categories:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Category</code> against <code>YEAR(Order Date)</code> and <code>SUM(Profit)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_15.jpg" alt="Figure 8.15: Initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.15: Initial view</p>
			<ol>
				<li value="3">Add the <code>Percent Difference</code> quick calculation to the view:</li>
			</ol>
			<div><div><img src="img/B16342_08_16.jpg" alt="Figure 8.16: Accessing quick table calculation | percent difference&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.16: Accessing quick table calculation | percent difference</p>
			<p>The following figure shows the final output:</p>
			<div><div><img src="img/B16342_08_17.jpg" alt="Figure 8.17: Final output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.17: Final output</p>
			<p>As you can see, the output shows the difference between the current value and previous values, divided by the previous value; for <code>Furniture</code>, the percent difference for 2016 is computed as 3,015 – 5,458 / 5,458, which comes to <code>-44.8%</code>.</p>
			<p>This view helps to compare the individual category profits in terms of percent, and identifies how each category has performed compared to the previous year. This can help you understand whether the category did better (or not), compared to the previous year.You can further investigate the reason for performance differences, and act on the analysis accordingly. </p>
			<p>Next, you will learn about the <code>Rank</code> and <code>Percentile</code> table calculations.</p>
			<h2 id="_idParaDest-231"><a id="_idTextAnchor259"/>Percentile and Rank</h2>
			<p><code>Percentile</code>, as you may have guessed, is used to calculate the percentile of a measure across a specific dimension or table structure. Similarly, <code>Rank</code> will rank the measure across a specific dimension or table structure. You will learn about these in detail in the next exercise.</p>
			<h2 id="_idParaDest-232"><a id="_idTextAnchor260"/>Exercise 8.05: Creating Percentile and Rank Calculations</h2>
			<p>In this exercise, you will calculate <code>Percentile</code> and <code>Rank</code> across different years for a particular category. This will help you understand how much profit various categories have generated in different years. Follow these steps to complete this exercise:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Category</code> against <code>YEAR(Order Date)</code> and <code>SUM(Profit)</code>.</li>
			</ol>
			<div><div><img src="img/B16342_08_09.jpg" alt="Figure 8.18: Initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.18: Initial view</p>
			<ol>
				<li value="3">Add the <code>Rank</code> quick calculation to the view, as shown in the following figure:</li>
			</ol>
			<div><div><img src="img/B16342_08_19.jpg" alt="Figure 8.19: Accessing quick table calculation | rank&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.19: Accessing quick table calculation | rank</p>
			<p>The following view will be the final output for <code>Rank</code>. The output is ranked based on the descending values of <code>SUM(Profit)</code>:</p>
			<div><div><img src="img/B16342_08_20.jpg" alt="Figure 8.20: Rank output on selecting the Rank quick table calculation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.20: Rank output on selecting the Rank quick table calculation</p>
			<ol>
				<li value="4">Similarly, add the <code>Percentile</code> quick calculation to the view by selecting the <code>Percentile</code> quick table calculation. The following figure shows the final output for this:</li>
			</ol>
			<div><div><img src="img/B16342_08_21.jpg" alt="Figure 8.21: Percentile output on selecting the Percentile quick table calculation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.21: Percentile output on selecting the Percentile quick table calculation</p>
			<p>With the <code>Rank</code> calculation, you ranked each year in a particular category based on the sum of the profits. The preceding figure shows the <code>Percentile</code> operation. For <code>Furniture</code>, the profit for 2016 is at the 0th percentile, which means that 0% of data is under $3,015. Similarly, for 2017, the profit is $6,960 at the 100th percentile, meaning that the profit for all other years is below this value. This view can help you do a year-by-year comparison for individual category profits in terms of percentile and rank, to identify how each category has performed compared to the previous year.</p>
			<p>Next, you will learn about the <code>Moving Average</code> quick table calculation.</p>
			<h2 id="_idParaDest-233"><a id="_idTextAnchor261"/>Moving Average</h2>
			<p><code>Moving Average</code> is used to calculate the average of a measure across a specific dimension or table structure in a dynamic range, rather than being static. The advantage of using a moving average is that more importance is given to the values of recent history, rather than using all historic data. Moving averages are commonly used for identifying trends of share prices, where you can analyze a 20-day moving average (last 20 days of share price), or a 50-day moving average (last 50 days of share price), to understand how the share price is moving. The next exercise looks at this in detail.</p>
			<h2 id="_idParaDest-234"><a id="_idTextAnchor262"/>Exercise 8.06: Creating a Moving Average Calculation</h2>
			<p>In this exercise, you will calculate the moving average of profit earned across different years for a particular category. This will help you understand whether the average value is higher or lower than the previous year's profits:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Category</code> against <code>YEAR(Order Date)</code> and <code>SUM(Profit)</code>.</li>
			</ol>
			<div><div><img src="img/B16342_08_21.jpg" alt="Figure 8.22: Initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.22: Initial view</p>
			<ol>
				<li value="3">Add the <code>Moving Average</code> quick calculation, as shown in the following figure:</li>
			</ol>
			<div><div><img src="img/B16342_08_23.jpg" alt="Figure 8.23: Accessing quick table calculation | moving average&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.23: Accessing quick table calculation | moving average</p>
			<p>This view will be the final output:</p>
			<div><div><img src="img/B16342_08_24.jpg" alt="Figure 8.24: Final output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.24: Final output</p>
			<p>As you see, the profit has been averaged across the total from all the years' profits. First, the sum of all the years' profits is computed, and then, this number is divided by the number of years. For example, for 2017, the moving average comes to 8,473 / 2 = 4,236.</p>
			<h1 id="_idParaDest-235"><a id="_idTextAnchor263"/>Table Calculation Application: Addressing and Partitioning</h1>
			<p>In the previous section, you learned about quick table calculations. But did you notice that all these calculations were working at the row level? What if you need to apply calculations at the column level? This is where the concept of addressing and partitioning comes into play. </p>
			<p>Addressing means defining the direction of the calculation. A calculation can compute horizontally or vertically, depending on the option selected. Partitioning can be defined as the scope of the calculation; for example, you can partition a view into various years for different categories, or various categories for the same year.</p>
			<p>In this section, you will learn about the following methods to address and partition data:</p>
			<ul>
				<li><code>Table(across)</code></li>
				<li><code>Table(down)</code></li>
				<li><code>Table(across then down)</code></li>
				<li><code>Table(down then across)</code></li>
				<li><code>Pane(down)</code></li>
				<li><code>Pane(across then down)</code></li>
				<li><code>Pane(down then across)</code></li>
				<li><code>Cell</code></li>
				<li><code>Specific Dimensions</code></li>
			</ul>
			<p>You will continue working with the same example that you have been using in the previous exercises. First, you will explore the various ways of addressing data.</p>
			<h2 id="_idParaDest-236"><a id="_idTextAnchor264"/>Table (across)</h2>
			<p><code>Table(across)</code> performs a calculation horizontally across a table, and restarts after each row. For example, consider you have years on the <code>Columns</code> shelf for various product names on the rows, along with their sales. Here, <code>Table(across)</code> would perform the calculation for all the years' sales for an individual product, and then restart for the next product. The next exercise looks at this in detail.</p>
			<h2 id="_idParaDest-237"><a id="_idTextAnchor265"/>Exercise 8.07: Creating a Table (across) Calculation</h2>
			<p>Considering the example of car manufacturer sales, suppose you want to compare the sales for the various years. In this exercise, you will use a <code>Table(across)</code> calculation to find this. The following steps will help you complete this exercise:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Category</code> against <code>YEAR(Order Date)</code> and <code>SUM(Profit)</code>.</li>
			</ol>
			<div><div><img src="img/B16342_08_09.jpg" alt="Figure 8.25: Initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.25: Initial view</p>
			<ol>
				<li value="3">Add the <code>Running Total</code> quick calculation to get the following view:</li>
			</ol>
			<div><div><img src="img/B16342_08_26.jpg" alt="Figure 8.26: Running total for SUM(Profit)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.26: Running total for SUM(Profit)</p>
			<ol>
				<li value="4">Now, select <code>Compute Using</code> and then <code>Table(across)</code>, as shown in the following figure</li>
			</ol>
			<div><div><img src="img/B16342_08_27.jpg" alt="Figure 8.27: Selecting table (across)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.27: Selecting table (across)</p>
			<p>The next figure shows the final view. You can see that the <code>Profit</code> table calculation is done for every <code>Category</code> (partitioning) across the different <code>Order Date</code> years (addressing):</p>
			<div><div><img src="img/B16342_08_28.jpg" alt="Figure 8.28: Final output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.28: Final output</p>
			<p>This view helps find the cumulative profit for the various categories over the years. This can help youunderstand how each category has been performing compared with other categories, over the years.</p>
			<p>Next, you will learn about the <code>Table(down)</code> calculation.</p>
			<h2 id="_idParaDest-238"><a id="_idTextAnchor266"/>Table (down)</h2>
			<p><code>Table(down)</code> computes the calculation vertically down the table, and restarts after each column. For example, consider that you have the various years on the <code>Columns</code> shelf for the product names (and their sales) on the rows. <code>Table(down)</code> would compute the calculation for all of a product's sales for an individual year, and then restart at the next product.</p>
			<h2 id="_idParaDest-239"><a id="_idTextAnchor267"/>Exercise 8.08: Creating a Table (down) Calculation</h2>
			<p>For this exercise, you will compare the sales for various years, using the <code>Table(down)</code> calculation along years. This will help you compare the profits for the years, and help you understand whether the sales are improving or declining:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Category</code> against <code>YEAR(Order Date)</code> and <code>SUM(Profit)</code>.</li>
			</ol>
			<div><div><img src="img/B16342_08_09.jpg" alt="Figure 8.29: Initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.29: Initial view</p>
			<ol>
				<li value="3">Add the <code>Running Total</code> quick calculation to get the following view. This is the default, which is the across or horizontal direction:</li>
			</ol>
			<div><div><img src="img/B16342_08_30.jpg" alt="Figure 8.30: Running total for SUM(Profit)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.30: Running total for SUM(Profit)</p>
			<ol>
				<li value="4">Select <code>Compute Using</code> and then <code>Table(down)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_31.jpg" alt="Figure 8.31: Accessing compute using | table (down)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.31: Accessing compute using | table (down)</p>
			<ol>
				<li value="5">The following figure shows the final view. You can see that the <code>Profit</code> table calculation is computed for every <code>Order Date</code> year (partitioning) for the three <code>Category</code> values (addressing):</li>
			</ol>
			<div><div><img src="img/B16342_08_32.jpg" alt="Figure 8.32: Final output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.32: Final output</p>
			<p>This view can help you answer how each category has been performing based on profits across years. You could potentially make important business decisions based off these results.</p>
			<p>Next, you will learn about <code>Table(across then down)</code> and <code>Table(down then across)</code> together. These are opposites. <code>Table(across then down)</code> computes the calculation horizontally across the table and adds the values at the end of each row to the first value of the next row. <code>Table(down then across)</code> performs the calculation vertically down the table, and adds the values at the end of each column to the first value of the next column.</p>
			<p>In the <code>Table(down)</code> and <code>Table(across)</code> exercises, you treated the end totals for each column or row as separate values. So, you got a comparison for the different addressing results. For <code>Table(across then down)</code> and <code>Table(down then across)</code>, a value for the current row/column will be the result of the previous rows/columns along with the current row/column.</p>
			<p>Considering the previous example of car manufacturer sales, suppose you perform <code>Table(down)</code> and then <code>Table(across)</code> for sales; Tableau would first compute the sales for the current year for all products, and then add that value to the next year's values. Hence, for the current year, you would get cumulative values for the previous years and the current year's sales.</p>
			<h2 id="_idParaDest-240"><a id="_idTextAnchor268"/>Exercise 8.09: Creating Table (across then down) and Table (down then across) Calculations</h2>
			<p>In this exercise, you will continue with the example used in the previous exercises, and use <code>Table(across then down)</code> and <code>Table(down then across)</code> calculations. The following steps will help you complete this exercise:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Category</code> and <code>Sub-Category</code> against <code>YEAR(Order Date)</code> and <code>SUM(Profit)</code>, as follows. Filter on <code>Category: Technology</code> by placing <code>Category</code> on the <code>Filters</code> shelf:</li>
			</ol>
			<div><div><img src="img/B16342_08_33.jpg" alt="Figure 8.33: Initial view for table (across then down)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.33: Initial view for table (across then down)</p>
			<ol>
				<li value="3">Add the <code>Running Total</code> quick calculation to get the following view. Here, you get the cumulative sum of profits for all the years for a sub-category. The default addressing would be <code>Table(across)</code>:</li>
			</ol>
			<div><div><img src="img/B16342_08_34.jpg" alt="Figure 8.34: Running total for SUM(Profit)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.34: Running total for SUM(Profit)</p>
			<ol>
				<li value="4">Select <code>Compute Using</code> and then <code>Table(across then down)</code>.</li>
			</ol>
			<div><div><img src="img/B16342_08_35.jpg" alt="Figure 8.35: Accessing compute using | table (across then down)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.35: Accessing compute using | table (across then down)</p>
			<p>The following is the generated view. You can follow the lines shown in the following figure to see how the computation is done:</p>
			<div><div><img src="img/B16342_08_36.jpg" alt="Figure 8.36: The working of table (across then down)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.36: The working of table (across then down)</p>
			<p>First, <code>Table(across)</code> is performed for <code>Accessories</code> (see the orange lines). Then, that total (<code>$41,937</code>) is computed by <code>Table(down)</code> (green line) with the profit of <code>Copiers</code> (<code>$2,913</code>) making it <code>$44,850</code>. This process is repeated until the table ends.</p>
			<ol>
				<li value="5">To change this to <code>Table(down then across)</code>, select <code>Compute Using</code> and then <code>Table(down then across)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_37.jpg" alt="Figure 8.37: Accessing compute using | table (down then across)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.37: Accessing compute using | table (down then across)</p>
			<p>This will be the generated view. Again, you can follow the lines to see how the computation is done. This is exactly the opposite of how <code>Table(across then down)</code> works:</p>
			<div><div><img src="img/B16342_08_38.jpg" alt="Figure 8.38: The working of table (down then across)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.38: The working of table (down then across)</p>
			<p>As you see, first the profits are added in a downward direction, then this sum is taken across to a different year. This process continues until the final year. This view can help you understand how the different sub-categories have been performing, based on profits summed together over the previous years.</p>
			<p>Next, you will learn about panes. Table calculations can work down or across panes, depending on the calculation type. A pane can be defined as a combination of cells made up of fields on the <code>Rows</code> and <code>Columns</code> shelves, as in the following screenshot:</p>
			<div><div><img src="img/B16342_08_39.jpg" alt="Figure 8.39: Panes&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.39: Panes</p>
			<p>They can also be thought of as smaller tables within a bigger table. Table calculations can be performed on panes similar to how you did at the table level. The following is a list of the various pane-related computations:</p>
			<ul>
				<li><code>Pane(across)</code></li>
				<li><code>Pane(down)</code></li>
				<li><code>Pane(across then down)</code></li>
				<li><code>Pane(down then across)</code></li>
			</ul>
			<p>You will start with <code>Pane(across)</code>.</p>
			<h2 id="_idParaDest-241"><a id="_idTextAnchor269"/>Exercise 8.10: Creating a Pane (across) Calculation</h2>
			<p><code>Pane(across)</code> computes the calculation horizontally across the pane, and restarts at the next pane. Considering your previous example of car manufacturer sales, suppose you want to compare the sales for the various years, while also considering the different car segments, such as hatchback, sedan, and SUV. In this exercise, you will use the <code>Pane(across)</code> calculation to do this.</p>
			<p>The following steps will help you complete this exercise:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Category</code> against <code>YEAR(Order Date)</code>, <code>QUARTER(Order Date)</code>, and <code>SUM(Profit)</code>, as follows: </li>
			</ol>
			<div><div><img src="img/B16342_08_40.jpg" alt="Figure 8.40: Initial view with a running total for SUM(Profit)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.40: Initial view with a running total for SUM(Profit)</p>
			<ol>
				<li value="3">Filter on <code>YEAR(Order Date)</code> as <code>2016</code> and <code>2017</code>. </li>
			</ol>
			<div><div><img src="img/B16342_08_41.jpg" alt="Figure 8.41: Adding a YEAR filter&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.41: Adding a YEAR filter</p>
			<ol>
				<li value="4">You now have two horizontal panes. For a pane table calculation to be activated, you need more than one dimension in the rows or the columns. A pane here will be one row, per <code>Category</code>,per year; so you'll have six panes in the view. The first pane looks like this:</li>
			</ol>
			<div><div><img src="img/B16342_08_42.jpg" alt="Figure 8.42: Understanding pane (across)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.42: Understanding pane (across)</p>
			<ol>
				<li value="5">Add a Running Total of Sum(Profit) and then select the <code>Pane(across)</code> option by clicking again on <code>SUM(Profit)</code>.</li>
			</ol>
			<div><div><img src="img/B16342_08_43.jpg" alt="Figure 8.43: Accessing compute using | pane (across)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.43: Accessing compute using | pane (across)</p>
			<p>On selecting <code>Pane(across)</code>, you should see the following output:</p>
			<div><div><img src="img/B16342_08_44.jpg" alt="Figure 8.44: Final output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.44: Final output</p>
			<ol>
				<li value="6">To understand this better, add <code>Profit</code> to another view and compute the result.</li>
			</ol>
			<div><div><img src="img/B16342_08_45.jpg" alt="Figure 8.45: The working of pane (across)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.45: The working of pane (across)</p>
			<p>As you see, each of the highlighted blue boxes just adds profits horizontally, and this restarts after each partition or pane horizontally. You can also validate the sum of profit by referencing the bottom table.</p>
			<div><div><img src="img/B16342_08_46.jpg" alt="Figure 8.46: Final output analysis&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.46: Final output analysis</p>
			<p>This view can help you see how different categories have performed based on profits summed together over all different quarters across the two Order Date years. This can help you hone in on profits, to understand which quarters generated the highest profits.</p>
			<p>Next, you will learn about <code>Pane(down)</code>. <code>Pane(down)</code> performs the calculation vertically down the pane, and restarts at the next pane. </p>
			<h2 id="_idParaDest-242"><a id="_idTextAnchor270"/>Exercise 8.11: Pane (down) Calculation</h2>
			<p>Considering the example of car manufacturer sales, suppose you want to analyze the sales of various car models sold per segment per year. Here, you can use <code>Pane(down)</code> addressing on the segment partitioning. The following steps will help you complete this exercise:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>YEAR(Order Date)</code> and <code>Category</code> against <code>QUARTER(Order Date)</code> and the running total for <code>SUM(Profit)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_47.jpg" alt="Figure 8.47: Initial view with the running total for SUM(Profit)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.47: Initial view with the running total for SUM(Profit)</p>
			<ol>
				<li value="3">Filter on <code>YEAR(Order Date)</code> as <code>2016</code> and <code>2017</code>.</li>
			</ol>
			<div><div><img src="img/B16342_08_48.jpg" alt="Figure 8.48: Adding a YEAR filter&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.48: Adding a YEAR filter</p>
			<ol>
				<li value="4">Now, you will have eight vertical panes – four for <code>2016</code> and four for <code>2017</code> – based on the four quarters and two years.</li>
			</ol>
			<div><div><img src="img/B16342_08_49.jpg" alt="Figure 8.49: Understanding pane (down)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.49: Understanding pane (down)</p>
			<ol>
				<li value="5">Select the <code>Pane(down)</code> option by clicking again on <code>SUM(Profit)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_50.jpg" alt="Figure 8.50: Accessing compute using | pane (down)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.50: Accessing compute using | pane (down)</p>
			<p>You will see the following output:</p>
			<div><div><img src="img/B16342_08_51.jpg" alt="Figure 8.51: Final output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.51: Final output</p>
			<ol>
				<li value="6">To understand this better, add <code>Profit</code> to the view and see the result.</li>
			</ol>
			<div><div><img src="img/B16342_08_52.jpg" alt="Figure 8.52: The working of pane (down)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.52: The working of pane (down)</p>
			<p>As you see, the values in each blue pane (highlighted) are summed in a downward direction, and this process restarts after every pane. Here, you can compare quarterly profits. For example, for <code>Q1</code> <code>2016</code>, the total profit is <code>$3,811</code> and similarly, for <code>Q1</code> <code>2017</code>, it is <code>$9,265</code>, which is approximately 2.5 times more profit. The same is cannot be said for <code>Q2</code> profits. Based on this, you can try to analyze the reasoning behind such differences, and use those insights to tweak business strategy.</p>
			<p>Next, you will learn about <code>Pane(across then down)</code> and <code>Pane(down then across)</code>. <code>Pane(across then down)</code> is a combination of <code>Pane(across)</code> and <code>Pane(down)</code>; that is, it computes the calculation horizontally across the pane and combines the result with the values in the next pane. <code>Pane(down then across)</code> is the opposite of <code>Pane(across then down)</code>, as it performs the calculation vertically down the pane and combines the result with the values in the next pane. The next exercise looks at this in detail.</p>
			<h2 id="_idParaDest-243"><a id="_idTextAnchor271"/>Exercise 8.12: Creating a Pane-Level Calculation</h2>
			<p>This exercise continues with the example of car manufacturer sales. Suppose you want the sales per segment per quarter for the different years together. Here, you can use the option of <code>Pane(across then down)</code> or <code>Pane(down then across)</code>. The result combines all detailed panes into a cumulative overall total. The following steps will help you complete this exercise:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Before creating the view, you must first create a combined field for <code>Category</code> and <code>Sub-Category</code>. This is required for the <code>Pane(across then down)</code> calculation, else Tableau will merge the sub-categories. Select <code>Category</code> and <code>Sub-Category</code> together, then, right-click and select <code>Create</code> and then <code>Combined Field</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_53.jpg" alt="Figure 8.53: Creating a combined field&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.53: Creating a combined field</p>
			<ol>
				<li value="3">Create a view that shows <code>YEAR(Order Date)</code> and <code>QUARTER(Order Date)</code> against <code>Category</code>, <code>Sub-Category</code>, and the combined field. Also, add the running total for <code>SUM(Profit)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_54.jpg" alt="Figure 8.54: Initial view with the running total for SUM(Profit)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.54: Initial view with the running total for SUM(Profit)</p>
			<ol>
				<li value="4">Filter on <code>YEAR(Order Date)</code> as <code>2016</code> and <code>2017</code>. Also, filter on <code>Category</code> by selecting <code>Furniture</code> and <code>Technology</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_55.jpg" alt="Figure 8.55: Adding category and YEAR filters&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.55: Adding category and YEAR filters</p>
			<ol>
				<li value="5">You now have two horizontal <code>Year</code> panes and two vertical <code>Category</code> panes. Select the <code>Pane(across then down)</code> option by clicking again on <code>SUM(Profit)</code>.</li>
			</ol>
			<div><div><img src="img/B16342_08_56.jpg" alt="Figure 8.56: Accessing compute using | pane (across then down)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.56: Accessing compute using | pane (across then down)</p>
			<ol>
				<li value="6">On selecting <code>Pane(across then down)</code>, the output generated is as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_57.jpg" alt="Figure 8.57: Final output for pane (across then down)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.57: Final output for pane (across then down)</p>
			<ol>
				<li value="7">To understand this better, add <code>Profit</code> to the view and calculate the result.</li>
			</ol>
			<div><div><img src="img/B16342_08_58.jpg" alt="Figure 8.58: The working of pane (across then down)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.58: The working of pane (across then down)</p>
			<p>Notice the blue arrows, which indicate the profits being summed from the first to the last value in that row; the orange arrow indicates that the last value of each row is added to the first value of the next row. This process is repeated until the last row for each year. Once a year is completed, the calculation restarts for the next year. You can validate the numbers by looking at the <code>Sum(Profit)</code> values, as seen on the right side.</p>
			<ol>
				<li value="8">Change the calculation to <code>Pane(down then across)</code>, as shown in the following figure:</li>
			</ol>
			<div><div><img src="img/B16342_08_59.jpg" alt="Figure 8.59: Accessing compute using | pane (down then across)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.59: Accessing compute using | pane (down then across)</p>
			<p>The output generated will be as follows:</p>
			<div><div><img src="img/B16342_08_60.jpg" alt="Figure 8.60: Final output for Pane (down then across)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.60: Final output for Pane (down then across)</p>
			<ol>
				<li value="9">To understand this better, add <code>Profit</code> to the view and calculate the result for <code>2016</code>.</li>
			</ol>
			<div><div><img src="img/B16342_08_61.jpg" alt="Figure 8.61: The working of pane (down then across)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.61: The working of pane (down then across)</p>
			<p>Observe the blue arrows, which indicate the profits being summed from the first to the last value in the column. The orange arrow indicates that the last value of each column is added to the first value of the next column. This process is repeated until the last row for each year. Once a year is completed, the calculation restarts for the next year. Once again, you can validate the numbers by looking at the <code>Sum(Profit)</code> values, as seen on the right side.</p>
			<h2 id="_idParaDest-244"><a id="_idTextAnchor272"/>Cell</h2>
			<p><code>Cell</code> computes across the individual cells. The result is the same as adding the measure to the shelf directly, as shown in the following figure (the cell is highlighted using a box):</p>
			<div><div><img src="img/B16342_08_62.jpg" alt="Figure 8.62: Computing using cell&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.62: Computing using cell</p>
			<p>The values are the same in both tables. <code>Specific Dimensions</code> computes using the dimensions you specify. You will learn about this in more detail in the following section.</p>
			<h1 id="_idParaDest-245"><a id="_idTextAnchor273"/>Creating, Editing, and Removing Table Calculations</h1>
			<p>Hopefully you now have a good understanding of quick table calculations, but what if you need to use some other calculation, such as ranking the rows in a table? Here, you can use the <code>Create</code> calculation window. Tableau supports many table functions besides quick table calculations. In this section, you will learn how to create, access, edit, and remove a table calculation.</p>
			<h2 id="_idParaDest-246"><a id="_idTextAnchor274"/>Creating a New Table Calculation</h2>
			<p>To create a table calculation, right-click on any measure value, and then click on <code>Create</code> , then <code>Calculated Field...</code>, as follows:</p>
			<div><div><img src="img/B16342_08_63.jpg" alt="Figure 8.63: Creating a calculated field from Profit&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.63: Creating a calculated field from Profit</p>
			<p>Once you click on <code>Calculated Field...</code>, a calculation editor window will open up, as follows:</p>
			<div><div><img src="img/B16342_08_64.jpg" alt="Figure 8.64: Calculation editor&#13;&#10;"/>
				</div>
			</div>
			<p> </p>
			<p class="figure-caption">Figure 8.64: Calculation editor</p>
			<p>Now, you can click on the dropdown and select the <code>Table Calculation</code> menu, as follows:</p>
			<div><div><img src="img/B16342_08_65.jpg" alt="Figure 8.65: Accessing table calculation functions in the calculation editor&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.65: Accessing table calculation functions in the calculation editor</p>
			<p>Next, the list of all the table calculations supported by Tableau appears, as follows:</p>
			<div><div><img src="img/B16342_08_66.jpg" alt="Figure 8.66: Various table calculation functions&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.66: Various table calculation functions</p>
			<p>In Tableau, it's very easy to understand these table calculations. Each calculation is defined by specifying the syntax for use, the expected result from using the calculation, followed by an example.</p>
			<p>You are already familiar with <code>RUNNING_TOTAL</code>, which is similar to <code>RUNNING_SUM</code>. The same calculation type can be used to do a variety of operations, such as sum, average, and finding the minimum and maximum values, which can be referenced under the table calculation menu.</p>
			<h2 id="_idParaDest-247"><a id="_idTextAnchor275"/>Exercise 8.13: Creating a Table Calculation Using the Calculation Editor</h2>
			<p>In your projects, you might need to use one of the table calculation functions in the view. An example of this is the index function, which adds serial numbers to the rows in the view. You can do this by creating a table calculation. In this exercise, you will calculate the rank of <code>Sub-Category</code> based on <code>SUM(Profit)</code> across years. The following steps will help you complete this exercise:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance. Use the combined field that you created earlier along with <code>YEAR(Order Date)</code>. Create a view as follows and also filter <code>Category</code> for <code>Furniture</code>:</li>
			</ol>
			<div><div><img src="img/B16342_08_67.jpg" alt="Figure 8.67: Initial view with SUM(Profit)&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.67: Initial view with SUM(Profit)</p>
			<ol>
				<li value="2">Now, create a <code>RANK</code> table calculation. Right-click on <code>Profit</code> in the data pane and select <code>Create</code> | <code>Calculated Field…</code>. This will open up the calculation editor.</li>
			</ol>
			<div><div><img src="img/B16342_08_68.jpg" alt="Figure 8.68: Creating a calculation using Profit&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.68: Creating a calculation using Profit</p>
			<ol>
				<li value="3">Add the following expression to the calculation editor:<pre>RANK(SUM(Profit))</pre></li>
			</ol>
			<p>This is shown in the following figure:</p>
			<div><div><img src="img/B16342_08_69.jpg" alt="Figure 8.69: Profit_Rank calculation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.69: Profit_Rank calculation</p>
			<ol>
				<li value="4">Name it <code>Profit_Rank</code>.</li>
				<li>Drag this onto the view on <code>Text</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_70.jpg" alt="Figure 8.70: Adding the Profit_Rank calculation to the view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.70: Adding the Profit_Rank calculation to the view</p>
			<ol>
				<li value="6">Observe that the default is the <code>Table (across)</code> direction. Edit this and try to change the computation on specific dimensions in the view. Click on the <code>Profit_Rank</code> dropdown and select <code>Edit Table Calculation…</code> and then <code>Specific Dimensions</code>, as shown in the following figure:</li>
			</ol>
			<div><div><img src="img/B16342_08_71.jpg" alt="Figure 8.71: Accessing edit table calculation &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.71: Accessing edit table calculation </p>
			<p>Using these options, you can control how the table calculation is computed. It is important to understand the different options here:</p>
			<ul>
				<li><code>At the level</code>: This determines the level at which the calculation is computed. The level here implies the different dimensions in the view, such as <code>Category</code> and <code>Sub-Category</code>. <code>Deepest</code> is the default if multiple dimensions are selected, which means the computation will happen at the lowest level of granularity, which is <code>Sub-Category</code> in your view.</li>
			</ul>
			<div><div><img src="img/B16342_08_72.jpg" alt="Figure 8.72: Various options under the At the level dropdown&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.72: Various options under the At the level dropdown</p>
			<ul>
				<li><code>Restarting every</code>: This option can be used to restart the computation based on the field selected.</li>
			</ul>
			<div><div><img src="img/B16342_08_73.jpg" alt="Figure 8.73: Various options under the Restarting every dropdown&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.73: Various options under the Restarting every dropdown</p>
			<ul>
				<li><code>Show calculation assistance</code>: This option highlights how the computation will work based on your selections. As the following figure shows, based on the selections, <code>Profit_Rank</code> will work in the downward direction (highlighted):</li>
			</ul>
			<div><div><img src="img/B16342_08_74.jpg" alt="Figure 8.74: Using Show calculation assistance&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.74: Using Show calculation assistance</p>
			<p>This view showed how you can perform table calculations at different levels using the dimensions in the view.</p>
			<h2 id="_idParaDest-248"><a id="_idTextAnchor276"/>Removing a Table Calculation</h2>
			<p>Once you have added a table calculation, you should also be able to remove it. This can be done by clicking on an existing quick table calculation and selecting the <code>Clear Table Calculation</code> option, as follows:</p>
			<div><div><img src="img/B16342_08_75.jpg" alt="Figure 8.75: Selecting the Clear Table Calculation option&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.75: Selecting the Clear Table Calculation option</p>
			<h2 id="_idParaDest-249"><a id="_idTextAnchor277"/>Activity 8.01: Managing Hospital Bed Allocations</h2>
			<p>There may be scenarios where you need to use the historic value of a measure to compute its current value, for example, when finding the cumulative sum of sales for all quarters in a year.This can, in turn, help you visualize the entire year's sales, or the sales difference, compared to previous quarters. In such cases, a table calculation can be useful, as all logic is inbuilt, and you need only apply the calculation to the measure value. </p>
			<p>In this activity, you will apply table calculations to a hospital-based project, to identify how many patients are currently admitted.You willconsider factors such as new admissions, discharges, and routine follow-ups, to check whether the threshold for beds is sufficient. By doing this, you can ensure the hospital will not run out of beds in the case of an emergency.</p>
			<p>In the dataset, there is a date column indicating the current day, an Open column indicating the number of patients admitted, Discharges indicating the number of discharges, and Re-open indicating the number of patients getting re-admitted or following up for a previous admission. In addition, you also need to keep 100 of the total 900 beds free in case of an emergency. If the number of patients exceeds 600, it should be highlighted visually.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The dataset used for this activity can be found and downloaded from <a href="https://packt.link/NNzlJ">https://packt.link/NNzlJ</a>.</p>
			<p>The following steps will help you complete this activity:</p>
			<ol>
				<li value="1">Open and connect the dataset for <code>Activity 1</code> in your Tableau instance.</li>
				<li>Create a calculation named <code>current_patients</code> to find the number of patients currently admitted. This can be calculated after considering the <code>Open</code>, <code>Discharges</code>, and <code>Re-open</code> columns.</li>
				<li>Once you have a bar chart view, display the date at the exact date level, along with the number of patients currently in the hospital, using the <code>current_patients</code> field created in the previous step. This view helps you view how many patients are admitted on a given day.</li>
				<li>Add a <code>running_sum</code> table calculation to the <code>current_patients</code> table calculation in the existing view. This view helps you visualize the number of patients admitted on a given day considering all the previous days as well.</li>
				<li>Create another calculation named Alert to indicate that the patient count is above 600. You need to use running_sum to identify the number of patients on a given day.</li>
				<li>Now, you should be able to analyze the total number of patients admitted to the hospital, and see whether there are enough beds available.</li>
				<li>The initial view is as follows:</li>
			</ol>
			<div><div><img src="img/B16342_08_76.jpg" alt="Figure 8.76: Initial view – activity&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.76: Initial view – activity</p>
			<p>The final output is as follows:</p>
			<div><div><img src="img/B16342_08_77.jpg" alt="Figure 8.77: Final view – activity&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.77: Final view – activity</p>
			<p>Here, you can see that in 2009, there was a period when the number of patients was more than the number of beds. Although such incidents are rare, it is imperative that they are managed properly.</p>
			<p>With this activity, you strengthened your knowledge of creating and using table calculations. This activity helped you see how you can use cumulative values to better analyze data, by highlighting anomalies or events that may have a significant business impact.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The solution to this activity can be found here: <a href="https://packt.link/CTCxk">https://packt.link/CTCxk</a> </p>
			<h2 id="_idParaDest-250"><a id="_idTextAnchor278"/>Activity 8.02: Planning for a Healthy Population</h2>
			<p>In the previous activity, you created a visualization to indicate a drastic increase in the number of patients. As an analyst, you should also be able to use historic data, and identify patterns when the number of patients go up.</p>
			<p>In this activity, you will use a range window to identify when the current admissions increase, and whether there is a specific observable trend. In this way, the hospital can be better prepared for the future. You will use the same hospital data used in the previous activity. The following steps will help you complete this activity:</p>
			<ol>
				<li value="1">Plot the window average of the <code>RUNNING_SUM</code> of <code>current_patients</code>, weekly. A window average takes the average of all values in the window, which in this case is the view.</li>
				<li>Remove the average for the last 10-week range to check whether the count of currently admitted patients goes up or down. Create a parameter that can be used as input for the range; you can name it <code>Range_input</code>.</li>
				<li>Use this <code>Range_input</code> parameter as the input for the <code>WINDOW_AVG</code> calculation named avg_admitted. You need to calculate the average from the last 10 weeks to the current week.</li>
				<li>Use a dual-axis to show the <code>RUNNING_SUM</code> of current_patients and <code>WINDOW_AVERAGE</code>. Recall that a dual-axis is used to show two measures side by side in the same view. Right-click on the axis to enable this option after adding both measures.</li>
				<li>Create an alert to compare the <code>RUNNING_SUM</code> of <code>current_patients</code> and <code>avg_admitted</code>. Highlight the weeks when the sum is more than the average.</li>
				<li>The initial view would look like this:</li>
			</ol>
			<div><div><img src="img/B16342_08_78.jpg" alt="Figure 8.78: Initial view – activity &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.78: Initial view – activity </p>
			<p>The final view should look like this:</p>
			<div><div><img src="img/B16342_08_79.jpg" alt="Figure 8.79: Final view – activity&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 8.79: Final view – activity</p>
			<p>You can now see when the current admitted patient count has gone higher than the 10-week average. The range can be changed based on the requirement by changing the input. An interesting observation is the month of July, which had a higher-than-average number of patients for the all of the previous 3 years, indicating thepossibility for a similar occurance for next July.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The solution to this activity can be found here: <a href="https://packt.link/CTCxk">https://packt.link/CTCxk</a>.</p>
			<h1 id="_idParaDest-251"><a id="_idTextAnchor279"/>Summary</h1>
			<p>In this chapter, you learned about table calculations. You started by performing some quick table calculations, used to quickly apply commonly used table calculations in the view. Then, you explored ways to apply a table calculation using addressing and partitioning – how addressing defines the direction of the calculation, while partitioning defines its scope. Finally, you learned about creating a table calculation using the calculation editor, and about ways to address the view using specific dimensions. </p>
			<p>In the next chapter, you will learn about <code>Level of Detail</code>, which is another powerful concept, used to control how views are displayed.</p>
		</div>
		<div><div></div>
		</div>
	</body></html>