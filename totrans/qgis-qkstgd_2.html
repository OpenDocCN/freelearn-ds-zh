<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Loading Data</h1>
                </header>
            
            <article>
                
<p>The next two chapters are all about using data in QGIS. In <a href="0e2ba9ae-3346-4444-b28a-389d22737646.xhtml">Chapter 3</a>, <em>Creating Data</em>, we will look at how we build and edit GIS data. In this chapter, we will start by loading existing data. QGIS supports many GIS data formats. It makes use of the OGR library for vector data and the GDAL library for raster data. By default, QGIS uses the GeoPackage format. As such, we will make this the default format for this book.</p>
<p>These are the topics that will be covered in this chapter:</p>
<ul>
<li>Vector, raster, and other data types</li>
<li>GeoPackage</li>
<li>Loading data</li>
<li>Projections</li>
<li>Creating and saving a project</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">GIS data</h1>
                </header>
            
            <article>
                
<p>What do I mean by GIS data? By vector data, I mean points, lines, and polygons. The most common file format is a Shapefile (multiple files make up a Shapefile). By raster data, I mean (georeferenced) bitmaps. The most common file format is GeoTIFF.</p>
<div class="packt_infobox">Download the QGIS sample dataset from <a href="https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/qgis_sample_data.zip">https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/qgis_sample_data.zip</a>. Extract it to a working directory on your computer<a href="https://qgis.org/downloads/data/">.</a></div>
<p>In QGIS, you should now be able to see this data in the <span class="packt_screen">Browser</span> panel, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/8f538a9b-88d9-45ca-8535-b1a0fd648823.png" style=""/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Browser panel</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Loading data</h1>
                </header>
            
            <article>
                
<p class="mce-root">Loading data into QGIS can be done in several ways. Three of the most common ways are as follows:</p>
<ul>
<li>You can drag data directly from a folder (Windows OS) straight into the map</li>
<li>You can drag data from the <span class="packt_screen">Browser</span> panel into the map</li>
<li>You can click <span class="packt_screen">Layer</span> | <span class="packt_screen">Add Layer</span> and choose what type of layer to add to the map</li>
<li>This way opens <span class="packt_screen">Data Source Manager</span></li>
</ul>
<p class="mce-root">In the following screenshot, we are choosing to load <span class="packt_screen">Add Vector Layer</span>, which can also be done using the <em>Ctrl</em> + <em>Sh</em><em>ift</em> + <em>V</em> shortcut:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/514ed447-b922-4570-9d4f-1fcc4b80e771.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Loading data</div>
<p>This screenshot gives you an idea of all the different data types that QGIS can consume. We will not be covering all these formats; we mention it to highlight the data capabilities of QGIS only. By adding data this way, you will be opening <span class="packt_screen">Data Source Manager</span>, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6606f033-79d0-4a51-8bf9-365447f4dc00.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">The QGIS Data Source Manager</div>
<p><span class="packt_screen">Data Source Manager</span> is a really nice way of adding data to your map. You can add files one by one, add multiple files, or add different file types at the same time. To use an analogy, <span class="packt_screen">Data Source Manager</span> is very much like a data menu: just select the data you want.</p>
<p>From the QGIS sample data downloaded earlier, load <kbd>airport.shp</kbd> from the <kbd>shapefiles</kbd> folder and the <kbd>SR_50M_alaska_nad.tif</kbd> file from the <kbd>raster</kbd> folder. These should load into the map and appear as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/05b58db2-99db-4584-a352-aa52aaab0f9f.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">The overview of QGIS with data loaded</div>
<p>Right-click on <kbd>SR_50M_alaska_nad</kbd> and select <span class="packt_screen">Zoom to Layer</span> to zoom to the layer extent. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/60e32648-fcb2-4b6a-880e-22a9cafea912.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Zoom to Layer</div>
<p>Select <span class="packt_screen">Project</span> | <span class="packt_screen">New</span> and don't save changes to clear the project and open a new one.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">GeoPackage</h1>
                </header>
            
            <article>
                
<p>I have loaded all the Shapefiles in the <kbd>shapefiles</kbd> folder to a GeoPackage layer. You can download this layer from here: <a href="https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip">https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip</a>.<a href="http://www.packt.com/qgis"/></p>
<p>Expand <kbd>GeoPackage</kbd> in the <span class="packt_screen">Browser</span> panel, as shown in the following screenshot. In <a href="0e2ba9ae-3346-4444-b28a-389d22737646.xhtml">Chapter 3</a><span>, </span><em>Creating Data</em>, we will look at how to add a layer to this package. For now, select the <kbd>Airports</kbd> layer and drag it into your map as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/819ec575-0267-41ea-a442-0a642210c8e5.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">GeoPackage in the Browser panel</div>
<p>Experiment by dragging in more layers and zooming to the layer extent. This data looks no different to the Shapefiles we loaded previously. If you look at the file in your file manager (Windows Explorer, for example), instead of several Shapefiles and the several files associated to a Shapefile, we have one file. This makes the GeoPackage format (<kbd>.gpkg</kbd>) ideal for sharing and managing project data. The GeoPackage format has no file size limitations and is platform-independent, unlike a Shapefile.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Interacting with the data</h1>
                </header>
            
            <article>
                
<p>In this section, we will use <span class="packt_screen">Map Navigation</span> and <span class="packt_screen">Attributes</span> <span class="packt_screen">Toolbar</span>. Create a new project (<span class="packt_screen">Project</span> | <span class="packt_screen">New</span>) and load the following data from the GeoPackage into the QGIS project:</p>
<ul>
<li><kbd>Airports</kbd></li>
<li><kbd>majrivers</kbd></li>
<li><kbd>trees</kbd></li>
</ul>
<p class="mce-root"/>
<p>Load <kbd>SR_50M_alaska_nad.tif</kbd> from the <kbd>raster</kbd> folder. Make sure the layers are ordered in this way. Zoom to the extent of the <kbd>Airports</kbd> layer. Your screen should look similar to the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/89eca300-0a98-4a60-8191-0c25840746d0.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">The overview of QGIS with layers added</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Identifying data</h1>
                </header>
            
            <article>
                
<p>From <span class="packt_screen">Attributes</span> <span class="packt_screen">Toolbar</span>, click on the blue i button and then click on a point from the <kbd>Airports</kbd> layer in the map. This will display the <span class="packt_screen">Feature</span> attributes in a new panel; again, like all panels, you can move it around and resize as needed. The clicked point will be highlighted in the map and its attributes displayed, similar to the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/0b1d04d8-0283-4f3d-b2cb-80439ac8d7a1.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Identify tool</div>
<p>Investigate the identify tool with the other layers. Note that the <span class="packt_screen">Mode</span> shown in the identify results is currently set to <span class="packt_screen">Current layer</span>. That means that you only see the results from the layer that is currently active. There are four options in <span class="packt_screen">Mode</span>:</p>
<ul>
<li><span class="packt_screen">Current layer</span></li>
<li><span class="packt_screen">Top down, stop at first</span></li>
<li><span class="packt_screen">Top down</span></li>
<li><span class="packt_screen">Selection</span></li>
</ul>
<p class="mce-root"/>
<p>Set <span class="packt_screen">Mode</span> to <span class="packt_screen">Selection</span> and click another location on the map. This time, you will be presented with identify options for all the layers (relating to the clicked location). This way, you get to choose the feature you wish to query. An example of this is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/2858276c-209e-43e8-b0a5-dea7c2118eab.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Identifying all layers</div>
<p>Close the identify results panel. Next, we will look at selecting data.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Data selection</h1>
                </header>
            
            <article>
                
<p>There are several ways to select data in QGIS. In this chapter, we will look at the drawing selection options in <span class="packt_screen">Attributes</span> <span class="packt_screen">Toolbar</span> that we highlighted in <a href="44524991-c928-4616-a928-9fee41ef2270.xhtml">Chapter 1</a>, <em>Getting Started with QGIS 3</em>. Let's select some data from <kbd>Airports</kbd>. Click on the <kbd>Airports</kbd> layer in the <span class="packt_screen">Layers</span> panel (making sure it is highlighted) and select the Select Features by area or single click button. Note that there are other ways of drawing a selection from the drop-down button, including selecting by polygon, freehand, and radius. In this example, we will use the default select features option, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/438a3cd8-c4fa-48ff-af54-07e4e6ddab1c.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Select features by area or with a single click</div>
<p>Click and drag a box around several Airports' points. The selected points will change color. Press <em>F6</em> or click on the open table button in the toolbar. The attribute table for the <kbd>Airports</kbd> layer will appear. In the lower-left corner, set the query to <span class="packt_screen">Show Selected Features</span>. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a2fdff4d-5b46-44a3-a2e5-cd2f284a9c98.png" style=""/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Attribute table for Airports layer</div>
<p>In the attribute table, click on the Invert selection (Ctrl+R) button (yellow right-angled triangle and clear triangle forming a square), <span>as</span><span> </span><span>follows:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c8e4ae54-cdd6-43d0-b65c-fced8b169f5a.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Inverting a selection</div>
<p>Inverting a data selection can often be useful. For example, you might want to select many points, but want to exclude only a few. Using inversion allows you to select the few and invert the selection to select the many. Close the attribute table and you will see the newly selected airports on the map. Click on Deselect Features from All Layers from <span class="packt_screen">Attributes</span> <span class="packt_screen">Toolbar</span> to clear the selection. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6e69e3df-2ef8-453c-b116-63f6515e1b88.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Deselecting features from all layers</div>
<p>Finally, let's select a feature in the <kbd>Airports</kbd> layer by an attribute value. Click on the Select Features by Value button in <span class="packt_screen">Attributes Toolbar</span>. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/8992ab4c-a4f7-4981-9e55-4ecadcf85e6b.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Selecting features by value</div>
<p>A selection dialog box will appear. Set the <span class="packt_screen">ID</span> field to equal <kbd>1</kbd>. Click on the <span class="packt_screen">Select features</span> button and the selected airport will be highlighted in the map. You can click on <span class="packt_screen">Flash features</span> to flash the selected airport and also click on <span class="packt_screen">Zoom to features</span> to zoom into the selected airport.</p>
<p>The <span class="packt_screen">Select Features by Value</span> dialog box is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b8f3f6e6-5c34-4310-89a3-ef2723d75eb6.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Select Features by Value dialog box</div>
<p>Click on the <span class="packt_screen">Close</span> button and clear the selection (using the <span class="packt_screen">Clear Selection</span> button shown previously). Note here that <span class="packt_screen">Select Features by Expression</span> is also available. We will look at expressions in more detail later this book.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Measuring distance and area</h1>
                </header>
            
            <article>
                
<p>A common function of a GIS is to quickly calculate distance and area. In <a href="0e2ba9ae-3346-4444-b28a-389d22737646.xhtml">Chapter 3</a><span>, </span><em>Creating Data</em>, we will show how to write the area of a feature to an attribute table. In this chapter, though, we will look at the measuring options available from <span class="packt_screen">Attributes Toolbar</span>.</p>
<p>The measure tool does not require a layer to be selected in the layer panel in order for it to work. This means that it is independent of layers. The measure tool can measure length, area, or angle, and you can use the drop-down button next to the tool to select the required option. In this example, let's measure length. Select the <span class="packt_screen">Measure Line</span> option and then left-click on the map to begin the measurement. After doing this, left-click again to measure the segment. Continue to left-click to measure segments of the line or right-click on the end point to finish measuring.</p>
<p class="mce-root"/>
<p>The following screenshot shows the distance in meters between airports:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6124e047-87cf-4406-963c-33abaeb59dc4.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">The Measure tool in QGIS</div>
<p>Change the units from <span class="packt_screen">meters</span> to <span class="packt_screen">kilometers</span> to show more meaningful distance at this scale. Try measuring area; the tool works in the same way as distance. Measuring in any GIS depends on the projection of the map. In the next section, we will look at projections in QGIS.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Projections</h1>
                </header>
            
            <article>
                
<p>The default projection for QGIS (on loading the first time) has the EPSG code 4326 (WGS 84). Unless changed, the default settings in QGIS allow the projection of the map to be set by the projection of the first layer loaded into the map, assuming that the data has a projection associated to it.</p>
<p>It is beyond the scope of this book to go into details about various coordinate systems; if you are interested in learning more about this, then a good starting point is the Wikipedia entry on geographic coordinate systems at <a href="https://en.wikipedia.org/wiki/Geographic_coordinate_system">https://en.wikipedia.org/wiki/Geographic_coordinate_system</a>.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Suffice to say that getting the projection correct in your GIS is fundamental to any analysis, mapping, or derivation of knowledge from your data. The world is not flat and projecting your data is the process of taking the part of the Earth's surface you are working on and mathematically shrinking and distorting it so it fits on a plane. You can move from one projection system to another by transforming your data.</p>
<p>Using the <kbd>Airports</kbd> layer as an example, the projection of the layer is EPSG 2964 and on loading the data, your QGIS project will be set to this projection. If you add data in another projection, then QGIS will make reprojections of your data on the fly. This is very powerful and useful, but be careful that you know what projection system all your data is in.</p>
<p>To illustrate projections, consider changing the projection from EPSG 2964 to EPSG 4326 with the internal reprojection parameters. Here is our data in the EPSG 2964 projection:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/3fe070c7-d80b-459c-b628-5b2259456444.png"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">The overview of QGIS project in EPSG 2964</div>
<p>In the <span class="packt_screen">Status Bar</span>, in the lower-right-hand corner you will see EPSG 2964. Click on this and change the projection to <span class="packt_screen">WGS 84</span>. Search for <kbd>4326</kbd> in the <span class="packt_screen">Filter</span> box as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7710959c-b19a-4afa-a2ff-43d0837da9b4.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Overview of project projection properties</div>
<p>Click on <span class="packt_screen">OK</span> and return to your map. You will see the data represented very differently to before. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/77d82407-e9b3-4d01-abec-bb3bbd7fb5a2.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">The overview of reprojected data</div>
<p>Reset the projection by repeating these steps and selecting EPSG 2964.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Saving data</h1>
                </header>
            
            <article>
                
<p>In later chapters, when we start creating data, we will be working in one projection system. However, it is worth noting in this section that both vector data (points, line, and polygons) and raster data (bitmaps) can be saved in different projections. Right-click on the <kbd>Airports</kbd> layer and select <span class="packt_screen">Export</span> | <span class="packt_screen">Save Features As</span>. In the dialog box, you will see an option for <span class="packt_screen">CRS</span>; this is where you can change the projection system.</p>
<p>This dialog box is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/d2fbe5ce-105e-4a0b-a454-848c0c3f6c94.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Saving the layer</div>
<p>For a raster, select <span class="packt_screen">Raster</span> | <span class="packt_screen">Projections</span> | <span class="packt_screen">Warp (Reproject)</span> from the menu bar. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6814ef30-72ed-41c5-a988-afe8adba8d56.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Reprojecting rasters in QGIS</div>
<p>The <kbd>Warp</kbd> command uses <kbd>gdalwarp</kbd> to reproject raster data. An example of reprojecting the <kbd>SR_50M_alaska_nad</kbd> raster to <span class="packt_screen">EPSG:4326</span> is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/705c74d4-7ed2-49f4-9cf9-e43eb3e1356a.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Reproject raster tool</div>
<p>If you scroll down to the bottom of this dialog box, you will see the corresponding <kbd>gdalwarp</kbd> command. This could be pasted into the OSGeo4W shell (if you installed QGIS via the OSGeo4W installer) and run on the command line (like so many QGIS functions).</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Saving your project</h1>
                </header>
            
            <article>
                
<p>We can save a QGIS project so we can return to it in the future. The default format is <kbd>.qgz</kbd>. To save your project, go to <span class="packt_screen">Select Project</span> | <span class="packt_screen">Save</span>. I have called mine <kbd>ch2.qgz</kbd>; it is shown in Windows Explorer as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6d08fd74-4f95-417b-90b8-cab01f3d9a01.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Saving the project as a .qgz file</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>We have looked at geographic/spatial data in QGIS. We talked about vector and raster formats. This chapter has introduced the default file new format, GeoPackage. In the next chapter, we will be creating data in a GeoPackage. QGIS still fully supports Shapefiles and GeoTIFFs, and they are both still widely used throughout many sectors and the GIS community. In <a href="bab7139e-9f38-4dff-b1eb-c5056be9c960.xhtml">Chapter 7</a>, <em>Expanding QGIS 3</em>, we will look at exporting and loading text files into and out of QGIS.</p>
<p>We have explored the options for exploring data, via <span class="packt_screen">Attributes</span> <span class="packt_screen">Toolbar</span>. We looked at querying, selecting, and measuring data. There is so much more we can do, and in the next chapter we will look at building data in QGIS.</p>


            </article>

            
        </section>
    </body></html>