<html><head></head><body>
        

                            
                    <h1 class="header-title">Loading Data</h1>
                
            
            
                
<p>The next two chapters are all about using data in QGIS. In <a href="0e2ba9ae-3346-4444-b28a-389d22737646.xhtml">Chapter 3</a>, <em>Creating Data</em>, we will look at how we build and edit GIS data. In this chapter, we will start by loading existing data. QGIS supports many GIS data formats. It makes use of the OGR library for vector data and the GDAL library for raster data. By default, QGIS uses the GeoPackage format. As such, we will make this the default format for this book.</p>
<p>These are the topics that will be covered in this chapter:</p>
<ul>
<li>Vector, raster, and other data types</li>
<li>GeoPackage</li>
<li>Loading data</li>
<li>Projections</li>
<li>Creating and saving a project</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">GIS data</h1>
                
            
            
                
<p>What do I mean by GIS data? By vector data, I mean points, lines, and polygons. The most common file format is a Shapefile (multiple files make up a Shapefile). By raster data, I mean (georeferenced) bitmaps. The most common file format is GeoTIFF.</p>
<p>Download the QGIS sample dataset from <a href="https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/qgis_sample_data.zip">https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/qgis_sample_data.zip</a>. Extract it to a working directory on your computer<a href="https://qgis.org/downloads/data/">.</a></p>
<p>In QGIS, you should now be able to see this data in the Browser panel, as shown in the following screenshot:</p>
<div><img src="img/8f538a9b-88d9-45ca-8535-b1a0fd648823.png" style=""/></div>
<p>Browser panel</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Loading data</h1>
                
            
            
                
<p class="mce-root">Loading data into QGIS can be done in several ways. Three of the most common ways are as follows:</p>
<ul>
<li>You can drag data directly from a folder (Windows OS) straight into the map</li>
<li>You can drag data from the Browser panel into the map</li>
<li>You can click Layer | Add Layer and choose what type of layer to add to the map</li>
<li>This way opens Data Source Manager</li>
</ul>
<p class="mce-root">In the following screenshot, we are choosing to load Add Vector Layer, which can also be done using the <em>Ctrl</em> + <em>Sh</em><em>ift</em> + <em>V</em> shortcut:</p>
<div><img src="img/514ed447-b922-4570-9d4f-1fcc4b80e771.png" style=""/></div>
<p>Loading data</p>
<p>This screenshot gives you an idea of all the different data types that QGIS can consume. We will not be covering all these formats; we mention it to highlight the data capabilities of QGIS only. By adding data this way, you will be opening Data Source Manager, as shown in the following screenshot:</p>
<div><img src="img/6606f033-79d0-4a51-8bf9-365447f4dc00.png" style=""/></div>
<p>The QGIS Data Source Manager</p>
<p>Data Source Manager is a really nice way of adding data to your map. You can add files one by one, add multiple files, or add different file types at the same time. To use an analogy, Data Source Manager is very much like a data menu: just select the data you want.</p>
<p>From the QGIS sample data downloaded earlier, load <kbd>airport.shp</kbd> from the <kbd>shapefiles</kbd> folder and the <kbd>SR_50M_alaska_nad.tif</kbd> file from the <kbd>raster</kbd> folder. These should load into the map and appear as follows:</p>
<div><img src="img/05b58db2-99db-4584-a352-aa52aaab0f9f.png"/></div>
<p>The overview of QGIS with data loaded</p>
<p>Right-click on <kbd>SR_50M_alaska_nad</kbd> and select Zoom to Layer to zoom to the layer extent. This is shown in the following screenshot:</p>
<div><img src="img/60e32648-fcb2-4b6a-880e-22a9cafea912.png" style=""/></div>
<p>Zoom to Layer</p>
<p>Select Project | New and don't save changes to clear the project and open a new one.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">GeoPackage</h1>
                
            
            
                
<p>I have loaded all the Shapefiles in the <kbd>shapefiles</kbd> folder to a GeoPackage layer. You can download this layer from here: <a href="https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip">https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip</a>.<a href="http://www.packt.com/qgis"/></p>
<p>Expand <kbd>GeoPackage</kbd> in the Browser panel, as shown in the following screenshot. In <a href="0e2ba9ae-3346-4444-b28a-389d22737646.xhtml">Chapter 3</a>, <em>Creating Data</em>, we will look at how to add a layer to this package. For now, select the <kbd>Airports</kbd> layer and drag it into your map as follows:</p>
<div><img src="img/819ec575-0267-41ea-a442-0a642210c8e5.png" style=""/></div>
<p>GeoPackage in the Browser panel</p>
<p>Experiment by dragging in more layers and zooming to the layer extent. This data looks no different to the Shapefiles we loaded previously. If you look at the file in your file manager (Windows Explorer, for example), instead of several Shapefiles and the several files associated to a Shapefile, we have one file. This makes the GeoPackage format (<kbd>.gpkg</kbd>) ideal for sharing and managing project data. The GeoPackage format has no file size limitations and is platform-independent, unlike a Shapefile.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Interacting with the data</h1>
                
            
            
                
<p>In this section, we will use Map Navigation and Attributes Toolbar. Create a new project (Project | New) and load the following data from the GeoPackage into the QGIS project:</p>
<ul>
<li><kbd>Airports</kbd></li>
<li><kbd>majrivers</kbd></li>
<li><kbd>trees</kbd></li>
</ul>
<p class="mce-root"/>
<p>Load <kbd>SR_50M_alaska_nad.tif</kbd> from the <kbd>raster</kbd> folder. Make sure the layers are ordered in this way. Zoom to the extent of the <kbd>Airports</kbd> layer. Your screen should look similar to the following screenshot:</p>
<div><img src="img/89eca300-0a98-4a60-8191-0c25840746d0.png"/></div>
<p>The overview of QGIS with layers added</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Identifying data</h1>
                
            
            
                
<p>From Attributes Toolbar, click on the blue i button and then click on a point from the <kbd>Airports</kbd> layer in the map. This will display the Feature attributes in a new panel; again, like all panels, you can move it around and resize as needed. The clicked point will be highlighted in the map and its attributes displayed, similar to the following screenshot:</p>
<div><img src="img/0b1d04d8-0283-4f3d-b2cb-80439ac8d7a1.png" style=""/></div>
<p>Identify tool</p>
<p>Investigate the identify tool with the other layers. Note that the Mode shown in the identify results is currently set to Current layer. That means that you only see the results from the layer that is currently active. There are four options in Mode:</p>
<ul>
<li>Current layer</li>
<li>Top down, stop at first</li>
<li>Top down</li>
<li>Selection</li>
</ul>
<p class="mce-root"/>
<p>Set Mode to Selection and click another location on the map. This time, you will be presented with identify options for all the layers (relating to the clicked location). This way, you get to choose the feature you wish to query. An example of this is shown in the following screenshot:</p>
<div><img src="img/2858276c-209e-43e8-b0a5-dea7c2118eab.png" style=""/></div>
<p>Identifying all layers</p>
<p>Close the identify results panel. Next, we will look at selecting data.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Data selection</h1>
                
            
            
                
<p>There are several ways to select data in QGIS. In this chapter, we will look at the drawing selection options in Attributes Toolbar that we highlighted in <a href="44524991-c928-4616-a928-9fee41ef2270.xhtml">Chapter 1</a>, <em>Getting Started with QGIS 3</em>. Let's select some data from <kbd>Airports</kbd>. Click on the <kbd>Airports</kbd> layer in the Layers panel (making sure it is highlighted) and select the Select Features by area or single click button. Note that there are other ways of drawing a selection from the drop-down button, including selecting by polygon, freehand, and radius. In this example, we will use the default select features option, as shown in the following screenshot:</p>
<div><img src="img/438a3cd8-c4fa-48ff-af54-07e4e6ddab1c.png"/></div>
<p>Select features by area or with a single click</p>
<p>Click and drag a box around several Airports' points. The selected points will change color. Press <em>F6</em> or click on the open table button in the toolbar. The attribute table for the <kbd>Airports</kbd> layer will appear. In the lower-left corner, set the query to Show Selected Features. This is shown in the following screenshot:</p>
<div><img src="img/a2fdff4d-5b46-44a3-a2e5-cd2f284a9c98.png" style=""/></div>
<p>Attribute table for Airports layer</p>
<p>In the attribute table, click on the Invert selection (Ctrl+R) button (yellow right-angled triangle and clear triangle forming a square), as follows:</p>
<div><img src="img/c8e4ae54-cdd6-43d0-b65c-fced8b169f5a.png" style=""/></div>
<p>Inverting a selection</p>
<p>Inverting a data selection can often be useful. For example, you might want to select many points, but want to exclude only a few. Using inversion allows you to select the few and invert the selection to select the many. Close the attribute table and you will see the newly selected airports on the map. Click on Deselect Features from All Layers from Attributes Toolbar to clear the selection. This is shown in the following screenshot:</p>
<div><img src="img/6e69e3df-2ef8-453c-b116-63f6515e1b88.png" style=""/></div>
<p>Deselecting features from all layers</p>
<p>Finally, let's select a feature in the <kbd>Airports</kbd> layer by an attribute value. Click on the Select Features by Value button in Attributes Toolbar. This is shown in the following screenshot:</p>
<div><img src="img/8992ab4c-a4f7-4981-9e55-4ecadcf85e6b.png" style=""/></div>
<p>Selecting features by value</p>
<p>A selection dialog box will appear. Set the ID field to equal <kbd>1</kbd>. Click on the Select features button and the selected airport will be highlighted in the map. You can click on Flash features to flash the selected airport and also click on Zoom to features to zoom into the selected airport.</p>
<p>The Select Features by Value dialog box is shown in the following screenshot:</p>
<div><img src="img/b8f3f6e6-5c34-4310-89a3-ef2723d75eb6.png" style=""/></div>
<p>Select Features by Value dialog box</p>
<p>Click on the Close button and clear the selection (using the Clear Selection button shown previously). Note here that Select Features by Expression is also available. We will look at expressions in more detail later this book.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Measuring distance and area</h1>
                
            
            
                
<p>A common function of a GIS is to quickly calculate distance and area. In <a href="0e2ba9ae-3346-4444-b28a-389d22737646.xhtml">Chapter 3</a>, <em>Creating Data</em>, we will show how to write the area of a feature to an attribute table. In this chapter, though, we will look at the measuring options available from Attributes Toolbar.</p>
<p>The measure tool does not require a layer to be selected in the layer panel in order for it to work. This means that it is independent of layers. The measure tool can measure length, area, or angle, and you can use the drop-down button next to the tool to select the required option. In this example, let's measure length. Select the Measure Line option and then left-click on the map to begin the measurement. After doing this, left-click again to measure the segment. Continue to left-click to measure segments of the line or right-click on the end point to finish measuring.</p>
<p class="mce-root"/>
<p>The following screenshot shows the distance in meters between airports:</p>
<div><img src="img/6124e047-87cf-4406-963c-33abaeb59dc4.png" style=""/></div>
<p>The Measure tool in QGIS</p>
<p>Change the units from meters to kilometers to show more meaningful distance at this scale. Try measuring area; the tool works in the same way as distance. Measuring in any GIS depends on the projection of the map. In the next section, we will look at projections in QGIS.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Projections</h1>
                
            
            
                
<p>The default projection for QGIS (on loading the first time) has the EPSG code 4326 (WGS 84). Unless changed, the default settings in QGIS allow the projection of the map to be set by the projection of the first layer loaded into the map, assuming that the data has a projection associated to it.</p>
<p>It is beyond the scope of this book to go into details about various coordinate systems; if you are interested in learning more about this, then a good starting point is the Wikipedia entry on geographic coordinate systems at <a href="https://en.wikipedia.org/wiki/Geographic_coordinate_system">https://en.wikipedia.org/wiki/Geographic_coordinate_system</a>.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Suffice to say that getting the projection correct in your GIS is fundamental to any analysis, mapping, or derivation of knowledge from your data. The world is not flat and projecting your data is the process of taking the part of the Earth's surface you are working on and mathematically shrinking and distorting it so it fits on a plane. You can move from one projection system to another by transforming your data.</p>
<p>Using the <kbd>Airports</kbd> layer as an example, the projection of the layer is EPSG 2964 and on loading the data, your QGIS project will be set to this projection. If you add data in another projection, then QGIS will make reprojections of your data on the fly. This is very powerful and useful, but be careful that you know what projection system all your data is in.</p>
<p>To illustrate projections, consider changing the projection from EPSG 2964 to EPSG 4326 with the internal reprojection parameters. Here is our data in the EPSG 2964 projection:</p>
<div><img src="img/3fe070c7-d80b-459c-b628-5b2259456444.png"/></div>
<p>The overview of QGIS project in EPSG 2964</p>
<p>In the Status Bar, in the lower-right-hand corner you will see EPSG 2964. Click on this and change the projection to WGS 84. Search for <kbd>4326</kbd> in the Filter box as follows:</p>
<div><img src="img/7710959c-b19a-4afa-a2ff-43d0837da9b4.png"/></div>
<p>Overview of project projection properties</p>
<p>Click on OK and return to your map. You will see the data represented very differently to before. This is shown in the following screenshot:</p>
<div><img src="img/77d82407-e9b3-4d01-abec-bb3bbd7fb5a2.png"/></div>
<p>The overview of reprojected data</p>
<p>Reset the projection by repeating these steps and selecting EPSG 2964.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Saving data</h1>
                
            
            
                
<p>In later chapters, when we start creating data, we will be working in one projection system. However, it is worth noting in this section that both vector data (points, line, and polygons) and raster data (bitmaps) can be saved in different projections. Right-click on the <kbd>Airports</kbd> layer and select Export | Save Features As. In the dialog box, you will see an option for CRS; this is where you can change the projection system.</p>
<p>This dialog box is shown in the following screenshot:</p>
<div><img src="img/d2fbe5ce-105e-4a0b-a454-848c0c3f6c94.png" style=""/></div>
<p>Saving the layer</p>
<p>For a raster, select Raster | Projections | Warp (Reproject) from the menu bar. This is shown in the following screenshot:</p>
<div><img src="img/6814ef30-72ed-41c5-a988-afe8adba8d56.png" style=""/></div>
<p>Reprojecting rasters in QGIS</p>
<p>The <kbd>Warp</kbd> command uses <kbd>gdalwarp</kbd> to reproject raster data. An example of reprojecting the <kbd>SR_50M_alaska_nad</kbd> raster to EPSG:4326 is shown in the following screenshot:</p>
<div><img src="img/705c74d4-7ed2-49f4-9cf9-e43eb3e1356a.png" style=""/></div>
<p>Reproject raster tool</p>
<p>If you scroll down to the bottom of this dialog box, you will see the corresponding <kbd>gdalwarp</kbd> command. This could be pasted into the OSGeo4W shell (if you installed QGIS via the OSGeo4W installer) and run on the command line (like so many QGIS functions).</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Saving your project</h1>
                
            
            
                
<p>We can save a QGIS project so we can return to it in the future. The default format is <kbd>.qgz</kbd>. To save your project, go to Select Project | Save. I have called mine <kbd>ch2.qgz</kbd>; it is shown in Windows Explorer as follows:</p>
<div><img src="img/6d08fd74-4f95-417b-90b8-cab01f3d9a01.png" style=""/></div>
<p>Saving the project as a .qgz file</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Summary</h1>
                
            
            
                
<p>We have looked at geographic/spatial data in QGIS. We talked about vector and raster formats. This chapter has introduced the default file new format, GeoPackage. In the next chapter, we will be creating data in a GeoPackage. QGIS still fully supports Shapefiles and GeoTIFFs, and they are both still widely used throughout many sectors and the GIS community. In <a href="bab7139e-9f38-4dff-b1eb-c5056be9c960.xhtml">Chapter 7</a>, <em>Expanding QGIS 3</em>, we will look at exporting and loading text files into and out of QGIS.</p>
<p>We have explored the options for exploring data, via Attributes Toolbar. We looked at querying, selecting, and measuring data. There is so much more we can do, and in the next chapter we will look at building data in QGIS.</p>


            

            
        
    </body></html>