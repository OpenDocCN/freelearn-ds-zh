<html><head></head><body>
        

                            
                    <h1 class="header-title">3D Maps and 3D Analyst</h1>
                
            
            
                
<p>In this chapter, we will cover the following recipes:</p>
<ul>
<li>Creating a 3D scene</li>
<li>Enabling your data to store Z (elevations)</li>
<li>Creating Multipatch features from 2D</li>
<li>Creating 3D features</li>
<li>Calculating the volume of a polygon</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Introduction</h1>
                
            
            
                
<p>Since its beginnings over 50 years ago, GIS has relied on 2D maps. They were what we created and where we performed all our analyses. Recently, this is changing. More and more, we are having to take the third dimension, Z, into account. This is because the world is becoming more crowded. Our infrastructure is stacking up upon itself, both above ground and below. So, the need to track and view data in 3D is increasing. Supporting technologies, such as <strong>Light Detection and Ranging</strong> (<strong>LiDAR</strong>), <strong>Unmanned Aerial Vehicles</strong> (<strong>Drones/UAS/UAV</strong>), and increasing computer power are also adding to this push. </p>
<p>As you have seen if you have completed previous recipes in this book, ArcGIS Pro is a very powerful tool for visualizing and analyzing data. However, up to this point, we have been working in a 2D environment. While we can do a lot in 2D, it does have limitations because we live in a 3D world. ArcGIS Pro brings new 3D capabilities to the table that we have not had in previous desktop GIS applications. It natively supports the 3D viewing, querying, and limited analysis of data. When you add the 3D Analyst extension, then you open up a whole new world of possibilities.</p>
<p>Working in 3D provides much better ways to view and manage our infrastructure. We can begin to see the true spatial relationships between the features we are maintaining, viewing, and analyzing. ArcGIS Pro allows you to create 3D Maps, called <strong>Scenes</strong>, using the core application, as illustrated here:</p>
<div><img class="alignnone size-full wp-image-948 image-border" height="603" src="img/aa527a58-7554-4525-92dd-0b1eca5da934.png" width="1000"/></div>
<p>The preceding scene was created using ArcGIS Pro. You can see the buildings, power poles, light poles, and fire hydrants, all depicted in 3D. This allows you to see things such as whether a building will be in the way of a power line or whether a building will cast a shadow over an area that might prevent certain species of plants from growing. If you add the 3D Analyst extension, then you can begin to calculate the slope of road or pipe, determine whether one building might block the view from another, and more.</p>
<p>Don’t limit your 3D thinking or displays to infrastructure. Any data can be displayed in 3D. This opens up a whole new way to look at your data, as illustrated in the following maps:</p>
<div><img class="alignnone size-full wp-image-949 image-border" height="407" src="img/080aea89-33fd-40d8-b1fa-f0f8b4bbae33.png" width="1193"/></div>
<p>As you can see, these two maps have nothing to do with infrastructure. Instead they are highlighting areas with higher and lower values. The use of 3D makes those areas with higher and lower values stand out visually even more so than using traditional symbology. These maps also illustrate that you can combine traditional categorical and quantitative symbology with 3D to produce even more impactful maps. This capability is included in the core functionality of ArcGIS Pro.</p>
<p><em>What if I need to do more than visualize data in 3D? What if I need to analyze the data so that I can make use of elevational or height information?</em> Well, we have already hinted at that. Esri has an extension for ArcGIS Pro called <strong>3D Analyst</strong>. This extension greatly enhances ArcGIS Pro’s ability to work within 3D. The 3D Analyst extension adds a new toolbox to your arsenal that contains 11 toolsets and over 100 tools for creating, converting, and analyzing 3D data. The 3D Analyst extension is not part of the core ArcGIS Pro product. It must be purchased as an additional license. However, it will work with all license levels of ArcGIS Pro. To learn more about the 3D Analyst extension, go to <a href="https://www.esri.com/software/arcgis/extensions/3danalyst">https://www.esri.com/software/arcgis/extensions/3danalyst</a>.</p>
<p>In this chapter, you will get an opportunity to explore some of the 3D capabilities of ArcGIS Pro. You will start by creating a 3D scene. Then you will learn how you can enable your features classes to store Z coordinates like it does <em>x</em> and <em>y</em>. Then you will move on to more advanced concepts and begin to make use of the 3D Analyst extension.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating a 3D scene</h1>
                
            
            
                
<p>As we said, ArcGIS Pro allows you to create 3D maps as part of its core functionality regardless of license level. So that is what you are about to do. In this scenario, you are working for an engineering firm that is working on a project to possibly turn a quarry into a water reservoir. The lead engineer on the project has asked you to create a 3D map of the area that he will use during a presentation to the client. This will help the client and engineer visualize the area as he creates his plan.</p>
<p>In ArcGIS Pro, a 3D map is called a <strong>scene</strong>. When creating a new 3D scene, one of the first things you need to determine is what data will serve as the ground surface. The ground surface becomes the canvas that all 2D layers are draped across. Yes, a 3D scene will include both 2D and 3D layers. Typical 2D layers might include an aerial photo, parcels, political boundaries, and natural water features. These often help put your 3D layers into context. The ground surface can also serve as the starting point for displaying the 3D layers. It may provide the starting elevation for those features. They are then extruded above or below that surface. Esri provides a terrain model that is the default ground surface for any new 3D scene. This model is a web service published through ArcGIS Online. You can also use your own elevation or terrain data. This can include a Digital Elevation Model (<strong>DEM</strong>), <strong>Triangulated Irregular Network</strong> (<strong>TIN</strong>), or other web services.  </p>
<p>In this recipe, you will create a simple 3D scene of the project area. This scene will include both 2D and 3D layers. You set the elevation source for the map that will serve as the ground surface. You will start all this by creating a new project that contains a local scene. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This recipe requires the sample data to be installed on the computer. It is recommended that you complete the recipes from <a href="45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml">Chapter 1</a>, <em>ArcGIS Pro Capabilities and Terminology</em> before starting this recipe. This will ensure you have a better foundational understanding of how to add layers, set symbology, and navigate within a map. You can complete this recipe with any ArcGIS Pro licensing level.</p>
<p>It is also recommended that you verify your computer hardware is sufficient for working with 3D data. This requires more power than working with traditional 2D Maps. It is recommended that you have at least an i5 or better processor with 8 GB or more RAM (16 GB if you don’t have a dedicated video card), dedicated video card with <strong>Graphics Processing Unit</strong> (<strong>GPU</strong>), and both 4 GB video RAM and 12 GB of free hard drive space. If you computer does not meet or exceed these specifications, you may have issues completing this and other recipes in this chapter.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>You will start by launching ArcGIS Pro as you have done in previous recipes. In the Create a new project panel located on the right side, select <kbd>Local_Scene.aptx</kbd>, as shown here:</li>
</ol>
<div><img class="alignnone size-full wp-image-950 image-border" height="424" src="img/c4e3d84e-af88-48a8-bab3-48e5cde952f6.png" width="965"/></div>
<ol start="2">
<li>In the Create a New Project window that appears, name your new project <kbd>3DAnalyst</kbd>.</li>
<li>Click the Browse button at the end of the Location cell. Then in the left panel of the Select a folder to store the project window, click Computer.</li>
<li>In the panel on the right, double-click the <kbd>C:</kbd> drive. It is sometimes labeled as OS or local drive.</li>
<li>Scroll down and double-click the <kbd>Student</kbd> folder. Then repeat for the <kbd>ArcGISProCookbook</kbd> folder.</li>
<li>Scroll down and select the <kbd>Chapter 10</kbd> folder. Do not double-click it. Once selected so that <kbd>Chapter10</kbd> appears as the Name, click OK.</li>
</ol>
<div><p>Remember, for this part of creating a new project, you are selecting the location where the new project will be stored, not what the project is being named. So you must select an existing folder on a local drive or network share. If you double-click instead of single-clicking to select, you will need to back up one folder. You can do that simply by clicking the Back button located in the left corner. It looks like an arrow inside a circle.</p>
</div>
<ol start="7">
<li>Verify your Create a New Project window looks like the following and click OK:</li>
</ol>
<div><img class="alignnone size-full wp-image-951 image-border" height="517" src="img/55c846df-0465-42fc-8950-b6a77f6f9781.png" width="1178"/></div>
<p style="padding-left: 60px">You have just created a new project. This new project contains a single local scene. Now you will need to add data and folder connections to the project that you will need in order to add layers and access data.</p>
<ol start="8">
<li>In the Catalog pane, right-click the Folders folder and select Add Folder Connection.</li>
<li>In the panel on the left of the Add Folder Connection window, select Computer. Then double-click the C: drive.</li>
<li>Scroll down and double-click the Student folder.</li>
<li>Select the ArcGISProCookbook folder with a single click and click OK.</li>
</ol>
<ol start="12">
<li>Expand the Folders folder in the Catalog pane and answer the following question.</li>
</ol>
<div><p><strong>Question</strong>: What folders do you see connected to your project?</p>
<p><strong>Answer</strong>: </p>
</div>
<p style="padding-left: 60px">You should see that two folders are now connected. The first is your project folder. This has the same name as the project you just created. The second folder is the connection you just added. If you were to expand the ArcGISProCookbook folder connection, you will see all the other folders inside. Adding the connection to that folder allows you to access and use data contained in any of those folders inside this project. Now you will connect to a couple of databases that you will need in this and future recipes.</p>
<ol start="13">
<li>Right-click the Databases folder in the Catalog pane and select Add Database.</li>
<li>Click Folders located under Project in the left panel of the Select Existing Geodatabase window. You may need to expand the Project folder to see it.</li>
<li>Double-click the ArcGISProCookbook folder.</li>
<li>Scroll down and double-click the Databases folder.</li>
<li>Select the AthensQuarry.gdb and click OK.</li>
</ol>
<p style="padding-left: 60px">You have just added the connection to the primary database you will be using in this recipe. But since you will be using this project for other recipes in this chapter, you will go ahead and connect to the Trippville_GIS.gdb geodatabase that you will need later.</p>
<ol start="18">
<li>Repeat that same process to add the Trippville_GIS.gdb geodatabase to the project. The one difference being that you need to select the Trippville_GIS.gdb at the end before you click OK.</li>
<li>Right-click the Local_Scene.gdb database and click Remove. You will not be using that database, so removing it cleans up the project.</li>
<li>Save your project.</li>
</ol>
<p style="padding-left: 60px">So, you have added the databases and folder connections that you need to the project. Now you are ready to begin configuring your 3D scene. You will need to first configure some properties for the scene.</p>
<ol start="21">
<li>In the Contents pane, right-click Scene and select Properties from the menu that appears.</li>
<li>On the General tab, rename the scene to <kbd>Quarry Project</kbd>.</li>
<li>Set the Display units to US Feet using the drop-down arrow. This project is located in Georgia, which is in the southeastern United States.</li>
<li>Set the Elevation Units to the same value.</li>
<li>Click Elevation Surface in the left panel of the window.</li>
<li>Expand the Elevation sources option located near the bottom of the window. You should see the WorldElevation3D/Terrain3D web service listed. This is the default surface used for new scenes.</li>
<li>Add your own local Elevation source that is more accurate than the one provided by Esri. Click the Add Elevation Source button.</li>
<li>Click the Databases folder under Project in the left panel of the Add Elevation Source window.</li>
<li>Double-click the AthensQuarry.gdb geodatabase in the right panel.</li>
<li>Select quarry_dem and click OK. This is a digital elevation model that was created by a surveyor in the firm you are working at for this project. It is based on actual field survey data for the project site.<br/>
You should now have two Elevation sources listed for this project. You may also see a warning telling you a datum transformation was applied. This is normal because your DEM and the Esri web service make use of two different coordinate systems and datums.  You can click the Transformation page in the properties if you want to learn more.<br/>It is not unusual for a scene to have more than one Elevation source. It depends on the area covered by both the project and local elevation sources. ArcGIS Pro treats overlapping elevation sources much like layers in the Contents pane. It will use the top one that covers the area in question if two or more of the sources overlap. In this case, it will use the local DEM you just added until you reach the spatial edge where the DEM ends. Then it will make use of the Esri Terrain Model as the source.</li>
</ol>
<ol start="31">
<li>Click Coordinate System in the left panel. The engineer wants everything in the local state plane coordinate system since that is what the survey data was collected in.</li>
</ol>
<ol start="32">
<li>Click the Add Coordinate System button and select Import Coordinate System as illustrated in the following screenshot:</li>
</ol>
<div><img class="alignnone size-full wp-image-952 image-border" height="535" src="img/47ca4b86-cb73-4f8e-ad36-ff90aa1e7eb9.png" width="1047"/></div>
<ol start="33">
<li>In the Import Coordinate System, select quarry_DEM from the right panel. If you do not see it, you will need to navigate to the AthensQuarry.gdb geodatabase located in the Databases project folder. Click OK once you select quarry_DEM.</li>
</ol>
<ol start="34">
<li>You may get a warning about the imported coordinate system. If you do, ignore it. You should now have both a Current XY and Current Z coordinate system assigned, as illustrated in the following graphic. Click OK if you do to apply these changes to the scene's properties:</li>
</ol>
<div><img class="alignnone size-full wp-image-953 image-border" height="284" src="img/e2576e1f-f009-46cf-9659-3f0ea0947033.png" width="454"/></div>
<p style="padding-left: 60px">Your scene will change in such a way that the earth will appear to be oblong in shape. This is because you have assigned a local coordinate system to your map that is designed to preserve the data as much as possible in the project area. Now you will add layers to the scene.</p>
<ol start="35">
<li>Save your project.</li>
<li>Click the Add Data button on the Map tab in the Layer group.</li>
<li>Double-click the Databases folder and then the AthensQuarry.gdb.</li>
</ol>
<ol start="38">
<li>Select the Bldg, HydroLine, HydroPoly, and Parcels feature classes. Click OK once you have the feature classes selected.</li>
</ol>
<div><p>Holding down your <em>Ctrl</em> key while selecting will allow you to select multiple feature classes.</p>
</div>
<p style="padding-left: 60px">The new layers you added should appear in your map as 2D Layers. You will need to adjust the draw order for the layers and the symbology.</p>
<ol start="39">
<li>In the Contents pane, select and drag the Lakes layer so it is above the Parcels.</li>
<li>Select and drag the Bldg layer so it is above the Parcels layer as well. It can be either above or below the Lakes layer.</li>
</ol>
<p style="padding-left: 60px">All layers should now be visible in your map. No layer should be hiding behind another one. Now, let's work on the symbology.</p>
<ol start="41">
<li>Click the symbol patch located below the Streams layer name. This should open the Symbology pane.</li>
<li>Ensure you are viewing the Gallery by clicking the Gallery tab next the top of the pane. Select the Water (line) predefined symbol.</li>
<li>Click the symbol patch located below the Lakes layer name. Then select the Water (area) predefined symbol on the Symbology pane.</li>
<li>Click the symbol patch below the Bldg layer name. Then select the Building Footprint predefined symbol. If you see more than one, select any one you want to use.</li>
<li>Click the symbol patch located below the Parcels layer name. Select the Black Outline predefined symbol.</li>
</ol>
<ol start="46">
<li>Close the Symbology pane.<br/>
Your scene should now look like the following graphic. So far, you have created a new project that contains a 3D scene. You then configured the source elevation, which is the ground surface for the scene, using a local digital elevation model. Lastly, you added several layers to the scene. These layers are all being displayed as 2D layers, which means they are just being draped across the DEM you specified as the elevation source:</li>
</ol>
<div><img class="alignnone size-full wp-image-954 image-border" height="380" src="img/157b5c3a-4be1-4450-bd6e-7898caa36d63.png" width="732"/></div>
<p style="padding-left: 60px">Now it's time to make one of the 2D layers a 3D layer. This is fairly easy to do.</p>
<ol start="47">
<li>Select the Bldg layer in the Contents pane.</li>
<li>Drag and drop it on the 3D Layers in the list. The 3D Layers will highlight in blue when your mouse pointer is on top of it. This is the indication to release your mouse button. The Bldg layer should now appear under 3D Layers indicating it is now a 3D layer. This means you will be able to display the buildings as 3D objects in the scene.</li>
</ol>
<ol start="49">
<li>In the Extrusion group, click the drop-down arrow located below Type. Select Min Height, as shown in the following screenshot:</li>
</ol>
<div><img class="alignnone size-full wp-image-955 image-border" height="292" src="img/83cfba5a-ad7e-4f2f-b4ad-3c99be32116a.png" width="393"/></div>
<ol start="50">
<li>In the cell located next to the Type option, click the drop-down arrow and select [Est_HGT] from the list, as illustrated in the following graphic. This is a field from the attribute table for the Bldg layer:</li>
</ol>
<div><img class="alignnone size-full wp-image-956 image-border" height="153" src="img/a311c93b-a814-430d-8926-a261910a81dd.png" width="357"/></div>
<p style="padding-left: 60px">You have just extruded the building in the Bldg layer based on a field in the attribute table that has each building's estimated height. Let’s look at the results of your work so you can see the buildings are indeed 3D.</p>
<ol start="51">
<li>Place your mouse pointer on the southern side of the scene; anywhere on the southern side will work.</li>
<li>Press the scroll wheel located in the center of your mouse. While holding it down, push the mouse away from you. This should rotate the scene around the <em>z</em> axis. Rotate it until you can begin to see the building heights above the ground and 2D layers. Then release your scroll wheel.</li>
<li>Roll your scroll wheel so that you zoom in closer, so you can see the buildings and verify they are being shown above the ground and 2D layers.</li>
</ol>
<p style="padding-left: 60px">Your scene should look similar to the following screenshot. Yours might be a little different depending on how far you rotated the scene along the Z axis and how much you zoomed in:</p>
<div><img height="561" src="img/7d4e65f9-e6af-4f59-a364-fcbe4163be89.png" width="885"/></div>
<ol start="54">
<li>Click the Map tab in the ribbon. Then click the drop-down arrow located in the Layer group. Select the Imagery basemap from the list provided. This provides a more realistic 3D view of the quarry project area.</li>
</ol>
<p>If you do not see the Imagery basemap, it may be that you are not connected to ArcGIS Online or are connected to your organization's portal for ArcGIS. If possible, connect to ArcGIS Online using your login details. If you are not able to, skip to <em>Step 57</em>. </p>
<ol start="55">
<li>Save your project.</li>
<li>Continue to navigate through the scene. Try zooming in and out, panning, and rotating along all axes. Make sure to examine the area around the quarry. You should be able to see all the piles of rock and the quarry pit itself in detail, as shown here:</li>
</ol>
<div><img height="432" src="img/d727bd1e-7bcb-4c67-a01b-f12dcef3af65.png" width="770"/></div>
<p>If you use a trackball or touch pad on a laptop, you can also use the compass located in the lower-left corner to navigate in the scene. Simply clicking the ring with your pointer will pan the view. If you click the arrow located in the upper-left corner of the compass, you can access more controls.</p>
<ol start="57">
<li>When you are done exploring the scene, right-click the Bldg layer in the Contents pane and select Zoom to layer.</li>
<li>Save your project and close ArcGIS Pro.</li>
</ol>
<p>You have just created a very basic 3D Scene using the core functionality found in ArcGIS Pro. What you just did can be accomplished at all license levels of ArcGIS Pro and does not require any extensions. If you want to learn more about creating 3D Scenes in ArcGIS Pro, you may want to examine <em>Chapter 5</em>, <em>Creating 3D Maps</em>, in <em>Learning ArcGIS Pro</em> by Tripp Corbin, GISP from Packt Publishing and watch the author's YouTube video on creating 3D maps with ArcGIS  Pro: <a href="https://www.youtube.com/watch?v=CRWE-CXO58s&amp;t=58s">https://www.youtube.com/watch?v=CRWE-CXO58s&amp;t=58s</a>.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Enabling your data to store Z coordinates (elevation)</h1>
                
            
            
                
<p>In <a href="b6f25e84-28a9-4d2d-aaca-3550460d4650.xhtml">C</a>hapter 2, <em>Creating and storing data</em>, we learned that vector data, points, lines, and polygons store data using the X and Y coordinates for the features. This determines their location, which is then displayed in a map. We expanded on that in <a href="9a0a5ec0-c176-44bf-a5d0-fdffb73c78a5.xhtml">Chapter 6</a>, <em>Projections and Coordinate System Basics</em>, where we learned those X and Y coordinates were referencing locations in a specific, real-world coordinate system that ties our data to the Earth. This allowed us to bring data from all over into our maps, so we could see their spatial relationships. ArcGIS Pro will project data that is in different coordinate systems on the fly, so they are displayed together.  However, that only represents two dimensions.</p>
<p>Can you enable data in ArcGIS Pro to store Z, the third dimension? Of course you can. You typically do this when you first create the feature class or shapefile. Some formats, such as an AutoCAD DWG and DXF file, are always Z-enabled. The 3D Analyst extension for ArcGIS Pro also has tools that allow you to convert existing 2D data to 3D Z-enabled data.</p>
<p>In this recipe, you will continue to work with the data for the quarry project you used in the last recipe. The engineer is now concerned about the nearby airport. He needs to see the runways in relation to the quarry and may need to make calculations concerning runoff from the quarry to those runways. He has acquired a shapefile that contains the location of runways, taxi ranks, and parking areas at the airport. However, they are not Z-enabled. You will create a new feature class in the <kbd>Athens_Quarry</kbd> geodatabase that is Z-enabled. Then, you will import the data from the shapefile into it. Lastly, you will calculate the elevation of the features based on the Digital Elevation Model you selected as the ground elevation in the previous recipe.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This recipe requires the sample data to be installed on the computer. You will need to have completed the previous recipe before starting this one. You will also need to have the 3D Analyst extension to complete this recipe.</p>
<p>To determine whether you have access to the 3D Analyst extension, open ArcGIS Pro. Then, open any project you have previously opened. Click the Project tab in the ribbon. Click the Licensing option in the left panel of the Project pane. This will tell you what license level and extensions you currently have access to, as illustrated in the following screenshot:</p>
<div><img class="alignnone size-full wp-image-957 image-border" height="536" src="img/ab5e6509-9ad3-4d23-9f37-0181fa2c4c76.png" width="1093"/></div>
<p>If you do not have access to the 3D Analyst extension, first contact your administrator to see whether they can provide one for you. If you do not have a license for this extension, you can request a trial license from Esri at <a href="https://www.esri.com/arcgis/trial">https://www.esri.com/arcgis/trial</a>.</p>
<p>This recipe can be completed with any license level of ArcGIS Pro, as long as you have the 3D Analyst extension.   </p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Start ArcGIS Pro and open the <kbd>3D Analyst</kbd> project you created in the previous recipe. It should be in your list of recently opened projects.</li>
<li>Ensure the QuarryProject scene you created in the previous recipe is open. If not, open it from the Catalog pane by right-clicking it and selecting Open Local View.</li>
<li>In the Catalog pane, expand the Database folder. Right-click the AthensQuarry.gdb geodatabase. Then, go to New and Feature Class, as shown in the following screenshot. This will open the Create New Feature Class geoprocessing tool in the Geoprocessing pane:</li>
</ol>
<div><img class="alignnone size-full wp-image-958 image-border" height="247" src="img/fb736aa8-de58-4c3c-b6c9-ef4aef0c6a09.png" width="429"/></div>
<ol start="4">
<li>Feature Class Location should automatically be set because you right-clicked the geodatabase where you are creating the new feature class. Type <kbd>Airport_Runways</kbd> into the feature class name.</li>
<li>Verify the Geometry type is set to Polygon. If is it not, select it using the drop-down arrow.</li>
<li>For Template Feature Class, click the Browse button located to the far right of the cell. It looks like a yellow folder with a black plus sign on it.</li>
<li>Click the Folder folder located under Project in the left panel of the Template Feature Class window.</li>
<li>Double-click the 3DAnalyst folder that appears in the right panel of the window.</li>
<li>You should now see at least two geodatabases and two shapefiles in this folder. Select Airport.shp and click OK.</li>
</ol>
<ol start="10">
<li>Set Has M to No using the drop-down arrow.</li>
<li>Ensure Has Z is set to Yes. If not, use the drop-down arrow to set it.</li>
<li>Click the Wireframe globe located to the right of the Coordinate System. This will open the Coordinate System window so you can set both the horizontal (XY) and vertical (Z) coordinate systems the new feature class will use.</li>
<li>Click the wireframe globe with a green plus sign located to the right of the XY Coordinate Systems Available and select Import Coordinate System, as illustrated here:</li>
</ol>
<div><img src="img/55f807b3-c7ef-47d6-9219-c341b756f0ee.png"/></div>
<ol start="14">
<li>Select the Databases folder under Project in the left panel of the Import Coordinate System window.</li>
<li>Double-click the AthensQuarry.gdb geodatabase in the right panel of the window.</li>
<li>Select quarry_DEM and click OK. You may get a warning about the Imported Coordinate System. If you do, ignore it.</li>
<li>Your Current XY should now be set to the NAD_1983_StatePlane_Georgia_West_FIPS_1002_Feet horizontal coordinate system and the Current Z set to the NAVD88_height_(ftUS) vertical coordinate system. If it is, click OK.</li>
</ol>
<ol start="18">
<li>Verify your Create Feature Class tool looks like the following and click Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-963 image-border" height="355" src="img/b31b21be-9e48-4ac1-99cd-cb124a499281.png" width="460"/></div>
<p style="padding-left: 60px">When the tool completes, a new layer should appear in the QuarryProject Scene. This new layer references the new feature class you just created. This new feature class will not only store the X and Y coordinates for all the features it contains but it will allow you to store the Z coordinates as well. Since this is a brand-new feature class, it is currently empty. You will next import the features that are in the shapefile you used as the Template Feature Class when you created the new feature class. You will use the Append tool to do this.</p>
<ol start="19">
<li>In the Geoprocessing pane, click the Back button located in the upper-left corner. This will take you back to either your favorites, Toolboxes, or Portal.</li>
</ol>
<div><p>If you closed the Geoprocessing pane when the Create New Feature Class tool completed, you can easily reopen it by going to the Analysis tab in the ribbon and clicking the Tools button in the Geoprocessing group.  </p>
</div>
<ol start="20">
<li>Click the Toolboxes tab at the top of the Geoprocessing pane.</li>
</ol>
<ol start="21">
<li>Scroll down the list of toolboxes to the Data Management Tools toolbox and expand it so you can see its contents.</li>
<li>Expand the General toolset. Notice the various tools included in this toolset.</li>
<li>Click the Append tool to open it.</li>
<li>For the Input Dataset, click the Browse button located to the right.</li>
<li>Select the Folders folder under Project in the left panel of the Input Datasets window.</li>
<li>Double-click the 3DAnalyst folder.</li>
<li>Select the Airport.shp shapefile and click OK. This will set the dataset you want to add or import into the target dataset.</li>
<li>Set the Target Dataset to Airport_Runways using the drop-down arrow.</li>
</ol>
<div><p>You had to use the Browse button to set the Input Dataset because the Airport.shp shapefile was not already a layer in your map. The drop-down arrows only list existing layers or tables included in the active map or scene.</p>
</div>
<ol start="29">
<li>Since you used the shapefile as the template for the new Airport_Runways feature class, you should be able to leave the Schema Type set to <kbd>Input Schema must match target schema</kbd>. The schemas for the input and target should be the same.</li>
<li>Since the Airport_Runways feature class does not include subtypes, you can leave that parameter blank. Verify your Append tool looks like the following and click Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-964 image-border" height="226" src="img/1c9489c9-37fa-410e-b20a-370ef7746c6a.png" width="416"/></div>
<div><p style="padding-left: 60px">For those that might have used ArcMap in the past, you may have used the Simple Data Loader or Load Object tools to accomplish this task. ArcGIS Pro 2.1 and earlier versions do not include that functionality. The author is not sure if or when Esri will add those tools to ArcGIS Pro.</p>
</div>
<p style="padding-left: 60px">When the Append tool completes, it will have copied the features from the shapefile to the Airport_Runways feature class. You will not be able to see them because their Z coordinate is still currently set to <kbd>0</kbd> because the shapefile was a 2D shapefile. Next, you will need to calculate a Z coordinate for each vertex associated with the features in the new feature class.</p>
<p style="padding-left: 60px">You will use a tool from the 3D Analyst extension that will calculate the <em>z</em> for the vertices based on where it lies in relation to the DEM you set as the ground surface.</p>
<ol start="31">
<li>Click the Back button in the Geoprocessing pane that has the Append tool open.</li>
<li>Click the Toolboxes tab at the top of the pane.</li>
<li>Expand the 3D Analyst toolbox so you can see its contents.</li>
<li>Expand the 3D Features toolset.</li>
<li>Scroll down the list of tools until you come to the Update Feature Z tool. Click this tool to open it. This tool will calculate the Z coordinates of features based on an input surface.</li>
<li>Set the Input Features to Airport_Runways using the drop-down arrow.</li>
<li>Click the Browse button for the Input Surface.</li>
<li>In the Input Surface window, click Databases in the panel on the left located under Project.</li>
<li>Double-click the AthensQuarry.gdb geodatabase in the right panel.</li>
<li>Select quarry_DEM in the same panel and click OK.</li>
<li>ArcGIS Pro will automatically determine which Interpolation Method it believes is best. Accept the one determined by ArcGIS Pro.</li>
<li>The Status Field will be left blank. You can use this field to track which features are not updated with new Z coordinate values. This is typically because the features do not overlap the surface. In this case, all the features in the Input Features layers overlap the Input Surface for the project area so there is no need to be concerned. There are parts of some of the runway features that are outside the project area, but those are not a concern.  </li>
</ol>
<ol start="43">
<li>Verify your Update Feature Z tool looks like the following and click Run:</li>
</ol>
<div><img height="270" src="img/68c5c03c-f41d-4cae-9d22-f927c3a701e1.png" width="470"/></div>
<p style="padding-left: 60px">Once the tool completes, you should start to see parts of the Airport_Runways layers. It maybe partially hidden by the World Imagery basemap. This is because both are at the same elevation. Not being able to see the entirety of the features on the layer is not a big concern. The fact that you can see some of them where before you could not see any is proof you successfully added the Z coordinates to the features in the layer.</p>
<p style="padding-left: 60px">However, we will further verify the success of the tool by using another tool that will add and calculate several attribute fields that are based on the 3D characteristics of the feature. This is the Add Z Information tool that is also included in the 3D Analyst extension.</p>
<ol start="44">
<li>Save your project.</li>
<li>In the Geoprocessing pane that contains the Update Feature Z tool you just used, click the Back button.</li>
<li>If needed, click the Toolboxes tab in the Geoprocessing pane.</li>
</ol>
<ol start="47">
<li>Expand the 3D Analyst Tools toolbox to see its contents.</li>
<li>Expand the 3D Features Toolset. Then click the Add Z Information Tool to open it.</li>
<li>Set the Input Features to Airport_Runways using the drop-down arrow.</li>
<li>Under the Output Property options, select the following:</li>
</ol>
<ul>
<li style="list-style-type: none">
<ul>
<li>Lowest Z</li>
<li>Highest Z</li>
<li>Average Z</li>
<li>Average Slope</li>
</ul>
</li>
</ul>
<ol start="51">
<li>Verify your Add Z Information tool looks like the following and click Run:</li>
</ol>
<div><img height="254" src="img/68c5c03c-f41d-4cae-9d22-f927c3a701e1.png" width="442"/></div>
<p style="padding-left: 60px">Fields for the properties you checked in the Add Z Information tool should now be added to the attribute table for Airport_Runways along with the appropriate values. Now, to verify that the tools worked.</p>
<ol start="52">
<li>Close the Geoprocessing pane.</li>
</ol>
<ol start="53">
<li>Right-click the Airport_Runways layer and select Attribute Table from the menu that appears. Then answer the following questions.</li>
</ol>
<div><p><strong>Question</strong>: What fields did the Add Z Information tool add to the attribute table?</p>
<p><strong>Answer</strong>:</p>
<p><strong>Question</strong>: Did the Update Feature Z tool work?</p>
<p><strong>Answer</strong>: </p>
<p><strong>Question</strong>: How can you tell whether it did or did not work?</p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">Hopefully you were able to pick out the four fields that were added to the attribute table for the Airport_Runways layer. These correspond to the options you selected in the tool. The values stored in these newly added fields allow you to see that the Update Feature Z tool was successful except for the two features that extended beyond the project area.</p>
<ol start="54">
<li>Save your project and close ArcGIS Pro.</li>
</ol>
<p>You have just created a new Z-enabled feature class and imported data from a 2D shapefile into it. You then used the Update Feature Z to calculate the Z coordinates for all the vertices for the features in the new feature class you created. You then used the Add Z Information tool to verify that the Z coordinates had been successfully added.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating multipatch features from 2D</h1>
                
            
            
                
<p>In working through the recipes in this chapter, you have learned how to display 2D data in 3D and how to create basic Z-enabled layers. All of these methods for working in 3D open the door to a wealth of capabilities within ArcGIS Pro from display to analysis. However, they all still have limitations. Extruding 2D data to display in 3D does allow us to see those features and their relationships in three dimensions compared to other features, but we are not able to easily calculate volumes or locate a position vertically within the extruded feature. Adding Z coordinates to a point, line, or polygon allows us to place it in the correct space but again they still only form a single plane. What do we need to create a solid shape (meaning something that has volume)? There is a more advanced 3D data format that is supported in ArcGIS Pro that allows for this. It is called <strong>Multipatch</strong>.</p>
<p>Multipatch is a true 3D object. It is constructed using a series of planes or polygons that are drawn in a 3D environment. They are connected together to form a 3D feature.  The planes or polygons that form the feature are also called <strong>patches</strong>. Thus, the term multipatch. ArcGIS Pro is not the only application that allows for the display and creation of Multipatch features. Most <strong>computer-aided drafting and design</strong> (<strong>CADD</strong>) software also can be used to create multipatch features.  Because of the complexity of a multipatch feature, you are often able to show more detail than what you can accomplish with simple extrusion. Multipatch feature classes also increase the number of analysis tools you can use from the 3D Analyst extension for calculating line of sight and more.  </p>
<p>The City Planner for the City of Trippville wants to incorporate line of sight requirements into the development regulations for the City. He will want to see whether new buildings will adversely impact the views of existing buildings to key elements, such as parks and rivers, in the City. Many of these types of calculations require the use of multipatch features. In this recipe, you will convert the building footprints from extruded buildings to a new multipatch feature class.   </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>To complete this recipe, you will need access to the 3D Analyst extension for ArcGIS Pro. You will need to have completed the other recipes in this chapter and ensure the sample data is installed before you continue.  This recipe can be completed with all license levels of ArcGIS Pro.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Start ArcGIS Pro and open the <kbd>3DAnalyst.aprx</kbd> project you used in the previous recipes in this chapter. This project should be included in your list of recently opened projects.</li>
<li>In the Catalog pane, right-click the Maps folder and select New Scene.</li>
<li>A new scene should open in the view area. Unless you have changed the default options, the new scene will display in the Global view. Since you are working with a single small city, you need to change it to a local view. Click the View tab in the ribbon.</li>
</ol>
<ol start="4">
<li>Click the Local button located in the View group. This will change your scene to be a local view, as illustrated in the following screenshot:</li>
</ol>
<div><img class="alignnone size-full wp-image-965 image-border" height="824" src="img/136d9eb3-c7dd-48e5-a9c7-54215b6bded1.png" width="1800"/></div>
<p>Scenes will either be global or local. Global scenes are used for large area 3D maps where the curvature of the earth can impact the display and analysis of the data. Local scenes are for smaller areas such as a City, Township, or County. In these cases, the curvature of the earth has less impact due to the scale of the 3D map. Local scenes most often make use of a projected coordinate system, whereas Global uses a geographic. For more information about global and local scenes, go to <a href="http://pro.arcgis.com/en/pro-app/help/mapping/map-authoring/scenes.htm">http://pro.arcgis.com/en/pro-app/help/mapping/map-authoring/scenes.htm</a>.</p>
<ol start="5">
<li>Set the elevation source, which will be the surface for this new scene. Right-click the Scene in the Contents pane and select Properties from the menu that appears.</li>
<li>Click Elevation Surface in the left panel of the Map Properties window.</li>
<li>Expand the Elevation sources option in the middle of the right panel of the window.</li>
<li>Click the Add Elevation Source button.</li>
<li>Click the Databases folder on the left panel of the Add Elevation Source window.</li>
<li>Double-click the Trippville_GIS.gdb geodatabase in the right panel.</li>
</ol>
<ol start="11">
<li>Select DEM and click OK to assign this as an elevation source. You may receive a warning that a datum transformation was applied. This is because the DEM and the Esri default terrain surface use different horizontal and vertical datums.</li>
<li>You will now remove the Esri Terrain as an Elevation source because it is not needed. Click the small red X located to the right of the Esri WorldElevation3D service, as indicated here:</li>
</ol>
<div><img class="alignnone size-full wp-image-966 image-border" height="224" src="img/b06cd007-68e1-4a87-a835-98eda5dd020b.png" width="385"/></div>
<ol start="13">
<li>Set the Surface color to No Color using the drop-down arrow. This will allow you to see layers below the surface.</li>
<li>Set the coordinate system for the scene. Click the Coordinate System option in the left panel of the Map Properties window.</li>
<li>Click the Add Coordinate System button that looks like a small wireframe globe with a green plus symbol on it, located on the right side of the window.</li>
<li>Select Import Coordinate System from the menu that appears.</li>
<li>Select DEM in the right panel of the window and click OK. If you do not see the DEM listed, use the skills you have learned to navigate to the Trippville_GIS geodatabase in the project. You may again see the warning about the imported coordinate system. If you do, ignore it.</li>
<li>Click the General option in the left panel of the window.</li>
<li>Name the Scene Trippville Buildings.</li>
<li>Set the Elevation Units to US Feet using the drop-down arrow and click OK.</li>
</ol>
<p style="padding-left: 60px">Your map view may now appear empty after you click OK. Do not worry if it does. This is normal. When you add layers, you will see the basemap and newly added layers displayed in the view.</p>
<p style="padding-left: 60px">The new scene is ready to begin adding layers. You will add a few layers to the new scene now.</p>
<ol start="21">
<li>Save your project.</li>
</ol>
<div><p>Just a reminder, you should save your projects often because ArcGIS Pro does not have an autosave option for projects. Working with 3D scenes requires a lot more resources than 2D Maps. This makes them more prone to crashing and failure. To allow you to quickly recover if this happens, save your project any time you have made major changes to it, such as adding and configuring a new scene.</p>
</div>
<ol start="22">
<li>Click the Add Data button in the Layer group on the Map tab in the ribbon.</li>
<li>Click the Databases folder on the left panel of the Add Data window under Project.</li>
<li>Double-click the Trippville_GIS geodatabase in the right panel.</li>
<li>Double-click the Base feature dataset.</li>
<li>Select the Buildings and Parcels feature classes. Hold your <em>Ctrl</em> key down to select both. Click OK once both are selected.</li>
</ol>
<p style="padding-left: 60px">The two layers are added as 2D layers to your scene. If your map view was blank, it should now display the two layers you just added along with your basemap. Now we will work on adjusting the symbology for both layers.   </p>
<ol start="27">
<li>Click the small symbol patch located below the Parcels layer name in the Contents pane.</li>
<li>In the Symbology pane that appears, ensure you are looking at the Gallery. The Gallery contains preconfigured symbols. Scroll down until you find the Black Outline (1pt) symbol and select it.</li>
<li>Click the small symbol patch located below the Buildings layer in the Contents pane.</li>
<li>Scroll down through the list of symbols until you come to the dark gray Building Footprint symbol that is in Category 3. Select that symbol for your buildings layer.</li>
</ol>
<div><p>If you hover your mouse pointer over a symbol in the Symbology pane, you will see information about the symbol including its name, the style in which it is stored, and its category. Also at the top of the Symbology pane is a Search function that you can use to locate predefined symbols based on a keyword. For example, you could have searched Building and it would have returned all symbols that are associated with buildings, including the one you were looking for.</p>
</div>
<ol start="31">
<li>Close the Symbology pane.</li>
<li>Right-click the Buildings layer in the Contents pane and select Zoom to Layer. You scene should now look very similar to the following screenshot. The scale may be different, depending on the size of your monitor and your resolution:</li>
</ol>
<div><img height="489" src="img/8b73c1ad-8b52-40f0-ae5a-de4b8a69cd83.png" width="782"/></div>
<ol start="33">
<li>Drag and drop the Buildings layer from the 2D Layers to the 3D Layers.</li>
<li>Save your project.</li>
<li>Click the Appearance tab in the ribbon.</li>
</ol>
<ol start="36">
<li>Click the drop-down arrow below Type in the Extrusion group. Select Max Height from the list presented.</li>
<li>Ensure the Unit is set to US Feet.</li>
<li>In the Extrusion Expression cell located to the right of the Type button, click the drop-down arrow and select the [Est_HGT] field from the list. This will extrude the buildings based on their estimated height stored in the attribute table for the layer.</li>
<li>Using the skills you learned in the first recipe of this chapter, <em>Creating a 3D map</em>, zoom in on the downtown area and rotate your scene so it looks similar to the following screenshot:</li>
</ol>
<div><img height="351" src="img/d75a2502-53eb-4cb1-8fdf-f64a991bd6b5.png" width="421"/></div>
<p style="padding-left: 60px">You can now see the buildings extruded to their estimated height. While they look 3D, they are still just 2D features that are being artificially expanded along the <em>z</em> axis to appear 3D. Now you will convert them to 3D Multipatch features.  </p>
<ol start="40">
<li>Click the Analysis tab in the ribbon.</li>
<li>Click the Tools button on the Geoprocessing group to open the Geoprocessing pane.</li>
<li>Click the Toolboxes tab in the Geoprocessing pane.</li>
<li>Expand the 3D Analyst Tools toolbox.</li>
<li>Expand the Conversion toolset and select the Layer 3D to Feature Class tool.</li>
<li>Set the Input Feature Layer to Buildings using the drop-down arrow.</li>
<li>Click the Browse button for the Output Feature Class.</li>
<li>Click the Databases folder under Project in the left panel of the Output Feature Class window. Double-click the Trippville_GIS geodatabase.</li>
<li>Type Buildings_MP for the Name. Click Save.</li>
<li>Verify your Layer 3D to Feature Class tool looks like the following and click Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-967 image-border" height="179" src="img/b92ac3b6-359d-4669-aa6d-6cbb3bc67332.png" width="330"/></div>
<ol start="50">
<li>Turn off the Buildings layer to confirm your conversion was successful. You should still see 3D buildings on the map. These are the multipatch features you just created.</li>
<li>Right-click the Buildings_MP layer and select Attribute Table. Then answer the following question.</li>
</ol>
<div><p><strong>Question</strong>: What is the shape for the layer you just created?</p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">As you can see, the new layer is a Multipatch shape. It is no longer a polygon. Now let’s see an example of the increased capability a multipatch allows you to have. We will use a tool you are already familiar with, Add Z Information.</p>
<ol start="52">
<li>Close the attribute table for the Buildings_MP layer.</li>
<li>Open the Add Z Information tool in the 3D Analyst Tools and 3D Features Toolset, using the skills you have learned.</li>
<li>Set the Input Features to the Buildings_MP layer. Then look at the Output Property options that are available.</li>
<li>Now set the Input Features to the Buildings layer and notice the Output Property options available for this layer.</li>
<li>Answer the following question:</li>
</ol>
<div><strong>Question</strong>: What is the difference between the two layers when they are set as the Input Features?
<p><strong>Answer</strong>: </p>
</div>
<p style="padding-left: 60px">When you set the Buildings_MP as the Input Features for the Add Z Information tool, you are presented with many output options. You can have the tool calculate the volume of each building, the total surface area, and more. When you set the Buildings layer as the input, you are presented with no options. That is because that layer, though being displayed in 3D, is not a true 3D layer. So the tool will not work with it.</p>
<ol start="57">
<li>If you want, you can run the Add Z Information tool using the Buildings_MP layer as the input and whatever options for the Output Property you want just so you can see the results. If you do, close the Geoprocessing pane when it is complete. If you do not want to try this step, simply close the Geoprocessing pane. </li>
<li>Save your project and close ArcGIS Pro.</li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating 3D features</h1>
                
            
            
                
<p>So far you have learned how to create 3D features from existing 2D features. The first method you learned was creating a new Z-enabled feature class and importing existing 2D features into it. Then, updating the Z coordinates based on a elevation surface. Next, you learned how to convert extruded features into a new multipatch feature class. So how do you create new 3D features from scratch?</p>
<p>Like most things in ArcGIS Pro, there are several methods you can use. You can create new 3D features in either a 2D map or a 3D scene. You can then specify a specific Z coordinate or have them automatically inherit the ground surface elevation.</p>
<p>In this recipe, you will create a few new 3D features. These are based on requests from the Director of Planning for the City of Trippville. For the first, he wants to flesh out the 3D view of the City, so it includes fences. So, you will begin digitizing fences. You will start in a 2D map and then move to the 3D Scene. Next, the Director is concerned about the construction of a new proposed building. He believes it will block the view to one of the main parks in the City from an existing building. So, he needs you to establish a few observation points that you will use in a later recipe to establish sight lines and determine visibility.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>You must have completed the other recipes in this chapter before starting this one. This will ensure you have the required project, maps, scenes, and data to complete this project. It will also confirm you have a good foundational understanding of where to access the required tools and basic concepts required to complete this recipe.</p>
<p>You will also need to ensure the sample data is installed before you continue.  </p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Start ArcGIS Pro and open the <kbd>3DAnalyst.aprx</kbd> project you used in the previous recipes in this chapter. This project should be included in your list of recently opened projects.</li>
<li>Add an existing 2D map that contains the layers you need. Right-click the Maps folder in the Project pane and select Import for the menu.</li>
<li>In the Import window, expand the Computer folder in the left panel.</li>
<li>Select the <kbd>C:</kbd> drive that may be labeled as OS or local drive.</li>
<li>Scroll to the Student folder in the right panel and double-click it.</li>
<li>Double-click the ArcGISProCookbook folder in the right panel.</li>
<li>Scroll down and double-click the Chapter10 folder.</li>
<li>Select the Trippville_2Dd_Map.mapx file and click OK. This is a map file. Importing this file will create a new 2D map in your project.</li>
</ol>
<p style="padding-left: 60px">A new 2D map should be added to your project. You should now see this new map in your map view area of the ArcGIS Pro interface, as shown in the following screenshot:</p>
<div><img class="alignnone size-full wp-image-968 image-border" height="799" src="img/1952bbb4-f354-4102-85bc-e1fe214e2360.png" width="1500"/></div>
<p style="padding-left: 60px">Before you can edit 3D data in a 2D map, you need to ensure it has an elevation surface assigned. Next, you will make sure the new 2D map is using the DEM for the City of Trippville.</p>
<ol start="9">
<li>Save your project.</li>
<li>Right-click the Trippville map at the top of the Contents pane.</li>
<li>Select Properties from the menu that appears.</li>
<li>Select the Elevation Surface option from the left panel of the Map Properties window.</li>
<li>Expand the Elevation sources option.</li>
<li>Click the Add Elevation Source button.</li>
<li>Click the Databases folder in the left panel of the Add Elevation Source window.</li>
<li>Double-click the Trippville_GIS geodatabase in the right panel of the window.</li>
<li>Select the DEM and click OK.</li>
</ol>
<ol start="18">
<li>Verify your Map Properties window looks like the following screenshot and click OK:</li>
</ol>
<div><img class="alignnone size-full wp-image-969 image-border" height="326" src="img/9dd9875b-79e6-4d41-b916-ff5c482c2f77.png" width="521"/></div>
<ol start="19">
<li>Save your project.</li>
</ol>
<p style="padding-left: 60px">You have prepared your 2D Map, so it allows you to edit 3D data by ensuring it has an Elevation Surface assigned to it. Sometimes it is easier to edit 3D data in a 2D map because you are more comfortable with those tools. Now, to digitize a fence.</p>
<ol start="20">
<li>Click the Map tab to activate it in the ribbon.</li>
<li>Click the Bookmark button in the Layer group and select the Fence 1 bookmark. This will zoom you to the area that has two fences you will digitize.</li>
</ol>
<ol start="22">
<li>Zoom in to the parcel indicated in the following screenshot. Zoom in as close as you need to see the fence surrounding the backyard:</li>
</ol>
<div><strong><img height="249" src="img/1bf3d0a6-3ac2-4a84-a641-286d7e6c5d01.png" width="346"/></strong></div>
<ol start="23">
<li>Click the List by Editing button at the top of the Contents pane. It is the one that resembles a pencil.</li>
<li>Ensure the Fence layer is enabled for editing.</li>
<li>Click the Edit tab in the ribbon.</li>
<li>Since the Fence layer is Z-enabled, you need to tell ArcGIS Pro where the Z coordinate will come from when you draw a new fence. You will need to configure the Z mode to do this. Click the small arrow located below the Z Mode button.</li>
<li>Select Surface from the small menu that appears. This should make Ground appear in the cell located to the lower right of the button. This means the Z value for each vertex will be determined based on the ground surface elevation where you click.</li>
</ol>
<div><p>Selecting Constant allows you to manually enter a constant Z value that will be applied to all new Z-enabled features you create. </p>
</div>
<ol start="28">
<li>Click the Create button in the Feature group on the Edit tab. This will open the Create Features pane.</li>
</ol>
<ol start="29">
<li>Select the Fence feature template in the Create Features pane.</li>
<li>Digitize the fence in by clicking at the locations shown in the following screenshot:</li>
</ol>
<div><strong><img height="218" src="img/afb37d6d-5564-4183-84eb-67219a622aee.png" width="323"/></strong></div>
<ol start="31">
<li>Click the Attributes button located in the Selection group on the Edit tab. This will open the Attribute pane. You need to set the height of the fence.</li>
<li>In the Height cell, type <kbd>6</kbd> and press the <em>Enter</em> key to show it is a 6 foot tall fence.</li>
<li>Click the Geometry tab in the Attribute pane and look at the values. Now answer the following question.</li>
</ol>
<div><p>Question: How did the Z values get populated when all you did was click a 2D location in the map?</p>
<p>Answer:</p>
</div>
<p style="padding-left: 60px">As you can see, even though you were creating the Z-enabled fence features in a 2D map, ArcGIS Pro was still able to determine a value for the Z coordinate as well as the X and Y. It did this by comparing the location you clicked to the ground surface and interpolating the Z value for that location. </p>
<ol start="34">
<li>Close the Attributes pane.</li>
<li>Click the Save button in the Manage Edits group on the Edit tab to save your edits. When asked to Save all edits, click Yes.</li>
<li>Click the Clear button in the Selection group to deselect the new fence you just created.</li>
<li>Click the Trippville Buildings scene you have worked with in previous recipes. It should be at the top of the view area.</li>
</ol>
<div><p>If you closed the Trippville Buildings scene, you can reopen it from the Project pane. Simply locate the scene in the Maps folder in the Project pane. Then right-click and select Open Local View.</p>
</div>
<ol start="38">
<li>Activate the Map tab in the ribbon. Then click the Basemap button in the Layer group and select the Imagery basemap.</li>
<li>Click the Add Data button in the Layer group on the Map tab.</li>
<li>Click the <kbd>C:</kbd> drive located under <kbd>Computer</kbd>. Then navigate to the <kbd>C:\Student\ArcGISProCookbook\Chapter10</kbd> folder.</li>
<li>Select the <kbd>Fence_3D</kbd> layer file and click OK. The fence layer should appear in your scene with the symbology already configured.</li>
<li>Click the Bookmarks button and select the Fences 1 bookmark. This will zoom you to the same area you were just working with in your 2D map.</li>
<li>Click the Explore tool and zoom out until you see the house with the pool located to the northwest of the parcel with the fence you just drew.</li>
<li>Zoom in on the house with the pool until your view looks similar to the following screenshot:</li>
</ol>
<div><strong><img height="224" src="img/14b5a64c-0dac-43d3-b991-731a00780d4e.png" width="353"/></strong></div>
<ol start="45">
<li>Click the Edit tab in the ribbon.</li>
<li>Click the drop-down arrow below the Z Mode button and review your options. Answer the following question.</li>
</ol>
<div><p>Question: What options are available for the Z mode in the scene you are working with?</p>
<p>Answer: </p>
</div>
<p style="padding-left: 60px">As you can see, the surface options are grayed out. This is because in a 3D scene, the ground surface is automatically used to determine the Z coordinates for any new features. You do not need to set this when creating new Z-enabled features in a scene like you do in a 2D map.</p>
<ol start="47">
<li>The Create features plane should still be open from when you created the first fence in the 2D map. If not, click the Create button to open it.</li>
<li>Select the Fence feature template and digitize in the new fence, as illustrated in the following screenshot:</li>
</ol>
<div><strong><img height="246" src="img/8e284ad9-d9aa-4fe6-ab9b-e6c14456d52b.png" width="374"/></strong></div>
<p style="padding-left: 60px">The fence may not be visible after you complete it. This is because it has no height. It is running along the ground with all the other non-extruded layers. You will fix that now.</p>
<ol start="49">
<li>Click the Attribute button in the Selection group on the Edit tab. This will open the Attributes pane.</li>
<li>In the Height cell type <kbd>8</kbd> to make the height of the new fence display at eight feet. You should now see the fence in the scene.</li>
<li>Close the Attributes and Create Features panes to free up screen space.</li>
<li>Click the Clear button in the Selection group in the ribbon.</li>
<li>Click the Save button in the Manage Edits group to save the new fence you just created. Again, when asked if you want to save all edits, click Yes.</li>
<li>Activate the Explore tool in the Map tab in the ribbon.</li>
<li>Using the skills you have learned in previous recipes, rotate the view so you can see the new 3D fence you just created. It should look similar to the following graphic:</li>
</ol>
<div><strong><img height="263" src="img/1b45ddca-0f66-48c6-858a-12d105082380.png" width="496"/></strong></div>
<p style="padding-left: 60px">You can see that the fence you created is being displayed in 3D using the Z coordinates for the starting elevation and extrusion to show the height. You are off to a good start with the request from the Planning Director to create and populate a new fence layer. However, he really wants to know whether that proposed new building will create a problem for the existing buildings by blocking their view of the park.</p>
<p style="padding-left: 60px">So, you will move on to conducting a line-of-sight analysis, the first part of which is establishing observation points from the existing buildings. These must be 3D points. You will start by creating a new Z-enabled point feature class. Then you will digitize new observation points from the existing buildings the Planning Director is concerned about. In the next recipe, you will complete the analysis.</p>
<ol start="56">
<li>In the Project pane, expand the Databases folder so you can see its contents.</li>
<li>Right-click the Trippville_GIS geodatabase and go to New. Then select Feature Class, as illustrated in the following screenshot:</li>
</ol>
<div><img class="alignnone size-full wp-image-970 image-border" height="242" src="img/a402bb45-6265-43f8-a9bf-ef8877869f05.png" width="385"/></div>
<ol start="58">
<li>Name the new Feature Class as <kbd>Observ_PT</kbd>.</li>
<li>Set the Geometry Type to Point using the drop-down arrow.</li>
<li>Since this is a completely new feature class, not based on any existing ones, you will not specify a Template Feature Class. So, leave it blank.</li>
<li>Set Has M to No using the drop-down arrow.</li>
<li>Set Has Z to Yes if needed using the drop-down arrow.</li>
<li>Click the wireframe globe next to the Coordinate System to set the coordinate system for the new feature class so that it matches the rest of the Trippville data.</li>
</ol>
<ol start="64">
<li>Click the Add Coordinate System button that looks like a wireframe globe with a green plus sign on it, as shown here. Select Import Coordinate System:</li>
</ol>
<div><img class="alignnone size-full wp-image-971 image-border" height="377" src="img/a74a9f13-1361-40d7-94cd-102cce00d958.png" width="696"/></div>
<ol start="65">
<li>Double-click the Trippville_GIS geodatabase in the right panel of the window.</li>
<li>Select the DEM and click OK to import the coordinate system settings from it to the new feature class you are creating.</li>
</ol>
<ol start="67">
<li>Both a Current XY and Current Z coordinate system should now be set, as illustrated in the following screenshot. If yours matches, click OK:</li>
</ol>
<div><img class="alignnone size-full wp-image-972 image-border" height="390" src="img/2ad3f951-12c7-40b2-8e3f-c04338274995.png" width="453"/></div>
<ol start="68">
<li>Verify your Create Feature Class tool looks like the following and click Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-973 image-border" height="437" src="img/5dfab7af-5e80-4b3f-a86f-cd9243d6c2cb.png" width="627"/></div>
<p style="padding-left: 60px">When the Create Feature Class tool completes, you should see a new layer appear in your Contents pane. This new layer references the new feature class you just created. Now you need to digitize some points into the new layer that represent the observation locations the Planning Director is concerned about.</p>
<ol start="69">
<li>Close the Geoprocessing pane that contains the Create Feature Class tool.</li>
<li>Save your project.</li>
<li>Now you need to zoom to the proposed building location. You will do this by selecting the proposed building and then zooming to it. In the Map tab, click the Select By Attributes button.</li>
<li>Set the Layer Name or Table View to Buildings using the drop-down arrow and ensure the Selection Type is set to New Selection.</li>
<li>Click the Add Clause button to build your SQL query.</li>
<li>Using skills you have learned in the previous recipes, set the Field to Building Status, operator to is Equal too, and Values to Pr-Proposed. Depending on your version of ArcGIS Pro, you may only see Proposed as the displayed value. Then click Add.</li>
<li>Verify your Select Layer by Attribute tool looks like the following and click Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-974 image-border" height="234" src="img/6f3af91f-fbf1-4610-a43c-3974c2e39117.png" width="418"/></div>
<ol start="76">
<li>Close the Geoprocessing pane that contains the Select Layer by Attributes tool.</li>
<li>Right-click the Buildings layer in the Contents pane. Then go to Selection and select Zoom to Selection, as illustrated in the following graphic:</li>
</ol>
<div><img class="alignnone size-full wp-image-975 image-border" height="224" src="img/29839127-2769-45e1-87f7-087a04468e1a.png" width="353"/></div>
<p style="padding-left: 60px">The scene will zoom to the location of the proposed building that is causing all the concern. Your scene should now look similar to the following screenshot. Depending on the size of your monitor and the size of your ArcGIS Pro application, yours may look slightly different:</p>
<div><strong><img height="380" src="img/2475ae51-b42d-406f-bda8-fcc3f95f9a00.png" width="470"/></strong></div>
<div><p>You can still query and zoom to features in a layer that have been turned off so they is not visible.</p>
</div>
<ol start="78">
<li>Using skills you have learned previously, add the Parks feature class located in the Trippville_GIS geodatabase to the scene. This will allow you to see the location of Washington Park, which is located to the northeast of this building. Ensure the Selection Type is set to New selection.</li>
</ol>
<ol start="79">
<li>Zoom and rotate the Trippville Buildings scene you are working in so that you can see the area surrounding the proposed building. Something similar to the following screenshot should work well. You may need to drag the Parks layer to the 2D Layers group in order to see it:</li>
</ol>
<div><img class="alignnone size-full wp-image-976 image-border" height="326" src="img/7ad77645-672e-40f2-a7ed-7d4d2ddc2a56.png" width="484"/></div>
<p style="padding-left: 60px">The proposed building is the lighter gray one near the center of the scene. Washington Park is the light green area to the northeast of the proposed building. Now you need to digitize observation points for the buildings directly south and west of the proposed building.</p>
<ol start="80">
<li>In the Contents pane, click the List by Snapping button. Ensure the Buildings_MP layer is set as snappable.</li>
<li>Click the List by Editing button in the Contents pane. Right-click the Observ_PT layer and select Make this the only editable layer.</li>
<li>Click the Edit tab in the ribbon.</li>
<li>Click the Create button to open the Create Features pane.</li>
</ol>
<ol start="84">
<li>Ensure snapping is turned on and it is set to Edge, Vertex, End Point, and Intersection.</li>
<li>Select the Observ_PT feature template in the Create Features pane.</li>
<li>Click the locations shown in the following screenshot. You may need to zoom in to get the exact locations:</li>
</ol>
<div><img class="alignnone size-full wp-image-977 image-border" height="266" src="img/1c7950e2-a5bb-4afc-bdeb-60512c2eca07.png" width="451"/></div>
<ol start="87">
<li>Click the Map tab in the ribbon and activate the Explore tool.</li>
<li>Rotate your scene so you can see the location of the new points you just digitized. They should be snapped to the tops of their associated buildings.</li>
<li>If they are, click the Edit tab in the ribbon. Then click the Save button to save the new points you just created.</li>
<li>Close the Create Features pane.</li>
<li>Save your project and close ArcGIS Pro.</li>
</ol>
<p>In this recipe, you created several new 3D features. You created two new fence features. The new fences inherited the Z coordinate from the location you clicked using the ground surface as a reference. You then specified a height for each fence that was then used to extrude them, so they displayed at their true height above the ground. Then, you created a completely new Z-enabled feature class to store observation points that you will use in the following recipe to analyze the ability to see Washington Park from those locations. The Z coordinates for those new points were determined by the corner of the buildings you snapped to.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Calculating lines of sight</h1>
                
            
            
                
<p>You've learned several ways to create new 3D features. Now it is time to investigate some analyses you can perform with these features that you cannot do with 2D. A common analysis is to determine lines of sight. This has many uses. It can be used by property appraisers to determine whether a property has a good line of sight to a key feature, such as a river or ocean, which might increase its value. It is used by police to establish security perimeters for special events. It might be used to help plan a parade route. So, as you can see, there are many uses for such an analysis.</p>
<p>In this recipe, you will use the observation points you created in the previous recipe to determine whether there are lines of sight to Washington Park or whether the proposed building will block the view of the park entirely. This will be one of the determining factors the Planning Director will use to for deciding whether or not to approve the new building. This will require the use of several geoprocessing tools from the 3D Analyst extension for ArcGIS Pro.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>You must have completed the other recipes in this chapter before starting this one. This will ensure you have the required project, maps, scenes, and data to complete this project. It will also confirm you have a good foundational understanding of where to access the required tools and basic concepts required to complete this recipe.</p>
<p>You will also need to ensure the sample data is installed before you continue and access to the 3D Analyst extension for ArcGIS Pro. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Start ArcGIS Pro and open the <kbd>3DAnalyst.aprx</kbd> project you used in the previous recipes in this chapter. This project should be included in your list of recently opened projects.</li>
<li>Click the Analysis tab in the ribbon. Then click the Tools button in the Geoprocessing group.</li>
<li>Click the Toolboxes tab in the Geoprocessing pane. Then expand the 3D Analyst Tools toolbox.</li>
<li>Scroll down to the Visibility toolset and expand it so you can see its contents.</li>
<li>Select the Construct Sight Lines tool to open it.</li>
<li>Set the Observation Points to the Observ_PT layer using the drop-down arrow.</li>
<li>Set the Target Features to the Parks layer using the drop-down arrow.</li>
<li>For the Output, click the Browse button and navigate to the Trippville_GIS geodatabase using the skills you have learned from previous recipes. Name the new output feature class Park_Sight_Lines and click Save.</li>
<li>Ensure both the Observer Height Field and Target Height Field are set to Shape.Z.</li>
<li>Set the Sampling Distance to <kbd>200</kbd>.</li>
<li>Verify your Construct Sight Lines tool looks like the following and click Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-978 image-border" height="268" src="img/2804458a-b90f-42df-b6e8-2ea7a090107d.png" width="428"/></div>
<p style="padding-left: 60px">A new layer appears in your scene that represents every possible sight line from the observation point to the park using the interval you specified in the Sampling Distance. This tool ignores any possible obstructions. Next, you will use another tool that will investigate each of the sight lines you created to see whether they are blocked by the ground surface or other obstructions, such as buildings.</p>
<ol start="12">
<li>In the Contents pane, turn off the Park_Sight_Lines layer you just created. You do not need to see the layer to use it for further analysis.</li>
</ol>
<div><p>Turning off layers that you do not need to see for the final results of any analysis process you are pursuing can improve overall performance and reduce map clutter.</p>
</div>
<ol start="13">
<li>Click the Back button in the Geoprocessing pane that contains the Construct Sight Lines tool. This will take you back to the toolboxes view.</li>
<li>Select the Line of Sight tool in the Visibility toolset in the 3D Analyst Tools toolbox.</li>
<li>Click the Browse button for the Input Surface. Navigate to the Trippville_GIS geodatabase and select the DEM. Click OK once the DEM is selected.</li>
<li>Set the Input Line Features to Park_Sight_Lines using the drop-down arrow.</li>
<li>Set the Input features to Buildings_MP using the drop-down arrow.</li>
</ol>
<div><p>The Input Features is a layer that contains additional features you want to the tool to consider that might block the line of sight along the sight lines. This must be a multipatch feature class-based layer.</p>
</div>
<ol start="18">
<li>Name your Output Feature Class <kbd>Buildings_to_Park_LOS</kbd>.</li>
<li>You can leave the Output Obstruction Point Feature Class blank. This would create a new point feature class that shows exactly where the views are obstructed. For this analysis, we are not interested in those exact positions.</li>
<li>Verify your Line of Sight tool looks like the following and click Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-979 image-border" height="290" src="img/c5a8261a-1ed1-4736-b10f-e88ad945038d.png" width="456"/></div>
<p style="padding-left: 60px">When the tool completes, you will see a new layer added that has identified which sight lines are visible and which are not, as shown in the following screenshot. Remember, this tool takes the ground as well as the buildings into account when determining what is visible and what is not:</p>
<div><img class="alignnone size-full wp-image-980 image-border" height="253" src="img/f044a1e8-bb6c-446c-b2ca-d4d0cab99a07.png" width="489"/></div>
<p style="padding-left: 60px">You can now easily see which sight lines are being blocked by the proposed building and which are not. This is the information the Planning Director needed.</p>
<ol start="21">
<li>Close your Geoprocessing pane.</li>
<li>Save your project and close ArcGIS Pro.</li>
</ol>
<p>Now you have performed your first 3D analysis to determine lines of sight from specified points to an existing feature. This required you to have the 3D Analyst extension for ArcGIS Pro. In addition, you had to create several 3D layers before you were able to perform this analysis. This included creating a multipatch layer representing the buildings in Trippville and observation points.</p>
<p>You could have performed this same analysis in a 2D Map. ArcGIS Pro can still perform 3D analysis in a 2D map. However, the results will not be as impactful or informative when displayed in a 2D map.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Calculating the volume of a polygon</h1>
                
            
            
                
<p>Another common 3D analysis task is to calculate the volume of the area covered by a polygon feature. This is done by overlaying the polygon feature across a surface and then calculating the volume that exists between the plane created by the polygon features and the surface they overlay.</p>
<p>In this recipe, you will return to the quarry project you worked on earlier. The project engineer has determined the optimum full pool elevation and created a polygon layer for you. He wants you to determine what the total volume of water will be needed to fill the quarry to this level in gallons.</p>
<p>You will use the Polygon Volume tool that is part of the 3D Analyst extension to accomplish part of this analysis. You will then use the Calculate Field tool to calculate the total gallons required to fill the quarry.  </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>You must have completed the other recipes in this chapter before starting this one. This will ensure you have the project, maps, scenes, and data required to complete this project. It will also confirm you have a good foundational understanding of where to access required tools and basic concepts required to complete this recipe.</p>
<p>You will also need to ensure the sample data is installed before you continue and access to the 3D Analyst extension for ArcGIS Pro.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Start ArcGIS Pro and open the 3DAnalyst.aprx project you used in the previous recipes in this chapter. This project should be included in your list of recently opened projects.</li>
<li>Close all the Trippville maps and scenes. If needed, reopen the Quarry Project scene.</li>
</ol>
<div><p>Remember, you can right-click a map or scene in the Catalog pane to open it.</p>
</div>
<ol start="3">
<li>Now you need to add the Full Pool Layer created by the project engineer. Click the Add Data button located on the Map tab in the ribbon.</li>
<li>Navigate to the <kbd>C:\Student\ArcGISProCookbook\Chapter10</kbd> folder and select the <kbd>Full_Pool_Level.lyrx</kbd> layer file. Click OK. A new layer should have been added to your scene that shows the water level of the quarry when it is filled, as shown in the following screenshot:</li>
</ol>
<div><img class="alignnone size-full wp-image-981 image-border" height="241" src="img/81571a17-9d69-405c-bc14-e735def0fff8.png" width="387"/></div>
<ol start="5">
<li>Click the Analysis tab in the ribbon.</li>
<li>Click the Tools button and the Toolboxes tab in the Geoprocessing pane.</li>
<li>Expand the 3D Analysis Tools toolbox. Then expand the Triangulated Surface toolset.</li>
<li>Click the Polygon Volume tool to open it.</li>
<li>Click the Browse button for the Input Surface.</li>
<li>Expand the Computer folder in the left panel of the Input Surfaces window.</li>
<li>Select the C:\ drive. Then navigate to the Student\ArcGISProCookbook\Databases folder.</li>
</ol>
<ol start="12">
<li>Select quarry_tin and click OK.</li>
</ol>
<div><p>For this tool, the input surface must be a TIN, LAS, or terrain dataset. It will not accept a DEM surface as the input.</p>
</div>
<ol start="13">
<li>Set the Input Features to Full Pool Level using the drop-down arrow.</li>
<li>Set the Height Field to Z_Mean using the drop-down arrow.</li>
<li>Ensure the Reference Plane is set to Calculate below the plane. The plane it is referring to is the one created by the Input Features.</li>
<li>Accept the default values for the Volume and Surface Area Field.</li>
<li>Verify your Polygon Volume tool looks like the following and click Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-982 image-border" height="349" src="img/1b7150cf-597f-4f7a-a78c-3c825f277c17.png" width="473"/></div>
<ol start="18">
<li>Close the Geoprocessing pane when the tool completes successfully.<br/>
This particular tool does not create a new feature class or layer like so many of the other tools you have used. It instead adds two new fields to the attribute table for the input features. You will now examine the results.</li>
</ol>
<ol start="19">
<li>Right-click the Full Pool Level and select Attribute Table. You should see two fields that were added: Volume and SArea.<br/>
The volume is in cubic feet because your horizontal and vertical units for the layer are set to US Feet. The engineer needs to know the volume in US gallons. You will now create a new field to contain the volume in gallons and use the Calculate Field tool to populate it. </li>
</ol>
<ol start="20">
<li>In the Table pane, click the Add Field button. It is located on the top left of the pane.</li>
<li>Name the new field Gallons then press your <em>Tab</em> key to move over to the Data Type.</li>
<li>Set the Data Type to Float using the drop-down arrow. This will allow it to store decimal values.</li>
<li>Verify your table design looks like the following and click the Save button in the Changes group on the Fields tab in the ribbon:</li>
</ol>
<div><strong><img height="270" src="img/566f78e7-d8bc-45cc-b644-68f5c7f2e168.png" width="637"/></strong></div>
<ol start="24">
<li>Close the Design View for the table.</li>
</ol>
<p style="padding-left: 60px">You have just added a new field to the attribute table for the Full Pool Level layer. This new field will be used to store the number of gallons that will be required to fill the quarry.</p>
<ol start="25">
<li>Right-click the Gallons field you just added in the table view and select Calculate Field. The Calculate Field tool will open in the Geoprocessing pane.</li>
</ol>
<ol start="26">
<li>Scroll down so you can see the blank cell just above the words Code Block. You will need to enter the conversion expression here.</li>
<li>Type the following value into that cell: <kbd>!Volume! * 7.48052</kbd>. The number <kbd>7.48052</kbd> is the conversion factor for gallons per cubic foot.</li>
<li>Verify your Calculate Field tool looks like the following and click Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-983 image-border" height="549" src="img/18d06e84-cc0d-4687-9518-925bdee2477e.png" width="519"/></div>
<ol start="29">
<li>When the tool completes successfully, close the Geoprocessing pane.</li>
<li>Review the number that has now been populated into the Gallons field.</li>
<li>Close the Full Pool Level attribute table.</li>
<li>Save your project and close ArcGIS Pro.</li>
</ol>
<p>You have just calculated the volume for an area covered by a polygon. This required you to have two datasets. You needed an elevation surface. The Polygon Volume tool you used required the surface to be in TIN, Terrain or LAS formats. The other dataset you needed was a polygon that formed the plane that was used to overlay the surface. </p>


            

            
        
    </body></html>