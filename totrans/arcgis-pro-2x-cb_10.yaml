- en: 3D Maps and 3D Analyst
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following recipes:'
  prefs: []
  type: TYPE_NORMAL
- en: Creating a 3D scene
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Enabling your data to store Z (elevations)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating Multipatch features from 2D
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating 3D features
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Calculating the volume of a polygon
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Since its beginnings over 50 years ago, GIS has relied on 2D maps. They were
    what we created and where we performed all our analyses. Recently, this is changing.
    More and more, we are having to take the third dimension, Z, into account. This
    is because the world is becoming more crowded. Our infrastructure is stacking
    up upon itself, both above ground and below. So, the need to track and view data
    in 3D is increasing. Supporting technologies, such as **Light Detection and Ranging**
    (**LiDAR**), **Unmanned Aerial Vehicles** (**Drones/UAS/UAV**), and increasing
    computer power are also adding to this push.
  prefs: []
  type: TYPE_NORMAL
- en: As you have seen if you have completed previous recipes in this book, ArcGIS
    Pro is a very powerful tool for visualizing and analyzing data. However, up to
    this point, we have been working in a 2D environment. While we can do a lot in
    2D, it does have limitations because we live in a 3D world. ArcGIS Pro brings
    new 3D capabilities to the table that we have not had in previous desktop GIS
    applications. It natively supports the 3D viewing, querying, and limited analysis
    of data. When you add the 3D Analyst extension, then you open up a whole new world
    of possibilities.
  prefs: []
  type: TYPE_NORMAL
- en: 'Working in 3D provides much better ways to view and manage our infrastructure.
    We can begin to see the true spatial relationships between the features we are
    maintaining, viewing, and analyzing. ArcGIS Pro allows you to create 3D Maps,
    called **Scenes**, using the core application, as illustrated here:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/aa527a58-7554-4525-92dd-0b1eca5da934.png)'
  prefs: []
  type: TYPE_IMG
- en: The preceding scene was created using ArcGIS Pro. You can see the buildings,
    power poles, light poles, and fire hydrants, all depicted in 3D. This allows you
    to see things such as whether a building will be in the way of a power line or
    whether a building will cast a shadow over an area that might prevent certain
    species of plants from growing. If you add the 3D Analyst extension, then you
    can begin to calculate the slope of road or pipe, determine whether one building
    might block the view from another, and more.
  prefs: []
  type: TYPE_NORMAL
- en: 'Don’t limit your 3D thinking or displays to infrastructure. Any data can be
    displayed in 3D. This opens up a whole new way to look at your data, as illustrated
    in the following maps:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/080aea89-33fd-40d8-b1fa-f0f8b4bbae33.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see, these two maps have nothing to do with infrastructure. Instead
    they are highlighting areas with higher and lower values. The use of 3D makes
    those areas with higher and lower values stand out visually even more so than
    using traditional symbology. These maps also illustrate that you can combine traditional
    categorical and quantitative symbology with 3D to produce even more impactful
    maps. This capability is included in the core functionality of ArcGIS Pro.
  prefs: []
  type: TYPE_NORMAL
- en: '*What if I need to do more than visualize data in 3D? What if I need to analyze
    the data so that I can make use of elevational or height information?* Well, we
    have already hinted at that. Esri has an extension for ArcGIS Pro called **3D
    Analyst**. This extension greatly enhances ArcGIS Pro’s ability to work within
    3D. The 3D Analyst extension adds a new toolbox to your arsenal that contains
    11 toolsets and over 100 tools for creating, converting, and analyzing 3D data.
    The 3D Analyst extension is not part of the core ArcGIS Pro product. It must be
    purchased as an additional license. However, it will work with all license levels
    of ArcGIS Pro. To learn more about the 3D Analyst extension, go to [https://www.esri.com/software/arcgis/extensions/3danalyst](https://www.esri.com/software/arcgis/extensions/3danalyst).'
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, you will get an opportunity to explore some of the 3D capabilities
    of ArcGIS Pro. You will start by creating a 3D scene. Then you will learn how
    you can enable your features classes to store Z coordinates like it does *x* and
    *y*. Then you will move on to more advanced concepts and begin to make use of
    the 3D Analyst extension.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a 3D scene
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As we said, ArcGIS Pro allows you to create 3D maps as part of its core functionality
    regardless of license level. So that is what you are about to do. In this scenario,
    you are working for an engineering firm that is working on a project to possibly
    turn a quarry into a water reservoir. The lead engineer on the project has asked
    you to create a 3D map of the area that he will use during a presentation to the
    client. This will help the client and engineer visualize the area as he creates
    his plan.
  prefs: []
  type: TYPE_NORMAL
- en: In ArcGIS Pro, a 3D map is called a **scene**. When creating a new 3D scene,
    one of the first things you need to determine is what data will serve as the ground
    surface. The ground surface becomes the canvas that all 2D layers are draped across.
    Yes, a 3D scene will include both 2D and 3D layers. Typical 2D layers might include
    an aerial photo, parcels, political boundaries, and natural water features. These
    often help put your 3D layers into context. The ground surface can also serve
    as the starting point for displaying the 3D layers. It may provide the starting
    elevation for those features. They are then extruded above or below that surface.
    Esri provides a terrain model that is the default ground surface for any new 3D
    scene. This model is a web service published through ArcGIS Online. You can also
    use your own elevation or terrain data. This can include a Digital Elevation Model
    (**DEM**), **Triangulated Irregular Network** (**TIN**), or other web services.
  prefs: []
  type: TYPE_NORMAL
- en: In this recipe, you will create a simple 3D scene of the project area. This
    scene will include both 2D and 3D layers. You set the elevation source for the
    map that will serve as the ground surface. You will start all this by creating
    a new project that contains a local scene.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This recipe requires the sample data to be installed on the computer. It is
    recommended that you complete the recipes from [Chapter 1](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml),
    *ArcGIS Pro Capabilities and Terminology* before starting this recipe. This will
    ensure you have a better foundational understanding of how to add layers, set
    symbology, and navigate within a map. You can complete this recipe with any ArcGIS
    Pro licensing level.
  prefs: []
  type: TYPE_NORMAL
- en: It is also recommended that you verify your computer hardware is sufficient
    for working with 3D data. This requires more power than working with traditional
    2D Maps. It is recommended that you have at least an i5 or better processor with
    8 GB or more RAM (16 GB if you don’t have a dedicated video card), dedicated video
    card with **Graphics Processing Unit** (**GPU**), and both 4 GB video RAM and
    12 GB of free hard drive space. If you computer does not meet or exceed these
    specifications, you may have issues completing this and other recipes in this
    chapter.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You will start by launching ArcGIS Pro as you have done in previous recipes.
    In the Create a new project panel located on the right side, select `Local_Scene.aptx`,
    as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c4e3d84e-af88-48a8-bab3-48e5cde952f6.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Create a New Project window that appears, name your new project `3DAnalyst`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Browse button at the end of the Location cell. Then in the left panel
    of the Select a folder to store the project window, click Computer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the panel on the right, double-click the `C:` drive. It is sometimes labeled
    as OS or local drive.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll down and double-click the `Student` folder. Then repeat for the `ArcGISProCookbook`
    folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll down and select the `Chapter 10` folder. Do not double-click it. Once
    selected so that `Chapter10` appears as the Name, click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Remember, for this part of creating a new project, you are selecting the location
    where the new project will be stored, not what the project is being named. So
    you must select an existing folder on a local drive or network share. If you double-click
    instead of single-clicking to select, you will need to back up one folder. You
    can do that simply by clicking the Back button located in the left corner. It
    looks like an arrow inside a circle.
  prefs: []
  type: TYPE_NORMAL
- en: 'Verify your Create a New Project window looks like the following and click
    OK:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/55c846df-0465-42fc-8950-b6a77f6f9781.png)'
  prefs: []
  type: TYPE_IMG
- en: You have just created a new project. This new project contains a single local
    scene. Now you will need to add data and folder connections to the project that
    you will need in order to add layers and access data.
  prefs: []
  type: TYPE_NORMAL
- en: In the Catalog pane, right-click the Folders folder and select Add Folder Connection.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the panel on the left of the Add Folder Connection window, select Computer.
    Then double-click the C: drive.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll down and double-click the Student folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the ArcGISProCookbook folder with a single click and click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the Folders folder in the Catalog pane and answer the following question.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Question**: What folders do you see connected to your project?'
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer**:'
  prefs: []
  type: TYPE_NORMAL
- en: You should see that two folders are now connected. The first is your project
    folder. This has the same name as the project you just created. The second folder
    is the connection you just added. If you were to expand the ArcGISProCookbook
    folder connection, you will see all the other folders inside. Adding the connection
    to that folder allows you to access and use data contained in any of those folders
    inside this project. Now you will connect to a couple of databases that you will
    need in this and future recipes.
  prefs: []
  type: TYPE_NORMAL
- en: Right-click the Databases folder in the Catalog pane and select Add Database.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click Folders located under Project in the left panel of the Select Existing
    Geodatabase window. You may need to expand the Project folder to see it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the ArcGISProCookbook folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll down and double-click the Databases folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the AthensQuarry.gdb and click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have just added the connection to the primary database you will be using
    in this recipe. But since you will be using this project for other recipes in
    this chapter, you will go ahead and connect to the Trippville_GIS.gdb geodatabase
    that you will need later.
  prefs: []
  type: TYPE_NORMAL
- en: Repeat that same process to add the Trippville_GIS.gdb geodatabase to the project.
    The one difference being that you need to select the Trippville_GIS.gdb at the
    end before you click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Right-click the Local_Scene.gdb database and click Remove. You will not be using
    that database, so removing it cleans up the project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save your project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: So, you have added the databases and folder connections that you need to the
    project. Now you are ready to begin configuring your 3D scene. You will need to
    first configure some properties for the scene.
  prefs: []
  type: TYPE_NORMAL
- en: In the Contents pane, right-click Scene and select Properties from the menu
    that appears.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the General tab, rename the scene to `Quarry Project`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Display units to US Feet using the drop-down arrow. This project is
    located in Georgia, which is in the southeastern United States.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Elevation Units to the same value.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click Elevation Surface in the left panel of the window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the Elevation sources option located near the bottom of the window. You
    should see the WorldElevation3D/Terrain3D web service listed. This is the default
    surface used for new scenes.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Add your own local Elevation source that is more accurate than the one provided
    by Esri. Click the Add Elevation Source button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Databases folder under Project in the left panel of the Add Elevation
    Source window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the AthensQuarry.gdb geodatabase in the right panel.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select quarry_dem and click OK. This is a digital elevation model that was created
    by a surveyor in the firm you are working at for this project. It is based on
    actual field survey data for the project site.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You should now have two Elevation sources listed for this project. You may also
    see a warning telling you a datum transformation was applied. This is normal because
    your DEM and the Esri web service make use of two different coordinate systems
    and datums.  You can click the Transformation page in the properties if you want
    to learn more.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: It is not unusual for a scene to have more than one Elevation source. It depends
    on the area covered by both the project and local elevation sources. ArcGIS Pro
    treats overlapping elevation sources much like layers in the Contents pane. It
    will use the top one that covers the area in question if two or more of the sources
    overlap. In this case, it will use the local DEM you just added until you reach
    the spatial edge where the DEM ends. Then it will make use of the Esri Terrain
    Model as the source.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Click Coordinate System in the left panel. The engineer wants everything in
    the local state plane coordinate system since that is what the survey data was
    collected in.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Add Coordinate System button and select Import Coordinate System
    as illustrated in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/47ca4b86-cb73-4f8e-ad36-ff90aa1e7eb9.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Import Coordinate System, select quarry_DEM from the right panel. If
    you do not see it, you will need to navigate to the AthensQuarry.gdb geodatabase
    located in the Databases project folder. Click OK once you select quarry_DEM.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You may get a warning about the imported coordinate system. If you do, ignore
    it. You should now have both a Current XY and Current Z coordinate system assigned,
    as illustrated in the following graphic. Click OK if you do to apply these changes
    to the scene''s properties:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e2576e1f-f009-46cf-9659-3f0ea0947033.png)'
  prefs: []
  type: TYPE_IMG
- en: Your scene will change in such a way that the earth will appear to be oblong
    in shape. This is because you have assigned a local coordinate system to your
    map that is designed to preserve the data as much as possible in the project area.
    Now you will add layers to the scene.
  prefs: []
  type: TYPE_NORMAL
- en: Save your project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Add Data button on the Map tab in the Layer group.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the Databases folder and then the AthensQuarry.gdb.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Bldg, HydroLine, HydroPoly, and Parcels feature classes. Click OK
    once you have the feature classes selected.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Holding down your *Ctrl* key while selecting will allow you to select multiple
    feature classes.
  prefs: []
  type: TYPE_NORMAL
- en: The new layers you added should appear in your map as 2D Layers. You will need
    to adjust the draw order for the layers and the symbology.
  prefs: []
  type: TYPE_NORMAL
- en: In the Contents pane, select and drag the Lakes layer so it is above the Parcels.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select and drag the Bldg layer so it is above the Parcels layer as well. It
    can be either above or below the Lakes layer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: All layers should now be visible in your map. No layer should be hiding behind
    another one. Now, let's work on the symbology.
  prefs: []
  type: TYPE_NORMAL
- en: Click the symbol patch located below the Streams layer name. This should open
    the Symbology pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure you are viewing the Gallery by clicking the Gallery tab next the top
    of the pane. Select the Water (line) predefined symbol.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the symbol patch located below the Lakes layer name. Then select the Water
    (area) predefined symbol on the Symbology pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the symbol patch below the Bldg layer name. Then select the Building Footprint
    predefined symbol. If you see more than one, select any one you want to use.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the symbol patch located below the Parcels layer name. Select the Black
    Outline predefined symbol.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close the Symbology pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Your scene should now look like the following graphic. So far, you have created
    a new project that contains a 3D scene. You then configured the source elevation,
    which is the ground surface for the scene, using a local digital elevation model.
    Lastly, you added several layers to the scene. These layers are all being displayed
    as 2D layers, which means they are just being draped across the DEM you specified
    as the elevation source:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![](img/157b5c3a-4be1-4450-bd6e-7898caa36d63.png)'
  prefs: []
  type: TYPE_IMG
- en: Now it's time to make one of the 2D layers a 3D layer. This is fairly easy to
    do.
  prefs: []
  type: TYPE_NORMAL
- en: Select the Bldg layer in the Contents pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Drag and drop it on the 3D Layers in the list. The 3D Layers will highlight
    in blue when your mouse pointer is on top of it. This is the indication to release
    your mouse button. The Bldg layer should now appear under 3D Layers indicating
    it is now a 3D layer. This means you will be able to display the buildings as
    3D objects in the scene.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the Extrusion group, click the drop-down arrow located below Type. Select
    Min Height, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/83cfba5a-ad7e-4f2f-b4ad-3c99be32116a.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In the cell located next to the Type option, click the drop-down arrow and
    select [Est_HGT] from the list, as illustrated in the following graphic. This
    is a field from the attribute table for the Bldg layer:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a311c93b-a814-430d-8926-a261910a81dd.png)'
  prefs: []
  type: TYPE_IMG
- en: You have just extruded the building in the Bldg layer based on a field in the
    attribute table that has each building's estimated height. Let’s look at the results
    of your work so you can see the buildings are indeed 3D.
  prefs: []
  type: TYPE_NORMAL
- en: Place your mouse pointer on the southern side of the scene; anywhere on the
    southern side will work.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Press the scroll wheel located in the center of your mouse. While holding it
    down, push the mouse away from you. This should rotate the scene around the *z*
    axis. Rotate it until you can begin to see the building heights above the ground
    and 2D layers. Then release your scroll wheel.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Roll your scroll wheel so that you zoom in closer, so you can see the buildings
    and verify they are being shown above the ground and 2D layers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Your scene should look similar to the following screenshot. Yours might be
    a little different depending on how far you rotated the scene along the Z axis
    and how much you zoomed in:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/7d4e65f9-e6af-4f59-a364-fcbe4163be89.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Map tab in the ribbon. Then click the drop-down arrow located in the
    Layer group. Select the Imagery basemap from the list provided. This provides
    a more realistic 3D view of the quarry project area.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you do not see the Imagery basemap, it may be that you are not connected
    to ArcGIS Online or are connected to your organization's portal for ArcGIS. If
    possible, connect to ArcGIS Online using your login details. If you are not able
    to, skip to *Step 57*.
  prefs: []
  type: TYPE_NORMAL
- en: Save your project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Continue to navigate through the scene. Try zooming in and out, panning, and
    rotating along all axes. Make sure to examine the area around the quarry. You
    should be able to see all the piles of rock and the quarry pit itself in detail,
    as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/d727bd1e-7bcb-4c67-a01b-f12dcef3af65.png)'
  prefs: []
  type: TYPE_IMG
- en: If you use a trackball or touch pad on a laptop, you can also use the compass
    located in the lower-left corner to navigate in the scene. Simply clicking the
    ring with your pointer will pan the view. If you click the arrow located in the
    upper-left corner of the compass, you can access more controls.
  prefs: []
  type: TYPE_NORMAL
- en: When you are done exploring the scene, right-click the Bldg layer in the Contents
    pane and select Zoom to layer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save your project and close ArcGIS Pro.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have just created a very basic 3D Scene using the core functionality found
    in ArcGIS Pro. What you just did can be accomplished at all license levels of
    ArcGIS Pro and does not require any extensions. If you want to learn more about
    creating 3D Scenes in ArcGIS Pro, you may want to examine *Chapter 5*, *Creating
    3D Maps*, in *Learning ArcGIS Pro* by Tripp Corbin, GISP from Packt Publishing
    and watch the author's YouTube video on creating 3D maps with ArcGIS  Pro: [https://www.youtube.com/watch?v=CRWE-CXO58s&t=58s](https://www.youtube.com/watch?v=CRWE-CXO58s&t=58s).
  prefs: []
  type: TYPE_NORMAL
- en: Enabling your data to store Z coordinates (elevation)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In [C](b6f25e84-28a9-4d2d-aaca-3550460d4650.xhtml)hapter 2, *Creating and storing
    data*, we learned that vector data, points, lines, and polygons store data using
    the X and Y coordinates for the features. This determines their location, which
    is then displayed in a map. We expanded on that in [Chapter 6](9a0a5ec0-c176-44bf-a5d0-fdffb73c78a5.xhtml),
    *Projections and Coordinate System Basics*, where we learned those X and Y coordinates
    were referencing locations in a specific, real-world coordinate system that ties
    our data to the Earth. This allowed us to bring data from all over into our maps,
    so we could see their spatial relationships. ArcGIS Pro will project data that
    is in different coordinate systems on the fly, so they are displayed together.
     However, that only represents two dimensions.
  prefs: []
  type: TYPE_NORMAL
- en: Can you enable data in ArcGIS Pro to store Z, the third dimension? Of course
    you can. You typically do this when you first create the feature class or shapefile.
    Some formats, such as an AutoCAD DWG and DXF file, are always Z-enabled. The 3D
    Analyst extension for ArcGIS Pro also has tools that allow you to convert existing
    2D data to 3D Z-enabled data.
  prefs: []
  type: TYPE_NORMAL
- en: In this recipe, you will continue to work with the data for the quarry project
    you used in the last recipe. The engineer is now concerned about the nearby airport.
    He needs to see the runways in relation to the quarry and may need to make calculations
    concerning runoff from the quarry to those runways. He has acquired a shapefile
    that contains the location of runways, taxi ranks, and parking areas at the airport.
    However, they are not Z-enabled. You will create a new feature class in the `Athens_Quarry`
    geodatabase that is Z-enabled. Then, you will import the data from the shapefile
    into it. Lastly, you will calculate the elevation of the features based on the
    Digital Elevation Model you selected as the ground elevation in the previous recipe.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This recipe requires the sample data to be installed on the computer. You will
    need to have completed the previous recipe before starting this one. You will
    also need to have the 3D Analyst extension to complete this recipe.
  prefs: []
  type: TYPE_NORMAL
- en: 'To determine whether you have access to the 3D Analyst extension, open ArcGIS
    Pro. Then, open any project you have previously opened. Click the Project tab
    in the ribbon. Click the Licensing option in the left panel of the Project pane.
    This will tell you what license level and extensions you currently have access
    to, as illustrated in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ab5e6509-9ad3-4d23-9f37-0181fa2c4c76.png)'
  prefs: []
  type: TYPE_IMG
- en: If you do not have access to the 3D Analyst extension, first contact your administrator
    to see whether they can provide one for you. If you do not have a license for
    this extension, you can request a trial license from Esri at [https://www.esri.com/arcgis/trial](https://www.esri.com/arcgis/trial).
  prefs: []
  type: TYPE_NORMAL
- en: This recipe can be completed with any license level of ArcGIS Pro, as long as
    you have the 3D Analyst extension.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Start ArcGIS Pro and open the `3D Analyst` project you created in the previous
    recipe. It should be in your list of recently opened projects.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure the QuarryProject scene you created in the previous recipe is open. If
    not, open it from the Catalog pane by right-clicking it and selecting Open Local
    View.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the Catalog pane, expand the Database folder. Right-click the AthensQuarry.gdb
    geodatabase. Then, go to New and Feature Class, as shown in the following screenshot.
    This will open the Create New Feature Class geoprocessing tool in the Geoprocessing
    pane:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/fb736aa8-de58-4c3c-b6c9-ef4aef0c6a09.png)'
  prefs: []
  type: TYPE_IMG
- en: Feature Class Location should automatically be set because you right-clicked
    the geodatabase where you are creating the new feature class. Type `Airport_Runways`
    into the feature class name.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Verify the Geometry type is set to Polygon. If is it not, select it using the
    drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For Template Feature Class, click the Browse button located to the far right
    of the cell. It looks like a yellow folder with a black plus sign on it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Folder folder located under Project in the left panel of the Template
    Feature Class window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the 3DAnalyst folder that appears in the right panel of the window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You should now see at least two geodatabases and two shapefiles in this folder.
    Select Airport.shp and click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set Has M to No using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure Has Z is set to Yes. If not, use the drop-down arrow to set it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Wireframe globe located to the right of the Coordinate System. This
    will open the Coordinate System window so you can set both the horizontal (XY)
    and vertical (Z) coordinate systems the new feature class will use.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the wireframe globe with a green plus sign located to the right of the
    XY Coordinate Systems Available and select Import Coordinate System, as illustrated
    here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/55f807b3-c7ef-47d6-9219-c341b756f0ee.png)'
  prefs: []
  type: TYPE_IMG
- en: Select the Databases folder under Project in the left panel of the Import Coordinate
    System window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the AthensQuarry.gdb geodatabase in the right panel of the window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select quarry_DEM and click OK. You may get a warning about the Imported Coordinate
    System. If you do, ignore it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Your Current XY should now be set to the NAD_1983_StatePlane_Georgia_West_FIPS_1002_Feet
    horizontal coordinate system and the Current Z set to the NAVD88_height_(ftUS)
    vertical coordinate system. If it is, click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify your Create Feature Class tool looks like the following and click Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b31b21be-9e48-4ac1-99cd-cb124a499281.png)'
  prefs: []
  type: TYPE_IMG
- en: When the tool completes, a new layer should appear in the QuarryProject Scene.
    This new layer references the new feature class you just created. This new feature
    class will not only store the X and Y coordinates for all the features it contains
    but it will allow you to store the Z coordinates as well. Since this is a brand-new
    feature class, it is currently empty. You will next import the features that are
    in the shapefile you used as the Template Feature Class when you created the new
    feature class. You will use the Append tool to do this.
  prefs: []
  type: TYPE_NORMAL
- en: In the Geoprocessing pane, click the Back button located in the upper-left corner.
    This will take you back to either your favorites, Toolboxes, or Portal.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you closed the Geoprocessing pane when the Create New Feature Class tool
    completed, you can easily reopen it by going to the Analysis tab in the ribbon
    and clicking the Tools button in the Geoprocessing group.
  prefs: []
  type: TYPE_NORMAL
- en: Click the Toolboxes tab at the top of the Geoprocessing pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll down the list of toolboxes to the Data Management Tools toolbox and expand
    it so you can see its contents.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the General toolset. Notice the various tools included in this toolset.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Append tool to open it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For the Input Dataset, click the Browse button located to the right.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Folders folder under Project in the left panel of the Input Datasets
    window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the 3DAnalyst folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Airport.shp shapefile and click OK. This will set the dataset you
    want to add or import into the target dataset.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Target Dataset to Airport_Runways using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You had to use the Browse button to set the Input Dataset because the Airport.shp
    shapefile was not already a layer in your map. The drop-down arrows only list
    existing layers or tables included in the active map or scene.
  prefs: []
  type: TYPE_NORMAL
- en: Since you used the shapefile as the template for the new Airport_Runways feature
    class, you should be able to leave the Schema Type set to `Input Schema must match
    target schema`. The schemas for the input and target should be the same.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Since the Airport_Runways feature class does not include subtypes, you can
    leave that parameter blank. Verify your Append tool looks like the following and
    click Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/1c9489c9-37fa-410e-b20a-370ef7746c6a.png)'
  prefs: []
  type: TYPE_IMG
- en: For those that might have used ArcMap in the past, you may have used the Simple
    Data Loader or Load Object tools to accomplish this task. ArcGIS Pro 2.1 and earlier
    versions do not include that functionality. The author is not sure if or when
    Esri will add those tools to ArcGIS Pro.
  prefs: []
  type: TYPE_NORMAL
- en: When the Append tool completes, it will have copied the features from the shapefile
    to the Airport_Runways feature class. You will not be able to see them because
    their Z coordinate is still currently set to `0` because the shapefile was a 2D
    shapefile. Next, you will need to calculate a Z coordinate for each vertex associated
    with the features in the new feature class.
  prefs: []
  type: TYPE_NORMAL
- en: You will use a tool from the 3D Analyst extension that will calculate the *z*
    for the vertices based on where it lies in relation to the DEM you set as the
    ground surface.
  prefs: []
  type: TYPE_NORMAL
- en: Click the Back button in the Geoprocessing pane that has the Append tool open.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Toolboxes tab at the top of the pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the 3D Analyst toolbox so you can see its contents.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the 3D Features toolset.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll down the list of tools until you come to the Update Feature Z tool. Click
    this tool to open it. This tool will calculate the Z coordinates of features based
    on an input surface.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Input Features to Airport_Runways using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Browse button for the Input Surface.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Input Surface window, click Databases in the panel on the left located
    under Project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the AthensQuarry.gdb geodatabase in the right panel.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select quarry_DEM in the same panel and click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: ArcGIS Pro will automatically determine which Interpolation Method it believes
    is best. Accept the one determined by ArcGIS Pro.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The Status Field will be left blank. You can use this field to track which features
    are not updated with new Z coordinate values. This is typically because the features
    do not overlap the surface. In this case, all the features in the Input Features
    layers overlap the Input Surface for the project area so there is no need to be
    concerned. There are parts of some of the runway features that are outside the
    project area, but those are not a concern.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify your Update Feature Z tool looks like the following and click Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/68c5c03c-f41d-4cae-9d22-f927c3a701e1.png)'
  prefs: []
  type: TYPE_IMG
- en: Once the tool completes, you should start to see parts of the Airport_Runways
    layers. It maybe partially hidden by the World Imagery basemap. This is because
    both are at the same elevation. Not being able to see the entirety of the features
    on the layer is not a big concern. The fact that you can see some of them where
    before you could not see any is proof you successfully added the Z coordinates
    to the features in the layer.
  prefs: []
  type: TYPE_NORMAL
- en: However, we will further verify the success of the tool by using another tool
    that will add and calculate several attribute fields that are based on the 3D
    characteristics of the feature. This is the Add Z Information tool that is also
    included in the 3D Analyst extension.
  prefs: []
  type: TYPE_NORMAL
- en: Save your project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Geoprocessing pane that contains the Update Feature Z tool you just used,
    click the Back button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If needed, click the Toolboxes tab in the Geoprocessing pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the 3D Analyst Tools toolbox to see its contents.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the 3D Features Toolset. Then click the Add Z Information Tool to open
    it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Input Features to Airport_Runways using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Under the Output Property options, select the following:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Lowest Z
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
- en: Highest Z
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Average Z
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Average Slope
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Verify your Add Z Information tool looks like the following and click Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/68c5c03c-f41d-4cae-9d22-f927c3a701e1.png)'
  prefs: []
  type: TYPE_IMG
- en: Fields for the properties you checked in the Add Z Information tool should now
    be added to the attribute table for Airport_Runways along with the appropriate
    values. Now, to verify that the tools worked.
  prefs: []
  type: TYPE_NORMAL
- en: Close the Geoprocessing pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Right-click the Airport_Runways layer and select Attribute Table from the menu
    that appears. Then answer the following questions.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Question**: What fields did the Add Z Information tool add to the attribute
    table?'
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer**:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Question**: Did the Update Feature Z tool work?'
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer**:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Question**: How can you tell whether it did or did not work?'
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer**:'
  prefs: []
  type: TYPE_NORMAL
- en: Hopefully you were able to pick out the four fields that were added to the attribute
    table for the Airport_Runways layer. These correspond to the options you selected
    in the tool. The values stored in these newly added fields allow you to see that
    the Update Feature Z tool was successful except for the two features that extended
    beyond the project area.
  prefs: []
  type: TYPE_NORMAL
- en: Save your project and close ArcGIS Pro.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have just created a new Z-enabled feature class and imported data from a
    2D shapefile into it. You then used the Update Feature Z to calculate the Z coordinates
    for all the vertices for the features in the new feature class you created. You
    then used the Add Z Information tool to verify that the Z coordinates had been
    successfully added.
  prefs: []
  type: TYPE_NORMAL
- en: Creating multipatch features from 2D
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In working through the recipes in this chapter, you have learned how to display
    2D data in 3D and how to create basic Z-enabled layers. All of these methods for
    working in 3D open the door to a wealth of capabilities within ArcGIS Pro from
    display to analysis. However, they all still have limitations. Extruding 2D data
    to display in 3D does allow us to see those features and their relationships in
    three dimensions compared to other features, but we are not able to easily calculate
    volumes or locate a position vertically within the extruded feature. Adding Z
    coordinates to a point, line, or polygon allows us to place it in the correct
    space but again they still only form a single plane. What do we need to create
    a solid shape (meaning something that has volume)? There is a more advanced 3D
    data format that is supported in ArcGIS Pro that allows for this. It is called
    **Multipatch**.
  prefs: []
  type: TYPE_NORMAL
- en: Multipatch is a true 3D object. It is constructed using a series of planes or
    polygons that are drawn in a 3D environment. They are connected together to form
    a 3D feature.  The planes or polygons that form the feature are also called **patches**.
    Thus, the term multipatch. ArcGIS Pro is not the only application that allows
    for the display and creation of Multipatch features. Most **computer-aided drafting
    and design** (**CADD**) software also can be used to create multipatch features.
     Because of the complexity of a multipatch feature, you are often able to show
    more detail than what you can accomplish with simple extrusion. Multipatch feature
    classes also increase the number of analysis tools you can use from the 3D Analyst
    extension for calculating line of sight and more.
  prefs: []
  type: TYPE_NORMAL
- en: The City Planner for the City of Trippville wants to incorporate line of sight
    requirements into the development regulations for the City. He will want to see
    whether new buildings will adversely impact the views of existing buildings to
    key elements, such as parks and rivers, in the City. Many of these types of calculations
    require the use of multipatch features. In this recipe, you will convert the building
    footprints from extruded buildings to a new multipatch feature class.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To complete this recipe, you will need access to the 3D Analyst extension for
    ArcGIS Pro. You will need to have completed the other recipes in this chapter
    and ensure the sample data is installed before you continue.  This recipe can
    be completed with all license levels of ArcGIS Pro.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Start ArcGIS Pro and open the `3DAnalyst.aprx` project you used in the previous
    recipes in this chapter. This project should be included in your list of recently
    opened projects.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Catalog pane, right-click the Maps folder and select New Scene.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: A new scene should open in the view area. Unless you have changed the default
    options, the new scene will display in the Global view. Since you are working
    with a single small city, you need to change it to a local view. Click the View
    tab in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Local button located in the View group. This will change your scene
    to be a local view, as illustrated in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/136d9eb3-c7dd-48e5-a9c7-54215b6bded1.png)'
  prefs: []
  type: TYPE_IMG
- en: Scenes will either be global or local. Global scenes are used for large area
    3D maps where the curvature of the earth can impact the display and analysis of
    the data. Local scenes are for smaller areas such as a City, Township, or County.
    In these cases, the curvature of the earth has less impact due to the scale of
    the 3D map. Local scenes most often make use of a projected coordinate system,
    whereas Global uses a geographic. For more information about global and local
    scenes, go to [http://pro.arcgis.com/en/pro-app/help/mapping/map-authoring/scenes.htm](http://pro.arcgis.com/en/pro-app/help/mapping/map-authoring/scenes.htm).
  prefs: []
  type: TYPE_NORMAL
- en: Set the elevation source, which will be the surface for this new scene. Right-click
    the Scene in the Contents pane and select Properties from the menu that appears.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click Elevation Surface in the left panel of the Map Properties window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the Elevation sources option in the middle of the right panel of the
    window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Add Elevation Source button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Databases folder on the left panel of the Add Elevation Source window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the Trippville_GIS.gdb geodatabase in the right panel.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select DEM and click OK to assign this as an elevation source. You may receive
    a warning that a datum transformation was applied. This is because the DEM and
    the Esri default terrain surface use different horizontal and vertical datums.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now remove the Esri Terrain as an Elevation source because it is not
    needed. Click the small red X located to the right of the Esri WorldElevation3D
    service, as indicated here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b06cd007-68e1-4a87-a835-98eda5dd020b.png)'
  prefs: []
  type: TYPE_IMG
- en: Set the Surface color to No Color using the drop-down arrow. This will allow
    you to see layers below the surface.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the coordinate system for the scene. Click the Coordinate System option
    in the left panel of the Map Properties window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Add Coordinate System button that looks like a small wireframe globe
    with a green plus symbol on it, located on the right side of the window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select Import Coordinate System from the menu that appears.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select DEM in the right panel of the window and click OK. If you do not see
    the DEM listed, use the skills you have learned to navigate to the Trippville_GIS
    geodatabase in the project. You may again see the warning about the imported coordinate
    system. If you do, ignore it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the General option in the left panel of the window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Name the Scene Trippville Buildings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Elevation Units to US Feet using the drop-down arrow and click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Your map view may now appear empty after you click OK. Do not worry if it does.
    This is normal. When you add layers, you will see the basemap and newly added
    layers displayed in the view.
  prefs: []
  type: TYPE_NORMAL
- en: The new scene is ready to begin adding layers. You will add a few layers to
    the new scene now.
  prefs: []
  type: TYPE_NORMAL
- en: Save your project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Just a reminder, you should save your projects often because ArcGIS Pro does
    not have an autosave option for projects. Working with 3D scenes requires a lot
    more resources than 2D Maps. This makes them more prone to crashing and failure.
    To allow you to quickly recover if this happens, save your project any time you
    have made major changes to it, such as adding and configuring a new scene.
  prefs: []
  type: TYPE_NORMAL
- en: Click the Add Data button in the Layer group on the Map tab in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Databases folder on the left panel of the Add Data window under Project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the Trippville_GIS geodatabase in the right panel.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the Base feature dataset.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Buildings and Parcels feature classes. Hold your *Ctrl* key down
    to select both. Click OK once both are selected.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The two layers are added as 2D layers to your scene. If your map view was blank,
    it should now display the two layers you just added along with your basemap. Now
    we will work on adjusting the symbology for both layers.
  prefs: []
  type: TYPE_NORMAL
- en: Click the small symbol patch located below the Parcels layer name in the Contents
    pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Symbology pane that appears, ensure you are looking at the Gallery. The
    Gallery contains preconfigured symbols. Scroll down until you find the Black Outline
    (1pt) symbol and select it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the small symbol patch located below the Buildings layer in the Contents
    pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll down through the list of symbols until you come to the dark gray Building
    Footprint symbol that is in Category 3\. Select that symbol for your buildings
    layer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you hover your mouse pointer over a symbol in the Symbology pane, you will
    see information about the symbol including its name, the style in which it is
    stored, and its category. Also at the top of the Symbology pane is a Search function
    that you can use to locate predefined symbols based on a keyword. For example,
    you could have searched Building and it would have returned all symbols that are
    associated with buildings, including the one you were looking for.
  prefs: []
  type: TYPE_NORMAL
- en: Close the Symbology pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Right-click the Buildings layer in the Contents pane and select Zoom to Layer.
    You scene should now look very similar to the following screenshot. The scale
    may be different, depending on the size of your monitor and your resolution:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8b73c1ad-8b52-40f0-ae5a-de4b8a69cd83.png)'
  prefs: []
  type: TYPE_IMG
- en: Drag and drop the Buildings layer from the 2D Layers to the 3D Layers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save your project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Appearance tab in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the drop-down arrow below Type in the Extrusion group. Select Max Height
    from the list presented.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure the Unit is set to US Feet.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Extrusion Expression cell located to the right of the Type button, click
    the drop-down arrow and select the [Est_HGT] field from the list. This will extrude
    the buildings based on their estimated height stored in the attribute table for
    the layer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Using the skills you learned in the first recipe of this chapter, *Creating
    a 3D map*, zoom in on the downtown area and rotate your scene so it looks similar
    to the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/d75a2502-53eb-4cb1-8fdf-f64a991bd6b5.png)'
  prefs: []
  type: TYPE_IMG
- en: You can now see the buildings extruded to their estimated height. While they
    look 3D, they are still just 2D features that are being artificially expanded
    along the *z* axis to appear 3D. Now you will convert them to 3D Multipatch features.
  prefs: []
  type: TYPE_NORMAL
- en: Click the Analysis tab in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Tools button on the Geoprocessing group to open the Geoprocessing
    pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Toolboxes tab in the Geoprocessing pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the 3D Analyst Tools toolbox.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the Conversion toolset and select the Layer 3D to Feature Class tool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Input Feature Layer to Buildings using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Browse button for the Output Feature Class.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Databases folder under Project in the left panel of the Output Feature
    Class window. Double-click the Trippville_GIS geodatabase.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Type Buildings_MP for the Name. Click Save.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify your Layer 3D to Feature Class tool looks like the following and click
    Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b92ac3b6-359d-4669-aa6d-6cbb3bc67332.png)'
  prefs: []
  type: TYPE_IMG
- en: Turn off the Buildings layer to confirm your conversion was successful. You
    should still see 3D buildings on the map. These are the multipatch features you
    just created.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Right-click the Buildings_MP layer and select Attribute Table. Then answer the
    following question.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Question**: What is the shape for the layer you just created?'
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer**:'
  prefs: []
  type: TYPE_NORMAL
- en: As you can see, the new layer is a Multipatch shape. It is no longer a polygon.
    Now let’s see an example of the increased capability a multipatch allows you to
    have. We will use a tool you are already familiar with, Add Z Information.
  prefs: []
  type: TYPE_NORMAL
- en: Close the attribute table for the Buildings_MP layer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Open the Add Z Information tool in the 3D Analyst Tools and 3D Features Toolset,
    using the skills you have learned.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Input Features to the Buildings_MP layer. Then look at the Output Property
    options that are available.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now set the Input Features to the Buildings layer and notice the Output Property
    options available for this layer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Answer the following question:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Question**: What is the difference between the two layers when they are set
    as the Input Features?'
  prefs: []
  type: TYPE_NORMAL
- en: '**Answer**:'
  prefs: []
  type: TYPE_NORMAL
- en: When you set the Buildings_MP as the Input Features for the Add Z Information
    tool, you are presented with many output options. You can have the tool calculate
    the volume of each building, the total surface area, and more. When you set the
    Buildings layer as the input, you are presented with no options. That is because
    that layer, though being displayed in 3D, is not a true 3D layer. So the tool
    will not work with it.
  prefs: []
  type: TYPE_NORMAL
- en: If you want, you can run the Add Z Information tool using the Buildings_MP layer
    as the input and whatever options for the Output Property you want just so you
    can see the results. If you do, close the Geoprocessing pane when it is complete.
    If you do not want to try this step, simply close the Geoprocessing pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save your project and close ArcGIS Pro.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Creating 3D features
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: So far you have learned how to create 3D features from existing 2D features.
    The first method you learned was creating a new Z-enabled feature class and importing
    existing 2D features into it. Then, updating the Z coordinates based on a elevation
    surface. Next, you learned how to convert extruded features into a new multipatch
    feature class. So how do you create new 3D features from scratch?
  prefs: []
  type: TYPE_NORMAL
- en: Like most things in ArcGIS Pro, there are several methods you can use. You can
    create new 3D features in either a 2D map or a 3D scene. You can then specify
    a specific Z coordinate or have them automatically inherit the ground surface
    elevation.
  prefs: []
  type: TYPE_NORMAL
- en: In this recipe, you will create a few new 3D features. These are based on requests
    from the Director of Planning for the City of Trippville. For the first, he wants
    to flesh out the 3D view of the City, so it includes fences. So, you will begin
    digitizing fences. You will start in a 2D map and then move to the 3D Scene. Next,
    the Director is concerned about the construction of a new proposed building. He
    believes it will block the view to one of the main parks in the City from an existing
    building. So, he needs you to establish a few observation points that you will
    use in a later recipe to establish sight lines and determine visibility.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You must have completed the other recipes in this chapter before starting this
    one. This will ensure you have the required project, maps, scenes, and data to
    complete this project. It will also confirm you have a good foundational understanding
    of where to access the required tools and basic concepts required to complete
    this recipe.
  prefs: []
  type: TYPE_NORMAL
- en: You will also need to ensure the sample data is installed before you continue.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Start ArcGIS Pro and open the `3DAnalyst.aprx` project you used in the previous
    recipes in this chapter. This project should be included in your list of recently
    opened projects.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Add an existing 2D map that contains the layers you need. Right-click the Maps
    folder in the Project pane and select Import for the menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Import window, expand the Computer folder in the left panel.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the `C:` drive that may be labeled as OS or local drive.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll to the Student folder in the right panel and double-click it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the ArcGISProCookbook folder in the right panel.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll down and double-click the Chapter10 folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Trippville_2Dd_Map.mapx file and click OK. This is a map file. Importing
    this file will create a new 2D map in your project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'A new 2D map should be added to your project. You should now see this new map
    in your map view area of the ArcGIS Pro interface, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1952bbb4-f354-4102-85bc-e1fe214e2360.png)'
  prefs: []
  type: TYPE_IMG
- en: Before you can edit 3D data in a 2D map, you need to ensure it has an elevation
    surface assigned. Next, you will make sure the new 2D map is using the DEM for
    the City of Trippville.
  prefs: []
  type: TYPE_NORMAL
- en: Save your project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Right-click the Trippville map at the top of the Contents pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select Properties from the menu that appears.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Elevation Surface option from the left panel of the Map Properties
    window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the Elevation sources option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Add Elevation Source button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Databases folder in the left panel of the Add Elevation Source window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Double-click the Trippville_GIS geodatabase in the right panel of the window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the DEM and click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify your Map Properties window looks like the following screenshot and click
    OK:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9dd9875b-79e6-4d41-b916-ff5c482c2f77.png)'
  prefs: []
  type: TYPE_IMG
- en: Save your project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have prepared your 2D Map, so it allows you to edit 3D data by ensuring
    it has an Elevation Surface assigned to it. Sometimes it is easier to edit 3D
    data in a 2D map because you are more comfortable with those tools. Now, to digitize
    a fence.
  prefs: []
  type: TYPE_NORMAL
- en: Click the Map tab to activate it in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Bookmark button in the Layer group and select the Fence 1 bookmark.
    This will zoom you to the area that has two fences you will digitize.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Zoom in to the parcel indicated in the following screenshot. Zoom in as close
    as you need to see the fence surrounding the backyard:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**![](img/1bf3d0a6-3ac2-4a84-a641-286d7e6c5d01.png)**'
  prefs: []
  type: TYPE_NORMAL
- en: Click the List by Editing button at the top of the Contents pane. It is the
    one that resembles a pencil.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure the Fence layer is enabled for editing.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Edit tab in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Since the Fence layer is Z-enabled, you need to tell ArcGIS Pro where the Z
    coordinate will come from when you draw a new fence. You will need to configure
    the Z mode to do this. Click the small arrow located below the Z Mode button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select Surface from the small menu that appears. This should make Ground appear
    in the cell located to the lower right of the button. This means the Z value for
    each vertex will be determined based on the ground surface elevation where you
    click.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Selecting Constant allows you to manually enter a constant Z value that will
    be applied to all new Z-enabled features you create.
  prefs: []
  type: TYPE_NORMAL
- en: Click the Create button in the Feature group on the Edit tab. This will open
    the Create Features pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Fence feature template in the Create Features pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Digitize the fence in by clicking at the locations shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**![](img/afb37d6d-5564-4183-84eb-67219a622aee.png)**'
  prefs: []
  type: TYPE_NORMAL
- en: Click the Attributes button located in the Selection group on the Edit tab.
    This will open the Attribute pane. You need to set the height of the fence.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Height cell, type `6` and press the *Enter* key to show it is a 6 foot
    tall fence.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Geometry tab in the Attribute pane and look at the values. Now answer
    the following question.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Question: How did the Z values get populated when all you did was click a 2D
    location in the map?'
  prefs: []
  type: TYPE_NORMAL
- en: 'Answer:'
  prefs: []
  type: TYPE_NORMAL
- en: As you can see, even though you were creating the Z-enabled fence features in
    a 2D map, ArcGIS Pro was still able to determine a value for the Z coordinate
    as well as the X and Y. It did this by comparing the location you clicked to the
    ground surface and interpolating the Z value for that location.
  prefs: []
  type: TYPE_NORMAL
- en: Close the Attributes pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Save button in the Manage Edits group on the Edit tab to save your
    edits. When asked to Save all edits, click Yes.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Clear button in the Selection group to deselect the new fence you
    just created.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Trippville Buildings scene you have worked with in previous recipes.
    It should be at the top of the view area.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you closed the Trippville Buildings scene, you can reopen it from the Project
    pane. Simply locate the scene in the Maps folder in the Project pane. Then right-click
    and select Open Local View.
  prefs: []
  type: TYPE_NORMAL
- en: Activate the Map tab in the ribbon. Then click the Basemap button in the Layer
    group and select the Imagery basemap.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Add Data button in the Layer group on the Map tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the `C:` drive located under `Computer`. Then navigate to the `C:\Student\ArcGISProCookbook\Chapter10`
    folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the `Fence_3D` layer file and click OK. The fence layer should appear
    in your scene with the symbology already configured.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Bookmarks button and select the Fences 1 bookmark. This will zoom
    you to the same area you were just working with in your 2D map.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Explore tool and zoom out until you see the house with the pool located
    to the northwest of the parcel with the fence you just drew.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Zoom in on the house with the pool until your view looks similar to the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**![](img/14b5a64c-0dac-43d3-b991-731a00780d4e.png)**'
  prefs: []
  type: TYPE_NORMAL
- en: Click the Edit tab in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the drop-down arrow below the Z Mode button and review your options. Answer
    the following question.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Question: What options are available for the Z mode in the scene you are working
    with?'
  prefs: []
  type: TYPE_NORMAL
- en: 'Answer:'
  prefs: []
  type: TYPE_NORMAL
- en: As you can see, the surface options are grayed out. This is because in a 3D
    scene, the ground surface is automatically used to determine the Z coordinates
    for any new features. You do not need to set this when creating new Z-enabled
    features in a scene like you do in a 2D map.
  prefs: []
  type: TYPE_NORMAL
- en: The Create features plane should still be open from when you created the first
    fence in the 2D map. If not, click the Create button to open it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Select the Fence feature template and digitize in the new fence, as illustrated
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**![](img/8e284ad9-d9aa-4fe6-ab9b-e6c14456d52b.png)**'
  prefs: []
  type: TYPE_NORMAL
- en: The fence may not be visible after you complete it. This is because it has no
    height. It is running along the ground with all the other non-extruded layers.
    You will fix that now.
  prefs: []
  type: TYPE_NORMAL
- en: Click the Attribute button in the Selection group on the Edit tab. This will
    open the Attributes pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Height cell type `8` to make the height of the new fence display at eight
    feet. You should now see the fence in the scene.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close the Attributes and Create Features panes to free up screen space.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Clear button in the Selection group in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Save button in the Manage Edits group to save the new fence you just
    created. Again, when asked if you want to save all edits, click Yes.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Activate the Explore tool in the Map tab in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Using the skills you have learned in previous recipes, rotate the view so you
    can see the new 3D fence you just created. It should look similar to the following
    graphic:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**![](img/1b45ddca-0f66-48c6-858a-12d105082380.png)**'
  prefs: []
  type: TYPE_NORMAL
- en: You can see that the fence you created is being displayed in 3D using the Z
    coordinates for the starting elevation and extrusion to show the height. You are
    off to a good start with the request from the Planning Director to create and
    populate a new fence layer. However, he really wants to know whether that proposed
    new building will create a problem for the existing buildings by blocking their
    view of the park.
  prefs: []
  type: TYPE_NORMAL
- en: So, you will move on to conducting a line-of-sight analysis, the first part
    of which is establishing observation points from the existing buildings. These
    must be 3D points. You will start by creating a new Z-enabled point feature class.
    Then you will digitize new observation points from the existing buildings the
    Planning Director is concerned about. In the next recipe, you will complete the
    analysis.
  prefs: []
  type: TYPE_NORMAL
- en: In the Project pane, expand the Databases folder so you can see its contents.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Right-click the Trippville_GIS geodatabase and go to New. Then select Feature
    Class, as illustrated in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a402bb45-6265-43f8-a9bf-ef8877869f05.png)'
  prefs: []
  type: TYPE_IMG
- en: Name the new Feature Class as `Observ_PT`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Geometry Type to Point using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Since this is a completely new feature class, not based on any existing ones,
    you will not specify a Template Feature Class. So, leave it blank.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set Has M to No using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set Has Z to Yes if needed using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the wireframe globe next to the Coordinate System to set the coordinate
    system for the new feature class so that it matches the rest of the Trippville
    data.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Add Coordinate System button that looks like a wireframe globe with
    a green plus sign on it, as shown here. Select Import Coordinate System:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a74a9f13-1361-40d7-94cd-102cce00d958.png)'
  prefs: []
  type: TYPE_IMG
- en: Double-click the Trippville_GIS geodatabase in the right panel of the window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the DEM and click OK to import the coordinate system settings from it
    to the new feature class you are creating.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Both a Current XY and Current Z coordinate system should now be set, as illustrated
    in the following screenshot. If yours matches, click OK:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/2ad3f951-12c7-40b2-8e3f-c04338274995.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Verify your Create Feature Class tool looks like the following and click Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5dfab7af-5e80-4b3f-a86f-cd9243d6c2cb.png)'
  prefs: []
  type: TYPE_IMG
- en: When the Create Feature Class tool completes, you should see a new layer appear
    in your Contents pane. This new layer references the new feature class you just
    created. Now you need to digitize some points into the new layer that represent
    the observation locations the Planning Director is concerned about.
  prefs: []
  type: TYPE_NORMAL
- en: Close the Geoprocessing pane that contains the Create Feature Class tool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save your project.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now you need to zoom to the proposed building location. You will do this by
    selecting the proposed building and then zooming to it. In the Map tab, click
    the Select By Attributes button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Layer Name or Table View to Buildings using the drop-down arrow and
    ensure the Selection Type is set to New Selection.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Add Clause button to build your SQL query.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Using skills you have learned in the previous recipes, set the Field to Building
    Status, operator to is Equal too, and Values to Pr-Proposed. Depending on your
    version of ArcGIS Pro, you may only see Proposed as the displayed value. Then
    click Add.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify your Select Layer by Attribute tool looks like the following and click
    Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6f3af91f-fbf1-4610-a43c-3974c2e39117.png)'
  prefs: []
  type: TYPE_IMG
- en: Close the Geoprocessing pane that contains the Select Layer by Attributes tool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Right-click the Buildings layer in the Contents pane. Then go to Selection
    and select Zoom to Selection, as illustrated in the following graphic:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/29839127-2769-45e1-87f7-087a04468e1a.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The scene will zoom to the location of the proposed building that is causing
    all the concern. Your scene should now look similar to the following screenshot.
    Depending on the size of your monitor and the size of your ArcGIS Pro application,
    yours may look slightly different:'
  prefs: []
  type: TYPE_NORMAL
- en: '**![](img/2475ae51-b42d-406f-bda8-fcc3f95f9a00.png)**'
  prefs: []
  type: TYPE_NORMAL
- en: You can still query and zoom to features in a layer that have been turned off
    so they is not visible.
  prefs: []
  type: TYPE_NORMAL
- en: Using skills you have learned previously, add the Parks feature class located
    in the Trippville_GIS geodatabase to the scene. This will allow you to see the
    location of Washington Park, which is located to the northeast of this building.
    Ensure the Selection Type is set to New selection.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Zoom and rotate the Trippville Buildings scene you are working in so that you
    can see the area surrounding the proposed building. Something similar to the following
    screenshot should work well. You may need to drag the Parks layer to the 2D Layers
    group in order to see it:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/7ad77645-672e-40f2-a7ed-7d4d2ddc2a56.png)'
  prefs: []
  type: TYPE_IMG
- en: The proposed building is the lighter gray one near the center of the scene.
    Washington Park is the light green area to the northeast of the proposed building.
    Now you need to digitize observation points for the buildings directly south and
    west of the proposed building.
  prefs: []
  type: TYPE_NORMAL
- en: In the Contents pane, click the List by Snapping button. Ensure the Buildings_MP
    layer is set as snappable.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the List by Editing button in the Contents pane. Right-click the Observ_PT
    layer and select Make this the only editable layer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Edit tab in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Create button to open the Create Features pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure snapping is turned on and it is set to Edge, Vertex, End Point, and Intersection.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Observ_PT feature template in the Create Features pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the locations shown in the following screenshot. You may need to zoom
    in to get the exact locations:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/1c7950e2-a5bb-4afc-bdeb-60512c2eca07.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Map tab in the ribbon and activate the Explore tool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Rotate your scene so you can see the location of the new points you just digitized.
    They should be snapped to the tops of their associated buildings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If they are, click the Edit tab in the ribbon. Then click the Save button to
    save the new points you just created.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close the Create Features pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save your project and close ArcGIS Pro.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In this recipe, you created several new 3D features. You created two new fence
    features. The new fences inherited the Z coordinate from the location you clicked
    using the ground surface as a reference. You then specified a height for each
    fence that was then used to extrude them, so they displayed at their true height
    above the ground. Then, you created a completely new Z-enabled feature class to
    store observation points that you will use in the following recipe to analyze
    the ability to see Washington Park from those locations. The Z coordinates for
    those new points were determined by the corner of the buildings you snapped to.
  prefs: []
  type: TYPE_NORMAL
- en: Calculating lines of sight
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You've learned several ways to create new 3D features. Now it is time to investigate
    some analyses you can perform with these features that you cannot do with 2D.
    A common analysis is to determine lines of sight. This has many uses. It can be
    used by property appraisers to determine whether a property has a good line of
    sight to a key feature, such as a river or ocean, which might increase its value.
    It is used by police to establish security perimeters for special events. It might
    be used to help plan a parade route. So, as you can see, there are many uses for
    such an analysis.
  prefs: []
  type: TYPE_NORMAL
- en: In this recipe, you will use the observation points you created in the previous
    recipe to determine whether there are lines of sight to Washington Park or whether
    the proposed building will block the view of the park entirely. This will be one
    of the determining factors the Planning Director will use to for deciding whether
    or not to approve the new building. This will require the use of several geoprocessing
    tools from the 3D Analyst extension for ArcGIS Pro.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You must have completed the other recipes in this chapter before starting this
    one. This will ensure you have the required project, maps, scenes, and data to
    complete this project. It will also confirm you have a good foundational understanding
    of where to access the required tools and basic concepts required to complete
    this recipe.
  prefs: []
  type: TYPE_NORMAL
- en: You will also need to ensure the sample data is installed before you continue
    and access to the 3D Analyst extension for ArcGIS Pro.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Start ArcGIS Pro and open the `3DAnalyst.aprx` project you used in the previous
    recipes in this chapter. This project should be included in your list of recently
    opened projects.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Analysis tab in the ribbon. Then click the Tools button in the Geoprocessing
    group.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Toolboxes tab in the Geoprocessing pane. Then expand the 3D Analyst
    Tools toolbox.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll down to the Visibility toolset and expand it so you can see its contents.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Construct Sight Lines tool to open it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Observation Points to the Observ_PT layer using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Target Features to the Parks layer using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For the Output, click the Browse button and navigate to the Trippville_GIS geodatabase
    using the skills you have learned from previous recipes. Name the new output feature
    class Park_Sight_Lines and click Save.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure both the Observer Height Field and Target Height Field are set to Shape.Z.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Sampling Distance to `200`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify your Construct Sight Lines tool looks like the following and click Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/2804458a-b90f-42df-b6e8-2ea7a090107d.png)'
  prefs: []
  type: TYPE_IMG
- en: A new layer appears in your scene that represents every possible sight line
    from the observation point to the park using the interval you specified in the
    Sampling Distance. This tool ignores any possible obstructions. Next, you will
    use another tool that will investigate each of the sight lines you created to
    see whether they are blocked by the ground surface or other obstructions, such
    as buildings.
  prefs: []
  type: TYPE_NORMAL
- en: In the Contents pane, turn off the Park_Sight_Lines layer you just created.
    You do not need to see the layer to use it for further analysis.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Turning off layers that you do not need to see for the final results of any
    analysis process you are pursuing can improve overall performance and reduce map
    clutter.
  prefs: []
  type: TYPE_NORMAL
- en: Click the Back button in the Geoprocessing pane that contains the Construct
    Sight Lines tool. This will take you back to the toolboxes view.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the Line of Sight tool in the Visibility toolset in the 3D Analyst Tools
    toolbox.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Browse button for the Input Surface. Navigate to the Trippville_GIS
    geodatabase and select the DEM. Click OK once the DEM is selected.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Input Line Features to Park_Sight_Lines using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Input features to Buildings_MP using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The Input Features is a layer that contains additional features you want to
    the tool to consider that might block the line of sight along the sight lines.
    This must be a multipatch feature class-based layer.
  prefs: []
  type: TYPE_NORMAL
- en: Name your Output Feature Class `Buildings_to_Park_LOS`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You can leave the Output Obstruction Point Feature Class blank. This would create
    a new point feature class that shows exactly where the views are obstructed. For
    this analysis, we are not interested in those exact positions.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify your Line of Sight tool looks like the following and click Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c5a8261a-1ed1-4736-b10f-e88ad945038d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'When the tool completes, you will see a new layer added that has identified
    which sight lines are visible and which are not, as shown in the following screenshot.
    Remember, this tool takes the ground as well as the buildings into account when
    determining what is visible and what is not:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f044a1e8-bb6c-446c-b2ca-d4d0cab99a07.png)'
  prefs: []
  type: TYPE_IMG
- en: You can now easily see which sight lines are being blocked by the proposed building
    and which are not. This is the information the Planning Director needed.
  prefs: []
  type: TYPE_NORMAL
- en: Close your Geoprocessing pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save your project and close ArcGIS Pro.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now you have performed your first 3D analysis to determine lines of sight from
    specified points to an existing feature. This required you to have the 3D Analyst
    extension for ArcGIS Pro. In addition, you had to create several 3D layers before
    you were able to perform this analysis. This included creating a multipatch layer
    representing the buildings in Trippville and observation points.
  prefs: []
  type: TYPE_NORMAL
- en: You could have performed this same analysis in a 2D Map. ArcGIS Pro can still
    perform 3D analysis in a 2D map. However, the results will not be as impactful
    or informative when displayed in a 2D map.
  prefs: []
  type: TYPE_NORMAL
- en: Calculating the volume of a polygon
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Another common 3D analysis task is to calculate the volume of the area covered
    by a polygon feature. This is done by overlaying the polygon feature across a
    surface and then calculating the volume that exists between the plane created
    by the polygon features and the surface they overlay.
  prefs: []
  type: TYPE_NORMAL
- en: In this recipe, you will return to the quarry project you worked on earlier.
    The project engineer has determined the optimum full pool elevation and created
    a polygon layer for you. He wants you to determine what the total volume of water
    will be needed to fill the quarry to this level in gallons.
  prefs: []
  type: TYPE_NORMAL
- en: You will use the Polygon Volume tool that is part of the 3D Analyst extension
    to accomplish part of this analysis. You will then use the Calculate Field tool
    to calculate the total gallons required to fill the quarry.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You must have completed the other recipes in this chapter before starting this
    one. This will ensure you have the project, maps, scenes, and data required to
    complete this project. It will also confirm you have a good foundational understanding
    of where to access required tools and basic concepts required to complete this
    recipe.
  prefs: []
  type: TYPE_NORMAL
- en: You will also need to ensure the sample data is installed before you continue
    and access to the 3D Analyst extension for ArcGIS Pro.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Start ArcGIS Pro and open the 3DAnalyst.aprx project you used in the previous
    recipes in this chapter. This project should be included in your list of recently
    opened projects.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close all the Trippville maps and scenes. If needed, reopen the Quarry Project
    scene.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Remember, you can right-click a map or scene in the Catalog pane to open it.
  prefs: []
  type: TYPE_NORMAL
- en: Now you need to add the Full Pool Layer created by the project engineer. Click
    the Add Data button located on the Map tab in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Navigate to the `C:\Student\ArcGISProCookbook\Chapter10` folder and select
    the `Full_Pool_Level.lyrx` layer file. Click OK. A new layer should have been
    added to your scene that shows the water level of the quarry when it is filled,
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/81571a17-9d69-405c-bc14-e735def0fff8.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Analysis tab in the ribbon.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Tools button and the Toolboxes tab in the Geoprocessing pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the 3D Analysis Tools toolbox. Then expand the Triangulated Surface toolset.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Polygon Volume tool to open it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Browse button for the Input Surface.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Expand the Computer folder in the left panel of the Input Surfaces window.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the C:\ drive. Then navigate to the Student\ArcGISProCookbook\Databases
    folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select quarry_tin and click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For this tool, the input surface must be a TIN, LAS, or terrain dataset. It
    will not accept a DEM surface as the input.
  prefs: []
  type: TYPE_NORMAL
- en: Set the Input Features to Full Pool Level using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Height Field to Z_Mean using the drop-down arrow.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure the Reference Plane is set to Calculate below the plane. The plane it
    is referring to is the one created by the Input Features.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Accept the default values for the Volume and Surface Area Field.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify your Polygon Volume tool looks like the following and click Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/1b7150cf-597f-4f7a-a78c-3c825f277c17.png)'
  prefs: []
  type: TYPE_IMG
- en: Close the Geoprocessing pane when the tool completes successfully.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This particular tool does not create a new feature class or layer like so many
    of the other tools you have used. It instead adds two new fields to the attribute
    table for the input features. You will now examine the results.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Right-click the Full Pool Level and select Attribute Table. You should see
    two fields that were added: Volume and SArea.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The volume is in cubic feet because your horizontal and vertical units for the
    layer are set to US Feet. The engineer needs to know the volume in US gallons.
    You will now create a new field to contain the volume in gallons and use the Calculate
    Field tool to populate it.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: In the Table pane, click the Add Field button. It is located on the top left
    of the pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Name the new field Gallons then press your *Tab* key to move over to the Data
    Type.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the Data Type to Float using the drop-down arrow. This will allow it to
    store decimal values.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify your table design looks like the following and click the Save button
    in the Changes group on the Fields tab in the ribbon:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**![](img/566f78e7-d8bc-45cc-b644-68f5c7f2e168.png)**'
  prefs: []
  type: TYPE_NORMAL
- en: Close the Design View for the table.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have just added a new field to the attribute table for the Full Pool Level
    layer. This new field will be used to store the number of gallons that will be
    required to fill the quarry.
  prefs: []
  type: TYPE_NORMAL
- en: Right-click the Gallons field you just added in the table view and select Calculate
    Field. The Calculate Field tool will open in the Geoprocessing pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Scroll down so you can see the blank cell just above the words Code Block. You
    will need to enter the conversion expression here.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Type the following value into that cell: `!Volume! * 7.48052`. The number `7.48052`
    is the conversion factor for gallons per cubic foot.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Verify your Calculate Field tool looks like the following and click Run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/18d06e84-cc0d-4687-9518-925bdee2477e.png)'
  prefs: []
  type: TYPE_IMG
- en: When the tool completes successfully, close the Geoprocessing pane.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Review the number that has now been populated into the Gallons field.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Close the Full Pool Level attribute table.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Save your project and close ArcGIS Pro.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have just calculated the volume for an area covered by a polygon. This required
    you to have two datasets. You needed an elevation surface. The Polygon Volume
    tool you used required the surface to be in TIN, Terrain or LAS formats. The other
    dataset you needed was a polygon that formed the plane that was used to overlay
    the surface.
  prefs: []
  type: TYPE_NORMAL
