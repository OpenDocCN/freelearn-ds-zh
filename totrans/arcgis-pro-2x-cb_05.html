<html><head></head><body>
        

                            
                    <h1 class="header-title">Validating and Editing Data with Topologies</h1>
                
            
            
                
<p>In this chapter, we will cover the following recipes:</p>
<ul>
<li>Creating a new geodatabase topology</li>
<li>Validating spatial data using a geodatabase topology</li>
<li>Correcting spatial features with topology tools</li>
<li>Editing data with a map topology</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Introduction</h1>
                
            
            
                
<p>GIS has the amazing capability to help us solve real-world problems. ArcGIS Pro includes a wealth of tools that allow users to perform all kinds of analysis to answer questions, find solutions, and determine patterns. However, like most computer systems, the results are only as good as the quality of the data the analysis is based on. The old adage <em>garbage in, garbage out</em> definitely applies.  </p>
<p>So how do we ensure our GIS data is clean and accurate? One way is to make use of topology. Topology is a model of how features are related to one another spatially. Are they adjacent, connected, or coincident? This should not be confused with topography, which is how the ground changes in elevation. ArcGIS Pro allows you to use two types of topology, Geodatabase and Map.</p>
<p>A geodatabase topology is an item you create within a geodatabase, which allows you to apply rules to the data that is part of the topology. This might include rules such as: polygons must not overlap, lines must not intersect, or points must be inside a polygon. The rules are then used to validate the data to locate any features that violate the rules. ArcGIS Pro includes tools that allow you to fix the errors that are found. To make use of geodatabase topologies, you must store your data in a geodatabase, the feature classes must be in the same feature dataset, and you must have a standard or advanced license.  </p>
<p>In addition to being able to validate data with geodatabase topology, ArcGIS Pro provides tools to help you edit data so as to not introduce new errors into your data. These topology edits allow you to edit multiple features so that whatever their existing spatial relationship happens to be, it is maintained after the edit. This can not only keep your data clean, but also greatly increases your editing efficiency because you can edit multiple features with a single edit operation.</p>
<p>Map topologies are not as complex as geodatabase topologies. They are temporary, only existing during a given ArcGIS Pro session when you have a map open. Map topologies do not allow you to validate your data to find errors. What they allow you to do is perform edits to existing data, using topology edit tools, so that the edited features maintain their current spatial relationships.</p>
<p>Map topologies are not limited to only data in a geodatabase or in a single-feature dataset. Geodatabase feature classes and shapefiles can all be included in a single Map topology. Another advantage of the Map topology is that it works at all licensing levels, so you can use them even with just a Basic license.     </p>
<p>In this chapter, you will learn how to create a new Geodatabase topology. This will include adding rules and feature classes to it. Then you will validate the feature classes that take part in the topology to find the errors. Next you will use topology tools to fix the errors and validate again to ensure your edits have not introduced new errors. Lastly, you will explore a Map topology and how you can use it to edit multiple features at one time.  </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Creating a new geodatabase topology</h1>
                
            
            
                
<p>A geodatabase topology is an item stored in a geodatabase, just like a feature class or table. They can only exist and function within a geodatabase. Other formats, such as shapefiles, do not support geodatabase topologies.</p>
<p>Like feature classes and tables, you must create the topology. This will include giving it a name, setting tolerances, adding rules, and adding participating feature classes. To create a new geodatabase topology, a couple of things must be true.</p>
<p>First, you can only create a geodatabase topology within a feature dataset. Second, only feature classes stored in the feature dataset containing the topology can participate in that topology. Third, participating feature classes must not be part of another topology or geometric network. A feature class can only participate in one topology or geometric network at a time. Lastly, you must have a Standard or Advanced license of ArcGIS Pro in order to create a new topology.</p>
<p>In this recipe, you will create a new geodatabase topology in the Trippville GIS database, which will ultimately be used to validate the parcel data for the City. For those that have done this in the older ArcMap application, you will find the ArcGIS Pro process much more complex, at least in version 2.0 and version 2.1. This will hopefully be more streamlined in future versions.  </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This recipe will require you to have a Standard or Advanced license for ArcGIS Pro. You will not be able to complete it with just a basic license. If you do not have a standard or advanced license, you can request a free trial license from Esri, at <a href="http://www.esri.com/en/arcgis/products/arcgis-pro/trial">http://www.esri.com/en/arcgis/products/arcgis-pro/trial</a>. Trial licenses are valid for 21 days. </p>
<p>You also need to ensure you have installed the sample data for the book. It is also recommended that you complete all the recipes in <a href="45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml">Chapter 1</a>, <em>ArcGIS Pro Capabilities and Terminology</em>, before starting this recipe. This will ensure you have the foundational skills needed to complete this recipe.  </p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>To get started, you need to launch ArcGIS Pro as you have in previous recipes. </li>
<li>In the ArcGIS Pro start window, click on Open another project:</li>
</ol>
<div><img class="alignnone size-full wp-image-857 image-border" height="417" src="img/df964c45-8a5b-4dd9-9c48-cd968cf05e19.png" width="584"/></div>
<ol start="3">
<li>Select Computer from the Open window and then click Browse in the area on the right.</li>
<li>Navigate to <kbd>C:\Student\ArcGISProCookbook\Chapter5\Topologies</kbd> by clicking on <kbd>C:\</kbd> in the area on the left of the Open Project window. Then double-click on Student, ArcGISProCookbook, Chapter5, and Topologies folders.</li>
<li>Select the Topologies.aprx project file and click OK.</li>
</ol>
<p style="padding-left: 60px">The project will open in the Catalog view. This project currently does not contain any maps. Before you create your new topology, you need to verify a couple of things first. You need to ensure that your geodatabase contains a feature dataset and that the parcels feature class, which you will validate later, is within a feature dataset:</p>
<div><img src="img/13909805-1fdf-415f-b8f4-4b6eb87ed52b.png"/></div>
<ol start="6">
<li>In the Contents pane, click on Databases so that the two geodatabases connected to the project are displayed in the Catalog view.</li>
<li>Double click on the Trippville_GIS.gbd geodatabase so you can see its contents. Then answer the question ahead:</li>
</ol>
<div><p><strong>Question</strong>: Does the geodatabase contain any feature databases, and if so, what are they?</p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">You should have seen that this geodatabase contains at least three feature datasets, Base, Sewer, and Water. So that means you can create a topology in this geodatabase. Now you need to locate the parcels feature class:</p>
<ol start="8">
<li>Double-click on the Base feature dataset to reveal its contents.</li>
</ol>
<ol start="9">
<li>Scroll down to verify that it contains the Parcels feature class.</li>
<li>Scroll back through the feature dataset to see if it contains any topologies. Then answer the questions ahead:</li>
</ol>
<div><p><strong>Question</strong>: Is the Parcels feature class within the feature dataset?</p>
<p><strong>Answer</strong>:</p>
<p><strong>Question</strong>: Does the feature dataset contain any other topologies?</p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">Now that you have verified that the Parcels feature class is stored in the Base feature dataset, and there are no other topologies to contend with, you are now ready to begin building a new topology.</p>
<ol start="11">
<li>Click on the Analysis tab in the ribbon.</li>
<li>Click on the Tools button in the Geoprocessing group on the Analysis tab. This will open the Geoprocessing pane.</li>
<li>Click on the Toolboxes tab near the top of the Geoprocessing pane, just below the search cell, as shown in the following screenshot. This will open all the system toolboxes connected to the project:</li>
</ol>
<div><img class="alignnone size-full wp-image-858 image-border" height="250" src="img/51ba6dea-3019-40c6-a3e4-ed47bf0d6ecb.png" width="300"/></div>
<div><p>For those that have used the older ArcMap or ArcCatalog applications, this is the same as opening ArcToolbox. ArcGIS Pro does not include separate applications like the older ArcGIS Desktop did. In ArcGIS Pro, everything is all in one single application, at least up to version 2.1. There has been some discussion about creating an ArcCatalog-like app for performing general data management functions. However, it has not been determined if this will indeed happen.</p>
</div>
<ol start="14">
<li>Expand the Data Management Tools toolbox by clicking on the small arrowhead located to the left of the toolbox name.</li>
<li>Expand the Topology toolset located near the bottom of the Data Management toolbox.</li>
<li>Click on the Create Topology tool in the Topology toolset. This will open the tool in the Geoprocessing pane.</li>
<li>Click on the Browse button located at the end of the cell for the Input Feature Dataset.</li>
<li>Click on Databases in the panel on the left of the Input Feature Dataset window that opened. You may need to expand the Project folder to see it.</li>
<li>Double-click on the Trippville_GIS.gdb geodatabase in order to display its contents.</li>
<li>Select the Base feature dataset and click OK. <em>Do not double-click on the feature dataset</em>. Select it with a single click.</li>
<li>For the Output Topology, type <kbd>Parcels</kbd>. This is the name of the topology you are creating. Leave the Cluster Tolerance blank. ArcGIS Pro will calculate a default tolerance.</li>
</ol>
<ol start="22">
<li>Verify that your Create Topology tool looks like the following, and then click Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-859 image-border" height="289" src="img/553db628-3828-4446-85de-c27031f1183f.png" width="273"/></div>
<div><p>The Cluster Tolerance is the distance at which ArcGIS Pro believes features should be considered to be in the same location. When you validate the topology, ArcGIS Pro will automatically snap features together that are within the cluster tolerance distance. This means that when you validate, it will potentially move data. This is both good and bad. It will often clean up data by connecting features that were mistakenly not connected. It will remove small gaps and overlaps between features. However, if your cluster tolerance is set to large, it could snap features together that should not be. So, it is generally recommended to keep the cluster tolerance small. Esri indicates that the best practice is to use the default tolerance calculated by ArcGIS Pro, as it is typically small enough to avoid any adverse effects to your data.</p>
</div>
<ol start="23">
<li>Close the Geoprocessing pane.</li>
</ol>
<p style="padding-left: 60px">In the Catalog view you should now see the Parcels topology you just created. The next step is to add the feature class or classes that will participate in the topology. In this recipe it will be only one feature class, parcels. You will now add that feature class to the topology:</p>
<ol start="24">
<li>In the Catalog view, scroll to the Parcels topology you just created. Right-click on it and select Properties from the menu that appears, as shown in the following screenshot:</li>
</ol>
<div><img height="446" src="img/2d259d9a-5097-4d92-91ed-9718a708e199.png" width="571"/></div>
<div><p>Multiple topologies can exist in the same feature dataset. However, each feature class can only participate in one topology at a time.</p>
</div>
<ol start="25">
<li>The Topology Properties window should open. Click on the General option in the panel located on the left of the window. Review those settings. You can see that the cluster tolerance is set to a very small value. You will also see that the topology is not validated.</li>
</ol>
<div><p>A topology cannot be validated until it includes both feature classes and rules. A topology can include one or more of both. Which feature classes and rules you include will depend on the purpose of the topology and your data.</p>
</div>
<ol start="26">
<li>Click on the Feature class option located in the panel on the left side of the Topology Properties window. Then click on the Add Classes button.</li>
<li>Scroll down the list of feature classes presented in the Add Classes window until you see the Parcels feature class. Click on the box to the left of the feature class name to select it. Then click OK to add it to the topology.</li>
</ol>
<div><p>You can select multiple feature classes and add them all to the topology at the same time. You are not required to add them one at a time.</p>
</div>
<ol start="28">
<li>Verify that your Topology Properties window looks like the following screenshot and click OK to apply the changes you have made:</li>
</ol>
<div><img height="294" src="img/f0c463bf-d80c-44f3-8b25-9b718e736f21.png" width="460"/></div>
<p>Topology Properties window</p>
<p style="padding-left: 60px">You have just added a participating feature class to the topology. Now you need to add rules, which you will use to validate your data against. We will keep it simple for this recipe. You will only add a single rule to validate against.</p>
<ol start="29">
<li>Right-click on the Parcels topology again and open the Properties as you did previously.</li>
<li>Click on the Rules option in the panel on the left of the Topology Properties window.</li>
<li>Click where it says Click here to add a new rule. in the panel on the right side of the window, as illustrated in the following screenshot:</li>
</ol>
<div><img height="289" src="img/425ca1ec-7634-42be-9df7-29d347a08b75.png" width="447"/></div>
<p>Topology Properties window - setting rules</p>
<ol start="32">
<li>Click on the cell located beneath the column titled Feature Class 1. Select Parcels from the list that appears. You may need to double-click to get the list to appear. Since you only have one participating feature class in this topology, it should be the only one in the list.</li>
<li>Click on the cell located beneath the column titled Rule. Select Must Not Overlap (Area) from the list of possible rules that appears.</li>
</ol>
<ol start="34">
<li>Verify that your Topologies Properties: Parcels window looks like the following and then click OK.</li>
</ol>
<div><img height="301" src="img/2f451f3d-5eea-4d24-8133-7b30aeb9b34b.png" width="517"/></div>
<div><p>A topology can include many rules. The rules you can apply will depend on the type of feature classes that participate in the topology. For example, the rule you added in this recipe only applies to polygons in a single feature class. For more information about topologies in ArcGIS Pro, and the rules, go to <a href="http://pro.arcgis.com/en/pro-app/help/data/topologies/topology-in-arcgis.htm">http://pro.arcgis.com/en/pro-app/help/data/topologies/topology-in-arcgis.htm</a>.</p>
</div>
<ol start="35">
<li>Save your project.</li>
<li>If you are not continuing to the next recipe you can close ArcGIS Pro. If you are, please leave the application open.</li>
</ol>


            

            
        
    

        

                            
                    <h1 class="header-title">Validating spatial data using a geodatabase topology</h1>
                
            
            
                
<p>You have just created a new topology in the previous recipe. This will allow you to find errors in the parcel feature class which violate the polygons must not overlap rule you included in the topology. To find any errors you must first validate the topology.</p>
<p>When you validate a topology, several things occur. First, all features participating within the topology are snapped together if they are within the cluster tolerance. This is done automatically for all features when you validate. Second, the participating feature classes are checked against the rules you have included in the topology. Any areas that include features that violate the rules are identified in the topology so you can easily locate the errors and fix them.  </p>
<p>In this recipe, you will validate your topology to identify any errors in the Parcels feature class. To do this, you will create a new map and add the topology, along with the Parcels layer, to it.    </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>You will need to have completed the previous recipe in order to complete this one. You will also need a Standard or Advanced license of ArcGIS Pro. You will not be able to perform this recipe with just a Basic license of ArcGIS Pro. If you only have a basic license, you can request a trial advanced ArcGIS Pro license from Esri, at <a href="http://www.esri.com/en/arcgis/products/arcgis-pro/trial">http://www.esri.com/en/arcgis/products/arcgis-pro/trial</a>.  </p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>To get started, you will need to launch ArcGIS Pro if it is not already open. If you closed ArcGIS Pro before starting this recipe, you will need to start ArcGIS Pro and open the <kbd>Topologies.aprx</kbd> project located in <kbd>C:\Student\ArcGISProCookbook\Chapter5\Topologies</kbd>, using the skills you have learned in past recipes.</li>
<li>Click on the Insert tab in the ribbon.</li>
</ol>
<ol start="3">
<li>Click on the New Map button located in the Project group in the Insert tab. This will create a new blank 2D map in your project. The new map should automatically be opened.</li>
<li>In the Contents pane, right-click on the Map and select Properties from the menu that appears, as illustrated in the following screenshot:</li>
</ol>
<div><img height="343" src="img/5a903fd9-da7a-41c6-95c7-82a50dd08981.png" width="288"/></div>
<ol start="5">
<li>Ensure the General option is selected in the left panel in the Map Properties window that opened.</li>
<li>In the cell for Name, type <kbd>Parcel Topology</kbd> and click OK. Where it said Map prior, it should now read Parcel Topology.</li>
<li>Save your project.</li>
<li>In the Catalog pane, expand the Databases folder by clicking on the small arrowhead located to the left.</li>
<li>Expand the Trippville_GIS.gdb so you can see its contents.</li>
<li>Expand the Base feature dataset.</li>
</ol>
<ol start="11">
<li>Right-click on the Parcels Topology and select Add to Current Map from the menu that appears, as shown in the following screenshot. This will add the topology and the participating feature classes as layers to the map:</li>
</ol>
<div><img class="alignnone size-full wp-image-860 image-border" height="330" src="img/8f2662a8-c192-4bad-ba10-893b26661d8f.png" width="312"/></div>
<ol start="12">
<li>Right-click on the Parcels layer in the Contents pane. Select Zoom to Layer from the menu that appears. You should now be able to see the parcels for the city of Trippville.</li>
<li>In the Contents pane, examine the layers listed under the Parcels Topology. Then answer the following question:</li>
</ol>
<div><p><strong>Question</strong>: What layers are included in the topology?</p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">As you can see, a topology includes more than just the rules, participating feature classes, and cluster tolerance. It also includes the located errors and Dirty Areas:</p>
<ol start="14">
<li>Turn on the Dirty Areas layer in the Parcels Topology. You should see a big blue square appear around the parcels in the map, as shown in the following screenshot:</li>
</ol>
<div><strong><img height="388" src="img/61ca4a4a-a108-4af8-b0ec-00c5af7576f5.png" width="645"/></strong></div>
<p>Topology dirty areas displayed in the map</p>
<div><p>Dirty Areas are areas in your data that are participating in the topology which you have not validated. In this case, the entire area is considered a dirty area because you have not validated your topology. Just because a dirty area exists does not mean your data has errors or cannot be used. A Dirty Area is just an area within your data which you have not validated with the rules in your topology because you have either edited the data or just created the topology. Regardless of whether Dirty Areas exist, or if your data does have errors, you can always use your data.</p>
</div>
<ol start="15">
<li>Click on the Edit tab in the ribbon.</li>
</ol>
<ol start="16">
<li>Click on the drop-down arrow located next to No Topology in the Manage Edit group on the Edit tab, and select Parcels (Geodatabase) from the list, as illustrated:</li>
</ol>
<div><strong><img src="img/f687e6fe-43f0-433f-b034-df78c40e157c.png"/></strong></div>
<ol start="17">
<li>Now that you have selected the topology you will validate, you need to access the validate tool. Click on the Modify button in the Features group on the Edit tab. This will open the Modify Features pane.</li>
<li>Scroll down to the Topographic toolset. If necessary, expand it so you can see its contents.</li>
<li>Since this is the first time you have validated the topology since it was created, select the Validate All tool.</li>
</ol>
<div><p>There are also geoprocessing tools you can use to validate your topology. These are located in the Data Management toolbox and the Topology toolset. The Validate Topology tool does the same thing as the Validate All tool.</p>
</div>
<p style="padding-left: 60px">When you validate the topology, it will look for any parcels that overlap other parcels. Any it finds, it will add those locations to the Polygon Errors layer. When the validation is complete, you should see some red polygons on the east side of the Parcels layer, which indicate the errors that were found.</p>
<ol start="20">
<li>Close the Modify Features pane and save your project.</li>
<li>Zoom in to the area indicated in the following diagram:</li>
</ol>
<div><strong><img height="369" src="img/f28b36bc-1a7b-45a5-8d66-3e43ff7afdb1.png" width="576"/></strong></div>
<p>Zoom to the area indicated by the rectangle</p>
<p style="padding-left: 60px">Your map should now look similar to the following diagram. Remember your colors may be different as ArcGIS Pro assigns a random color to new layers when they are added:</p>
<div><img height="398" src="img/a4dff8b3-7073-40ab-893a-8fa66bbeb46c.png" width="510"/></div>
<p style="padding-left: 60px">In this view, you can see the errors that were found in the parcel data once you verified it.</p>
<ol start="22">
<li>Let’s create a bookmark so you can easily return to this area later. Click on the Map tab in the ribbon.</li>
<li>Click on the Bookmarks button in the Navigate group on the Map tab. Select New Bookmark. This will open the Create Bookmark window.</li>
<li>Name the new bookmark <kbd>Parcels Overlap Area to Fix</kbd> and click OK.</li>
<li>Save your project.</li>
<li>If you are not continuing to the next recipe, you may close ArcGIS Pro. Otherwise keep it open.</li>
</ol>
<p>As you have seen in previous recipes, bookmarks allow you to quickly zoom in to a fixed spatial location. These are very handy for many purposes. Several things I use bookmarks for include printing a map at a specific location and scale, for meetings where I need to highlight specific areas or features, and to return to a specific location for a project or for editing. Each map has its own set of bookmarks. There is no limit to the number of bookmarks a project can contain.   </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Correcting spatial features with topology tools</h1>
                
            
            
                
<p>Now that you know where the errors are in your data, you need to fix them. ArcGIS Pro includes specific tools for fixing topology errors. These are generally quick and easy to use for most situations. You may also use standard editing tools to correct errors as well. In either case, you should always validate your data after completing edits to ensure you have not introduced any new errors into your data.</p>
<p>In this recipe, you will fix several errors you uncovered when validating the topology. You will use the Error Inspector tool in ArcGIS Pro to correct the errors.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This recipe continues to build on the work done in the previous recipes in this chapter. You will need to have completed all the previous recipes included in this chapter before you can start on this one. As with those previous recipes, you will also need a Standard or Advanced license level to complete this recipe.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>If you closed ArcGIS Pro before starting this recipe, you will need to start ArcGIS Pro and open the <kbd>Topologies.aprx</kbd> project located in <kbd>C:\Student\ArcGISProCookbook\Chapter5\Topologies</kbd> using the skills you have learned in past recipes.</li>
<li>In the Contents pane, click on the List by Editing button.</li>
<li>Ensure the Parcels layer is enabled for editing.</li>
<li>Click on List by Selection in the Contents pane.</li>
</ol>
<ol start="5">
<li>Ensure the following layers at minimum are selectable: Polygon Errors and Parcels.</li>
<li>Click on the Edit tab in the ribbon.</li>
<li>Click on the Error Inspector button in the Manage Edits group on the Edit tab. This will open the Error Inspector pane at the bottom of the interface. Like all panes, this one may be undocked and moved to a different location if desired.</li>
<li>Select the first error presented in the pane by clicking on the gray square located to the far left of the first row, as illustrated here:</li>
</ol>
<div><img class="alignnone size-full wp-image-861 image-border" height="221" src="img/28c7c1d8-0453-4a34-9e9e-a4350b756434.png" width="1051"/></div>
<p>Select record in the table by clicking on gray square to the left</p>
<ol start="9">
<li>Click on the Zoom To option located at the top of the Error Inspector pane. This will zoom you in to the location of the selected error.</li>
<li>Right-click on the same square you clicked on to select the error to reveal a new context menu. Select Merge, as shown in the following screenshot:</li>
</ol>
<div><strong><img class="alignnone size-full wp-image-862 image-border" height="260" src="img/57afdb9c-a07c-41d6-bac3-cdd0c792a68a.png" width="332"/></strong></div>
<p>Topology error inspector tool</p>
<ol start="11">
<li>Select Parcels 24884 (Largest) and click the Merge button in the Merge window that appears. This will merge the overlap area with the selected parcel and subtract it from the smaller parcel you did not select, removing the overlap.</li>
</ol>
<p style="padding-left: 60px">For the sake of this recipe, we chose to merge the overlapping area with the larger parcel polygon for the sake of expediency. Normally you would want to do some research to see which parcel the area should belong to.</p>
<div><p>When you right-clicked on the row, in the table, a context menu appears. This menu contains many options. The top section of the context menu allows you to navigate to the location of the error. The second section allows you to review the rule the error has violated. The third section contains tools for correcting the error. The tools will vary based on the rule which has been violated and the type of data you are working with.</p>
<p>In this case you had three tools to choose from to fix the error: Remove Overlap, Merge, and Create Feature. You saw how the Merge tool worked, but what about the others? The Remove Overlay will remove the area where two or more polygons overlap one another. This creates a gap between the polygons. The Create Feature tool creates a new polygon from the overlapping area while subtracting that same area from the overlapping polygons.</p>
</div>
<ol start="12">
<li>A new dirty area should appear because you just edited the parcels layer but have not validated it. Click on the Validate button located at the top of the Error Inspector pane. This will remove the dirty area and allow you to see if any new errors have appeared due to your edit.</li>
</ol>
<div><p>You should validate your data regularly when using topologies to ensure it remains clean. How often you validate is up to you, but here are some general guidelines: beginner users should probably validate after every edit or correction. More experienced users should validate before they save edits to ensure they are not saving erroneous data back to the geodatabase. Remember, you can always undo up until the last time you saved. Once you save, there is no going back.</p>
</div>
<ol start="13">
<li>Click the Save button in the Manage Edits group on the Edit tab.</li>
<li>In the Error Inspector pane, locate the three errors for Feature 1 relating to Parcels 35845.</li>
</ol>
<ol start="15">
<li>Click on each error, one at a time. Watch both the map and the Preview window at the right side of the Error Inspector pane. You should be able to see that each of these errors is related to the same two parcels.</li>
</ol>
<div><p>You can zoom in to get a closer look at each error in the Preview window on the Error Inspector pane. Simply use the scroll wheel on your mouse to zoom in or out within the Preview.  </p>
</div>
<ol start="16">
<li>Click on the small square located next to the top record for the errors related to Feature 1 Parcels 35845. Holding your <em>Shift</em> key down, click on the last of the three records relating to Parcels 35845. All three errors should now be selected, as illustrated in the following screenshot:</li>
</ol>
<div><strong><img src="img/fa9a5a8a-5f65-4b7a-af25-83b262fb3ba4.png"/></strong></div>
<p>Selecting parcels 35845 in the table</p>
<ol start="17">
<li>In the panel on the right side of the Error Inspector pane, where you see the preview, click the Fix tab. It should show that you have three errors selected and display two active options: Create Feature and Remove Overlap. Your research has revealed that these overlapping areas are now easements which are tracked in another layer. So, you will select Remover Overlap.</li>
</ol>
<div><p>Merge was grayed out, because that tool requires you to select which feature you are merging the overlapping area into for each error. So, it can be used to perform mass corrections.</p>
</div>
<p style="padding-left: 60px">You just fixed three errors with a single edit operation. Using these tools to correct your data not only makes your data cleaner but it can be very efficient as well.</p>
<ol start="18">
<li>Validate your data using the Validate button at the top of the Error Inspector pane. If no new errors are found for the area you just fixed, save your edits.</li>
<li>Using the same processes, you have just fixed the remaining errors. Feel free to try different corrective tools in each case to see how they work. Make sure to validate after each corrective action, and to save your edits as you go.</li>
<li>If you are not continuing to the next recipe, save your project and close ArcGIS Pro. If you are continuing, leave ArcGIS Pro and the project open.</li>
</ol>
<p>As you have now seen, the use of geodatabase topologies can greatly increase the overall accuracy of your GIS data and help you locate where errors may exist. The end result is improved data quality and better analysis results. One thing to remember when you want to use geodatabase topologies is you must have a Standard or Advanced ArcGIS Pro license. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Editing data with a map topology</h1>
                
            
            
                
<p>You have now seen how powerful geodatabase topologies can be to help you find and correct errors in your data. However, to use geodatabase topologies, your data must be stored in a geodatabase and you must have a standard or advanced license. So, what do you do if you want to maintain data which is stored in a shapefile so that you do not introduce topological errors, or if you only have a basic license? This is where a Map topology should be used.</p>
<p>As said in the introduction, map topologies are temporary and do not allow you to validate data using rules. What they do allow you to do, though, is edit data using topology tools so that the existing spatial relationships are maintained. This keeps you from introducing any new errors into your data. Map topologies also have the advantage of allowing these topology editing tools to be used on shapefiles and geodatabase feature class-based layers at the same time. Being able to edit multiple layers with single edits, regardless of whether it is a shapefile or geodatabase, can greatly increase your efficiency. Map topologies also do not require all the geodatabase feature classes to be in the same feature dataset within the geodatabase. So, while map topologies do not allow you to validate your data like geodatabase topologies do, they do offer greater data flexibility.</p>
<p>In this recipe, you will use a map topology to edit data in multiple layers with a single edit. A road has been widened to include a turn lane. You need to adjust several layers including, the City Limits, Parcels, Rights of Way, and Voting Districts, to reflect the newly widened road. Several of these layers are in the Trippville GIS geodatabase you have been working with. However, the Voting Districts are stored in a shapefile because the voter registration system, which needs the layer, cannot read a geodatabase.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This recipe can be completed using all license levels of ArcGIS Pro. It is not required that you complete any previous recipes in order to complete this one, though it is recommended that you complete the recipes found in <a href="45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml">Chapter 1</a>, <em>ArcGIS Pro Capabilities and Terminology</em> before starting this recipe to ensure you have the foundational skills required to complete this recipe. You also need to ensure you have installed the sample data for the book. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>If you closed ArcGIS Pro before starting this recipe, you will need to start ArcGIS Pro. Then open the <kbd>Topologies.aprx</kbd> project located in <kbd>C:\Student\ArcGISProCookbook\Chapter5\Topologies</kbd> using the skills you have learned in past recipes.</li>
<li>If they are still open, close all panes with the exception of the Contents and Catalog panes.</li>
</ol>
<ol start="3">
<li>Right-click on the Parcels topology group layer, which contains the Dirty Areas, Point Errors, Line Errors, and Polygon Errors layers, and select Remove, as illustrated in the following screenshot:</li>
</ol>
<div><img class="alignnone size-full wp-image-863 image-border" height="322" src="img/1780e1fe-6d16-4f2e-a93e-40c6b8435e8d.png" width="301"/> </div>
<ol start="4">
<li>Save your project.</li>
<li>Click on the the Add Data button on the Map tab in the Layer group in the ribbon.</li>
<li>Click on the Databases folder located under Project in the left panel of the Add Data window.</li>
<li>Double-click on the Trippville_GIS.gdb geodatabase.</li>
<li>Double-click on the Base feature dataset.</li>
<li>Select the City_Limit feature class. Then, while holding down the <em>Ctrl</em> key, select the RW feature class. Then click OK to add these new layers to your map.</li>
<li>In the Contents pane, ensure you are viewing the List by Drawing Order. It is the first button on the top left of the pane.</li>
<li>Click on the Symbol patch, located below the City_Limit layer name in the Contents pane, to open the Symbology Pane.</li>
</ol>
<ol start="12">
<li>Ensure you have Gallery selected at the top of the pane. Then scroll down and select the symbol named Black Outline (2 Pts) located in the ArcGIS 2D Style.</li>
</ol>
<p>At the top of the Symbology pane, you should see a Search function. This allows you to find a symbol you are looking for using key words or tags. You could type <kbd>Black outline 2 pts</kbd> into the search to locate the symbol or related symbols. </p>
<ol start="13">
<li>Drag the City_Limit layer to the top of the layer list.</li>
<li>If desired, change the symbology for the Parcels and RW layers so you can easily see them.</li>
<li>Save your project.</li>
<li>In the Catalog pane, expand the Folders folder so you can see its contents.</li>
<li>Expand the Topologies folder so you can see its contents. You should see several files in this folder, including Topologies.gdb, Topologies.tbx, Voting_Districts.lyrs, and Voting Districts.shp, as shown in the screenshot:</li>
</ol>
<div><img class="alignnone size-full wp-image-864 image-border" height="336" src="img/96e88299-b82c-4133-a51f-d1c3bc88ff52.png" width="338"/></div>
<ol start="18">
<li>Right-click on the Voting_Districts.lyrx file and select Add to Current Map.</li>
</ol>
<div><p>You just added a layer to a map using a layer file. Layer files store configuration settings for a layer so that, when added, they are automatically displayed based on those settings. Layer files can include settings for symbology, labeling, definition queries, scale-visibility ranges, and more. This allows you to standardize layer displays between multiple maps and projects within your organization.</p>
</div>
<p style="padding-left: 60px">Your map should now look like the following screenshot. Your symbology will most likely be different, depending on the colors ArcGIS Pro assigned when you added the layers and any adjustments you made to the symbology. Remember, ArcGIS Pro assigns a random color to newly added layers:</p>
<div><img height="368" src="img/dbd72160-1494-4a9f-a1c9-67106b7e22b5.png" width="677"/></div>
<p>Map with voting districts added</p>
<ol start="19">
<li>Click on the Map tab and activate the Explore tool.</li>
</ol>
<ol start="20">
<li>Hold down your <em>Shift</em> key so you can zoom in to a specific area. Zoom to the area indicated on the northern side of the City:</li>
</ol>
<div><strong><img height="336" src="img/1f9d25a4-0796-4a0f-86d1-871e095c38e2.png" width="536"/></strong></div>
<ol start="21">
<li>Now, save your project to ensure you do not lose any of the work you have done so far.</li>
<li>Click on the List by Selection button in the Contents pane. Make sure all layers are selectable.</li>
<li>Click on the List by Snapping button in the Contents pane and ensure all layers are snappable.</li>
<li>Click on the List by Editing button in the Contents pane and ensure all layers are editable.</li>
<li>Click on the Edit tab in the ribbon.</li>
</ol>
<ol start="26">
<li>Click on the topology drop-down list, located in the Manage Edits group on the Edit tab in the ribbon, and select Map Topology, as illustrated:</li>
</ol>
<div><strong><img height="230" src="img/f12981c8-9aba-48aa-a3fc-65dd7770f202.png" width="425"/></strong></div>
<p style="padding-left: 60px">You are now ready to begin editing the layers to reflect the new turn lane that has been added to the entrance of Sweetwater Valley Road. This is a new right-turn lane, allowing cars to safely decelerate before turning, and cars continuing down Clay Road to pass turning cars.</p>
<ol start="27">
<li>Click on the Select tool in the Selection group on the Edit tab.</li>
<li>In the map, click and draw a selection rectangle, as illustrated in the following screenshot:</li>
</ol>
<div><strong><img height="195" src="img/ab813b97-0334-4b12-83c2-04dac1378593.png" width="261"/></strong></div>
<ol start="29">
<li>Click on the List by Selection button in the Contents pane. Verify that you have one feature in each layer selected, as shown in the following screenshot:</li>
</ol>
<div><strong><img height="259" src="img/4feb44d1-90ad-45e4-af98-f4bcd3b10801.png" width="492"/></strong></div>
<ol start="30">
<li>Click on the Reshape tool, located in the Tools group on the Edit tab in the ribbon, to open the Modify Features pane.</li>
<li>Click on the northwestern corner of the parcel, located to the west of Sweetwater Valley Road, as illustrated:</li>
</ol>
<div><strong><img height="220" src="img/bf16b6a1-0437-4951-adb4-16f4b5f10af5.png" width="305"/></strong></div>
<ol start="32">
<li>Then move your mouse pointer in a southerly direction, along the western boundary of the parcel, and right-click. Select Direction/Distance from the context menu that appears, as shown in the following screenshot:</li>
</ol>
<div><strong><img height="284" src="img/423d55f4-116c-445b-8e2a-c5e4a0f6e990.png" width="355"/></strong></div>
<ol start="33">
<li>Set the Direction to be <kbd>S3-42-19W QB</kbd> and the Distance to <kbd>50.00 FtUS</kbd>. You may need to press the <em>Enter</em> key after entering the distance to apply the values you entered.</li>
<li>Move your mouse pointer to the northern boundary of the parcel and right-click. Select Parallel from the context menu that appears, as illustrated in the following screenshot:</li>
</ol>
<div><div><strong><img height="275" src="img/154ff059-7308-4189-b8b5-de1ae11b9e03.png" width="296"/></strong></div>
<ol start="35">
<li>Your mouse pointer should now be locked in a direction parallel to the parcel boundary. Move your mouse pointer along that parallel course until it is snapping to the eastern right of way for Sweetwater Valley Road. Click at that location, as shown in the following diagram:</li>
</ol>
<div><strong><img height="218" src="img/45e94190-2d40-4dd2-b0ce-05afd7bcd066.png" width="318"/></strong></div>
<ol start="36">
<li>Move your mouse pointer until it snaps to the intersection of the eastern right of way for Sweetwater Valley Road and the southern right of way for Clay Rd, as shown in the next screenshot. Double-click when you get to the indicated location to finish your sketch:</li>
</ol>
<div><strong><img height="229" src="img/bcb6239f-2768-43fc-acd8-c7f8504a3bb8.png" width="353"/></strong></div>
<p style="padding-left: 60px">Your map should now show the new area for the new turn lane that was installed, as shown in the following diagram. This new turn lane required you to edit multiple layers. This included all the layers which were in your map. You could have edited each layer individually. However, by using the Map Topology, you were able to edit features in four different layers with a single edit. This included layers which were stored in different data formats as well.</p>
<p style="padding-left: 60px">To learn more about using topologies, go to <a href="http://pro.arcgis.com/en/pro-app/help/editing/introduction-to-editing-topology.htm">http://pro.arcgis.com/en/pro-app/help/editing/introduction-to-editing-topology.htm</a>.</p>
<div><img height="353" src="img/12e33c5e-fbae-4126-a3ee-1e8a79813c01.png" width="519"/> </div>
<ol start="37">
<li>Once you verify that your edits were completed successfully, save your edits by clicking on the Save button in the Manage Edits group on the Edit tab.</li>
</ol>
<p>Remember, saving data edits is different than saving a project. By default, these are two separate operations. Saving the project will save changes you have made to the contents of the project, such as adding a new map, changing the properties of a layer in a map, creating a new layout, and connecting to a new database. Saving the project is done using buttons or commands on the Quick Access Toolbar or the Project tab in the ribbon.  The Save button on the Edit tab in the Manage Edits group saves changes to the spatial or attribute data referenced in a map or scene. It does not save edits to the project. In the options for ArcGIS Pro, you can enable the saving of edits when you save the project, if desired. Doing so is not a bad idea for new users who are not accustomed to having different saves within a single application. </p>
<ol start="38">
<li>Close the Modify Features pane to free up screen area and reduce the computer resources being used by ArcGIS Pro.</li>
<li>Save your project to ensure all your project changes are saved.</li>
<li>Close ArcGIS Pro.</li>
</ol>
<p>You have now seen the power of Map topology. It allows you to edit multiple features at one time, regardless of which layer or layers they may be in, as long as they are coincident. This can greatly increase the efficiency of your editing. Unlike Geodatabase topologies, you can use Map topologies in any license level of ArcGIS Pro. The primary limitation of a Map topology is the inability to assign spatial rules and validate your data using the rules, as you can with a Geodatabase topology. </p>


            

            
        
    </body></html>