<html><head></head><body>
        <section>

                            <header class="header-title chapter-title">
                    Visualizing and Working with Time Series Data
                </header>
            
            <article>
                
<p>Regardless of whether the data source is from a file or database, we have now defined a repeatable analysis workflow. This is used to load the data into either an array or DataFrame and then answer business questions by running a few Python commands using their respective libraries.</p>
<p>This process has served us well so far and is a necessary step to <em>up-skill</em> our learning of how to work with data, which ultimately improves data literacy.<span class="Apple-converted-space"> </span>Now, we are going to take yet another exciting step to help you communicate analysis by visualizing your data. In this chapter, we will learn how to create visual artifacts that can support structured data. We will break down the anatomy of a chart by uncovering the fundamentals of how data visualizations are created. Using the plotting features available in Python, you will create <span>your first time series chart using the <kbd>matplotlib</kbd> library.</span></p>
<p>We will cover the following topics in the chapter:</p>
<ul>
<li class="mce-root">Data modeling for results</li>
<li class="mce-root">Anatomy of a chart and data viz best practices</li>
<li class="mce-root">Comparative analysis</li>
<li class="mce-root">The shape of the curve</li>
</ul>
<p>Let's get started.</p>
<h1 id="uuid-811b928d-9386-4c42-bf3b-d830e9285ee4">Technical requirements</h1>
<p>You can find the<span> </span>GitHub repository<span> </span>for this book at <a href="https://github.com/PacktPublishing/Practical-Data-Analysis-using-Jupyter-Notebook/tree/master/Chapter06">https://github.com/PacktPublishing/Practical-Data-Analysis-using-Jupyter-Notebook/tree/master/Chapter06</a>.</p>
<p>You can download and install the required software from <a href="https://www.anaconda.com/products/individual" target="_blank">https://www.anaconda.com/products/individual</a>.</p>
<h1 id="uuid-df59571f-9667-4cf4-800c-4b207ca60bd3">Data modeling for results </h1>
<p>The introduction to data modeling we provided in <a href="bea8a62c-4469-47e3-a668-10fbb91815ea.xhtml">Chapter 5</a>, <em>Gathering and Loading Data in Python</em>, gave us an understanding of relational databases and fundamental statistics that can be performed against structured data. In those examples, we learned about the relationships of data and how data can be modeled from the perspective of the data producer.<span class="Apple-converted-space"> </span><strong>Data producers</strong> are responsible for storing data in a structure to ensure the data's integrity is consistent. In the previous chapter, we also learned how an<strong> </strong><span><strong>Entity Relationship Diagram</strong> (<strong>ERD</strong>)</span> <span>can be used to define the relationships between tables. In this chapter, we will apply these same concepts </span>with the <em>data consumer</em> in mind. As a result, we will focus on creating new relationships with data, making it easier for analysis.<span class="Apple-converted-space"> </span>This concept was an evolution in reporting and spawned a new industry commonly known as <strong>Business Intelligence </strong>(<strong>BI</strong>) and <strong>Analytics</strong>.</p>
<h2 id="uuid-3d42ed51-a06f-479c-8850-80fb53d994b3">Introducing dimensions and measures</h2>
<p>Data modeling for analysis means we are building new relationships from the source tables with the intention of answering business questions for the consumer.<span class="Apple-converted-space"> </span>Creating a new data model with this focus scales up your <span>analysis beyond single <span>SQL <kbd>SELECT</kbd> statemen</span>ts that are run one at a time <span>to answer one question</span>.</span> On the contrary, using a newly derived data model for analysis will provide answers to <span>dozens of </span>questions using only a few or even one table. How is this possible? <span>It's all about why the new analysis tables are needed and how those relationships are defined.</span> <span>For example, the database tables required to support a mobile application used for social media would not be the same data model that's used for a sales analysis.</span></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>In some cases, the data model that is created from the data producer may be reused for a consumer so that you don't have to make any changes, such as in our example in the previous chapter.<span class="Apple-converted-space"> </span>In other cases, you will simply extend the existing data model with the addition of new fields, which could be from new data sources or derived from the existing data rows and columns.<span class="Apple-converted-space"> </span>In either case, from a data analyst perspective, we are changing how we look at an existing data model by looking at how we could use columns as either dimensions or measures.</p>
<p><em>Dimensions</em> in data models are values with descriptive attributes that are commonly used to identify a person, place, or thing. The easiest way to remember dimensional fields is that they can be classified as a <em>noun</em>. A good example would be a date dimension where any given date value, such as <kbd>12/03/1975</kbd>, would have multiple attributes that can be derived from this one value, as shown in the following table:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p><strong>Field Name</strong></p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><strong>Field Value</strong></p>
</td>
</tr>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p>Date</p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><kbd><span>12/03/1975</span></kbd></p>
</td>
</tr>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p>Year</p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><kbd><span>1975</span></kbd></p>
</td>
</tr>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p>Month Number</p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><kbd><span>12</span></kbd></p>
</td>
</tr>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p>Month Name</p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><kbd><span>December</span></kbd></p>
</td>
</tr>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p>WeekDay</p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><kbd><span>Wednesday</span></kbd></p>
</td>
</tr>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p>Quarter</p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><kbd><span>Q4</span></kbd></p>
</td>
</tr>
<tr>
<td class="CDPAlignCenter CDPAlign">
<p>Is_Weekend_Flag</p>
</td>
<td class="CDPAlignCenter CDPAlign">
<p><kbd>FALSE</kbd></p>
</td>
</tr>
</tbody>
</table>
<p> </p>
<p>A <span class="packt_screen">m</span><span><span class="packt_screen">easure</span> in a data model is any field that has values that can be aggregated using statistical calculations such as <kbd>sum</kbd>, <kbd>min</kbd>, <kbd>max</kbd>, or <kbd>average</kbd>. An easy way to identify a measure field is to question whether the values are in action so you could classify them as verbs. In many cases, measure values repeat with high frequency in a table source. Common fields that can be identified as a measure include a sales amount, sales quantity, or stock closing price. Measure fields are typically stored in tables that you can abstract to a <kbd>fact</kbd> table.</span> A <kbd>fact</kbd> table <span>will already be defined by the producer or could be derived during analysis. A fact table represents an event, transaction, or entity defined by a single row in a database table. A primary key, which we defined in</span> <a href="https://cdp.packtpub.com/python_data_analysis_beginners_guide/wp-admin/post.php?post=28&amp;action=edit">Chapter 5</a>, <em>Gathering and Loading Data in Python</em>, <span>is used </span><span>to uniquely identify each row to ensure consistency for reporting and analysis. If multiple fields are required to uniquely identify a record, a surrogate key field would be created. </span></p>
<p><span>Joined to </span>the fact table will be one or more dimensional tables organized in a way that they answer business questions in a repeatable manner. Unlike a relational data model, which is used to support systems and applications, a dimensional data model should be built for analysis and reporting.</p>
<p class="mce-root"/>
<p>These concepts were introduced to me over 10 years ago by my mentor and former colleague Rich Hunter while we worked at Axis Group, LLC in Berkley Heights, NJ. I would define the people who worked at this<span> boutique</span> BI<span> consulting company </span>as <em>data marines</em> because of their ability to understand, adapt, and overcome problems using data. Solving problems and creating data solutions were part of their standard operating procedures.<span class="Apple-converted-space"> </span>It was during this time that Rich changed my perspective on how to work with data by introducing me to a new way to look at data that changed my career. I am excited to share the same foundational data analysis concepts with you now. I will f<span>orever be grateful for working with my former colleagues at Axis Group.</span></p>
<p>It begins with learning about the data modeling methods created by Ralph Kimball and Bill Inmon, who are commonly known as the founding fathers of data warehousing. Both men defined approaches that can be used to structure data that scales with any size of company and subject area, with a focus on the analysis of data and creating reports against it. Their contributions to the data technology industry were so monumental that I identified them as part of the <em>Evolution of Data Analysis</em>, which I discussed in <a href="https://cdp.packtpub.com/python_data_analysis_beginners_guide/wp-admin/post.php?post=24&amp;action=edit">Chapter 1</a>,<em> Fundamentals of Data Analysis.</em></p>
<p>A data warehouse, which is commonly known as an <strong>Enterprise Data Warehouse </strong>(<strong>EDW</strong>), is a centralized location of data from multiple sources with the purpose of providing, reporting, and analyzing data.<span class="Apple-converted-space"> </span>Traditional data warehouses are organized by subjects such as human resources, sales, or accounting.<span class="Apple-converted-space"> </span>Depending on the complexity of the Vs of data (<strong>Variety</strong>, <strong>Volume</strong>, and <strong>Velocity</strong>), a data warehouse may be centrally located in one technology solution or distributed across different technologies.<span class="Apple-converted-space"> </span></p>
<p>Why would an organization create a centralized data warehouse?<span class="Apple-converted-space"> </span>Because the consistency and accuracy of reporting against the data source are worth the cost.<span class="Apple-converted-space"> </span>In some cases, the importance of quality is so high that companies invest in the creation of one or more data warehouses.<span class="Apple-converted-space"> </span>Once an organization has defined a need for a centralized location for all data, it would be commonly known as a <em>single version of the truth</em> for all reporting and analysis. Ideally, this is where different datasets from different technology sources could be collected and conformed with defined and consistent business rules.<span class="Apple-converted-space"> A</span> sales manager and <strong>human resources</strong> (<strong>HR</strong>) manager can individually look at data from different reports but have the same accuracy so that data-driven decisions can be made.</p>
<p class="mce-root"/>
<p>Now that you understand why a data warehouse is an important concept, let's briefly review the two common approaches that are used to build them. First, they are not defined to a specific technology, so when a data architect is creating them, the focus is on defining the structure, which is known as the database schema, to support the different subject areas.<span class="Apple-converted-space"> </span>Data subject areas are typically organized by lines of business or organizational structures.<span class="Apple-converted-space"> </span>For example, the HR warehouse will have a focus on employee attributes such as hire date, manager, and job title.<span class="Apple-converted-space"> </span>Once the tables and relationships have been defined, a unique employee identifier can be shared across the organization and other downstream systems such as employee benefits and compensation.</p>
<p>The approach we use to build the warehouse design up and out across the company follows two different approaches.<span class="Apple-converted-space"> </span>Bill Inmon suggests a top-down approach where the organization makes a strategic solution to define a common standard before implementation.<span class="Apple-converted-space"> </span>Ralph Kimball recommends a bottom-up approach, where each subject area is built to support management decision needs with less enforcement to a rigid standard.</p>
<p>For example, I was with a client where the sales teams did geographic hierarchal reporting with defined regions to organize the counties they did business with.<span class="Apple-converted-space"> </span>So, a region was defined in the warehouse with the precise short abbreviations to represent the values and provide consistency between any reports or analytic applications.<span class="Apple-converted-space"> </span><strong>EMEA</strong> represented all countries in Europe, the Middle East, and Africa, for example.<span class="Apple-converted-space"> </span></p>
<p>This approach worked fine until the HR team decided they wanted to break out the counties in EMEA for better reporting and analysis.<span class="Apple-converted-space"> </span>To solve this, they had a few options, including creating a second level in the hierarchy in between the country and the region so that reporting would need a drill-down; for example, EMEA to the Middle East to Israel.</p>
<p class="mce-root">Another option was to create an HR region field that was independent of how the sales regions were defined.<span class="Apple-converted-space"> </span>This allowed us to send reporting and analysis details to executives without impacting anything related to sales analysis. This option worked as a solution because the engineering team was able to please business users across multiple departments while still creating the value of consistency across all downstream reporting solutions.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root">Dimensionally modeling your data for reporting and analysis is technology-agnostic. While the concept and techniques are commonly found in SQL solutions, you are not restricted to using only database technologies to model your data for analysis. The first step is to understand what questions you are <em>trying</em> to answer with the data. Then, you can decide which model will best answer the questions at hand. Some common questions you can apply to almost any data model are as follows:</p>
<ul>
<li><strong>Who?</strong> Identifying the who in data should be straightforward. For employee data, the who is the actual employee unique identifier, along with all the attributes that make up that individual, including their first name, last name, date of birth, email, hire date, and so on. For sales-related data, the customer would be the <em>who</em>, so this would be the customer's name, mailing address, email, and so on.</li>
<li><strong>What?</strong> What product or server is being purchased? This would also include all the attributes (columns) unique to each product. So, if I purchased a cup of coffee, the size, flavor, and unit cost should be included.</li>
<li><strong>When?</strong> When is a very common question and with it, it's easy to identify the different fields associated with answering this question. All date, time, and timestamp fields are used to answer the question of when. For example, if a web user accesses a website, the <em>when</em> is the specific date and time that was recorded for that event. This becomes more complicated if the date/time data type is not standardized or doesn't account for time zones such as <strong>Coordinated Universal Time</strong>. (<strong>UTC</strong>). Once you have the specific grain of detail behind all associated values, <em>Year</em>, <em>Month</em>, <em>Week</em>, and <em>Weekday</em> can be determined.</li>
<li><strong>Where?</strong> Where did the sale of the product or service occur? Do we have geographic location details or was it a store located with a street address?</li>
<li><strong>How?</strong> How does the event occur and how did it happen? Was the <em>how</em> of an activity, event, or outcome like a user clicking on a button to add an item to their shopping cart?</li>
<li><strong>Why?</strong> I think <em>why</em> is usually the most important question in data analysis and the one that's requested the most often by business users. Was the <em>why</em> a promotion or marketing campaign such as a flash sale for a specific product or service?</li>
</ul>
<p>A visual representation of this can be seen in the following diagram, which shows all these key questions as dimensions, with an <strong>Event Fact</strong> in the center. This is commonly known as a <strong>star schema</strong> relationship, where high-volume transactions with many rows are stored in the <strong>Event Fact</strong> and distinct and unique values are stored in dimensional tables that address the questions of <strong>Who</strong>, <strong>What</strong>, <strong>When</strong>, <strong>Where</strong>, <strong>How</strong>, and <strong>Why</strong>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/a7c577ab-f1c0-4802-8238-8532734dcd67.png" style="width:32.50em;height:20.92em;"/></p>
<div class="packt_tip">The rule of thumb is that the Event Fact table is narrow (a low number of fields with multiple join key fields) with a high number of rows. Dimensional tables will have district records with wide attributes (a high number of fields with a single join key).</div>
<p>In the process of asking and answering these questions, you end up grouping one or more fields together from the source data into defined relationships. For example, for all the customer attributes, you could create a table, CSV file, or DataFrame with all the different fields using a single unique key to identify each customer. Creating a data model is the foundation of building out charts and data visualizations.</p>
<h1 id="uuid-4cb17a1f-273b-4d0a-9fae-fe70a0105117">Anatomy of a chart and data viz best practices</h1>
<p>So, what makes a good chart or visualization? The answer depends on a few factors, most of which boils down to the dataset you are working with. Think of a dataset as a table of rows and columns that has consistency for each column or field available. For example, <span class="packt_screen">Year</span> should have values of <kbd>2013</kbd>, <kbd>2014</kbd>, and <kbd>2015</kbd> all in the same consistent format. If your dataset has inconsistent formats or a mix of values, then cleansing your dataset before creating the chart is recommended. Data cleansing, or scrubbing, is the process of fixing or removing inaccurate records from your dataset. Charts need uniformity for reasons such as sorting the year values in ascending order to present a trend accurately.</p>
<p>Let's go with a simple example, as shown in the following diagram. Here, on the left-hand side of this dataset, we have a uniform table of data with four rows, two columns, and a header row. To ensure that you understand this concept, a table is a type of chart where you can define dimensions and measures. The header of this chart makes it easy for us to understand what the values should represent for each row because each column has consistent formats. As we covered in <a href="https://cdp.packtpub.com/python_data_analysis_beginners_guide/wp-admin/post.php?post=24&amp;action=edit">Chapter 1</a>, <em>Fundamentals of Data Analysis</em>, we call this a <em>data type</em>, where every value in the same column will help to create a chart that will be much faster:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/7574ddd2-e518-45e5-b122-675e14e88a5f.png" style="width:39.67em;height:21.25em;"/></p>
<p>For the preceding chart, we have some obvious cleanup work to do before creating any visualization. The <span class="packt_screen">Year</span> column in this chart has a mixture of values that will make it difficult for us to create a visual trend because of all the inconsistencies. Also, for the <span class="packt_screen">Sales (in Millions)</span> column, it will be hard to create any aggregation, such as the sum of the total sales, because the values are a blend of numbers and characters. Regardless of the tool that's used to create a chart, having the data cleansed will ensure its quality and accuracy.</p>
<h2 id="uuid-0a98f6b6-88e9-41e4-b6d0-77e1a5250103">Analyzing your data</h2>
<p>Once we have a clean dataset, we are ready to classify the fields of the dataset by the fundamentals of a chart <span>– </span>a dimension and a measure. As we discussed earlier, the easiest way to explain this difference is that a dimension is a noun, which is classified as a person, place, or thing. The most common dimensional field that can be applied to many different datasets is date/time, which allows you to create trends over time.</p>
<p class="mce-root"/>
<p><strong>Measures</strong> are verbs, which are action columns from your data that allow aggregation (sum, count, average, min, max, and so on). In the following diagram, we have a bar chart labeled <strong>Sales (in Millions)</strong> where I have identified the distinction between them:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/d56f3ef2-2fe6-4ba8-b6a0-fcf6ee0708c3.png" style="width:43.67em;height:27.42em;"/></p>
<div class="packt_tip">Any field with any data type can be used as either a dimension or measure in a chart, so be sure the visual you choose answers the business question or provides the required insights.</div>
<p><span>So, why are these concepts important when it comes to creating a chart? They are common across almost all the different chart types, regardless of the technology used to create it. A bar chart that shows trends over time must have a date dimension (day, month, or year) and something to measure – sales, average price, or count of users.</span></p>
<p class="mce-root"/>
<p>So, now that we understand the basics, let's walk through a few examples. The bar trend chart shown in the following diagram has a dimension of <strong>year</strong> and a measure of <strong>Sales by Product</strong>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/44ca9dc0-1496-471d-91e9-d0a4ef728945.png" style="width:20.08em;height:19.42em;"/></p>
<p>To mix it up, the chart has multiple dimensions. In this case, we have two dimensions—<span>the </span>year and the product. The year is displayed in a series on the <em>x</em> axis and is not labeled. The <strong>Product</strong> values are represented as stacked bars with consistent colors for each value corresponding to the legend measured on the <em>y </em>axis.</p>
<p>Charts can be visualized in different types, including the most common: bar, line, and pie. The line chart shown in the following screenshot visually offers us an easy way to identify the accelerated growth over time:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5438bad5-5744-41ac-9ac1-cf2cfc7161c5.png" style="width:68.92em;height:19.92em;"/></p>
<p class="mce-root"/>
<p>The <strong>Combo</strong> chart in the preceding screenshot has both a line and bars in the same chart, with two different measures on the two different axes. In this example, the bars represent the measure of <strong>Avg. Temperature (F)</strong>. These can be seen<strong> </strong>on the right axis and are using Fahrenheit as a scale. The line shows the <strong>Avg. Rain Fall (in)</strong> measure, which is labeled on the left-hand side axis from <span class="packt_screen">1.50</span> to <span class="packt_screen">6.00</span> inches.</p>
<p>Having two measures allows us to perform a comparative analysis against different measures using a common dimension, which is a date in the prior example. Depending on the charting technology used in this example, different date dimensions such as timestamp, date, or numeric month values can be used on the <em>x</em> axis <span>as a month represented in <span class="packt_screen">MMM</span> format. </span>The end result of this chart tells a dramatic story of how these two measures compare throughout time by highlighting the low and high outliers without scanning or searching for them in a table.</p>
<h2 id="uuid-cb45ba68-8b78-476f-bba7-3ce7ef03c078">Why pie charts have lost ground</h2>
<p>Pie charts have lost favor as the go-to chart, but were widely used in the past. In fact, an entire book written by Stephen Few covers the <em>dos and don'ts of dashboarding</em>, where he points out why pie charts should be replaced by alternatives, such as the horizontal bar chart provided here. I have provided a reference to the book in the <em>Further reading</em> section if you want to find out more.</p>
<p>Some key advantages of horizontal bar charts over a pie chart are as follows:</p>
<ul>
<li><strong>Ease of consumption</strong>: I don't have to look at a legend to look up the dimension's values.</li>
<li><strong>Sort ability</strong>: You can sort by the highest or lowest values to emphasize importance within your dataset.</li>
<li><strong>Best of both worlds</strong>: They have distribution and relative value, just like a pie chart. If you look at the following chart, you'll see that <strong>Product 1</strong> is twice as large as <strong>Product 5</strong>. Here, you can quickly see by how much because the same <em>x</em> axis is used for easy reference to the bar width.</li>
</ul>
<p class="mce-root"/>
<p class="mce-root"/>
<p>The following is an example of a horizontal bar chart:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-763 image-border" src="assets/98aee36c-51de-4187-820d-7c8e9fe39afa.png" style="width:30.42em;height:22.75em;"/></p>
<p>If you still find a need to use pie charts, they work best if you only have two distinct values. In the following example, you can easily see the distribution between the <strong>Yes</strong> and <strong>No</strong> values. The use of a primary color for emphasis, as well as using a muted grey color for the negative, helps communicate a positive message in this chart:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-764 image-border" src="assets/0d016341-0f40-429b-a7f5-282a61dc55d6.png" style="width:24.42em;height:20.00em;"/></p>
<p class="mce-root"/>
<p>Choosing the right chart is a balance between what story the author wants to tell using the data and the number of dimensions and measures available from the data. I find it to be an <em>art and science</em> approach where practice improves how you create good visualizations. There are numerous resources available regarding which chart helps you tell the best story. Now that you know the ingredients of any chart type that use <span>dimensions and measures</span>, you have a common framework that you can apply across any technology and subject area. Choosing the right visual chart that helps you convey the right message also takes time, experience, and even trial and error.<span class="Apple-converted-space"> </span></p>
<p>Since I classify data visualization as <em>an</em> <em>art and a science</em>, it does take time to go through the profile and understand the business questions you are trying to answer. Feel free to use the chart options outlined in the <em>Further reading</em> section for guidance. Be sure to remember a few of these tips:</p>
<ul>
<li><strong>Reusing code is highly encouraged</strong>: Don't reinvent the wheel by creating a new chart from scratch. Find a good example and attempt to fit your data into the dimensions and measures.</li>
<li><strong>Less is more</strong>:<span> Avoid distractions and let the data tell the story – use visual cues for emphasis and highlighting outliers. Overusing multiple colors is distracting to the consumer, so only use one color to highlight what you want the audience of the chart to focus on.</span></li>
<li><strong>There are plenty of experts out there</strong><span>: Use them! I have placed a few URL links in the <em>Further reading</em> section to help.</span></li>
</ul>
<h2 id="uuid-a980e537-1adb-41ed-b161-a41beeb511cb">Art versus science</h2>
<p>For me, data visualization is <em>an</em> a<em>rt and a science</em>. For me, it started in fourth grade with my teacher, Mr. Segar, who inspired creativity and introduced me to master craftsmen such as Van Gogh, Chaggal, and Cezzane. Art<span> </span>is creating and inspiring free thought through visual imagery. How art is defined is subjective, but it commonly includes the <em>elements of art</em>, which are shape, form, value, line, color, space, and texture. Let's break down each one:</p>
<ul>
<li><strong>Shape</strong><span class="packt_screen"> </span>as an element of art is defined as the <em>area defined by edges</em>. Shape provides visual context and boundaries outside the work of art<span> </span><span>to the consumer of it</span>. </li>
<li><strong>Form</strong><span class="packt_screen"> </span>is defined as the <em>perceived volume or dimensionality</em> of an artwork. So, form would control the boundaries inside the shape.</li>
<li><strong>Value</strong><span class="packt_screen"> </span>is the use of lightness and darkness within the artwork. Light is obviously an important element for any work of art and includes the full spectrum of light and lack thereof.</li>
<li><strong>Line</strong><span class="packt_screen"> </span>as an element of art, which can be straight or curved, spans the distance between two points, which allows the artist to define intensity in the form.</li>
<li><strong>Color</strong><span class="packt_screen"> </span>is probably the most well-known elements of art and is from when light impacts an object. This helps the consumer of the work of art to visually interpret pieces individually or in their totality. The properties of color include hue, which is what we commonly identify with colors such as <em>red</em>, <em>yellow</em>, and <em>blue</em>. Color also includes intensity, which is controlled by the full spectrum of colors available, along with value, which controls the brightness. </li>
<li><strong>Space</strong><span class="packt_screen"> </span><span>is the area defined by the artist when they include the background and foreground. The distance in or around the space is another important factor to consider.</span></li>
<li><strong>Texture</strong><span class="packt_screen"> </span>for the consumer of the artwork is the visual feeling portrayed in two-dimensional art. </li>
</ul>
<p><strong>Science</strong><span class="packt_screen"><span> </span></span>is all about empirical evidence, which can be defined as data that's acquired by observation or experimentation. Data has always been part of the scientific method and is critical to collecting evidence to prove a theory or hypothesis.</p>
<p>When these two concepts come together, they allow you to tell a story with information using data visualizations that provide insights and give us the ability to understand trends instantly.</p>
<h2 id="uuid-35a1637d-5406-485a-a73e-e6848b578ea7"><span>What makes great data visualizations?</span> </h2>
<p><span>For me, it has been</span> a <span>subjective question with my answer evolving over time, which means it can be a challenge to provide a straightforward answer.</span></p>
<p>What I find beautiful and intuitive might not be as insightful to others.<span class="Apple-converted-space"> </span>This is similar to works of art where different styles, periods, and artists will have lovers and critics.<span class="Apple-converted-space"> </span>Over the last few years, I have witnessed how data visualizations have evolved into an art form where technology and coding have allowed creativity to flourish. This movement from creating simple charts, plots, and graphics has evolved to what is commonly known as <strong>data viz</strong>.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Data viz can be anything from an infographic to an animated visual that can tell a story with data. When I see something that is aesthetically pleasing and inspires me to take action, I would classify that as a great data visualization. These actions can vary based on the information provided, but common responses include sharing the data viz with others with the intention of sparking a dialog about it.<span class="Apple-converted-space"> </span>Also, a great data viz should reveal patterns and trends. This helps the consumer easily separate the actionable information from the noise.<span class="Apple-converted-space"> Noise in data means the audience is confused by the chart or no recognizable visual patterns are evident. T</span>he graphic that's displayed should be intuitive to the audience and not require additional context or force the consumer to look up additional information just to understand the chart.</p>
<p>There are experts in the field of data viz that I've included in the <em>Evolution of data analysis</em> section of <a href="https://cdp.packtpub.com/python_data_analysis_beginners_guide/wp-admin/post.php?post=24&amp;action=edit">Chapter 1</a>, <em>Fundamentals of Data Analysis</em>. They include Stephen Few, Edward Tufte, and Alberto Cairo.<span class="Apple-converted-space"> </span>I would encourage you to research their many different books and writings about this subject <span>–</span> I have also added some of their works in the <em>Further reading</em> section.</p>
<p>Another champion in the world of data viz is Naomi B Robinson, who is the founder of the <strong>Data Visualization New York</strong> chapter on <a href="http://meetup.com"><span>Meetup.com</span></a>. This public community brings together professional experts across any industry with spectrum specialty skills including journalism, software development, data architects, UI/UX experts, graphic designers, and data scientists.<span class="Apple-converted-space"> <span>With members from around the world,</span></span> their mission is to share best practices, expertise, and create an open forum to promote data as a craft.<span class="Apple-converted-space"> </span>Membership is open to anyone, so I would encourage you to join as a member and hope you enjoy the events as much as I do.</p>
<p>Some of the insights I have gained over the years about data viz include the following:</p>
<ul>
<li><em>Data viz is a craft</em> that will take time to master but will have rewards as a career because the more techniques you learn, the better you will get at creating them.</li>
<li>Technology alone will not make a great data visualization.<span class="Apple-converted-space"> Technology</span> enables the author of a chart, dashboard, or app to create data solutions, but there is a learning curve when it comes to mastering each tool.</li>
<li>A <em>great data viz will inspire people to promote and evangelize the story</em> about data without the context of how it was created.<span class="Apple-converted-space"> </span></li>
</ul>
<p>An example of a great data viz can be found in the documentary <em>The Inconvenient Truth</em>, where a single line chart was the focal point of why people should pay attention to climate change. The inclusion of this one graph, which was shaped like a hockey stick, sparked both controversy and conversation.<span class="Apple-converted-space"> </span>More importantly, this data visualization conveyed a story using data to an audience beyond the scientific community.</p>
<p class="mce-root"/>
<h1 id="uuid-b4b5f558-241f-422f-b0dc-33962bdc13e7">Comparative analysis</h1>
<p>Now that we have a better understanding of the anatomy of a chart, we can start looking at time series charts in depth by explaining some of the differences between the date and time trends in charts.</p>
<h2 id="uuid-008e9bee-ad89-4dae-9e57-286f43695b92">Date and time trends explained</h2>
<p>We'll begin with the example shown in the following graph, where we have a line chart with each data point represented by a single value. The first great thing about visualizing data is how easy it is to interpret the results without having all the context of how it was generated:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-766 image-border" src="assets/d34afebe-4037-4ce4-a9e9-a46ac9b4cb21.png" style="width:63.42em;height:25.25em;"/></p>
<p>A best practice to emphasize in the preceding chart is t<span><span>he date values that are presented are in the standard and consistent format of <span class="packt_screen">YYYY-MM-DD</span>. There are multiple reasons why this is important. For the producer of the chart, having a consistent data type ensures all the values are accurate for sorting and completion, which </span><span>means</span><span> the data visual matches the source data. Another factor to consider as the producer of the chart is regarding what the lowest available date value available is in the source data across all the values. This concept is known as the</span></span> <span><span><span><em>grain of data</em>, which determines which date can be used as the dimension for the chart. If a mix of daily and monthly data values exists in the same field, you should not display them in the same chart <em>as is</em> as this may </span>confuse<span> the consumer. </span></span></span></p>
<p class="mce-root"/>
<p>My colleague Mike Ursitti is fond of saying good dashboard design is when you have created a solution where the consumer does not have to think, so interpretation by any audience becomes natural. He's right, of course <span>– </span>it's easy to create distractions where the date values that are displayed are inconsistent or overuse color leads, which leads to more questions about what the producer of the chart was attempting to portray. So, as a data analyst, spend time thinking about which layout and design will present your analysis in a logical fashion that is easy to consume by any audience.</p>
<p>In the following chart, we have the same data source as in the previous example but now the data has been aggregated by month, represented as an integer value from 1 to 12. The labels used in this case are important to help the consumer understand which aggregation is used to represent the values displayed for each period of time. The ability to look at data from different date formats is a crucial skill to learn for data analysis and improves your data literacy:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-767 image-border" src="assets/7d911b58-f838-4875-b2b9-4dafe9bdf4fd.png" style="width:72.50em;height:30.08em;"/></p>
<p>To <em>argue</em> about the insights from this chart requires that you understand whether the correct aggregation is used appropriately. In many cases, that requires both the consumer and producer to have an understanding of the data subject and how it should be used. For this example, summing the values in the <em>Daily Close Stock price</em> per month would not be relevant for this data domain and a subject matter expert would call this type of measure inaccurate.</p>
<p>However, offering a different date format provides us with an opportunity to look at the data in a way that may not have been originally considered. You also can provide insights faster because you don't have to hunt to find a specific value at the individual date value. For example, looking at a 12-month trend shows 12 data points on a line chart versus displaying dozens or even hundreds of individual days.</p>
<p class="mce-root"/>
<p>Comparing results over periods of time in a chart allows you to quickly spot outliers or identify trends in the data. For example, if you plot a chart of Apple's closing stock prices for each day, you will see upward or downward trends visually based on the skew of the line. This allows the consumer to identify patterns in the data faster and may not be as evident if you looked at each value individually.</p>
<p>Another popular and useful data analysis is <strong>year over year</strong>. If you are looking at the current year, this analysis is commonly known as <strong>year to date</strong> (<strong>YTD</strong>) versus <strong>prior year to date</strong> (<strong>PYTD</strong>). In this case, you have to define a fixed point in the current year, such as the current day or month, and then only include the days or months from last year that align to the prior year.</p>
<p>The following chart<strong> </strong>is an example of this useful analysis where we compare the volume of Apple shares traded over every month from January to April in the current year, which was identified as <span class="packt_screen">2019</span>, and then compared the results with the same months during the prior year, which was identified as <span class="packt_screen">2018</span>. I find using a line chart is a useful way to visualize this type of analysis because it's easy to contrast the differences between the two lines. A simple tabular view would also demonstrate the differences between them to the consumer of this data:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-769 image-border" src="assets/70b24385-569b-4589-a31f-96b80f045ed9.png" style="width:61.33em;height:36.75em;"/></p>
<p><span>The following table shows an example of the same data but displayed in a different chart type. The preference of how to present this data visually can vary and you should be able to produce either option for your audience:</span></p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-770 image-border" src="assets/56c8c61e-08c2-458a-b335-fe002feabf58.png" style="width:22.33em;height:7.92em;"/></p>
<h1 id="uuid-ea208cf6-fa85-4647-9673-244dce87f0ce">The shape of the curve</h1>
<p>We will now dive into creating visualizations from data using a new library named <kbd>matplotlib</kbd>, which was installed when you used Anaconda for the first time. According to the history page from <a href="http://matplotlib.org"><span>matplotlib.org</span></a>, this library evolved from MATLAB graphics and was created by John D. Hunter with the philosophy that <em>you should be able to create simple plots with just a few commands, or just one!</em></p>
<p>Like many of the libraries we've introduced, there is a multitude of features and capabilities available to help you create charts and data visualizations.<span class="Apple-converted-space"> </span>The <kbd>matplotlib</kbd> library has an ecosystem that you can apply to different use cases that nicely compliment the libraries of <kbd>pandas</kbd> and <kbd>numpy</kbd>.</p>
<div class="packt_tip">There are many tutorials and additional resources available to help you learn the library. <span>I have added the necessary links in the <em>Further reading</em> section for your reference.</span></div>
<p>In this example, we are going to load a CSV file that contains stock price details for a publicly-traded company on the <strong>National Association of Securities Dealers Automated Quotations Exchange</strong> (<strong>NASDAQ</strong>). We are going to visualize one dimension and one measure using a line chart to see if we can identify any trends in the data. </p>
<p>To dive in, let's create a new Jupyter Notebook and name it <kbd>create_chart_with_matplotlib</kbd>. For this example, we will use a few libraries and commands we learned in prior chapters. I'll walk you through each step in the code, so <span>feel free to follow along. I have placed a copy on GitHub for reference.</span></p>
<h2 id="uuid-8e215394-ad1f-4c84-9901-e207d89fd811">Creating your first time series chart </h2>
<p>Follow these steps to create your first time series chart:</p>
<ol>
<li>To load the <kbd>pandas</kbd> library, use the following command in your Jupyter Notebook and run the cell: </li>
</ol>
<pre style="padding-left: 60px">In[]: import pandas as pd</pre>
<div class="mce-root packt_tip">This library should already be available using Anaconda. Refer to <a href="https://cdp.packtpub.com/python_data_analysis_beginners_guide/wp-admin/post.php?post=24&amp;action=edit">Chapter 2</a>, <em>Overview of Python and Installing Jupyter Notebook</em>, for help with setting up your environment.</div>
<ol start="2">
<li>Next, we can load the CSV file <span>in a new DataFrame as <kbd>df_stock_price</kbd> to make it easier to identify. To reduce the number of steps to prepare the data for analysis, we are passing some parameter commands to the <kbd>pd.read_csv</kbd> function to index the first column in the file. We will also include the <kbd>parse_dates</kbd> parameter to define the data type of the <kbd>Date</kbd> field as <kbd>datetime64</kbd></span>:</li>
</ol>
<pre style="padding-left: 60px">In[]: df_stock_price=pd.read_csv('AAPL.csv', index_col=0,parse_dates=True)</pre>
<div class="mce-root packt_tip">Be sure you have copied the <kbd>AAPL.csv</kbd> file to the correct Jupyter folder directory to avoid errors when importing the data file.</div>
<ol start="3">
<li>As a good best practice before visualizing the data, let's ensure the DataFrame can be read using the <kbd>head()</kbd> command:</li>
</ol>
<pre style="padding-left: 60px">In[]: df_stock_price.head(3)</pre>
<ol start="4">
<li>The output will look as follows,<span> </span><span>where the source</span> CSV <span><span>file has been loaded into a DataFrame with a labeled header row with the index column defined as <kbd>Date</kbd>:</span></span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-771 image-border" src="assets/a28abb62-4c10-4f33-aaef-6fbe2a1c6d89.png" style="width:40.33em;height:13.25em;"/></p>
<ol start="5">
<li class="mce-root"><span>T</span>o validate that the data type<span> of the index field is accurate, you can run the following command:</span></li>
</ol>
<pre style="padding-left: 60px">In[]: df_stock_price.index</pre>
<ol start="6">
<li>The outpu<span>t will look as follows,</span> <span>where the data type</span> (<strong>dtype</strong>) <span>of the index that was defined for this DataFrame is assigned to the <kbd>Date</kbd> field:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-772 image-border" src="assets/03216224-5b9d-4c4d-9367-80c702f68fd1.png" style="width:41.83em;height:13.75em;"/></p>
<div class="packt_tip">Having the index defined as a <kbd>datetime</kbd> data type field series will make the plot features much easier to work with. The more data preparation that's done before visualizing will ensure faster creation of charts. </div>
<ol start="7">
<li>Now, we can import the <kbd>matplotlib</kbd> library so that we can reference functions to visualize data. Matplotlib is a powerful library with multiple modules. We will explicitly focus on the <kbd>pyplot</kbd><em> </em>module for this example. We'll use the common <kbd>plt</kbd> shortcut for easy reference and adoption of the best practice standards: </li>
</ol>
<pre style="padding-left: 60px">In[]: import matplotlib.pyplot as plt</pre>
<ol start="8">
<li>Let's create a quick line chart using the <kbd>plot()</kbd> function against our DataFrame. To avoid confusion when it comes to interpreting the visualization or an error processing the chart, let's include the specific <kbd>Close</kbd> field. Be sure to include a semicolon at the end of the line when using this library:</li>
</ol>
<pre style="padding-left: 60px">In[]: df_stock_price['Close'].plot()</pre>
<div class="packt_tip">You may need to include an additional line of <kbd>%matplotlib inline</kbd> to display results in your Jupyter Notebook. This extra line is known as a magic function.</div>
<ol start="9">
<li>The output will look as follows, where a line chart is displayed, which is the default option. This displays a trend line with the <em>x </em>axis using the <kbd>Date</kbd> field, which is also the dimension, and the <em>y</em> axis using the <kbd>Close</kbd> price field values, which is our measure:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-773 image-border" src="assets/edd46fea-9afa-4e1f-bb6c-0b7ad64f2364.png" style="width:28.42em;height:19.92em;"/></p>
<ol start="10">
<li>The <kbd>plot()</kbd> function has many different parameters that can be used to customize the visualization. Let's explore a few easy changes by adjusting the line width, color, and line style using the following command:</li>
</ol>
<pre style="padding-left: 60px">In[]: df_stock_price['Close'].plot(linewidth=.5, color='green',linestyle='dotted')</pre>
<p class="mce-root"/>
<ol start="11">
<li>The output will look as follows, where the same line chart is displayed, except the color has changed, the line width has been reduced, and the style of the line is dotted:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5c90a0db-06a9-4a52-83c0-81834690e0c9.png"/></p>
<div class="packt_tip">There are many different parameters that allow you to change the style of the visualization with some minor adjustments. I've put a reference to the library for you to explore in the <em>Further reading</em> section.</div>
<ol start="12">
<li>Next, let's enrich the chart features by including more details for the consumer by adding labels:</li>
</ol>
<pre style="padding-left: 60px">In[]: df_stock_price['Close'].plot(linewidth=.5, color='green',linestyle='dotted')<br/>plt.xlabel('Close Date')<br/>plt.ylabel('Close Price')<br/>plt.suptitle('AAPL Stock Price Trend');</pre>
<ol start="13">
<li>The output will look as follows, where the same line chart is displayed before, except now we include context details such as dimension and measure labels, along with the header of the chart: </li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/fbd914fc-ea90-4c33-a8c5-652bb03d351a.png"/></p>
<ol start="14">
<li>Another data visualization feature available in this library is a bar chart. To use this feature, we have to make a few adjustments to the commands. To answer the question, <em>What is the stock volume trend?</em>, we can use this command. Note the use of <kbd>.index</kbd> to pass the <kbd>Date</kbd> field values:</li>
</ol>
<pre style="padding-left: 60px">In[]: plt.bar(df_stock_price.index,df_stock_price['Volume']);</pre>
<p style="padding-left: 60px">The output will look as follows, where the chart displays values as a bar chart:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/f9868f90-22bf-4ab1-8449-5f61ce439ae4.png" style="width:41.92em;height:23.50em;"/></p>
<ol start="15">
<li>However, I see some issues with how this chart is presented to the consumer. The labels are overlapping, so it's difficult to understand the visualization. Let's add a few minor adjustments to make the chart more aesthetically pleasing:</li>
</ol>
<pre style="padding-left: 60px">In[]: plt.bar(df_stock_price.index,df_stock_price['Volume'], color='blue')<br/>plt.xticks(rotation = 90)<br/>plt.yticks(fontsize = 10)<br/>plt.xlabel('Date')<br/>plt.ylabel('Volume')<br/>plt.suptitle('AAPL Stock Volume Trend');</pre>
<p class="mce-root"/>
<p style="padding-left: 60px" class="mce-root">The output will look as follows, where the chart displays values as a bar chart. Note, however, that the labels have been added to make the chart easier to consume and understand:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/3874fb0b-e55a-4440-bdb4-69919c9298b6.png"/></p>
<p class="mce-root">These steps define the best practice for producing an analysis workflow to visualize your data. Once you store data in a DataFrame and load the <kbd>matplotlib</kbd> library, visualizing your data becomes much faster. A little trial and error as you make adjustments to the parameters during this process is common. Always save your work and examples so that you can easily recreate the data visualizations that provide insights quickly without you having to sift through rows of data.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<h1 id="uuid-f7c571b0-aeaa-424c-825a-2c8422426bbf" class="mce-root">Summary</h1>
<p class="mce-root">Congratulations <span>–</span> you have now learned some exciting new ways to visualize data and interpret various chart types to help expand your data literacy skills! In this chapter, you learned some best practices to find the right chart for the right type of analysis. You also learned the difference between a dimension and a measure, along with how to model data for analysis to answer questions.</p>
<p class="mce-root">Next, you learned some essential skills for making various plots, such as line graphs and bar charts, by exploring the various time series and date functionality in pandas. We highlighted leaders such as Alberto Cairo and Naomi B. Robbins in the world of data visualization and discussed how they have influenced the evolution of data analysis. Finally, you used the <kbd>.plot()</kbd> method to create time series charts using the <kbd>mat<span>plot</span>lib</kbd> library.</p>
<p class="mce-root">In the next chapter, we will explore techniques we can use to clean, refine, and blend multiple datasets together.</p>
<h1 id="uuid-0a7c4f0a-c264-40ff-b4bb-7493267f134b" class="mce-root">Further reading</h1>
<ul>
<li>Reference to all the Matplotlib library features: <a href="https://matplotlib.org/index.html">https://matplotlib.org/index.html</a></li>
<li>Data visualization pitfalls to avoid: <a href="https://www.ometis.co.uk/data-visualisation-pitfalls/">https://www.ometis.co.uk/data-visualisation-pitfalls/</a></li>
<li>Nice writeup to help you choose the right chart: <a href="http://extremepresentation.typepad.com/blog/2006/09/choosing_a_good.html">http://extremepresentation.typepad.com/blog/2006/09/choosing_a_good.html</a></li>
<li>A great website to help you find the right chart for the right type of analysis:<a href="http://labs.juiceanalytics.com/chartchooser/index.html"> http://labs.juiceanalytics.com/chartchooser/index.html</a></li>
<li>A nice cheat sheet to improve data viz: <a href="http://billiondollargraphics.com/wp-content/uploads/2015/09/Billion-Dollar-Graphics-Graphic-Cheat-Sheet.pdf">http://billiondollargraphics.com/wp-content/uploads/2015/09/Billion-Dollar-Graphics-Graphic-Cheat-Sheet.pdf</a></li>
<li>Data visualization guide: <a href="http://www.excelcharts.com/blog/god-and-moses-the-differences-between-edward-tufte-and-stephen-few/">http://www.excelcharts.com/blog/god-and-moses-the-differences-between-edward-tufte-and-stephen-few/</a></li>
<li>The Functional Art blog: <a href="http://www.thefunctionalart.com/">http://www.thefunctionalart.com/</a> <a href="http://www.thefunctionalart.com/"/></li>
<li>The NYC Data Visualization Meetup chapter, which is open to members from around the world: <a href="https://www.meetup.com/DataVisualization/">https://www.meetup.com/DataVisualization/</a></li>
<li>The Kimball Group Dimensional Modeling Techniques: <a href="https://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/">https://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/</a></li>
</ul>


            </article>

            
        </section>
    </body></html>