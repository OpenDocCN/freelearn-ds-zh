<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Styling Data</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will be styling GIS data. We will be using data stored in a GeoPackage. We will style vector layers based on data in the attribute table, and raster data using the vast array of rendering tools available to us. After we have created the styles, you can save and reuse them.</p>
<p><span>QGIS, by default, will randomly assign colors to every layer, and while this was useful when editing and creating, we'd like to visualize our data better. This will help us to produce a much more useful and pleasing map. This is the focus of this chapter.</span></p>
<p>These are the topics covered in this chapter:</p>
<ul>
<li>Layer Styling Panel</li>
<li>Styling vector data</li>
<li>Styling raster data</li>
<li>Saving style files</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Layer Styling Panel</h1>
                </header>
            
            <article>
                
<p>The <span class="packt_screen">Layer Styling</span> Panel offers a shortcut to the styling options of the <span class="packt_screen">Layer Properties</span> dialog box. It allows the user to make updates to the styling of a layer and see it update instantly on the map.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Open QGIS. Load the following layers from the GeoPackage, and keep them in the following order in the <span class="packt_screen">Layers</span> panel:</p>
<ul>
<li><kbd>Airports</kbd></li>
<li><kbd>majrivers</kbd></li>
<li><kbd>grassland</kbd></li>
<li><kbd>alaska</kbd></li>
</ul>
<p>The layers are ordered from the top in points, lines, and polygons for ease of visibility. Turn on the <span class="packt_screen">Layer Styling</span> <span class="packt_screen">Panel</span>. Do this by clicking on <span class="packt_screen">View</span> | <span class="packt_screen">Panels</span> | <span class="packt_screen">Layer Styling</span> <span class="packt_screen">Panel</span>, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ba2e2c18-b822-480b-b90d-a887aab5fe1e.png" style=""/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Activating the Layer Styling Panel</div>
<div class="packt_tip">Once you turn on the Layer Styling Panel make sure that the checkbox next to <span class="packt_screen">Live update</span> (bottom right of the Panel) is ticked so any updates can be seen as they are made.</div>
<p>Right-click on the <kbd>alaska</kbd> layer and select the <span class="packt_screen">Zoom to Layer</span> option. Your screen should look similar to the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/298c0b19-2f78-4987-acfb-3e5e9eff7dda.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Overview of all layers loaded into QGIS</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Styling vector data</h1>
                </header>
            
            <article>
                
<p>In this section, we will explore the options for styling vector data. We will look at clustering point data and converting it to a heatmap. We will look at styling the major rivers in Alaska, but first we will explore the options for styling polygon data, beginning with the boundary of Alaska.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Styling polygon data</h1>
                </header>
            
            <article>
                
<p>In this section, we will be styling the <kbd>alaska</kbd> and <kbd>grassland</kbd> layers. Turn all the other layers off in the <span class="packt_screen">Layers</span> panel. We will style the data via the <span class="packt_screen">Layer Styling</span> Panel on the right in the preceding image, as it is interactive. However, if you prefer, you can access the same information by right-clicking on a layer and selecting <span class="packt_screen">Properties</span> and then <span class="packt_screen">Symbology</span> tab.</p>
<p>Choose <span class="packt_screen">Single symbol</span> and from the symbol layer, type then select <span class="packt_screen">Shapeburst fill</span>. <span class="packt_screen">Shapeburst fill</span> is the shading of the interior edge of a polygon. I have chosen a blue color for the border of my <kbd>alaska</kbd> layer. Set the distance of the fill to <span class="packt_screen">2.00</span> millimeters as follows:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5486b0c4-2185-4db4-80f8-3a670a7ebf40.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Layer Styling Panel</div>
<p>This produces a nice styling. We can refine it even further. Click on the checkbox next to <span class="packt_screen">Ignore rings in polygons while shading</span>. Then, click on the <span class="packt_screen">Draw effects</span> button and select the customize effects button. From the resultant dialog box, set the effect to <span class="packt_screen">Colorise</span> as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/074a1834-a2fc-472d-ab32-3dc61157e03c.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Advanced polygon styling in the Layer Styling Panel</div>
<p>The <kbd>alaska</kbd> layer should now be styled and look similar to the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/1d90f988-277f-4c39-a59f-8a6392bfb796.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Alaska boundary styled</div>
<p>Next, turn on the <kbd>grassland</kbd> layer. This time, we will style it using the <span class="packt_screen">F_CODEDESC</span> field. In this field, we have two types: <kbd>grassland</kbd> and <kbd>Scrub/Bush</kbd>. This data is split into classes. QGIS has a renderer to visualize data based on a class in a field; it is called the <span class="packt_screen">Categorized</span> renderer. Select <span class="packt_screen">Categorized</span> as the symbol and select the <span class="packt_screen">F_CODEDESC</span> field. Click on <span class="packt_screen">Classify</span>.</p>
<p class="mce-root"/>
<p>Next, double-click on <kbd>grassland</kbd> and set that to the <span class="packt_screen">wine</span> symbol, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/dba2e2c2-babc-4275-9bde-e00c06ba83bc.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Symbolizing the grassland</div>
<p>Return to the original style selection window by clicking the blue triangle next to the <span class="packt_screen">Symbol Selector</span> label. Double-click on <kbd>grassland</kbd> and change the symbol to <span class="packt_screen">dotted</span>, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/15c4e43c-e8d2-45c6-92d3-8800f45e0bbc.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Symbolizing grassland (2)</div>
<p>Your data should now look similar to the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/de890ce5-11ca-4bc9-840f-a9e5c51bedd5.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Alaska with the grassland symbolized</div>
<p>There are many ways we can style polygon data. Explore the options in the styling menu which can help tune up your visualization if needed. Next, we will take a look at line styling using the <kbd>majrivers</kbd> layer in our GeoPackage.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Styling line data – rivers layer</h1>
                </header>
            
            <article>
                
<p>Select the <kbd>majrivers</kbd> layer from the top of the <span class="packt_screen">Later Styling</span> panel. We will use this layer to create a <span class="packt_screen">Line</span> style that consists of two colors: a fill color and an outline color. Select a <span class="packt_screen">Single symbol</span> in the <span class="packt_screen">Layer Styling</span> Panel. Beneath this <span class="packt_screen">Symbology</span>, click on the green plus icon to add a new simple line. You should now have two lines showing, which will look similar to the following:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/787fde67-b02c-48b8-ba35-26cc2e94a5e3.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Styling the river as lines</div>
<p>Change the top simple line to a blue color of thickness 0.260000 and the bottom to a gray/black color of thickness 0.460000. Click on <span class="packt_screen">Line</span> (directly above these two lines) to highlight the symbol. This will change the <span class="packt_screen">Layer Styling</span><span class="packt_screen"> </span>Panel slightly. At the bottom of this panel, there is a button labeled advanced. Click on this and select symbol levels. From the resultant screen, select the <span class="packt_screen">Enable Symbol Levels</span><span> </span><span>checkbox</span><span>. Your data should now look similar to the following screenshot:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c8326cf9-9ad5-46d2-a615-dd2991438c06.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Alaska with the major rivers symbolized</div>
<p>Next, we will look at styling the <kbd>Airports</kbd> layer.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Styling points – Airports layer</h1>
                </header>
            
            <article>
                
<p>There are many options involving in styling points. First, let's have a look at some of the options.</p>
<p class="mce-root"/>
<p>Point clustering option styles a point layer by clustering point features that are close to other point features. It assigns a number style to the clustered point to indicate the number of points clustered. Turn the <kbd>Airports</kbd> layer on and, in the <span class="packt_screen">Layer Styling</span> Panel, select point clustering. Accept the defaults. You should now have a red marker with the number of points (clusters) at that location. Your map should look similar to this:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/3f2dd5ef-d04f-4458-ab6e-cd060cbd08e4.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Alaska with the airports data displayed as a cluster</div>
<p>Heatmap creation is another option for points. Similar to clustering, we can create density heatmaps of the points<span> </span><span>on the fly</span><span>. From the drop-down list, this time select</span> <span class="packt_screen">Heatmap</span>. <span>Choose a suitable <span class="packt_screen">Color ramp</span>; in the following example, I have chosen the</span> <span class="packt_screen">Spectral</span> <span>color ramp. The point data associated with the</span> <kbd>Airports</kbd> <span>dataset is fairly sparse, and, really</span> heatmap <span>here doesn't serve much purpose for visualizing the data. However, it is a useful tool to know about:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/d0e2b550-a37c-4bdc-a6f9-61cff7e4b63a.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Creating a heatmap from point data</div>
<p>A better way would be to display the airport locations not as heatmaps or as point clusters, but as airplane symbols. Use the <span class="packt_screen">Categorized</span> option for <span class="packt_screen">Symbology</span> in the <span class="packt_screen">Layer Styling</span> Panel. Select <span class="packt_screen">USE</span> as <span class="packt_screen">Column</span> that will define whether the airport is for the following:</p>
<ul>
<li><span class="packt_screen">Civilian/Public</span></li>
<li><span class="packt_screen">Joint Military/Civilian</span></li>
<li><span class="packt_screen">Military</span></li>
<li><span class="packt_screen">Other</span></li>
</ul>
<p>This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ca3903be-6069-45c5-85b2-57c6df998887.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Airports styled by category</div>
<p>By displaying the data in this way, it is possible to see that the majority of the airports are classified as other. This helps us style the map better. This way, we can turn on/off using the check boxes for the airports we wish to display. If we only want to display civilian airports, we can uncheck all the other airport types. The resultant map will look like the following:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e1164908-5774-4fe7-ad4c-ce00a17b0f02.png"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign">Alaska with the civilian airport data displayed</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">A word on data management</h1>
                </header>
            
            <article>
                
<p>It is possible to achieve the same result as shown in the previous section by querying the data directly to only show a selection of data. We could duplicate the same layer, query it, and symbolize it differently, without having any impact on the underlying data. To duplicate the airport data, right-click on the layer in the layer panel and select duplicate layer. This will add exactly the same layer again to the map. You can change <span class="packt_screen">Symbology</span> now, or add labels (more in <a href="2481b8d1-b60c-4839-bb1c-c8654cd792b2.xhtml">Chapter 5</a>, <em>Creating Maps</em>).</p>
<p class="mce-root"/>
<p>Right-click on the new layer and select filter. You can use <span class="packt_screen">Query Builder</span> to build a query that selects only the <span class="packt_screen">Military</span> airports. Double-click <span class="packt_screen">USE</span> from <span class="packt_screen">Fields</span>, then select <span class="packt_screen">=</span> from <span class="packt_screen">Operators</span>, and finally click on <span class="packt_screen">All</span> in <span class="packt_screen">Values</span> and select <span class="packt_screen">Military</span>. <span class="packt_screen">Query Builder</span> will look like the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/917a457a-54c4-4c55-97e3-ae9fadf0729d.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Using the Query Builder to select data</div>
<p>Click on <span class="packt_screen">OK</span>, and then click <span class="packt_screen">OK</span> again to exit the properties dialog box. Now, on the map only military airports will be displayed. This filtering is another way of working with your data. If you open the attribute table for this layer only, <span>only</span><span> </span><span>the filter features will be displayed.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Styling raster data</h1>
                </header>
            
            <article>
                
<p>Turn off all the vector layers. In this section, we are going to focus on rendering raster data. Load into the map the <kbd>SR_50M_alaska_nad</kbd> and <kbd>landcover</kbd> layers. We will style these layers. The options for styling raster data include the following:</p>
<ul>
<li><span class="packt_screen">Multiband color</span>: When you have three or more raster bands (for example, a satellite image), this option allows you to choose which bands are for the red, green, and blue channels</li>
<li><span class="packt_screen">Paletted/Unique values</span>: Colors discrete raster data (<kbd>landcover</kbd> classification, for example)</li>
<li><span class="packt_screen">Singleband gray</span>: Applies a black to white or white to black color ramp for continuous raster data (elevation data, for example)</li>
<li><span class="packt_screen">Singleband pseudcolor</span>: Will apply a color ramp to continuous raster data (elevation data, for example)</li>
<li><span class="packt_screen">Hillshade</span>: Will style a DEM as a hillshade raster on the fly</li>
</ul>
<p>The <kbd>SR_50M_alaska_nad</kbd> image will, by default, load as <span class="packt_screen">Singleband gray</span>. In the <span class="packt_screen">Layer Styling</span> Panel, change <span class="packt_screen">Symbology</span> to <span class="packt_screen">Singleband pseudocolor</span>. Expand <span class="packt_screen">Min / max values settings</span> and select <span class="packt_screen">Cumulative count cut</span> to 1% to 99%, keep <span class="packt_screen">Interpolation</span> as <span class="packt_screen">Linear</span> (as it is a continuous raster dataset), and choose <span class="packt_screen">Viridis</span> as <span class="packt_screen">Color ramp</span>.</p>
<p>The <span class="packt_screen">Layer Styling</span> Panel should look similar to the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e1372757-ae72-4983-9b5e-ba3e7601be4f.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Styling a raster using a Singleband pseudocolor renderer</div>
<p>When working with continuous raster data, it is worth adjusting the settings so they fit your data. Experiment with different stretch settings and color ramps to best explain the data.</p>
<p>The <kbd>landcover</kbd> data is displayed on loading with <span class="packt_screen">Paletted/Unique</span> values <span class="packt_screen">Symbology</span>. As this is discrete data (it has defined classes), this is the most suitable <span class="packt_screen">Symbology</span> type to display the <kbd>landcover</kbd> data. You can adjust the class colors by double-clicking on a color. This will open the color picker tool in the <span class="packt_screen">Layer Styling</span> Panel, which provides several ways to adjust the color. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/06bc831e-a3cd-42e0-a7f5-620d9f33c78c.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">The color picker in QGIS</div>
<p>After selecting the most appropriate colour for a class, click on <span class="packt_screen">Apply</span>. In this case, we don't know what each class represents, so choosing a colour is arbitrary at this point. Back in the <span class="packt_screen">Layer Styling</span> panel, we can assign text to our labels, which is very useful when we produce maps with this data. As you make a change in the <span class="packt_screen">Layer Styling</span> Panel, the map/layer panel will update in real time. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/4e575377-977c-4d34-8510-883ffb7c8ded.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">An overview of styling the landcover raster file</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The Raster Toolbar</h1>
                </header>
            
            <article>
                
<p>Turn on <span class="packt_screen">Raster Toolbar</span> via <span class="packt_screen">View</span> | <span class="packt_screen">Toolbars</span> | <span class="packt_screen">Raster Toolbar</span>. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e5968b45-e0d6-446f-8038-76edd4f529bd.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Raster Toolbar</div>
<p>You can use this toolbar to stretch your continuous raster data (for example, DEM or satellite image data). This is done with the first four buttons shown previously, using a variety of stretches. On the last four buttons, you can increase/decrease the brightness of the raster and increase/decrease the contrast. This toolbar provides handy tools to quickly adjust your data. However, if you want more control, then use the <span class="packt_screen">Layer Styling</span> Panel as previously demonstrated.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Saving styles</h1>
                </header>
            
            <article>
                
<p>Styling data to be presented in a map can take significant time and you may wish to reuse and/or adapt your created styles in the future. This can be done by saving your style as a style file. To do this, right-click on a layer and select <span class="packt_screen">Properties</span>.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p class="mceNonEditable"/>
<p>In the lower-left corner of the <span class="packt_screen">Layer Properties</span> dialog box is a button called <span class="packt_screen">Style</span>, shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/381a694b-c7b1-499c-ab45-450161ba7878.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Saving a style</div>
<p>Select <span class="packt_screen">Save Style</span>. There are three options for saving a style. You can save the <kbd>.qml</kbd> file to your project directory, you can save the style as an SLD (Styled Layer Descriptor file commonly used to style raster data online, in GeoServer for example), or you can save it directly into a GeoPackage. In this case, I have chosen to save it as a <kbd>.qml</kbd> file, with all the categories turned on, in my project directory. Click on <span class="packt_screen">OK</span> to close the <span class="packt_screen">Layer Properties</span> dialog box. Right-click on the layer and, select <span class="packt_screen">Remove Layer</span> to remove it from the project. Now, add the layer back in and the styling will be set to default. Right-click on the layer and from the <span class="packt_screen">Style</span> button, select <span class="packt_screen">Load Style</span> and select the style just created.</p>
<p>Save your project. In the next chapter, we will use this styled data to make a map.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>We have looked at styling both vector and raster data. We have used the <span class="packt_screen">Layer Styling</span> Panel to make styling interactive. We looked at some ways to style polygons, lines, and points within QGIS. Then, we moved on to look at the ways to style both continuous and discrete raster data. Finally, we showed how to save the styles and apply them to layers.</p>
<p>In the next chapter, we will look at using labels to add additional information and then creating a map that can be printed or exported to a file so it can be shared.</p>


            </article>

            
        </section>
    </body></html>