- en: Chapter 2. Visualizing and Styling the Data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第二章：可视化与样式化数据
- en: Collecting and organizing data from different sources is only half of the story.
    The next step is to present it on a map, accurately disclosing thematic content
    and features. For this purpose, various techniques of visual design, or styling
    layers based on their attributes, are used in GIS. QGIS has incredibly broad and
    flexible capabilities of cartographic visualization and data styling.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 从不同来源收集和组织数据只是故事的一半。下一步是在地图上展示它，准确揭示主题内容和特征。为此，GIS中使用了各种视觉设计技术，或基于其属性对图层进行样式设计。QGIS具有极其广泛和灵活的地图可视化和数据样式化能力。
- en: 'In this chapter, we will go through the following topics and skills:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下主题和技能：
- en: Good practices with respect to data organization within a single working document
    (project)
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在单个工作文档（项目）中组织数据的良好实践
- en: Visual representation of data, revealing its thematic and spatial features
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据的视觉表示，揭示其主题和空间特征
- en: Layer labeling, which is done to enhance data readability
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图层标签，这是为了增强数据的可读性
- en: Control over styles
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对样式进行控制
- en: Base maps used to provide spatial context and a background for your data
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用于提供空间背景和背景数据的底图
- en: The main result of this chapter will be a project, designed according to the
    basic requirements of cartographic visualization.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的主要成果将是一个项目，该项目是根据基本的地图可视化要求设计的。
- en: Loading layers from the spatial database
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从空间数据库加载图层
- en: 'Throughout this chapter, we will use the database that we created earlier.
    As you remember, this is a SpatiaLite file database. In order to work with it,
    we must first establish a connection and then load the data. As always, there
    are a few alternative ways of doing this in QGIS:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将使用我们之前创建的数据库。如您所记，这是一个SpatiaLite文件数据库。为了使用它，我们首先必须建立连接，然后加载数据。在QGIS中，始终有几种不同的方法来完成此操作：
- en: From the menu, go to **Layer** | **Add Layer** | **Add SpatiaLite Layer**
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从菜单中转到**图层** | **添加图层** | **添加SpatiaLite图层**
- en: Click on ![Loading layers from the spatial database](img/image00305.jpeg), the
    **Add SpatiaLite Layer** button, in the **Manage Layers** toolbar
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点击 ![从空间数据库加载图层](img/image00305.jpeg)，**添加SpatiaLite图层**按钮，在**图层管理**工具栏中
- en: Use the *Ctrl* + *Shift* + *L* keyboard shortcut
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 *Ctrl* + *Shift* + *L* 键盘快捷键
- en: 'In the opened window, define the database you want to connect to by following
    these steps:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在打开的窗口中，按照以下步骤定义你想要连接的数据库：
- en: If you have created the database as was described in the previous chapter, you
    are likely to notice that it has already been connected. If it is not, then click
    on the **New** button and navigate to the `.sqlite` file you want to work with.
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你已如前一章所述创建数据库，你可能会注意到它已经连接。如果没有，则点击**新建**按钮并导航到你要工作的`.sqlite`文件。
- en: After the database file is selected, click on the **Connect** button to see
    the list of available layers. You will see the layers' names and geometry types.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选择数据库文件后，点击**连接**按钮以查看可用图层的列表。您将看到图层的名称和几何类型。
- en: Select the necessary layer (or layers, which is done by holding down the *Ctrl*
    key) and click on the **Add** button.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择必要的图层（或多个图层，这可以通过按住 *Ctrl* 键来完成）并点击**添加**按钮。
- en: Note
  id: totrans-18
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'The **Set filter** button gives you more flexibility when adding the data,
    as it provides access to the **Query Builder** window, where you can make up a
    conditional expression to define the sub-dataset, as shown in the following figure.
    For example, if you want to select a multipurpose play area (MPPA) from the `athletic
    facilities` dataset, you can do the following:'
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**设置过滤器**按钮在添加数据时提供了更多灵活性，因为它提供了访问**查询构建器**窗口的权限，在那里你可以创建一个条件表达式来定义子数据集，如图所示。例如，如果你想从`运动设施`数据集中选择一个多功能运动场（MPPA），你可以执行以下操作：'
- en: On the left side of the **Query Builder** window, select a necessary field called
    `primary_sp` (double-click on its name to add to the expression in the **Provider
    specific filter expression** textbox)
  id: totrans-20
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**查询构建器**窗口的左侧，选择一个名为`primary_sp`的必要字段（双击其名称将其添加到**提供者特定过滤器表达式**文本框中的表达式）
- en: Type in or click on the operator button (the equality sign in our case)
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 输入或点击操作按钮（在我们的例子中是等号）
- en: Load the field values by clicking on the **All** button, and double-click on
    an `MPPA` value to add it to the expression
  id: totrans-22
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过点击**全部**按钮加载字段值，然后双击`MPPA`值将其添加到表达式
- en: 'In the **Provider specific filter expression** textbox, you will see the following
    line: `"primary_sp" = ''MPPA''`'
  id: totrans-23
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**提供者特定的过滤表达式**文本框中，您将看到以下行："`primary_sp` = 'MPPA'"
- en: Test the query. If it returns a meaningful result, click on **OK**. After returning
    to the main window, you will see the condition beside the **geom** column. Click
    on the **Add** button to load the layers.
  id: totrans-24
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 测试查询。如果它返回有意义的结果，请点击**确定**。返回主窗口后，您将在**geom**列旁边看到条件。点击**添加**按钮以加载图层。
- en: '![Loading layers from the spatial database](img/image00306.jpeg)'
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![从空间数据库加载图层](img/image00306.jpeg)'
- en: Loading layers is even simpler from the **Browser** panel. To see the available
    layers, successively expand **SpatiaLite** and the relevant database item. Now
    you can just drag and drop the layers onto the map canvas.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 从**浏览器**面板加载图层甚至更简单。要查看可用的图层，依次展开**SpatiaLite**和相关数据库项。现在您只需将图层拖放到地图画布上即可。
- en: Grouping and reordering layers
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分组和重新排序图层
- en: By default, layers are loaded in alphabetical order (reversely if you add them
    from the browser panel). Each new layer is laid on top of the previous layer and
    covers it. By default, all layers are turned on, styled with simple uniform symbols,
    and randomly assigned colors. The order of layers can be changed by simply dragging
    and dropping them up and down the legend. Also, it is strongly advisable to order
    and arrange layers in some logical groups, as it simplifies the navigation and
    understanding of data.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，图层按字母顺序加载（如果从浏览器面板添加，则相反）。每个新图层都放在上一个图层之上，并覆盖它。默认情况下，所有图层都开启，使用简单的统一符号样式，并随机分配颜色。可以通过简单地拖放它们上下移动图例来更改图层的顺序。此外，强烈建议按逻辑分组和排列图层，因为它简化了导航和理解数据。
- en: 'To manage and rearrange layers and maintain their visibility, use the **Layer**
    toolbar in the **Layers** panel, which is shown in the following screenshot and
    contains the buttons described afterwards (in the order of appearance from left
    to right):'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 要管理和重新排列图层以及保持它们的可见性，请使用**图层**面板中的**图层**工具栏，如以下截图所示，其中包含随后描述的按钮（从左到右按出现顺序）：
- en: '![Grouping and reordering layers](img/image00307.jpeg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![分组和重新排序图层](img/image00307.jpeg)'
- en: '**Add Group**: This creates an empty layers group.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加组**：这创建一个空的图层组。'
- en: '**Manage Layer Visibility**: This allows us to quickly show and hide layers
    and also customize their visibility with predefined layer combinations—so-called
    presets.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理图层可见性**：这允许我们快速显示和隐藏图层，并使用预定义的图层组合——所谓的预设来定制它们的可见性。'
- en: '**Filter Legend By Map Content**: If the filter is active, layer legend only
    shows those items that are actually visible inside the map canvas. All other symbols
    are hidden from the legend.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**按地图内容过滤图层图例**：如果过滤功能处于激活状态，图层图例仅显示地图画布内实际可见的项目。所有其他符号都将从图例中隐藏。'
- en: '**Expand All** / **Collapse All**: Buttons are used to expand or collapse layers,
    symbology legends, and layer groups, if any.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**全部展开**/**全部折叠**：按钮用于展开或折叠图层、符号图例和图层组（如果有）。'
- en: '**Remove Layer/Group**: This removes the selected legend entries.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**删除图层/组**：这删除所选的图例条目。'
- en: 'There are two ways of creating a layer group:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 创建图层组有两种方式：
- en: Click on ![Grouping and reordering layers](img/image00308.jpeg), the **Add Group**
    button, from the **Layers** toolbar. A new group will appear at the bottom of
    the list of layers. Type in an appropriate name and then drag and drop the layers
    into the group.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点击![分组和重新排序图层](img/image00308.jpeg)，**添加组**按钮，从**图层**工具栏。新组将出现在图层列表的底部。输入一个合适的名称，然后将图层拖放到组中。
- en: Select several layers while holding down the *Ctrl* key, and use the **Group
    Selected** right-click contextual shortcut to place them in a single group.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按住**Ctrl**键选择多个图层，并使用**组选中的**右键快捷菜单来将它们放置在单个组中。
- en: It is possible to develop a multilevel hierarchy with subgroups by selecting
    groups and applying **Add Group** to them. Any item of the layer legend, whether
    it's a single layer or a group, can be renamed with the **Rename** right-click
    shortcut. Renaming doesn't affect the dataset itself, but allows us to apply to
    it a proper and meaningful name within a project. Now try arranging the layers
    into several meaningful groups yourself, and name them appropriately.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 通过选择组并应用**添加组**功能，可以开发出具有子组的分层结构。图层图例中的任何项目，无论是单个图层还是组，都可以使用**重命名**右键快捷键进行重命名。重命名不会影响数据集本身，但允许我们在项目中为其应用一个适当且具有意义的名称。现在尝试自己将图层安排成几个有意义的组，并适当地命名它们。
- en: Developing your own styles
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开发自己的样式
- en: In QGIS, a style is a way of cartographic visualization that takes into account
    a layer's individual and thematic features. It encompasses basic characteristics
    of symbology, such as the color and presence of fill, outline parameters, the
    use of markers, scale-dependent rendering, layer transparency, interactions with
    other layers, and labels.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在 QGIS 中，样式是一种地图可视化方式，它考虑了图层的个别和主题特征。它包括符号学的基本特征，如颜色和填充的存在、轮廓参数、标记的使用、基于比例的渲染、图层透明度、与其他图层的交互以及标签。
- en: A well-chosen style greatly simplifies data perception and readability, so it
    is important to learn how to work with styles in order to be capable of representing
    your data in the best way. In this section, we will discuss vector and raster
    layers separately, as their stylization has some unique features.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 一个精心挑选的样式可以极大地简化数据感知和可读性，因此学习如何使用样式来以最佳方式表示你的数据是非常重要的。在本节中，我们将分别讨论矢量图层和栅格图层，因为它们的样式化有一些独特的特点。
- en: Developing styles for vector layers
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为矢量图层开发样式
- en: 'The **Style** menu from the **Layer Properties** dialog provides you with all
    the necessary tools to symbolize and style your data. To open it, double-click
    on a layer name in the **Layers** panel, or use the **Properties** right-click
    contextual shortcut, and select the **Style** section. You will see something
    similar to this:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '**样式** 菜单来自 **图层属性** 对话框，它为你提供了所有必要的工具来表示和样式化你的数据。要打开它，请双击 **图层** 面板中的图层名称，或使用
    **属性** 右键菜单的快捷方式，然后选择 **样式** 部分。你将看到类似以下内容：'
- en: '![Developing styles for vector layers](img/image00309.jpeg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![为矢量图层开发样式](img/image00309.jpeg)'
- en: 'The very first thing you should pay your attention to is the small **Renderer**
    drop-down type list in the top-left corner. It contains the following items:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 你首先应该注意到的就是位于左上角的小型 **渲染器** 下拉列表。它包含以下项目：
- en: '**Single Symbol**: This is the simplest type that draws all the layer features
    with the same symbol.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**单个符号**：这是最简单的类型，使用相同的符号绘制所有图层要素。'
- en: '**Categorized**: This defines data-driven categories and allows us to symbolize
    them individually.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分类**：这定义了数据驱动的分类，并允许我们单独表示它们。'
- en: '**Graduated**: This defines the categories based on quantitative attributes,
    allowing us to rank features gradually.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**渐变**：这根据定量属性定义分类，允许我们逐步排序要素。'
- en: '**Rule-based**: This is the most flexible and advanced renderer type. It allows
    the user to define their own categories using multiple criteria and style them
    individually.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基于规则的**：这是最灵活和高级的渲染器类型。它允许用户使用多个标准定义自己的分类，并单独样式化。'
- en: '**Point displacement**: This renderer is useful when you are working with a
    point layer containing overlapping points that have similar coordinates or are
    located too close to each other. It is available only for single point layers,
    and will automatically shift the location of the markers so that all overlapping
    markers are visible.'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**点位移**：当你处理包含重叠点且坐标相似或彼此过于接近的点图层时，这种渲染器非常有用。它仅适用于单个点图层，并将自动移动标记的位置，以便所有重叠的标记都可见。'
- en: '**Inverted polygons**: These are used to style the area exterior to the polygon,
    and are available for polygon layers only.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**反转多边形**：这些用于样式化多边形外部的区域，并且仅适用于多边形图层。'
- en: '**Heatmap**: This represents a point layer with a continuous surface according
    to the points'' density, It is available for point layers only.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**热力图**：这表示一个根据点密度具有连续表面的点图层，仅适用于点图层。'
- en: Depending on the renderer type selected, the **Style** menu section changes
    its view, and if you mistakenly select an inappropriate type (for example, the
    heat map renderer for a line layer), you will get the corresponding message.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 根据所选的渲染器类型，**样式** 菜单部分会改变其视图，如果你错误地选择了不合适类型（例如，为线图层选择热图渲染器），你将收到相应的消息。
- en: 'After the renderer type is chosen, you can start adjusting the symbology with
    the **Symbol selector** dialog, whose accessibility depends on the renderer type
    selected. For example, for the **Single symbol** and the **Inverted polygons**
    renderer, this dialog is directly available from the **Style** section. For the
    **Categorized** and **Graduated** renderers, it is available from the **Symbol
    Change** button, which looks like this: ![Developing styles for vector layers](img/image00310.jpeg).'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 选择渲染器类型后，您可以使用**符号选择器**对话框开始调整符号，其可访问性取决于所选的渲染器类型。例如，对于**单个符号**和**反转多边形**渲染器，此对话框直接从**样式**部分可用。对于**分类**和**分级**渲染器，它可以从**符号更改**按钮访问，其外观如下：![为矢量图层开发样式](img/image00310.jpeg)。
- en: '**Rule-based**, **Point displacement**, and **Heatmap** renderers have their
    own specifications for symbology selection and adjustment, which will be covered
    in the following sections. Nevertheless, regardless of the renderer type selected
    (except the **Heatmap** renderer), you always have access to the **Symbol selector**
    dialog, which looks similar to what is shown in the following screenshot and consists
    of several sections:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**基于规则的**、**点位移**和**热力图**渲染器在符号选择和调整方面有自己的规范，这些规范将在以下章节中介绍。然而，无论选择哪种渲染器类型（除**热力图**渲染器外），您始终可以访问**符号选择器**对话框，其外观类似于以下截图，并包含几个部分：'
- en: '![Developing styles for vector layers](img/image00311.jpeg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![为矢量图层开发样式](img/image00311.jpeg)'
- en: In the top-left part of the window, you can see a symbol preview. Underneath
    the preview, there are symbol layers. By default, only one layer is used, but
    you can add more with the **Add symbol layer** button, ![Developing styles for
    vector layers](img/image00312.jpeg), or remove unnecessary layers with the **Remove
    symbol layer** button, ![Developing styles for vector layers](img/image00313.jpeg),
    which is active only if there are two or more layers available. With the **Lock
    layer's color** button, ![Developing styles for vector layers](img/image00314.jpeg),
    the layer's color will be locked for changes, which prevents colors from being
    modified by a categorized or graduated renderer. Layers can be reordered with
    the **Move up** (![Developing styles for vector layers](img/image00315.jpeg))
    and **Move down** (![Developing styles for vector layers](img/image00316.jpeg))
    buttons, and if you are satisfied with the result, **use the Save symbol button**
    in the symbol library.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在窗口的左上角，您可以看到符号预览。在预览下方是符号层。默认情况下，只使用一个层，但您可以使用**添加符号层**按钮（![为矢量图层开发样式](img/image00312.jpeg)）添加更多层，或使用**删除符号层**按钮（![为矢量图层开发样式](img/image00313.jpeg)）删除不必要的层，该按钮仅在有两个或更多层可用时才激活。使用**锁定层颜色**按钮（![为矢量图层开发样式](img/image00314.jpeg)），层的颜色将被锁定以防止更改，这可以防止分类或分级渲染器修改颜色。可以使用**向上移动**（![为矢量图层开发样式](img/image00315.jpeg)）和**向下移动**（![为矢量图层开发样式](img/image00316.jpeg)）按钮重新排序图层，并且如果您对结果满意，可以在符号库中使用**保存符号**按钮。
- en: 'In the right-hand side of the dialog window, there are options available for
    the symbol layer selected. Among them, **Symbol layer type** is the most important.
    The list of available types depends on the layer geometry. For a polygon layer,
    you can select from the following list:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在对话框窗口的右侧，有可用的选项用于所选的符号层。其中，**符号层类型**是最重要的。可用类型的列表取决于图层几何形状。对于多边形图层，您可以从以下列表中选择：
- en: '**Centroid fill**: Polygons are symbolized by a marker at the polygon''s centroid,
    instead of rendering the entire area of the polygon. This is useful if you have
    a lot of small polygons that are better to visualize by a point than by a tiny
    polygon that is visible only after zooming in.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**质心填充**：多边形通过在多边形质心处的标记来表示，而不是渲染多边形的整个区域。如果您有很多小多边形，并且最好通过点来可视化而不是通过在放大后才可见的小多边形，这种方法非常有用。'
- en: '**Gradient fill**: Use a predefined gradient or create a custom gradient to
    fill the polygon.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**渐变填充**：使用预定义的渐变或创建自定义渐变来填充多边形。'
- en: '**Line pattern fill**: Line patterns can be combined to create various hatching
    effects. These effects are useful when you want to use the same fill color underneath
    but want to highlight some differences between objects with hatching.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**线图案填充**：可以将线图案组合起来创建各种网状效果。当您想要使用相同的填充颜色但想通过网状效果突出显示对象之间的某些差异时，这些效果非常有用。'
- en: '**Point pattern fill**: Regularly distributed points (or other symbols) can
    fill the polygon and create a pattern.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**点图案填充**：规则分布的点（或其他符号）可以填充多边形并创建图案。'
- en: '**Raster image fill**: Any raster image can be used to create a background-filling
    texture or pattern.'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**栅格图像填充**：任何栅格图像都可以用来创建背景填充纹理或图案。'
- en: '**SVG fill**: A scalable vector graphics `.svg` file (or a marker) can be used
    to create a filling texture or pattern.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SVG填充**：可缩放矢量图形`.svg`文件（或标记）可以用来创建填充纹理或图案。'
- en: '**Shapeburst fill**: This shades the interior of a polygon, depending on the
    distance from the edge of the polygon, and creates amazing border buffering effects.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**形状爆发填充**：这根据多边形边缘的距离为多边形内部着色，并创建惊人的边界缓冲效果。'
- en: '**Simple fill**: This the default type, and is characterized by fill color,
    pattern, and border.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**简单填充**：这是默认类型，其特征是填充颜色、图案和边框。'
- en: '**Outline: marker line**: A marker symbol is used as the outline.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**轮廓：标记线条**：使用标记符号作为轮廓。'
- en: '**Outline: Simple line**: Only the polygon''s outline is drawn and its properties
    defined by line color, width, and style.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**轮廓：简单线条**：只绘制多边形的轮廓，并定义其属性，如线条颜色、宽度和样式。'
- en: For a point layer, you can choose from different marker types represented by
    **Ellipse**, letters or signs (**Font marker**), various markers (**Simple marker**),
    icons (**SVG marker**), or attribute field values (**Vector Field marker**).
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 对于点层，您可以选择由**椭圆**、字母或符号（**字体标记**）、各种标记（**简单标记**）、图标（**SVG标记**）或属性字段值（**矢量字段标记**）表示的不同标记类型。
- en: For a line layer, the **Simple** and **Marker line** types are available. In
    the first case, the line is rendered as usual, and in the second, a regularly
    recurring marker symbol is used. **Marker line** can be used, for example, to
    show a line's direction (movement on a road, a river flow, and so on) with an
    arrow marker symbol.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 对于线层，有**简单**和**标记线条**类型可用。在前一种情况下，线条按常规渲染，在后一种情况下，使用定期重复的标记符号。**标记线条**可以用来显示线条的方向（例如道路上的移动、河流的流向等），使用箭头标记符号。
- en: Now that we have covered the basics, we will closely explore different rendering
    styles in the example of some layers from our database.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经涵盖了基础知识，我们将密切探讨通过我们数据库中一些层的示例来展示不同的渲染风格。
- en: Styling a layer with the Single Symbol renderer
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用单符号渲染器对层进行样式设计
- en: 'In this example, we will use the `Brooklyn borough boundaries` layer to outline
    the area of interest on the map. As you can see in the following screenshot, we
    use two symbol layers, both defined as **Outline: Simple line**, but with different
    **Pen style** patterns. Underneath, we place a lighter **Solid line** and cover
    it with a darker **Dash Line** pen style. Selecting contrast colors allows us
    to implement a border-like stripe effect.'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在本例中，我们将使用`Brooklyn borough boundaries`层来在地图上勾勒出感兴趣的区域。如图下所示，我们使用两个符号层，两者都定义为**轮廓：简单线条**，但具有不同的**笔样式**图案。下面放置一个较浅的**实线**，并用较深的**虚线**笔样式覆盖它。选择对比颜色使我们能够实现类似边框的条纹效果。
- en: '![Styling a layer with the Single Symbol renderer](img/image00317.jpeg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![使用单符号渲染器对层进行样式设计](img/image00317.jpeg)'
- en: Styling a layer with the Categorized renderer
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用分类渲染器对层进行样式设计
- en: 'Let''s style the `public schools` layer to reflect the school type:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们设计`public schools`层以反映学校类型：
- en: After setting the renderer type to **Categorized**, select the column with the
    categories to be rendered under **Column**. The column is available from the drop-down
    list that contains all the layer attribute fields. As we want school types to
    be shown as categories, select the `sch_type` field to categorize the layer:![Styling
    a layer with the Categorized renderer](img/image00318.jpeg)
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在将渲染器类型设置为**分类**后，选择要在**列**下渲染的分类列。该列来自包含所有层属性字段的下拉列表。由于我们希望学校类型以分类形式显示，请选择`sch_type`字段以对层进行分类：![使用分类渲染器对层进行样式设计](img/image00318.jpeg)
- en: Click on the **Symbol Change** button to adjust the layer symbology. In the
    **Symbol selector** window, set **Symbol layer type** to **SVG marker** and navigate
    to the training dataset catalog called `svg`. Select the `school.svg` file and
    adjust the symbol's **Size** value to `3` mm. Click on the **OK** button to come
    back to the main window:![Styling a layer with the Categorized renderer](img/image00319.jpeg)
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**符号更改**按钮以调整层符号。在**符号选择器**窗口中，将**符号层类型**设置为**SVG标记**，并导航到名为`svg`的训练数据集目录。选择`school.svg`文件，并将符号的**大小**值调整为`3`毫米。点击**确定**按钮返回主窗口：![使用分类渲染器对层进行样式设计](img/image00319.jpeg)
- en: Click on the **Classify** button. The window with the **Symbol**, **Value**,
    and **Legend** columns will automatically be populated with the categories and
    their descriptions from the attribute field. The difference between **Value**
    and **Legend** is that values represent unique attributes, while the legend provides
    their descriptive characteristics. It's more obvious when values, for example,
    are some codes and the legend is supposed to explain their meaning. Also, values
    are not visible in the layer's legend, but their descriptions are. You can add
    or delete the categories, or manually edit the text of its elements (**Value**
    or **Legend**) by double-clicking on the item in the relevant column. For now,
    just click on **OK** to exit the **Style** dialog and take a look at the preliminary
    result.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**分类**按钮。带有**符号**、**值**和**图例**列的窗口将自动填充来自属性字段中的类别及其描述。**值**和**图例**之间的区别在于，值代表唯一的属性，而图例提供它们的描述性特征。例如，当值是一些代码而图例应该解释其含义时，这种区别更为明显。此外，值在图层图例中是不可见的，但它们的描述是可见的。您可以通过双击相关列中的项目来添加或删除类别，或手动编辑其元素的文本（**值**或**图例**）。现在，只需点击**确定**按钮退出**样式**对话框，查看初步结果。
- en: 'You will see that the symbols on the map canvas are too dense and overlapped,
    which makes the map cluttered. To enhance readability, we should relate the appearance
    of symbols with a scale, and there are two basic approaches to do this:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您会看到地图画布上的符号过于密集且重叠，这使得地图显得杂乱。为了提高可读性，我们应该将符号的外观与缩放范围相关联，并且有两种基本方法可以实现这一点：
- en: Activate **Scale dependent visibility** from the **General** tab of the **Properties**
    window, where you should enter values of **Minimum (exclusive)** and **Maximum
    (inclusive)** scales. For example, if you define the values, as shown in the following
    screenshot, the layer will become visible within a scale range of 1:49,999 (because
    the minimum value of `50000` is excluded) and more. This approach doesn't affect
    the symbol's size. It only regulates the scale range for its appearance while
    zooming in and out of the map canvas:![Styling a layer with the Categorized renderer](img/image00320.jpeg)
  id: totrans-82
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从**属性**窗口的**常规**选项卡中激活**缩放相关可见性**，在那里您应该输入**最小（排除）**和**最大（包含）**缩放值。例如，如果您定义的值，如以下截图所示，则图层将在1:49,999（因为`50000`的最小值被排除）及更大的缩放范围内可见。这种方法不会影响符号的大小。它只调节缩放范围，在地图画布放大和缩小时的外观：![使用分类渲染器设置图层样式](img/image00320.jpeg)
- en: The other approach, which we will actually use, is more sophisticated because
    it makes the symbol size dependent on the scale. To apply it, open the **Style**
    dialog in the **Properties** window, and click on ![Styling a layer with the Categorized
    renderer](img/image00321.jpeg), the **Symbol****Change** button, to open the **Symbol
    selector** dialog, as shown. Activate the necessary symbol layer, change its **Size**
    units to **Map unit**, and enter `30`. This means that the symbol size will be
    set 30 feet and changed according to the scale while zooming in or out. Click
    on the **OK** button to come back to the main window.![Styling a layer with the
    Categorized renderer](img/image00322.jpeg)
  id: totrans-83
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 另一种方法，我们实际上会使用，更为复杂，因为它使符号大小依赖于缩放。要应用它，打开**属性**窗口中的**样式**对话框，并点击![使用分类渲染器设置图层样式](img/image00321.jpeg)，**符号更改**按钮，以打开**符号选择器**对话框，如图所示。激活必要的符号层，将其**大小**单位更改为**地图单位**，并输入`30`。这意味着符号大小将被设置为30英尺，并根据缩放在放大或缩小地图画布时改变。点击**确定**按钮返回主窗口。![使用分类渲染器设置图层样式](img/image00322.jpeg)
- en: Tip
  id: totrans-84
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: In this case, the scale range can be defined through the **Adjust scaling range**
    button (![Styling a layer with the Categorized renderer](img/image00323.jpeg)),
    which opens a dialog window to define the minimum and maximum scale values.
  id: totrans-85
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此情况下，可以通过**调整缩放范围**按钮（![使用分类渲染器设置图层样式](img/image00323.jpeg)）定义缩放范围，该按钮会打开一个对话框以定义最小和最大缩放值。
- en: By default, all categories are assigned the same **Symbol** marker according
    to the SVG file selected, but you can modify it by double-clicking and adjusting
    the necessary properties (that is, **Fill** and **Border**) in the **Symbol selector**
    dialog. Also, right-clicking on any item brings up a contextual menu with the
    **Copy**, **Paste**, **Change color**, **Change transparency**, **Change output
    unit**, and **Change size** shortcuts for simplifying some common actions.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 默认情况下，所有类别都根据所选的SVG文件分配了相同的**符号**标记，但你可以通过双击并调整**符号选择器**对话框中的必要属性（即**填充**和**边框**）来修改它。此外，右键单击任何项目都会弹出一个上下文菜单，包含**复制**、**粘贴**、**更改颜色**、**更改透明度**、**更改输出单位**和**更改大小**快捷方式，以简化一些常见操作。
- en: 'This screenshot shows what the screen may look like if you choose the **Categorized**
    renderer and adjust the settings as described previously:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 此截图显示了如果你选择**分类**渲染器并按之前所述调整设置，屏幕可能看起来像什么：
- en: '![Styling a layer with the Categorized renderer](img/image00324.jpeg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![使用分类渲染器设置图层样式](img/image00324.jpeg)'
- en: After you've clicked on the **OK** button, the layer's style properties will
    be applied, and you can explore the layer visibility in the map canvas. In the
    case of map unit related symbol size, you will probably not be able to see markers
    while zooming out, but they will appear on larger scales, changing in size accordingly.
    Note that the symbols in the layer's legend on the **Layers** panel behave similarly,
    that is, become larger on larger scales and shrink on smaller scales. This helps
    you know whether the layer is visible on this scale, and if it is, helps you see
    the appearance of its markers.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**确定**按钮后，图层的样式属性将被应用，你可以在地图画布中探索图层的可见性。在地图单位相关符号大小的情形下，当你缩小地图时可能看不到标记，但它们将在更大比例尺上出现，并相应地改变大小。请注意，**图层**面板上图层的图例中的符号行为类似，即在较大比例尺上变大，在较小比例尺上缩小。这有助于你了解图层在此比例尺上是否可见，如果可见，则有助于你看到其标记的外观。
- en: Styling a layer with the Graduated renderer
  id: totrans-90
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用渐变渲染器设置图层样式
- en: The **Graduated** renderer type is useful when you want to grade features according
    to some quantitative attribute. In our sample dataset, we have the `zipcodes`
    layer, which contains data about population in the `population` field. We will
    use this layer and field to rank ZIP code boundaries according to the number of
    people living and demonstrate how graduated rendering works.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 当你想根据某些定量属性对要素进行分级时，**渐变**渲染器类型非常有用。在我们的示例数据集中，我们有`zipcodes`图层，其中包含`population`字段中的人口数据。我们将使用这个图层和字段来根据居住人数对ZIP代码边界进行排序，并演示渐变渲染的工作原理。
- en: Tip
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Instead of choosing an attribute field, you can click on the **Expression dialog**
    button ![Styling a layer with the Graduated renderer](img/image00325.jpeg), beside
    it. It will be useful if you need to use some values that are not in the attribute
    table, but can be derived from the field values. For example, you can use the
    `area/ 43560` expression to convert area in square feet into acres.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 而不是选择属性字段，你可以点击它旁边的**表达式对话框**按钮![使用渐变渲染器设置图层样式](img/image00325.jpeg)。如果你需要使用不在属性表中的某些值，但可以从字段值中导出，这将很有用。例如，你可以使用`area/
    43560`表达式将平方英尺面积转换为英亩。
- en: Set the renderer type to **Graduated** and select the `population` field in
    the **Column** section.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将渲染器类型设置为**渐变**，并在**列**部分选择`population`字段。
- en: Define the number of classes you wish to show (normally, five to seven classes
    are recommended, otherwise it can be difficult to distinguish between them visually),
    and select a **Color ramp**.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义你希望显示的类别数量（通常建议五到七个类别，否则可能难以在视觉上区分它们），并选择一个**颜色渐变**。
- en: Tip
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: 'You can use a predefined standard color ramp or select from the advanced options.
    To use them, select **New color ramp** from the bottom of the drop-down list.
    In the **Color ramp type** window, you will get access to the following options:'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你可以使用预定义的标准颜色渐变或从高级选项中选择。要使用它们，从下拉列表底部选择**新颜色渐变**。在**颜色渐变类型**窗口中，你将获得以下选项：
- en: '![Styling a layer with the Graduated renderer](img/image00326.jpeg)'
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![使用渐变渲染器设置图层样式](img/image00326.jpeg)'
- en: '**Gradient**: This provides options to create and modify custom gradients.'
  id: totrans-99
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**渐变**：这提供了创建和修改自定义渐变的选项。'
- en: '**Random**: This creates a random color ramp according to various customizable
    options, such as **Hue**, **Saturation**, **Value**, and **Classes**.'
  id: totrans-100
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**随机**：这根据各种可自定义的选项创建随机颜色渐变，例如**色调**、**饱和度**、**亮度**和**类别**。'
- en: '**ColorBrewer**: Use predefined color palettes for maps designed for optimal
    clarity. This includes several color schemes for different kinds of data (sequential,
    divergent, and qualitative).'
  id: totrans-101
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ColorBrewer**：使用为地图设计的预定义调色板，以实现最佳清晰度。这包括针对不同类型数据（顺序、发散和定性）的几个颜色方案。'
- en: '**cpt-city**: This provides access to dozens of color gradients for cartography,
    technical illustration, and design.'
  id: totrans-102
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**cpt-city**：这提供了数十种颜色渐变，用于制图、技术插图和设计。'
- en: 'Then, select an appropriate graduation mode, which is as follows:'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，选择一个合适的毕业模式，如下所示：
- en: '**Equal interval**: The value range is divided into equal range classes according
    to the number of classes set (for example, values from 0 to 100 are divided into
    five classes of 20 units each).'
  id: totrans-104
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**等间隔**：根据设置的类别数将值范围划分为相等的范围类别（例如，从0到100的值被划分为每个20单位的五个类别）。'
- en: '**Quantile (Equal Count)**: All of the data will be divided into the number
    of classes set, and ranges will be chosen in such a way that each class will contain
    the same number of items.'
  id: totrans-105
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**等量分位数**：所有数据将被分成设定的类别数，范围将被选择，使得每个类别包含相同数量的项目。'
- en: '**Natural Breaks (Jenks)**: This method groups values according to their similarity.
    So the values within a class have minimum variance, but feature values across
    classes vary significantly.'
  id: totrans-106
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自然断点（Jenks）**：这种方法根据值的相似性分组。因此，类别内的值具有最小方差，但跨类别的特征值差异显著。'
- en: '**Standard Deviation**: Classes are divided according to the standard deviation
    of the values, and this shows how the data differs from its mean value.'
  id: totrans-107
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准差**：类别根据值的标准差进行划分，这显示了数据与其平均值的不同程度。'
- en: '**Pretty Breaks**: This creates *n+1* classes for the given range of values
    (that is, if 5 classes are set, the resulting amount will be 6), similar to **Equal
    interval**, but breaking points are selected so that the values are nicely rounded
    numbers (for example, multiples of 10 if using integers).'
  id: totrans-108
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**优雅的断点**：这为给定的值范围创建*n+1*个类别（即，如果设置5个类别，则结果将是6），类似于**等间隔**，但断点被选择，以便值是漂亮的整数（例如，如果使用整数，则为10的倍数）。'
- en: After you've clicked on the **Classify** button, the **Symbol**, **Values**,
    and **Legend** columns will be populated. Double-click on any of these to modify
    it. Right-clicking opens a contextual menu. It is strongly advisable to play around
    with the various classes and classification modes before deciding which is best
    for revealing the features of your data.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在您点击**分类**按钮后，**符号**、**值**和**图例**列将被填充。双击任何一项以修改它。右键单击将打开上下文菜单。在决定哪种方式最适合揭示您数据的特点之前，强烈建议您尝试各种类别和分类模式。
- en: '![Styling a layer with the Graduated renderer](img/image00327.jpeg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![使用渐变渲染器样式化图层](img/image00327.jpeg)'
- en: Styling a layer with the Rule-based renderer
  id: totrans-111
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用基于规则的渲染器样式化图层
- en: 'The **Rule-based** renderer is the most flexible renderer because it allows
    you to divide data into your own complex categories and style them separately.
    We will explore the rule-based rendering capabilities in the example of the `bike
    routes` layer, which has a lot of attributes that are useful to visualize. For
    example, there are two fields that are of particular interest to visualize on
    map. The first one is `allclasses`, which contains the classification of the route
    types (for existing cycling facilities), based on the NYC Bicycle Master Plan
    classification. The types are as follows:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '**基于规则的渲染器**是最灵活的渲染器，因为它允许您将数据分成您自己的复杂类别，并分别对其进行样式化。我们将通过具有许多可用于可视化的属性的`bike
    routes`图层示例来探索基于规则的渲染功能。例如，有两个字段特别适合在地图上可视化。第一个是`allclasses`，它包含基于纽约市自行车总体规划分类的路由类型分类（针对现有自行车设施）。类型如下：'
- en: '**I**: Greenway/multi-use path.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**I**：绿道/多用途路径。'
- en: '**II**: On-street striped bicycle lane.'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**II**：街道上标有条纹的自行车道。'
- en: '**III**: On-street signed bicycle route.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**III**：街道上标有标志的自行车路线。'
- en: '**0**: Planned, but not yet existing as a bike route.'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**0**：计划中，但尚未作为自行车路线存在。'
- en: '**L**: Link. There is no facility present, but the element is suggested as
    a connection between portions of the bike network.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**L**：链接。目前没有设施，但建议该元素作为自行车网络部分之间的连接。'
- en: '**S**: Stairs and pedestrian overpasses.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**S**：楼梯和人行天桥。'
- en: 'The second field is `lanecount`, which shows the number of lanes. Rules need
    to be used to combine these attributes into separate categories that show both
    the route type and lane count. Follow these steps to develop a Rule-based symbology
    for the layer:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个字段是`lanecount`，它显示车道数。需要使用规则将这些属性组合成单独的类别，这些类别显示路线类型和车道数。按照以下步骤为图层开发基于规则的符号：
- en: Navigate to **Properties** | **Style** and select the **Rule-based renderer**
    type from the drop-down list. To create a rule, click on the **Add rule**![Styling
    a layer with the Rule-based renderer](img/image00312.jpeg) button. The **Rule
    properties** dialog window will open.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**属性** | **样式**，并从下拉列表中选择**基于规则的渲染器**类型。要创建规则，请单击**添加规则**![使用基于规则的渲染器样式化图层](img/image00312.jpeg)按钮。将打开**规则属性**对话框窗口。
- en: 'In the window, click on the **...** button beside the **Filter** line. The
    **Expression string builder** window will open. This window consists of three
    sections:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在窗口中，单击**过滤器**行旁边的**...**按钮。将打开**表达式字符串构建器**窗口。此窗口由三个部分组成：
- en: The left section is **Expression**, with the row of operator buttons above it.
    You can either type the expression manually or double-click on field names, values,
    and functions to compose it.
  id: totrans-122
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 左侧部分是**表达式**，其上方有一行运算符按钮。您可以直接手动输入表达式，或双击字段名称、值和函数来组合它。
- en: The central section of the window is **Functions**. To expand any item, click
    on the **+** sign beside it and double-click to add it to the expression. We're
    mostly interested in the **Field** and **Values** items that contain all the available
    attribute field names. When you highlight any of them and click on the **Load
    values** buttons that are **all unique** or **10 samples**, the list of values
    is returned. Again, you can either type a value in the expression manually or
    add it by double-clicking on it.
  id: totrans-123
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 窗口的中心部分是**函数**。要展开任何项目，请单击其旁边的**+**符号，并双击将其添加到表达式中。我们主要对包含所有可用属性字段名称的**字段**和**值**项目感兴趣。当您突出显示其中任何一个并单击**加载值**按钮（**全部唯一**或**10个样本**）时，将返回值列表。同样，您可以在表达式中手动输入值或通过双击将其添加。
- en: If you're lost, look at the right part of the window. It contains contextual
    help for the item highlighted in **Functions**.
  id: totrans-124
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您迷路了，请查看窗口的右侧部分。它包含对**函数**中突出显示的项目的内容帮助。
- en: 'In our expression, we want to show greenways and multi-use paths that are in
    the **I** category. The `"allclasses" = ''I''` expression for this is shown in
    the following screenshot:'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在我们的表达式中，我们希望显示属于**I**类别的绿道和多用途路径。此表达式的`"allclasses" = 'I'`如下截图所示：
- en: '![Styling a layer with the Rule-based renderer](img/image00328.jpeg)'
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![使用基于规则的渲染器样式化图层](img/image00328.jpeg)'
- en: After clicking on the **OK** button, you'll be in the **Rule properties** window
    again. First of all, test the consistency of the expression. You will get the
    message **Filter returned 'some number' of feature(s)**. If the number of features
    is `0`, it means that there are no features that satisfy the rule. Otherwise,
    you'll get a positive number that shows the number of features in the class.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**按钮后，您将再次进入**规则属性**窗口。首先，测试表达式的一致性。您将收到消息**过滤器返回了'一些数字'个要素**。如果要素数量为`0`，则表示没有要素满足规则。否则，您将得到一个正数，表示类中的要素数量。
- en: Then add a **Label** and, if necessary, **Description** to the class. If the
    **Scale range** toggle is activated, you can define the maximum-minimum scale
    range to visualize the class on a map. Class symbology is developed in the **Symbol**
    section of the window as shown:![Styling a layer with the Rule-based renderer](img/image00329.jpeg)
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后向类中添加**标签**和，如果需要，**描述**。如果**比例范围**切换按钮被激活，您可以定义最大-最小比例范围以在地图上可视化该类。类符号在窗口的**符号**部分开发，如下所示：![使用基于规则的渲染器样式化图层](img/image00329.jpeg)
- en: After clicking on the **OK** button, you will be back to the main **Style**
    window, where rules can be managed with the **Add rule** ![Styling a layer with
    the Rule-based renderer](img/image00312.jpeg), **Edit** **rule** ![Styling a layer
    with the Rule-based renderer](img/image00330.jpeg), or **Remove rule** ![Styling
    a layer with the Rule-based renderer](img/image00313.jpeg) buttons. Go ahead and
    add categories for the other classes available in this layer.
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 点击**确定**按钮后，您将返回到主**样式**窗口，在这里可以通过**添加规则**![使用基于规则的渲染器样式化图层](img/image00312.jpeg)、**编辑**
    **规则** ![使用基于规则的渲染器样式化图层](img/image00330.jpeg)或**删除规则** ![使用基于规则的渲染器样式化图层](img/image00313.jpeg)按钮来管理规则。继续添加此图层中其他可用类的类别。
- en: 'With the **Refine current rules** button, you can go further and develop multilevel
    hierarchy based on scales, categories, or ranges. For example, we can take `allclasses`
    as a major classification attribute and then divide it into subcategories by the
    number of lanes:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 使用**细化当前规则**按钮，你可以进一步根据比例、类别或范围开发多级层次结构。例如，我们可以将`allclasses`作为主要分类属性，然后根据车道数量将其划分为子类别：
- en: Select category, navigate to **Refine current rule** | **Add categories to rule**,
    and select the **lanecount** field from the **Column** drop-down list. Click on
    the **Classify** button:![Styling a layer with the Rule-based renderer](img/image00331.jpeg)
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择类别，导航到**细化当前规则** | **向规则添加类别**，并从**列**下拉列表中选择**lanecount**字段。点击**分类**按钮：![使用基于规则的渲染器设置图层样式](img/image00331.jpeg)
- en: Similarly, add subcategories to other rules.
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 类似地，向其他规则添加子类别。
- en: Now, we should check our rules to remove empty categories. Select all the available
    categories by holding down the *Ctrl* key, and click on the **Count features**
    button. Empty categories will be identified by the **0** count. Click on the **Remove
    rule** button ![Styling a layer with the Rule-based renderer](img/image00313.jpeg)
    to exclude them from the legend.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们应该检查我们的规则以删除空类别。通过按住*Ctrl*键选择所有可用的类别，然后点击**计数要素**按钮。空类别将通过**0**计数被识别。点击**移除规则**按钮
    ![使用基于规则的渲染器设置图层样式](img/image00313.jpeg) 以将其排除在图例之外。
- en: As a result, your rule-based style may look like this:![Styling a layer with
    the Rule-based renderer](img/image00332.jpeg)
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 因此，你的基于规则的样式可能看起来像这样：![使用基于规则的渲染器设置图层样式](img/image00332.jpeg)
- en: You can greatly improve the visualization of multilevel symbols by clicking
    on the **Rendering order** button and adjusting the symbol levels. In the opened
    **Symbol Levels** dialog window, you can define the order in which the symbol
    layers are rendered. The numbers in the cells decide in which rendering pass the
    layer will be drawn. The idea is that some symbol levels should have a lower rendering
    order and others should have higher rendering order. Lower levels will be covered
    by higher ones, allowing the user to create smooth conjunctions and preserve the
    symbology hierarchy. Set up the rendering order as shown in the following screenshot
    and explore the results:![Styling a layer with the Rule-based renderer](img/image00333.jpeg)
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以通过点击**渲染顺序**按钮并调整符号级别来大大提高多级符号的可视化。在打开的**符号级别**对话框中，你可以定义符号层渲染的顺序。单元格中的数字决定了层将在哪个渲染过程中绘制。其理念是某些符号级别应该具有较低的渲染顺序，而其他符号级别应该具有较高的渲染顺序。低级别将被高级别覆盖，使用户能够创建平滑的结合并保留符号层次结构。按照以下截图设置渲染顺序并探索结果：![使用基于规则的渲染器设置图层样式](img/image00333.jpeg)
- en: Styling a layer with the Point displacement renderer
  id: totrans-136
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用点位移渲染器设置图层样式
- en: Some point layers (for example, the `wifi public` layer from the training dataset)
    contain points with the same or similar coordinates that are impossible to distinguish
    on the map because of their overlapping. In this case, **Point displacement**
    renderer can be of great use, as it locates overlapping points within an imaginary
    circle. It moves points to a small distance in such a way that they all become
    visible. Note that the renderer doesn't affect real point positions in the dataset,
    but visually changes placement to satisfy cartographic requirements. To be able
    to use this type of rendering, a layer should be a single point feature type.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 一些点图层（例如，来自训练数据集的`wifi public`图层）包含具有相同或相似坐标的点，由于它们重叠，在地图上无法区分。在这种情况下，**点位移**渲染器非常有用，因为它在想象中的圆圈内定位重叠点。它将点移动到很小的距离，这样它们都能被看到。请注意，渲染器不会影响数据集中实际点的位置，但会从视觉上改变放置以满足制图要求。要使用此类渲染，图层应是一个单点要素类型。
- en: 'To apply **Point displacement** renderer to the `wifi public` layer follow
    these steps:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 要将**点位移**渲染器应用于`wifi public`图层，请按照以下步骤操作：
- en: Choose the **Center symbol** marker around which the points will be displaced.
    By clicking on the symbol button, you get access to the conventional **Symbols
    selector** dialog. In the window, set **Symbol layer type** to **SVG marker**,
    navigate to the training dataset catalog called `svg`, and select the `Wi-Fi-Logo.svg`
    file. Set its size to `20` and select **Map unit** as the size measurements unit.
    After clicking on the **OK** button, you will be brought back to the main window.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择点将围绕其位移的**中心符号**标记。通过点击符号按钮，您将获得访问传统的**符号选择器**对话框。在窗口中，将**符号图层类型**设置为**SVG标记**，导航到名为`svg`的训练数据集目录，并选择`Wi-Fi-Logo.svg`文件。将其大小设置为`20`，并选择**地图单位**作为尺寸测量单位。点击**确定**按钮后，您将返回主窗口。
- en: Go to **Renderer** | **Single symbol** for the points themselves. After clicking
    on the **Rendering settings** button below, you will be in the **Symbol selector**
    dialog. Again, set the symbol layer type to **SVG marker**, navigate to the training
    dataset catalog called `svg`, and select the `wi-fi.svg` file. Set its size to
    `30` and select **Map unit** as the size measurement unit. After clicking on **OK**,
    you will be taken back to the main window.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往**渲染器** | **单个符号**以设置点本身。点击下方的**渲染设置**按钮后，您将进入**符号选择器**对话框。再次，将符号图层类型设置为**SVG标记**，导航到名为`svg`的训练数据集目录，并选择`wi-fi.svg`文件。将其大小设置为`30`，并选择**地图单位**作为尺寸测量单位。点击**确定**后，您将返回主窗口。
- en: 'The **Rendering circles** section defines the properties of the circles that
    appear on a map to group the points that have similar coordinates and are thus
    grouped around the common center. The following properties are included:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**渲染圆圈**部分定义了出现在地图上以分组具有相似坐标的点并围绕共同中心进行分组的圆圈属性。以下属性包括：'
- en: '**Circle pen width**: This defines the outline width of the bordering circle'
  id: totrans-142
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**圆圈笔宽**：这定义了边界圆的轮廓宽度'
- en: '**Circle color**: This defines the outline color of the bordering circle'
  id: totrans-143
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**圆圈颜色**：这定义了边界圆的轮廓颜色'
- en: '**Circle radius modification**: The bigger this value, the bigger the circle
    will be'
  id: totrans-144
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**圆半径修改**：此值越大，圆圈就越大'
- en: '**Point distance tolerance**: The bigger this value, the more the points to
    be snapped around the common center'
  id: totrans-145
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**点距离容差**：此值越大，围绕共同中心需要捕捉的点就越多'
- en: 'For now, we accept the default values and apply the settings. In the following
    screenshot, you can see what the result may look like in the case of several points
    that share similar coordinates and need to be grouped around a common center:'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 目前，我们接受默认值并应用设置。在下面的屏幕截图中，您可以看到在多个坐标相似且需要围绕一个共同中心进行分组的情况下，结果可能看起来像什么：
- en: '![Styling a layer with the Point displacement renderer](img/image00334.jpeg)'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![使用点位移渲染器设置图层样式](img/image00334.jpeg)'
- en: The **Labels** section contains some major labeling settings, for example, **Label
    attribute**, **font**, **color**, and so on. We temporarily omit this, as labeling
    will be covered later in the *Adding labels* section of this chapter.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '**标签**部分包含一些主要的标签设置，例如，**标签属性**、**字体**、**颜色**等。我们暂时省略这部分，因为标签设置将在本章的**添加标签**部分进行介绍。'
- en: Styling a layer with the Inverted polygons renderer
  id: totrans-149
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用反转多边形渲染器设置图层样式
- en: The **Inverted polygons** renderer styles the polygon outside its boundary and
    allows us to achieve remarkable cartographic effects. One of its common uses is
    for showing water bodies with the "fading out" blur effects on the map. For this
    purpose, **Duplicate** the `NY borough boundaries` layer with the right-click
    contextual shortcut, right-click to **Rename** it to `water area`, open the **Style**
    properties dialog, and select the **Inverted polygons** renderer.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '**反转多边形**渲染器在多边形边界外进行样式设置，并允许我们实现显著的制图效果。其常见用途之一是在地图上显示具有“渐变模糊”效果的水体。为此，使用鼠标右键的上下文快捷方式**复制**`NY
    borough boundaries`图层，右键点击**重命名**它为`water area`，打开**样式**属性对话框，并选择**反转多边形**渲染器。'
- en: 'Now, create a complex symbol that consists of two layers:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，创建一个由两层组成的复杂符号：
- en: 'The first **Symbol layer type** is set to **Outline: simple line**.'
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一个**符号图层类型**设置为**轮廓：简单线**。
- en: The second one is **Shapeburst fill**.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第二个是**形状爆发填充**。
- en: In the **Gradient colors** section, we choose the **Two color** gradient from
    blue to white.
  id: totrans-154
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**渐变颜色**部分，我们选择从蓝色到白色的**双色**渐变。
- en: In **Shading style**, activate **Shade to a set distance:**. The bigger the
    value, the larger the shading effect will be.
  id: totrans-155
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**阴影样式**中，激活**阴影到设定距离**：。此值越大，阴影效果就越大。
- en: Finally, adjust the **Blur strength** slider to a value of `10` to make blurring
    softer. Click on the **OK** button and enjoy the result!
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，将**模糊强度**滑块调整到`10`的值以使模糊更柔和。点击**确定**按钮并享受结果！
- en: '![Styling a layer with the Inverted polygons renderer](img/image00335.jpeg)'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![使用反转多边形渲染器样式化图层](img/image00335.jpeg)'
- en: Styling a layer with the Heatmap renderer
  id: totrans-158
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用热力图渲染器样式化图层
- en: '**Heatmap** is a relatively new renderer type. It was introduced in the QGIS
    2.8\. It represents a point as a continuous-density surface and allows us to apply
    cool styling effects. Note that in order to be able to apply this type of renderer,
    the layer and map canvas should be in the same coordinate reference system.'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '**热力图**是一种相对较新的渲染类型。它在QGIS 2.8版本中引入。它将点表示为连续密度表面，并允许我们应用酷炫的样式效果。请注意，为了能够应用此类型的渲染器，图层和地图画布应处于相同的坐标参考系中。'
- en: 'We will apply the renderer to the `trees` layer, which contains over 15000
    points. These are hard to show on the map individually because of their high density:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将渲染器应用于包含超过15000个点的`trees`图层。由于它们的密度很高，因此单独在地图上显示这些点很困难：
- en: After selecting the **Heatmap** renderer type from the drop-down list, select
    a predefined color ramp for the layer called **Greens**. If you are not satisfied
    with the color ramp, you can modify it by clicking on the **Edit** button beside
    it, or create your own color ramp by choosing **New color ramp** from the very
    end of the list, and finally **Invert** the color ramp if there is a need.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉列表中选择**热力图**渲染类型后，选择名为**绿色**的预定义颜色渐变。如果您对颜色渐变不满意，可以点击它旁边的**编辑**按钮进行修改，或者从列表末尾选择**新建颜色渐变**来创建自己的颜色渐变，如果需要的话，最后还可以**反转**颜色渐变。
- en: 'The **Radius** field determines the search area for density estimation. It
    basically represents how close points must be to each other to influence the heat
    map. The larger the radius, the smoother the surface; and the smaller the radius,
    the finer the details in the heat map. You can define the radius of a point in
    different units: **Pixels**, **Millimeter**, or **Map unit**. Remember that map
    units are scale dependent. Pixels and millimeters change regardless of the scale,
    but reflect zooming effects as well.'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**半径**字段决定了密度估计的搜索区域。它基本上表示点之间必须有多近才能影响热力图。半径越大，表面越平滑；半径越小，热力图中的细节越精细。您可以使用不同的单位定义点的半径：**像素**、**毫米**或**地图单位**。请记住，地图单位是依赖于比例的。像素和毫米不受比例影响，但会反映缩放效果。'
- en: '**Maximum** **value** is usually set automatically and is responsible for the
    maximum density of points per area unit, but you can adjust it to your needs.'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**最大值**通常自动设置，并负责每个面积单位内点的最大密度，但您可以调整它以满足您的需求。'
- en: Also, you can use a **Weight points by** numerical field just in case you want
    the layer to reflect some important information in addition to density. For example,
    if we have the relevant data, we can weigh schools by the number of students,
    or cafés by the number of visitors per month.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，如果您希望图层除了密度之外还反映一些重要信息，您可以使用**按数值字段加权重**。例如，如果我们有相关数据，我们可以按学生人数衡量学校，或按每月访客数衡量咖啡馆。
- en: The **Rendering** **quality** slider is used to adjust the smoothness of the
    surface. The higher the quality you choose, the slower the rendering process will
    be, while coarser surfaces are rendered faster.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**渲染质量**滑块用于调整表面的平滑度。您选择的质量越高，渲染过程越慢，而较粗糙的表面渲染得更快。'
- en: Layer rendering
  id: totrans-166
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 图层渲染
- en: Whichever rendering type you choose, there are always the same **Layer rendering**
    options at the bottom of the **Style** dialog window. The first one is a general
    **Layer transparency** percentage slider. You can move it to adjust the layer
    transparency. **Layer blending mode** provides some special graphics effects for
    the layer you work with to interact with the bottom layer (or layers). By default,
    the **Normal** mode is set, which means that the underlying layer is hidden underneath
    without mixing of colors with covering layer. This is written as `(a, b) = a`,
    where `a` is the top layer and `b` is the bottom layer.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您选择哪种渲染类型，在**样式**对话框窗口的底部都始终有相同的**图层渲染**选项。第一个是一个通用的**图层透明度**百分比滑块。您可以移动它来调整图层透明度。**图层混合模式**为与底层（或多个底层）交互的图层提供一些特殊的图形效果。默认情况下，设置为**正常**模式，这意味着底层被隐藏在覆盖层下面，颜色没有混合。这表示为`(a,
    b) = a`，其中`a`是顶层，`b`是底层。
- en: '![Layer rendering](img/image00336.jpeg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![图层渲染](img/image00336.jpeg)'
- en: Example of the Normal blend mode applied to the overlapping layers
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 正常混合模式应用于重叠层的示例
- en: 'You can choose from among 12 different blending modes divided into four groups,
    as described in the following table:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从以下表格中描述的四个组中选择12种不同的混合模式：
- en: '| Blend mode | Formula and description | The example of effects |'
  id: totrans-171
  prefs: []
  type: TYPE_TB
  zh: '| 混合模式 | 公式和描述 | 效果示例 |'
- en: '| --- | --- | --- |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| **Lighten modes—this group of blending modes makes black disappear, preserves
    white, and lightens midtones.** |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| **亮化模式——这一组混合模式使黑色消失，保留白色，并使中间调变亮。** |'
- en: '| Lighten | *max (a, b)*The maximum of RGB components from both layers are
    selected. | ![Layer rendering](img/image00337.jpeg) |'
  id: totrans-174
  prefs: []
  type: TYPE_TB
  zh: '| Lighten | *max (a, b)*选择来自两层的 RGB 组件的最大值。| ![层渲染](img/image00337.jpeg) |'
- en: '| Screen | *1-(1-a)×(1-b)*At first, RGB components of both layers are inverted.
    Then they are multiplied, and the final result is inverted again. | ![Layer rendering](img/image00338.jpeg)
    |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '| Screen | *1-(1-a)×(1-b)*首先，反转两层中的 RGB 组件。然后它们相乘，最终结果再次反转。| ![层渲染](img/image00338.jpeg)
    |'
- en: '| Dodge | *b÷(1-a)*the bottom layer is divided by the inverted top layer. |
    ![Layer rendering](img/image00339.jpeg) |'
  id: totrans-176
  prefs: []
  type: TYPE_TB
  zh: '| Dodge | *b÷(1-a)*底层被反转顶层除以。| ![层渲染](img/image00339.jpeg) |'
- en: '| Addition | *a+b*This summarizes components for both layers. | ![Layer rendering](img/image00340.jpeg)
    |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '| Addition | *a+b*这总结了两个图层上的组件。| ![层渲染](img/image00340.jpeg) |'
- en: '| **Darken modes: this group is opposite to the previous one, which means that
    it preserves black, makes white disappear, and darkens midtones.** |'
  id: totrans-178
  prefs: []
  type: TYPE_TB
  zh: '| **暗化模式：此组与上一个相反，意味着它保留黑色，使白色消失，并使中间调变暗。** |'
- en: '| Darken | *min (a, b)*The minimum of RGB components from both layers are selected.
    | ![Layer rendering](img/image00341.jpeg) |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '| Darken | *min (a, b)*选择来自两层的 RGB 组件的最小值。| ![层渲染](img/image00341.jpeg) |'
- en: '| Multiply | *a × b*The layers are multiplied. | ![Layer rendering](img/image00342.jpeg)
    |'
  id: totrans-180
  prefs: []
  type: TYPE_TB
  zh: '| Multiply | *a × b*图层相乘。| ![层渲染](img/image00342.jpeg) |'
- en: '| Burn | *1 - (1-b)÷a*The bottom layer is inverted and divided by the top layer,
    and the result is inverted again. | ![Layer rendering](img/image00343.jpeg) |'
  id: totrans-181
  prefs: []
  type: TYPE_TB
  zh: '| Burn | *1 - (1-b)÷a*底层被反转并除以顶层，然后结果再次反转。| ![层渲染](img/image00343.jpeg) |'
- en: '| **Contrast modes: the modes drop midtones, and apply dark and light pixels
    from the top layer to darken or lighten pixels from the bottom layer respectively.**
    |'
  id: totrans-182
  prefs: []
  type: TYPE_TB
  zh: '| **对比模式：这些模式丢弃中间调，并将顶层中的暗部和亮部像素分别应用于底层像素以变暗或变亮。** |'
- en: '| Overlay | Combines two blend modes for different pixels. For lighter pixels,
    half-strength Screen mode is applied, and for darker pixels, it is Multiply mode.
    As a result, gray midtones become invisible. Calculations are based on the bottom
    layer, which means that pixels of the top layer are lightened or darkened by the
    bottom layer. | ![Layer rendering](img/image00344.jpeg) |'
  id: totrans-183
  prefs: []
  type: TYPE_TB
  zh: '| Overlay | 根据不同像素结合两种混合模式。对于较亮的像素，应用半强度的 Screen 模式，而对于较暗的像素，则应用 Multiply 模式。结果，灰色中间调变得不可见。计算基于底层，这意味着顶层像素被底层亮化或暗化。|
    ![层渲染](img/image00344.jpeg) |'
- en: '| Soft light | This is the same as the previous one, but instead of Screen
    and Multiply modes, Dodge and Burn modes are used for lightening and darkening
    respectively. | ![Layer rendering](img/image00345.jpeg) |'
  id: totrans-184
  prefs: []
  type: TYPE_TB
  zh: '| 软光 | 这与上一个相同，但使用 Dodge 和 Burn 模式分别用于亮化和暗化，而不是 Screen 和 Multiply 模式。| ![层渲染](img/image00345.jpeg)
    |'
- en: '| Hard light | This is similar to Overlay, but the top and bottom layers are
    switched. | ![Layer rendering](img/image00346.jpeg) |'
  id: totrans-185
  prefs: []
  type: TYPE_TB
  zh: '| Hard light | 这与 Overlay 类似，但顶层和底层被交换。| ![层渲染](img/image00346.jpeg) |'
- en: '| **Inversion and cancellation modes: apply simple arithmetic actions to invert
    colors and suppress black** |'
  id: totrans-186
  prefs: []
  type: TYPE_TB
  zh: '| **反转和消除模式：应用简单的算术操作来反转颜色并抑制黑色** |'
- en: '| Difference | *b-a*This subtracts pixel values of the top layer from the bottom
    layer, preserving only positive values; that is, blending with black (0) has no
    changes, while blending with white (1) inverts the color. | ![Layer rendering](img/image00347.jpeg)
    |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '| 差值 | *b-a*这从顶层减去底层的像素值，仅保留正值；也就是说，与黑色（0）混合没有变化，而与白色（1）混合则反转颜色。| ![层渲染](img/image00347.jpeg)
    |'
- en: '| Subtract | *b-a*This is similar to the Difference mode, but negative values
    are substituted by black. | ![Layer rendering](img/image00348.jpeg) |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '| Subtract | *b-a*这与差值模式类似，但用黑色替换负值。| ![层渲染](img/image00348.jpeg) |'
- en: '**Feature blending mode** applies the same effects to the overlapping features
    within the layer. We advise you to give the different modes a try in order to
    understand how they work with different data types and styling options. Getting
    familiar with them allows you to create professional-looking maps with stunning
    cartographic design effects.'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
- en: '![Layer rendering](img/image00349.jpeg)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
- en: The preceding screenshot is an example of the hurricane evacuation zones layer
    combined with the underlying primary residential zoning layer through simple 50
    percent transparency (on the left), versus the **Multiply blending mode** used
    without any transparency (on the right).
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
- en: '![Layer rendering](img/image00350.jpeg)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
- en: In the preceding screenshot, the `noise` point layer with simple marker fill
    opacity set to 20 percent; the **Layer blending mode** is **Hard light** and **Feature
    blending mode** is **Dodge**.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: Developing styles for raster layers
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Our dataset contains three raster layers: `landcover 2010`, `height a.s.l.,
    ft`, and `hillshade`. All of these are remote sensing derivatives that are useful
    for representing land use and relief features. We will develop styles for them
    to represent the DEM as a continuous layer, and combine it with a hillshade to
    obtain some semi-3D cartographic effects. The `landcover 2010` layer will be used
    to show how to work with the set of discrete classes.'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
- en: 'First, let''s style the `landcover 2010` layer that contains several landcover
    classes. These are coded by integer values described in the metadata as follows:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
- en: '`1`: `tree canopy`'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`2`: `grass/shrub`'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`3`: `bare earth`'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`4`: `water`'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`5`: `buildings`'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`6`: `roads`'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`7`: `other paved surfaces`'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Let''s develop the styles by performing the following steps:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: Open the **Style** tab from the **Properties** dialog window (double-click on
    the layer in the legend, or select the **Properties** right-click contextual shortcut).
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set **Singleband pseudocolor** as **Render type**. As our raster has only one
    band, it will be loaded automatically as **Band 1 (Gray)** in the **Band** drop-down
    list.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: As we work with discrete landcover classes, we go to **Color interpolation**
    | **Discrete**.
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now we need to add our classes into the legend window. Use the **Add values
    manually** button, ![Developing styles for raster layers](img/image00312.jpeg),
    to add classes.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: By default, all the classes are assigned the **Value** of `0`, the same **Color**,
    and **Custom color map entry** instead of **Label**. You can change them by double-clicking
    on a correspondent item. When you're done, your **Style** section will look similar
    to what is shown in the following screenshot:![Developing styles for raster layers](img/image00351.jpeg)
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For the `height a.s.l., ft` layer, in the **Style** section, select **Render
    type** as **Singleband pseudocolor**.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The band will be set automatically, and in the case of smoothly changing values
    as in DEM, leave the default **Linear** option (under **Color interpolation**)
    unchangeable.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, we need to select an appropriate color ramp for the thematic content of
    the layer. A predefined ramps drop-down list doesn't show you all of the available
    diversity. To get this, select **New color ramp**. From the **Color ramp type**
    window drop-down list, select `cpt-city`. You will be shown all the available
    predefined color ramps, sorted into several thematic groups.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要为图层的主题内容选择一个合适的颜色坡道。预定义的坡道下拉列表不会显示所有可用的多样性。要获取这些，请选择**新颜色坡道**。从**颜色坡道类型**窗口下拉列表中选择`cpt-city`。您将看到所有可用的预定义颜色坡道，按几个主题组排序。
- en: Click on the **Topography** group, select the **elevation** ramp (or any other
    ramp you like), and click on the **OK** button.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**地形**组，选择**高程**坡道（或您喜欢的任何其他坡道），然后点击**确定**按钮。
- en: We will be asked to enter a name for new color ramp. Click on **OK** as we're
    satisfied with the existing one. Then, we'll be back to the main **Style** window.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将被要求为新颜色坡道输入一个名称。由于我们对现有的坡道满意，所以点击**确定**。然后，我们将返回到主**样式**窗口。
- en: 'Navigate to **Mode** | **Continuous**, and QGIS will create classes after you
    click on the **Classify** button. The **min / max** values range within which
    these classes will be created is defined in the **Load min/max values** section
    with the following options, as shown in the following screenshot:'
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**模式** | **连续**，点击**分类**按钮后，QGIS将创建类别。这些类别将被创建的**最小/最大**值范围在**加载最小/最大值**部分定义，如下面的截图所示：
- en: '**Cumulative count cut**: By default, this is set to 2-98 percent of the data
    range and helps cut very low or very high data outliers. Choosing this type of
    data range setting, the initial image gains more contrast and better reflects
    differences in the data values.'
  id: totrans-216
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**累积计数切割**：默认情况下，这设置为数据范围的2-98%，有助于切割非常低或非常高的数据异常值。选择这种类型的数据范围设置，初始图像对比度更高，更好地反映了数据值之间的差异。'
- en: '**Min / max**: The entire data range is taken into account, but the resulting
    map may look dull.'
  id: totrans-217
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最小/最大值**：考虑整个数据范围，但生成的地图可能看起来比较单调。'
- en: '**Mean +/- standard deviation ×**: Values within the given standard deviations
    (or deviations) define the data range.'
  id: totrans-218
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**平均值 ± 标准差 ×**：在给定标准差（或偏差）内的值定义了数据范围。'
- en: '![Developing styles for raster layers](img/image00352.jpeg)'
  id: totrans-219
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![为栅格图层开发样式](img/image00352.jpeg)'
- en: To load values according to the specified data range mode, choose **Actual (slower)**
    in the **Accuracy** section option and click on the **Load** button. Depending
    on the dataset, it may take some time, and when you see that the **Min** and **Max**
    values below the color ramp and **Mode** are updated, click on the **Classify**
    button. In the window to the left, you will see classes and their ranges set up
    automatically within the defined data range. This is as per the color ramp chosen.
    It is important to understand that every value represents the maximum limit of
    the class, and the highest value is not the real maximum value of the dataset,
    but the cumulative maximum count. You can adjust values by double-clicking on
    them and typing integer values, and clarify the legend by entering ranges instead
    of single values. Look at the preceding screenshot to understand these explanations.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 要根据指定的数据范围模式加载值，请在**精度**部分选项中选择**实际（较慢）**，然后点击**加载**按钮。根据数据集的不同，可能需要一些时间，当您看到颜色坡道下方和**模式**旁边的**最小**和**最大**值更新后，点击**分类**按钮。在左侧的窗口中，您将看到在定义的数据范围内自动设置的类别及其范围。这取决于选择的颜色坡道。重要的是要理解每个值代表类别的最大限制，而最高值不是数据集的真实最大值，而是累积最大计数。您可以通过双击它们并输入整数值来调整值，并通过输入范围而不是单个值来澄清图例。查看前面的截图以了解这些说明。
- en: 'Finally, let''s style the `hillshade` raster to reveal details and roughness
    of relief. Before starting, make sure that the layer is above `height a.s.l.,
    ft`, and if not, drag it and place it properly. Hill-shading simulates how sunrays
    illuminate the terrain. Combining it with DEM is a very popular approach in cartographic
    visualization for implementing semi-3D effects and highlighting relief details.
    Conventionally, semi-transparent hill-shading is overlaid above the terrain layer
    to achieve this. As a result, the final terrain visualization loses color contrasts
    and becomes dull. To overcome this, we will first move the **Global transparency**
    slider to 50 percent in the **Transparency** section under **Layer properties**,
    and in the **Style** section, select **Multiply** from the **Blending mode** drop-down
    list. If you''re not sure about what exactly has happened, try to apply **Normal
    blending mode** using **Apply**, and then go back to **Multiply**. The following
    screenshot shows the difference:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，让我们为`hillshade`栅格图层着色，以揭示地形细节和粗糙度。在开始之前，请确保图层位于`height a.s.l., ft`之上，如果不是，请将其拖动并正确放置。阴影模拟阳光照射地形的方式。将其与DEM结合是地图可视化中实现半3D效果和突出地形细节的非常流行的方法。传统上，半透明阴影叠加在地形图层之上以实现这一点。因此，最终的地面可视化失去了颜色对比度，变得暗淡。为了克服这一点，我们首先将**全局透明度**滑块移动到**图层属性**下的**透明度**部分的50%，然后在**样式**部分，从**混合模式**下拉列表中选择**乘法**。如果您不确定确切发生了什么，请尝试使用**应用**应用**正常混合模式**，然后返回**乘法**。以下截图显示了差异：
- en: '![Developing styles for raster layers](img/image00353.jpeg)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![为栅格图层开发样式](img/image00353.jpeg)'
- en: The preceding screenshot shows combined hillshade and DEM layers using simple
    50 percent transparency (above) and the Multiply layer blending mode with 50 percent
    transparency (below).
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 上一张截图显示了使用简单50%透明度（上方）和50%透明度的乘法图层混合模式（下方）结合阴影和DEM图层。
- en: Adding labels
  id: totrans-224
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加标签
- en: Labeling is an important part of cartographic visualization. It significantly
    enhances data readability and understanding. Note that labeling is applicable
    only for vector layers because they contain landmarks and attributes (usually
    names) to be shown on the map. You can reach the **Labels** section from the **Layer
    Properties** dialog or by going to **Layer** | **Labeling** menu. Also, there
    is a **Label** toolbar that you can turn on or off by right-clicking on the toolbars
    panel contextual menu and use for fast access to the labeling options.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 标签是地图可视化的重要部分。它显著提高了数据的可读性和理解性。请注意，标签仅适用于矢量图层，因为它们包含要在地图上显示的地标和属性（通常是名称）。您可以从“**图层属性**”对话框或通过转到**图层**
    | **标签**菜单访问**标签**部分。此外，还有一个**标签**工具栏，您可以通过右键单击工具栏面板的上下文菜单来打开或关闭它，以便快速访问标签选项。
- en: 'If you want to add labels to your layer quickly, just turn on the **Label this
    layer with** option, select the attribute field to be used for labeling from the
    drop-down list beside it, and click on **OK**. Labels will be added immediately
    to the layer. While this works well for personal and temporary use, there are
    many more labeling options available for the following label properties:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想快速为图层添加标签，只需打开**使用以下选项标记此图层**选项，从旁边的下拉列表中选择用于标签的属性字段，然后单击**确定**。标签将立即添加到图层。虽然这对于个人和临时使用来说效果很好，但还有许多更多标签属性的可用的标签选项：
- en: '**Text**: This defines the main properties of the text style, such as **Font**,
    **Size**, **Color**, **Type case**, and so on'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文本**：这定义了文本样式的主体属性，如**字体**、**大小**、**颜色**、**字体样式**等'
- en: '**Formatting**: This is used to organize and format labels as multiple lines'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**格式化**：这用于组织和格式化标签为多行'
- en: '**Buffer**: Text buffering defines properties of the buffer halo like size,
    color, transparency, and so on'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**缓冲**：文本缓冲定义了缓冲晕环的属性，如大小、颜色、透明度等'
- en: '**Background**: They contain background options for the labels like shape,
    size, color of the background, and many more'
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**背景**：它们包含标签的背景选项，如形状、大小、背景颜色等'
- en: '**Shadow**: These are shadowing options for labels and backgrounds'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**阴影**：这些是标签和背景的阴影选项'
- en: '**Placement**: These are advanced placement options for arranging labels and
    avoiding overlapping'
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**位置**：这些是用于排列标签并避免重叠的高级位置选项'
- en: '**Rendering**: These are options for labels and features for fast and clear
    label rendering'
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**渲染**：这些是用于快速和清晰渲染标签和特征的选项'
- en: Now, we will go through some examples of layer labeling using advanced labeling
    options.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将通过一些使用高级标签选项的图层标签示例。
- en: Labeling a point layer
  id: totrans-235
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 标注点层
- en: In this example, we will label the `subway stations` point layer with station
    names and lines IDs. This means that in a label, we need to combine information
    from different fields, and to do this, we will use the `"name" || '\n' || "line"`
    expression.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们将使用站名和线路ID对`subway stations`点层进行标注。这意味着在一个标签中，我们需要结合来自不同字段的信息，为此，我们将使用`"name"
    || '\n' || "line"`表达式。
- en: Note
  id: totrans-237
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Expressions give you advanced control over labeling options because with them,
    you can combine multiple fields, text, and functions to achieve the best result.
    The rules for constituting expressions are very simple: `field_name` is written
    in double quotes, and `text strings` in single. To merge them into a single expression,
    we use the `||` concatenation sign, and `\n` is used to start a new line.'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 表达式让你可以更高级地控制标签选项，因为有了它们，你可以结合多个字段、文本和函数以达到最佳效果。构成表达式的规则非常简单：`字段名`用双引号书写，`文本字符串`用单引号。要将它们合并成一个单独的表达式，我们使用`||`连接符号，并且使用`\n`来开始新的一行。
- en: From the **Font** drop-down list, choose for example **OpenSans** (or another
    desired font) and maximize its **Size** value to 9 points.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**字体**下拉列表中，选择例如**OpenSans**（或另一个所需的字体）并将它的**大小**值最大化到9点。
- en: In the **Formatting** section, we only set **Alignment** to **Center**.
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**格式化**部分，我们只设置**对齐**为**居中**。
- en: In the **Buffer** section, activate **Draw text buffer**. Set **Buffer size**
    to `1` mm and **Pen join style** to **Round**.
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**缓冲**部分，激活**绘制文本缓冲**。将**缓冲大小**设置为`1`毫米，并将**笔连接样式**设置为**圆角**。
- en: Don't forget to choose the color for buffering. Also, if you want to achieve
    more stylish effects, play with the **Transparency** slider and the **Blend**
    modes. We will not use any background options, so in this example, this section
    is omitted and we'll go right to the **Shadow**.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 不要忘记选择缓冲的颜色。此外，如果你想达到更时尚的效果，可以调整**透明度**滑块和**混合**模式。我们不会使用任何背景选项，所以在这个例子中，这一部分被省略，我们将直接进入**阴影**。
- en: Activate the **Draw drop shadow** toggle. From the **Draw under** drop-down
    list, select **Lowest label component**.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 激活**绘制投影阴影**切换按钮。从**绘制于**下拉列表中，选择**最低标签组件**。
- en: Tip
  id: totrans-244
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: If you want to see the result without leaving the dialog window, click on the
    **Apply** button from time to time.
  id: totrans-245
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你想在不离开对话框窗口的情况下查看结果，请不时点击**应用**按钮。
- en: In the **Offset** section, you can define the drop shadow angle. The value is
    entered manually or adjusted with the mouse arrow in a rotary switch beside.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**偏移**部分，你可以定义投影角度。该值可以手动输入或在旁边的旋转开关中用鼠标箭头调整。
- en: Note that the shadow's outline depends on the label rotation angle. If you want
    to ignore it, the **Use global shadow** toggle should be activated.
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注意，阴影轮廓取决于标签旋转角度。如果你想忽略它，应激活**使用全局阴影**切换按钮。
- en: Maximizing the **Blur radius** value softens the shadow, and you can achieve
    more complex effects using the **Transparency**, **Color**, and **Blend** modes.
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最大化**模糊半径**值可以使阴影变柔和，并且你可以使用**透明度**、**颜色**和**混合**模式来达到更复杂的效果。
- en: By minimizing or maximizing the **Scale** value, the shadow can be made more
    subtle or obvious.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过最小化或最大化**缩放**值，可以使阴影更加微妙或明显。
- en: In the **Placement** section, activate the **Offset from point** mode and you
    will see the placement quadrants. Click on the lowest central quadrant button
    to place the label centered under the symbol marker. If the label is complex,
    as in our case, there is a chance that it will partially overlap the symbol. To
    avoid overlapping, use **Offset X,Y**, which are the values for the label's horizontal
    and vertical displacement. Enter a small positive **Y** value (for example, `3.0`)
    to move the label slightly lower.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**位置**部分，激活**从点偏移**模式，你将看到放置象限。点击最低中央象限按钮以将标签居中放置在符号标记下方。如果标签复杂，如我们的案例，它可能会部分重叠符号。为了避免重叠，使用**X,Y偏移**，这是标签水平位移和垂直位移的值。输入一个小的正**Y**值（例如，`3.0`）以将标签稍微向下移动。
- en: Finally, in the **Rendering** section, activate **Scale-based visibility** and
    enter `10000` in the denominator for the maximum possible scale. This means that
    our labels will be visible only within the 1:1 to 1:10000 scale range. If you
    want to prevent QGIS from hiding overlapped labels, activate **Show all labels
    for this layer (including colliding labels)**. Some labels may be rotated for
    better placement, or even the map canvas can be rotated. Then, you can decide
    whether or not to allow upside-down label rotation using **Show upside down labels**.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，在**渲染**部分，激活**基于缩放的可见性**并在分母中输入`10000`以设置最大可能的缩放比例。这意味着我们的标签仅在1:1到1:10000的缩放范围内可见。如果您想防止QGIS隐藏重叠的标签，请激活**显示此图层的所有标签（包括碰撞标签）**。一些标签可能会旋转以获得更好的放置，甚至地图画布也可以旋转。然后，您可以使用**显示倒置标签**来决定是否允许倒置标签旋转。
- en: 'If the layer contains a lot of features, it is possible to use a number for
    **Limit number of features to be labeled to**. You can also use **Discourage labels
    from covering features**. As a result, your map will look neater. Depending on
    the labeling options you have chosen, your labeled layer may look similar to the
    following screenshot:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 如果图层包含大量特征，可以使用数字来**限制要标记的特征数量**。您还可以使用**阻止标签覆盖特征**。结果，您的地图看起来会更整洁。根据您选择的标记选项，您的标记图层可能看起来类似于以下截图：
- en: '![Labeling a point layer](img/image00354.jpeg)'
  id: totrans-253
  prefs: []
  type: TYPE_IMG
  zh: '![标记点层](img/image00354.jpeg)'
- en: Labeling a line layer
  id: totrans-254
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 标记线层
- en: 'The process of labeling a line layer is similar to the one described previously,
    but in the **Placement** section, you can find some line-specific options. The
    most important options are as follows:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 标记线层的流程与之前描述的类似，但在**放置**部分，您可以找到一些特定于线条的选项。最重要的选项如下：
- en: '**Parallel**: The label is adjusted along a direction parallel to the major
    direction of the labeled line. This type of placement is good for conveying line
    curvature, but can miss small details.'
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**平行**: 标签沿着与标记线条主要方向平行的方向进行调整。这种放置方式适合传达线条曲率，但可能会错过一些小细节。'
- en: '**Curved**: The label will be curved so as to reflect an original line''s curvature.
    This is the best choice for labeling objects with complex geometry, such as rivers
    and pathways.'
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**弯曲**: 标签将被弯曲以反映原始线条的曲率。这对于标记具有复杂几何形状的对象，如河流和路径，是最好的选择。'
- en: '**Horizontal**: Regardless of the line orientation, the label is always placed
    horizontally.'
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**水平**: 不论线条方向如何，标签总是水平放置。'
- en: Labels can be placed above, on, or below line respectively. In the case of on-line
    placement, the line will be partially overlapped by the label. If you select several
    options at once, QGIS will define the best position and even take into account
    the line direction with **Line orientation** **dependent position** activated.
    The **Distance** option defines how far from the line the label will be placed
    (it is active only for **Above/ On line** positions). The maximum angle between
    curved characters defines how far you can bend a label. In the **Rendering** sections,
    the main line-specific options are located within **Feature options**. For example,
    here you can use **Merge connected lines to avoid duplicate labels**, which is
    very useful for working with a road network. With **Suppress labeling feature
    smaller than**, you can set up the values for small features to be ignored during
    labeling.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 标签可以分别放置在线的上方、上方或下方。在线放置的情况下，线条将被标签部分覆盖。如果您同时选择多个选项，QGIS将定义最佳位置，甚至当激活**线条方向依赖位置**时，还会考虑线条方向。**距离**选项定义标签将放置在离线条多远的位置（仅对**上方/在线**位置有效）。弯曲字符之间的最大角度定义您可以弯曲标签多远。在**渲染**部分，主要针对线条的选项位于**要素选项**中。例如，您可以使用**合并连接的线条以避免重复标签**，这对于处理道路网络非常有用。使用**抑制小于以下大小的标记要素**，您可以设置在标记过程中忽略小特征的值。
- en: Labeling a polygon layer
  id: totrans-260
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 标记多边形图层
- en: 'In this section, we will add labels to the `zipocodes` layer:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将向`zipocodes`图层添加标签：
- en: Activate labeling and select the `zipcode` field to add labels.
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 激活标记并选择`zipcode`字段以添加标签。
- en: In the text section, set **Font** to **Harlow Solid Italic** (or any other font
    you like) and enter `10` under **Size**. The labels are very simple, so we won't
    use any formatting, and instead of using buffer, we will work with **Background**.
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文本部分，将**字体**设置为**Harlow Solid Italic**（或您喜欢的任何其他字体）并在**大小**下输入`10`。标签非常简单，因此我们不会使用任何格式化，而是使用**背景**而不是缓冲区。
- en: Activate the **Draw background** toggle.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 激活**绘制背景**切换按钮。
- en: In the **Shape** drop-down list, there are several options available for defining
    the shape of the background. You can select from simple geometries (rectangle,
    square, ellipse, and so on) or more sophisticated shapes with SVG. Select **SVG**,
    navigate to the training `dataset/svg` folder, and select `plate.svg`. Set its
    type to **Buffer** and adjust **Size** to `1` mm. Also, if the SVG parameters
    are modifiable, you can select **Fill**, **Border color**, and **Border width**.
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**形状**下拉列表中，有几种选项可用于定义背景的形状。您可以从简单的几何形状（矩形、正方形、椭圆等）或更复杂的SVG形状中选择。选择**SVG**，导航到训练`dataset/svg`文件夹，并选择`plate.svg`。将其类型设置为**缓冲区**并将**大小**调整为`1`毫米。此外，如果SVG参数可修改，您可以选择**填充**、**边框颜色**和**边框宽度**。
- en: 'In the **Placement** section, you will see some polygon-specific options, as
    follows:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 在**放置**部分，您将看到一些特定于多边形的选项，如下所示：
- en: '**Offset from centroid**: Labels will be placed in the center of polygon within
    a selected quadrant and with a specified offset, if any. You can also specify
    exactly which centroid to use, visible or whole. If you select the visible polygon
    centroid, then the label visibility and placement will change dynamically while
    zooming and panning the map. If you select the whole polygon centroid, the labels
    will be static. Additionally, if you activate **Force point inside polygon**,
    the labels will tend to stay inside the polygon only.'
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**从质心偏移**：标签将被放置在选定的象限中心的多边形内，如果有任何偏移，则指定偏移量。您还可以指定确切使用哪个质心，可见或整个。如果您选择可见的多边形质心，那么在缩放和平移地图时，标签的可见性和放置将动态改变。如果您选择整个多边形质心，则标签将是静态的。此外，如果您激活**强制点在多边形内**，则标签将倾向于仅保持在多边形内。'
- en: '**Around centroid**: Labels will be placed in the center of the polygon within
    a specified distance.'
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**围绕质心**：标签将被放置在多边形中心，距离指定。'
- en: '**Using Perimeter**: Labels will be placed along the border line (the **Above/
    On/ Below** placement options are available, and it is possible to combine them
    to allow QGIS to define the best position). Activate **Line orientation dependent
    position** if you want take the line direction into account. The **Distance**
    value defines how far from the line the label will be placed, and the **Repeat**
    values vary the repetition frequency. This type of labeling is very useful for
    boundaries.'
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用周长**：标签将被放置在边界线上（提供**上方/ 在上方/ 在下方**放置选项，并且可以组合它们以允许QGIS定义最佳位置）。如果您想考虑线条方向，请激活**线方向依赖位置**。**距离**值定义了标签将放置在离线条多远的位置，而**重复**值则改变重复频率。这种类型的标注对于边界来说非常有用。'
- en: '**Horizontal (slow)**: All labels will be placed horizontally and will change
    their position dynamically with zooming and panning to stay inside the polygon.
    As QGIS constantly defines the optimal position, this type of labeling can work
    slower for large datasets.'
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**水平（慢速）**：所有标签都将水平放置，并且会随着缩放和平移动态改变位置以保持在多边形内。由于QGIS不断定义最佳位置，因此对于大数据集，这种类型的标注可能会较慢。'
- en: '**Free (slow)**: QGIS will define the optimal position (including rotation)
    for the label within the current map view.'
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自由（慢速）**：QGIS将在当前地图视图中定义标签的最佳位置（包括旋转）。'
- en: Try the different options yourself for a better understanding of label placement.
    The **Rendering** section is the same as for line layers, so you can avoid labeling
    some small features or limit their number.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试不同的选项以更好地理解标签放置。**渲染**部分与线图层相同，因此您可以避免标注一些小特征或限制它们的数量。
- en: Advanced labeling
  id: totrans-273
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 高级标注
- en: Beside any labeling option, you can see the **Data defined override** button,
    ![Advanced labeling](img/image00355.jpeg). It provides advanced control over labeling
    parameters. You can do this with an expression or by using a specially created
    attribute field that overrides the defined settings with custom parameters. Data-defined
    properties are very useful when you want to distinguish between labels for objects
    with different properties (for example, cities and towns with different populations)
    or apply your own placement positions.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何标注选项旁边，您都可以看到**数据定义覆盖**按钮![高级标注](img/image00355.jpeg)。它提供了对标注参数的高级控制。您可以使用表达式或使用专门创建的属性字段来执行此操作，该字段使用自定义参数覆盖定义的设置。数据定义属性在您想区分具有不同属性的对象的标签（例如，具有不同人口的城市和城镇）或应用自己的放置位置时非常有用。
- en: Let's create three types of `zipcode` labels depending on population. The smaller
    label will be for areas where the population is less than 40000, the medium-sized
    label will be for a population of 40000-80000, and the biggest will be for a population
    of over 80000.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们根据人口数量创建三种类型的`zipcode`标签。较小的标签将用于人口少于40000的地区，中等大小的标签将用于40000-80000的人口，最大的标签将用于人口超过80000的地区。
- en: 'This means that we need to adjust the **Size** value of the font according
    to the `population` field values. From the **Data defined override** contextual
    menu, select **Edit…**, like this:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着我们需要根据`population`字段值调整字体的大小。从**数据定义覆盖**上下文菜单中选择**编辑…**，如下所示：
- en: '![Advanced labeling](img/image00356.jpeg)'
  id: totrans-277
  prefs: []
  type: TYPE_IMG
  zh: '![高级标签](img/image00356.jpeg)'
- en: 'In **Expression string builder**, enter the expression shown in the following
    screenshot. In this expression, we use the population as the condition for font
    size value definition:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 在**表达式字符串构建器**中，输入以下截图所示的表达式。在这个表达式中，我们使用人口作为字体大小值定义的条件：
- en: '![Advanced labeling](img/image00357.jpeg)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
  zh: '![高级标签](img/image00357.jpeg)'
- en: 'But what if we not only want to vary the size, but also want to underline the
    labels with the largest values? Then, we select **Edit** from the **Underline**
    button from the data override contextual menu and type the following expression:
    `case when "population" > 80000 then 1 else 0 end`.'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 但如果我们不仅想要改变大小，还想在具有最大值的标签下划线，那么我们选择数据覆盖上下文菜单中的**下划线**按钮的**编辑**，并输入以下表达式：`case
    when "population" > 80000 then 1 else 0 end`。
- en: Tip
  id: totrans-281
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: 'If you are confused about exactly which values to enter for the parameter definition
    and how to combine them to get a meaningful result, select the **Description**
    item from **Data defined override**. A window, with a short explanation of the
    expected input, will be displayed. For example, from the following screenshot,
    which shows an explanation of the color input, we can conclude that if we want
    to change the label color according to the population, we can use `case when "population"
    > 80000 then ''255,0,0,0'' else ''25,81,119,0'' end`:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您对参数定义中确切要输入哪些值以及如何组合它们以获得有意义的结果感到困惑，请从**数据定义覆盖**中选择**描述**项。将显示一个窗口，其中包含对预期输入的简要说明。例如，从以下截图，显示了颜色输入的解释，我们可以得出结论，如果我们想根据人口数量更改标签颜色，我们可以使用`case
    when "population" > 80000 then '255,0,0,0' else '25,81,119,0' end`：
- en: '![Advanced labeling](img/image00358.jpeg)'
  id: totrans-283
  prefs: []
  type: TYPE_IMG
  zh: '![高级标签](img/image00358.jpeg)'
- en: Managing styles
  id: totrans-284
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理样式
- en: As you can see from the previous section, developing styles is a time-consuming
    task. But the good thing is that once developed, styles are not lost. They can
    be saved, applied to other layers, and imported from and exported to external
    sources.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 如您从上一节中看到的，开发样式是一个耗时的工作。但好消息是，一旦开发出来，样式就不会丢失。它们可以被保存，应用到其他图层，并从外部源导入和导出。
- en: The main style management options are available from the **Style** button at
    the bottom row of the **Style** section under **Properties** as shown. The menu
    is divided into sections separated by horizontal lines. The first section is responsible
    for loading and saving styles. The second and third are for managing multiple
    styles for the layer, and at the bottom is the toggle for activating different
    styles (inactive and grayed out by default, when there's only one style available).
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 主要样式管理选项可通过**属性**下的**样式**部分底部行的**样式**按钮获得，如图所示。菜单分为由水平线分隔的几个部分。第一个部分负责加载和保存样式。第二和第三部分用于管理图层的多个样式，底部是切换不同样式的按钮（默认情况下为非活动状态，灰色，当只有一个样式可用时）。
- en: '![Managing styles](img/image00359.jpeg)'
  id: totrans-287
  prefs: []
  type: TYPE_IMG
  zh: '![管理样式](img/image00359.jpeg)'
- en: Tip
  id: totrans-288
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: You can get access to some of these options by right-clicking on the layer's
    **Styles** contextual shortcut. For example, you can copy and paste a style from
    one layer to another, add a new style, or rename an existing style. Also, this
    is very convenient for rapid switching between multiple layer styles.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过在图层的**样式**上下文快捷方式上右键单击来访问一些这些选项。例如，您可以从一个图层复制并粘贴样式到另一个图层，添加新样式或重命名现有样式。此外，这对于在多个图层样式之间快速切换也非常方便。
- en: 'When you have finished polishing your style, it is wise to save it. There are
    three main options for doing this from the **Style** button of the **Save Style**
    menu:'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 当您完成样式的润色后，保存它是明智的。从**保存样式**菜单的**样式**按钮有三个主要选项来完成此操作：
- en: '**QGIS Layer Style File**: The style is saved as a `.qml` file, which is a
    native QGIS format for storing styles.'
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**QGIS图层样式文件**：样式保存为`.qml`文件，这是存储样式的QGIS原生格式。'
- en: '**SLD File**: The style is exported to a style layer descriptor (`.sld`) file.
    This file type converts the original symbology into a single-symbol or rule-based
    type. This means categorized, graduated, heatmap, and other types of symbology
    may not be supported properly. Renderer-based symbology may not be supported properly.
    It may be convenient to save the symbology in an `.sld` file if you plan to work
    on it within an external application, such as GeoServer.'
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SLD 文件**：样式导出为样式层描述符（`.sld`）文件。此文件类型将原始符号转换为单符号或基于规则的类型。这意味着分类、渐变、热图和其他类型的符号可能无法正确支持。基于渲染器的符号可能无法正确支持。如果你计划在外部应用程序（如
    GeoServer）中处理它，保存符号在 `.sld` 文件中可能很方便。'
- en: '**Save in database**: We use this option to store and distribute all our data
    and styles within a single SpatiaLite database. When loading a style, it is important
    to provide a meaningful name and an exhaustive description. This is very handy
    because if you want somebody else to work with your data and style it properly,
    they just need to connect to the database, load the spatial layers and styles,
    and apply them.'
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**保存在数据库中**：我们使用此选项将所有数据和样式存储和分发在单个 SpatiaLite 数据库中。当加载样式时，提供有意义的名称和详尽的描述非常重要。这非常方便，因为如果你想让其他人正确地使用你的数据和样式，他们只需连接到数据库，加载空间层和样式，并应用它们。'
- en: Once the style is saved, you can use **Load from file** (**Style** | **Load
    Style** | **Load from file**) or **Load from database** to select and apply the
    style.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 保存样式后，你可以使用**从文件加载**（**样式** | **加载样式** | **从文件**）或**从数据库加载**来选择并应用样式。
- en: Note
  id: totrans-295
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'The QGIS community is very active in developing resources and eager to share
    them, so instead of spending a long time developing your own styles, you can apply
    ready styles provided by various users. We advise you to take a look at the following:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: QGIS 社区在开发资源方面非常活跃，并乐于分享，因此，你不必花费大量时间开发自己的样式，可以直接应用由不同用户提供的现成样式。我们建议你查看以下内容：
- en: Charley Glynn's OSM shapefile QGIS style sheets available at [https://github.com/charleyglynn/OSM-Shapefile-QGIS-stylesheets](https://github.com/charleyglynn/OSM-Shapefile-QGIS-stylesheets)
  id: totrans-297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Charley Glynn 的 OSM 形状文件 QGIS 样式表，可在[https://github.com/charleyglynn/OSM-Shapefile-QGIS-stylesheets](https://github.com/charleyglynn/OSM-Shapefile-QGIS-stylesheets)找到
- en: 3liz styles for OpenStreetMap data in QGIS at [https://github.com/3liz/osm-in-qgis](https://github.com/3liz/osm-in-qgis)
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 3liz 为 QGIS 中的 OpenStreetMap 数据提供的样式，请访问[https://github.com/3liz/osm-in-qgis](https://github.com/3liz/osm-in-qgis)
- en: Anita Graser's styles for SpatiaLite databases at [https://github.com/anitagraser/QGIS-resources/tree/master/qgis2/osm_spatialite](https://github.com/anitagraser/QGIS-resources/tree/master/qgis2/osm_spatialite)
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Anita Graser 为 SpatiaLite 数据库提供的样式，请访问[https://github.com/anitagraser/QGIS-resources/tree/master/qgis2/osm_spatialite](https://github.com/anitagraser/QGIS-resources/tree/master/qgis2/osm_spatialite)
- en: Ross McDonald's grayscale styles for OSM shapefiles in QGIS at [https://github.com/mixedbredie/OSM-Shapefile-QGIS-stylesheets/tree/master/QML%20files/greyscale](https://github.com/mixedbredie/OSM-Shapefile-QGIS-stylesheets/tree/master/QML%20files/greyscale)
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ross McDonald 为 QGIS 中的 OSM 形状文件提供的灰度样式，请访问[https://github.com/mixedbredie/OSM-Shapefile-QGIS-stylesheets/tree/master/QML%20files/greyscale](https://github.com/mixedbredie/OSM-Shapefile-QGIS-stylesheets/tree/master/QML%20files/greyscale)
- en: You can download ready-to-use `.qml` files from there and apply them to your
    layers, but it's important that attributes of your layers be the same as those
    used in the ready styles. Otherwise, you can use these styles as basic templates
    and adjust the field names and values manually.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以从那里下载可用的 `.qml` 文件并将其应用到你的层上，但重要的是你的层属性必须与已用样式中的属性相同。否则，你可以将这些样式作为基本模板，并手动调整字段名称和值。
- en: Using several styles for the same layer
  id: totrans-302
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 为同一层使用多个样式
- en: 'You can also get quick access to some styling properties from the layer''s
    contextual **Styles** right-click shortcut, as shown here:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以通过层上下文**样式**的右键快捷方式快速访问一些样式属性，如下所示：
- en: '![Using several styles for the same layer](img/image00360.jpeg)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![为同一层使用多个样式](img/image00360.jpeg)'
- en: 'For example, you can easily copy a style from one layer and paste it to another.
    Moreover, you can apply several styles for one layer and switch between them when
    necessary. To add a one more style to the layer, follow these steps:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，你可以轻松地将一个样式从一个层复制并粘贴到另一个层。此外，你可以为单个层应用多个样式，并在必要时在它们之间切换。要向层添加更多样式，请按照以下步骤操作：
- en: Click on the right-click contextual shortcut of **Add layer**, which is under
    **Styles**.
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**样式**下的**添加层**的右键快捷方式。
- en: In the **New style** window, type the name for the new style, and click on **OK**,
    as shown in the following screenshot![Using several styles for the same layer](img/image00361.jpeg)
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**新样式**窗口中，输入新样式的名称，然后点击**确定**，如图所示![为同一图层使用多个样式](img/image00361.jpeg)
- en: 'The layer''s appearance will not be changed, because it relies on the last
    applied style for now. Open the layer''s **Properties** dialog and adjust the
    new style like this:'
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 图层的外观将不会改变，因为它目前依赖于最后应用的风格。打开图层的**属性**对话框，并按如下方式调整新样式：
- en: You can develop a new style in the **Style** section in a common way, as described
    earlier in the *Developing your own styles* section.
  id: totrans-309
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以在**样式**部分以常见的方式开发新的样式，如在前面的*开发您自己的样式*部分所述。
- en: Also, it's possible to upload a ready style by going to **Style** | **Load Style**.
  id: totrans-310
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 此外，您还可以通过访问**样式** | **加载样式**来上传一个已准备好的样式。
- en: After the styling is done, click on the **OK** button. You will see that both
    the styles are available, either from the **Style** button menu or the **Styles**
    right-click contextual shortcut.
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在完成样式设置后，点击**确定**按钮。您将看到两种样式都可用，无论是从**样式**按钮菜单还是从**样式**右键快捷菜单。
- en: You can develop as many styles as you wish, and use the toggle beside their
    names to switch between styles. Also, you can use the **Add**, **Remove Current**,
    and **Rename Current** shortcuts to manage multiple styles.
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以开发尽可能多的样式，并使用它们名称旁边的切换按钮在样式之间切换。此外，您还可以使用**添加**、**移除当前**和**重命名当前**快捷键来管理多个样式。
- en: Adding base maps
  id: totrans-313
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加基础地图
- en: Base maps are ready-to-use background maps that provide contextual and spatial
    information additional to your data. They can be satellite imagery, general maps
    from various sources, or even self-prepared custom maps. In this section, we will
    take a look at the most popular types of background maps and how to load them
    into QGIS to combine them with your data.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 基础地图是现成的背景地图，提供除您数据之外的环境和空间信息。它们可以是卫星图像、来自各种来源的通用地图，甚至是自行准备的定制地图。在本节中，我们将探讨最流行的背景地图类型以及如何将它们加载到
    QGIS 中与您的数据结合使用。
- en: The OpenLayers plugin
  id: totrans-315
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: OpenLayers 插件
- en: This is one of the most popular QGIS plugins, as it allows simple addition of
    base maps from numerous popular map providers (OpenStreetMap, Google Maps, Bing
    Maps, and so on). Install the plugin as described in [Chapter 1](part0014.xhtml#aid-DB7S2
    "Chapter 1. Handling Your Data"), *Handling Your Data*, and make sure that it's
    active after installation.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 这是最受欢迎的 QGIS 插件之一，因为它允许简单地添加来自众多流行地图提供商（OpenStreetMap、Google Maps、Bing Maps
    等）的基础地图。按照[第 1 章](part0014.xhtml#aid-DB7S2 "第 1 章。处理您的数据")中描述的步骤安装插件，*处理您的数据*，并确保安装后它是激活的。
- en: Loading base maps is simple; go to **Web** | **OpenLayers**, select the provider,
    and click on the map you want to add. The map will be loaded into the map canvas
    and appear in the **Layers** panel. By default, layers are added to the first
    layer group, but you can drag and drop them wherever you want. The layer can be
    shown or hidden with the toggle beside its name, and deleted from the project
    with the **Remove** right-click contextual shortcut.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 加载基础地图很简单；转到**网络** | **OpenLayers**，选择提供商，然后点击您想要添加的地图。地图将被加载到地图画布中，并出现在**图层**面板中。默认情况下，图层被添加到第一个图层组，但您可以拖放它们到您想要的位置。您可以通过其名称旁边的切换按钮显示或隐藏图层，并使用**移除**右键快捷菜单从项目中删除图层。
- en: You can gain extended control over layers and navigation by activating the **OpenLayers
    Overview** panel from the menu. The panel will appear in the bottom-left corner
    under the **Layers** panel.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过激活菜单中的**OpenLayers 概览**面板来获得对图层和导航的扩展控制。面板将出现在**图层**面板的左下角。
- en: '![The OpenLayers plugin](img/image00362.jpeg)'
  id: totrans-319
  prefs: []
  type: TYPE_IMG
  zh: '![OpenLayers 插件](img/image00362.jpeg)'
- en: Activate the **Enable map** toggle and select a map for overview from the drop-down
    list. You can use two different maps in the overview window and the map canvas
    window for comparison. If you want to load the map into the canvas, click on the
    **Add map** button beside the drop-down list. For simpler navigation, there is
    a red cross in the main map window. It marks the center of the overview extent.
    You can hide it by clicking on the corresponding toggle. Also, the overview map
    can be saved as a `.jpeg` image, or a rectangular extent can be copied to the
    clipboard as KML.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 激活**启用地图**切换按钮，并从下拉列表中选择一个用于概述的地图。您可以在概述窗口和地图画布窗口中使用两个不同的地图进行比较。如果您想将地图加载到画布中，请点击下拉列表旁边的**添加地图**按钮。为了简化导航，主地图窗口中有一个红色十字，它标记了概述范围的中心。您可以通过点击相应的切换按钮来隐藏它。此外，概述地图可以保存为`.jpeg`图像，或者可以将矩形范围复制到剪贴板作为KML。
- en: 'The **OpenLayers** plugin is very useful because of its numerous maps and simplicity,
    but there are a number of constraints you should pay attention to while working
    with it. First of all, this plugin is aimed at providing base maps only, and before
    using it to perform other tasks, it is highly recommended to study the provider''s
    licensing terms. Secondly, note that adding any layer from the plugin''s list
    automatically changes the original map projection to **EPSG: 3857 WGS 84 / Pseudo
    Mercator**.'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: '**OpenLayers**插件非常实用，因为它提供了大量的地图和简洁性，但在使用它时，您应该注意一些限制。首先，此插件旨在提供基础地图，在用它执行其他任务之前，强烈建议您研究提供商的许可条款。其次，请注意，从插件列表中添加任何图层都会自动将原始地图投影更改为**EPSG:
    3857 WGS 84 /伪墨卡托**。'
- en: 'This is because the plugin fetches data originally provided in EPSG: 3857,
    and instead of reprojecting, it suppresses map projection and automatically reprojects
    the user''s data. Last but not least is the fact that with the OpenLayers plugin,
    you cannot rely on scale and map measurements. This is because the EPSG: 3857
    WGS 84 / Pseudo Mercator projection it uses was designed not to minimize object
    distortions (shape, area, distance, and so on) but to fit the entire globe in
    such a way that it could be shown on the web map. All measurements in this projection
    are performed on a sphere, and will most likely be much larger than expected.
    In a few words, this projection is good for visual exploration but not for measurements.
    To overcome these limitations, you can use other approaches.'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: '这是因为插件获取的是原始以EPSG: 3857提供的EPSG: 3857数据，而不是重新投影，它抑制了地图投影并自动重新投影用户的数据。最后但同样重要的是，使用OpenLayers插件时，您不能依赖于比例尺和地图测量。这是因为它使用的EPSG:
    3857 WGS 84 /伪墨卡托投影是为了将整个地球以适合在Web地图上显示的方式拟合，而不是最小化对象扭曲（形状、面积、距离等）。在这个投影中进行的所有测量都是在球体上进行的，并且很可能会比预期的要大得多。简而言之，这种投影适合视觉探索但不适合测量。为了克服这些限制，您可以使用其他方法。'
- en: Adding WMS/WMTS layers
  id: totrans-323
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加WMS/WMTS图层
- en: 'The **Web Map Service** / **Web Map Tile Service** (**WMS**/**WMTS**) is a
    popular web-protocol for spatial information transferring To add WMS/WMTS base
    layer to your map perform the following steps:'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: '**Web地图服务** / **Web地图瓦片服务**（**WMS**/**WMTS**）是一种流行的用于空间信息传输的Web协议。要将WMS/WMTS基本图层添加到您的地图中，请执行以下步骤：'
- en: To load data from web services, go to **Layer** | **Add Layer** | **Add WMS/WMTS**,
    use the corresponding button in the **Mange layers** toolbar, or use the *Ctrl*
    + *Shift* + *W* keyboard shortcut.
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从网络服务加载数据，请转到**图层** | **添加图层** | **添加WMS/WMTS**，使用**管理图层**工具栏中的相应按钮，或者使用*Ctrl*
    + *Shift* + *W*键盘快捷键。
- en: In the **Add layer(s) from a WM(T)S Server** window, click on the **New** button
    to configure new connection parameters.
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**从WM(T)S服务器添加图层**窗口中，点击**新建**按钮以配置新的连接参数。
- en: In **Create a new WMS Connection**, enter connection details. Type **Name**
    and **URL** for the connection and authentication parameters, if any. After filling
    in these details, click on **OK**. A newly created connection will show up in
    the drop-down list under the **Layers** tab.
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**创建新的WMS连接**中，输入连接详细信息。输入连接的**名称**和**URL**以及任何认证参数。填写这些详细信息后，点击**确定**。新创建的连接将显示在**图层**选项卡下的下拉列表中。
- en: Click on the **Connect** button to get information about the available layers,
    select the layer you want to use, click on **Add**, and then click on **Close**
    to leave the window.
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**连接**按钮以获取有关可用图层的信息，选择您想要使用的图层，点击**添加**，然后点击**关闭**以离开窗口。
- en: In the case of using WMS-layers, the data will automatically be reprojected.
    Also, you will have access to the layer's **Properties** dialog and styling parameters,
    such as transparency, blending, and color mode available for modification. Of
    course, these layers are available for creating high-resolution printing maps.
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用WMS层的情况下，数据将自动重新投影。此外，您将能够访问层的**属性**对话框和样式参数，如透明度、混合和颜色模式等可修改的参数。当然，这些图层可用于创建高分辨率打印地图。
- en: Adding TMS layers
  id: totrans-330
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加TMS图层
- en: The **Tile Map Service** (**TMS**) is another way of providing spatial data
    through the Internet in the form of georeferenced images (tiles). To load TMS
    data into QGIS, install and activate the **TileMapScale** plugin, as described
    in [Chapter 1](part0014.xhtml#aid-DB7S2 "Chapter 1. Handling Your Data"), *Handling
    Your Data*. After installation, the plugin is available from the **TileMapScale**
    menu under **Plugins**. The plugin's panel consists of two tabs. On the first
    tab, **Tool**, you can see a drop-down list with the available TMS datasets. With
    the **activate zoomlevels** toggle, scales will be set automatically to fit the
    tile's zoom level. Under the **Options** tab, you can activate **Use 'On-The-Fly'
    Transformation** if you want the tile layers to be adjusted to map projection.
    Set **min/max Zoomlevels** and click on the **DPI** button to set the resolution
    directly.
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: '**瓦片地图服务**（**TMS**）是通过互联网以地理参考图像（瓦片）的形式提供空间数据的另一种方式。要将TMS数据加载到QGIS中，按照[第1章](part0014.xhtml#aid-DB7S2
    "第1章。处理您的数据")中描述的步骤安装并激活**TileMapScale**插件，即*处理您的数据*。安装后，该插件在**插件**下的**TileMapScale**菜单中可用。插件面板由两个标签页组成。在第一个标签页**工具**中，您可以看到一个包含可用TMS数据集的下拉列表。使用**激活缩放级别**切换按钮，缩放将自动设置为适合瓦片的缩放级别。在**选项**标签页下，如果您想将瓦层调整到地图投影，可以激活**使用''即时''转换**。设置**最小/最大缩放级别**并点击**DPI**按钮以直接设置分辨率。'
- en: Note
  id: totrans-332
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The plugin stores dataset descriptions in the `UserName\ .qgis2\ python\ plugins\
    TileMapScaleLevels\ datasets` folder as `.xml` files. These files use the GDAL
    TMS minidriver format to describe the data source parameters. You can read more
    about this at [http://www.gdal.org/frmt_wms.html](http://www.gdal.org/frmt_wms.html).
    Using the examples provided with the original plugin installation and by studying
    the documentation, you can create `.xml` files for your own data providers.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 该插件将数据集描述存储在`UserName\ .qgis2\ python\ plugins\ TileMapScaleLevels\ datasets`文件夹中，以`.xml`文件的形式。这些文件使用GDAL
    TMS最小驱动程序格式来描述数据源参数。您可以在[http://www.gdal.org/frmt_wms.html](http://www.gdal.org/frmt_wms.html)了解更多相关信息。通过使用原始插件安装提供的示例以及研究文档，您可以为您自己的数据提供者创建`.xml`文件。
- en: Other than this plugin, you can also use the **TileLayer** and **QuickMapServices**
    plugins to work with TMS.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这个插件，您还可以使用**瓦片层**和**QuickMapServices**插件来处理TMS。
- en: Summary
  id: totrans-335
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: Now you know everything necessary for organizing and styling your data. You
    are also able to add informative labels, save your styles for future use and sharing,
    and provide some spatial background context with base maps from various sources.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经了解了组织并样式化您数据所需的所有必要信息。您还能够添加信息标签，保存您的样式以供将来使用和分享，并使用来自各种来源的基础地图提供一些空间背景上下文。
- en: The next step is to prepare your maps for printing.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是准备您的地图以供打印。
