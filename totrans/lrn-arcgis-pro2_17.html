<html><head></head><body>
    
      
                    Using Arcade Expressions for Labeling and Symbology
                
      
        <p>Previously, in <a href="7747c679-b20b-47b2-946d-a1f8c5a9ded0.xhtml">Chapter 12</a>, <em>Automating Processes with ModelBuilder and Python</em>, you learned about two programming languages that can be used to automate processes within <strong>ArcGIS Pro</strong>—<strong>ModelBuilder</strong> and <strong>Python</strong>. As you learned, ModelBuilder is considered a graphic or visual programming language, while Python is a syntax-driven scripting language. With the release of <strong>ArcGIS Pro 2.0</strong> and <strong>ArcGIS Enterprise 10.7</strong>, Esri has introduced a new language called <strong>Arcade</strong>. Arcade is a new lightweight expression language that has many uses within the ArcGIS Platform as you will learn throughout this chapter. </p>
        <p>This chapter will introduce you to the basic uses and syntax for Arcade. After completing this chapter, you will be able to create expressions that can generate text labels or control symbology.</p>
        <p>In this chapter, you will learn about the following topics:</p>
        <ul>
          <li>Learning about Arcade</li>
          <li>Understanding labeling expressions</li>
          <li>Understanding symbology expressions</li>
        </ul>
        <h1 id="uuid-6d0eb266-3448-4f94-ba2b-c645f931bbc9">Technical requirements</h1>
        <p>As with previous chapters of this book, you will need <strong>ArcGIS Pro 2.6</strong> or later to complete the exercises included in this chapter.</p>
        <h1 id="uuid-faca3b1d-4aab-496d-9939-c3bdcc194aa4">Learning about Arcade</h1>
        <p>As mentioned previously, Arcade is a lightweight expression language for ArcGIS. It is compatible with ArcGIS Pro, ArcGIS Enterprise, and ArcGIS Online. This means the expressions that you create in one application will successfully render the same way in the others. Because it is lightweight, meaning it does not require as much processing power to execute, it performs faster than other languages, making it perfect for web maps, as well as for working with large datasets.</p>
        <p>Each new release of ArcGIS includes increased use and capability of Arcade throughout the platform, including ArcGIS Pro. Initially, Arcade was used to create labeling expressions and control symbology, as you will learn in this chapter. It has since been expanded so that it can also be used to create fields on the fly that appear in information pop-up windows, establish attribute rules within your GIS database, create expressions in various geoprocessing tools, and more.</p>
        <p>It should be noted, for those who have used the older applications that ArcGIS Pro is now replacing, that Arcade is not compatible with<strong>ArcMap</strong>or<strong>ArcCatalog</strong>, nor does it appear that Esri has any intention of making Arcade compatible with these older applications.</p>
        <p>You may ask yourself <em>what is the difference between Arcade and other languages such as Python?</em> That is a very good question. The primary difference is that as an expression language, Arcade cannot be run externally from one of its parent applications, such as ArcGIS Pro. Languages such as Python don't have this same limitation. You can run a Python script from outside of ArcGIS using <strong>Windows Scheduler</strong>, the <strong>command line</strong>, and more. One thing that Arcade has in common with other languages is that it has its own syntax. So, let's explore some of Arcade's general syntax, which is used to create expressions, in this section.</p>
        <h2 id="uuid-7b630ac6-a907-45ce-adc1-3a549914e926">Understanding Arcade syntax</h2>
        <p>The syntax for Arcade has many things in common with other languages, such as Python or <strong>Structured Query Language</strong> (<strong>SQL</strong>). The first thing that we should define is its syntax. The syntax is the way that the code must be formatted in order for the expression, script, or application to run successfully. Now, you will examine specific examples of the syntax used in Arcade.</p>
        <h3 id="uuid-65c03b13-d734-42a8-930c-93f69c85500d">Understanding the text string syntax</h3>
        <p>When creating an expression using Arcade, if you want something to be treated as text, you must enclose it in single quotes, as in the following Arcade expression:</p>
        <div><pre>'Owners Name is '+$feature['Parcels.Owner_Name']</pre>
        </div>
        <p>Please note that the preceding code can't include an <em>apostrophe</em> for the term <kbd>Owners</kbd>, as it may be misinterpreted by the compiler as a single quote.</p>
        <p>This will create text labels on a map that looks as in the following diagram:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/d67a2fb1-b5ad-4b46-a51f-44c191e4db8a.png" style="width:32.83em;"/>
        </p>
        <p>As you can see in the preceding screenshot, the expression creates text labels that appear on the map for each parcel. The phrase⁠ Owners Nameis appears from the part of the expression that is enclosed in single quotes to indicate a text string. The actual owner's name, which is displayed in the map, is pulled from the attribute table associated with the <kbd>Parcels</kbd> layer.</p>
        <p>Next, we will explore how to add comments to your expressions.</p>
        <h3 id="uuid-7c3ca2c6-a171-4a66-ac09-8ff07aefd09b">Inserting comments into expressions</h3>
        <p>When writing any code, be it with Arcade, Python, or another programming language, it is considered best practice to add comments within your code that explain the function of a section within the code or provide descriptive information about the code, such as who created it, when it waswritten, the date it was created, and more.</p>
        <p>Arcade supports both single-line and multiple-line comments in your Arcade expressions. To add a single-line comment to your code, use <kbd>//</kbd>, as in the following code snippet:</p>
        <div><pre>//The following line labels a parcel with its owner's name.</pre>
        </div>
        <p>When ArcGIS Pro, ArcGIS Enterprise, or ArcGIS Online processes the Arcade code, it will ignore any line that starts with <kbd>//</kbd> as if it does not exist and will automatically proceed to the next line in the Arcade expression.</p>
        <p>Often, you will need to add more comments within your code that require multiple lines. To add multiple-line comments in Arcade, you must start the first comment line with <kbd>/*</kbd> and end the last line with <kbd>*/</kbd>, as in the following code:</p>
        <div><pre>/*<br/>This expression was built using Arcade for ArcGIS Pro 2.5 and ArcGIS Enterprise 10.8.<br/>It will label each parcel with its Parcel Identification Number and the Owner Name.<br/>*/</pre>
        </div>
        <p>Applications will ignore everything between <kbd>/*</kbd> and <kbd>*/</kbd> and go to the next line of code in the expression.</p>
        <p>Comments provide valuable information within your expression so that you and others can understand the purpose of the code used. This can be very helpful if, in the future, you or someone else needs to make updates to the expressions.</p>
        <p>Adding text string values and comments are very useful, but what if you need to use data found in a table in your expression to label a feature or apply specific symbology? We will explore the syntax required for that in the next section. </p>
        <h3 id="uuid-2a133d28-3cab-47f2-89e2-15222f95f984">Adding data from a table</h3>
        <p>As you are creating expressions to generate labels or symbology, you will need to pull data from the layer's attribute table. This is done by using a syntax that starts with <kbd>$feature</kbd>, as in the following code:</p>
        <div><pre>$feature.Land_Value</pre>
        </div>
        <p>As you can see from the preceding code, <kbd>$feature</kbd> is an example of a global variable. This is followed by a period and then the field name that you wish to retrieve the value from.</p>
        <p>This would return a label displaying the land value for a feature or generate a symbol for each land value.</p>
        <p>In the next section, we will introduce variables in Arcade expressions.</p>
        <h3 id="uuid-ced2b5d9-ec7a-4bfc-bd9d-bdb2cbcb61fd">Defining a variable</h3>
        <p>When writing code for expressions, scripts, or applications, a variable is something that you can assign a value to and then use the variable in place of the value. This makes it easier to type as you write your code because the variable that you create is often shorter than the real value.</p>
        <p>For example, you could create a variable called <kbd>X</kbd> and then say that it equals <kbd>Peachtree Industrial Boulevard</kbd>. So, any time in your code that you need to reference the <kbd>Peachtree Industrial Boulevard</kbd>value, you could just type <kbd>X</kbd> in the code and the application would know that that meant <kbd>Peachtree Industrial Boulevard</kbd>.</p>
        <p>In Arcade, to create a variable, you must declare it using a <kbd>Var</kbd> statement. The following code is an example of a variable in an Arcade expression:</p>
        <div><pre>Var owner = "Tripp"<br/>Return owner;</pre>
        </div>
        <p>The preceding code will return a value of <kbd>Tripp</kbd> to the application running the expressions. One other thing that you need to know about Arcade when creating a variable is that it is not case sensitive like other languages, such as Python. So, to Arcade, a variable called <kbd>owner</kbd> is the same as <kbd>Owner</kbd> or <kbd>OWNER</kbd>.</p>
        <p>So, you now know about some of the common Arcade syntaxes that are used when creating various types of expressions. It is important to understand the syntax if you are going to successfully create expressions on your own. The syntax forms the foundation for any expression that you wish to create. </p>
        <p>Now, it is time to look at specific types of expressions, starting with labeling in the next section.</p>
        <h1 id="uuid-a667aa84-487b-47be-a612-c1f83fbacd76">Understanding labeling expressions</h1>
        <p>As you learned in <a href="a0b88a3d-26f8-4b35-a295-2257d70802da.xhtml">Chapter 3</a>, <em>Creating 2D Maps</em>, labeling is a method to display text in a map based on attribute values connected to the features being labeled. However, in that chapter, you were only shown how to label each feature using a single attribute field. <em>What if you wanted to label features with values found in multiple fields?</em> For example, say you wanted to label each parcel with its parcel identification number and the owner's name. <em>How would you do that?</em></p>
        <p>Arcade allows you to create expressions that can do just that and more. You can label based on multiple fields and even split values on to multiple lines. You can even add descriptive text to the label as well. This section will teach you how to create expressions that will allow you to create labels that do all of these.</p>
        <p>Now, we will examine how to label features using multiple field values.</p>
        <h2 id="uuid-5dbe6536-7e4f-4705-8e2f-bde3627dc2bf">Configuring expressions to label with multiple field values</h2>
        <p>Creating an Arcade expression that labels features with values pulled from more than one field in its attribute table is pretty straightforward, meaning the syntax is not complicated. It could be as simple as using the following code, for example:</p>
        <div><pre>$feature.Parcel_No+$feature.Acre</pre>
        </div>
        <p>The preceding code would label each feature in the layer with its parcel number (<kbd>Parcel_No</kbd>) and its area in acres (<kbd>Acre</kbd>), as in the following screenshot:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/1919a9a9-01aa-4262-8144-fa4925dc7f95.png" style="width:43.42em;"/>
        </p>
        <p>As you can see from the preceding screenshot, while each feature is labeled with both the parcel number and its acreage, it is hard to tell where one stops and the other begins. Adding a space between the two values would certainly help. To add a space between the two values, see the sample code that follows:</p>
        <div><pre>$feature.Parcel_No+' '+$feature.Acre</pre>
        </div>
        <p>Here, we added <kbd>+</kbd>, followed by a single quotation mark with a space, and then another single quotation mark. This is then followed by another <kbd>+</kbd>, before the syntax for the <kbd>Acre</kbd> field. This results in labels that look like the following:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/7625034b-83b8-48d5-8d6f-f31bce15b924.png" style="width:45.58em;"/>
        </p>
        <p>As you can see from the preceding screenshot, the labels are a bit clearer now that a space has been added between the value for the parcel number and the acres. However, it could still be made better. So, next, we will look at a method to split the values on to their own line and add more descriptive text.</p>
        <h2 id="uuid-e46e7629-b006-4db3-918d-eff06a7c5184">Making labels more readable</h2>
        <p>While it can be extremely useful to label features with values from multiple fields, as you have seen, the label can be confusing or hard to read. Splitting those values on to separate lines and adding some descriptive text that explains what the values represent can make the label much easier to understand.</p>
        <p>To split a label into multiple lines, you will need to use the <kbd>Textformatting.Newline</kbd> command in your expression. If we use the expression that we created in the previous section to split the parcel number and acre values on to separate lines, the new expression would look like this:</p>
        <div><pre>$feature.Parcel_No+Textformatting.Newline+$feature.Acre</pre>
        </div>
        <p>This results in labels that look as follows:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/5904bf63-e9b3-489c-8404-dde292f56db1.png" style="width:46.25em;"/>
        </p>
        <p>As you can see from the preceding screenshot, the parcel number is displayed on the top line and the acreage is on the bottom line. You know this because you created the expression. However, someone else viewing the map may not understand what the two values are because there is no context or description. <em>So, how do you add descriptive text to the labels?</em></p>
        <p>You have already seen an example of that in the <em>Understanding the text string syntax</em> section of this chapter. You simply add your desired descriptive text enclosed in single quotes, as in the following code:</p>
        <div><pre>'Parcel ID Num = '+$feature.Parcel_No+Textformatting.Newline+'Area in Acres = '+$feature.Acre</pre>
        </div>
        <p>This will result in labels that look as in the following screenshot:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/5ed461c2-f86b-455d-9553-7aaf01bb7c9e.png" style="width:50.58em;"/>
        </p>
        <p>As you can see in the preceding screenshot, these labels are now much easier to read and understand. Now, it is your turn to put the knowledge that you have just learned into practice via a hands-on exercise.</p>
        <h2 id="uuid-7cd69f8c-d6df-407d-8895-92316611333e">Exercise 14A – Creating an Arcade label expression</h2>
        <p>The public works director has asked you to create a map that labels each sewer line with its size and the material that the pipe is made of. The attribute data for the city's sewer lines includes this information, but it is split between two fields. So, you will need to create an Arcade expression to accomplish this request.</p>
        <p>In this exercise, you will create an Arcade labeling expression that will label each sewer line with both its size and material. You will then work to make the label easier to understand by adding descriptive text.</p>
        <h3 id="uuid-87576feb-42a2-4133-8a21-06801c4645ee">Step 1 – Opening your project and reviewing the available data</h3>
        <p>In this step, you will open an existing project that already has a map that contains the sewer line data as a layer. You will then review the data available for the sewer lines to verify which fields you will need to use for the labels that you need to display:</p>
        <ol>
          <li>Start ArcGIS Pro and open the <kbd>Ex14A.aprx</kbd> project file, located in <kbd>C:\Student\IntroArcPro\Chapter14</kbd>. When the project opens, you should see the sewer system map, which contains the <kbd>Sewer Lines</kbd> layer that the public works director wants to be labeled with the size and pipe material.</li>
          <li>Next, you will examine the attribute table for the sewer lines to verify that the required data exists. Right-click on the Sewer Lines layer in the Contents pane, then select Attribute Table from the menu that appears, as in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/782a2ed5-088c-4214-b3b6-5e9f6e31da24.png" style="width:31.08em;"/>
        </p>
        <p style="padding-left: 60px">The attribute table for the <kbd>Sewer Lines</kbd> layer should open below the map view area. It's now time to review the table.</p>
        <ol start="3">
          <li>Take a few moments to review the attribute table for the <kbd>Sewer Lines</kbd> layer. Notice what fields are included in the table. Locate the two fields that might contain the data requested by the director.</li>
        </ol>
        <p>Question: <em>What are the names of the fields that contain the data that the director wants you to create labels for?</em></p>
        <ol start="4">
          <li>Once you have identified the two fields that contain the data needed to create the labels requested by the director, close the attribute table.</li>
        </ol>
        <p>You have now verified that you have the data required to create the requested labels for the sewer lines by reviewing the attribute table for that layer. Now, it is time to start building the labeling expression that will label the sewer line features.</p>
        <h3 id="uuid-8c4d8fc6-bfc1-479a-a7a3-54ddfc09bfb5">Step 2 – Creating a simple label expression</h3>
        <p>In this step, you will use the two fields that you identified in the last step to create an Arcade labeling expression. This will result in the sewer line features being labeled with text indicating their size and pipe material:</p>
        <ol>
          <li>Click on the Map tab in the ribbon. Then, click on the Bookmark button in the Navigate group. Select the Sewer Labeling Area bookmark, as in the following screenshot, to zoom the map to a better scale for viewing labels:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/21ad44ca-1466-4245-a2b7-8e9980d1f8ed.png" style="width:36.67em;"/>
        </p>
        <ol start="2">
          <li>Select the Sewer Lines layer in the Contents pane. The Feature Layer group contextual tab should appear in the ribbon.</li>
          <li>Click on the Labeling tab in the Feature Layer group contextual tab.</li>
          <li>Click on the Label button in the Layer group on the far left-hand side of the Labeling tab to turn on labels for the <kbd>Sewer Line</kbd> layer.</li>
        </ol>
        <p style="padding-left: 60px">When you turn on the labels, you should see some text appear just above each feature in the <kbd>Sewer Line</kbd> layer. The text that appears is not the value that the director had asked for. You will start building the expression next, which will display the requested values.</p>
        <ol start="5">
          <li>Click on the Expression button to the right of the Field cell, as shown in the following screenshot. This will open the Label Class pane:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/626180cf-2c0a-4bab-998f-63b99a8b178c.png" style="width:22.25em;"/>
        </p>
        <ol start="6">
          <li>In the Label Class pane, verify that the Language field is set to Arcade using the drop-down arrow.</li>
          <li>In the Expression panel of the Label Class pane, delete the existing expression by selecting the entire expression with your mouse and pressing the <em>Delete</em> key on your keyboard.</li>
          <li>In the Fields panel, locate and double-click on PIPE SIZE. That value should appear in the Expression panel, as in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/aaf1879a-2c08-41a1-b045-ad6368c53dc1.png" style="width:30.92em;"/>
        </p>
        <p style="padding-left: 60px">Notice how the <kbd>$feature</kbd> syntax is automatically added and the <kbd>SIZE_</kbd> field appears instead of <kbd>PIPE SIZE</kbd>. The <kbd>$feature</kbd> syntax was automatically added because you double-clicked in the Fields panel to add that selection to the expression.</p>
        <p>So, ArcGIS Pro knew to add the proper syntax. The reason you see PIPE SIZE in the Fields panel and SIZE_ in the Expression field is that one is a field alias and the other is the true field name. <kbd>PIPE SIZE</kbd> is the field alias. Field names cannot contain spaces. So, we often create alias or alternate names that are more descriptive so that we can better understand what we see in a field. The actual name of the field in the table is <kbd>SIZE_</kbd>.</p>
        <ol start="9">
          <li>Next, type <kbd>+</kbd> after <kbd>$feature.SIZE_</kbd> in the expression panel and type <kbd>‘ ‘</kbd>. <em>There is a space between the two single quotation marks</em>. This will add a space after the pipe size in the displayed label.</li>
          <li>Type another <kbd>+</kbd> character after the last quotation mark and then double-click on MATERIAL in the Fields panel so that it is added to the expression. Your expression should now look as in the following code:</li>
        </ol>
        <div><pre style="padding-left: 60px">$feature.SIZE_+' '+DomainName($feature, 'MATERIAL')</pre>
        </div>
        <p style="padding-left: 60px">Notice that the syntax for the <kbd>MATERIAL</kbd> field is a bit different than what was used for the <kbd>PIPE SIZE</kbd> field. That is because the <kbd>MATERIAL</kbd> field has been assigned a domain, which is a list of acceptable values that limits the user's ability to place any values otherthan those on the list into that field. This helps improve data accuracy.</p>
        <ol start="11">
          <li>Click on the Apply button. The text in the map should change so that you can now see that the sewer lines are labeled with their size and material, as shown in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/fb37636c-4087-40df-8676-63d8af8f317b.png" style="width:39.58em;"/>
        </p>
        <ol start="12">
          <li>Save your project by clicking on the Save Project button on the Quick Access Toolbar.</li>
        </ol>
        <p style="padding-left: 60px">You have created a label expression that meets the minimum requirements requested by the public works director. However, you could improve on it a bit more. For example, the pipe size is just a number; there is nothing to indicate the units associated with that number. It could be inches, centimeters, or something else. So, let's add to your expression to clarify the units for the pipe size.</p>
        <ol start="13">
          <li>In the Expression panel in the Label Class pane, click with your mouse just after $feature.SIZE_ in the expression that you have created. Then, type <kbd>+’in’</kbd> so that your expression should now look as follows:</li>
        </ol>
        <div><pre style="padding-left: 60px">$feature.SIZE_+'in'+' '+DomainName($feature, 'MATERIAL')</pre>
        </div>
        <ol start="14">
          <li>Once you have verified that your expression is correct, click the Apply button to apply the change to your expression. The labels should update to now include the text after the pipe size number. This indicates the sizes are in inches.</li>
          <li>Save your project and close ArcGIS Pro.</li>
        </ol>
        <p>In this exercise, you learned how to create an Arcade labeling expression that labels features based on values found in two different fields. You also learned how to format that expression to include a text string to indicate the units and add a space between values. Next, you will look at how Arcade expressions can be created so that they can control the symbology for a layer.</p>
        <h1 id="uuid-0b4f02fd-0283-4a94-a239-665aae17a1e9">Understanding symbology expressions</h1>
        <p>Now that you understand how Arcade expressions can be used to label features, it is time to look at another use for Arcade. You can also use Arcade expressions to control the symbology for features within a layer.</p>
        <p>You can use Arcade expressions to generate symbology categories or ranges based on equations, functions, or data logic. This can provide much greater flexibility with your data and how you can display it. For example, you might have a road that is attributed with the traffic count values. However, you want to symbolize them with a simple low, medium, or high volume for those who may not know about low, medium, or high traffic count numbers. An Arcade expression will allow you to do that.</p>
        <p>This section will show you how to create a symbology expression, along with some common operators.</p>
        <p>Now that you have a general idea of what a symbology expression can be used for, it is time to create one.</p>
        <h2 id="uuid-318a735c-a2da-4bdb-b59d-99adc96364ff">Creating a symbology expression</h2>
        <p>As mentioned, symbology expressions allow you to create symbology categories or ranges based on a function, equation, or data logic. <em>So, how do you do that?</em> Well, one of the common ways is to use <kbd>if</kbd> statements.</p>
        <p><kbd>if</kbd> statements are used to create conditional logic. That means the statements make use of operators, such as equal to, not equal to, greater than, or less than, to group data. For example, if you wanted to symbolize parcels based on land value by identifying them as having a high, medium, or low value per acre, you might create an expression that looks like this:</p>
        <div><pre>var value = ($feature['Parcel_Polygon.par_val']<br/>  /$feature['Parcel_Polygon.Acre'])<br/>if (value &lt;= 10000){<br/>    return 'Low Value';}<br/>if (value &gt; 10000 &amp;&amp; value &lt;= 50000){<br/>    return 'Medium Value';}<br/>else {<br/>    return 'High Value';}</pre>
        </div>
        <p>The first line in this expression defines a variable named <kbd>value</kbd>. This is the value of the parcel divided by the area of the parcel in acres. This represents the value per acre for each parcel.</p>
        <p>The next lines then evaluate whether the result is <kbd>Low Value</kbd>, <kbd>Medium Value</kbd>, or <kbd>High Value</kbd>, which becomes the display category for the parcels. A low value is any number less than or equal to <kbd>10,000</kbd>. A medium value is any number that is greater than <kbd>10,000</kbd> and less than or equal to <kbd>50,000</kbd>. A high value is any number that does not meet the other two criteria—so, any number greater than <kbd>50,000</kbd>.</p>
        <p>You can see the results in the following map screenshot:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/c5a29b64-f647-4821-a8c5-092c34b31008.png" style="width:29.58em;"/>
        </p>
        <p>Next, we will look at some of the common operators that you might use in your expressions.</p>
        <h3 id="uuid-f5f5d7e9-adfc-483f-95eb-6bcf1f75d464">Understanding the common operators</h3>
        <p>Arcade supports many operators. Operators are logical functions that are included in an expression, such as equal to or not equal to. These operators are typically represented by a symbolic character or multiple symbolic characters. Some of the common operators you will use are as follows:</p>
        <ul>
          <li>
            <strong>Basic operators</strong>
          </li>
          <li>
            <strong>Logical operators</strong>
          </li>
        </ul>
        <p>The basic operators are as follows:</p>
        <ul>
          <li>The <kbd>+</kbd> operator: This adds two numbers or concatenates two strings.</li>
          <li>The <kbd>-</kbd> operator: This subtracts two numbers.</li>
          <li>The <kbd>*</kbd>operator: This multiplies two numbers.</li>
          <li>The <kbd>/</kbd>operator: This divides two numbers.</li>
          <li>The <kbd>++</kbd>operator: This increments a number variable by 1.</li>
        </ul>
        <p>The logical operators are as follows:</p>
        <ul>
          <li>The <kbd>||</kbd>operator: This means or.</li>
          <li>The <kbd>&amp;&amp;</kbd>operator: This means and.</li>
          <li>The <kbd>==</kbd>operator: This means equal to.</li>
          <li>The <kbd>!=</kbd>operator: This means not equal to.</li>
          <li>The <kbd>&lt;</kbd>operator: This means less than.</li>
          <li>The <kbd>&lt;=</kbd>operator: This means less than or equal to.</li>
          <li>The <kbd>&gt;</kbd>operator: This means greater than.</li>
          <li>The <kbd>&gt;=</kbd>operator: This means greater than or equal to.</li>
        </ul>
        <p>Now, it is your turn to create a symbology expression with a hands-on exercise.</p>
        <h2 id="uuid-3ff76244-e5ae-436e-b3ff-fe5e5c4a4ac9">Exercise 14B – Creating a symbology expression</h2>
        <p>The road superintendent recently completed an inspection of all the roads in the city, giving them a score between <kbd>1</kbd> and <kbd>100</kbd>. The higher the score, the better condition the road is in. They would now like you to create a map showing the results of their inspections that they can present to the city council. However, instead of displaying the actual score for each road, they would like the roads symbolized as good, fair, or poor based on the score. A score of <kbd>1</kbd> to <kbd>40</kbd> would be considered poor. A score of <kbd>41</kbd> to <kbd>70</kbd> would be considered fair. A score of <kbd>71</kbd> or above would be considered good.</p>
        <p>In this exercise, you will create a symbology expression that will evaluate the score for each road segment and return whether it is poor, fair, or good.</p>
        <h3 id="uuid-b06a641d-fc44-45f2-9f2c-ad8c8db3056b">Step 1 – Evaluating the Street_Centerlines layer</h3>
        <p>In this step, you will open the project that contains the map showing the street centerline data. You will then open the attribute table for that data and review the information to determine where the inspection scores are located and what values are present:</p>
        <ol>
          <li>Start ArcGIS Pro and open the <kbd>Ex14B.aprx</kbd> project file located in <kbd>C:\Student\IntroArcPro\Chapter14</kbd>. When the project opens, you should see a map containing two layers—<kbd>Street_Centerlines</kbd> and <kbd>City_limit</kbd>—and a basemap.</li>
          <li>Right-click on the Street_Centerlines layer in the Contents pane and select Attribute Table from the menu that appears, as in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/961211d1-e552-4dc4-9018-e30bed9110b4.png" style="width:28.33em;"/>
        </p>
        <ol start="3">
          <li>Review the available fields in the attribute table for the Street_Centerlines layer.</li>
        </ol>
        <p>Question: <em>What field contains the inspection score for each road segment?</em></p>
        <ol start="4">
          <li>Take a moment to scroll down and review the values in the Inspection Score field that you just identified.</li>
          <li>Now, you need to determine what type of field Inspection Score is and what its true name is. Right-click on the Inspection Score field and select Fields from the menu that appears, as in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/d89d372e-2612-4f43-b885-7056df42cd20.png" style="width:22.58em;"/>
        </p>
        <p style="padding-left: 60px">You may ask yourself how we knew that Inspection Score was not the true name of the field. Field names in databases have specific limitations. First, they must start with a character and not a number. Second, they cannot contain special characters, such as spaces, <kbd>&amp;</kbd>, <kbd>@</kbd>, and so on. Note that underscores are allowed.</p>
        <div><p>Depending on the type of database, there may be other restrictions as well. Since the name displayed was Inspection Score, which contains a space, we know this is not the true name but is rather an alias.</p>
        </div>
        <ol start="6">
          <li>The Fields window should now be open. Review the information displayed in the window.</li>
        </ol>
        <p>Question: <em>What is the true field name for the Inspection Score field? What is the data type for the Inspection Score field?</em></p>
        <p style="padding-left: 60px">It is important to know these two things. The true name for the field is what you will need to use in the Arcade expression that you will build. The data type will also impact the syntax and what you can do with the values contained in the field.</p>
        <ol start="7">
          <li>Close the Fields window and the <kbd>Street_Centerlines</kbd> attribute table.</li>
        </ol>
        <p>Now that you know which field you will need to use to build your symbology expression and what its data type is, it is time for you to create the expression.</p>
        <h3 id="uuid-d54f910e-203f-4aa5-b016-c4b435bd0720">Step 2 – Creating a symbology expression</h3>
        <p>In this step, you will create an Arcade expression that will generate the symbology requested by the street superintendent. This expression will evaluate the score for each street segment and place it into the desired categories of poor, fair, and good:</p>
        <ol>
          <li>In the Catalog pane, select the Street_Centerline layer so that the Feature Layer contextual group tab appears, containing the Appearance, Labeling, and Data tabs.</li>
          <li>Click on the Appearance tab in the ribbon. Then, click on the Symbology drop-down arrow and select Unique Values, as in the following screenshot. This will open the Symbology pane:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/dca24267-af32-4b12-a481-2361ab7666ab.png" style="width:24.58em;"/>
        </p>
        <ol start="3">
          <li>Next, click on the Set an expression button, located to the far right of the Field 1 options, as illustrated in the following screenshot. This will open the Expression Builder window:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/20695333-1f16-496a-87d5-6a2d34e9f286.png" style="width:29.58em;"/>
        </p>
        <ol start="4">
          <li>In the cell located to the right of Title, type <kbd>Overall Condition</kbd>. This will be the title that appears in the Contents pane and the legend.</li>
        </ol>
        <p style="padding-left: 60px">Under the title that you just changed, there are two panels—Fields and Functions. The Fields panel contains a list of all the fields present in the attribute table for the <kbd>Street_Centerlines</kbd> layer. The Functions panel contains a list of general math, spatial analysis, and other functions that you can use in your expression. You will use the Fields panel later in this exercise. </p>
        <p style="padding-left: 60px">Under these two panels is the Expression panel. It is here that you will create your expression. This should already contain a simple expression calling on a single field. You will need to delete the current expression and build your own new one next.</p>
        <ol start="5">
          <li>Use your mouse to select the current expression displayed in the Expression panel. Once selected, press the <em>Delete</em> key on your keyboard to erase the current expression.</li>
          <li>Start your new expression by defining a variable that references the inspection score for each segment. In the Expression pane, type the following code, and then press <em>Enter</em>:</li>
        </ol>
        <div><pre style="padding-left: 60px">Var score = $feature.Insp_score</pre>
        </div>
        <p style="padding-left: 60px">You have now associated the <kbd>score</kbd>variable with the inspection score found in the database for each street centerline segment. So, when you need to reference that field in your expression code, all you need to do is use <kbd>score</kbd>.</p>
        <p style="padding-left: 60px">Next, you will use <kbd>If</kbd> statements to evaluate the inspection score for the segment so that they can be placed into the desired symbology categories.</p>
        <ol start="7">
          <li>In the Expression panel, add the following code and press <em>Enter</em> to move to the next line. This first line will segregate all the street segments that have an inspection score of <kbd>40</kbd> or less:</li>
        </ol>
        <div><pre style="padding-left: 60px">If (score &lt;=40)</pre>
        </div>
        <ol start="8">
          <li>Next, you will add a line of code to your expression that tells it what to do with any street segments with an inspection score less than or equal to <kbd>40</kbd>. Add the following code after the last line of code that you wrote:</li>
        </ol>
        <div><pre style="padding-left: 60px">{return 'Poor';}</pre>
        </div>
        <p style="padding-left: 60px">Your expression should now look as in the following screenshot:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/563b9485-7a7e-445e-93aa-413783429db9.png" style="width:18.08em;"/>
        </p>
        <p style="padding-left: 60px">You have created your first <kbd>If</kbd> statement. You still have more to write, though.</p>
        <ol start="9">
          <li>In the Expression panel, add the following code to your expression:</li>
        </ol>
        <div><pre style="padding-left: 60px">If ((score&gt;=41)&amp;&amp;(score&lt;=70))<br/>    {return 'Fair';}</pre>
        </div>
        <p style="padding-left: 60px">This <kbd>If</kbd> statement evaluates all the road segments with an inspection score greater than or equal to <kbd>41</kbd> and less than or equal to <kbd>70</kbd>. Then, it puts them into the <kbd>Fair</kbd> category. Remember that the <kbd>&amp;&amp;</kbd> expression is the Arcade syntax for <em>and</em> in the expression.</p>
        <p style="padding-left: 60px">Now, you need to create the code that handles the values that are greater than <kbd>70</kbd>, which will be placed in the <kbd>Good</kbd> category.</p>
        <ol start="10">
          <li>In the Expression panel, add the following code to your expression for those features that have an inspection score that is greater than <kbd>70</kbd>:</li>
        </ol>
        <div><pre style="padding-left: 60px">else{return'Good';}</pre>
        </div>
        <ol start="11">
          <li>Verify that your expression looks as in the following screenshot, then click OK to apply the new expression that you just created:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/db20b8ee-562c-4ec4-ac2e-8e779b2fc312.png" style="width:12.92em;"/>
        </p>
        <ol start="12">
          <li>Close the Symbology pane so that you can see the map.</li>
        </ol>
        <p style="padding-left: 60px">Your map should now look similar to the one in the following screenshot. Your colors may be a bit different, but you should now see the three categories that your Arcade expression generated, plus the &lt;all other values&gt; category, which appears by default. Also, notice above the symbology categories that the title that you entered has appeared as well, as follows:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/5176c6d4-34ac-4491-81ec-41fc839ac74f.png" style="width:46.58em;"/>
        </p>
        <ol start="13">
          <li>Save your project and close ArcGIS Pro.</li>
        </ol>
        <p>Congratulations! You have just created your first symbology Arcade expression. This will allow you to create more useful maps based on logical statements and equations. This further increases the flexibility of your geographical information system.</p>
        <h1 id="uuid-685c729a-f1d0-4aca-ba82-e995871123cc">Summary</h1>
        <p>In this chapter, you have learned how Arcade expression can allow you to create maps that contain more descriptive labels and logical symbology. This further enhances your ability to use your GIS data by allowing you to create even more useful and detailed maps.</p>
        <p>As you have seen, Arcade, like Python, has its own syntax. You now have a general understanding of this new syntax and what it requires.</p>
        <p>This chapter just touched the surface of what you can do with Arcade in the ArcGIS platform. With each new release of ArcGIS Pro, ArcGIS Enterprise, and ArcGIS Online, Esri is adding more capability to the Arcade expression language.</p>
        <h1 id="uuid-48aaabd5-8a61-4a02-9617-1dd875062132">Further reading</h1>
        <p>For more information about Arcade syntax and capability, go to <a href="https://developers.arcgis.com/arcade/">https://developers.arcgis.com/arcade/</a>.</p>
      
    
  </body></html>