<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Creating Data</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will be creating GIS data. We will predominantly be working with GeoPackages. This is the default format for storing GIS data in QGIS 3.4. Instead of the many extensions that a Shapefile has, a GeoPackage can have hundreds of layers contained in one file, making it simpler to share and manage.</p>
<p>We will look at creating geometries of points, lines, and polygons. We will add attributes to a attribute table and use the Field Calculator to calculate the area of a polygon. We will briefly discuss the use of scratch layers and exporting our data to a Shapefile. Finally, we will look at how raster data is imported into a GeoPackage.</p>
<p>In this chapter, you will learn about the following topics:</p>
<ul>
<li>Creating a GeoPackage</li>
<li>Creating vector data:
<ul>
<li>Editing geometry</li>
<li>Creating attributes</li>
</ul>
</li>
<li>Scratch layers and saving as a Shapefile</li>
<li>Working with raster data in a GeoPackage</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating data</h1>
                </header>
            
            <article>
                
<p>As we noted in <a href="44524991-c928-4616-a928-9fee41ef2270.xhtml">Chapter 1</a>, <em>Getting Started with QGIS 3,</em> and <a href="6dc781bb-3041-41ce-bd3b-bd355acac92d.xhtml">Chapter 2</a>, <em>Loading Data</em>, the default export GIS format in QGIS 3.4 is a GeoPackage. Any vector data operation that we perform can be applied to a <span>Shapefile</span>—at the end of this chapter, we will show how to export any vector layer in a GeoPackage into a <span>Shapefile</span> (you can also export to a number of other formats; see <a href="https://www.gdal.org/ogr_formats.html">https://www.gdal.org/ogr_formats.html</a>).</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Open the QGIS project we created in <a href="https://cdp.packtpub.com/qgis_quick_start_guide/wp-admin/post.php?post=26&amp;action=edit#post_25">Chapter 2</a><span>, </span><em>Loading Data</em>. If you skipped the previous chapter, load the following layers from the GeoPackage associated with this book (available at this link):<a href="https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip"> https://github.com/PacktPublishing/QGIS-Quick-Start Guide/blob/master/Alaska_GeoPackage.zip:</a></p>
<ul>
<li><kbd>Airports</kbd></li>
<li><kbd>majrivers</kbd></li>
<li><kbd>trees</kbd></li>
</ul>
<p>Also load <kbd>SR_50M_alasja_nad.tif</kbd> from <kbd>QGIS_sample_data</kbd> (downloaded from <a href="https://qgis.org/downloads/data/qgis_sample_data.zip">https://qgis.org/downloads/data/qgis_sample_data.zip</a>). Save this project as <kbd>Chapter3.qgz</kbd>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a GeoPackage</h1>
                </header>
            
            <article>
                
<p>In this chapter, we will create some data. It will be captured in the same location and projection as the QGIS sample data. We will focus on mapping the island off the coast of Anchorage called <strong>Fire Island</strong>. First off, let's create a GeoPackage called <kbd>Fire_Island</kbd>.</p>
<p>To create a <span class="packt_screen">New GeoPackage Layer</span> (a layer within a GeoPackage), we first need to create a new GeoPackage. From the <span class="packt_screen">Layer</span> menu, select <span class="packt_screen">Create Layer</span> | <span class="packt_screen">New GeoPackage Layer</span>, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/4eb0d4db-805c-450f-9614-1867b74c3ec6.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Creating a GeoPackage layer</div>
<p>In the resulting dialog box, fill in the parameters, as in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/fb645eb0-ea60-435f-9910-aeb83c8783bd.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">GeoPackage reference dialog box</div>
<p>We are going to create a layer in this GeoPackage called <kbd>Fire_Island_Points</kbd>, with <span class="packt_screen">Geometry type</span> as <span class="packt_screen">Point</span> and the coordinate reference system as EPSG 2964. Create a <span class="packt_screen">New field</span> called <kbd>Description</kbd> and set its <span class="packt_screen">Type</span> to <span class="packt_screen">Text data</span> with a maximum <span class="packt_screen">Length</span> of <kbd>25</kbd>. Click on <span class="packt_screen">Add to fields list</span> to add it to the field. We can always add extra fields later. Click on <span class="packt_screen">OK</span>. When you click <span class="packt_screen">OK</span>, a new GeoPackage will be created and the <kbd>Fire_Island_Points</kbd> layer will be added. You should have a new layer in the <span class="packt_screen">Layers</span> panel called <kbd>Fire_Island_Points</kbd>. If you right-click on this layer and select <span class="packt_screen">Open Attribute Table</span>, the associated table for this layer will appear. It will be empty and will have a <span class="packt_screen">fid</span> field (assigned by default) and the <span class="packt_screen">Description</span> field that we just created. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f9276fb8-42eb-45ff-b9c1-70d34ae7a9b5.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Layers and attribute table</div>
<p>We have now created a GeoPackage and a <span class="packt_screen">Point</span> layer within that GeoPackage. We now need to create some data. Before we do that, we need to locate Fire Island to have something we can base our data on! Fortunately for us, QGIS makes this very easy as it allows you to add <kbd>OpenStreetMap</kbd> to your project.</p>
<p>In the <span class="packt_screen">Browser</span> panel, find <kbd>XYZ Tiles</kbd> and expand it. Inside should be <kbd>OpenStreetMap</kbd>. Click and drag this into the map. It will appear as a new layer in the <span class="packt_screen">Layers</span> panel. Adjust the order of the layers in the <span class="packt_screen">Layers</span> panel to match those shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f39fd6cb-a722-4f1e-9384-89b574ba127e.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Browser panel and Layers panel</div>
<p>Navigate the map to find Anchorage, and you should see Fire Island. It is located off the coast to the west of Anchorage. At this point, turn off all the other layers except for <kbd>Fire_Island_Points</kbd> and the <kbd>OpenStreetMap</kbd> layer.</p>
<p>Your project should now look like the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/fb693e1f-77b4-4fe2-88d1-00d230e08552.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Overview of OpenStreetMap displayed in QGIS 3.4</div>
<p>In the next section, we will create some data using <span class="packt_screen">Digitizing Toolbar</span>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Digitizing data</h1>
                </header>
            
            <article>
                
<p>In this section, we will create point, line, and polygon data in QGIS. We will create this data in the GeoPackage we have just created.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating points</h1>
                </header>
            
            <article>
                
<p>Zoom into Fire Island so that the airport appears. We will now create a point to represent this airport. Make sure that <span class="packt_screen">Digitizing Toolbar</span> is visible. You can turn it on by selecting <span class="packt_screen">View</span> | <span class="packt_screen">Toolbars</span> | <span class="packt_screen">Digitizing Toolbar</span>. <span class="packt_screen">Digitizing Toolbar</span> is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ac51595a-2ce7-40c3-8a1c-b575ab381331.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Digitizing Toolbar</div>
<p>Make sure that the <kbd>Fire_Island_Points</kbd> layer is selected in the <span class="packt_screen">Layers</span> panel and click on the Toggle Editing button (yellow pencil) to start an editing session. The digitizing tools are now active in the toolbar, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7a257cfa-ebe4-471b-9a29-e723ce91453b.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Digitizing tools with Toggle Editing activated</div>
<p>Click on the Add Point Feature button (three green dots). The mouse cursor will change to cross hairs. Click on the airport location in the <kbd>OpenStreetMap</kbd> data. A <span class="packt_screen">Feature Attributes</span> dialog box will open. In here, accept <span class="packt_screen">Autogenerate</span> for <span class="packt_screen">fid</span> (this assigns a unique identifier to a feature), and for <span class="packt_screen">Description</span>, type <kbd>Fire_Island_Airport</kbd>. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/202cf2bb-e3c0-4151-8224-9a0c9661afbd.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Fire_Island_Points feature attributes</div>
<p>A new point will be created. On the <span class="packt_screen">Digitizing Toolbar</span>, click on save (the blue disk). Open the attribute table. You will see this newly added point. While still in editing mode, let's add a new field. With the attribute table opened, click on New field (Ctrl+W), as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b2cf4fcc-6547-4a25-853a-4e2ac2de0936.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Attribute table</div>
<p>This will open a dialog box called <span class="packt_screen">Add Field</span>. Create a new field called <kbd>Type</kbd> and set its <span class="packt_screen">Length</span> to <kbd>25</kbd> (<kbd>25</kbd> because we are not expecting any string entered to be greater than <kbd>25</kbd> characters). This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c3b7ec45-0463-47d8-81d5-de2d4c195908.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Adding a field</div>
<p>Click on <span class="packt_screen">OK</span> and the newly created field will appear as a <span class="packt_screen">NULL</span> value in the attribute table. Click on the <span class="packt_screen">NULL</span> value and change it to <kbd>Airport</kbd>. In the attribute table, click on the save button and then the Toggle Editing button (yellow pencil) to stop editing. We have now created a point layer in a GeoPackage, added attributes, and created a new field. Let's use this knowledge to create a road layer (line) and an island outline layer (polygon).</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating line data</h1>
                </header>
            
            <article>
                
<p>From the <span class="packt_screen">Layer</span> menu, select <span class="packt_screen">Layer</span> | <span class="packt_screen">Create Layer</span> | <span class="packt_screen">New GeoPackage Layer</span>, as we did before. Fill in the dialog box to match the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/4904b3fd-2d6a-482b-9392-2b997b70302b.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Creating a Roads layer</div>
<p>Click on <span class="packt_screen">OK</span>. You will be prompted as to whether you wish to <span class="packt_screen">Overwrite</span>, <span class="packt_screen">Add new layer</span>, or <span class="packt_screen">Cancel</span>. In this case, click on <span class="packt_screen">Add new layer</span>, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/00d5abc1-0d48-413a-826e-060105a556ff.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">New GeoPackage layer message box</div>
<p>A <kbd>Roads</kbd> layer will appear in the <span class="packt_screen">Layers</span> panel. Make sure it is selected and then click on Toggle Editing from <span class="packt_screen">Digitizing Toolbar</span>. Click on Add Line Feature. This time, find an existing road on the island and digitize it. You digitize by left-clicking the mouse and then moving to a new location and left-clicking again—the software will join up these two clicks, known as <strong>nodes or vertexes</strong>. You can click on the zoom and pan tools while editing to zoom around and make the process easier. Don't worry about being too accurate, this is a learning exercise. When finished, right-click to complete the line. Set the <kbd>Road_Type</kbd> field to blacktop and click save.</p>
<p>Let's create another road. This will be another feature in our <kbd>Roads</kbd> layer. To maintain the topology, we will need to ensure that the road lines touch. This is done by snapping. We can snap to vertex, segment, or intersection in QGIS. Turn on <span class="packt_screen">Snapping Toolbar</span> by clicking <span class="packt_screen">View</span> | <span class="packt_screen">Toolbars</span> | <span class="packt_screen">Snapping Toolbar</span>. In an edit session, <span class="packt_screen">Snapping Toolbar</span> looks as in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/3fb070a3-aeb1-46fe-b0df-7f092ea826be.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Snapping Toolbar</div>
<p>In this case, the snapping tolerance has been changed to <span class="packt_screen">10</span> pixels, but you can make adjustments to this based on your zoom level. This is not necessarily a one-size-fits-all, and you will need to adjust this parameter to suit your requirements. Set the snapping environment to <span class="packt_screen">Vertex and Segment</span> to ensure you have the chance to snap to an adjoining road, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/3f5d0b97-207d-4ff1-a849-87af7bc3f88d.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Snapping options</div>
<p>You are looking for a pink square to appear inside your cross hair digitizing cursor. You may need to zoom in. It will look as in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/20ea4da1-7cfa-4f8f-807b-429de46dd53c.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Snapping at the point</div>
<p>Create a new road and use snapping to ensure that the lines are topologically correct—that is, have no gaps. When you have finished digitizing, right-click and add blacktop in the <kbd>Road_Type</kbd> field and click save. Click Toggle Editing to finish the digitizing. You can continue to digitize more roads if you wish.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating polygons</h1>
                </header>
            
            <article>
                
<p>Finally, in this vector editing section, we will take a look at editing polygons. All the techniques we have learned for lines and points apply. Again, create a new layer in your GeoPackage, and this time call it <kbd>Island_Outline</kbd>. We are not going to be creating any fields, so accept the defaults shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/55a0340a-956f-4c16-8de9-0d42e1d8b8da.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Creating a polygon Layer</div>
<p>Select the new layer in the <span class="packt_screen">Layers</span> panel, click Toggle Editing and digitize the island. Don't worry about being too detailed. The result will be a digitized island. In QGIS, the new polygon layer will appear similar to the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f6900444-fec3-4421-a8a3-fbbdc39026af.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Overview of editing inside QGIS</div>
<p>Now let's create a field called <kbd>area</kbd> and populate its actual area. To do this, we will use the <span class="packt_screen">Field Calculator</span> tool in <span class="packt_screen">Attributes</span> <span class="packt_screen">Toolbar</span>. With <kbd>Island_Outline</kbd> selected, click on the <span class="packt_screen">Field Calculator</span> button (the abacus icon). Enter the following values: <span class="packt_screen">Create a new field</span> called <kbd>area</kbd>, set it as <span class="packt_screen">Whole number</span>, and in the <span class="packt_screen">Expression</span> box enter <kbd>$area</kbd>. This is shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/36b6ee82-0460-402d-b733-cce7bdd3a57b.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Field Calculator</div>
<p>Click on <span class="packt_screen">OK</span>. This will turn on Toggle Editing, create a new field called <kbd>area</kbd>, and populate it with the area. If you have multiple features, all the areas will be calculated. Or, you can select the features you want to calculate the area for by using the selection tools. The Field Calculator tool is a flexible and very powerful tool. The resulting area is shown in the attribute table. When calculating area remember all units will be calculated in the units of the projection. If you wanted to check the area, you could use the measure tool shown in <a href="6dc781bb-3041-41ce-bd3b-bd355acac92d.xhtml">Chapter 2</a><span>, </span><em>Loading Data</em>, to verify this measurement. Untoggle the edit session and save the project.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Scratch layers</h1>
                </header>
            
            <article>
                
<p>Scratch layers are temporary vector layers that remain present while the QGIS project you are working on is open, but are lost upon closing—they are stored in memory. Scratch layers are useful when you want to quickly draw some features on a map. The benefit is that you don't need to think about file formats and locations for your temporary data. If you find you need to keep the layer, it can be exported as a permanent file—we will look at this in the next section.</p>
<p>To create a scratch layer, select <span class="packt_screen">Layer</span> | <span class="packt_screen">Create Layer</span> | <span class="packt_screen">New Temporary Scratch Layer</span>. Select <span class="packt_screen">Polygon / CurvePolygon</span> as <span class="packt_screen">Geometry type</span>, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a2212bed-59a7-4a49-97d7-d35528210d94.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Creating a scratch layer</div>
<p>Digitize around one of the water bodies on <kbd>Fire_Island</kbd> using the techniques we have already highlighted. Your project will look like the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b35803fe-e904-4aaa-8bf2-775e17a6174f.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Overview of Digitized water body</div>
<p>Save your edits and untoggle editing. Scratch layers should help you with data management—no need to create multiple <kbd>test.shp</kbd> files and not know what they are any more.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Saving data to Shapefiles</h1>
                </header>
            
            <article>
                
<p>We might want to save this scratch layer to a <span>Shapefile</span>. In fact, we can follow the same method for saving any of our data to a <span>Shapefile</span>. Right-click on the layer and select <span class="packt_screen">Export</span> | <span class="packt_screen">Save Features as</span>. From the drop-down menu next to <span class="packt_screen">Format</span>, choose <span><span class="packt_screen">ESRI Shapefile</span></span><span>, as shown in the following screenshot:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/65eb08da-f8d4-46ee-bc95-095129e6f6d8.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Saving to a <span>Shapefile</span></div>
<p>Accept the defaults and a new  <span>Shapefile</span> will be created.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Raster data</h1>
                </header>
            
            <article>
                
<p>For the main, raster data that you create will be created via processing tools such as interpolation or the gridding of point data. Sometimes, we may want to rasterize a vector layer. This can be done using the <span class="packt_screen">Raster</span> | <span class="packt_screen">Conversion</span> | <span class="packt_screen">Rasterize</span> command.</p>
<p>Let's load the <kbd>SR_50M_alasak_nad.tif</kbd> raster into the GeoPackage we have just created. You can just drag the layer in the <span class="packt_screen">Browser</span> panel into the GeoPackage. It will show a message box once loaded, as in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/238b6cb9-6188-41e5-ae3e-cfe9fc9354f5.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Importing a Raster layer to a GeoPackage</div>
<p>The <kbd>Fire_Island.gpkg</kbd> GeoPackage will now look like the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/bb65b44d-a26b-4324-9bbe-4388e81d98ea.png" style=""/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Contents of the GeoPackage</div>
<p>It is that simple to add data to a GeoPackage. Drag this layer into the map to check that it is actually present.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating a raster dataset</h1>
                </header>
            
            <article>
                
<p>We are going to perform a query on the <kbd>landcover</kbd> data to create a new layer and then move it into the <kbd>Fire_Island</kbd> GeoPackage. Load the <kbd>landcover</kbd> raster from the <kbd>raster</kbd> folder in the QGIS sample data into the <span class="packt_screen">Layers</span> panel.</p>
<p class="mce-root"/>
<p>Next, select <span class="packt_screen">Raster</span> | <span class="packt_screen">Raster Calculator</span> from the main menu. Fill in <span class="packt_screen">Raster Calculator</span>, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6d6182e6-731a-4fe3-a33d-36267e24b9b6.png"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Raster Calculator</div>
<p>Save the new raster to a GeoTIFF file and click on <span class="packt_screen">OK</span>. This will create a mask—anything with a <kbd>landcover</kbd> value greater than five will be assigned  a value of one, and everything less than five will be assigned a value of zero. In the next chapter, we will show how we can display this data in a more meaningful way, setting transparency and changing color ramps.</p>
<p>Finally, drag this newly created layer into the <kbd>Fire_Island</kbd> GeoPackage.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>We have looked at creating vector and raster data. Using the default GeoPackage format in QGIS is a powerful, yet simple, way to manage our GIS data. In this chapter, we have built geometries for points, lines, and polygons, and assigned attributes. We have created scratch layers, Shapefiles, and rasters.</p>
<p>In the next chapter, we will look at this attribute data to style our data. We will use the values in a raster to utilize different color ramps. The next chapter is a stepping stone on our way to creating a map, which we will do in <a href="2481b8d1-b60c-4839-bb1c-c8654cd792b2.xhtml">Chapter 5</a>, <em>Creating Maps</em>.</p>


            </article>

            
        </section>
    </body></html>