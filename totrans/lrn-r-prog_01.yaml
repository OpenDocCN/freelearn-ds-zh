- en: Chapter 1.  Quick Start
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章. 快速入门
- en: Data analysis is difficult without the proper tools. It is almost impossible
    to extract patterns directly from a large set of numbers aligned in rows and columns
    and draw any conclusion, even for experts. A suitable tool, such as R, will remarkably
    boost your productivity in working with data. From my experience, learning a programming
    language is somehow like learning a human language. It is probably not a good
    idea to jump right into the details of vocabulary and grammar before looking at
    the big picture, getting motivated, and starting small. This chapter gives you
    a quick start by taking an overview of the R programming language in depth.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 没有适当的工具，数据分析是困难的。从一大堆按行和列排列的数字中直接提取模式并得出任何结论几乎是不可能的，即使是专家也是如此。一个合适的工具，如R，将显著提高你在处理数据方面的生产力。根据我的经验，学习编程语言有点像学习人类语言。在了解大局、获得动力并从小处着手之前，直接跳入词汇和语法的细节可能不是一个好主意。本章通过深入概述R编程语言，为你提供一个快速入门。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Introducing R
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍R
- en: The need for R
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: R的需求
- en: Installing R
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装R
- en: Tools required to write R code
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编写R代码所需的工具
- en: As soon as the software and tools are ready to go, you will write a simple R
    program to experience how it basically works. Once this is done, the R journey
    will unfold from the basics to advanced techniques and applications.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦软件和工具准备就绪，你将编写一个简单的R程序来体验它基本的工作方式。一旦完成，R之旅将从基础知识到高级技术和应用展开。
- en: Introducing R
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍R
- en: R is a powerful programming language and environment for statistical computing,
    data exploration, analysis, and visualization. It is free, open source, and has
    a strong, rapidly growing community where users and developers share their experience
    and actively contribute to the development of more than 7,500 packages, so that
    R can deal with problems in a wide range of fields (refer to [https://cran.r-project.org/web/views/](https://cran.r-project.org/web/views/)).
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: R是一种强大的编程语言和环境，用于统计计算、数据探索、分析和可视化。它是免费的、开源的，并且有一个强大且快速增长的社区，用户和开发者在这里分享他们的经验，并积极为超过7,500个包的开发做出贡献，从而使R能够处理广泛领域的各种问题（参考[https://cran.r-project.org/web/views/](https://cran.r-project.org/web/views/)）。
- en: Although the origin of the R programming language dates back to 1993, its general
    adoption in R programming language data-related research industry has grown rapidly
    in the last decade and has become the lingua franca of data science.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管R编程语言的起源可以追溯到1993年，但其在R编程语言数据相关研究行业的普及在过去十年中迅速增长，并已成为数据科学的通用语言。
- en: In general, R should be viewed as more than just a programming language; it
    is a comprehensive computing environment, a strong and active community, and a
    rapidly growing and expanding ecosystem.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，R应该被视为不仅仅是编程语言；它是一个全面的计算环境、一个强大而活跃的社区，以及一个快速发展和扩张的生态系统。
- en: R as a programming language
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: R作为一种编程语言
- en: R, as a programming language, has been evolving and developing over the last
    20 years. Its goal is quite clear to make it easy and flexible to perform comprehensive
    statistical computing, data exploration, and visualization.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: R作为一种编程语言，在过去20年里一直在发展和演变。其目标是相当明确的，即使其易于灵活地进行全面的统计计算、数据探索和可视化。
- en: However, ease of use and flexibility usually create conflicts. It can be very
    easy to click a few buttons to finish a variety of tasks in statistical analysis,
    but it won't be flexible if you need customization, automation, and your work
    needs to be reproducible. It can be very flexible to use tens of functions to
    transform data and make complicated graphics, but it won't be easy to learn and
    combine these functions correctly. R stands out for its well-positioned balance.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，易用性和灵活性通常会产生冲突。在统计分析中，点击几个按钮轻松完成各种任务可能非常简单，但如果需要定制、自动化，并且你的工作需要可重复性，那么它就不会灵活。使用数十个功能来转换数据和制作复杂的图形可能非常灵活，但正确学习和组合这些功能却不会容易。R因其恰到好处的平衡而脱颖而出。
- en: R as a computing environment
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: R作为一个计算环境
- en: R, as a computing environment, is lightweight and ready to use. Compared to
    some other famous statistical software, for example, Matlab and SAS, R is much
    smaller and easier to deploy.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: R作为一个计算环境，轻量级且易于使用。与其他一些著名的统计软件，例如Matlab和SAS相比，R要小得多，部署也更容易。
- en: In this book, we will use RStudio to handle almost all our work in R. This integrated
    development environment provides rich features such as syntax-highlighting, auto-completion,
    package management, graphics viewer, help viewer, environment viewer, and debugging.
    These features hugely boost your productivity.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，我们将使用RStudio来处理我们几乎所有在R中的工作。这个集成开发环境提供了诸如语法高亮、自动完成、包管理、图形查看器、帮助查看器、环境查看器和调试等丰富功能。这些功能极大地提高了你的生产力。
- en: R as a community
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: R作为一个社区
- en: R, as a community, is strong and active. You can visit Try R ([http://tryr.codeschool.com/](http://tryr.codeschool.com/))
    immediately and get a first impression of R basics through an interactive tutorial.
    In practice, when you are coding, you probably won't solve every problem by yourself.
    You may google an R question and find that it almost always has answers in StackOverflow
    ([http://stackoverflow.com/questions/tagged/r](http://stackoverflow.com/questions/tagged/r)).
    If your question is not fully addressed, you can ask it and probably get an answer
    in a couple of minutes.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: R作为一个社区，强大而活跃。你可以立即访问Try R ([http://tryr.codeschool.com/](http://tryr.codeschool.com/))，并通过一个交互式教程来获得R基础的第一印象。在实践中，当你编码时，你可能不会自己解决每一个问题。你可能会在Google上搜索一个R问题，并发现它几乎总是有StackOverflow
    ([http://stackoverflow.com/questions/tagged/r](http://stackoverflow.com/questions/tagged/r))上的答案。如果你的问题没有得到完全解决，你可以提出问题，并且可能几分钟内就能得到答案。
- en: If you need to use a package but also want to see how it works in detail, you
    can visit the source code at its online repository (or repo). Many repos are hosted
    by GitHub ([https://www.github.com](https://www.github.com)). In GitHub, you can
    do much more. When you find that a package is not working correctly, you can report
    a bug by filing an issue on the problem. If you need a feature that fits the purpose
    of the package, you can request a feature also by filing an issue for your demand.
    If you are interested in contributing to the package by resolving bugs and implementing
    features, you can fork the project, edit the code, and send merge requests so
    that your changes can be accepted by the owner. If your changes are accepted,
    congratulations, you have become a contributor to the package! Amazingly, R and
    its thousands of packages are built by contributors all over the world.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要使用一个包，但又想详细了解其工作原理，你可以访问其在线仓库（或repo）的源代码。许多仓库由GitHub托管（[https://www.github.com](https://www.github.com)）。在GitHub上，你可以做很多事情。当你发现一个包运行不正常时，你可以通过在问题报告上提交一个bug来报告问题。如果你需要一个符合包用途的功能，你也可以通过提交一个需求报告来请求功能。如果你有兴趣通过解决bug和实现功能来为这个包做出贡献，你可以fork项目，编辑代码，并发送合并请求，以便你的更改可以被所有者接受。如果你的更改被接受，恭喜你，你已经成为了这个包的贡献者！令人惊讶的是，R及其成千上万的包是由世界各地的贡献者共同构建的。
- en: R as an ecosystem
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: R作为一个生态系统
- en: R, as an ecosystem, is rapidly growing and expanding in all data-related areas
    beyond the IT industry. The majority of its users are not professional developers
    but data analysts and statisticians. These users may not write the best-quality
    code, but they may contribute cutting-edge tools to the ecosystem in R language,
    and everyone else has free access to these tools without having to reinvent the
    wheels.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: R作为一个生态系统，正在快速成长和扩展，涵盖了所有与数据相关的领域，而不仅仅是IT行业。其大多数用户不是专业开发者，而是数据分析师和统计学家。这些用户可能不会编写最佳质量的代码，但他们可能会用R语言为生态系统贡献前沿的工具，而其他人可以免费访问这些工具，无需重新发明轮子。
- en: For example, let's say an econometrician writes an extension package that includes
    a new method to detect a category of time series patterns; it may attract several
    users who find it interesting and useful. Some professional users may improve
    the original code to make it faster and more general-purpose. A while later, a
    quantitative investor may find it helpful to incorporate this method into a trading
    strategy because it can detect patterns that usually causes risks in his/her portfolio.
    At the end of the day, the econometrician's tool is applied in a real-world industry,
    and the investor finds the portfolio less risky.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设一个计量经济学家编写了一个扩展包，其中包含了一种检测时间序列模式类别的新方法；它可能会吸引一些觉得它有趣和有用的用户。一些专业用户可能会改进原始代码，使其运行更快、更通用。过了一段时间，一个量化投资者可能会发现将这种方法纳入交易策略很有帮助，因为它可以检测通常会导致其投资组合风险的模式。最终，计量经济学家的工具被应用于现实世界的行业，而投资者发现其投资组合的风险降低了。
- en: 'That is how the ecosystem works. And that is one of the reasons why R rocks
    in these areas: it has the ability to quickly adapt cutting-edge knowledge outside
    the IT industry (usually data science, Academia, and Industry) to generally available
    and applicable tools in the ecosystem. In other words, it facilitates conversion
    from the field knowledge and data science to productivity and value.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是生态系统的运作方式。这也是为什么R在这些领域如此受欢迎的原因之一：它能够快速将IT行业（通常是数据科学、学术界和工业）外的尖端知识转化为生态系统中普遍可用和适用的工具。换句话说，它促进了从领域知识和数据科学到生产力和价值的转换。
- en: The need for R
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 对R的需求
- en: 'R stands out from a wide variety of statistical software for the following
    reasons:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: R 在众多统计软件中脱颖而出，原因如下：
- en: '**Free of charge**: R is totally free. You don''t need to buy a license, so
    there is no financial entry barrier to use it and most of its extension packages.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**免费**：R 完全免费。您不需要购买许可证，因此使用它以及其大多数扩展包没有财务门槛。'
- en: '**Open-source**: R and most of its packages are fully open source. Thousands
    of developers are constantly reviewing the source code of the packages to check
    whether there are bugs to fix or things to improve. If you encounter exceptions,
    you can even dig into the source code, find where the problem is, and contribute
    to fixing it.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**开源**：R 语言及其大多数包都是完全开源的。成千上万的开发者持续审查这些包的源代码，以检查是否有需要修复的错误或需要改进的地方。如果您遇到异常，甚至可以深入源代码，找到问题所在，并贡献于修复它。'
- en: '**Popular**: R is a very popular, if not the most popular, statistical programming
    language and platform to perform data mining, analysis, and visualization. High
    popularity often means easier communication between you and other users because
    you "speak" the same language.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**流行**：R 语言是非常流行，如果不是最受欢迎的，用于数据挖掘、分析和可视化的统计编程语言和平台。高流行度通常意味着您与其他用户之间的沟通更加容易，因为您“说”的是同一种语言。'
- en: '**Flexible**: R is a dynamic script language. It is highly flexible to allow
    programming styles in multiple paradigms, including functionality programming
    and object-oriented programming. It also supports flexible metaprogramming. Its
    flexibility enables you to perform highly customized and comprehensive data transformation
    and visualization.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**灵活**：R 是一种动态脚本语言。它高度灵活，允许使用多种范式进行编程，包括函数式编程和面向对象编程。它还支持灵活的元编程。其灵活性使您能够执行高度定制和全面的数据转换和可视化。'
- en: '**Reproducible**: When using software based on a graphical user interface,
    you only need to choose from menus and click buttons. However, it is hard to accurately
    reproduce what you have done automatically without writing scripts.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可重复性**：当使用基于图形用户界面的软件时，您只需从菜单中选择并点击按钮即可。然而，如果不编写脚本，很难自动准确地重现您所做的工作。'
- en: In most scientific research areas and many industrial applications, reproducibility
    is necessary for many reasons. R scripts can precisely describe what you do with
    the computing environment and data so that it is fully reproducible from scratch.
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在大多数科学研究和许多工业应用中，可重复性因多种原因而成为必要。R 脚本可以精确描述您在计算环境和数据上所做的工作，从而可以从头开始完全重复。
- en: '**Rich resources**: R has a huge, rapidly increasing number of online resources.
    One type of resource is extension packages. There are, at the time of writing
    this, more than 7,500 packages available at **CRAN** (short for **Comprehensive
    R Archive Network**), a world-wide network of mirror servers from which you can
    get identical, up-to-date, R distributions and packages.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**丰富的资源**：R 语言拥有大量且不断增长的在线资源。其中一种资源是扩展包。截至撰写本文时，**CRAN**（即**综合R档案网络**）上已有超过7,500个包可供使用，这是一个全球镜像服务器网络，您可以从这里获取相同且最新的R分布和包。'
- en: These packages are created and maintained by more than 4,500 package developers
    in almost all data-related areas, such as multivariate analysis, time series analysis,
    econometrics, Bayesian inference, optimization, finance, genetics, chemometrics,
    computational physics, and many others. Take a look at CRAN Task View ([https://cran.r-project.org/web/views/](https://cran.r-project.org/web/views/))
    for a good summary.
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这些包是由近4,500名包开发者创建和维护的，几乎涵盖了所有与数据相关的领域，例如多元分析、时间序列分析、计量经济学、贝叶斯推断、优化、金融、遗传学、化学计量学、计算物理学等。您可以查看CRAN任务视图（[https://cran.r-project.org/web/views/](https://cran.r-project.org/web/views/））以获得良好的总结。
- en: In addition to the enormous number of packages, there are also a great number
    of authors who regularly write personal blogs and Stack Overflow answers and share
    their thoughts, experiences, and recommended practices. Plus, there are a lot
    of websites specializing in R, such as R-bloggers ([http://www.r-bloggers.com/](http://www.r-bloggers.com/)),
    R documentation ([http://www.rdocumentation.org/](http://www.rdocumentation.org/)),
    and METACRAN ([http://www.r-pkg.org/](http://www.r-pkg.org/)).
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 除了大量的包之外，还有许多作者定期撰写个人博客和Stack Overflow回答，分享他们的想法、经验和推荐的最佳实践。此外，还有很多专注于R的网站，例如R博客园([http://www.r-bloggers.com/](http://www.r-bloggers.com/))、R文档([http://www.rdocumentation.org/](http://www.rdocumentation.org/))和METACRAN([http://www.r-pkg.org/](http://www.r-pkg.org/))。
- en: '**Strong community**: The community of R consists of not only R developers
    but also, (the majority), R users from a wide range of backgrounds such as statistics,
    econometrics, finance, bioinformatics, mechanical engineering, physics, medicine,
    and so on.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**强大的社区**：R社区不仅包括R的开发者，还包括来自统计学、计量经济学、金融、生物信息学、机械工程、物理学、医学等众多背景的R用户（大多数）。'
- en: A great number of R developers actively contribute to open source projects or
    packages written in R. The goal of the community is to make data analysis, exploration,
    and visualization easier and more interesting.
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 许多R开发者积极为开源项目或用R编写的包做出贡献。社区的目标是使数据分析、探索和可视化变得更加容易和有趣。
- en: If you are stuck in a problem in R, just google what puzzles you; probably,
    there are already some answers to your question. If not, just ask a question on
    Stack Overflow and you will get a response in a very short time.
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你遇到R中的问题，只需谷歌一下让你困惑的问题；可能，已经有了一些关于你问题的答案。如果没有，只需在Stack Overflow上提问，你将在很短的时间内得到回复。
- en: '**Cutting-edge:** Many R users are professional researchers in statistics,
    econometrics, or other disciplines. Quite often, authors publish their new papers
    along with a new package that includes the cutting-edge techniques presented in
    the paper. Maybe it''s a new statistical test, a pattern recognition method, or
    a better-tuned optimization algorithm.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**前沿技术**：许多R用户是统计学、计量经济学或其他学科的专业研究人员。他们经常在发布新包的同时发表新论文，这些包中包含了论文中展示的前沿技术。这可能是一个新的统计测试、一种模式识别方法，或者是一个更好的优化算法。'
- en: No matter what it is, the R community has the privilege of applying cutting-edge
    data science knowledge in the real world  often ahead of everyone else, improving
    its functionality and revealing its potential.
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 无论是什么，R社区都有特权在其他人之前将前沿的数据科学知识应用于现实世界，从而提高其功能并揭示其潜力。
- en: Installing R
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装R
- en: To install R, you need to visit R's official website ([https://www.r-project.org/](https://www.r-project.org/)),
    download R ([https://cran.r-project.org/mirrors.html](https://cran.r-project.org/mirrors.html)),
    choose a nearby mirror, and download a version for your operating system. At the
    time of writing, the latest version is 3.2.3\. The examples in this book are created
    and run under this version in Windows and Linux, but there should not be significant
    differences between the output in previous versions or other supported operating
    systems.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装R，你需要访问R的官方网站([https://www.r-project.org/](https://www.r-project.org/))，下载R([https://cran.r-project.org/mirrors.html](https://cran.r-project.org/mirrors.html))，选择一个附近的镜像，并下载适合你操作系统的版本。在撰写本文时，最新版本是3.2.3。本书中的示例是在Windows和Linux下创建和运行的，但与先前版本或其他支持的操作系统中的输出应该没有显著差异。
- en: If you are using Windows, just download an installer for the latest version.
    To install R, run the Windows installer that you just downloaded. The installation
    process is easy to handle, but many users may still face problems with several
    steps.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用Windows，只需下载最新版本的安装程序。要安装R，运行你刚刚下载的Windows安装程序。安装过程易于处理，但许多用户可能仍会在几个步骤上遇到问题。
- en: In the Windows drop-down, when choosing the components to install, the installer
    lists four components. Here, **Core files** means the core libraries of R, and
    the **Message translations** component provides many versions of translations
    of warning and error messages in a list of supported languages. However, what
    may confuse you is the **32-bit files** and 64-bit files options. Just don't worry;
    you only need to know that 64-bit R can handle much more data in a single process
    than its 32-bit counterpart. If you are using a modern computer purchased in recent
    years, it is most likely to support 64-bit programs and should be running a 64-bit
    operating system, so the default option will be 64-bit files. If you are using
    a 32-bit operating system, unfortunately, you cannot use 64-bit R unless you install
    a 64-bit system if your hardware supports it.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 下拉菜单中，当选择要安装的组件时，安装程序列出了四个组件。在这里，**核心文件**意味着 R 的核心库，而**消息翻译**组件提供了支持语言列表中许多警告和错误消息的多个版本。然而，可能让你感到困惑的是**32
    位文件**和**64 位文件**选项。只需不用担心；你只需要知道 64 位 R 可以在单个进程中处理比其 32 位对应版本多得多的数据。如果你使用的是近年来购买的现代计算机，它很可能支持
    64 位程序，并且应该运行 64 位操作系统，所以默认选项将是 64 位文件。如果你使用的是 32 位操作系统，很遗憾，除非你的硬件支持，否则你无法使用 64
    位 R。
- en: 'Anyway, I recommend that you install the default options, as shown in the following
    screenshot:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 无论如何，我建议你安装默认选项，如下面的截图所示：
- en: '![Installing R](img/image_01_001.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![安装 R](img/image_01_001.jpg)'
- en: Another option you may feel confused about is whether to save the R version
    number in the registry. Checking these options makes it easier for other programs
    to detect which R version is installed. If you are sure you only use R in its
    own, just go ahead with the defaults.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能感到困惑的另一个选项是是否在注册表中保存 R 版本号。检查这些选项使得其他程序更容易检测已安装的 R 版本。如果你确定你只在自己的环境中使用 R，那么就继续使用默认设置。
- en: '![Installing R](img/image_01_002.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![安装 R](img/image_01_002.jpg)'
- en: Then, the installation starts copying files to your hard drive.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，安装程序开始将文件复制到你的硬盘上。
- en: '![Installing R](img/image_01_003.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![安装 R](img/image_01_003.jpg)'
- en: 'Finally, R is deployed to your computer. At the moment, you only have two ways
    to use R: In a command prompt (or terminal) or in the R GUI.'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，R 被部署到你的计算机上。目前，你只有两种方式可以使用 R：在命令提示符（或终端）中或在 R GUI 中。
- en: If you allowed the installer to create program shortcuts on your desktop, you
    will find two R shortcuts there. R runs in the Command Prompt and RGUI runs in
    an extremely simple GUI.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你允许安装程序在你的桌面上创建程序快捷方式，你将在那里找到两个 R 快捷方式。R 在命令提示符中运行，而 RGUI 在一个非常简单的 GUI 中运行。
- en: Although you can start to use R right now, it does not mean you have to use
    it in this way. I strongly recommend RStudio for editing and debugging R scripts.
    Actually, this book is also written in R Markdown in RStudio. Although RStudio
    is powerful, it does not work without a proper installation of R. In other words,
    R is the backend and RStudio is a frontend that helps you better work with the
    backend.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你现在可以开始使用 R，但这并不意味着你必须以这种方式使用它。我强烈推荐使用 RStudio 来编辑和调试 R 脚本。实际上，这本书也是用 RStudio
    中的 R Markdown 编写的。虽然 RStudio 功能强大，但没有正确安装 R 是无法工作的。换句话说，R 是后端，而 RStudio 是一个前端，它可以帮助你更好地与后端协同工作。
- en: If you are using Windows, you may also install Rtools ([http://cran.rstudio.com/bin/windows/Rtools/](http://cran.rstudio.com/bin/windows/Rtools/))
    so that you can write C++ code, compile it, and call it in R, and you can install
    and compile packages that contain C/C++ code from their sources.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是 Windows，你也可以安装 Rtools ([http://cran.rstudio.com/bin/windows/Rtools/](http://cran.rstudio.com/bin/windows/Rtools/))，这样你就可以编写
    C++ 代码，编译它，并在 R 中调用它，你还可以从它们的源代码中安装和编译包含 C/C++ 代码的包。
- en: RStudio
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: RStudio
- en: RStudio is a powerful user interface for R programming. It's free, open source,
    and works on multiple platforms including Windows, Mac, and Linux.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: RStudio 是 R 编程的强大用户界面。它是免费的、开源的，并且可以在包括 Windows、Mac 和 Linux 在内的多个平台上运行。
- en: RStudio has very powerful features that hugely boost your productivity in data
    analysis and visualization. It supports syntax highlighting, autocompletion, multi-tabbed
    views, file management, graphics viewport, package management, integrated help
    viewer, code formatting, version control, interactive debugging, and many more
    features.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: RStudio 具有非常强大的功能，这些功能极大地提高了你在数据分析和可视化中的生产力。它支持语法高亮、自动完成、多标签视图、文件管理、图形视口、包管理、集成帮助查看器、代码格式化、版本控制、交互式调试以及许多其他功能。
- en: You can download the latest release of RStudio at [https://www.rstudio.com/products/rstudio/download](https://www.rstudio.com/products/rstudio/download).
    If you want to try the preview version with new features, download it from [https://www.rstudio.com/products/rstudio/download/preview](https://www.rstudio.com/products/rstudio/download/preview).
    Note that RStudio does not include R, so you need to make sure that you have R
    installed while working in RStudio.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在[https://www.rstudio.com/products/rstudio/download](https://www.rstudio.com/products/rstudio/download)下载最新版本的RStudio。如果您想尝试带有新功能的预览版本，请从[https://www.rstudio.com/products/rstudio/download/preview](https://www.rstudio.com/products/rstudio/download/preview)下载。请注意，RStudio不包括R，因此在RStudio中工作时，您需要确保已安装R。
- en: In followings sections, I'll give you a brief introduction to the user interface
    of RStudio.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我将为您简要介绍RStudio的用户界面。
- en: RStudio's user interface
  id: totrans-60
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: RStudio的用户界面
- en: The following screenshot shows the RStudio user interface in the Windows operating
    system. If you are using Mac OS X or a supported version of Linux, the screen
    should look almost the same.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了Windows操作系统中的RStudio用户界面。如果您使用Mac OS X或支持的Linux版本，屏幕应该看起来几乎相同。
- en: '![RStudio''s user interface](img/image_01_004.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![RStudio''s user interface](img/image_01_004.jpg)'
- en: You may notice that the main window consists of several parts. Each part is
    called a pane and performs different functions. These panes are well designed
    for data analysts to work with data.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能会注意到主窗口由几个部分组成。每个部分被称为面板，并执行不同的功能。这些面板为数据分析师处理数据而精心设计。
- en: The console
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 控制台
- en: The following screenshot shows the R console embedded in RStudio. In most cases,
    the console works exactly like a Command Prompt or terminal. In fact, when you
    type in a command at the console, RStudio will submit the request to the R engine.
    It is the R engine that executes all the commands. The role of RStudio is to stand
    in the middle, take inputs from user to the R engine, and present the results
    it returns.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了嵌入在RStudio中的R控制台。在大多数情况下，控制台的工作方式与命令提示符或终端完全相同。实际上，当您在控制台中输入命令时，RStudio会将请求提交给R引擎。执行所有命令的是R引擎。RStudio的作用是站在中间，从用户那里获取输入到R引擎，并展示它返回的结果。
- en: '![The console](img/image_01_005.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![The console](img/image_01_005.jpg)'
- en: Using the console, you can easily execute a command, define a variable, or evaluate
    an expression interactively to compute a statistical measure, transform data,
    or produce charts.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 使用控制台，您可以轻松执行命令、定义变量或交互式地评估表达式以计算统计量、转换数据或生成图表。
- en: The editor
  id: totrans-68
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 编辑器
- en: Typing in commands at the console is not the usual way we work with data. Instead,
    we write scripts, a set of commands representing a logic flow that can be read
    from a file and executed by the R engine. The editor is useful for editing R scripts,
    markdown documents, web pages, many types of configuration files, and even C++
    source code.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在控制台中输入命令不是我们通常处理数据的方式。相反，我们编写脚本，一组代表逻辑流程的命令，可以从文件中读取并由R引擎执行。编辑器用于编辑R脚本、Markdown文档、网页、许多类型的配置文件，甚至C++源代码。
- en: '![The editor](img/image_01_006.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![The editor](img/image_01_006.jpg)'
- en: 'The functionality of the code editor is much more than a plain text editor:
    it supports syntax highlighting, autocompletion of R code, debugging with breakpoints,
    and so on. More specifically, when editing R scripts you can use the following
    shortcut keys:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 代码编辑器的功能远不止是一个纯文本编辑器：它支持语法高亮、R代码的自动完成、带有断点的调试等。更具体地说，当编辑R脚本时，您可以使用以下快捷键：
- en: Press *Ctrl + Enter* to execute the selected lines
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按*Ctrl + Enter*以执行所选行
- en: Press *Ctrl + Shift + S* to source the current document, that is, to evaluate
    all the expressions sequentially in the current document
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按*Ctrl + Shift + S*以源当前文档，即按顺序评估当前文档中的所有表达式
- en: Press *Tab or Ctrl + Space* to show an autocompletion list of variables and
    functions that match your current typing
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按*Tab键或Ctrl + Space*以显示与您当前输入匹配的变量和函数的自动完成列表
- en: Click on the left margin of a line number and set a breakpoint; now, the next
    time this line is executed, the program will pause and wait for you to check
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点击行号左侧的边缘设置断点；现在，当此行再次执行时，程序将暂停并等待您进行检查
- en: The Environment pane
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 环境面板
- en: The **Environment** pane shows the variables and functions that you have created
    and are available for repeated use. By default, it shows the variables in the
    global environment, that is, the user workspace in which you are working.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '**环境**面板显示了您创建并可供重复使用的变量和函数。默认情况下，它显示全局环境中的变量，即您在其中工作的用户工作区。'
- en: '![The Environment pane](img/image_01_007.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![The Environment pane](img/image_01_007.jpg)'
- en: Each time you create a new object (a variable or function), a new entry will
    appear in the **Environment** pane. The entry shows the variable name and a short
    description of its value. When you change the value of a symbol or even remove
    that symbol, you actually modify the environment so that the environment pane
    reflects your change.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 每次您创建一个新的对象（变量或函数），**环境**面板中都会出现一个新的条目。该条目显示了变量名及其值的简短描述。当您更改符号的值或甚至删除该符号时，您实际上是在修改环境，以便环境面板反映您的更改。
- en: The History pane
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 历史面板
- en: The **History** pane shows the previous expressions evaluated in the console.
    You can repeat the task performed previously by simply pressing up in the console.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '**历史**面板显示了在控制台中评估过的先前表达式。您可以通过在控制台中向上键来重复之前执行的任务。'
- en: '![The History pane](img/image_01_008.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![The History pane](img/image_01_008.jpg)'
- en: The history may be stored in the `.Rhistory` file in the working directory.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 历史记录可能存储在工作目录中的`.Rhistory`文件中。
- en: The File pane
  id: totrans-84
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文件面板
- en: The File pane shows the files in the folder. You can navigate between folders,
    create new folders, delete or rename folders or files, and so on.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 文件面板显示了文件夹中的文件。您可以在文件夹之间导航，创建新文件夹，删除或重命名文件夹或文件，等等。
- en: '![The File pane](img/image_01_009.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![The File pane](img/image_01_009.jpg)'
- en: If you are working on an RStudio project, the **File** pane is handy for viewing
    and organizing project files.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在处理RStudio项目，**文件**面板对于查看和组织项目文件非常方便。
- en: The Plots pane
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 绘图面板
- en: The **Plots** pane is used to show graphics produced by R code. If you produce
    more than one plot, the previous ones are stored and you can navigate back and
    forth to view all plots (until you clear them).
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '**绘图**面板用于显示由R代码生成的图形。如果您生成多个绘图，之前的绘图将被存储，您可以导航来回查看所有绘图（直到您清除它们）。'
- en: '![The Plots pane](img/image_01_010.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![The Plots pane](img/image_01_010.jpg)'
- en: When you resize the plot pane, graphics will adapt to its size so that they
    look as nice as they did before resizing. You can also export a plot to a file
    for future use.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 当您调整绘图面板的大小时，图形将适应其大小，以便它们看起来与调整大小之前一样好。您还可以将绘图导出为文件以供将来使用。
- en: The Packages pane
  id: totrans-92
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 包面板
- en: Much of R's power derives from its packages. The **Packages** pane shows all
    installed packages. You can also easily install or update packages from CRAN or
    remove an existing package from your library.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: R的许多功能都源于其包。**包**面板显示了所有已安装的包。您还可以轻松地从CRAN安装或更新包，或从您的库中删除现有的包。
- en: '![The Packages pane](img/image_01_011.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![The Packages pane](img/image_01_011.jpg)'
- en: The Help pane
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 帮助面板
- en: A lot of R's power also derives from its detailed documentation. The **Help**
    pane shows the documentation so that you can easily learn how to use functions.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: R的许多功能也源于其详细的文档。**帮助**面板显示了文档，以便您可以轻松学习如何使用函数。
- en: '![The Help pane](img/image_01_012.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![The Help pane](img/image_01_012.jpg)'
- en: 'There are numerous ways to View a function''s documentation:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多方式可以查看函数的文档：
- en: Type the function name in the Search box and find it directly
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在搜索框中输入函数名并直接查找
- en: Type the function name in the console and press *F1*
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在控制台中输入函数名并按*F1*
- en: Type `?` before the function name and execute it
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在函数名前输入`?`并执行它
- en: In practice, you don't have to remember all of R's functions; you only need
    to remember how to get help with a function you are not familiar with.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在实践中，您不必记住R的所有函数；您只需要记住如何获取不熟悉的函数的帮助。
- en: The Viewer pane
  id: totrans-103
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 查看器面板
- en: The **Viewer** pane is a new feature; it was introduced as an increasing number
    of R packages combine the functionality of both R and existing JavaScript libraries
    to make rich and interactive presentations of data.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '**查看器**面板是一个新功能；它是在越来越多的R包结合R和现有的JavaScript库的功能以制作丰富和交互式数据展示时引入的。'
- en: 'The following screenshot is an example of my formattable ([http://renkun.me/formattable](http://renkun.me/formattable))
    package that provides a simple implementation of conditional formatting in Excel
    with data frames in R:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图是我可格式化的([http://renkun.me/formattable](http://renkun.me/formattable))包的示例，该包提供了在Excel中使用R数据框进行条件格式化的一种简单实现：
- en: '![The Viewer pane](img/image_01_013.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![The Viewer pane](img/image_01_013.jpg)'
- en: RStudio Server
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: RStudio Server
- en: If you are using a supported version of Linux, you can easily set up a server
    version of RStudio, or RStudio Server. It runs on a host server (probably much
    more powerful and stable than your laptop) and you can run an R session in RStudio
    in your web browser. The user interface is mostly the same but you have access
    to the computing and memory resources of the server, as if you were using a local
    computer.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是支持的Linux版本，你可以轻松地设置RStudio的服务器版本或RStudio Server。它运行在主机服务器上（可能比你的笔记本电脑更强大和稳定），你可以在你的网络浏览器中运行RStudio的R会话。用户界面大致相同，但你可以使用服务器的计算和内存资源，就像你使用本地计算机一样。
- en: A quick example
  id: totrans-109
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 快速示例
- en: In this section, I will demonstrate a simple example of computing, model fitting,
    and producing graphics by typing in commands in the console.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我将通过在控制台中输入命令来演示计算、模型拟合和生成图形的简单示例。
- en: 'First, let''s create vector `x` of `100` normally distributed random numbers.
    Then, create another vector `y` of `100` numbers, each of which is 3 times the
    corresponding element in `x` plus `2` and some random noise. Note that `<-` is
    the assignment operator, which we will cover later. I use `str()` to print the
    structure of the vectors:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们创建一个包含`100`个正态分布随机数的向量`x`。然后，创建另一个包含`100`个数字的向量`y`，每个数字是`x`中相应元素的3倍加上`2`和一些随机噪声。注意，`<-`是赋值运算符，我们将在后面介绍。我使用`str()`来打印向量的结构：
- en: '[PRE0]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Since we know that the true relationship between *X* and *Y* is ![A quick example](img/Capture.jpg),
    we can run a simple linear regression on the sample *X* and *Y* and see how the
    linear model recovers the linear parameters (that is, *2* and *3*) of the model.
    We call *lm(y ~ x)* to fit such a model:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们知道*X*和*Y*之间的真实关系是![快速示例](img/Capture.jpg)，因此我们可以在样本*X*和*Y*上运行简单的线性回归，看看线性模型如何恢复模型的线性参数（即*2*和*3*）。我们通过调用`lm(y
    ~ x)`来拟合这样的模型：
- en: '[PRE1]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The result of the model fitting is stored in an object named `model1`. We can
    view the model fit by simply typing `model1` or explicitly typing `print(model1)`:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 模型拟合的结果存储在一个名为`model1`的对象中。我们可以通过简单地输入`model1`或明确输入`print(model1)`来查看模型拟合：
- en: '[PRE2]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'If you want to see more details, call `summary()` with `model1`:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想查看更多细节，请使用`model1`调用`summary()`：
- en: '[PRE3]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'We can plot the points and the fitted model together:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将点和拟合的模型一起绘制：
- en: '[PRE4]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '![A quick example](img/image_01_018.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![快速示例](img/image_01_018.jpg)'
- en: 'The preceding screenshot demonstrates some simple functions so that you can
    get a first impression of working with R. If you are not familiar with the symbols
    and functions in the example, don''t worry: the next few chapters will cover the
    basic objects and functions you need to know.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 上述截图演示了一些简单函数，以便你能够对使用R有一个初步的了解。如果你不熟悉示例中的符号和函数，不要担心：接下来的几章将涵盖你需要了解的基本对象和函数。
- en: Summary
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned some basic facts about R and its major strengths.
    We learned how to install R in a Windows operating system. To make R programming
    easier, we chose to use RStudio and went through the user interface of RStudio,
    and you learned that the functionality of each pane is its main window. Finally,
    we ran several R commands to fit a model and to plot simple graphics, getting
    an initial impression of the way we work with R.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你了解了一些关于R及其主要优势的基本事实。我们学习了如何在Windows操作系统上安装R。为了使R编程更简单，我们选择使用RStudio，并了解了RStudio的用户界面，你了解到每个窗格的功能是其主窗口。最后，我们运行了几个R命令来拟合模型和绘制简单的图形，从而对使用R的方式有一个初步的了解。
- en: In the next chapter, we will go through the basic concepts and data structures
    in R to help you get familiar with the behavior of basic R objects. Only then
    can you easily represent, manipulate, and work with a wide variety of data.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将介绍R中的基本概念和数据结构，以帮助你熟悉基本R对象的行为。只有在你熟悉了这些之后，你才能轻松地表示、操作和处理各种数据。
