<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Introduction to Python for ArcGIS"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Introduction to Python for ArcGIS</h1></div></div></div><p>In this chapter, we will discuss the development of Python as a programming language, from its beginning in the late 1980s to its current state. We will discuss the philosophy of design that spurred its development, and touch on important modules that will be used throughout the book, especially focusing on the modules built into the Python standard library. This overview of the language and its features will help explain what makes Python a great language for ArcGIS automation.</p><p>This chapter will cover:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A quick overview of Python: What it is and does, who created it, and where it is now</li><li class="listitem" style="list-style-type: disc">The ArcPy module and other important modules</li><li class="listitem" style="list-style-type: disc">Python as a general purpose programming language</li></ul></div><div class="section" title="Overview of Python"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec08"/>Overview of Python</h1></div></div></div><p>
<span class="strong"><strong>Python</strong></span>, created <a id="id0" class="indexterm"/>by <span class="emphasis"><em>Guido van Rossum</em></span> in 1989, was named after his favorite comedy troupe<span class="emphasis"><em>, </em></span>Monty Python. His work group at the time had a tradition of naming programs after TV shows, and he wanted something irreverent and different from its predecessors - ABC, Pascal, Ada, Eiffel, FORTRAN, and others. So he settled on Python, feeling it was a bit edgy and catchy as well. It's certainly more fun to say than C, the language on which Python is based.</p><p>Today, Python is a major programming language. It is used in web development, database administration, and even to program robots. Most importantly to GIS Analysts, Python can be used to control ArcGIS tools and Map Documents to produce geospatial data and maps in an organized and speedy manner using the excellent <a id="id1" class="indexterm"/>
<span class="strong"><strong>ArcPy</strong></span> module.</p><p>ArcPy is installed with ArcGIS for desktop and ArcGIS for server. ArcPy has been the official ArcGIS scripting language since ArcGIS 10.0 and has steadily improved in functionality <a id="id2" class="indexterm"/>and implementation. This book will target ArcGIS for Desktop 10.1 and later, and will demonstrate how to make use of Python and its powerful programming libraries (or modules) when crafting complex geospatial analyses.</p></div></div>
<div class="section" title="Python as a programming language"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec09"/>Python as a programming language</h1></div></div></div><p>Over the past 40 years, programming languages<a id="id3" class="indexterm"/> have developed from assembly and machine code towards high-level abstracted languages that are much closer to English. The Python programming language was designed to overcome many issues that programmers were complaining about in the 1980s: slow development time, overly complicated syntax, and horrible readability. <span class="emphasis"><em>Van Rossum</em></span> wanted to develop a language that could enable rapid code development and testing, have simple or at least readable) syntax, and produce results with fewer lines of code, in less time. The first version of Python (0.9.0) was released in 1991 and was freely obtainable from the start; Python was open source before the term open source was invented.</p><div class="section" title="Interpreted language"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec08"/>Interpreted language</h2></div></div></div><p>Python is an interpreted<a id="id4" class="indexterm"/> language. It is written in C, a compiled language, and the code is interpreted from Python into C before it is executed. Practically, this means that the code is executed as soon as it is converted and compiled. While code interpretation can have speed implications for the execution of Python-based programs, the faster development time allowed by Python makes this drawback easy to ignore. Testing of code snippets is much faster in an interpretive environment, and it is perfect to create scripts to automate basic, repeatable computing tasks. Python scripts have the <code class="literal">.py</code> extentions. Once the code has been interpreted, a second Python script (with the <code class="literal">.pyc</code> extentions) is generated to save the compiled code. The <code class="literal">.pyc</code> script will be automatically recompiled when changes are made in the original <code class="literal">.py</code> script.</p></div><div class="section" title="Standard (built-in) library"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec09"/>Standard (built-in) library</h2></div></div></div><p>Python, when installed, has <a id="id5" class="indexterm"/>a basic set of functionality that is referred to as the standard library. These tools allow Python to perform string manipulations, math computations, and HTTP calls and URL parsing, along with many other functions. Some of the tool libraries, known to Python programmers as modules, are built-in and available as soon as Python is started, while others must be explicitly called using the <code class="literal">import </code>keyword to make their functions and classes available. Other modules have been developed by third parties and can be downloaded and installed onto the Python installation as needed.</p><p>Many new programmers wonder if Python is a real programming language, which is a loaded question. The answer is yes; Python can be used to create complete programs, build <a id="id6" class="indexterm"/>websites, run computer networks, and much more. The built-in modules and add-on modules make Python very powerful, and it can be (and has been) used for nearly any part of a computer—operating systems, databases, web servers, desktop applications, and so on. It is not always the best choice for the development of these tools, but that has not stopped programmers from trying and even succeeding.</p></div><div class="section" title="The glue language"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>The glue language</h2></div></div></div><p>Python is at its best when it is used as a<a id="id7" class="indexterm"/> glue language. This term describes the use of Python to control other programs, sending inputs to them and collecting outputs, which are then sent to another program or written to disk. An ArcGIS example would be to use Python to download zipped shapefiles from a website, unzipping the files, processing the files using ArcToolbox, and compiling the results into an Excel spreadsheet. All of this is accomplished using freely available modules that are either included in Python's standard library, or added when ArcGIS is installed.</p></div><div class="section" title="Wrapper modules"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>Wrapper modules</h2></div></div></div><p>The ArcPy module is a <a id="id8" class="indexterm"/>wrapper module. Wrapper modules are common in Python, and are so named because they wrap Python onto the tools we will need. They allow us to use Python to interface with other programs written in C or other programming languages, using the <span class="strong"><strong>Application Programming Interface</strong></span> (<span class="strong"><strong>API</strong></span>)<a id="id9" class="indexterm"/> of those programs. For example, wrappers make it possible to extract data from an Excel spreadsheet and transform or load the data into another program, such as ArcGIS. Not all modules are wrappers; some modules are written in pure Python and perform their analysis and computations using the Python syntax. Either way, the end result is that a computer and its programs are available to be manipulated and controlled using Python.</p><p>The <span class="emphasis"><em>Zen of Python</em></span> was created to be straightforward, readable, and simplified, compared to other languages that existed previously. This governing philosophy was organized into a poem by <span class="emphasis"><em>Tim Peters</em></span>, an early Python developer called the <span class="emphasis"><em>Zen of Python</em></span>; it is an Easter egg (a hidden feature) included in every Python installation and is shown when <code class="literal">import this</code> is typed in the Python interpreter:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>The Zen of Python, by Tim Peters:</strong></span>
<span class="strong"><strong>Beautiful is better than ugly.</strong></span>
<span class="strong"><strong>Explicit is better than implicit.</strong></span>
<span class="strong"><strong>Simple is better than complex.</strong></span>
<span class="strong"><strong>Complex is better than complicated.</strong></span>
<span class="strong"><strong>Flat is better than nested.</strong></span>
<span class="strong"><strong>Sparse is better than dense.</strong></span>
<span class="strong"><strong>Readability counts.</strong></span>
<span class="strong"><strong>Special cases aren't special enough to break the rules.</strong></span>
<span class="strong"><strong>Although practicality beats purity.</strong></span>
<span class="strong"><strong>Errors should never pass silently.</strong></span>
<span class="strong"><strong>Unless explicitly silenced.</strong></span>
<span class="strong"><strong>In the face of ambiguity, refuse the temptation to guess.</strong></span>
<span class="strong"><strong>There should be one-- and preferably only one --obvious way to do</strong></span>
<span class="strong"><strong>Although that way may not be obvious at first unless you're Dutch.</strong></span>
<span class="strong"><strong>Now is better than never.</strong></span>
<span class="strong"><strong>Although never is often better than *right* now.</strong></span>
<span class="strong"><strong>If the implementation is hard to explain, it's a bad idea.</strong></span>
<span class="strong"><strong>If the implementation is easy to explain, it may be a good idea.</strong></span>
<span class="strong"><strong>Namespaces are one honking great idea -- let's do more of those!</strong></span>
</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note02"/>Note</h3><p>Go to <a class="ulink" href="https://www.python.org/doc/humor/">https://www.python.org/doc/humor/</a> for more information.</p></div></div></div><div class="section" title="The basics of Python"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>The basics of Python</h2></div></div></div><p>Python has a number <a id="id10" class="indexterm"/>of language requirements and conventions that allow for the control of modules and structuring of code. The following are a number of important basic concepts, which will be used throughout this book and when crafting scripts for use with geospatial analyses.</p><div class="section" title="Import statements"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec01"/>Import statements</h3></div></div></div><p>Import statements are used to<a id="id11" class="indexterm"/> augment the power <a id="id12" class="indexterm"/>of Python by calling other modules for use in the script. These modules can be part of the standard Python library of modules, such as the math module (used to do higher mathematical calculations) or, importantly, ArcPy, which will allow us to interact with ArcGIS.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note100"/>Note</h3><p>
<code class="literal">Import</code> statements can be located anywhere before the module is used, but by convention, they are located at the top of a script.</p></div></div><p>There are three ways to create an <code class="literal">import</code> statement. The first, and most standard, is to import the whole module as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>import arcpy</strong></span>
</pre></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Using this method, we can even import more than one module on the same line. The following imports three modules: <code class="literal">arcpy</code>, <code class="literal">os</code> (the operating system module), and <code class="literal">sys</code> (the Python system module):<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>import arcpy, os, sys</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">The <a id="id13" class="indexterm"/>next method of importing a script is<a id="id14" class="indexterm"/> to import a specific portion of a module, instead of importing the entire module, using the <code class="literal">from &lt;module&gt; import &lt;submodule&gt;</code> syntax:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>from arcpy import mapping</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">This method is used when only a portion of the code from ArcPy will be needed; it has the practical effect of limiting the amount of memory used by the module when it is called. We can also import multiple portions of the module in the same fashion:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>from arcpy import mapping, da</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc">The third way to import a module is the <code class="literal">from &lt;module&gt; import &lt;submodule&gt;</code> syntax, but by using an asterisk to import all parts of the module:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>from arcpy import *</strong></span>
</pre></div></li></ul></div><p>This last method is still used but it is discouraged as it can have unforeseen consequences. For instance, the names of the variables in the module might conflict with another variable in another module if they are not explicitly imported. For this reason, it is best to avoid this third method. However, lots of existing scripts include import statements of this type so be aware of these consequences.</p></div><div class="section" title="Variables"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec02"/>Variables</h3></div></div></div><p>Variables are a part of <a id="id15" class="indexterm"/>all programming languages. They are used to reference data and store it in memory for use later in a script. There are a lot of arguments over the best method to name variables. No standard has been developed for Python <a id="id16" class="indexterm"/>scripting for ArcGIS. The following are some best practices to use when naming variables.</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Make them descriptive</strong></span>: Don't just name a variable <span class="emphasis"><em>x</em></span>; that variable will be useless later when the script is reviewed and there is no way to know what it is used for, or why. They should be longer rather than shorter, and should hint at the data they reference or even the data type of the object they reference:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>shapefilePath = 'C:/Data/shapefile.shp'</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Use camel case to make the variable readable</strong></span>: Camel case is a term used for <a id="id17" class="indexterm"/>variables that start with a lower case letter but have upper case letters in the middle, resembling a camel's hump:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>camelCase = 'this is a string'</strong></span>
</pre></div></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Include the data type in the variable name</strong></span>: If the variable contains a string, call it variableString. This is not required, and will not be used dogmatically in this book, but it can help organize the script and is helpful for others who will read these scripts. Python is <span class="emphasis"><em>dynamically</em></span> typed instead of <span class="emphasis"><em>statically</em></span>. A programming language distinction means that a variable does not have to be declared before it can be used, unlike Visual Basic or other statically typed languages. This improves the speed of writing a script, but it can be problematic in long scripts as the data type of a variable will not be obvious.</li></ul></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note03"/>Note</h3><p>The ArcGIS does not use camel case when it exports Python scripts, and many examples will not include it; nevertheless, it is recommended when writing new scripts. Also, variables cannot start with a number.</p></div></div></div><div class="section" title="For loops"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec03"/>For loops</h3></div></div></div><p>Built into programming <a id="id18" class="indexterm"/>languages is the ability to iterate, or perform a repeating process, over a dataset to transform or extract data that meets specific criteria. Python's main iteration tool is known as a <code class="literal">for</code> loop. The term <code class="literal">for</code> loop means<a id="id19" class="indexterm"/> that an operation will loop, or <a id="id20" class="indexterm"/>iterate, over the items in a dataset to perform the operation on each item. The dataset must be iterable to be used in a <code class="literal">for</code> loop, a distinction discussed further ahead.</p><p>We will be using for loops throughout this book. Here is a simple example that uses the Python Interpreter to take string values and print them in an uppercase format, using a for loop:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; newlist = [ 'a' , 'b' , 'c' , 'd' ]</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; for item in newlist:</strong></span>
<span class="strong"><strong>  print item.upper()</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>A</strong></span>
<span class="strong"><strong>B</strong></span>
<span class="strong"><strong>C</strong></span>
<span class="strong"><strong>D</strong></span>
</pre></div><p>The variable item is a generic variable assigned to each object as it is entered into the for loop, and <a id="id21" class="indexterm"/>not a term required by Python. It could have been x or <a id="id22" class="indexterm"/>value instead. Within the loop, the first object (<code class="literal">a</code>) is assigned to the generic variable item and has the upper string function applied to it to produce the output <code class="literal">A</code>. Once this action has been performed, the next object (<code class="literal">b</code>) is assigned to the generic variable to produce an output. This loop is repeated for all members of the dataset newlist; once completed, the variable item will still carry the value of the last member of the dataset (<code class="literal">d</code> in this case).</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip02"/>Tip</h3><p>
<span class="strong"><strong>Downloading the example code</strong></span>
</p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div></div></div><div class="section" title="If/Elif/Else statements"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec04"/>If/Elif/Else statements</h3></div></div></div><p>Conditional<a id="id23" class="indexterm"/> statements, called if/else statements in Python, are <a id="id24" class="indexterm"/>also standard in programming languages. They are used when evaluating data; when certain conditions are met, one action will be taken (the initial if statement; if another condition is met, another action is taken; this is an <code class="literal">elif </code>statement), and if the data does not meet the condition, a final action is assigned to deal with those cases (the else statement). These are similar to a where conditional in a SQL statement used with the Select tool in ArcToolbox. Here is an example of how to use an if/else statement to evaluate data in a list (a data type discussed further ahead) and find the remainder when divided using the modulus operator (<code class="literal">%</code>) and Python's is equal to operator (==):</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; data = [1,2,4,5,6,7,10]</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; for val in data:</strong></span>
<span class="strong"><strong>    if val % 2 == 0:</strong></span>
<span class="strong"><strong>    print val,"no remainder"</strong></span>
<span class="strong"><strong>    elif val % 3 == 2:</strong></span>
<span class="strong"><strong>    print val, "remainder of two"</strong></span>
<span class="strong"><strong>    else:</strong></span>
<span class="strong"><strong>      </strong></span>
<span class="strong"><strong>print "final case"</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>final case</strong></span>
<span class="strong"><strong>2 no remainder</strong></span>
<span class="strong"><strong>4 no remainder</strong></span>
<span class="strong"><strong>5 remainder of two</strong></span>
<span class="strong"><strong>6 no remainder</strong></span>
<span class="strong"><strong>final case</strong></span>
<span class="strong"><strong>10 no remainder</strong></span>
</pre></div></div><div class="section" title="While statements"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec05"/>While statements</h3></div></div></div><p>Another important evaluation tool <a id="id25" class="indexterm"/>is the <code class="literal">while</code> statement. It is<a id="id26" class="indexterm"/> used to perform an action while a condition is true; when the condition is false, the evaluation will stop. Note that the condition must become false, or the action will be always performed, creating an infinite loop that will not stop until the Python interpreter is shut off externally. Here is an example of using a while loop to perform an action until a true condition becomes false:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; x = 0</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; while x &lt; 5:</strong></span>
<span class="strong"><strong>    print x</strong></span>
<span class="strong"><strong>    </strong></span>
<span class="strong"><strong>x+=1</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>0</strong></span>
<span class="strong"><strong>1</strong></span>
<span class="strong"><strong>2</strong></span>
<span class="strong"><strong>3</strong></span>
<span class="strong"><strong>4</strong></span>
</pre></div></div><div class="section" title="Comments"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec06"/>Comments</h3></div></div></div><p>Comments in Python<a id="id27" class="indexterm"/> are used to add notes within a script. They are marked by a<a id="id28" class="indexterm"/> pound sign, and are ignored by the Python interpreter when the script is run. Comments are useful to explain what a code block does when it is executed, or to add helpful notes that script authors would like future script users to read:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># This is a comment</strong></span>
</pre></div><p>While it is a programming truism that good code is well-commented code, many programmers skip this valuable step. Also, too many comments can reduce their usefulness and the script's readability. If variables are descriptive enough, and code is well-organized, comments are less necessary; writing the code as verbose and as well-organized as possible will require less time to be spent on comments.</p></div></div><div class="section" title="Data types"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>Data types</h2></div></div></div><p>
<span class="strong"><strong>GIS</strong></span> uses points, lines, polygons, coverages, and rasters to<a id="id29" class="indexterm"/> store data. Each of these GIS data types can be used in different ways when performing an analysis<a id="id30" class="indexterm"/> and have different attributes and traits. Python, similar to GIS, has data types that organize data. The main data types in Python are strings, integers, floats, lists, tuples, and dictionaries. They each have their own attributes and traits (or properties), and are used for specific parts of code automation. There are also built-in functions that allow for data types to be converted (or casted) from one type to another; for instance, the integer 1 can be converted to the string 1 using the <code class="literal">str() </code>function:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; variable = 1</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; newvar = str(variable)</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; newvar</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>1</strong></span>
</pre></div><div class="section" title="Strings"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec07"/>Strings</h3></div></div></div><p>Strings are <a id="id31" class="indexterm"/>used to <a id="id32" class="indexterm"/>contain any kind of character. They begin and end with quotation marks, with either single or double quotes used, though the string must begin and end with the same type of quotation marks. Within a string, quoted text can appear; it must use the opposite quotation marks to avoid conflicting with the string.Check the following example:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; quote = 'This string contains a quote: "Here is the quote" '</strong></span>
</pre></div><p>A third type of string is also employed, a multiple line string that starts and ends with three single quote marks:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; multiString = '''This string has</strong></span>
<span class="strong"><strong>multiple lines and can go for</strong></span>
<span class="strong"><strong>as long as I want it too'''</strong></span>
</pre></div></div><div class="section" title="Integers"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec08"/>Integers</h3></div></div></div><p>Integers <a id="id33" class="indexterm"/>are whole numbers<a id="id34" class="indexterm"/> that do not have any decimal places. There is a special consequence to the use of integers in mathematical operations; if integers are used for division, an integer result will be returned. Check out this code snippet below to see an example of this:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; 5 / 2</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>2</strong></span>
</pre></div><p>Instead<a id="id35" class="indexterm"/> of an accurate result of 2.5, Python will return the floor value, or the lowest<a id="id36" class="indexterm"/> whole integer for any integer division calculation. This can obviously be problematic and can cause small bugs in scripts that can have major consequences.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip03"/>Tip</h3><p>Please be aware of this issue when writing scripts and use floats to avoid it as described in the following section.</p></div></div></div><div class="section" title="Floats"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec09"/>Floats</h3></div></div></div><p>Floating point values, or <a id="id37" class="indexterm"/>floats, are <a id="id38" class="indexterm"/>used by Python to represent decimal values. The use of floats when performing division is recommended:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; 5.0 / 2</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>2.5</strong></span>
</pre></div><p>Because computers store values in a base 2 binary system, there can be issues representing a floating value that would normally be represented in a base 10 system. Read <a class="ulink" href="http://docs.python.org/2/tutorial/floatingpoint.html">docs.python.org/2/tutorial/floatingpoint.html</a> for a further discussion of the ramifications of this limitation.</p></div><div class="section" title="Lists"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec10"/>Lists</h3></div></div></div><p>Lists <a id="id39" class="indexterm"/>are ordered sets of data that are contained<a id="id40" class="indexterm"/> in square brackets ([]). Lists can contain any other type of data, including other lists. Data types can be mixed within a single list. Lists also have a set of methods that allow them to be extended, reversed, sorted, summed, or extract the maximum or minimum value, along with many other methods. Data pieces within a list are separated by commas.</p><p>List members are referenced by their index, or position in the list, and the index always starts at zero. Look at the following example to understand this better:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; alist = ['a','b','c','d']</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; alist[0]</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>'a'</strong></span>
</pre></div><p>This example shows us how to extract the first value (at the index 0) from the list called <code class="literal">alist</code>. Once a list has been populated, the data within it is referenced by its index, which is passed to the list in square brackets. To get the second value in a list (the value at index 1), the <a id="id41" class="indexterm"/>same <a id="id42" class="indexterm"/>method is used:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; alist[1]</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>'b'</strong></span>
</pre></div><p>To merge two lists, the <code class="literal">extend </code>method is used:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; blist = [2,5,6]</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; alist.extend(blist)</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; alist</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>['a', 'b', 'c', 'd', 2, 5, 6]</strong></span>
</pre></div></div><div class="section" title="Tuples"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec11"/>Tuples</h3></div></div></div><p>
<span class="strong"><strong>Tuples</strong></span>
<a id="id43" class="indexterm"/> are related to <a id="id44" class="indexterm"/>lists and are denoted by parentheses (()). Unlike lists, tuples are immutable—they cannot be adjusted or extended once they have been created. Data within a tuple is referenced in the same way as a list, using index references starting at zero:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; atuple = ('e','d','k')</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; atuple[0]</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>'e'</strong></span>
</pre></div></div><div class="section" title="Dictionaries"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec12"/>Dictionaries</h3></div></div></div><p>Dictionaries are<a id="id45" class="indexterm"/> denoted by curly brackets ({}) and <a id="id46" class="indexterm"/>are used to create <code class="literal">key:value</code> pairs. This allows us to map values from a key to a value, so that the value can replace the key and data from the value can be used in processing. Here is a simple example:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; adic = {'key':'value'}</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; adic['key']</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>'value'</strong></span>
</pre></div><p>Note that instead of referring to an index position, such as lists or tuples, the values are referenced using a key. Also, keys can be any other type of data except lists (because lists are mutable).</p><p>This <a id="id47" class="indexterm"/>can be very valuable when reading a shapefile or feature class. Using<a id="id48" class="indexterm"/> an <code class="literal">ObjectID</code> as a key, the value would be a list of row attributes associated with <code class="literal">ObjectID</code>. Look at the following example to better understand this behavior:</p><div class="informalexample"><pre class="programlisting">&gt;&gt;&gt; objectIDdic = { 1 : [ '100' , 'Main' , 'St' ] }
&gt;&gt;&gt; objectIDdic[1]</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">['100', 'Main', 'St']</pre></div><p>Dictionaries are very valuable for reading in feature classes and easily parsing through the data by calling only the rows of interest, among other operations. They are great for ordering and reordering data for use later in a script, so be sure to pay attention to them moving forward.</p></div><div class="section" title="Iterable data types"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec13"/>Iterable data types</h3></div></div></div><p>Lists, tuples, and strings <a id="id49" class="indexterm"/>are all iterable data types that can be used in for loops. When<a id="id50" class="indexterm"/> entered into a for loop, these data types are operated on in order, unless otherwise specified. For lists and tuples, this is easy to understand, as they have an obvious order:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; aList = [1,3,5,7]</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; for value in aList:</strong></span>
<span class="strong"><strong>    print value * 2</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>2</strong></span>
<span class="strong"><strong>6</strong></span>
<span class="strong"><strong>10</strong></span>
<span class="strong"><strong>14</strong></span>
</pre></div><p>For strings, each character is looped:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; aString = "esri"</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; for value in aString:</strong></span>
<span class="strong"><strong>    print value.upper()</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>E</strong></span>
<span class="strong"><strong>S</strong></span>
<span class="strong"><strong>R</strong></span>
<span class="strong"><strong>I </strong></span>
</pre></div><p>Dictionaries<a id="id51" class="indexterm"/> are also iterable, but with a specific implementation<a id="id52" class="indexterm"/> that will only allow direct access to the keys of the dictionary (which can then be used to access the values). Also, the keys are not returned in a specific order:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>&gt;&gt;&gt; aDict = {"key1":"value1",</strong></span>
<span class="strong"><strong>    "key2":"value2"}</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; for value in aDict:</strong></span>
<span class="strong"><strong>    print value, aDict[value]</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>key2 value2</strong></span>
<span class="strong"><strong>key1 value1 </strong></span>
</pre></div></div></div><div class="section" title="Other important concepts"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>Other important concepts</h2></div></div></div><p>The use of Python for programming requires an introduction to a number of concepts that are either unique to Python but required or common programming concepts that will be invoked repeatedly when creating scripts. Included following are a number of these concepts that must be covered to be fluent in Python.</p><div class="section" title="Indentation"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec14"/>Indentation</h3></div></div></div><p>Python, unlike most other <a id="id53" class="indexterm"/>programming languages, enforces strict rules on indenting lines of code. This concept is derived again from Guido's desire to produce clean, readable code. When creating functions or using for loops, or if/else statements, indentation is required on the succeeding lines of code. If a for loop is included inside an if/else statement, there will be two levels of indentation. Veteran programmers of other languages have complained about the strict nature of Python's indentation. New programmers generally find it to be helpful as it makes it easy to organize <a id="id54" class="indexterm"/>code. Note that a lot of programmers new to Python will create an indentation error at some point, so make sure to pay attention to the indentation levels.</p></div><div class="section" title="Functions"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec15"/>Functions</h3></div></div></div><p>
<span class="strong"><strong>Functions</strong></span> are<a id="id55" class="indexterm"/> used to take code that is repeated over and over within a script, or across scripts, and make formal tools out of them. Using the keyword <span class="strong"><strong>def</strong></span>, short<a id="id56" class="indexterm"/> for the define function, functions are created with defined inputs and outputs. The idea of a function in computing is that it takes data in one state and converts it into data in another state, without affecting any other part of the script. This can be very valuable to automate a GIS analysis.</p><p>Here is an example of a function that returns the square of any number supplied:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>def square(inVal):</strong></span>
<span class="strong"><strong>    return inVal ** 2</strong></span>
<span class="strong"><strong>&gt;&gt;&gt; square(3)</strong></span>
</pre></div><p>The output is shown as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>9</strong></span>
</pre></div><p>While this of course duplicates a similar function built into the math module, it shows the basics of a function. A function (generally) accepts data, transforms it as needed, and then returns the new state of the data using the return keyword.</p></div><div class="section" title="Keywords"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec16"/>Keywords</h3></div></div></div><p>There are a number of <a id="id57" class="indexterm"/>keywords built into Python that should be avoided when naming variables. These include <code class="literal">max, min, sum, return, list, tuple, def, del, from, not, in, as, if, else, elif, or, while, and, with</code>, among many others. Using these keywords will result in an error.</p></div><div class="section" title="Namespaces"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec17"/>Namespaces</h3></div></div></div><p>Namespaces <a id="id58" class="indexterm"/>are a logical way to organize variable names when a variable inside a function (a local variable) shares the same name as a variable outside of the function (a global variable). Local variables contained within a function (either in the script or within an imported module) and global variables can share a name as long as they do not share a namespace.</p><p>This issue <a id="id59" class="indexterm"/>often arises when a variable within an imported module unexpectedly has the same name of a variable in the script. Python Interpreter will use namespace rules to decide which variable has been called, which can lead to undesirable results.</p></div><div class="section" title="Zero-based indexing"><div class="titlepage"><div><div><h3 class="title"><a id="ch01lvl3sec18"/>Zero-based indexing</h3></div></div></div><p>As mentioned in the preceding section that <a id="id60" class="indexterm"/>describes lists and tuples, Python indexing and counting starts at zero, instead of one. This means that the first member of a group of data is at the zero position, and the second member is at the first position, and so on till the last position.</p><p>This rule also applies when there is a for loop iteration within a script. When the iteration starts, the first member of the data being iterated is in the zero position.</p><p>Also, indexing can be performed when counting from the last member of an iterable object. In this case, the index of the last member is -1, and the second to last is -2, and so on back to the first member of the object.</p></div></div></div>
<div class="section" title="Important Python Modules for GIS Analysis"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Important Python Modules for GIS Analysis</h1></div></div></div><p>Modules, or <a id="id61" class="indexterm"/>code libraries that can be called by a script to increase its programming potential, are either built into Python or are created by third parties and added later to Python. Most of these are written in Python, but a number of them are also written in other programming languages and then wrapped in Python to make them available within Python scripts. Modules are also used to make other programs available to Python, such as the tools built in Microsoft Word.</p><div class="section" title="The ArcPy module"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>The ArcPy module</h2></div></div></div><p>The ArcPy module <a id="id62" class="indexterm"/>is both a wrapper module used to interact with the ArcGIS tools, which are then executed by ArcGIS in its internal code format, and a code base that allows for additional control of geospatial analyses and map production. ArcPy is used to control the tools in ArcToolbox, but the tools have not been rewritten in Python; instead, we are able to use the ArcGIS tools using ArcPy. ArcPy also gives us the ability to control ArcGIS Map Documents( MXDs) and the objects that MXDs include: legends, titles, images, layers, and the map view itself. ArcPy also has tools that are not available in ArcToolbox. The most powerful of these are the data cursors, especially the new Data Analysis Cursors that create a more Pythonic interface with GIS data. The data cursors, covered extensively in <a class="link" href="ch05.html" title="Chapter 5. ArcPy Cursors – Search, Insert, and Update">Chapters 5</a>, <span class="emphasis"><em>ArcPy Cursors: Search, Insert and Update</em></span> and  <a class="link" href="ch06.html" title="Chapter 6. Working with ArcPy Geometry Objects">Chapter 6</a>, <span class="emphasis"><em>Working with ArcPy Geometry Objects</em></span> are very useful to extract rows of data from data sources for analysis.</p><p>The ability to control geospatial analyses using ArcPy allows for the integration of ArcGIS <a id="id63" class="indexterm"/>tools into workflows that contain other powerful Python modules. Python's glue language abilities increase the usefulness of ArcGIS by reducing the need to treat geospatial data in a special manner.</p></div><div class="section" title="The Operating System (OS) module"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>The Operating System (OS) module</h2></div></div></div><p>The OS module, part <a id="id64" class="indexterm"/>of the standard library, allows Python to access operating system functionality. A common use of the module is to use the <code class="literal">os.path</code> method to control file paths by dividing them into directory paths (that is, folders) and base paths (that is, files). There is also a useful method, <code class="literal">os.walk</code>, which will walk-through a directory and return all files within the folders and subfolders. The OS module is accessed constantly when performing GIS analysis.</p></div><div class="section" title="The Python System (SYS) module"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec17"/>The Python System (SYS) module</h2></div></div></div><p>The sys module, part of the standard <a id="id65" class="indexterm"/>library, refers to the Python installation itself. It has a number of methods that will get information about the version of Python installed, as well as information about the script and any arguments (or parameters) supplied to the script, using the <code class="literal">sys.argv</code> method. The <code class="literal">sys.path</code> method is very useful to append the Python file path; practically, this means that folders containing scripts can be referenced by other scripts to make the functions they contain importable to other scripts.</p></div><div class="section" title="The XLRD and XLWT modules"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec18"/>The XLRD and XLWT modules</h2></div></div></div><p>The <code class="literal">XLRD</code> <a id="id66" class="indexterm"/>and <code class="literal">XLWT</code> modules <a id="id67" class="indexterm"/>are used to read and write Excel spreadsheets, respectively. The modules can be very useful to extract data from legacy spreadsheets and convert them into usable data for GIS analysis, or to write analysis results when a geospatial analysis is completed. They are not part of the Python standard library, but are installed along with ArcGIS 10.2 and Python 2.7.</p></div><div class="section" title="Commonly used built-in functions"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec19"/>Commonly used built-in functions</h2></div></div></div><p>There are a number of built-in functions that we will use throughout the book. The main ones are listed as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">str</code>: The <a id="id68" class="indexterm"/>string function is used to convert any other type of data into a string</li><li class="listitem" style="list-style-type: disc"><code class="literal">int</code>: The <a id="id69" class="indexterm"/>integer function is used to convert a string or float into an integer. To not create an error, any string passed to the integer function must be a number such as 1.</li><li class="listitem" style="list-style-type: disc"><code class="literal">float</code>: The <a id="id70" class="indexterm"/>float function is used to convert a string or an integer into a float, much like the integer function.</li></ul></div></div><div class="section" title="Commonly used standard library modules"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec20"/>Commonly used standard library modules</h2></div></div></div><p>The following standard library modules must be imported:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">datetime</code>: The <a id="id71" class="indexterm"/>datetime module is used to get information about the date and time, and convert string dates into Python dates.</li><li class="listitem" style="list-style-type: disc"><code class="literal">math</code>: The <a id="id72" class="indexterm"/>math module is used for higher level math functions that are necessary at times, such as getting a value for Pi or calculating the square of a number.</li><li class="listitem" style="list-style-type: disc"><code class="literal">string</code>: The <a id="id73" class="indexterm"/>string module is used for string manipulations.</li><li class="listitem" style="list-style-type: disc"><code class="literal">csv</code>: The CSV module is used to create and edit comma-separated value type files.</li></ul></div><p>Check <a id="id74" class="indexterm"/>out <a class="ulink" href="https://docs.python.org/2/library">https://docs.python.org/2/library</a> for a complete list of the built-in modules in the standard library.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Summary</h1></div></div></div><p>In this chapter, we discussed about the Zen of Python and covered the basics of programming using Python. We began our exploration of ArcPy and how it can be integrated with other Python modules to produce complete workflows. We also discussed the Python standard library and the basic data types of Python.</p><p>Next, we will discuss how to configure Python for use with ArcGIS, and explore how to use Integrated Development Environments (IDEs) to write scripts.</p></div></body></html>