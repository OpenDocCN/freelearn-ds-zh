- en: Creating Maps
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '0In this chapter, we will be creating maps using QGIS. We will use the styling
    and the data from the previous chapter. We will look at labeling features, before
    building a map using the data. QGIS is very good at creating maps. Have a look
    at this gallery to get an idea of the capabilities of QGIS: [https://www.flickr.com/groups/qgis/pool/](https://www.flickr.com/groups/qgis/pool/).'
  prefs: []
  type: TYPE_NORMAL
- en: 'The topics covered in this chapter are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: Labeling
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating maps
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Saving and exporting maps
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating an Atlas
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Building a web map
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Labeling
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Open the QGIS project we built in [Chapter 4](e8289aa4-8eb7-4d2d-9662-4c17889a53e3.xhtml),
    *Styling Data*. We will be using it to build a map. Turn on the Label Toolbar
    by selecting View | Toolbars and select Label Toolbar. Label Toolbar is shown
    as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/6f78000c-93ef-4c4f-a4f0-831b0579d2eb.png)'
  prefs: []
  type: TYPE_IMG
- en: Labeling toolbar
  prefs: []
  type: TYPE_NORMAL
- en: 'There are eight buttons on this toolbar; in order, these are the following:'
  prefs: []
  type: TYPE_NORMAL
- en: Clicking on Layer Labeling Options will open the Layer Styling Panel and the
    label tab by default
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Layer Diagram Options
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Highlight Pinned Labels and Diagrams
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pin/Unpin Labels And Diagrams
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Show/Hide Labels And Diagrams
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Move Label and Diagram
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Rotate Label
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Change Label, used for label editing
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Make sure that the `Airports` layer is selected in the Layers panel. Click
    on the layer labeling button on Label Toolbar. This will open the Layer Styling
    Panel; we used this in the previous chapter to style our layers. Choose Single
    labels and the label with NAME to label all `Airports`. I have reduced the Size
    of the text from 10.0000 to 8.0000 points. Make sure that the checkbox next to
    Live update is ticked so any updates can be seen as they are made. This is shown
    in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f1c61a11-c4bb-4c86-ac38-cf9e4689cc64.png)'
  prefs: []
  type: TYPE_IMG
- en: Layer Styling Panel—label design focus
  prefs: []
  type: TYPE_NORMAL
- en: These are the default labeling options. Any changes you make will be instantly
    seen in the map. Not all labels will be placed perfectly. A good method is to
    try to get as many labels in the best location possible using the Placement tab,
    and then manually move individual labels if they are still not located optimally.
  prefs: []
  type: TYPE_NORMAL
- en: 'With the labels tab open, select the Placement tab (the icon with four arrows
    pointing north, south, east, and west). Choose the radio button next to Offset
    from point and click the top middle quadrant in the display. This will move all
    the labels directly north (as you view your map) from the `Airports` icon. Adjust
    Offset X,Y to 0.0000,-2.0000 to exaggerate the distance from the icon. This is
    shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/87eaec75-c348-4e01-8f96-8f5a955e52aa.png)'
  prefs: []
  type: TYPE_IMG
- en: Layer Styling Panel—label Placement focus
  prefs: []
  type: TYPE_NORMAL
- en: 'Now that we have placed the labels, let''s style them using some of the options
    available to us. Click on the buffer tab (the icon shows abc with a blue background).
    Next, check the box next to Draw text buffer. This helps our labels stand out
    more from the map. Click on the customize effects button, check the box next to
    Drop Shadow, and set its Opacity to 50.0%. This is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/020af032-6c98-41cf-bcec-fc7bff74bb5e.png)'
  prefs: []
  type: TYPE_IMG
- en: Layer Styling Panel—label Effects Properties
  prefs: []
  type: TYPE_NORMAL
- en: 'The map now looks like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4b00f7a0-cd71-4679-bb3e-3832dfba50f8.png)'
  prefs: []
  type: TYPE_IMG
- en: Map with layers added
  prefs: []
  type: TYPE_NORMAL
- en: As you can see, there is an issue with labels near the Anchorage International
    Airport. Let's use the interactive Label Toolbar to move these labels manually.
    There are still some labels not being displayed; in the next section, we will
    move them manually.
  prefs: []
  type: TYPE_NORMAL
- en: Manually moving labels
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To interactively move a label, click on the Move Label and Diagram button on
    Label Toolbar and accept ID as the primary key. Next, click on a label and move
    it. As you click and drag a label, a placement box appears in green where the
    new location of the label will be. This is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2d855b71-2b8a-412b-ab1b-7a18a4d07fed.png)'
  prefs: []
  type: TYPE_IMG
- en: Placing labels
  prefs: []
  type: TYPE_NORMAL
- en: 'Keep zooming in and out of the map to ensure your labels are placed where best
    suited to your data. You have many other options that we will not cover in this
    quick start guide, but rotating (as shown highlighted on Label Toolbar as follows)
    is useful, especially on linear features:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e67a486e-4785-4ded-874f-8573e0c8daf9.png)'
  prefs: []
  type: TYPE_IMG
- en: Label Toolbar
  prefs: []
  type: TYPE_NORMAL
- en: 'The final button on the right of Label Toolbar allows you to change the individual
    properties of one label at a time; size, color, and font size can all be set on
    a label-by-label basis. Your map will look similar to the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e1204908-3286-4949-9015-89e3f1fb090f.png)'
  prefs: []
  type: TYPE_IMG
- en: Label placement with adjustment
  prefs: []
  type: TYPE_NORMAL
- en: If you wanted to label rivers and the grassland areas, apply labels using the
    same tool we have just described.
  prefs: []
  type: TYPE_NORMAL
- en: We are now ready to bring this all together and make a map.
  prefs: []
  type: TYPE_NORMAL
- en: Making a map in QGIS
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Click on Project | New Print Layout (or click the corresponding button on Project
    Toolbar).
  prefs: []
  type: TYPE_NORMAL
- en: 'In the Create print layout Title dialog box (shown as follows), give your new,
    empty map a title and click OK:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1326570d-a2db-44b4-a270-a39cdb489ebf.png)'
  prefs: []
  type: TYPE_IMG
- en: Creating a new print layout
  prefs: []
  type: TYPE_NORMAL
- en: 'You will now have an empty canvas on which we will build our map. Add your
    map to the layout canvas via the menu by going to Add Item | Add Map. Then, click
    and drag the mouse to draw on the canvas in the location you want to put your
    map. This will add an Item called Map 1; we will add more items later. This is
    shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/b3b79f56-e1b7-4234-8cb4-59ca56f33db3.png)'
  prefs: []
  type: TYPE_IMG
- en: Map layout
  prefs: []
  type: TYPE_NORMAL
- en: Please note that for ease of reading this book, the label size has been increased.
  prefs: []
  type: TYPE_NORMAL
- en: For this reason you will find that the screen shots are slightly different to
    your screen.
  prefs: []
  type: TYPE_NORMAL
- en: 'With Map 1 selected, click on the Item Properties tab and set the scale to
    `12000000`, as this will display all our data on the page. Ensure that Toolbox
    Toolbar is enabled (View | Toolbars | Toolbox). This is a very useful toolbar
    as it allow us to design our page. Click on the Move Item Content button, highlighted
    as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9d962782-3226-4687-829e-0b4a72a8e638.png)'
  prefs: []
  type: TYPE_IMG
- en: Move item button—used to move an item on the map
  prefs: []
  type: TYPE_NORMAL
- en: This tool allows us to move the data in the map around so it best fits the page.
    When you are happy it is in the right place, click on Pan Map (the hand icon).
  prefs: []
  type: TYPE_NORMAL
- en: To add a legend, click on the add legend button. Draw an area where the legend
    will appear on the map. The legend may appear messy at first, but we can adjust
    it in Item Properties. Make sure that the legend is selected in the Items panel,
    and then from the Item Properties tab add a title (Legend) and uncheck the auto
    update checkbox. We can remove any layers appearing in the legend that we don't
    want. In the map, the `Hillshade` and `landcover` rasters are still there. To
    remove these, click on the layer name and then click on the red minus button to
    remove it from the legend. If you wanted to add a layer back, then click on the
    green cross to bring up a list of layers to select. To finish the legend, scroll
    down Item Properties and expand Fonts.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here, set Title font to bold. The map now looks like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ed16881b-5384-4040-be1f-4b31e9c30197.png)'
  prefs: []
  type: TYPE_IMG
- en: Map layout with Legend added
  prefs: []
  type: TYPE_NORMAL
- en: Next, add a scalebar. In Toolbox Toolbar, select the scalebar tool and click
    and drag a new scalebar to the lower-right corner of the map. In Item Properties
    for the scalebar, set Style as Double Box and the units to Miles. Change the Label
    for units value from mi to Miles.
  prefs: []
  type: TYPE_NORMAL
- en: Add a north arrow by clicking Add Item | Add Picture and draw a box to contain
    your north arrow. Use the item properties of the north arrow to point to the location
    on your computer where the QGIS SVG files are stored. In this example, I am using
    `C:\OSGeo4W64\apps\qgis\svg\arrows/NorthArrow_11.svg`.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, we need to add a title and a description. To add text to this map, select
    Add Item | Add label. Draw a box in the lower-left corner, and in the Item Properties
    window, copy the following text:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Click on Render as HTML.
  prefs: []
  type: TYPE_NORMAL
- en: To finish, we can set a background color for the map. Select Map 1 in the Items
    panel and scroll to the background options in the Item Properties. Choose a neutral
    color; I have selected a light gray. Adjust the transparency to a suitable level
    so it doesn't distract the viewer. Select the legend in the Items panel and set
    the background to the same color as the map background.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, from the Toolbox Toolbar, click on the Add Shape icon. Choose a rectangle
    and draw around the title. Select it as the item and, in Item Properties, change
    the fill to no fill and the boarder to black (it will be black by default). Then,
    set Corner radius to 3.00, so the corners are rounded in the textbox.
  prefs: []
  type: TYPE_NORMAL
- en: 'Your map will look similar to the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e767821a-70ec-4858-a140-bc9fa3b80967.png)'
  prefs: []
  type: TYPE_IMG
- en: Map layout updated in QGIS 3.4
  prefs: []
  type: TYPE_NORMAL
- en: 'Save your map via Layout | Save Project. To save it as `.pdf`, click Layout
    | Export as pdf. You may need to adjust the export settings, such as dpi values,
    to make the optimal map output. To do this, click on the Layout tab on the right
    of the screen (next to Item Properties). On this screen, you will have the option
    to change a variety of settings. The Layout tab is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/720b12d4-9690-40ab-936c-0cdb2b447a04.png)'
  prefs: []
  type: TYPE_IMG
- en: Layout settings
  prefs: []
  type: TYPE_NORMAL
- en: Creating an Atlas
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Close the layout we have just created and return to the QGIS main project screen.
    In this example, we are going to create an Atlas of maps of the locations around
    civilian airports. To do this, use the NAME field, which contains only civilian
    airports. Let''s create a new basic layout to show this functionality. We can
    do this by selecting Project | New Print Layout, or via Layout Manager Project
    | Layout Manager. Let''s choose Layout Manager. This is a useful dialog box that
    lists all of our created layouts within a QGIS project. It is shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/72d23729-e6ba-4b74-b7cc-b5d69a7e3a40.png)'
  prefs: []
  type: TYPE_IMG
- en: QGIS Layout Manager
  prefs: []
  type: TYPE_NORMAL
- en: 'Select Empty layout and click on Create to open a new blank template. I am
    going to call my new layout `Airport_Atlas`:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/88fa9dff-c9d3-4e9b-92ce-f6f16258ca3f.png)'
  prefs: []
  type: TYPE_IMG
- en: Create a new print layout
  prefs: []
  type: TYPE_NORMAL
- en: 'As we did when creating the Alaska map, select the add new map to layout button,
    and click and drag to fill the map page with the data from the QGIS project. From
    the menu bar, select Atlas | Atlas settings and then check the box next to Generate
    an atlas. Now, select Coverage layer as `Airports` and Page name as NAME. This
    will tell the Atlas to create one page per airport name:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f083490d-550b-429f-a9df-ba064f5dcd96.png)'
  prefs: []
  type: TYPE_IMG
- en: Options for generating an Atlas
  prefs: []
  type: TYPE_NORMAL
- en: 'In the Item Properties tab, make sure that Controlled by atlas is checked;
    this will mean the scale/view will adjust to each feature. Next, ensure that the
    Atlas toolbar is turned on. The toolbar is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e6203dc3-dfe5-404e-add3-e867d2ee96e4.png)'
  prefs: []
  type: TYPE_IMG
- en: Atlas toolbar
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on the preview button in the Atlas toolbar and use the arrows to scroll
    through the proposed Atlas. This is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/df0c5b09-b483-4783-84c7-efcaef8ac76b.png)'
  prefs: []
  type: TYPE_IMG
- en: Map created in the Atlas function
  prefs: []
  type: TYPE_NORMAL
- en: The scale may need adjusting to suit your needs. You can add a title, legend,
    scale bar, and north arrow as we did in the previous example. Once you have finished,
    select Atlas | Export Atlas from the menu as `.pdf` and save to disk. This is
    a simple example, but it shows the basics of creating an Atlas; you only need
    to build one layout to do it. Save and close your layout when finished.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, in this chapter, we will have a quick look at creating a map for the
    web.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a web map
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We can do more than just create printed or static digital maps. By creating
    a web map, a user has the ability to have more interaction with a map online.
    QGIS has a plugin that will allow you to display your data as a web map. This
    provides another option for sharing your maps. In this brief example, we will
    introduce QGIS plugins and how the `qgis2web` plugin allows us to create web maps.
  prefs: []
  type: TYPE_NORMAL
- en: Plugins are a really powerful and collaborative feature of QGIS. Developers
    and companies have created many plugins that extend the core features of QGIS.
    Some have been so integral to workflows that they have been incorporated into
    the main software. From the Plugins menu, select Manage and Install Plugins.
  prefs: []
  type: TYPE_NORMAL
- en: We will look at plugins more in the following two chapters, [Chapter 6](6cd8f808-67bd-4788-8e7a-ccd3ce12a11d.xhtml),
    *Spatial Processing* and [Chapter 7](bab7139e-9f38-4dff-b1eb-c5056be9c960.xhtml),
    *Expanding QGIS 3*.
  prefs: []
  type: TYPE_NORMAL
- en: 'From the plugin manager, with the ALL tab selected, search for and install
    `qgis2web`. Once installed, close the plugin manager. In the menu, there should
    be an option called Web. From here, select qgis2web | create web map. Adjust Layers
    and Groups to match the map you wish to create. In this example, `Airports`, `majrivers`,
    and `alaska` layers are selected. This map will use the `Leaflet` JavaScript library;
    this is a library designed to create lightweight web maps. A screenshot of qgis2web
    follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/fd34e901-9826-482c-91bb-c86d57c32558.png)'
  prefs: []
  type: TYPE_IMG
- en: The overview of qgis2web plugin for QGIS
  prefs: []
  type: TYPE_NORMAL
- en: When you are happy with the configuration, click on the Export button; this
    will save the web map at the location specified as the `Export` folder. Then,
    open the resulting web map in your web browser. You can copy the contents in the
    `Export` folder to a web server to publish the map. The `qgis2web` plugin is a
    very efficient way of creating web maps.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we have built maps with QGIS. We first looked at labeling options,
    both with rules and then interactively changing individual labels. Then, we built
    a map using the data we styled in the previous chapter. We then looked at how
    to create an Atlas, before finally looking at options to export the map to the
    web using the `qgis2web` plugin.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we will look at spatial analysis, helping to derive more
    detailed spatial information about data.
  prefs: []
  type: TYPE_NORMAL
