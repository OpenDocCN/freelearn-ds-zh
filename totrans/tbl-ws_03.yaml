- en: '3\. Data Preparation: Using Tableau Prep'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3. 数据准备：使用 Tableau Prep
- en: Overview
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 概述
- en: In this chapter, you will learn some advanced data preparation methods in Tableau
    Prep. You will learn how to use various Tableau Prep options to clean datasets,
    join different data sources using various options, and perform data manipulation
    activities such as pivots, grouping, and aggregations. By the end of this chapter,
    you will be able to export a cleaned data source to develop visualizations in
    Tableau.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将学习 Tableau Prep 中的某些高级数据准备方法。您将学习如何使用各种 Tableau Prep 选项来清理数据集，使用不同的选项连接不同的数据源，并执行数据操作活动，如转置、分组和聚合。到本章结束时，您将能够将清理后的数据源导出到
    Tableau 中进行可视化开发。
- en: Introduction
  id: totrans-3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: In the previous chapter, you performed some fundamental data transformations
    such as joins, filtering, and groups using Tableau Desktop. However, Tableau Desktop
    only performs basic data manipulation. It may not be able to handle raw unprocessed/unclean
    data, like data containing multiple entries, missing entries, or inconsistent
    formats. Now, you will learn about more advanced methods, better suited to these
    trickier scenarios.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，您使用 Tableau Desktop 执行了一些基本的数据转换，例如连接、过滤和分组。然而，Tableau Desktop 只能执行基本的数据操作。它可能无法处理原始的未经处理/未清洗的数据，例如包含多个条目、缺失条目或不一致格式的数据。现在，您将学习更多适合这些更复杂场景的高级方法。
- en: Tableau Prep is a tool specifically designed to perform data transformation
    so we can use the data for our visualizations. It consists of advanced algorithms
    that help detect data inconsistencies and fix them. This can be done automatically
    as well as manually, depending on the requirements.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau Prep 是一个专门设计用于执行数据转换的工具，以便我们可以使用这些数据来进行可视化。它包含高级算法，可以帮助检测数据不一致并修复它们。这可以自动完成，也可以根据需求手动完成。
- en: In this chapter, you will learn about the Prep interface, along with data operations
    like adding data sources, data profiling, and applying transformations such as
    cleaning, splitting, adding pivots, joining data sources, and applying unions.
    Finally, you will learn how to export this transformed dataset into Excel for
    data visualization.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将学习 Prep 界面以及数据操作，如添加数据源、数据概要分析以及应用诸如清理、拆分、添加转置、连接数据源和应用联合等转换。最后，您将学习如何将转换后的数据集导出到
    Excel 中进行数据可视化。
- en: Prep Interface
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Prep 界面
- en: In this section, you will look at the options available in Tableau Prep for
    data transformation. Tableau Prep can be downloaded from the Tableau website ([https://www.tableau.com/products/prep](https://www.tableau.com/products/prep))
    and installed like any other program. You can find detailed installation steps
    in the *Preface*. Once the installation is complete, navigate to your desktop
    and click on the Tableau Prep icon to open it.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您将查看 Tableau Prep 中用于数据转换的选项。Tableau Prep 可以从 Tableau 网站下载（[https://www.tableau.com/products/prep](https://www.tableau.com/products/prep)）并像其他任何程序一样安装。您可以在*前言*中找到详细的安装步骤。安装完成后，导航到您的桌面并点击
    Tableau Prep 图标以打开它。
- en: 'When you open Prep for the first time, it will look like this:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 当您第一次打开 Prep 时，它看起来会是这样：
- en: '![Figure 3.1: Prep start screen'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.1：Prep 启动屏幕'
- en: '](img/B16342_03_01.jpg)'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_03_01.jpg]'
- en: 'Figure 3.1: Prep start screen'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.1：Prep 启动屏幕
- en: The `Connections` tab (top-left corner), shows all data sources that can be
    connected in the prep. This is similar to the `Connect` pane in Tableau Desktop.
    (*Chapter 2, Data Preparation Using Tableau Desktop*.)
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '`连接`选项卡（左上角），显示可以在 Prep 中连接的所有数据源。这与 Tableau Desktop 中的`连接`面板类似。（*第二章，使用 Tableau
    Desktop 进行数据准备*。）'
- en: '![ Figure 3.2: Data connections in Prep'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.2：Prep 中的数据连接'
- en: '](img/B16342_03_02.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_03_02.jpg]'
- en: 'Figure 3.2: Data connections in Prep'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.2：Prep 中的数据连接
- en: 'Throughout this chapter, you will be working with file-based connections such
    as Excel spreadsheets and CSVs. First, let''s look briefly at the other options
    available on the start screen (as shown in *Figure 3.1*):'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将使用基于文件的连接进行操作，例如 Excel 电子表格和 CSV 文件。首先，让我们简要地看看启动屏幕上可用的其他选项（如图 3.1 所示）：
- en: '![Figure 3.3: Options on the start screen'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.3：启动屏幕上的选项'
- en: '](img/B16342_03_03.jpg)'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_03_03.jpg]'
- en: 'Figure 3.3: Options on the start screen'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.3：启动屏幕上的选项
- en: 'In the preceding figure, you can see the following elements:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的图中，您可以查看以下元素：
- en: '`Open a Flow`: This opens a workflow that has already been created. A workflow,
    or flow, is a series of data transformation activities that you perform on the
    input data in Prep. You will learn about creating different flows in the upcoming
    sections.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`打开工作流程`：此选项打开已创建的工作流程。工作流程或流程是一系列你在 Prep 上的输入数据转换活动。你将在接下来的章节中了解如何创建不同的工作流程。'
- en: '`Connect to Data`: This opens the `Connections` menu, where you connect to
    data, as shown earlier.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`连接到数据`：此选项打开 `连接` 菜单，你可以在这里连接到数据，如之前所示。'
- en: '`Recent Flows`: All previous flows can be viewed here. You can toggle between
    card view or list view using the controls on the right side.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`最近的工作流程`：所有之前的工作流程都可以在这里查看。你可以使用右侧的控件在卡片视图或列表视图之间切换。'
- en: Other than these options, you also have `Sample Flows` provided by Tableau,
    and the `Discover` menu, where you can check out Prep-related content updates
    on the Tableau website.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 除了这些选项之外，Tableau 还提供了 `示例工作流程`，以及 `发现` 菜单，你可以在这里查看 Tableau 网站上 Prep 相关的内容更新。
- en: There are also other `File`, `Edit`, `Flow`, and `Server` menu options at the
    top. The `File` and `Edit` options should be self-explanatory. The `Flow` menu
    can be used to run the flow, and the `Server` menu has the option to sign in and
    publish the flow on Tableau Server.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 顶部还有其他 `文件`、`编辑`、`流程` 和 `服务器` 菜单选项。`文件` 和 `编辑` 选项应该是显而易见的。`流程` 菜单可以用来运行流程，而
    `服务器` 菜单提供了在 Tableau Server 上登录和发布流程的选项。
- en: Now that you have learned about the various options, it's time to add some data
    in the flow.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经了解了各种选项，是时候在流程中添加一些数据了。
- en: Adding Data in the Flow
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在流程中添加数据
- en: As seen in *Chapter 2*, *Data Preparation using Tableau Desktop*, the first
    step of any data preparation activity is to add the data into your workflow. To
    do that in Prep, click on `Connections` and select the data source. In the following
    exercise, you will connect to file-based data sources, but the process is similar
    for server-based data sources.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 如 *第 2 章* 中所述，*使用 Tableau Desktop 进行数据准备*，任何数据准备活动的第一步是将数据添加到你的工作流程中。要在 Prep
    中这样做，请点击 `连接` 并选择数据源。在接下来的练习中，你将连接到基于文件的源，但对于基于服务器的数据源，过程是相似的。
- en: 'Exercise 3.01: Connecting to an Excel File'
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 3.01：连接到 Excel 文件
- en: 'In this exercise, you will connect with your very first data source in Prep.
    Follow these steps to complete the exercise:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，你将在 Prep 中连接到你的第一个数据源。按照以下步骤完成练习：
- en: 'After installing Tableau Prep Builder, find the files in the following location
    on your computer:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的计算机上安装 Tableau Prep Builder 后，找到以下位置的文件：
- en: Windows
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows
- en: '[PRE0]'
  id: totrans-34
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Mac
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mac
- en: '[PRE1]'
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Click on `Connections` and select the `Microsoft Excel` option.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 `连接` 并选择 `Microsoft Excel` 选项。
- en: This will open the menu from which you can select the Excel file. Navigate to
    the aforementioned location and open the `Orders_East.xlsx` file.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将打开一个菜单，你可以从中选择 Excel 文件。导航到上述位置并打开 `Orders_East.xlsx` 文件。
- en: '![Figure 3.4: Connecting to an Excel file using Prep'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.4：使用 Prep 连接到 Excel 文件](img/B16342_03_04.jpg)'
- en: '](img/B16342_03_04.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_06.jpg)'
- en: 'Figure 3.4: Connecting to an Excel file using Prep'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.4：使用 Prep 连接到 Excel 文件
- en: 'You will get the following screen once the Excel file has loaded:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 当 Excel 文件加载完成后，你会看到以下屏幕：
- en: '![Figure 3.5: Data input properties'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.5：数据输入属性](img/B16342_03_05.jpg)'
- en: '](img/B16342_03_05.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_05.jpg)'
- en: 'Figure 3.5: Data input properties'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.5：数据输入属性
- en: There are a lot of tabs and options on this screen. These will be covered in
    the upcoming sections.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个屏幕上有很多标签和选项。这些将在接下来的章节中介绍。
- en: 'Click the `+` icon (*Figure 3.6*) to see the steps that can be applied to this
    input data step:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 `+` 图标 (*图 3.6*) 查看可以应用于此输入数据步骤的步骤：
- en: '![Figure 3.6: Adding steps to a workflow'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.6：向工作流程中添加步骤](img/B16342_03_06.jpg)'
- en: '](img/B16342_03_06.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_06.jpg)'
- en: 'Figure 3.6: Adding steps to a workflow'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.6：向工作流程中添加步骤
- en: Now it's time to add an output step. To do so, click on `+` and select `Output`.
    An output tab will open, and you can preview the data.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候添加一个输出步骤了。要这样做，请点击 `+` 并选择 `输出`。将打开一个输出选项卡，你可以预览数据。
- en: '![Figure 3.7: Output step properties in the workflow'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.7：工作流程中的输出步骤属性](img/B16342_03_07.jpg)'
- en: '](img/B16342_03_07.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_07.jpg)'
- en: 'Figure 3.7: Output step properties in the workflow'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.7：工作流程中的输出步骤属性
- en: Here, you learned how to connect to an Excel file. Next, you will learn about
    bringing multiple inputs into the flow.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，你学习了如何连接到 Excel 文件。接下来，你将了解如何将多个输入带入流程中。
- en: 'Exercise 3.02: Connecting with Multiple Data Sources'
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 3.02：连接多个数据源
- en: Ideally, in a business project, data should be stored in separate sources. Thus,
    it is important to know how to connect to multiple data sources. In this exercise,
    you will try to add another data source to your existing flow.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在商业项目中，理想情况下，数据应存储在不同的来源中。因此，了解如何连接到多个数据源非常重要。在这个练习中，你将尝试向现有的流程中添加另一个数据源。
- en: 'You will be connecting the `Orders_South` data, as follows:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 你将连接“Orders_South”数据，如下所示：
- en: Continuing from the last step of the previous exercise, click on `+` and select
    the `Text file` option. This is because the required data is stored as a CSV file,
    which is a type of text file.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从上一个练习的最后一步继续，点击“+”并选择“文本文件”选项。这是因为所需数据存储为CSV文件，这是一种文本文件类型。
- en: '![Figure 3.8: Connecting to a CSV file'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.8：连接到CSV文件'
- en: '](img/B16342_03_08.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_08.jpg)'
- en: 'Figure 3.8: Connecting to a CSV file'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.8：连接到CSV文件
- en: Now, navigate to the `Order_South` folder under `Superstore Files`. Select `orders_south_2018.csv`
    and click on `Open` to bring the file into Prep.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，导航到“Superstore Files”下的“Order_South”文件夹。选择“orders_south_2018.csv”并点击“打开”将文件导入Prep。
- en: '![Figure 3.9: Data explorer window to view input files'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.9：数据探索窗口查看输入文件'
- en: '](img/B16342_03_09.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_09.jpg)'
- en: 'Figure 3.9: Data explorer window to view input files'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.9：数据探索窗口查看输入文件
- en: 'You should get the following screen:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该会看到以下屏幕：
- en: '![Figure 3.10: Adding multiple files to the workflow'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.10：将多个文件添加到工作流程中'
- en: '](img/B16342_03_10.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_10.jpg)'
- en: 'Figure 3.10: Adding multiple files to the workflow'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.10：将多个文件添加到工作流程中
- en: 'The following steps will walk you through the various tabs in the `Input` pane
    shown in *Figure 3.10*:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤将指导您通过*图3.10*中显示的“输入”面板中的各个选项卡：
- en: '![Figure 3.11: CSV input properties'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.11：CSV输入属性'
- en: '](img/B16342_03_11.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_11.jpg)'
- en: 'Figure 3.11: CSV input properties'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.11：CSV输入属性
- en: The `Setting` tab is mostly related to the connection details of the data source,
    and might vary depending on the data source connection. You will find options
    here to edit connection details, select text options, decide which field separators
    to use, and more.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “设置”选项卡主要与数据源的连接细节相关，可能因数据源连接而异。您在这里可以找到编辑连接细节、选择文本选项、决定使用哪种字段分隔符等选项。
- en: You also have options such as `Text Qualifier`, `Character Set`, and `Locale`.
    Prep is smart enough to recognize these configurations but, if required, configurations
    can be changed as per requirements. Finally, there is an option for `Incremental
    Refresh`. This is similar to Tableau Desktop, and can be used to load new data
    based on certain columns rather than pulling all data every time the flow runs.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您还有其他选项，如“文本限定符”、“字符集”和“区域设置”。Prep足够智能，可以识别这些配置，但如果需要，可以根据要求进行更改。最后，有一个“增量刷新”选项。这与Tableau
    Desktop类似，可以用来根据某些列加载新数据，而不是每次流程运行时都拉取所有数据。
- en: Select the `Multiple File` tab to get the option to add multiple files together.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“多个文件”选项卡以获取添加多个文件一起的选项。
- en: '![Figure 3.12: Options to input multiple files'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.12：输入多个文件的选项'
- en: '](img/B16342_03_12.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_12.jpg)'
- en: 'Figure 3.12: Options to input multiple files'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.12：输入多个文件的选项
- en: Now, change the selection to `Wildcard union`. Suppose you want to get all the
    `orders_south` files from the folder. You can simply search it by a pattern (`*south*`)
    and get all the files you want to find (*Figure 3.13*).
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，将选择更改为“通配符合并”。假设您想从文件夹中获取所有“orders_south”文件。您可以通过模式（`*south*`）简单地搜索它，并找到您想要的所有文件（*图3.13*）。
- en: '![Figure 3.13: Wildcard search for multiple file input'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.13：对多个文件输入进行通配符搜索'
- en: '](img/B16342_03_13.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_13.jpg)'
- en: 'Figure 3.13: Wildcard search for multiple file input'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.13：对多个文件输入进行通配符搜索
- en: You can search for files like this in the folders (or subfolders) as well. You
    can also include or exclude files that match a pattern. By including an asterisk
    (`*`) you can selectively ignore all characters before and after a keyword.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以在文件夹（或子文件夹）中搜索此类文件。您还可以包含或排除符合特定模式的文件。通过包含一个星号（`*`），您可以有选择地忽略关键字前后所有字符。
- en: Click on `Apply`, and all these sheets will be included in the flow. Prep also
    includes a new column, `File Paths`, which indicates the locations this data is
    coming from.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“应用”，所有这些工作表都将包含在流程中。Prep还包含一个新列，“文件路径”，它指示数据来源的位置。
- en: '![Figure 3.14: Identification of input file source using File Paths'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.14：使用文件路径识别输入文件来源'
- en: '](img/B16342_03_14.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_14.jpg)'
- en: 'Figure 3.14: Identification of input file source using File Paths'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.14：使用文件路径识别输入文件源
- en: Next, select the `Data Sample` tab. Here, you get the option to sample the input
    data, which is especially useful if the data is vast. Ideally, when working with
    a very large dataset, it is better to work with a sample to save time while developing
    the workflow, as the workflow will run faster if there are fewer records.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择“数据样本”选项卡。在这里，您可以采样输入数据，这在数据量很大时特别有用。理想情况下，当处理非常大的数据集时，最好使用样本来节省开发工作流程的时间，因为工作流程运行得更快，如果有更少的记录。
- en: '![Figure 3.15: Sampling the input data'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.15：采样输入数据'
- en: '](img/B16342_03_15.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_03_15.jpg]'
- en: 'Figure 3.15: Sampling the input data'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.15：采样输入数据
- en: By hovering over the information icon, you can check how Prep samples the data.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 通过悬停在信息图标上，您可以检查Prep如何采样数据。
- en: Select the `Changes` tab. Any changes made to the data will be tracked here.
    A simple example is unchecking certain column names in the data. For example,
    if you uncheck the `Sales` and `Quantity` columns, these are immediately added
    to the `Changes` tab. The changes are also indicated by the annotations (small
    icons) in the `Changes` column, and on the data input icon as well. (Figure 3.16.)
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“更改”选项卡。对数据进行的所有更改都将在此跟踪。一个简单的例子是在数据中取消选中某些列名。例如，如果您取消选中“销售”和“数量”列，这些列将立即添加到“更改”选项卡中。更改也由“更改”列中的注释（小图标）以及数据输入图标上的注释表示。（图3.16。）
- en: '![Figure 3.16: Tracking changes in the workflow'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.16：跟踪工作流程中的更改'
- en: '](img/B16342_03_16.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_03_16.jpg]'
- en: 'Figure 3.16: Tracking changes in the workflow'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.16：跟踪工作流程中的更改
- en: In this section, you learned how to connect multiple data sources in a workflow
    and their configuration properties. Next, you will learn how to profile data in
    Prep.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您学习了如何在工作流程中连接多个数据源及其配置属性。接下来，您将学习如何在Prep中分析数据。
- en: Data Source Profile
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据源配置文件
- en: Until now, you have only connected to different data sources. But your main
    objective is to understand the data better. This can be done by observing the
    data distribution, the data types of various columns, the values that a column
    contains, and so on.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，您只连接了不同的数据源。但您的主要目标是更好地理解数据。这可以通过观察数据分布、各种列的数据类型、列包含的值等来实现。
- en: A data source profile gives you an understanding of the underlying data by allowing
    you to observe the data distribution and frequency, along with the various data
    types for the fields. This helps you make appropriate changes to the data to fulfill
    the requirements in the flow. Some common options include checking the data distribution
    frequency, the number of unique records, and the associations among various columns.
    You will first learn about some commonly used profiling steps, and then apply
    them in an exercise.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 数据源配置文件通过允许您观察数据分布和频率以及字段的多种数据类型，使您能够了解底层数据。这有助于您对数据进行适当的更改以满足流程中的要求。一些常见选项包括检查数据分布频率、唯一记录数以及各列之间的关联。您将首先了解一些常用的分析步骤，然后将在练习中应用它们。
- en: 'Data source profiling can be performed using a clean step. A clean step can
    be added by hovering over the `+` icon next to the data source and selecting `Clean
    Step`, as follows:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用清洁步骤执行数据源分析。可以通过悬停在数据源旁边的“+”图标上并选择“清洁步骤”来添加清洁步骤，如下所示：
- en: '![Figure 3.17: Adding a clean step in the workflow'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.17：在工作流程中添加一个清洁步骤'
- en: '](img/B16342_03_17.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_03_17.jpg]'
- en: 'Figure 3.17: Adding a clean step in the workflow'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.17：在工作流程中添加一个清洁步骤
- en: Now, a clean step has been added to the workflow, which will open a new window
    for its connected input dataset. In this window, you can profile your data.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，已将清洁步骤添加到工作流程中，这将打开一个新窗口以显示其连接的输入数据集。在这个窗口中，您可以分析您的数据。
- en: '![Figure 3.18: Clean step properties'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.18：清洁步骤属性'
- en: '](img/B16342_03_18.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_03_18.jpg]'
- en: 'Figure 3.18: Clean step properties'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.18：清洁步骤属性
- en: The preceding screenshot shows the data profile pane. Each column will give
    a slightly different representation, depending on the data type.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 上一张截图显示了数据配置文件窗格。每个列将根据数据类型给出略有不同的表示。
- en: For example, a string data type will give a distribution of the frequency with
    which it has occurred. If you observe the `Customer Name` column (as shown in
    the following screenshot) you will observe the number of orders placed by a customer.
    This is because the view is based on the customer order frequency.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，字符串数据类型将给出其发生的频率分布。如果您观察`Customer Name`列（如下截图所示），您将观察到客户下订单的数量。这是因为视图基于客户订单频率。
- en: '![Figure 3.19: Observing Customer Name value frequencies'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.19：观察客户名称值频率'
- en: '](img/B16342_03_19.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_19.jpg)'
- en: 'Figure 3.19: Observing Customer Name value frequencies'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.19：观察客户名称值频率
- en: For a numeric column type, the profile would just give a histogram indicating
    the distribution of the values. Observe the `Quantity` column, which is a number.
    The data profile provides a histogram that can help you understand the range of
    the quantities sold.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 对于数值列类型，概览将仅显示一个表示值分布的直方图。观察`Quantity`列，它是一个数字。数据概览提供了一个直方图，可以帮助您了解销售数量的范围。
- en: '![Figure 3.20: Data profile for a numeric column'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.20：数值列的数据概览'
- en: '](img/B16342_03_20.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_20.jpg)'
- en: 'Figure 3.20: Data profile for a numeric column'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.20：数值列的数据概览
- en: Now that you have learned about the concept of data profiling, it's time for
    an exercise, to practice using the data profile of the `Orders` dataset.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经了解了数据概览的概念，是时候进行练习，以练习使用`Orders`数据集的数据概览。
- en: 'Exercise 3.03: Data Profile for the Orders_South Dataset'
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习3.03：Orders_South数据集的数据概览
- en: In this exercise, you will learn how to better understand data using the data
    profile options in Prep.In the previous workflow, you connected to the `Order_South`
    dataset . This is a continuation of that exercise.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将学习如何通过使用“准备”中的数据概览选项来更好地理解数据。在前一个工作流程中，您连接到了`Order_South`数据集。这是该练习的延续。
- en: 'Perform the following steps:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: 'Once the data is connected in Prep, click the `+` icon and then select `Clean Step`:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦在“准备”阶段连接了数据，点击`+`图标，然后选择`Clean Step`：
- en: '![Figure 3.21: Adding a clean step'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.21：添加清理步骤'
- en: '](img/B16342_03_21.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_21.jpg)'
- en: 'Figure 3.21: Adding a clean step'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.21：添加清理步骤
- en: 'Click on the clean step to open up the details, as follows:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击清理步骤以打开详细信息，如下所示：
- en: '![Figure 3.22: Data profile for Orders_South data source'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.22：Orders_South数据源的数据概览'
- en: '](img/B16342_03_22.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_22.jpg)'
- en: 'Figure 3.22: Data profile for Orders_South data source'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.22：Orders_South数据源的数据概览
- en: 'Hover over the `Product ID` column to see the unique values it contains. You
    also have the option to change the data type, and sort, search, and perform a
    cleaning operation on it. Additionally, you also get a composition of the data
    using a histogram, as shown in the following screenshot:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将鼠标悬停在`Product ID`列上，查看它包含的唯一值。您还可以选择更改数据类型，并对它进行排序、搜索和清理操作。此外，您还可以通过以下截图查看数据的组成：
- en: '![Figure 3.23: Observing the frequency of the values in the Product ID column'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.23：观察Product ID列中值的频率'
- en: '](img/B16342_03_23.jpg)'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_23.jpg)'
- en: 'Figure 3.23: Observing the frequency of the values in the Product ID column'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.23：观察Product ID列中值的频率
- en: Select any value. Note that all associated rows are now highlighted. For example,
    if you select the state of Florida, you will see how the data is connected across
    the other columns. You will also observe that its profit trend is on the lower
    side, which indicates Florida is a low-selling state.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择任何值。请注意，所有相关的行现在都被突出显示。例如，如果您选择佛罗里达州，您将看到数据如何与其他列连接。您还会观察到其利润趋势处于较低水平，这表明佛罗里达是一个销售量较低的状态。
- en: '![Figure 3.24: Associations across multiple columns in the data profile'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.24：数据概览中多列之间的关联'
- en: '](img/B16342_03_24.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_24.jpg)'
- en: 'Figure 3.24: Associations across multiple columns in the data profile'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.24：数据概览中多列之间的关联
- en: Using data profiling like this, you can quickly see trends in data using the
    data distributions, which allows us to quickly spot and remove anomalies such
    as negative quantities sold.. These options will be covered in detail in the next
    section.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这种数据概览，您可以通过数据分布快速查看数据趋势，这使我们能够快速发现并删除异常，如负销售数量。这些选项将在下一节中详细介绍。
- en: Data Preparation Using Clean, Groups, and Split
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用清理、分组和拆分进行数据准备
- en: Cleaning is a very important part of data preparation, because having the right
    data leads to proper and efficient data analysis.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 清洗是数据准备的一个重要部分，因为拥有正确的数据可以导致正确和高效的数据分析。
- en: For example, imagine the sales amount for an order in a dataset is blank, but
    an order is processed anyway. This cannot be right, and requires some action.
    The order in question should either not be included, or the sales amount should
    be replaced with an average.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，想象一下数据集中一个订单的销售金额为空白，但订单仍然被处理。这是不正确的，需要采取一些行动。相关的订单应该不被包括，或者销售金额应该被替换为平均值。
- en: Another example would be the same customer having multiple names, or more than
    one customer ID. You may need to combine the names into one to correctly analyze
    information. All such tasks can be done using data cleaning. Prep provides a variety
    of options to clean data. In this section, you will learn about them.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个例子是同一个客户有多个名字，或者多个客户ID。您可能需要将名字合并为一个，以便正确分析信息。所有这些任务都可以使用数据清洗来完成。Prep提供了多种数据清洗选项。在本节中，您将了解它们。
- en: 'Refer to the `Orders_South` dataset workflow that was created earlier:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 参考之前创建的`Orders_South`数据集工作流程：
- en: '![Figure 3.25: Orders_South workflow'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.25：Orders_South工作流程'
- en: '](img/B16342_03_25.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_25.jpg)'
- en: 'Figure 3.25: Orders_South workflow'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.25：Orders_South工作流程
- en: 'Right-click on the `Clean 1` step to open the additional properties, as shown
    in the following screenshot:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 右键单击`Clean 1`步骤以打开附加属性，如下面的截图所示：
- en: '![Figure 3.26: Step customization option properties'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.26：步骤自定义选项属性'
- en: '](img/B16342_03_26.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_26.jpg)'
- en: 'Figure 3.26: Step customization option properties'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.26：步骤自定义选项属性
- en: 'Here, you can perform operations such as renaming, adding a description and
    editing the color of the step, as explained in the following points:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您可以执行诸如重命名、添加描述和编辑步骤颜色等操作，如下文所述：
- en: '`Rename`: Double-click or *Ctrl* + *click* (if you are using Mac) on the field
    name. This opens a text entry box. Here, you can add a name of your choice to
    this step.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`重命名`：双击字段名称或（如果您使用的是Mac）*Ctrl* + *点击*。这会打开一个文本输入框。在这里，您可以为此步骤添加一个您选择的名称。'
- en: '![Figure 3.27: Rename the clean step in the workflow'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.27：在工作流程中重命名清洁步骤'
- en: '](img/B16342_03_27.jpg)'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_27.jpg)'
- en: 'Figure 3.27: Rename the clean step in the workflow'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.27：在工作流程中重命名清洁步骤
- en: '`Add Description`: Descriptions clarify the purpose of a step. This is especially
    useful if the workflow is being used by multiple people. To add a description,
    right-click on the step and select the `Add Description` option.'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`添加描述`：描述可以阐明步骤的目的。如果工作流程被多个人使用，这尤其有用。要添加描述，右键单击步骤并选择`添加描述`选项。'
- en: '![Figure 3.28: Adding a description to the clean step in the workflow'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.28：在工作流程中为清洁步骤添加描述'
- en: '](img/B16342_03_28.jpg)'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_28.jpg)'
- en: 'Figure 3.28: Adding a description to the clean step in the workflow'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.28：在工作流程中为清洁步骤添加描述
- en: 'After you have added a description, the text appears under the step as follows:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在您添加描述后，文本将如下显示在步骤下方：
- en: '![Figure 3.29: Toggling the description for the clean step in the workflow'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.29：在工作流程中切换清洁步骤的描述'
- en: '](img/B16342_03_29.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_29.jpg)'
- en: 'Figure 3.29: Toggling the description for the clean step in the workflow'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.29：在工作流程中切换清洁步骤的描述
- en: 'You can choose to show or hide the description by clicking on the highlighted
    icon in the preceding figure. After you have added the description, you can also
    edit or delete it. To do that, right-click on the step again and you will see
    the `Edit Description` and `Delete Description` options (*Figure 3.30*):'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过单击前一个图中的突出图标来选择显示或隐藏描述。在您添加了描述之后，您还可以编辑或删除它。要这样做，再次右键单击步骤，您将看到`编辑描述`和`删除描述`选项（*图3.30*）：
- en: '![Figure 3.30: Description editing and deleting options for the clean step
    in the workflow'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.30：工作流程中清洁步骤的描述编辑和删除选项'
- en: '](img/B16342_03_30.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_30.jpg)'
- en: 'Figure 3.30: Description editing and deleting options for the clean step in
    the workflow'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.30：工作流程中清洁步骤的描述编辑和删除选项
- en: '`Edit Color` will change the color of the step. This is useful for visual identification
    in various steps of the flow.'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`编辑颜色`将改变步骤的颜色。这在流程的各个步骤中进行视觉识别时很有用。'
- en: You will now focus on the bottom pane. This is also known as the profile pane,
    which you saw earlier. Here, you will find the `Filter Values` and `Create Calculated
    Field` options. You will notice that Prep also gives recommendations related to
    the data. You can toggle between the three views using the view options.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您将关注底部面板。这同样也被称为配置文件面板，您之前已经见过。在这里，您将找到`过滤值`和`创建计算字段`选项。您会注意到 Prep 还提供了与数据相关的建议。您可以使用视图选项在三个视图之间切换。
- en: '![Figure 3.31: Recommendations for data cleaning in the workflow'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.31：工作流程中数据清洗的建议](img/B16342_03_35.jpg)'
- en: '](img/B16342_03_31.jpg)'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_31.jpg)'
- en: 'Figure 3.31: Recommendations for data cleaning in the workflow'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.31：工作流程中数据清洗的建议
- en: '`Change Data Type` changes the column''s type to another data type. The following
    images shows the different data types in Prep:'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`更改数据类型`将列的类型更改为另一种数据类型。以下图像显示了 Prep 中的不同数据类型：'
- en: '![Figure 3.32: Changing the column data type'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.32：更改列的数据类型'
- en: '](img/B16342_03_32.jpg)'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_32.jpg)'
- en: 'Figure 3.32: Changing the column data type'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.32：更改列的数据类型
- en: Currently, the column has the `Number (decimal)` data type selected. If required,
    you can select `String` to change the column's data type accordingly.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，列已选择`数字（小数）`数据类型。如有需要，您可以选择`字符串`以相应地更改列的数据类型。
- en: '`Number (decimal)` and `Number (whole)` are numeric data types. `Date & Time`
    is used for columns consisting of date or time values. A `String` data type is
    used for columns consisting of character values. You also have `Data Role`. This
    is applicable to string data types, and further defines the type of string values
    a column contains.'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '`数字（小数）`和`数字（整数）`是数值数据类型。`日期和时间`用于包含日期或时间值的列。`字符串`数据类型用于包含字符值的列。您还有`数据角色`。这适用于字符串数据类型，并进一步定义了列包含的字符串值的类型。'
- en: 'Often, you will need to change the column data type for correct representation.
    For example, if a postal code is saved as a numeric data type, then it is not
    the correct representation. Although postal codes are numbers, their true representation
    is in the form of a `String,` with a `Geographic` role. You will now learn how
    to change the data types based on the following examples in Prep. Refer to the
    recommendations provided:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，您需要更改列数据类型以正确表示。例如，如果邮政编码以数值数据类型保存，则这不是正确的表示。尽管邮政编码是数字，但它们的真实表示形式是`字符串`，具有`地理`角色。您现在将学习如何在
    Prep 中根据以下示例更改数据类型。请参考提供的建议：
- en: '![Figure 3.33: Changing the column data type using recommendations'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.33：使用建议更改列数据类型'
- en: '](img/B16342_03_33.jpg)'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_33.jpg)'
- en: 'Figure 3.33: Changing the column data type using recommendations'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.33：使用建议更改列数据类型
- en: 'As you can see, `State` is saved as a `String,` but no data role is assigned
    to it. To assign a data role to `State`, click on the `State` column, then change
    `Data Role` to `Geographic` – `State / Province`, as shown in the following screenshot:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，`状态`被保存为`字符串`，但没有分配数据角色。要将数据角色分配给`状态`，请单击`状态`列，然后将`数据角色`更改为`地理` – `州/省`，如下面的屏幕截图所示：
- en: '![Figure 3.34: Changing the column data role'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.34：更改列的数据角色'
- en: '](img/B16342_03_34.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_34.jpg)'
- en: 'Figure 3.34: Changing the column data role'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.34：更改列的数据角色
- en: You can do the same for other columns as well, that is, for `City`, `Postal
    Code`, and `Country`. All the changes that we perform will be tracked on the `Changes`
    tab.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以对其他列执行相同的操作，即对`城市`、`邮政编码`和`国家`。我们进行的所有更改都将记录在`更改`选项卡上。
- en: '![Figure 3.35: Applying the recommendations to the other columns'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.35：将建议应用于其他列'
- en: '](img/B16342_03_35.jpg)'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_37.jpg)'
- en: 'Figure 3.35: Applying the recommendations to the other columns'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.35：将建议应用于其他列
- en: 'At any time, if you want to reverse a change, you can select it by hovering
    over the change and selecting the `Remove` option, as follows:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何时候，如果您想撤销更改，可以通过悬停在更改上并选择`删除`选项来实现，如下所示：
- en: '![Figure 3.36: Reversing a change in the workflow'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.36：在工作流程中撤销更改'
- en: '](img/B16342_03_36.jpg)'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_36.jpg)'
- en: 'Figure 3.36: Reversing a change in the workflow'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.36：在工作流程中撤销更改
- en: 'This is how the result looks after changing the data type and roles of these columns:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 更改这些列的数据类型和角色后的结果如下：
- en: '![Figure 3.37: How the columns look before the changes'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.37：更改之前列的显示方式'
- en: '](img/B16342_03_37.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_37.jpg)'
- en: 'Figure 3.37: How the columns look before the changes'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.37：更改之前列的显示方式
- en: '![Figure 3.38: Columns after the changes are made'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.38：更改后列的显示方式'
- en: '](img/B16342_03_38.jpg)'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_38.jpg](img/B16342_03_38.jpg)'
- en: 'Figure 3.38: Columns after the changes are made'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.38：更改后的列
- en: These changes help to create the right type of visualization to draw useful
    insights – for example, if these were simple string types, you would not be able
    to create geographical visualizations such as maps. This would restrict your visualization
    abilities to draw certain insights, such as which cities or which postal codes
    order most products or how they compare with other cities.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 这些更改有助于创建正确类型的可视化，以提取有用的见解 - 例如，如果这些是简单的字符串类型，您将无法创建如地图之类的地理可视化。这将限制您的可视化能力，以绘制某些见解，例如哪些城市或哪些邮政编码订购了最多的产品，或者它们与其他城市如何比较。
- en: Additional Clean Steps
  id: totrans-205
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附加清洁步骤
- en: In the previous section, you learned how to add a clean step, and how to track
    changes using various options related to the clean step. You also saw how to change
    the data types and data roles. In this section, you will learn about some additional
    cleaning steps that are available at the individual column level. You will continue
    working in the same data profile pane.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，您学习了如何添加清洁步骤，以及如何使用与清洁步骤相关的各种选项来跟踪更改。您还看到了如何更改数据类型和数据角色。在本节中，您将了解一些在单个列级别可用的附加清洁步骤。您将继续在相同的数据配置文件窗格中工作。
- en: 'To access additional cleaning steps, hover over individual columns and click
    on the `…` icon to see the additional options, as follows:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问附加的清洁步骤，将鼠标悬停在单个列上，然后单击`…`图标以查看附加选项，如下所示：
- en: '![Figure 3.39: More cleaning options'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.39：更多清洁选项'
- en: '](img/B16342_03_39.jpg)'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_39.jpg](img/B16342_03_39.jpg)'
- en: 'Figure 3.39: More cleaning options'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.39：更多清洁选项
- en: 'Before proceeding, it is important to note that certain columns might have
    some unavailable options due to the different data types. For example, for `Country`,
    `View State – Summary` is disabled. However, it is available for the `Profit`
    column, as the following screenshot shows:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，重要的是要注意，由于数据类型的不同，某些列可能有一些不可用的选项。例如，对于`国家`，`视图状态 - 摘要`被禁用。然而，对于`利润`列，它可用，如下面的截图所示：
- en: '![Figure 3.40: Available options based on column data type'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.40：基于列数据类型的可用选项'
- en: '](img/B16342_03_40.jpg)'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_40.jpg](img/B16342_03_40.jpg)'
- en: 'Figure 3.40: Available options based on column data type'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.40：基于列数据类型的可用选项
- en: With that in mind, it's time to learn more about the additional options you
    can use to clean your data.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到这一点，现在是时候学习更多关于您可以用来清洁数据的附加选项了。
- en: Cleaning Steps at the Column Level
  id: totrans-216
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 列级别的清洁步骤
- en: In this section, you will learn about adding the filter and calculation options
    on the input data source. You will continue from where you left off, after changing
    the data roles.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您将学习如何在输入数据源上添加筛选和计算选项。您将继续从更改数据角色后留下的地方开始。
- en: 'Filter: The filter option allows you to select a subset of the data from the
    dataset. This option limits the data being pulled into the workflow. Quite often,
    it is useful to limit your analysis to specific subsets of the data to analyze
    it further. We can achieve this using the filter options. For example, you might
    wish to identify the `State` with the highest orders. This can be easily done
    by sorting the `State` column as follows:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 筛选：筛选选项允许您从数据集中选择数据子集。此选项限制了被拉入工作流程的数据。通常，将分析限制在数据的特定子集上以进一步分析是有用的。我们可以使用筛选选项来实现这一点。例如，您可能希望识别订单量最高的`州`。这可以通过以下方式轻松完成对`州`列的排序：
- en: '![Figure 3.41: Sorting the State column'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.41：对州列进行排序'
- en: '](img/B16342_03_41.jpg)'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_41.jpg](img/B16342_03_41.jpg)'
- en: 'Figure 3.41: Sorting the State column'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.41：对州列进行排序
- en: 'Exercise 3.04: Applying a Filter in a Clean Step'
  id: totrans-222
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 3.04：在清洁步骤中应用筛选
- en: In this exercise, you will learn how to apply a filter in the clean step. You
    can see in *Figure 3.41* that Florida has the highest number of orders. You can
    now filter the data to show only the orders for `Florida`.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将学习如何在清洁步骤中应用筛选。您可以在*图 3.41*中看到，佛罗里达州有最多的订单。现在您可以筛选数据，只显示`佛罗里达州`的订单。
- en: 'Follow these steps to complete this exercise:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤完成此练习：
- en: Click on `…` and select `Filter` – `Selected Values`.
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击`…`并选择`筛选` - `选择值`。
- en: '![Figure 3.42: Different filter types'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.42：不同的筛选类型'
- en: '](img/B16342_03_42.jpg)'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_42.jpg](img/B16342_03_42.jpg)'
- en: 'Figure 3.42: Different filter types'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.42：不同的筛选类型
- en: 'Select `Florida` from the list and click on `Done` to filter the data:'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从列表中选择`佛罗里达州`并单击`完成`以筛选数据：
- en: '![Figure 3.43: Selected Values filter properties'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.43：选择值筛选属性'
- en: '](img/B16342_03_43.jpg)'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_43.jpg](img/B16342_03_43.jpg)'
- en: 'Figure 3.43: Selected Values filter properties'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.43：选择值过滤器属性
- en: 'There are also other ways to filter the data using `Calculation...`, `Null
    Values`, and `Wildcard Match`:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 使用“计算...”、“空值”和“通配符匹配”也可以有其他方法来过滤数据：
- en: '![Figure 3.44: More ways to filter the data'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.44：更多过滤数据的方法'
- en: '](img/B16342_03_44.jpg)'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_44.jpg)'
- en: 'Figure 3.44: More ways to filter the data'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.44：更多过滤数据的方法
- en: '`Null Values` filters the nulls in the data, while `Wildcard Match` filters
    based on a keyword.'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “空值”过滤器过滤数据中的空值，而“通配符匹配”基于关键字进行过滤。
- en: '![Figure 3.45: Calculation filter properties'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.45：计算过滤器属性'
- en: '](img/B16342_03_45.jpg)'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_45.jpg)'
- en: 'Figure 3.45: Calculation filter properties'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.45：计算过滤器属性
- en: As the name suggests, the `Calculation…` filter filters the data based on certain
    calculation conditions.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 如其名称所示，“计算...”过滤器根据某些计算条件过滤数据。
- en: 'Now, create a calculation to check which month had the highest orders. To do
    that, click on the `…` icon on the `Order Date` column, then find `Create Calculated
    Field` and `Custom Calculation`:'
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，创建一个计算来检查哪个月份订单量最高。为此，单击“订单日期”列上的`…`图标，然后找到“创建计算字段”和“自定义计算”：
- en: '![Figure 3.46: Creating a calculation in the workflow'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.46：在工作流程中创建计算'
- en: '](img/B16342_03_46.jpg)'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_46.jpg)'
- en: 'Figure 3.46: Creating a calculation in the workflow'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.46：在工作流程中创建计算
- en: 'This will open the calculation editor. Type the following expression in the
    editor and rename the calculation `Order_Date_Month`:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将打开计算编辑器。在编辑器中输入以下表达式，并将计算重命名为`Order_Date_Month`：
- en: '[PRE2]'
  id: totrans-247
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![Figure 3.47: Calculation editor properties'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.47：计算编辑器属性'
- en: '](img/B16342_03_47.jpg)'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_47.jpg)'
- en: 'Figure 3.47: Calculation editor properties'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.47：计算编辑器属性
- en: 'Sort the months and observe that the highest sales are in November, followed
    by June:'
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对月份进行排序，观察最高销售额在十一月，其次是六月：
- en: '![Figure 3.48: New column added using calculations'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.48：使用计算添加的新列'
- en: '](img/B16342_03_48.jpg)'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_48.jpg)'
- en: 'Figure 3.48: New column added using calculations'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.48：使用计算添加的新列
- en: Note
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Given timing and version variance, your calculation may result in a different
    month for highest sales. The step instruction to sort will be the same regardless.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 由于时间和版本差异，您的计算可能会导致最高销售额的月份不同。排序步骤的指令将保持不变。
- en: Based on the conditions you specify, you can create calculations in a similar
    manner for filters. You will learn about calculations in more detail later as
    you progress through the book.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您指定的条件，您可以以类似的方式为过滤器创建计算。您将在阅读本书的过程中详细了解计算。
- en: 'Exercise 3.05: Cleaning a Column in the Workflow'
  id: totrans-258
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 3.05：在工作流程中清理列
- en: In the previous section, you learned how to filter data using various conditions.
    You also learned how to add calculations to this data source. In this exercise,
    you will learn about the `Clean` option.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，您学习了如何使用各种条件过滤数据。您还学习了如何向此数据源添加计算。在本练习中，您将了解“清洁”选项。
- en: 'The `Clean` option provides string operations that can be used to clean the
    column. Examples include removing punctuation marks or junk characters, making
    the character uppercase or lowercase, removing numbers from the strings, and more.
    The following steps must be executed to clean a column:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: “清洁”选项提供了可以用于清理列的字符串操作。例如，包括移除标点符号或杂乱字符，将字符转换为大写或小写，从字符串中移除数字等。清理列必须执行以下步骤：
- en: Continue with the same workflow from the previous section. Observe the `Product
    Name` column. It contains a lot of junk characters, such as `#` and `'`. You can
    remove these characters, as they are not very useful for analysis.
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 继续使用上一节相同的流程。观察“产品名称”列。它包含许多杂乱字符，如`#`和`'`。您可以移除这些字符，因为它们对分析不太有用。
- en: '![Figure 3.49: Product Name preview with junk characters'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.49：带有杂乱字符的产品名称预览'
- en: '](img/B16342_03_49.jpg)'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_49.jpg)'
- en: 'Figure 3.49: Product Name preview with junk characters'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.49：带有杂乱字符的产品名称预览
- en: 'To access the `Clean` option, click on the `…` icon. The `Clean` option will
    provide a variety of functions to clean the data, as you can see in the next screenshot:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要访问“清洁”选项，请单击`…`图标。您将看到“清洁”选项提供各种用于清理数据的函数，如下一截图所示：
- en: '![Figure 3.50: Various clean methods'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.50：各种清洁方法'
- en: '](img/B16342_03_50.jpg)'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_50.jpg)'
- en: 'Figure 3.50: Various clean methods'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.50：各种清洁方法
- en: 'Now, use the `Remove Punctuation` option for `Product Name`, as follows:'
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，使用“产品名称”的“移除标点”选项，如下所示：
- en: '![Figure 3.51: Using the Remove Punctuation option to clean the Product Name
    column'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.51：使用移除标点符号选项清理产品名称列'
- en: '](img/B16342_03_51.jpg)'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16342_03_51.jpg)'
- en: 'Figure 3.51: Using the Remove Punctuation option to clean the Product Name
    column'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.51：使用“移除标点符号”选项清理产品名称列
- en: 'You will get a clean column without the junk characters:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 您将获得一个没有垃圾字符的干净列：
- en: '![Figure 3.52: Cleaned Product Name column'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.52：清理后的产品名称列'
- en: '](img/B16342_03_52.jpg)'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16342_03_52.jpg)'
- en: 'Figure 3.52: Cleaned Product Name column'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.52：清理后的产品名称列
- en: There are also a few other options, such as removing numbers or characters,
    changing the casing, and removing spaces in the values. These options are self-explanatory
    and can be used as and when the project requires.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 还有其他一些选项，例如删除数字或字符、更改大小写和删除值中的空格。这些选项是自我解释的，可以根据项目需求随时使用。
- en: Grouping Values
  id: totrans-278
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分组值
- en: To group values means to combine two or more values into a single combined value
    so that they are represented as one value or group. This is generally used when
    the data contains spelling errors that result in the same value appearing in different forms.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 将值分组意味着将两个或多个值组合成一个单一的组合值，以便它们作为一个值或组来表示。这通常用于数据中包含拼写错误，导致相同的值以不同的形式出现的情况。
- en: Think back to our customer with multiple names being represented by different
    customer IDs. This data issue can be resolved using group values. We can combine
    the multiple customer names into one customer using group values.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 想想我们那位具有多个名称但被不同客户ID表示的客户。这个问题可以使用分组值来解决。我们可以使用分组值将多个客户名称合并为一个客户。
- en: 'Like the `Clean` option, the `Group Values` option can be accessed by hovering
    over a column and clicking the `…` icon, as follows:'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 与“清理”选项类似，“分组值”选项可以通过将鼠标悬停在列上并单击“…”图标来访问，如下所示：
- en: '![Figure 3.53: Various Group Values methods'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.53：各种分组值方法'
- en: '](img/B16342_03_53.jpg)'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16342_03_53.jpg)'
- en: 'Figure 3.53: Various Group Values methods'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.53：各种分组值方法
- en: You will learn how to use this option in a workflow in the next exercise.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 您将在下一个练习中学习如何在工作流程中使用此选项。
- en: 'Exercise 3.06: Grouping Values into a Group'
  id: totrans-286
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习3.06：将值分组到组中
- en: 'In this exercise, you will group the `Sub-Category` values `Chairs` and `Tables`
    into a group using the `Manual Selection` option. Follow these steps to complete
    this exercise:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将使用“手动选择”选项将“子类别”值“椅子”和“桌子”组合成一个组。按照以下步骤完成此练习：
- en: 'Click the dropdown on the `Sub-Category` column, then select `Group Values`
    and `Manual Selection`:'
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“子类别”列的下拉菜单，然后选择“分组值”和“手动选择”：
- en: '![Figure 3.54: Group values using the Manual Selection method'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.54：使用手动选择方法分组值'
- en: '](img/B16342_03_54.jpg)'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16342_03_54.jpg)'
- en: 'Figure 3.54: Group values using the Manual Selection method'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.54：使用手动选择方法分组值
- en: Towards the left of the window, select the `Chairs` value, which should add
    a member group, also called `Chairs`, to the right. By default, the group will
    have the same name as the first member, which in this case is `Chairs`.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在窗口的左侧，选择“椅子”值，这将向右侧添加一个成员组，也称为“椅子”。默认情况下，组将具有与第一个成员相同的名称，在这种情况下是“椅子”。
- en: '![Figure 3.55: Adding members to a group'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.55：向组中添加成员'
- en: '](img/B16342_03_55.jpg)'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16342_03_55.jpg)'
- en: 'Figure 3.55: Adding members to a group'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.55：向组中添加成员
- en: 'To rename the group to `Office Furniture`, double-click on `Chairs` and type
    in the new name, as shown in the following figure:'
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要将组重命名为“办公家具”，请双击“椅子”并输入新名称，如图下所示：
- en: '![Figure 3.56: Renaming a group'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.56：重命名一个组'
- en: '](img/B16342_03_56.jpg)'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16342_03_56.jpg)'
- en: 'Figure 3.56: Renaming a group'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.56：重命名一个组
- en: 'Now the new group name should be visible as follows:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 现在新的组名应该如下所示：
- en: '![Figure 3.57: Updated group name'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.57：更新后的组名'
- en: '](img/B16342_03_57.jpg)'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16342_03_57.jpg)'
- en: 'Figure 3.57: Updated group name'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.57：更新后的组名
- en: 'Now you can add more members to the group using the right column. Add `Tables`
    to this group by selecting that value:'
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您可以使用右侧列添加更多成员到组中。通过选择该值将“桌子”添加到这个组：
- en: '![Figure 3.58: Adding additional members to the group'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.58：向组中添加额外成员'
- en: '](img/B16342_03_58.jpg)'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片](img/B16342_03_58.jpg)'
- en: 'Figure 3.58: Adding additional members to the group'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.58：向组中添加额外成员
- en: You can also add values that are not currently in the data but will be added
    in the future. To do that, click on the `+` icon and add the value in the textbox.
    You will see a red dot next to the value, indicating that it does not currently
    exist in the data. Note that this value should match the future expected value,
    or else it might not get automatically added to the group.
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你还可以添加目前不在数据中但将来会添加的值。为此，请点击`+`图标并在文本框中添加值。你将在值旁边看到一个红色圆点，表示该值目前不存在于数据中。请注意，此值应与未来预期的值匹配，否则它可能不会自动添加到组中。
- en: '![Figure 3.59: Adding future values to the group'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.59：将未来值添加到组中'
- en: '](img/B16342_03_59.jpg)'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_59.jpg](img/B16342_03_59.jpg)'
- en: 'Figure 3.59: Adding future values to the group'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.59：将未来值添加到组中
- en: '![Figure 3.60: Adding future available members to the group'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.60：将未来可用的成员添加到组中'
- en: '](img/B16342_03_60.jpg)'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_60.jpg](img/B16342_03_60.jpg)'
- en: 'Figure 3.60: Adding future available members to the group'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.60：将未来可用的成员添加到组中
- en: Next, click on `Done` to add the group. The new group will be added, indicated
    by a paperclip icon (*Figure 3.61*).
  id: totrans-315
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，点击`完成`以添加组。新组将被添加，由一个回形针图标表示（*图 3.61*）。
- en: '![Figure 3.61: The grouped value replaces individual values in the Sub-Category
    column'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.61：分组值替换子类别列中的单个值'
- en: '](img/B16342_03_61.jpg)'
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_61.jpg](img/B16342_03_61.jpg)'
- en: 'Figure 3.61: The grouped value replaces individual values in the Sub-Category
    column'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.61：分组值替换子类别列中的单个值
- en: This is an example of manual grouping. Another way to group data, is by using
    built-in algorithms that enable us to do this automatically using pronunciation,
    common characters, or spelling. A common example is the same phrase written in
    different ways, such as "Tableau Prep" and "Prep Tableau." These essentially mean
    the same thing but are written differently. Prep provides built-in algorithms
    that can identify such values and group them automatically.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个手动分组的例子。另一种分组数据的方法是使用内置算法，这些算法使我们能够自动使用发音、常用字符或拼写来完成这项工作。一个常见的例子是将相同的短语以不同的方式书写，例如“Tableau
    Prep”和“Prep Tableau”。这些本质上意味着相同的事情，但书写方式不同。Prep 提供了内置算法，可以识别此类值并将它们自动分组。
- en: Splitting Values
  id: totrans-320
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 拆分值
- en: This option allows us to split column values into multiple sub-values. This
    can be useful in scenarios where multiple values are stored as a single value
    based on a delimiter such as , or |. Sometimes, to optimize data storage, multiple
    values may be stored as a combined column.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 此选项允许我们将列值拆分为多个子值。在基于分隔符（如逗号或竖线）将多个值存储为单个值的场景中，这可能很有用。有时，为了优化数据存储，多个值可能被存储为组合列。
- en: 'Consider the next example of `Product ID`, which contains a combination of
    `Category`, `Sub-Category`, and the actual `Product ID` fields:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑下一个例子，`产品 ID`，它包含`类别`、`子类别`和实际`产品 ID`字段组合：
- en: '![Figure 3.62: Combined column value example'
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.62：组合列值示例'
- en: '](img/B16342_03_62.jpg)'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_62.jpg](img/B16342_03_62.jpg)'
- en: 'Figure 3.62: Combined column value example'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.62：组合列值示例
- en: 'Exercise 3.07: Splitting Columns'
  id: totrans-326
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 3.07：拆分列
- en: 'Imagine that due to storage size restrictions, you maintain a highly optimized
    database and make sure it does not consist of duplicate data. You only have the
    `Product ID` column available. , To obtain the `Category` and `Sub-Category` columns,
    you might split the `Product ID`column using the `Split Values` option. The following
    steps will help you complete this exercise:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 假设由于存储大小限制，你维护了一个高度优化的数据库，并确保它不包含重复数据。你只有`产品 ID`列可用。要获取`类别`和`子类别`列，你可能需要使用`拆分值`选项来拆分`产品
    ID`列。以下步骤将帮助你完成这个练习：
- en: 'The `Split Values` option can be accessed by clicking on the `…` icon and selecting
    `Split Values`. There are two options available: `Automatic Split` and `Custom
    Split`.'
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以通过点击`…`图标并选择`拆分值`来访问`拆分值`选项。有两个选项可用：`自动拆分`和`自定义拆分`。
- en: '![Figure 3.63: Various Split Values methods'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.63：各种拆分值方法'
- en: '](img/B16342_03_63.jpg)'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_63.jpg](img/B16342_03_63.jpg)'
- en: 'Figure 3.63: Various Split Values methods'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.63：各种拆分值方法
- en: '`Automatic Split` can be applied when you need to split the entire column into
    multiple parts using a delimiter. If you require `Product ID` to be split into
    three parts, you can use this option. Select `Automatic Split` on this column
    and view the results:'
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当你需要使用分隔符将整个列拆分为多个部分时，可以应用`自动拆分`。如果你需要将`产品 ID`拆分为三个部分，可以使用此选项。选择此列上的`自动拆分`并查看结果：
- en: '![Figure 3.64: Applying automatic split on the Product ID column'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.64：在产品 ID 列上应用自动拆分'
- en: '](img/B16342_03_64.jpg)'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_64.jpg](img/B16342_03_64.jpg)'
- en: 'Figure 3.64: Applying automatic split on the Product ID column'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.64：在产品ID列应用自动拆分
- en: 'You can see in the next screenshot that `Product ID` is now split into three
    parts using the hyphen (`-`) separator:'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在下一张截图看到，`产品ID`现在使用连字符（`-`）分隔符被分为三个部分：
- en: '![Figure 3.65: Result of an automatic split on the Product ID column'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.65：产品ID列自动拆分的结果'
- en: '](img/B16342_03_65.jpg)'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_65.jpg)'
- en: 'Figure 3.65: Result of an automatic split on the Product ID column'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.65：产品ID列自动拆分的结果
- en: 'Now, suppose you want to have another column consisting of just `Product Category`.
    This is the first part of the `Product ID` column. Apply the `Custom Split` on
    `Product ID` to fetch the first part, which is the category. Use *Ctrl* + *Z*
    if you are using a PC (it''s *Cmmd* + Z on a Mac) to revert to the original column
    and then apply `Custom Split`, as follows:'
  id: totrans-340
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，假设您想有一个只包含`产品类别`的另一个列。这是`产品ID`列的第一部分。对`产品ID`应用`自定义拆分`以获取第一部分，即类别。如果您使用PC，请使用*Ctrl*
    + *Z*（在Mac上为*Cmd* + Z）恢复到原始列，然后应用`自定义拆分`，如下所示：
- en: '![Figure 3.66: Applying Custom Split on the Product ID column'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.66：在产品ID列应用自定义拆分'
- en: '](img/B16342_03_66.jpg)'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_66.jpg)'
- en: 'Figure 3.66: Applying Custom Split on the Product ID column'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.66：在产品ID列应用自定义拆分
- en: 'Enter the separator (`-`) along with the split number required, as follows:'
  id: totrans-344
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入分隔符（`-`）以及所需的拆分数，如下所示：
- en: '![Figure 3.67: Custom Split properties'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.67：自定义拆分属性'
- en: '](img/B16342_03_67.jpg)'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_67.jpg)'
- en: 'Figure 3.67: Custom Split properties'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.67：自定义拆分属性
- en: 'You will now see a new column that consists of the product category, as follows:'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在将看到一个新列，它包含产品类别，如下所示：
- en: '![Figure 3.66: Applying Custom Split on the Product ID column'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.66：在产品ID列应用自定义拆分'
- en: '](img/B16342_03_68.jpg)'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_68.jpg)'
- en: 'Figure 3.68: Custom split results on the Product ID column'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.68：产品ID列的自定义拆分结果
- en: This concludes the discussion on all the clean operations that you can perform
    on your data. You learned the various ways to clean the data using group, clean,
    and split. Next, you will learn about data transformation steps such as aggregation,
    pivot, join, and union.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 这就结束了关于您可以在数据上执行的所有清洁操作的讨论。您学习了使用分组、清洁和拆分来清洁数据的各种方法。接下来，您将学习关于数据转换步骤，如聚合、交叉、连接和并集。
- en: Aggregation, Pivot, Join, and Union
  id: totrans-353
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 聚合、交叉、连接和并集
- en: You will often encounter certain scenarios where the data might need to be adjusted
    to suit the visualization requirements. For example, if you are analyzing the
    monthly sales for your company, you don't need the data for every single day.
    In this case, you need to aggregate data to the monthly level. This also reduces
    the amount of data being used for analysis.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 您经常会遇到某些场景，其中数据可能需要调整以适应可视化需求。例如，如果您正在分析公司的月度销售额，您不需要每一天的数据。在这种情况下，您需要将数据聚合到月度级别。这也减少了用于分析的数据量。
- en: Another example, is when the data for all the past years is stored as standalone
    files, and the current year is stored as a separate file. All the files have a
    similar column structure. If you were to analyze all the data together, you may
    need to perform a union transformation to combine all these separate files into
    a single file.
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个例子是，当过去几年的数据存储为独立的文件，而当前年份存储为单独的文件时。所有文件具有类似的列结构。如果您要一起分析所有数据，您可能需要执行并集转换来将这些单独的文件合并为一个文件。
- en: Such data transformations can be done in Prep. You will now learn about how
    to do them.
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 这种数据转换可以在Prep中完成。您现在将学习如何进行这些操作。
- en: Aggregations
  id: totrans-357
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 聚合
- en: Aggregations help to change the granularity of data. Granularity, in this context,
    means the level at which the data is available. For example, consider two files.
    One file consists of customer information such as customer ID, customer name,
    address, and joining date. The other table consists of transactional information
    that the customer has made, such as the number of orders of a particular product.
    The exercise explores this option in detail.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 聚合有助于改变数据的粒度。在这个上下文中，粒度意味着数据可用的级别。例如，考虑两个文件。一个文件包含客户信息，如客户ID、客户姓名、地址和加入日期。另一个表包含客户所做的交易信息，如特定产品的订单数量。练习将详细探讨这个选项。
- en: 'Exercise 3.08: Identifying High-Value Customers Based on Purchases'
  id: totrans-359
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习3.08：根据购买情况识别高价值客户
- en: 'Suppose your task is to identify high-value customers based on their purchases.
    To do that, you need to first roll up the transactions file to sum the value of
    all purchases for each customer ID and then join it with the customer information
    table. In this exercise, you will connect with the `Orders_South` data and aggregate
    the `Profit` values in the `Category` and `Ship Mode` columns:'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你的任务是根据客户的购买情况识别高价值客户。为此，你需要首先将交易文件汇总以计算每个客户 ID 的所有购买价值，然后将其与客户信息表连接。在这个练习中，你将连接到`Orders_South`数据，并在`类别`和`船运方式`列中聚合`利润`值：
- en: 'You will continue with the same workflow. Click on the `+` icon and select `Aggregate`:'
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将继续使用相同的流程。点击`+`图标并选择`聚合`：
- en: '![Figure 3.69: Adding an Aggregate step to the workflow'
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.69：将聚合步骤添加到工作流程中'
- en: '](img/B16342_03_69.jpg)'
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_69.jpg)'
- en: 'Figure 3.69: Adding an Aggregate step to the workflow'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.69：将聚合步骤添加到工作流程中
- en: 'This will add an `Aggregate` step to the workflow. Click on it, and select
    the grouped fields and the aggregated fields. You will see the following on your screen:'
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将在工作流程中添加一个`聚合`步骤。点击它，并选择分组字段和聚合字段。你将在屏幕上看到以下内容：
- en: '![Figure 3.70: The Aggregate step added to the workflow'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.70：已添加到工作流程中的聚合步骤'
- en: '](img/B16342_03_70.jpg)'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_70.jpg)'
- en: 'Figure 3.70: The Aggregate step added to the workflow'
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.70：已添加到工作流程中的聚合步骤
- en: The dimensions or text columns indicated by the `Abc` icon or date columns will
    act as the `Grouped Fields`, while the measures or numerical columns indicated
    by `#` will be the `Aggregated Fields`. You can only group text or date columns
    with numerical columns to form an aggregation.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 由`Abc`图标或日期列表示的维度或文本列将作为`分组字段`，而由`#`表示的度量或数值列将作为`聚合字段`。你只能将文本或日期列与数值列分组以形成聚合。
- en: '![Figure 3.71: Aggregate step properties'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.71：聚合步骤属性'
- en: '](img/B16342_03_71.jpg)'
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_71.jpg)'
- en: 'Figure 3.71: Aggregate step properties'
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.71：聚合步骤属性
- en: 'Change the aggregation type by clicking on the field as follows:'
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过以下方式单击字段来更改聚合类型：
- en: '![Figure 3.72: Various aggregation methods'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.72：各种聚合方法'
- en: '](img/B16342_03_72.jpg)'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_72.jpg)'
- en: 'Figure 3.72: Various aggregation methods'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.72：各种聚合方法
- en: 'Aggregate the data based on sales, grouped per `Category`. Since `Category`
    is a dimension, it will be under `Grouped Fields,` and `Profit` will be under
    the aggregated fields (since it is a measure). Double-click on `Category` to add
    it under `Grouped Fields` and, similarly, double-click on `Profit` to add it under
    `Aggregated Fields`:'
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 基于销售数据聚合，按`类别`分组。由于`类别`是一个维度，它将在`分组字段`下，而`利润`将在聚合字段下（因为它是一个度量）。双击`类别`将其添加到`分组字段`下，同样，双击`利润`将其添加到`聚合字段`下：
- en: '![Figure 3.73: Adding grouped and aggregated fields'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.73：添加分组和聚合字段'
- en: '](img/B16342_03_73.jpg)'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_73.jpg)'
- en: 'Figure 3.73: Adding grouped and aggregated fields'
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.73：添加分组和聚合字段
- en: 'Now the data is grouped by the various `Category` values and `Profit`. To add
    another dimension to the group, you can double-click and add it to the grouped
    field section. Now, add `Ship Mode` to `Grouped Fields`:'
  id: totrans-381
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在数据已按各种`类别`值和`利润`分组。要向组添加另一个维度，你可以双击并添加到分组字段部分。现在，将`船运方式`添加到`分组字段`：
- en: '![Figure 3.74: Multiple grouped fields aggregation results'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.74：多个分组字段聚合结果'
- en: '](img/B16342_03_74.jpg)'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_74.jpg)'
- en: 'Figure 3.74: Multiple grouped fields aggregation results'
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.74：多个分组字段聚合结果
- en: 'In addition to cleaning, the clean step also allows you to preview our data.
    Now add a clean step to this aggregation and preview the data. Toggle to display
    the data grid using the option highlighted in this screenshot:![Figure 3.75: Full
    data preview based on the results of the aggregation step'
  id: totrans-385
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 除了清理，清理步骤还允许你预览我们的数据。现在向这个聚合添加一个清理步骤并预览数据。切换到使用此截图突出显示的选项显示数据网格：![图 3.75：基于聚合步骤结果的完整数据预览
- en: '](img/B16342_03_75.jpg)'
  id: totrans-386
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16342_03_75.jpg)'
- en: 'Figure 3.75: Full data preview based on the results of the aggregation step'
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.75：基于聚合步骤结果的完整数据预览
- en: You have aggregated the data at the `Category` and `Ship Mode` level based on
    the `Profit` values. In this section, you learned how to aggregate data based
    on the different levels of granularity. Next, you will learn how to pivot data.
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经根据`利润`值在`类别`和`船运方式`级别聚合了数据。在本节中，你学习了如何根据不同粒度级别聚合数据。接下来，你将学习如何旋转数据。
- en: Pivoting Data
  id: totrans-389
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据旋转
- en: Sometimes, data is stored in a wide manner as opposed to the tall manner required
    in Tableau. A wider manner indicates that the data is stored in a horizontal format.
    An example is the item category and the units sold for various years in Figure
    3.76\. Here, the data for a category is stored in multiple year columns, indicating
    a wide format.
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，数据以宽格式存储，而不是 Tableau 所需的长格式。更宽的格式表示数据以水平格式存储。图 3.76 中的项目类别和不同年份的已售单位就是一个例子。在这里，一个类别的数据存储在多个年份列中，表示宽格式。
- en: '![Figure 3.76: Wide format'
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.76：宽格式](#)'
- en: '](img/B16342_03_76.jpg)'
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: '![#](img/B16342_03_76.jpg)'
- en: 'Figure 3.76: Wide format'
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.76：宽格式
- en: 'Data in tall format indicates a vertical spread. This means that the different
    values for an item category would be stored in the same `Category` column. As
    indicated in Figure 3.77, all the years are in a single `Year` column and all
    the units sold values are in a `Units Sold` column:'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 长格式中的数据表示垂直分布。这意味着一个项目类别的不同值将存储在同一个 `Category` 列中。如图 3.77 所示，所有年份都在一个 `Year`
    列中，所有已售单位值都在一个 `Units Sold` 列中：
- en: '![Figure 3.77: Tall format'
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.77：长格式](#)'
- en: '](img/B16342_03_77.jpg)'
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: '![#](img/B16342_03_77.jpg)'
- en: 'Figure 3.77: Tall format'
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.77：长格式
- en: To use data for visualization, Tableau needs the tall format. In this case,
    you might have to pivot the data to be used in Tableau. You can do that using
    the pivot step available in Prep, as the next exercise shows.
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用数据用于可视化，Tableau 需要长格式。在这种情况下，您可能需要使用 Prep 中的数据透视步骤来转换数据以用于 Tableau。下一个练习将展示如何做到这一点。
- en: 'Exercise 3.09: Using a Pivot for Data'
  id: totrans-399
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 3.09：使用数据透视
- en: 'In this exercise, you will connect to `ConsumerPriceIndices_E_All_Data.csv`
    and add a pivot on this data. Follow these steps to complete this exercise:'
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将连接到 `ConsumerPriceIndices_E_All_Data.csv` 并在此数据上添加一个数据透视。按照以下步骤完成此练习：
- en: Note
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Before proceeding with the exercise, make sure to download the CSV file from
    the GitHub repository for this chapter. You can find the data file at [https://packt.link/LUsoU](https://packt.link/LUsoU).
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行练习之前，请确保从本章的 GitHub 仓库下载 CSV 文件。您可以在 [https://packt.link/LUsoU](https://packt.link/LUsoU)
    找到数据文件。
- en: 'Connect to the `ConsumerPriceIndices_E_All_Data.csv` data source:'
  id: totrans-403
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接到 `ConsumerPriceIndices_E_All_Data.csv` 数据源：
- en: '![Figure 3.78: Data in CustomerPriceIndices_E_All_Data'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.78：CustomerPriceIndices_E_All_Data 中的数据](#)'
- en: '](img/B16342_03_78.jpg)'
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: '![#](img/B16342_03_78.jpg)'
- en: 'Figure 3.78: Data in CustomerPriceIndices_E_All_Data'
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.78：CustomerPriceIndices_E_All_Data 中的数据
- en: As you can see, the country data is stored for the different years in different
    columns (column `H` to column `X`). This is an example of wide format. To use
    this data for visualization and analysis, you need to convert it into tall format.
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，国家数据按不同的年份存储在不同的列中（从列 `H` 到列 `X`）。这是一个宽格式的例子。为了将此数据用于可视化分析，您需要将其转换为长格式。
- en: Click on `Add Connection` – `Text File`. Navigate to the `WorldIndicators Files`
    folder, where you can find this file. Click on `Open` to add it to the flow.
  id: totrans-408
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 `添加连接` – `文本文件`。导航到 `WorldIndicators Files` 文件夹，您可以在此找到该文件。点击 `打开` 将其添加到流程中。
- en: This will add the data to the flow. You can preview the data by adding a clean
    step. Once it has been added, click on `Clean 4` to open the data grid.
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 这将把数据添加到流程中。您可以通过添加一个清理步骤来预览数据。一旦添加，点击 `Clean 4` 打开数据网格。
- en: '![Figure 3.79: Adding a clean step'
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.79：添加清理步骤](#)'
- en: '](img/B16342_03_79.jpg)'
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: '![#](img/B16342_03_79.jpg)'
- en: 'Figure 3.79: Adding a clean step'
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.79：添加清理步骤
- en: 'You will observe that the various year values are stored in different columns
    rather than different rows, as you saw in the Excel data preview in *Figure 3.78*.
    Also, the null values are the blank records where there is no data present:'
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: 您将观察到各种年份值存储在不同的列中，而不是不同的行中，正如您在图 3.78 的 Excel 数据预览中所看到的。此外，空值是没有数据存在的空白记录：
- en: '![Figure 3.80: Data preview for year values stored horizontally'
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.80：水平存储的年值数据预览](#)'
- en: '](img/B16342_03_80.jpg)'
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: '![#](img/B16342_03_80.jpg)'
- en: 'Figure 3.80: Data preview for year values stored horizontally'
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.80：水平存储的年值数据预览
- en: 'Make sure it is similar to the `Months` column values (that is, in a single
    column):'
  id: totrans-417
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保它与 `Months` 列的值相似（即在一个单独的列中）：
- en: '![Figure 3.81: Tall format representation by the Months column'
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.81：通过月份列表示的长格式](#)'
- en: '](img/B16342_03_81.jpg)'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: '![#](img/B16342_03_81.jpg)'
- en: 'Figure 3.81: Tall format representation by the Months column'
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.81：通过月份列表示的长格式
- en: 'Do that by clicking on `+` and adding a `Pivot` step:'
  id: totrans-421
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击 `+` 并添加一个 `Pivot` 步骤来完成：
- en: '![Figure 3.82: Pivot step properties'
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.82：数据透视步骤属性](#)'
- en: '](img/B16342_03_82.jpg)'
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: '![#](img/B16342_03_82.jpg)'
- en: 'Figure 3.82: Pivot step properties'
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.82：数据透视步骤属性
- en: 'Next, drag the fields that you want to pivot, that is, all the year fields.
    Do that by selecting all the year columns. Use *Ctrl* + click to multi-select
    and drag them to the `Pivoted Fields` area:'
  id: totrans-425
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，拖动您想要数据透视的字段，即所有年份字段。通过选择所有年份列来完成此操作。使用*Ctrl* + 点击进行多选并拖动它们到`Pivoted Fields`区域：
- en: '![Figure 3.83: Adding columns to pivot'
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.83：向数据透视添加列'
- en: '](img/B16342_03_83.jpg)'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_83.jpg)'
- en: 'Figure 3.83: Adding columns to pivot'
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.83：向数据透视添加列
- en: Rename these new columns. If you wanted to add one more pivoted field, you can
    do it by clicking on the `+` icon and adding another pivot to your data.
  id: totrans-429
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重命名这些新列。如果您想添加一个额外的数据透视字段，可以通过点击`+`图标并添加另一个数据透视到您的数据中来实现。
- en: '![Figure 3.84: Adding additional columns to the pivot table'
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.84：向数据透视表添加额外列'
- en: '](img/B16342_03_84.jpg)'
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_84.jpg)'
- en: 'Figure 3.84: Adding additional columns to the pivot table'
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.84：向数据透视表添加额外列
- en: 'Now, add a clean step to this pivot, and preview the data. Scroll down the
    data preview window and observe the different values:'
  id: totrans-433
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，向这个数据透视表添加一个清洁步骤，并预览数据。向下滚动数据预览窗口，观察不同的值：
- en: '![Figure 3.85: Data preview after completing the pivot transformation'
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.85：完成数据透视转换后的数据预览'
- en: '](img/B16342_03_85.jpg)'
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_85.jpg)'
- en: 'Figure 3.85: Data preview after completing the pivot transformation'
  id: totrans-436
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.85：完成数据透视转换后的数据预览
- en: You have pivoted data stored as years in various columns to years in a single
    column. Now you can compare the values for different years to understand the patterns
    – You will learn about this in further detail in the next chapters. Next, you
    will learn how to join and union the data.
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
  zh: 您已将存储为不同列中的年份数据透视为单个列中的年份。现在，您可以比较不同年份的值以了解模式 - 您将在下一章中详细了解这一点。接下来，您将学习如何连接和合并数据。
- en: Joining and Union of Data
  id: totrans-438
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据的连接和合并
- en: Joining and union of data is similar to that in Tableau Desktop, with some additional
    features that help to analyze the join results.
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: 数据的连接和合并与Tableau Desktop类似，有一些额外的功能可以帮助分析连接结果。
- en: 'Joining is a way to combine two or more tables into a single table based on
    certain common fields. The result of this combination contains more columns than
    the original table, hence it gets extended horizontally. Tableau Prep supports
    the following join types:'
  id: totrans-440
  prefs: []
  type: TYPE_NORMAL
  zh: 连接是将两个或多个表基于某些公共字段合并成单个表的一种方式。这种组合的结果比原始表包含更多的列，因此它在水平方向上扩展。Tableau Prep支持以下连接类型：
- en: '![Figure 3.86: Types of joins'
  id: totrans-441
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.86：连接类型'
- en: '](img/B16342_03_86.jpg)'
  id: totrans-442
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_86.jpg)'
- en: 'Figure 3.86: Types of joins'
  id: totrans-443
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.86：连接类型
- en: You will now take a closer look at joins with the next examples.
  id: totrans-444
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在将更仔细地查看以下示例中的连接。
- en: 'Exercise 3.10: Joining Two Data Sources'
  id: totrans-445
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习3.10：连接两个数据源
- en: 'In this exercise, you will join the `Orders_Central` table with the `Return_reason_new`
    table to analyze the order returns. Both the data sources are present in the `Superstore
    Files` folder:'
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将使用`Orders_Central`表与`Return_reason_new`表进行连接，以分析订单退货。这两个数据源都位于`Superstore
    Files`文件夹中：
- en: '![Figure 3.87: Input file locations'
  id: totrans-447
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.87：输入文件位置'
- en: '](img/B16342_03_87.jpg)'
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_87.jpg)'
- en: 'Figure 3.87: Input file locations'
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.87：输入文件位置
- en: 'Follow these steps to complete this exercise:'
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤完成此练习：
- en: Add the `Orders_Central.csv` data source using `Connect` – `Text File` and select
    this file. Repeat the same for the `Returns` data. Use `Connect` – `Microsoft
    Excel` and select the `return reasons_new` file.
  id: totrans-451
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`Connect` – `Text File`添加`Orders_Central.csv`数据源并选择此文件。对`Returns`数据重复相同的操作。使用`Connect`
    – `Microsoft Excel`选择`return reasons_new`文件。
- en: After adding clean steps for both data sources, you can observe that the `Order
    ID` column can be used as a common field to join these two data sources.
  id: totrans-452
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在为两个数据源都添加清洁步骤之后，您可以观察到`Order ID`列可以用作连接这两个数据源的公共字段。
- en: '![Figure 3.88: Finding the join column'
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.88：查找连接列'
- en: '](img/B16342_03_88.jpg)'
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_88.jpg)'
- en: 'Figure 3.88: Finding the join column'
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.88：查找连接列
- en: 'Add a join step after the clean step for `Order_Central` as follows:'
  id: totrans-456
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`Order_Central`的清洁步骤之后添加一个连接步骤，如下所示：
- en: '![Figure 3.89: Adding a join step in the workflow'
  id: totrans-457
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.89：在工作流程中添加连接步骤'
- en: '](img/B16342_03_89.jpg)'
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_89.jpg)'
- en: 'Figure 3.89: Adding a join step in the workflow'
  id: totrans-459
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.89：在工作流程中添加连接步骤
- en: 'To do a join, select the step by clicking on it and dropping it on the `Join`
    icon. Select the `Clean 7` step and drag it on the `Join` step. When this is brought
    next to the `Join` icon, three options will pop up: `Add`, `Union`, and `Join`.
    Drop the `Clean 7` step on the `Add` option. Dropping it on the join will add
    another join step in the flow. You will study the `Union` option in the next section.'
  id: totrans-460
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要进行连接，请通过点击并拖放到“连接”图标来选择步骤。选择“清洁 7”步骤并将其拖放到“连接”步骤。当它被拖放到“连接”图标旁边时，将弹出三个选项：“添加”、“并集”和“连接”。将“清洁
    7”步骤拖放到“添加”选项。将其拖放到连接处将在流程中添加另一个连接步骤。您将在下一节学习“并集”选项。
- en: '![Figure 3.90: Join option preview'
  id: totrans-461
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.90：连接选项预览'
- en: '](img/B16342_03_90.jpg)'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_90.jpg)'
- en: 'Figure 3.90: Join option preview'
  id: totrans-463
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.90：连接选项预览
- en: 'After adding the join, click on the `Join 1` window to open the properties:'
  id: totrans-464
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在添加连接后，点击“连接 1”窗口以打开属性：
- en: '![Figure 3.91: Analyzing the join results'
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.91：分析连接结果'
- en: '](img/B16342_03_91.jpg)'
  id: totrans-466
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_91.jpg)'
- en: 'Figure 3.91: Analyzing the join results'
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.91：分析连接结果
- en: 'As you can see in the settings, the default join is based on the `Row ID` column.
    This needs to be changed to `Order ID`. To change the join clause, click on the
    `Row ID` column to open a popup with the different columns and select `Order ID`:'
  id: totrans-468
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如您在设置中看到的，默认连接基于“行 ID”列。这需要更改为“订单 ID”。要更改连接子句，请点击“行 ID”列以打开包含不同列的弹出窗口，并选择“订单
    ID”：
- en: '![Figure 3.92: Changing the join clause'
  id: totrans-469
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.92：更改连接子句'
- en: '](img/B16342_03_92.jpg)'
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_92.jpg)'
- en: 'Figure 3.92: Changing the join clause'
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.92：更改连接子句
- en: 'Once this is done, the workflow will reflect the join based on the `Order ID`
    column between the `Clean 6` and `Clean 7` steps:'
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此操作后，工作流将根据“订单 ID”列在“清洁 6”和“清洁 7”步骤之间反映连接：
- en: '![Figure 3.93: Join values preview based on changing the join clause'
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.93：根据更改连接子句的连接值预览'
- en: '](img/B16342_03_93.jpg)'
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_93.jpg)'
- en: 'Figure 3.93: Join values preview based on changing the join clause'
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.93：根据更改连接子句的连接值预览
- en: On your screen, you will see that some values are shown in red on the right-hand
    side. The red values are the ones that were not joined, and the black ones are
    the ones that were joined.
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的屏幕上，您将看到一些值在右侧以红色显示。红色值是未连接的值，黑色值是已连接的值。
- en: 'The default join is the inner join, but clicking on the various shaded areas
    of the join icon can change the join type. There are multiple join types, which
    will be discussed in detail after this example. Select the blank area of `clean
    6` to change the join type to left, as follows:'
  id: totrans-477
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 默认连接是内部连接，但点击连接图标的各个阴影区域可以更改连接类型。有多种连接类型，将在本例之后详细讨论。选择“清洁 6”的空白区域，将连接类型更改为左连接，如下所示：
- en: '![Figure 3.94: Changing the join type'
  id: totrans-478
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.94：更改连接类型'
- en: '](img/B16342_03_94.jpg)'
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_94.jpg)'
- en: 'Figure 3.94: Changing the join type'
  id: totrans-480
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.94：更改连接类型
- en: 'In the `Summary of Join Results`, you can see additional information, such
    as how many records are included and excluded, along with the matched/unmatched
    records. Based on the join condition, these values will change. You can see that
    there are `2,341` orders that have been returned, as indicated by the `Join Results`:'
  id: totrans-481
  prefs: []
  type: TYPE_NORMAL
  zh: 在“连接结果摘要”中，您可以查看附加信息，例如包含和排除的记录数，以及匹配/不匹配的记录。根据连接条件，这些值将发生变化。您可以看到有`2,341`个订单已被返回，如“连接结果”所示：
- en: '![Figure 3.95: Analyzing the join results'
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.95：分析连接结果'
- en: '](img/B16342_03_95.jpg)'
  id: totrans-483
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_95.jpg)'
- en: 'Figure 3.95: Analyzing the join results'
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.95：分析连接结果
- en: 'Hover over the bars for more information in the tooltip:'
  id: totrans-485
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将鼠标悬停在条上以在工具提示中获取更多信息：
- en: '![Figure 3.96: More details on hovering over the result bars'
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.96：在结果条上悬停以获取更多详细信息'
- en: '](img/B16342_03_96.jpg)'
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_96.jpg)'
- en: 'Figure 3.96: More details on hovering over the result bars'
  id: totrans-488
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.96：在结果条上悬停以获取更多详细信息
- en: Finally, you have `Join Clause Recommendations`, which is a list of matching
    column names that can be used as potential joining clauses.
  id: totrans-489
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，您有“连接子句建议”，这是一个可以用作潜在连接子句的匹配列名列表。
- en: '![Figure 3.97: Join Clause Recommendations'
  id: totrans-490
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.97：连接子句建议'
- en: '](img/B16342_03_97.jpg)'
  id: totrans-491
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_97.jpg)'
- en: 'Figure 3.97: Join Clause Recommendations'
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.97：连接子句建议
- en: 'As always, add a clean step to preview the joined data:'
  id: totrans-493
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如往常一样，添加一个清洁步骤以预览连接的数据：
- en: '![Figure 3.98: Data preview for the join results'
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.98：连接结果的预览'
- en: '](img/B16342_03_98.jpg)'
  id: totrans-495
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_98.jpg)'
- en: 'Figure 3.98: Data preview for the join results'
  id: totrans-496
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.98：连接结果的预览
- en: You have now joined the `Returns` table with the `Orders_Central` table. You
    have brought in the records from `Orders_Central` and only the matching records
    from `return reasons_new`. This join has shown the number of orders that were
    returned. You can further analyze the returns based upon the customer names, product
    categories and products, and investigate the reasons for the returns.
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已将 `Returns` 表与 `Orders_Central` 表连接。您已引入 `Orders_Central` 中的记录以及 `return
    reasons_new` 中的匹配记录。此连接显示了已退回的订单数量。您可以根据客户名称、产品类别和产品进一步分析退货情况，并调查退货原因。
- en: Union
  id: totrans-498
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 并集
- en: A union is a way to combine multiple tables with similar column structures into
    a single table. Contrary to a join, in a union, you need to add the data rows
    vertically. A union is performed when instead of joining, you just want to append
    the data below another data that has similar columns. A very common example of
    union is when you have two tables containing similar columns but maintained separately
    to represent different years. For example, you may want to combine order information
    for multiple years into a consolidated dataset.
  id: totrans-499
  prefs: []
  type: TYPE_NORMAL
  zh: 并集是将具有类似列结构的多个表合并为单个表的一种方式。与连接不同，在并集中，您需要垂直添加数据行。当您只想将数据附加到具有类似列的其他数据下方而不是连接时，就会执行并集。并集的一个非常常见的例子是，当您有两个包含类似列但分别维护以表示不同年份的表格时。例如，您可能希望将多年订单信息合并到一个综合数据集中。
- en: 'Consider the following tables. Here, the union of A and B results in a single
    table that contains values from both tables:'
  id: totrans-500
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下表格。在这里，A 和 B 的并集生成一个包含两个表格中值的单个表格：
- en: '![Figure 3.99: Union of two tables'
  id: totrans-501
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.99：两个表的并集'
- en: '](img/B16342_03_99.jpg)'
  id: totrans-502
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_99.jpg)'
- en: 'Figure 3.99: Union of two tables'
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.99：两个表的并集
- en: 'Exercise 3.11: Union of Tables'
  id: totrans-504
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 3.11：表的并集
- en: 'In this exercise, you will connect the `Orders_Central` data with `Orders_East`
    to unite these tables into a single table. Both tables consist of similar columns
    consisting of order-level information, as shown in the following screenshot:'
  id: totrans-505
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将连接 `Orders_Central` 数据与 `Orders_East`，将这些表格合并为一个单一表格。这两个表格都包含类似列，包括订单级别的信息，如下面的截图所示：
- en: '![Figure 3.100: Data preview for Orders_Central'
  id: totrans-506
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.100：Orders_Central 的数据预览'
- en: '](img/B16342_03_100.jpg)'
  id: totrans-507
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_100.jpg)'
- en: 'Figure 3.100: Data preview for Orders_Central'
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.100：Orders_Central 的数据预览
- en: '![Figure 3.101: Data preview for Orders_East'
  id: totrans-509
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.101：Orders_East 的数据预览'
- en: '](img/B16342_03_101.jpg)'
  id: totrans-510
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_101.jpg)'
- en: 'Figure 3.101: Data preview for Orders_East'
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.101：Orders_East 的数据预览
- en: 'You can see that both files have similar columns. The goal here is to combine
    these tables to get a single unified data file. Follow these steps to union these
    data sources:'
  id: totrans-512
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以看到这两个文件具有相似的列。这里的目的是将这些表格合并为一个单一统一的数据文件。按照以下步骤合并这些数据源：
- en: 'Access both data files from the `Superstore Files` folder:'
  id: totrans-513
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 `Superstore Files` 文件夹访问两个数据文件：
- en: '![Figure 3.102: File location for the input files'
  id: totrans-514
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.102：输入文件的文件位置'
- en: '](img/B16342_03_102.jpg)'
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_102.jpg)'
- en: 'Figure 3.102: File location for the input files'
  id: totrans-516
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.102：输入文件的文件位置
- en: You already have the data source `Orders_Central.csv` in the flow from the previous
    example.
  id: totrans-517
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经在前面示例的工作流程中有了数据源 `Orders_Central.csv`。
- en: 'Add the `Orders_East` data. Use `Connect` – `Microsoft Excel` and select this
    file. The flow should look like this after adding that step:'
  id: totrans-518
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加 `Orders_East` 数据。使用 `连接` – `Microsoft Excel` 并选择此文件。添加此步骤后，流程应如下所示：
- en: '![Figure 3.103: Workflow after file the input step'
  id: totrans-519
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.103：文件输入步骤后的工作流程'
- en: '](img/B16342_03_103.jpg)'
  id: totrans-520
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_103.jpg)'
- en: 'Figure 3.103: Workflow after file the input step'
  id: totrans-521
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.103：文件输入步骤后的工作流程
- en: 'Observe that the majority of the column names are the same, which means that
    you can unite these data sources. The ones that do not match are highlighted in
    both tables, as shown in the following screenshot:'
  id: totrans-522
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 观察到大多数列名都是相同的，这意味着您可以联合这些数据源。不匹配的列在两个表格中都被突出显示，如下面的截图所示：
- en: '![Figure 3.104: Columns not matching in the two datasets'
  id: totrans-523
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.104：两个数据集中列不匹配'
- en: '](img/B16342_03_104.jpg)'
  id: totrans-524
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_104.jpg)'
- en: 'Figure 3.104: Columns not matching in the two datasets'
  id: totrans-525
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.104：两个数据集中列不匹配
- en: 'Drag the clean step from `Orders_East` over the clean step of `Orders_Central`
    and onto the union step:'
  id: totrans-526
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `Orders_East` 中的清洁步骤拖动到 `Orders_Central` 的清洁步骤上，然后拖动到并集步骤上：
- en: '![Figure 3.105: Adding a union in the workflow'
  id: totrans-527
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.105：在工作流程中添加并集'
- en: '](img/B16342_03_105.jpg)'
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_105.jpg)'
- en: 'Figure 3.105: Adding a union in the workflow'
  id: totrans-529
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.105：在工作流程中添加并集
- en: 'A new union step will be added with the two data sources indicated by the colored
    columns:'
  id: totrans-530
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将添加一个新的联合步骤，其中用彩色列指示两个数据源：
- en: '![Figure 3.106: Analyzing the union results'
  id: totrans-531
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.106：分析联合结果'
- en: '](img/B16342_03_106.jpg)'
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_106.jpg)'
- en: 'Figure 3.106: Analyzing the union results'
  id: totrans-533
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.106：分析联合结果
- en: You can see that there are 13 mismatched fields.
  id: totrans-534
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以看到有13个不匹配的字段。
- en: Certain columns, such as `Discounts` (`Orders_Central`) and `Discount` (`Orders_East`),
    refer to the same column. Similarly, `Product` (`Orders_Central`) and `Product
    Name` (`Orders_East`) are the same columns. Merge them into a single column, as
    follows.
  id: totrans-535
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 某些列，例如`Discounts`（`Orders_Central`）和`Discount`（`Orders_East`），指的是同一个列。同样，`Product`（`Orders_Central`）和`Product
    Name`（`Orders_East`）也是相同的列。将它们合并为一个单独的列，如下所示。
- en: '![Figure 3.107: Identifying similar columns'
  id: totrans-536
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.107：识别相似的列'
- en: '](img/B16342_03_107.jpg)'
  id: totrans-537
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_107.jpg)'
- en: 'Figure 3.107: Identifying similar columns'
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.107：识别相似的列
- en: 'Select `Discount` first and then hover over the `Discounts` column and click
    the `+` icon. This will merge the two columns into one:'
  id: totrans-539
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先选择`Discount`，然后悬停在`Discounts`列上并点击`+`图标。这将合并两个列为一个：
- en: '![Figure 3.108: Merging different Discount columns into a single column'
  id: totrans-540
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.108：将不同的折扣列合并为一个单独的列'
- en: '](img/B16342_03_108.jpg)'
  id: totrans-541
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_108.jpg)'
- en: 'Figure 3.108: Merging different Discount columns into a single column'
  id: totrans-542
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.108：将不同的折扣列合并为一个单独的列
- en: Select `Product Name`. Prep highlights the other column with the matching word,
    suggesting a possible match. Now, repeat the same step for `Product` as well.
  id: totrans-543
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择`Product Name`。Prep会突出显示具有匹配单词的其他列，建议可能的匹配。现在，也为`Product`重复相同的步骤。
- en: '![Figure 3.109: Merging different Product Name columns into a single column'
  id: totrans-544
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.109：将不同的产品名称列合并为一个单独的列'
- en: '](img/B16342_03_109.jpg)'
  id: totrans-545
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_109.jpg)'
- en: 'Figure 3.109: Merging different Product Name columns into a single column'
  id: totrans-546
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.109：将不同的产品名称列合并为一个单独的列
- en: 'The `Region` column is not found in `Orders_East`, so that can be excluded
    from the union result. To do this, hover over the `Union Results` section and
    remove the `Region` column, as highlighted in the following screenshot:'
  id: totrans-547
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Region`列在`Orders_East`中未找到，因此可以从联合结果中排除。为此，悬停在`Union Results`部分上并移除`Region`列，如下面的截图所示：'
- en: '![Figure 3.110: Excluding a column from union results'
  id: totrans-548
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.110：从联合结果中排除一个列'
- en: '](img/B16342_03_110.jpg)'
  id: totrans-549
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_110.jpg)'
- en: 'Figure 3.110: Excluding a column from union results'
  id: totrans-550
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.110：从联合结果中排除一个列
- en: Further cleaning can be done by combining `Order Date`, `Order Year`, `Order
    Month`, `Order Day`, and `Ship Date` using the clean step.
  id: totrans-551
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过使用清洁步骤结合`Order Date`、`Order Year`、`Order Month`、`Order Day`和`Ship Date`来进行进一步的清洁。
- en: '![Figure 3.111: Mismatched columns that can be merged using the clean operations'
  id: totrans-552
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.111：可以使用清洁操作合并的列不匹配'
- en: '](img/B16342_03_111.jpg)'
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_111.jpg)'
- en: 'Figure 3.111: Mismatched columns that can be merged using the clean operations'
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.111：可以使用清洁操作合并的列不匹配
- en: 'Once done, add a clean step to the union to preview the data. You can see that
    Prep has added a column named `Table Names` to indicate which table the data comes
    from:'
  id: totrans-555
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，将一个清洁步骤添加到联合操作中预览数据。您可以看到，Prep已添加一个名为`Table Names`的列，以指示数据来自哪个表：
- en: '![Figure 3.112: Union workflow results'
  id: totrans-556
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.112：联合工作流程结果'
- en: '](img/B16342_03_112.jpg)'
  id: totrans-557
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_112.jpg)'
- en: 'Figure 3.112: Union workflow results'
  id: totrans-558
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.112：联合工作流程结果
- en: In this section, you learned how to use the union step to combine data from
    two sources. Once combined, the resulting data source can be used for performing
    comparative analysis through visualizations. You also saw how to merge mismatched
    column names. Next, you will learn about the script step. Note that this is not
    used very often as it is a very advanced step in which complex statistical programs
    are required to run on the input using R or Python scripts. Therefore, this will
    be a purely theoretical discussion.
  id: totrans-559
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您学习了如何使用联合步骤将来自两个源的数据合并。一旦合并，结果数据源可以用于通过可视化进行对比分析。您还看到了如何合并不匹配的列名。接下来，您将了解脚本步骤。请注意，这并不常用，因为它是一个非常高级的步骤，需要使用R或Python脚本运行复杂的统计程序。因此，这将是一个纯粹的理论讨论。
- en: Script Step
  id: totrans-560
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 脚本步骤
- en: A script allows you to run external programs written in R or Python. Sometimes,
    complex statistical computations on the data that cannot be done using Prep might
    be required. Hence, Prep allows you to integrate these programs into the workflow
    using the script step.
  id: totrans-561
  prefs: []
  type: TYPE_NORMAL
  zh: 一个脚本允许您运行用R或Python编写的外部程序。有时，可能需要进行一些复杂的统计计算，这些计算无法使用Prep完成。因此，Prep允许您通过脚本步骤将这些程序集成到工作流程中。
- en: 'Before adding the script, you need to establish the connection for R or Python
    programs using Rserve or TabPy. You can do so using the `Help` menu and the `Settings
    and Performance` option by going to `Help` – `Setting and Performance` – `Manage
    Analytics Extension Connection`:'
  id: totrans-562
  prefs: []
  type: TYPE_NORMAL
  zh: 在添加脚本之前，您需要使用Rserve或TabPy为R或Python程序建立连接。您可以通过访问`Help`菜单并选择`Settings and Performance`选项来实现，具体操作为：`Help`
    – `Settings and Performance` – `Manage Analytics Extension Connection`：
- en: '![Figure 3.113: Script window properties'
  id: totrans-563
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.113：脚本窗口属性'
- en: '](img/B16342_03_113.jpg)'
  id: totrans-564
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_113.jpg]'
- en: 'Figure 3.113: Script window properties'
  id: totrans-565
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.113：脚本窗口属性
- en: 'Now you can add the server details for R or Python. Once this is done, you
    can add the script step in the flow. This will open the following window:'
  id: totrans-566
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您可以添加R或Python的服务器详情。完成此操作后，您可以在流程中添加脚本步骤。这将打开以下窗口：
- en: '![Figure 3.114: Script connection settings'
  id: totrans-567
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.114：脚本连接设置'
- en: '](img/B16342_03_114.jpg)'
  id: totrans-568
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_114.jpg]'
- en: 'Figure 3.114: Script connection settings'
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.114：脚本连接设置
- en: Here, you can add the program file and specify which function needs to run on
    the data. For further details, you can click the `Learn more` link.
  id: totrans-570
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您可以添加程序文件并指定需要在数据上运行哪个函数。有关更多详细信息，您可以点击`Learn more`链接。
- en: Flow and Data Exports
  id: totrans-571
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 流程和数据导出
- en: 'Once you have finished creating a workflow, you need to export the data or
    share the workflow so that it can be used in data analysis and visualization in
    Tableau Desktop. You will learn about the following exporting options in this
    section:'
  id: totrans-572
  prefs: []
  type: TYPE_NORMAL
  zh: 创建完工作流后，您需要导出数据或共享工作流，以便在Tableau Desktop中进行数据分析与可视化。在本节中，您将了解以下导出选项：
- en: Flow saving options
  id: totrans-573
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 流程保存选项
- en: Data export options
  id: totrans-574
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据导出选项
- en: 'Flow saving options: The workflow can be saved in two formats: `.tflx` and
    `.tfl`. If you are working by yourself and have all the data in your system, you
    can save the flow in the Tableau Prep Builder flow (`.tfl`) file format. If you
    want to share the flow along with the data used in it, use the `.tflx` format,
    which will combine or package all underlying local files used in the flow, such
    as the Excel, text, or Tableau extract file, into a single flow file to be shared.
    Note that only local files can be packaged into a flow. Data from database connections
    isn''t included.'
  id: totrans-575
  prefs: []
  type: TYPE_NORMAL
  zh: 流程保存选项：工作流可以保存为两种格式：`.tflx`和`.tfl`。如果您单独工作并且所有数据都在您的系统中，您可以将流程保存为Tableau Prep
    Builder流程（`.tfl`）文件格式。如果您想与使用的数据共享流程，请使用`.tflx`格式，它将所有在流程中使用的底层本地文件（如Excel、文本或Tableau提取文件）组合或打包成一个共享的单个流程文件。请注意，只有本地文件可以打包到流程中。数据库连接的数据不包括在内。
- en: To save a flow, click on the `File` menu, go to `Save As`, and select the format required.
  id: totrans-576
  prefs: []
  type: TYPE_NORMAL
  zh: 要保存流程，请点击`File`菜单，选择`Save As`，并选择所需的格式。
- en: '![Figure 3.115: Saving a workflow'
  id: totrans-577
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.115：保存工作流'
- en: '](img/B16342_03_115.jpg)'
  id: totrans-578
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_115.jpg]'
- en: 'Figure 3.115: Saving a workflow'
  id: totrans-579
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.115：保存工作流
- en: The next exercise looks at data export options in detail.
  id: totrans-580
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个练习将详细探讨数据导出选项。
- en: 'Exercise 3.12: Exporting Data'
  id: totrans-581
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习3.12：导出数据
- en: Once you have completed the data transformation steps in Prep, the last thing
    to do is to export this data so that it can be used to develop visualizations.
    The `Output` step allows you to export the data in multiple formats. In this exercise,
    you will export the data using the `Output` step.
  id: totrans-582
  prefs: []
  type: TYPE_NORMAL
  zh: 在Prep中完成数据转换步骤后，最后一步是导出这些数据，以便可以用于开发可视化。`Output`步骤允许您以多种格式导出数据。在本练习中，您将使用`Output`步骤导出数据。
- en: 'Continuing from the previous example, add an `Output` step to the `Union` step
    by clicking on the `+` and then selecting `Output`:'
  id: totrans-583
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从上一个示例继续，通过点击`+`并选择`Output`来在`Union`步骤中添加一个`Output`步骤：
- en: '![Figure 3.116: Adding an output step'
  id: totrans-584
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.116：添加输出步骤'
- en: '](img/B16342_03_116.jpg)'
  id: totrans-585
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_116.jpg]'
- en: 'Figure 3.116: Adding an output step'
  id: totrans-586
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.116：添加输出步骤
- en: 'Once this is done, you will see the following window:'
  id: totrans-587
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此操作后，您将看到以下窗口：
- en: '![Figure 3.117: Output step properties'
  id: totrans-588
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.117：输出步骤属性'
- en: '](img/B16342_03_117.jpg)'
  id: totrans-589
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_117.jpg]'
- en: 'Figure 3.117: Output step properties'
  id: totrans-590
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.117：输出步骤属性
- en: 'Save the output in various formats, as the following screenshot shows:'
  id: totrans-591
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下截图所示保存输出：
- en: '![Figure 3.118: Formats for saving the flow output'
  id: totrans-592
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.118：保存流程输出的格式'
- en: '](img/B16342_03_118.jpg)'
  id: totrans-593
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_03_118.jpg]'
- en: 'Figure 3.118: Formats for saving the flow output'
  id: totrans-594
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.118：保存流程输出的格式
- en: Here, you will be saving it as the `File` format, but it's important to also
    know about the other formats.
  id: totrans-595
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您将保存为`File`格式，但了解其他格式也很重要。
- en: 'Save it as a `Published data source` on Tableau Server, as a database table
    in a database such as SQL Server, or elsewhere, as follows:'
  id: totrans-596
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将其保存为Tableau Server上的`已发布数据源`、数据库中的SQL Server等数据库表或其他地方，如下所示：
- en: '![Figure 3.119: File formats for saving output on Tableau Server'
  id: totrans-597
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.119：在Tableau Server上保存输出的文件格式'
- en: '](img/B16342_03_119.jpg)'
  id: totrans-598
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_119.jpg)'
- en: 'Figure 3.119: File formats for saving output on Tableau Server'
  id: totrans-599
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.119：在Tableau Server上保存输出的文件格式
- en: Select `File` and then select the folder to save to. Enter the output name and
    set the output type to CSV. You will also see another option, `.hyper` format,
    which can be used in Tableau Desktop as an extract.
  id: totrans-600
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择`文件`，然后选择要保存到的文件夹。输入输出名称，并将输出类型设置为CSV。你还会看到另一个选项，`.hyper`格式，它可以在Tableau Desktop中用作提取。
- en: '![Figure 3.120: CSV file format for saving output'
  id: totrans-601
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.120：保存输出的CSV文件格式'
- en: '](img/B16342_03_120.jpg)'
  id: totrans-602
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_120.jpg)'
- en: 'Figure 3.120: CSV file format for saving output'
  id: totrans-603
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.120：保存输出的CSV文件格式
- en: Click on `Run Flow` and save the output.
  id: totrans-604
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`运行流程`并保存输出。
- en: '![Figure 3.121: Running the flow'
  id: totrans-605
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.121：运行流程'
- en: '](img/B16342_03_121.jpg)'
  id: totrans-606
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_121.jpg)'
- en: 'Figure 3.121: Running the flow'
  id: totrans-607
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.121：运行流程
- en: 'Once done, navigate to the folder location and check the file:'
  id: totrans-608
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，导航到文件夹位置并检查文件：
- en: '![Figure 3.122: Workflow output preview'
  id: totrans-609
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.122：工作流程输出预览'
- en: '](img/B16342_03_122.jpg)'
  id: totrans-610
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_122.jpg)'
- en: 'Figure 3.122: Workflow output preview'
  id: totrans-611
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.122：工作流程输出预览
- en: When the output type is CSV, the `Full refresh` option that you can see in *Figure
    3.122* will overwrite the output file when the flow is run again. If the `.hyper`
    output format is selected, you can choose to append the new data to the existing
    extract as well.
  id: totrans-612
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当输出类型为CSV时，你在*图3.122*中看到的`完整刷新`选项将在流程再次运行时覆盖输出文件。如果选择`.hyper`输出格式，你也可以选择将新数据追加到现有的提取中。
- en: '![Figure 3.123: Adding new output to existing saved output'
  id: totrans-613
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.123：向现有已保存输出添加新输出'
- en: '](img/B16342_03_123.jpg)'
  id: totrans-614
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_123.jpg)'
- en: 'Figure 3.123: Adding new output to existing saved output'
  id: totrans-615
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.123：向现有已保存输出添加新输出
- en: Now that you have learned about the different ways to transform data, it's time
    to get some hands-on practice on some project-based scenarios.
  id: totrans-616
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经了解了不同的数据转换方法，是时候在一些基于项目的场景中进行一些实际操作练习了。
- en: 'Activity 3.01: Finding the Month with the Highest Orders'
  id: totrans-617
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 活动3.01：寻找订单量最高的月份
- en: As a store manager, you will have come across situations in which you would
    like to assess your store's performance by its sales. Hence, it is important to
    analyze patterns in the sales of the products. Further, you can also identify
    the products that sell more compared to other products, and this analysis can
    help to further increase their sales. Additionally, you want to know if there
    is a pattern in how the products sell in different months. If a pattern exists,
    then it can be analyzed and used to design strong marketing strategies to boost
    the store's sales and revenue.
  id: totrans-618
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一家店铺的经理，你可能遇到过想要通过销售额来评估店铺绩效的情况。因此，分析产品的销售模式非常重要。此外，你还可以识别出与其它产品相比销售更多的产品，这种分析有助于进一步增加它们的销售额。此外，你还想了解产品在不同月份的销售是否存在模式。如果存在模式，则可以进行分析并用于设计强大的营销策略，以提升店铺的销售和收入。
- en: Usually, the order information is kept separate from the product information.
    This is to keep the data optimized.
  id: totrans-619
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，订单信息与产品信息分开存储，这是为了保持数据优化。
- en: Note
  id: totrans-620
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The data that you will use in this activity is stored in `Activity File.xlsx`.
    The `Orders` sheet contains the `Order ID` and the `Product` categories. You can
    download the Excel file from the GitHub repository for this chapter at [https://packt.link/iWtp4](https://packt.link/iWtp4).
  id: totrans-621
  prefs: []
  type: TYPE_NORMAL
  zh: 在本活动中，你将使用的数据存储在`Activity File.xlsx`中。`Orders`工作表包含`订单ID`和`产品类别`。你可以从本章的GitHub仓库下载Excel文件，链接为[https://packt.link/iWtp4](https://packt.link/iWtp4)。
- en: '![Figure 3.124: Orders sheet preview'
  id: totrans-622
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.124：订单工作表预览'
- en: '](img/B16342_03_124.jpg)'
  id: totrans-623
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_124.jpg)'
- en: 'Figure 3.124: Orders sheet preview'
  id: totrans-624
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.124：订单工作表预览
- en: 'As you can see, the `Order ID` column is a combination of the ID, month, and
    year of each order. `Product Category` is an ID column. Further details about
    this can be found in the `Product Category` sheet:'
  id: totrans-625
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，`订单ID`列是每个订单的ID、月份和年份的组合。`产品类别`是一个ID列。更多详细信息可以在`产品类别`工作表中找到：
- en: '![Figure 3.125: Product Category sheet preview'
  id: totrans-626
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.125：产品类别工作表预览'
- en: '](img/B16342_03_125.jpg)'
  id: totrans-627
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_125.jpg)'
- en: 'Figure 3.125: Product Category sheet preview'
  id: totrans-628
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.125：产品类别工作表预览
- en: 'To complete this activity successfully, you need to apply your knowledge of
    splits, joins, and cleaning to identify important sales trends. Specifically,
    you need to answer the following questions:'
  id: totrans-629
  prefs: []
  type: TYPE_NORMAL
  zh: 要成功完成这个活动，你需要应用你对拆分、连接和清理的知识来识别重要的销售趋势。具体来说，你需要回答以下问题：
- en: Which month and year combination has the highest orders?
  id: totrans-630
  prefs: []
  type: TYPE_NORMAL
  zh: 哪个月份和年份组合的订单量最高？
- en: Which product category has the highest orders?
  id: totrans-631
  prefs: []
  type: TYPE_NORMAL
  zh: 哪个产品类别的订单量最高？
- en: Note
  id: totrans-632
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: 'The solution to this activity can be found here: [https://packt.link/CTCxk](https://packt.link/CTCxk).'
  id: totrans-633
  prefs: []
  type: TYPE_NORMAL
  zh: 本活动的解决方案可在此处找到：[https://packt.link/CTCxk](https://packt.link/CTCxk)。
- en: 'Activity 3.02: Data Transformation'
  id: totrans-634
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 活动三.02：数据转换
- en: Now you know about the trends for various products, it would be useful to analyze
    customer information to better understand customer behavior towards each product.
    With the results of this analysis, you can design customized offers and coupons
    that can enhance a customer's shopping experience. This will also help create
    brand affinity with the customers, which can eventually lead to an increase in
    sales. In this activity, you will combine customer information with the previous
    workflow to get a unified view of orders, products, and customers. You will continue
    using the same Excel sheet from the previous activity to complete this one.
  id: totrans-635
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经了解了各种产品的趋势，分析客户信息以更好地理解客户对每种产品的行为将非常有用。通过这次分析的结果，你可以设计定制的优惠和优惠券，以增强客户的购物体验。这也有助于建立与客户的品牌亲和力，最终可能导致销售额的增加。在这个活动中，你将结合客户信息与之前的工作流程，以获得订单、产品和客户的统一视图。你将继续使用之前活动中的同一Excel工作表来完成这个活动。
- en: 'The customer order information is stored in the `CustomerOrders` sheet, as
    shown in the following screenshot:'
  id: totrans-636
  prefs: []
  type: TYPE_NORMAL
  zh: 客户订单信息存储在`CustomerOrders`工作表中，如下截图所示：
- en: '![ Figure 3.126: CustomerOrders sheet preview'
  id: totrans-637
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.126：CustomerOrders工作表预览'
- en: '](img/B16342_03_126.jpg)'
  id: totrans-638
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_126.jpg)'
- en: 'Figure 3.126: CustomerOrders sheet preview'
  id: totrans-639
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.126：CustomerOrders工作表预览
- en: You can see that the data is stored in a wide format, that is, it is spread
    horizontally across different years for each customer. You will need to pivot
    this data to use it in the workflow.
  id: totrans-640
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到数据以宽格式存储，即它以横向方式分布在每个客户的各个年份中。你需要对这些数据进行转置才能在工作流程中使用。
- en: 'Next, you must join this information with the `CustomerNames` sheet, which
    looks like the following:'
  id: totrans-641
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，你必须将此信息与`CustomerNames`工作表连接起来，该工作表如下所示：
- en: '![Figure 3.127: CustomerNames sheet preview'
  id: totrans-642
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.127：CustomerNames工作表预览'
- en: '](img/B16342_03_127.jpg)'
  id: totrans-643
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_127.jpg)'
- en: 'Figure 3.127: CustomerNames sheet preview'
  id: totrans-644
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.127：CustomerNames工作表预览
- en: In this activity, your goal is to identify the top five high-value customers,
    based on the number of orders.
  id: totrans-645
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个活动中，你的目标是根据订单数量识别前五名高价值客户。
- en: You also need to export this data so that you can analyze it better using visualizations
    in Tableau Desktop.
  id: totrans-646
  prefs: []
  type: TYPE_NORMAL
  zh: 你还需要导出这些数据，以便你可以在Tableau Desktop中使用可视化更好地分析它们。
- en: '![Figure 3.128: Activity 2 output sheet preview'
  id: totrans-647
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.128：活动2输出工作表预览'
- en: '](img/B16342_03_128.jpg)'
  id: totrans-648
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_03_128.jpg)'
- en: 'Figure 3.128: Activity 2 output sheet preview'
  id: totrans-649
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.128：活动2输出工作表预览
- en: Note
  id: totrans-650
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: 'The solution to this activity can be found here: [https://packt.link/CTCxk](https://packt.link/CTCxk).'
  id: totrans-651
  prefs: []
  type: TYPE_NORMAL
  zh: 本活动的解决方案可在此处找到：[https://packt.link/CTCxk](https://packt.link/CTCxk)。
- en: Summary
  id: totrans-652
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned how to connect to various data sources. After connecting
    to the data, you learned how to analyze it using data profiling. Then, you learned
    to clean the data using various methods, such as filtering, creating calculations,
    groups, and splits. Cleaning data is a prerequisite for effective data analysis,
    and you will be using these methods throughout the remainder of this book.
  id: totrans-653
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了如何连接到各种数据源。连接到数据后，你学习了如何使用数据概览来分析它。然后，你学习了使用各种方法来清理数据，例如过滤、创建计算、分组和拆分。数据清理是有效数据分析的前提，你将在本书的剩余部分使用这些方法。
- en: Once you cleaned the data, you looked at ways to group data using aggregation,
    and then learned to transform it with pivots. You also combined multiple data
    sources using the join and union options. Finally, you learned about how to save,
    share, and export your workflow and the data.
  id: totrans-654
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你清理了数据，你研究了使用聚合来分组数据的方法，然后学习了如何使用转置来转换数据。你还使用了连接和合并选项来结合多个数据源。最后，你学习了如何保存、共享和导出你的工作流程和数据。
- en: The key takeaway from this chapter is how to transform data efficiently based
    on the project requirements so that it becomes fit for visualization. In the next
    chapter, you will use the skills you have learned in this chapter, such as aggregation,
    joins, and groups, to create charts in Tableau.
  id: totrans-655
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的关键收获是如何根据项目需求高效地转换数据，使其适合可视化。在下一章中，你将使用在本章中学到的技能，例如聚合、连接和分组，在 Tableau 中创建图表。
