<html><head></head><body><div class="chapter" title="Chapter&#xA0;8.&#xA0;Final Thoughts"><div class="titlepage"><div><div><h1 class="title"><a id="ch08"/>Chapter 8. Final Thoughts</h1></div></div></div><p>In the previous chapters, we went through a quick journey of developing a technical analysis application in Python using Cassandra. We started from the theoretical basic knowledge and proceeded step-by-step to design and develop a running application. Even though you are a novice in computer programming, you should have no trouble reading the chapters in a sequence.</p><p>We now come to the final chapter of this book. We will take a look at the supplementary information pertinent to application design and development. Then we will quickly review the basics of each chapter in order to wrap up this book.</p><div class="section" title="Supplementary information"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec40"/>Supplementary information</h1></div></div></div><p>Here, we will take a glance at the supplementary information on client drivers, security features, backup and restore.</p><div class="section" title="Client drivers"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec92"/>Client drivers</h2></div></div></div><p>A driver eases<a id="id638" class="indexterm"/> the burden of an application developer to deal with the repetitive, low-level nitty-gritty of communicating with the underlying database. The application developer can then focus on her/his efforts in writing business logic.</p><p>As Cassandra is growing popular, drivers are developed for the contemporary programming languages. This greatly simplifies the workload of an application developer, who was used to the clumsy Thrift API.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note48"/>Note</h3><p>
<span class="strong"><strong>Drivers for different languages</strong></span>
</p><p>A list of the commonly used Cassandra drivers and their corresponding supported programming languages can be seen at<a id="id639" class="indexterm"/> PlanetCassandra <a class="ulink" href="http://planetcassandra.org/client-drivers-tools/">http://planetcassandra.org/client-drivers-tools/</a>.</p></div></div><p>A great number of Cassandra drivers available nowadays is still growing and many of them are open source. If you really want production support, then DataStax is worth your consideration.</p><p>A few comments on the<a id="id640" class="indexterm"/> selection of a driver are provided as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">First, the programming language to be supported is the single most important constraint. The communication protocol then comes into play. Thrift API is long-lived, yet rather difficult to use. Unless you need to support an application working with an older version of a Cassandra cluster, a driver providing CQL support is highly recommended and it will align the data modeling techniques that are introduced in this book. The implementation of the data model will be much easier as well.</li><li class="listitem" style="list-style-type: disc">Another selection factor is the additional features that the driver offers, for example, node failure detection, node failover, automatic load balancing, and performance.</li></ul></div><p>PlanetCassandra also provides crispy tutorials on how to get started with the client drivers, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8884OS_08_01.jpg" alt="Client drivers"/></div></div><div class="section" title="Security"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec93"/>Security</h2></div></div></div><p>Security is a<a id="id641" class="indexterm"/> broad and complex topic. From the perspective of application development, authentication, authorization and inter-node encryption are the most fundamental security measures to safeguard a production application.</p><div class="section" title="Authentication"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl3sec33"/>Authentication</h3></div></div></div><p>In Cassandra, authentication<a id="id642" class="indexterm"/> is based on an internally controlled login <a id="id643" class="indexterm"/>username and password. The login username and password are stored in the <code class="literal">system_auth.credentials</code> table. The internal authentication is disabled, by default. We can configure Cassandra in order to enable it by modifying <code class="literal">cassandra.yaml</code>. We also need to increase the replication factor of the <code class="literal">system_auth</code> keyspace, as the <code class="literal">system_auth</code> keyspace is no different and might fail as well!</p><p>Once the internal authentication is enabled, we can use the superuser account and CQL statements such as <code class="literal">CREATE USER</code>, <code class="literal">ALTER USER</code>, <code class="literal">DROP USER</code>, and <code class="literal">LIST USERS</code> to create and manage user authentication.</p></div><div class="section" title="Authorization"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl3sec34"/>Authorization</h3></div></div></div><p>Similarly, Cassandra provides <a id="id644" class="indexterm"/>internal <a id="id645" class="indexterm"/>authorization to work hand-in-hand with internal authentication. It borrows the practices from the traditional database <code class="literal">GRANT</code>/<code class="literal">REVOKE</code> paradigm in order to manage permissions on the schema objects.</p><p>The tables in the <code class="literal">system</code> keyspace are granted read permission, by default, to every authenticated user. For user-created keyspace and the objects inside, we can also use CQL statements, namely, <code class="literal">GRANT</code>, <code class="literal">REVOKE</code>, and <code class="literal">LIST PERMISSIONS</code> to manage the object permission.</p></div><div class="section" title="Inter-node encryption"><div class="titlepage"><div><div><h3 class="title"><a id="ch08lvl3sec35"/>Inter-node encryption</h3></div></div></div><p>Cassandra provides<a id="id646" class="indexterm"/> inter-node encryption that protects data transferred among nodes, including gossip <a id="id647" class="indexterm"/>communication, in a cluster using <a id="id648" class="indexterm"/>
<span class="strong"><strong>Secure Sockets Layer</strong></span> (<span class="strong"><strong>SSL</strong></span>). All nodes must have all the relevant SSL certificates on all nodes. The encryption can be applied to the traffic between all nodes, data centers, or racks.</p><p>We must set the <code class="literal">server_encryption_options</code> in the <code class="literal">cassandra.yaml</code> file on each node in order to enable the inter-node encryption option and the configuration settings of the <code class="literal">keystore</code> and <code class="literal">truststore</code> files, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/8884OS_08_02.jpg" alt="Inter-node encryption"/></div></div></div><div class="section" title="Backup and restore"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec94"/>Backup and restore</h2></div></div></div><p>Backup<a id="id649" class="indexterm"/> is an interesting topic in a large distributed system such as Cassandra. It is very likely that the data volume will be gigantic and the number of nodes will be large. Making a consistent backup of the whole cluster can be very tricky.</p><p>In my opinion, backup is optional in Cassandra, in contrast to the must-have regular backups of a traditional database. The need of backing up a Cassandra cluster really depends on the chosen deployment<a id="id650" class="indexterm"/> strategies. For example, if the nodes of a cluster are distributed in geographically dispersed areas like New York, Tokyo, and London, and the replication factor is set to three or above, it might be beneficial to explicitly have an external backup of the data in the cluster. This example cluster has built-in resilience and each piece of data has a number of replicas serving as a backup of itself. The chance of the simultaneous failure of all the three geographical areas is rather low.</p><p>Of course, you might still make regular backups of the cluster if you need to comply with policies, regulations, and so on. Maybe you want to have the so-called point-in-time recovery available for the system. In these cases, a managed backup is a must. However, this will definitely complicate the whole system architecture.</p><p>All in all, this is a design decision for your implementation.</p></div></div></div>
<div class="section" title="Useful websites"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec41"/>Useful websites</h1></div></div></div><p>Here are some of the<a id="id651" class="indexterm"/> useful websites for us to get up-to-date Cassandra information.</p><div class="section" title="Apache Cassandra official site"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec95"/>Apache Cassandra official site</h2></div></div></div><p>The official Cassandra <a id="id652" class="indexterm"/>website, <a class="ulink" href="http://cassandra.apache.org/">http://cassandra.apache.org/</a>, is always the first place to go for any information. The <a id="id653" class="indexterm"/>latest released version information can be found on its home page. You might get the source code there if you want to dive deep into the heart of Cassandra or if you want to install a Cassandra instance back to square one by building from the source code.</p><p>Just akin to other projects under the Apache Software Foundation, you are welcome to contribute to the community. You can also find out how to join this enthusiastic team of developers in order to improve such a great NoSQL database.</p><p>You can also find a link to another website called PlanetCassandra, which is worth a separate introduction.</p></div><div class="section" title="PlanetCassandra"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec96"/>PlanetCassandra</h2></div></div></div><p>PlanetCassandra, <a class="ulink" href="http://planetcassandra.org/">http://planetcassandra.org/</a>, is a <a id="id654" class="indexterm"/>community service<a id="id655" class="indexterm"/> website supported by DataStax, a commercial <a id="id656" class="indexterm"/>company, that provides production-ready Apache Cassandra products and services:</p><div class="mediaobject"><img src="graphics/8884OS_08_03.jpg" alt="PlanetCassandra"/></div><p>This website deals more with<a id="id657" class="indexterm"/> the collaboration aspects of the<a id="id658" class="indexterm"/> Cassandra community. We can look for meetups, involvements, webinars, conferences and events, and even educational training courses there. The most valuable section of the website is the <span class="emphasis"><em>Apache Cassandra Use Cases</em></span> that is a repository of the companies who run their applications on Apache Cassandra and enjoy the real benefits from it.</p><p>The repository is categorized by several dimensions, namely, <span class="strong"><strong>Product Catalog/Playlist</strong></span>, <span class="strong"><strong>Recommendation/Personalization</strong></span>, <span class="strong"><strong>Fraud Detection</strong></span>, <span class="strong"><strong>Messaging</strong></span>, <span class="strong"><strong>IOT/Sensor Data</strong></span>, and <span class="strong"><strong>Undefined</strong></span>. Each entry of the repository has a name and a brief introduction of the company of the use case, and how it uses Cassandra to drive the business. You certainly can learn and generate some ideas by learning from the use cases.</p><p>A must-read is the Netflix case study. The use case is a personalization system that understands each person's unique habits and preferences and bring to light products and items that a user might be unaware of and not looking for. The challenges were to acquire affordable capacity in order to store and process immense amounts of data, to address a single point of failure with Oracle's legacy relational architecture, and to achieve business agility for international expansion. Netflix used a commercial version of Cassandra that delivers 100 percent uptime and cost-effective scale across multiple data centers. The results are stunning, which are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">First, the <a id="id659" class="indexterm"/>throughput of the system is more than 10 million transactions per second</li><li class="listitem" style="list-style-type: disc">Second, the creation and management of the new data clusters across various regions is nearly effortless</li><li class="listitem" style="list-style-type: disc">Lastly, customer viewing <a id="id660" class="indexterm"/>and log data can be captured in the finest detail in Cassandra</li></ul></div><p>It is highly recommended that you read this, especially for those of you who are considering to migrate from a relational database to Cassandra.</p></div><div class="section" title="DataStax"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec97"/>DataStax</h2></div></div></div><p>The Cassandra version used in this <a id="id661" class="indexterm"/>book is an open source one that can be obtained freely on the Internet. It is good enough for most systems. However, many companies still look for enterprise grade products built on Cassandra and the related support, training, and consultancy services. DataStax, <a class="ulink" href="http://www.datastax.com/">http://www.datastax.com/</a>, is<a id="id662" class="indexterm"/> one <a id="id663" class="indexterm"/>of them.</p><p>DataStax serves to compile the most comprehensive Cassandra documentation, as shown in the following screenshot. The documentation is freely available on its website. It also develops and provides support to the client drivers for Java, C#, Python, and so on:</p><div class="mediaobject"><img src="graphics/8884OS_08_04.jpg" alt="DataStax"/></div><p>DataStax offers <a id="id664" class="indexterm"/>an enterprise version of Apache Cassandra, known as DataStax Enterprise, with enhanced features such as advanced security and<a id="id665" class="indexterm"/> management tools that simplify the day-to-day system management of a Cassandra cluster.</p><p>DataStax Enterprise includes a powerful enterprise system management tool, OpsCenter, to allow administrators to easily grasp the status and performance of the system through a dashboard. It monitors the cluster and triggers alerts or notifications of changes in the cluster. Backup and restore operations are greatly streamlined as well.</p><p>DataStax Enterprise also extends Cassandra to support Apache Hadoop and Solr, as an integrated enterprise platform.</p></div><div class="section" title="Hadoop integration"><div class="titlepage"><div><div><h2 class="title"><a id="ch08lvl2sec98"/>Hadoop integration</h2></div></div></div><p>Cassandra integrated with Hadoop can be a<a id="id666" class="indexterm"/> powerful platform<a id="id667" class="indexterm"/> for Big Data Analytics. Cassandra has been able to directly integrate with Hadoop since its Version 0.6. It began with MapReduce support. Since then, the support has matured significantly and now includes native support for Pig and Hive. Cassandra's Hadoop support implements the same interface as <span class="strong"><strong>Hadoop Distributed File System</strong></span> (<span class="strong"><strong>HDFS</strong></span>)<a id="id668" class="indexterm"/> in order to achieve input data locality.</p><p>Cassandra provides the <code class="literal">ColumnFamilyInputFormat</code> and <code class="literal">ColumnFamilyOutputFormat</code> classes for direct integration with<a id="id669" class="indexterm"/> Hadoop from MapReduce programs. It involves data being read directly from Cassandra column families in MapReduce mappers and does include data movement.</p><p>Setup and configuration involves <a id="id670" class="indexterm"/>overlaying a Hadoop cluster on Cassandra nodes, configuring a separate server for the Hadoop JobTracker, and installing a Hadoop TaskTracker and DataNode on each Cassandra node.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note49"/>Note</h3><p>
<span class="strong"><strong>Setup and configuration procedures</strong></span>
</p><p>The detailed procedures<a id="id671" class="indexterm"/> of integrating Cassandra with Hadoop can be found at:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><a class="ulink" href="http://www.datastax.com/documentation/cassandra/2.1/cassandra/configuration/configHadoop.html">http://www.datastax.com/documentation/cassandra/2.1/cassandra/configuration/configHadoop.html</a></li><li class="listitem" style="list-style-type: disc"><a class="ulink" href="http://wiki.apache.org/cassandra/HadoopSupport">http://wiki.apache.org/cassandra/HadoopSupport</a></li></ul></div></div></div><p>The nodes in the Cassandra data center can draw from data in the HDFS DataNode as well as from Cassandra. The JobTracker receives the MapReduce input from the client application. It then sends a MapReduce job request to the TaskTrackers and optional clients, for example, MapReduce and Pig. The data is written to Cassandra and the results are sent back to the client.</p><p>DataStax has also created a simple way to use Hadoop with Cassandra and built it into the enterprise version.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch08lvl1sec42"/>Summary</h1></div></div></div><p>We started from <a class="link" href="ch01.html" title="Chapter 1. Bird's Eye View of Cassandra">Chapter 1</a>, <span class="emphasis"><em>Bird's Eye View of Cassandra</em></span>, to review the basics of Cassandra. We then touched on the important facets of data modeling in Cassandra, such as Modeling by query technique, the wealthy set of data types, and the indexes. These techniques and knowledge are put together into an example data analysis application in the stock trading domain called Stock Screener Application. We walked through and explained every single detail of the application, although at a fast pace. We also illustrated how to enhance the first-cut version with changes on the data model and coding to demonstrate the great flexibility provided by Cassandra. We then turned to plan and migrate the enhanced system to a production-ready cluster with considerations on the replication strategy, snitch, replication factor, the basic monitoring and performance tuning tools.</p><p>I really enjoyed writing this book for you and I sincerely hope that it is as useful for you when it comes to rapidly using Cassandra in real-world projects, as it has been fun for me. Your comments are always welcomed and you can contact me through Packt Publishing.</p><p>As Sir Winston Churchill said:</p><div class="blockquote"><blockquote class="blockquote"><p>"Now this is not the end. It is not even the beginning of the end. But it is, perhaps, the end of the beginning."</p></blockquote></div></div></body></html>