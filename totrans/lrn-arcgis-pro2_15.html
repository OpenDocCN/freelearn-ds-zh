<html><head></head><body>
    
      
                    Automating Processes with ModelBuilder and Python
                
      
        <p>As you have now learned, performing analysis or editing a feature requires many steps. The more you use ArcGIS Pro, the more you will find yourself doing the same process again and again. You may also realize that some of the processes that you do repeatedly really require very little interaction on your part beyond selecting a feature and then telling ArcGIS Pro where to save the outputs.</p>
        <p><em>Wouldn't it be beneficial if you could automate processes that you perform repeatedly?</em> You can create the proverbial <strong>Easy</strong> button where you simply click on a single tool, fill in a few parameters, and the tool goes off, providing you with the results after it is done executing. This would certainly make your job easier.</p>
        <p>In this chapter, with ArcGIS Pro, you will learn how to create <strong>Easy</strong> buttons or tools using <strong>ModelBuilder</strong> and <strong>Python scripts</strong>. This will provide you with the skills to create automated processes that can run multiple tools together in sequence or at the same time to complete an operation. ModelBuilder uses a visual interface to create automation models without the need to be a programmer.</p>
        <p>Python is the primary scripting language for the ArcGIS platform. With it, you can create very powerful scripts that can be used within ArcGIS Pro, but also that can also integrate processes across all components of ArcGIS, including<strong>Enterprise</strong>,<strong>Online</strong>,<strong>Extensions</strong>,<strong>Portal</strong>, and more. However, creating Python scripts does require writing code.</p>
        <p>In this chapter, you will learn the following topics:</p>
        <ul>
          <li>Differentiating between tasks, geoprocessing models, and Python scripts</li>
          <li>Creating geoprocessing models</li>
          <li>Running a geoprocessing model</li>
          <li>Making a model interactive</li>
          <li>Learning about Python</li>
        </ul>
        <h1 id="uuid-61326c0b-ed5e-441f-a190-4acd5ca87ec0">Technical requirements</h1>
        <p>As with other chapters in this book, you will need to have <strong>ArcGIS Pro 2.5</strong> or later. Any license level of ArcGIS Pro will work for the exercises in this chapter.</p>
        <h1 id="uuid-b79b2c6a-f3f2-46c2-968f-61a8c948cdbe">Differentiating between tasks, geoprocessing models, and Python scripts</h1>
        <p>You learned about tasks in the last chapter and have read the introduction for this chapter; now you may be wondering what the difference is between a task, geoprocessing model, and Python script. That is a great question.</p>
        <p>You will find the answer to this question in this section, but to understand it, you must first understand what each of these things is. You already know what a task is, so we will now focus on gaining a better understanding of what models and Python scripts are. Once you understand that, you can then understand the differences between the three.</p>
        <h2 id="uuid-bd41505e-aa3f-4fbc-a917-49659d372ae3">Learning about geoprocessing models</h2>
        <p>A <strong>geoprocessing model</strong> is a custom tool created within the ModelBuilder window, which contains multiple geoprocessing tools along with their various parameters (including inputs, outputs, options, and other values) that work together as part of an integrated process that will run as if it was a single tool. The following diagram shows a sample of a very simple model:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/2a7e96a8-9f5f-42cd-848e-05a67ecba16a.png" style="width:39.92em;"/>
        </p>
        <p>From the preceding diagram, you can see that it contains two geoprocessing tools that you learned about in <a href="3da9832a-f595-47f3-bd8a-2b7c40455667.xhtml">Chapter 10</a>, <em>Performing Analysis with Geoprocessing Tools</em>, the Buffer and Clip tools. In the model, the Buffer tool creates buffer polygons around the input, Streets.</p>
        <p>The resulting buffer polygons are then used to clip out the features in Parcels, which is the Clip features input that is located inside the buffer polygons. Since both geoprocessing tools reside inside the model, the user only has to run the model instead of having to run each tool individually. The model automatically runs the tools based on the parameters specified within it. You will learn more about the components of a model and how to create one later in this chapter.</p>
        <p class="NormalPACKT">Geoprocessing models can include geoprocessing tools, Python scripts, iterators, model-only tools, and other models. This allows them to be as simple or complex as you need them to be to accomplish the process that you have designed them to complete. The ModelBuilder window allows users to create geoprocessing models in a visual environment. No coding is required to build a model.</p>
        <div><strong>Esri</strong> actually refers to ModelBuilder as a visual programming language.</div>
        <p class="NormalPACKT">Geoprocessing models can be created using <strong>ArcGIS Desktop</strong> (<strong>ArcMap</strong> or <strong>ArcCatalog</strong>) or ArcGIS Pro. However, models created in one software do not always run successfully in the other. The simpler a model is, the more likely it will be cross-application compatible. Another downside to a geoprocessing model is that it can only be run from ArcGIS Pro or ArcGIS Desktop. You cannot schedule them to run automatically at a specific date and time. At least not by themselves.</p>
        <p>Let's now learn about Python scripts.</p>
        <h2 id="uuid-b7937025-79e1-479d-a85b-83ade36e0fad">Understanding Python scripts</h2>
        <p>A <strong>Python script</strong> is also a custom tool that can run multiple geoprocessing tools along with their various parameters as part of an integrated process. However, unlike a model that does not require you to write programming code, Python scripts do. You must know the Python scripting language in order to create Python scripts. The following code is a small snippet of a Python script created for ArcGIS:</p>
        <pre>#--------------------------------------------------------------<br/># Name:        Union Tool Sample Script<br/># Purpose:     Runs the Union Geoprocessing tool from ArcGIS<br/># Author:      Esri &amp; Tripp Corbin<br/>#<br/># Created:     09/15/2015<br/># Updated:     05/08/2020 by Tripp Corbin, GISP<br/>#<br/># Usage: Union two feature classes<br/>#---------------------------------------------------------------<br/># Import the system modules<br/>import arcpy<br/><br/># Sets the current workspace to avoid having to specify the full path<br/># to the feature classes each time<br/>arcpy.env.workspace = "C:\\student\\IntroArcPro\\Databases\\Trippville_GIS.gdb"<br/><br/>#Runs Union Geoprocessing tool on 2 Feature classes<br/>arcpy.Union_analysis (["Parcels", "Floodplains"], "Parcels_Floodplain_Union", "NO_FID", 0.0003)</pre>
        <p>The preceding code starts with several comment lines that provide a general description of the purpose of the script and who created it. The next line after the commented description is an <kbd>import</kbd> command that loads the <kbd>arcpy</kbd> model so that the script can access ArcGIS functionality. This is followed by some more descriptive comments, and then a variable is defined to set the workspace where data used in the script will be accessed or saved to. Lastly, the script runs the <kbd>Union</kbd> tool, which you learned about in <a href="3da9832a-f595-47f3-bd8a-2b7c40455667.xhtml">Chapter 10</a>, <em>Performing Analysis with Geoprocessing Tools</em>. </p>
        <p>Python scripts have several advantages over a geoprocessing model:</p>
        <ul>
          <li>First, Python is not limited to ArcGIS. Python can actually be used to create scripts for many other applications, such as <strong>Excel</strong>, <strong>SharePoint</strong>, <strong>AutoCAD</strong>, <strong>Photoshop</strong>, <strong>SQL Server</strong>, and more. This means that you can use a Python script to run tools across multiple platforms to create a truly integrated process.</li>
          <li>Second, Python scripts can be run from outside of ArcGIS. This means you can schedule them to run at specific times and days using your operating system's scheduler application. If your script does include ArcGIS geoprocessing tools, the script will require access to an ArcGIS license to run successfully, but ArcGIS does not need to be open and active at the time when the script is scheduled to run.</li>
          <li>Third, Python can be used to create completely custom geoprocessing tools. It is not limited to just the geoprocessing tools that you will find in ArcGIS Pro toolboxes.</li>
        </ul>
        <p>Now let's see the difference between tasks, geoprocessing tools, and Python scripts.</p>
        <h2 id="uuid-62a0c271-c593-4533-971b-df52add2ecd6">What is the difference between the three?</h2>
        <p>Now that you have a much better understanding of what tasks, geoprocessing models, and Python scripts are, you will be able to properly understand the differences between them. Each can serve a purpose in standardizing and automating common workflows and processes.</p>
        <p>The following table will provide a clearer understanding of the differences between the three:</p>
        <table style="border-collapse: collapse;width: 100%" border="1">
          <tbody>
            <tr>
              <td style="width: 32.7853%">
                <strong>Parameters</strong>
              </td>
              <td style="width: 25.4352%">
                <strong>Task</strong>
              </td>
              <td style="width: 24.6615%">
                <strong>Geoprocessing model</strong>
              </td>
              <td style="width: 15.8607%">
                <strong>Python script</strong>
              </td>
            </tr>
            <tr>
              <td style="width: 32.7853%">Run a single geoprocessing tool automatically</td>
              <td style="width: 25.4352%">Yes, it can run a single tool automatically as part of a step.</td>
              <td style="width: 24.6615%">Yes</td>
              <td style="width: 15.8607%">Yes</td>
            </tr>
            <tr>
              <td style="width: 32.7853%">Allow users to provide input to tools before running</td>
              <td style="width: 25.4352%">Yes</td>
              <td style="width: 24.6615%">Yes</td>
              <td style="width: 15.8607%">Yes</td>
            </tr>
            <tr>
              <td style="width: 32.7853%">Run multiple geoprocessing tasks automatically and in sequence</td>
              <td style="width: 25.4352%">No</td>
              <td style="width: 24.6615%">Yes</td>
              <td style="width: 15.8607%">Yes</td>
            </tr>
            <tr>
              <td style="width: 32.7853%">Be included in a task</td>
              <td style="width: 25.4352%">No</td>
              <td style="width: 24.6615%">Yes</td>
              <td style="width: 15.8607%">Yes</td>
            </tr>
            <tr>
              <td style="width: 32.7853%">Be included in a geoprocessing model</td>
              <td style="width: 25.4352%">No</td>
              <td style="width: 24.6615%">Yes</td>
              <td style="width: 15.8607%">Yes</td>
            </tr>
            <tr>
              <td style="width: 32.7853%">Provides a documented workflow</td>
              <td style="width: 25.4352%">Yes</td>
              <td style="width: 24.6615%">Yes</td>
              <td style="width: 15.8607%">No</td>
            </tr>
            <tr>
              <td style="width: 32.7853%">Run from outside (externally) of ArcGIS Pro</td>
              <td style="width: 25.4352%">No</td>
              <td style="width: 24.6615%">No</td>
              <td style="width: 15.8607%">Yes</td>
            </tr>
            <tr>
              <td style="width: 32.7853%">Integrate with other applications</td>
              <td style="width: 25.4352%">No</td>
              <td style="width: 24.6615%">No</td>
              <td style="width: 15.8607%">Yes</td>
            </tr>
            <tr>
              <td style="width: 32.7853%">Be scheduled to run at specific times and days</td>
              <td style="width: 25.4352%">No</td>
              <td style="width: 24.6615%">No</td>
              <td style="width: 15.8607%">Yes</td>
            </tr>
            <tr>
              <td style="width: 32.7853%">Requires knowledge of programming language</td>
              <td style="width: 25.4352%">No</td>
              <td style="width: 24.6615%">No</td>
              <td style="width: 15.8607%">Yes</td>
            </tr>
          </tbody>
        </table>
        <p/>
        <p>So, as you can now see from the preceding table, there is a good bit of difference between tasks, geoprocessing models, and Python scripts. Tasks are for defining workflows that include several steps. A task might include the use of a geoprocessing model or a Python script, but a geoprocessing model or a Python script cannot reference a task.</p>
        <p>Now that you have an understanding of the differences between tasks, geoprocessing models, and Python scripts, we will start exploring how to create a geoprocessing model.</p>
        <h1 id="uuid-4dfd545d-fc30-4e75-b498-b3ca89e63ac6">Creating geoprocessing models</h1>
        <p>As mentioned earlier, geoprocessing models are custom tools that you create from within ModelBuilder. ModelBuilder provides the graphical interface for building models as well as allowing you to access additional model-only tools, iterators, environmental settings, and model properties.</p>
        <p>Models are created for several reasons. The first and most common reason is to automate repeated processes performed in ArcGIS Pro. If you have an analysis, a conversion, or another process that you perform on a regular basis, then a model can be used to automate it.</p>
        <p>Secondly, you can use a model to think through and create a flow chart process within ArcGIS Pro. This can help you ensure that you have considered all the tools and data that you will need to complete a process. Once completed, the model then provides the tool for completing that process as well as the visual and textual documentation that explains how the process was performed.</p>
        <p>You can share models with those in your organization so that they can use it to perform the process. This can reduce your workload and allow you to concentrate on other tasks that require higher knowledge and skill levels. Because a model runs the geoprocessing tools contained within it automatically, you can create a model that is easy for other less <strong>Geographic Information System</strong> (<strong>GIS</strong>)-savvy members of your organization to run by themselves without needing a full understanding of ArcGIS Pro. This also helps standardize our methodologies, ensuring that everything is done in a consistent and approved manner.</p>
        <p>All of this helps to save us time and money through increased efficiency, which is ultimately the main power of ModelBuilder. Like tasks, models consist of multiple components and have their own terminology associated with them. We will learn about this in the next section.</p>
        <h2 id="uuid-b29931ae-2fe4-4175-9569-5e9daac92eb9">Understanding model components and terminology</h2>
        <p class="NormalPACKT">Before you can create a model, you need to understand the pieces and parts that form them. Models include a series of connected processes. Each process includes a tool that can be a geoprocessing tool, another model, or a Python script. Each tool has variables that serve as inputs or outputs.</p>
        <p class="NormalPACKT">The following diagram shows you two connected processes:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/6490b18d-de6d-441e-bf72-61295b79815f.png" style="width:49.33em;"/>
        </p>
        <p>As you can see in the preceding diagram, the model contains two processes built around the Buffer and Union tools. Each of these tools has a number of variables feeding into it. Variables are identified by the blue and green ovals. Notice that the two processes are sharing a variable – Street_Buffer. This variable is an output of the Buffer tool and also an input for the Union tool.</p>
        <p>There are three basic types of variables that are included in a model. They are as follows:</p>
        <ul>
          <li><strong>Data variables</strong>: These variables are existing data that is used as an input to a tool, script, or model. These can be layers in a map, standalone tables, text files, feature classes, shapefiles, and more.</li>
          <li><strong>Value variables</strong>: These variables are additional information that a tool may use to run. In the case of the Buffer tool, the distance used to create the buffer is considered a value variable as are the options to dissolve, end type, and the other parameters found that appear when you run the Buffer tool normally in the Geoprocessing pane.</li>
          <li><strong>Derived variables</strong>: These variables are the outputs of a process. Again, this can be a new layer, feature class, table, raster, or more depending on the tool used in the process.</li>
        </ul>
        <p>The following diagram shows you an example of the three types of basic variables in a model:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/584078c6-6b5a-4350-ab2f-811e8e51f088.png" style="width:26.75em;"/>
        </p>
        <p class="NormalPACKT">Since ModelBuilder is a visual programming language, as you can see from the preceding diagram, you can distinguish the types of variables based on their colors. While you can adjust these settings by default, Data Variable is a darker blue. Value Variable is a lighter blue and Derived Variable is green.</p>
        <p>Next, we will learn how to save a model that you have created.</p>
        <h2 id="uuid-cb726006-39bb-41ad-82df-b8d26c05d52f">Saving a model</h2>
        <p>If you wish to save a model that you created so that you can use it again or share it with others, you must save it in a custom toolbox that you will create. Models cannot be saved in a system toolbox that is automatically included with ArcGIS Pro when it is installed.</p>
        <p>When you create a new project, ArcGIS Pro automatically creates a custom toolbox for that project. It is stored in the <kbd>Project</kbd> folder as a <kbd>.tbx</kbd> file. This provides you with an easy to use place to store your models. This toolbox is also automatically linked to your project and accessible in the Catalog pane, as follows:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/bbe96687-4f50-41bb-a16d-4dd35e918985.png" style="width:37.58em;"/>
        </p>
        <p class="NormalPACKT">You can also create custom toolboxes within a geodatabase so that along with it, your models and Python scripts are stored as well with your GIS data, as illustrated in the following screenshot (this is a good option if the models or tools that you save to the toolbox will be used in multiple ArcGIS Pro projects):</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/2c270ca5-a880-4877-b30c-06b7cce77c03.png" style="width:30.67em;"/>
        </p>
        <p class="NormalPACKT">You can also create other custom <kbd>.tbx</kbd> files besides the one that is automatically created with a new project. Using a custom <kbd>.tbx</kbd> file is perfect if the tool and models you save to it will not only be used with multiple projects but also across multiple databases or in the case of consultants and multiple clients. The following screenshot shows you an example of a custom toolbox file located in a folder: </p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/a9013ffa-7706-4a0e-9ddd-cc372e4e0972.png" style="width:35.00em;"/>
        </p>
        <p>Using custom <kbd>.tbx</kbd> files to store models also makes it easier to share them with others since they are smaller than a geodatabase, which also includes all the GIS data. The <kbd>.tbx</kbd> files can easily be emailed, uploaded to <strong>File Transfer Protocol</strong> (<strong>FTP</strong>) sites, or placed in your ArcGIS Online account.</p>
        <p>Now that you have a good general understanding of what a model is, its components, and how to save one, it is time to put that knowledge to use.</p>
        <h2 id="uuid-17964edf-662f-4864-bd15-eacbf20e32bf">Exercise 12A – Creating a model</h2>
        <p>A new ordinance was just passed to protect the streams in the Trippville area. It requires all new building or improvement projects to take place at least 150 feet from the centerline of all creeks or streams. This will hopefully protect the banks from erosion and reduce polluted runoff from reaching them.</p>
        <p>The community and economic development director has asked you to calculate the total area of each parcel that is inside the non-disturb area and how much of each parcel is out. Since you will need to update this analysis anytime a new subdivision or commercial development is added, for this, you have decided to create a model that you can run every time you need to perform these calculations.</p>
        <p>In this exercise, you will create a simple model that will calculate how much of each parcel is inside and outside a non-disturb buffer area around the streams. This model will include a couple of geoprocessing tools and their associated variables.</p>
        <h3 id="uuid-4fd6926f-2e58-46d4-b12b-243355f503da">Step 1 – Opening the project and the ModelBuilder window</h3>
        <p>The first step is to open the project and then the ModelBuilder window so that you can begin creating the model:</p>
        <ol>
          <li>Start ArcGIS Pro and open the <kbd>Ex12.aprx</kbd> project found in <kbd>C:\Student\IntroArcPro\Chapter12</kbd>.</li>
          <li>When the project opens, expand the <kbd>Toolboxes</kbd> folder in the Catalog pane.</li>
          <li>Right-click on the Ex12 toolbox that you see on your screen.</li>
        </ol>
        <ol start="4">
          <li>Select the New | Model option, as illustrated in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/f7b8dc79-96db-4a5f-98ae-ef4f41d470ec.png" style="width:21.25em;"/>
        </p>
        <p style="padding-left: 60px" class="NormalPACKT">ModelBuilder should now be open and the ModelBuilder tab should have appeared in the ribbon. The ModelBuilder window and tab are used together to create or edit models. As you can see in the following screenshot, the ModelBuilder tab contains tools for saving the model, navigating in the ModelBuilder window, and adding content to the model:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/1deb5a84-6d48-4b0a-8e25-0288690e63c3.png" style="width:81.17em;"/>
        </p>
        <p>You will now begin using these tools to create your model.</p>
        <h3 id="uuid-7f652efa-c8fc-4d2d-9b69-75b4cda0fb81">Step 2 – Adding model components</h3>
        <p>In this step, you will begin adding tools and variables to your model. You will explore some of the different methods that can be used here. You will start by adding the process that will generate the non-disturb buffers around the streams:</p>
        <ol>
          <li>Click on the Tools button on the Insert group on the ModelBuilder tab in the ribbon. This opens the Geoprocessing pane on the right side of the interface.</li>
          <li>Click on the Toolboxes tab at the top of the pane to expose the various toolboxes within ArcGIS Pro. These toolboxes will be your system toolboxes.</li>
        </ol>
        <ol start="3">
          <li>Expand the Analysis Tools toolbox and then the Proximity toolset.</li>
          <li>Drag and drop the Buffer tool from the toolbox into the ModelBuilder window so that it looks like this:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/14d7435a-c302-4f12-8475-f9af08011a53.png" style="width:58.25em;"/>
        </p>
        <p style="padding-left: 60px">You have just added your first process to a model. Model processes will exist in one of three states: <strong>not ready to run</strong>, <strong>ready to run</strong>, and <strong>have been run</strong>. The process that you just added is in the <strong>not ready to run</strong> state.</p>
        <p style="padding-left: 60px">ArcGIS Pro indicates that visually by displaying the tools and variables in gray. A process will be in the <strong>not ready to run</strong> state until all required variables have been defined. In the case of the <strong>Buffer</strong> tool, you have not yet defined the three variables required: <strong>input feature class</strong>, <strong>buffer distance</strong>, and <strong>output feature class</strong>. You will now do that.</p>
        <ol start="5">
          <li>The input feature class for the Buffer tool used in the model will be the Streams layer in your map. So, you will now add that layer as a variable to the model. Select the Streams layer in the Contents pane and drag it into the ModelBuilder window. It will be added as a blue oval, as shown in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/ca994cf6-9f5e-443d-beb5-31c8064a16a0.png" style="width:44.75em;"/>
        </p>
        <ol start="6">
          <li>Click somewhere within the blank space in ModelBuilder to deselect the Streams variable.</li>
          <li>You now need to connect the Streams variable that you just added to the Buffer tool. Click on the Streams variable and with your left mouse button still depressed, move your mouse pointer until it is over the Buffer tool. Then, release your mouse button.</li>
          <li>A small pop-up menu should appear; select Input Features. You have just defined the input feature class for the <strong>Buffer</strong> tool.</li>
          <li>Now double-click on the Buffer tool in the ModelBuilder window. This will open the Tools dialog window in ModelBuilder so that you can define additional variables.</li>
          <li>The output should automatically be set to Streams_Buffer, which is being saved to <kbd>C:\Student\IntroArcPro\Chapter12\Ex12.gdb\</kbd>. Verify whether this is true by hovering your mouse over the output feature class name. This will be fine for this exercise so that you will leave it as is without changing it.</li>
          <li>In the Distance [value or field], type <kbd>150</kbd>, and verify that the units are Feet.</li>
        </ol>
        <ol start="12">
          <li>Since the director has not indicated that retaining any of the stream attributes in the new buffer layer is important for the calculations, you will have the resulting buffers dissolve. Click on the drop-down arrow under Dissolve Type and select Dissolve all output features into a single feature:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/6f80d283-3947-4f18-9cf1-eed0fd20cff3.png" style="width:30.17em;"/>
        </p>
        <p style="padding-left: 60px">The Buffer tool window should now look similar to the preceding screenshot. Depending on what you may have done previously, the name of the input feature may be slightly different.</p>
        <ol start="13">
          <li>Click OK once you have verified your settings.</li>
          <li>Click on the Auto Layout button on the ModelBuilder tab.</li>
        </ol>
        <p style="padding-left: 60px">Your model should now include a single completed process that is in the <strong>ready to run</strong> state. You can tell it is ready to run because the tool and all lined variables are now displayed with a colored fill that is not gray, as shown in the following screenshot:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/75c5b39e-0ae6-42a8-987f-2bf5fd5527d6.png" style="width:24.25em;"/>
        </p>
        <p style="padding-left: 60px">Now let's save your model to ensure your hard work is not lost in case something happens.</p>
        <ol start="15">
          <li>Click on the Properties button in the Model group on the ModelBuilder tab.</li>
          <li>Fill in the following details in the respective properties:
<ul><li>Type <kbd>ParcelsStreamProtectionBuffer</kbd> in Name field.</li><li>Type <kbd>Parcels Stream Protection Buffer Analysis</kbd> in the Label field.</li><li>Leave all other properties with default settings.</li></ul></li>
          <li>Verify that your Tool Properties window looks like the following screenshot and then click OK:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/5895063b-98c4-4e8b-bb09-9ab2b436e864.png" style="width:41.50em;"/>
        </p>
        <ol start="18">
          <li>Click the Save button located in the Model group on the ModelBuilder tab to save the model. If you still have the Catalog pane open, you should see the name of the model change from model to the label that you entered previously.</li>
        </ol>
        <div><p>The name for a model cannot contain spaces or other special characters with the exception of underscores. The label can be much more descriptive and does not have the same restrictions.</p>
        </div>
        <p>The process that you just created in the model will generate the buffer areas around the streams. Now you need to add another process that will calculate how much of each parcel is inside and outside that buffer area.</p>
        <p>You will use the <strong>Union</strong> tool to union the parcels with the newly created stream buffer. This will create a new feature class that will split each parcel where it is overlapped by the stream buffer, thus allowing you to determine how much is inside and outside the buffer.</p>
        <h3 id="uuid-90b7a4c3-c843-4421-8d5d-0cd6a2f0dc27">Step 3 – Adding another process</h3>
        <p>In this step, you will add another process to your model. This process will include the <strong>Union</strong> tool. You will then link this new process to the one that you created in the previous step:</p>
        <ol>
          <li>Click on the Tools button in the ModelBuilder tab again to open the Geoprocessing pane.</li>
          <li>Expand the Overlay toolset in the Analysis toolbox.</li>
          <li>Add the Union tool to your model by right-clicking on the tool and selecting Add to model.</li>
          <li>If required, using your scroll wheel, zoom out in the ModelBuilder window until you have room to see both the Union tool and the Buffer tool.</li>
          <li>With the Union tool and the Output Feature Class variable selected, use your mouse to move them so that they are located below the Buffer tool, as shown in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/a73e4311-24f1-41f2-bb1b-4da04eec2bdc.png" style="width:35.67em;"/>
        </p>
        <p style="padding-left: 60px">You have now added the Union tool to the model. Now you need to link it to the output from the Buffer tool and define the rest of its required variables.</p>
        <ol start="6">
          <li>Double-click on the Union tool to open the tool window.</li>
          <li>In the Union tool window, click on the small arrow next to Input Features, and then select Parcels from the list that displays.</li>
        </ol>
        <ol start="8">
          <li>Repeat this same process to select Streams_Buffer located under Model Variables.</li>
          <li>Set the output to <kbd>C:\Student\IntroArcPro\Chapter12\Ex12.gdb\Parcels_StreamBuff_Union</kbd>.</li>
          <li>Verify that your Union tool settings match the following screenshot and click OK:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/4c89db7d-b017-4b69-8096-f9d33216a280.png" style="width:27.17em;"/>
        </p>
        <p style="padding-left: 60px">Your entire model should now be in the <strong>ready to run</strong> state and look similar to this:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/7e2426f8-5fc1-40cd-b0fd-d0aea0bb77e7.png" style="width:32.92em;"/>
        </p>
        <p style="padding-left: 60px">As compared to the preceding diagram, your layout may be different. That is acceptable as long as the proper connections are made, and the processes are in the <strong>ready to run</strong> state.</p>
        <ol start="11">
          <li>Save your model and your project.</li>
          <li>You may close ArcGIS Pro or leave it open if you plan to continue.</li>
        </ol>
        <p>You have learned how to create a model and have understood its components. After creating a model, of course, you will want to run it. There are many ways to run a model. So, we will look at how to run a model in the next section.</p>
        <h1 id="uuid-3818fbbc-df6a-459a-b2aa-8e7111a08eba">Running a model</h1>
        <p>You can run the entire model and the processes in the <strong>ready to run</strong> state or just a single process in the model. In this section, you will explore the different ways you can run a model you create in ModelBuilder.</p>
        <p>If you wish to run the entire model, the easiest way to do that is simply double-click on it, from the toolbox it is stored in. This will run all processes in the model that are in the <strong>ready to run</strong> or <strong>have been run</strong> state. If you have allowed the users to provide values for some of the variables within the model, they will be prompted to enter those before the model is run.</p>
        <p>Otherwise, if you did not allow for user input, the model will just indicate that there are no parameters in the geoprocessing window and all you need to do is click the Run button. You will learn how to make a model interactive a little later in this chapter.</p>
        <p>You can also choose to run the model or processes in the model from the <strong>ModelBuilder</strong> window. Clicking on the Run button in the <strong>ModelBuilder</strong> tab will run all ready to run processes within the model. It will not run processes that are in the <strong>have been run</strong> or <strong>not ready to run</strong> state. This allows you to build and test a model as you go without being required to run the entire model.</p>
        <p>Now that you know a little more about how to run a model, you will get to put that knowledge into practice. </p>
        <h2 id="uuid-f91fe14d-d673-4fd8-a89d-b2f02550f013">Exercise 12B – Running a model</h2>
        <p>In this exercise, you will first run your model from within ModelBuilder. Then, you will get to run it directly from the toolbox so that you can see what your users will experience when they run the model.</p>
        <h3 id="uuid-fbf25db7-fca3-4d65-893b-9981a6762082">Step 1 – Running the model from ModelBuilder</h3>
        <p>In this step, you will run the model that you created in <em>Exercise 12A</em> in <a href="7747c679-b20b-47b2-946d-a1f8c5a9ded0.xhtml">Chapter 12</a>, <em>Automating Processes with ModelBuilder and Python</em>, from within ModelBuilder. You will also explore how to run individual processes so that you can test your model as you create it:</p>
        <ol>
          <li>If you closed ArcGIS Pro after the last exercise, start ArcGIS Pro and open the <kbd>Ex12.aprx</kbd> project.</li>
          <li>Expand the Toolboxes folder in the Catalog pane and then expand the Ex12 toolbox.</li>
          <li>Right-click on the model that you created in <em>Exercise 12A</em> and select Edit from the displayed context menu. This will open the ModelBuilder window.</li>
        </ol>
        <p style="padding-left: 60px">If you created your model successfully in the last exercise and saved it, all processes should be in the <strong>ready to run</strong> state. This is indicated by all tools and variables having a solid color fill applied. If any are filled with gray or empty, then you need to go back to <em>Exercise 12A</em>in <a href="7747c679-b20b-47b2-946d-a1f8c5a9ded0.xhtml">Chapter 12</a>, <em>Automating Processes with ModelBuilder and Python</em>, and work back through the exercise.</p>
        <ol start="4">
          <li>Right-click on the Buffer tool in ModelBuilder. Select Run to run the <strong>Buffer</strong> tool with the connected variables that you defined in the model. A small window will pop up inside ModelBuilder that displays the progress of the <strong>Buffer</strong> tool and will let you know when it completes. When the tool is finished, notice what happens to the graphics for the <strong>Buffer</strong> tool and its associated variables, as shown in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/ea3eb701-b45a-4785-9f03-419b59691b1d.png" style="width:37.58em;"/>
        </p>
        <p style="padding-left: 60px">The <strong>Buffer</strong> tool process is now in the <strong>has been run</strong> state. This means you have successfully run that process in the model. </p>
        <p>Question: <em>How have the graphics for the <strong>Buffer</strong> tool and its associated variables changed?</em></p>
        <p style="padding-left: 60px">As you are beginning to learn, the state of a process will impact how it runs. Now that this process is in the <strong>has been run</strong> state, it will not run again if you click the Run button in the ribbon. The Run button will only run those processes that are in the <strong>ready to run</strong> state. Let's verify that, though.</p>
        <ol start="5">
          <li>Close the pop-up window that appeared when you ran the Buffer tool by clicking on the x located in the upper right corner.</li>
          <li>Click the Run button in the Run group on the ModelBuilder tab. Watch what happens to the model as it is run.</li>
        </ol>
        <p>Question: <em>Did the model try to re-run the <strong>Buffer</strong> tool? What tool or tools did the model run when you clicked on the <strong>Run</strong> button and why?</em></p>
        <p>We will now move on to the next step about how to reset the run state.</p>
        <h3 id="uuid-51644d09-e800-48e9-8915-d77f73c8101d">Step 2 – Resetting the run state</h3>
        <p>In this step, you will learn how to reset the run state of all the processes in the model that are in the <strong>have been run</strong> state back to the <strong>ready to run</strong> state:</p>
        <ol>
          <li>Click on the Validate button in the Run group on the ModelBuilder tab in the ribbon as illustrated in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/0408ab86-0fe4-41f9-93e1-48d69fce0ae7.png" style="width:12.42em;"/>
        </p>
        <p>Question: <em>What happens to all the processes in the model that were in the <strong>have been run</strong> state?</em></p>
        <ol start="2">
          <li>Click the Run button on the ribbon and watch how your model runs this time. All the processes will run this time because all of them are in the <strong>ready to run</strong> state.</li>
        </ol>
        <p style="padding-left: 60px">Now you will actually verify that your model ran and created the feature classes that it was supposed to in the project database.</p>
        <ol start="3">
          <li>Expand the Databases folder in the Catalog pane and then expand the Ex12 geodatabase.</li>
        </ol>
        <p style="padding-left: 60px">If you do not see anything in the geodatabase, then you may need to right-click on it and select Refresh. That should allow it to display the new feature classes that your model has created.</p>
        <p>Question: <em>What do you see in this database?</em></p>
        <ol start="4">
          <li>Right-click on each feature class that you see in the Ex12 geodatabase and select Delete until the database is empty. If you are asked whether you are sure that you want to permanently delete these items, select Yes. Deleting these feature classes will allow you to verify the model runs properly when you run it directly from the toolbox in the next step.</li>
        </ol>
        <ol start="5">
          <li>Close the <strong>ModelBuilder</strong> window. If asked to save the model, do so.</li>
        </ol>
        <p>We will now move onto the next step about how to run the model from a toolbox.</p>
        <h3 id="uuid-79b17e79-de29-471f-bbd3-c4f0496628e4">Step 3 – Running the model from a toolbox</h3>
        <p>In this step, you will now run the model directly from the toolbox. This will be how most users will access and run models that you create. Running the model using this method will allow you to have the same experience that your users will have when they run the model:</p>
        <ol>
          <li>Make sure the Map view is active by clicking on the Map tab at the top of the view area.</li>
          <li>In the Catalog pane, expand the Toolboxes | Ex12 toolbox.</li>
          <li>Double-click on the Parcels Streams Protection Buffer Analysis model you created, as shown in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/3a95511d-8ed3-45fc-9f65-2b0082978d2f.png" style="width:20.33em;"/>
        </p>
        <ol start="4">
          <li>When you double-click on your model, it should open in the Geoprocessing pane. It will state that there are no parameters. This is expected because you have not defined any variables as parameters that will accept user input. Click the Run button at the bottom of the Geoprocessing pane.</li>
          <li>When the model is finished, return to the Catalog pane.</li>
          <li>Go to Databases | Ex12 geodatabase again.</li>
        </ol>
        <p>Question: <em>What feature class is now in the Ex12 geodatabase and how does that compare to when you ran the model from inside ModelBuilder? </em></p>
        <p style="padding-left: 60px">When you ran the model from inside ModelBuilder, it produced two different feature classes within the Ex12 geodatabase. However, when you ran it from the toolbox, it only produced one. <em>Why is that?</em></p>
        <p style="padding-left: 60px">The answer is the feature class that was created by the <strong>Buffer</strong> tool in the model is considered <strong>intermediate data</strong>. Intermediate data is any feature class or table that is created within a model that is then used by other tools and is not a final result of a series of linked processes.</p>
        <p style="padding-left: 60px">When you run a model from a toolbox, it will automatically clean up after itself. This means it automatically deletes the intermediate data that is created as the model runs. The only data it leaves is the final results of any processes in the model, which is not intermediate data. The end result is that you have the data that you need without also being left with a lot of partial datasets or layers that can clutter your database.</p>
        <ol start="7">
          <li>Save your project and close ArcGIS Pro.</li>
        </ol>
        <p>You have now learned how to run your model using various methods depending on where you are within the application. While creating or editing your model, you now know how to run individual processes that are included in the model. You also learned how to run your model from ModelBuilder and from a toolbox.</p>
        <p>Now that you have created and run your first model, you can now run this model anytime you need to update the calculations for the areas of each parcel in and outside a floodplain.</p>
        <p>We will learn how to make our model more interactive for the user in the next section.</p>
        <h1 id="uuid-09ea7c65-8c17-49c0-9c01-630b870c1531">Making a model interactive</h1>
        <p>So, you have created your first model. It is a very efficient tool that will help you quickly update information. However, <em>what happens if the buffer distance changes or the director wants to look at different layers such as land use or just the commercial properties?</em> In this section, you will explore different ways you can allow users to provide input for specified parameters included within your model.</p>
        <p>Right now, the model you created is hardcoded to a specific set of variables. If something changes, you will be forced to edit the model before it can be used. <em>Wouldn't it be more effective to allow others to specify different values for the variables in the model when they run it?</em> You can allow that. It simply requires you to designate a variable as a parameter within the model. This allows the user to provide a value before they run the model.</p>
        <p>To designate a variable as a parameter so that a user can specify a value when it is run, you simply right-click on the variable in ModelBuilder and select Parameter. When you do that, a small capital P will appear next to the variable indicating that it is now a model parameter, as illustrated in the following diagram:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/5399ebfe-9777-4942-95bd-7ee473a4339d.png" style="width:32.50em;"/>
        </p>
        <p>In the preceding diagram, you can see that the Parcels and Parcels_ StreamBuff_Union variables are both marked as parameters. This will allow the user to select the values that they wish to use for those variables. This means they will be able to union the stream buffers with another layer besides just the parcels layer and control where the results are saved to and the name they are given.</p>
        <p>Making a model interactive can greatly increase its functionality. It will allow the model to be used in different scenarios and with different datasets. The downside is that the more interactive you make a model, the greater the chance of introducing operator error. Users may select the wrong input layer for a tool or forget where they set the final results to be saved. This can result in more problems than the model was designed to solve. So, it is always a balancing act between flexibility and hard coding to eliminate error sources.</p>
        <p>Now let's give you an opportunity to make your model interactive.</p>
        <h2 id="uuid-e24ef1e0-b24f-4b0a-a717-72c36506a664">Exercise 12C – Allowing users to provide inputs to run models</h2>
        <p>The director was impressed with the model that you created. It allowed them to easily calculate the area of each parcel that was in and out of the stream protection area. The council is considering changing the buffer distance for the non-disturb area and the director wants to look at the impact of several different distances. So, they will need to be able to run the model in a way that allows them to specify different buffer distances and save the overall results with different names so that they can review the results of the different distances.</p>
        <p>In this exercise, you will make the previous model you created interactive to those users and provide their own values to variables within the model. You will allow users to specify the buffer distance that they want to use and the final output of the model.</p>
        <h3 id="uuid-699a3d1e-a9ff-4b49-95f9-471149b22ded">Step 1 – Marking variables as parameters</h3>
        <p>In this step, you will learn how to designate variables as parameters within a model. You will make the buffer distance and the output of the <strong>Union</strong> tool parameters within your model:</p>
        <ol>
          <li>Open ArcGIS Pro and the <kbd>Ex12.aprx</kbd> project.</li>
          <li>Expand the Toolboxes folder in the Catalog pane.</li>
          <li>Expand the Ex12 toolbox and right-click on the Parcels stream. Right-click on the Protection Buffer Analysis model you created in the previous exercise. Select Edit to open it in ModelBuilder.</li>
          <li>Right-click on the Output Variable for the Union tool and select Parameter. A small P should appear beside the variable, as shown in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/0489c8d2-b0f9-4957-904a-ddc9a6b56b10.png" style="width:32.42em;"/>
        </p>
        <ol start="5">
          <li>Then, save your model.</li>
        </ol>
        <p>By making the output of the <strong>Union</strong> tool a model parameter, users will now be able to choose where they will save the final output of the model and what it will be named. This is one of the two requirements that the director asked for. Now you need to allow users to specify a buffer distance.</p>
        <p>The buffer distance is currently hardcoded into the model. You need to make it a parameter as you did the output of the <strong>Union</strong> tool. However, the buffer variable is hidden. So, first, you will need to make it visible within the model and then designate it as a parameter.</p>
        <h3 id="uuid-789bf512-82c5-4b08-85f0-adaccf01c79c">Step 2 – Exposing hidden variables</h3>
        <p>In this step, you will expose the distance variable for the <strong>Buffer</strong> tool so that you can make it a parameter:</p>
        <ol>
          <li>Right-click on the Buffer tool in ModelBuilder.</li>
          <li>Select the Create Variable | From Parameter option. This will display a list of all the hidden variables associated with the <strong>Buffer</strong> tool.</li>
          <li>Select Distance [value or field], as shown in the next screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/4925b4a4-012d-4e3b-b9df-1fa9ae3f46ae.png" style="width:30.50em;"/>
        </p>
        <p style="padding-left: 60px">The <strong>Distance</strong> variable should now be visible in your model. Now that it is visible you will be able to designate it as a parameter.</p>
        <ol start="4">
          <li>Move your mouse pointer so that it is over the Distance variable that you just added to our model. When your pointer changes to two crossed arrows, indicating that it is now in move mode, drag the Distance variable so it is above the Buffer tool, as shown in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/ca7a5a76-d90f-492c-94f8-9d59f305f7de.png" style="width:15.67em;"/>
        </p>
        <ol start="5">
          <li>Right-click on the Distance variable and select Parameter. The small capital P should now appear next to the Distance variable, indicating it is now a model parameter.</li>
          <li>Save your model.</li>
        </ol>
        <p class="mce-root"/>
        <p>Your model should now look very similar to this:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/3d6bece0-9a84-4e53-a962-6135d86cc6eb.png" style="width:33.17em;"/>
        </p>
        <p>The model shown in the preceding screenshot should now meet the requirements that the director asked for. They will now be able to use different distances from the streams and see the impact that it will have on the parcels. The director can save the result to a different name and location each time they run the model.</p>
        <p>The last step is to verify your work. You need to test run the model to see whether it allows users to specify a distance and the output values.</p>
        <h3 id="uuid-3df51b9c-fa82-46bc-9532-1eb1ac4fb9dc">Step 3 – Running the model</h3>
        <p>In this step, you will run the model from the toolbox to make sure it will allow the director to input a distance and specify where the output will be saved. Since you have not changed the overall logic or functionality of the model, there is no need to test the processes inside the model again:</p>
        <ol>
          <li>Close the ModelBuilder view.</li>
          <li>If needed, expand the Toolboxes folder and the Ex12 toolbox in the Catalog pane.</li>
          <li>Double-click on the model that you created to open it in the Geoprocessing pane.</li>
        </ol>
        <p style="padding-left: 60px">Notice that this time when you open the model in the Geoprocessing pane, it looks different. Instead of saying no parameters, it is asking for user input. The user can provide values for the two variables that you designated as parameters.</p>
        <ol start="4">
          <li>Change the value for the Parcels_Stream_Union variable to <kbd>C:\Student\IntroArcPro\Chapter12\Ex12.gdb\<strong><em>%Your Name%_Results</em></strong></kbd> (that is, <kbd>Tripp_Results</kbd>).</li>
        </ol>
        <ol start="5">
          <li>Change the Distance value to any value that you wish that is not 150 feet. You can even change the units if you desire.</li>
          <li> After you are done changing the values of the variables, click the Run button at the bottom of the Geoprocessing pane.</li>
          <li>Once the model has finished running, close the Geoprocessing pane.</li>
          <li>In the Catalog pane, verify that the resulting output feature class is in <kbd>Ex12.gdb</kbd>.</li>
          <li>Save your project and close ArcGIS Pro.</li>
        </ol>
        <p>You have now created your first interactive model. This model provides more flexibility for the user, allowing them to investigate different scenarios. Next, you will be introduced to Python, which is the primary scripting language for the ArcGIS platform. You can use Python scripts to automate processes and then schedule them to run at specific times. Python scripts can also be used to help integrate ArcGIS with other applications. This makes the Python scripting language a powerful tool for increasing the effectiveness of your GIS.</p>
        <h1 id="uuid-fe306340-cea7-471b-89f6-ad933f887f25">Learning about Python</h1>
        <p>Python is the primary scripting language for the ArcGIS platform. It has replaced others, such as <strong>Visual Basic</strong> (<strong>VB</strong>). <strong>ArcGIS Pro 2.5</strong> is currently compatible with <strong>Python 3.6.9</strong>, which is automatically installed when you install ArcGIS Pro.</p>
        <p>Python has been fully integrated with the ArcGIS Geoprocessing <strong>Application Programming Interface</strong> (<strong>API</strong>) via the <kbd>ArcPy</kbd> module. This means you can use the geoprocessing tools from within ArcGIS Pro within your scripts, allowing you to automate and schedule tasks.</p>
        <p>Unlike ModelBuilder, Python is not limited to just the ArcGIS platform. It is used to create scripts that access functions in other applications, the operating system, and the computer. This gives you the ability to create scripts that extend and integrate ArcGIS Pro's functionality across platforms and applications. As a result, Python is a very versatile tool in the GIS developer's arsenal.</p>
        <p>Python scripts can be stored within ArcGIS Toolboxes or in standalone folders as <kbd>.py</kbd> files.  Unlike other programming languages such as <strong>C++</strong> or VB, creating Python scripts doesn't require special application development software. You can use simple text editors such as <strong>Notepad</strong> or <strong>WordPad</strong>. There are several free <strong>Integrated Development Environment</strong> (<strong>IDE</strong>) applications for Python, such as <strong>PythonWin</strong> or <strong>IDLE</strong>. IDE applications provide a better development environment over text editors because they include automatic coding hints and debugging tools. When you install ArcGIS, it automatically installs Python and IDLE.</p>
        <p>ArcGIS Pro also includes a Python window that can be used to write Python scripts, run tools using Python, and load Python scripts to view code. New Python developers often find the Python window helpful because of its integrated interface and its autosuggest function, which helps guide proper syntax.</p>
        <p>Let's look at some Python basics first.</p>
        <h2 id="uuid-d292f09c-e08b-4cb3-8c72-4dbf962222a4">Understanding Python basics</h2>
        <p>Since this is your first introduction to Python, it is a good time to introduce some fundamentals and best practices. These will serve you well as you begin to write your own scripts.</p>
        <h3 id="uuid-7c481e87-94ab-4fae-896f-5854529abe11" class="">Commenting and documenting your scripts</h3>
        <p>When you begin creating a Python script, it is considered a best practice to include documentation within the code that will help other developers understand what is happening within the code and the purpose-specific parts of the script. This can also prove helpful for yourself if you have to come back to a script that you wrote some time ago and need to make changes.</p>
        <p>This in-code documentation is traditionally accomplished using commenting. Think of commenting code as a form of metadata stored within the code itself. It provides users and other programmers with the <em>who</em>, <em>what</em>, <em>where</em>, <em>when</em>, and <em>why</em> data. They may need this data to successfully use, integrate, or edit a script that you create. Different programming languages use different methods to comment code. Python uses the <strong>pound sign</strong> (#) to identify comment lines within its code, as illustrated in the following screenshot:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/8050c8a6-a570-4579-a5b5-e9caac60ad86.png" style="width:33.42em;"/>
        </p>
        <p class="mce-root"/>
        <p>As you can see in the preceding screenshot, anytime Python encounters a line that starts with a #, it ignores that line and moves to the next. It will keep ignoring lines until it encounters one that does not have a # at the beginning.</p>
        <p>Traditionally, the first group of lines in a Python script is used to provide basic information about the script, such as its purpose, who created it, when was it created, what ArcGIS version it was created for, and so on. Providing this basic information is considered an industry best practice.</p>
        <p>Now let's learn about the variables that we use in Python.</p>
        <h3 id="uuid-6572bd9e-d655-4b80-8945-c2a9ae4db33c">Learning about variables</h3>
        <p>Like a model, a Python script can contain variables. When you define a variable in Python, you give it a name and a value. Also similar to a model, the value assigned to a variable can be hardcoded, can reference the result of another process, or can be a function of <kbd>ArcPy</kbd> or another module.</p>
        <p>For example, you could define a variable that would be used as an input for the <strong>Buffer</strong> tool as follows:</p>
        <pre>In_buf_fc = "streams"</pre>
        <p>This variable would then be used by the <strong>Buffer</strong> tool in a Python script as follows:</p>
        <pre>Buffer_analysis (<strong>In_buf_fc</strong>, "C:\\GIS\\Trippville.gdb\\Streams_Buffer", <br/>    "125 Feet", "FULL", "ROUND")</pre>
        <p>You can see from the preceding sample code, the use of the defined variable has been highlighted. In an actual script, you would not <em>embolden</em> the variable. That was just done in this example to help you see the use of the variable more easily.</p>
        <p>Another particularly important thing to keep in mind when writing scripts is that Python is case sensitive. This means a variable named <kbd>Mapsize</kbd> is not the same as one named <kbd>mapsize</kbd>. To Python, those are two different and distinct objects. This is one of the most common causes of problems when writing and running Python scripts.</p>
        <p>Python also has other restrictions when defining a variable within a script:</p>
        <ul>
          <li>Variable names must start with a letter. They cannot start with a number.</li>
          <li>Variable names cannot include spaces or other special characters. The one exception is an underscore ( <em>_</em> ).</li>
          <li>Variable names cannot include reserved keywords such as the following:
<ul><li>Class</li><li>If</li><li>For</li><li>While</li><li>Return</li></ul></li>
        </ul>
        <p>Now let's move on to learning about data paths used in Python.</p>
        <h3 id="uuid-da8d8265-531e-472f-a8e5-d6f352a80575">Understanding data paths</h3>
        <p>Often when you define a variable, access data, or save the results of a tool, you need to reference a specific file or data path. In a traditional <strong>Windows</strong> environment, this typically requires you to define the path using backslashes. For example, you have been accessing the data and exercises for this book by going to <kbd>C:\Student\IntroArcPro</kbd>. This is an example of a path.</p>
        <p>Unfortunately, you cannot use this common method of defining a path within a Python script. Backslashes are reserved characters within Python that are used to indicate an escape or line continuation. So, when specifying a data path, you must use a different method. Python supports three methods for defining a path:</p>
        <ul>
          <li>Double backslashes: <kbd>C:<strong>\\</strong>Student<strong>\\</strong>IntroArcPro</kbd></li>
          <li>Single forward slash: <kbd>C:<strong>/</strong>Student<strong>/</strong>IntroArcPro</kbd></li>
          <li>Single backslash with an <kbd>r</kbd> in front of it: <kbd>r"C:\Student\IntroArcPro"</kbd></li>
        </ul>
        <p>You can use either of the preceding methods when creating your own scripts. While it is acceptable to use any of these within a single script, it is recommended that you try to use the same method throughout the entire script. This will help you locate possible errors and fix them more quickly.</p>
        <p>Let's learn about the <kbd>ArcPy</kbd> module in the next section.</p>
        <h2 id="uuid-2d06abcd-1366-46dd-bc44-d6fa5d5e9552">Learning about the ArcPy module</h2>
        <p>The <kbd>ArcPy</kbd> module is a Python site package that allows Python access to ArcGIS functionality. The level of functionality is limited to the ArcGIS Pro license level and extensions available to the user running the script.</p>
        <p>Through the <kbd>ArcPy</kbd> module, Python can not only be used to perform geoprocessing tasks using tools in ArcGIS Pro system toolboxes or other custom tools, but it can also execute other functions, such as listing available datasets within a given location or describing an existing dataset. It can also create objects, such as points, lines, polygons, extents, and more.</p>
        <p>The <kbd>ArcPy</kbd> module contains several sub-modules. These sub-modules are specific purpose libraries containing functions and classes. These sub-modules include the following:</p>
        <ul>
          <li>Data access module (<kbd>arcpy.da</kbd>)</li>
          <li>Mapping module (<kbd>arcpy.mp</kbd>)</li>
          <li>Spatial Analyst module (<kbd>arcpy.sa</kbd>)</li>
          <li>Network Analyst module (<kbd>arcpy.na</kbd>)</li>
        </ul>
        <p>The Spatial Analyst and Network Analyst modules require access to ArcGIS extensions of the same name.</p>
        <p>The <kbd>ArcPy</kbd> module must be loaded into a script in order for Python to access ArcGIS Pro functionality. This is typically done at the very beginning of a new script using the following syntax:</p>
        <pre>import arcpy</pre>
        <p>This one line allows Python to access ArcGIS Pro tools and functions. Additional modules can also be loaded using that same line, such as the operating system (<kbd>os</kbd>) or system (<kbd>sys</kbd>) modules.</p>
        <p>Now that you have a very basic understanding of the <kbd>ArcPy</kbd> module, <em>how do you know the proper syntax for using geoprocessing tools in a Python script?</em> In the next section, you will find out how to locate the proper syntax for the various geoprocessing tools included in ArcGIS Pro.</p>
        <h3 id="uuid-400aa3fd-6836-43d0-8511-4ac08ac3154c">Locating Python syntax for a geoprocessing tool</h3>
        <p>Finding the Python code needed to execute a specific geoprocessing tool is as easy as opening the help information for the tool. Esri has included sample Python code for all the geoprocessing tools in ArcGIS Pro and its extensions.</p>
        <p>This includes the proper syntax to use within a script along with a description of the variables that can be used with the tool. Help for a specific tool can be accessed in the Geoprocessing pane when the tool is opened by clicking on the small blue question mark located on the upper right side of the pane, as shown in the following screenshot:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/05b9e33b-6182-40b9-984e-cbd8cd46ad2a.png" style="width:45.83em;"/>
        </p>
        <p>The Syntax page in the help information will show you the proper format for the code along with a description of the possible variables that may be included. The following screenshot shows an example of the syntax for the <strong>Union</strong> tool from the Esri help:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/068ffa7e-fca3-4787-bd07-4580319d8033.png" style="width:41.50em;"/>
        </p>
        <p>Help for all tools in ArcGIS Pro can be accessed from the ArcGIS Pro help online via the Tool Reference. The address to access it is <a href="http://pro.arcgis.com/en/pro-app/tool-reference/main/arcgis-pro-tool-reference.htm">http://pro.arcgis.com/en/pro-app/tool-reference/main/arcgis-pro-tool-reference.htm</a>.</p>
        <p>The help will also include code sample snippets that help put the syntax into context with a larger process. It is often possible to copy the sample code from the help and then paste it into your script; then, you can easily adjust the copied code to meet your needs, as shown in the following screenshot:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/0e134394-ee9a-4cab-a917-66ac3fd77d0b.png" style="width:42.17em;"/>
        </p>
        <p>The preceding screenshot is an example of a sample code snippet for the Union tool that is found in the help. As you can see, it provides an understandable example of the code in a real-world context. This provides a much better understanding of how the tool can be used within a custom script you might create. Notice the comments included within the code sample and how they help to provide a better understanding of the purpose of the various parts of the code.</p>
        <p>If you would like to explore the relationship between ArcGIS and Python in more detail, you might find this link helpful and informative: <a href="https://pro.arcgis.com/en/pro-app/arcpy/get-started/installing-python-for-arcgis-pro.htm">https://pro.arcgis.com/en/pro-app/arcpy/get-started/installing-python-for-arcgis-pro.htm</a></p>
        <p>Now it is time for you to try your hand at writing a simple Python script.</p>
        <h2 id="uuid-93f5516f-18ec-4019-930d-124ab87d1021">Exercise 12D – Creating a Python script</h2>
        <p>The city of Trippville operates a GIS web application that allows citizens and elected officials to access parcel data. This GIS web application combines data from the city with other data layers from ArcGIS Online and <strong>Google Maps</strong>. As a result, the parcels must be projected from the local state plane coordinate system to the <strong>WGS 84 Web Mercator</strong> (<strong>Auxiliary Sphere</strong>) <strong>system</strong>. This is the common coordinate system used by <strong>Esri</strong>, <strong>Google</strong>, and <strong>Bing</strong> for GIS web applications and data.</p>
        <p>You can also update the <strong>Acres</strong> field as new parcels that are added or combined before the new data is added to the web application. You can use the <strong>Calculate Field</strong> tool to accomplish this with an expression that converts the Shape_Length field, which is in feet, to acres.</p>
        <p>In the past, you have manually performed these operations. However, you will be going on vacation and the director wants the parcel data to still be updated regularly while you are gone. They can copy the data to the web application but do not know how to perform the other operations. So, they want you to create an automated routine that can perform these operations automatically on a regular schedule.</p>
        <p>Since the director wants this routine to run on an automated schedule, you will need to write a Python script. A model will not work in this case. In this exercise, you will write a basic Python script that will calculate the acreage of each parcel, update the <strong>Acres</strong> field, and then project the data from the state plane coordinate system that is currently in the WGS 84 Web Mercator (Auxiliary Sphere).</p>
        <h3 id="uuid-3a4f575a-845d-4aa1-9555-187539273a12">Step 1 – Opening IDLE</h3>
        <p>In this step, you will open the IDLE application so that you can begin creating your script:</p>
        <ol>
          <li>Click on your Start button. This is normally located in the lower-left corner of your screen in your taskbar. In <strong>Windows 8.1</strong> or <strong>Windows 10,</strong> it appears as just four white squares.</li>
        </ol>
        <ol start="2">
          <li>In Windows 8.1 or 10, click the small downward-pointing arrow to access all installed programs or apps.</li>
          <li>Navigate to the ArcGIS program group in the list of all programs. In <strong>Windows XP</strong> or <strong>Windows 7</strong>, you may need to expand the group to see the programs inside.</li>
          <li>Locate the IDLE (Python GUI) application and click on it to launch the program.</li>
        </ol>
        <p style="padding-left: 60px">You have now opened the Python IDLE application. You will write your script within this application. It will open with the shell window.</p>
        <p style="padding-left: 60px">The shell window displays messages and errors generated by a script when it is run from IDLE. You do not actually write scripts within this window. You will need to open a new code window to begin writing the script.</p>
        <ol start="5">
          <li>Click the File | New File option. This will open the code window that you will use to write your script. You should now be able to see something like this:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/29da58a3-f7c7-4f74-94f7-c8c47c81ffa2.png" style="width:44.25em;"/>
        </p>
        <ol start="6">
          <li>Click Options in the top menu and select Configure IDLE. You can do this in either of the IDLE windows.</li>
          <li>Click on the General tab and set Default Source Encoding to UTF-8 as shown in the following screenshot:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/d6b06a04-cfc5-4606-8fd9-123a9855f612.png" style="width:26.50em;"/>
        </p>
        <ol start="8">
          <li>Click Apply and Ok.</li>
        </ol>
        <p>Now that you have configured your IDLE options, it is time to start writing a script. </p>
        <h3 id="uuid-27f702ee-5e50-4ea0-95b1-abbc801aae42">Step 2 – Writing the script</h3>
        <p>Now you will begin writing the script that you need to accomplish the tasks you performed manually before. To start, you will insert some basic information concerning your script in accordance with best practices. Then, you will import the <kbd>ArcPy</kbd> module, and lastly, you will write the code for the script:</p>
        <ol>
          <li>First, you will save your empty script, so that it has a name. In the Untitled window, click on the File | Save option.</li>
          <li>In the Save As window, navigate to <kbd>C:\Student\IntroArcPro\Chapter12</kbd>, name your file <kbd>AcresWebProject.py</kbd>, and click Save.</li>
        </ol>
        <p style="padding-left: 60px">You have just saved your empty script. You should see the new name and path shown at the top of the code window.</p>
        <ol start="3">
          <li>Now you will add the general information at the beginning of the script as comments. Remember that <kbd>#</kbd> identifies a comment within Python code. Type the following example code into the IDLE code window (the <kbd>Purpose</kbd> part should all be typed on a single line; if you split it on to multiple lines, you will need to place <kbd>#</kbd> at the start of each line):</li>
        </ol>
        <pre style="padding-left: 60px">#**********************************************<br/>#Script Title: AcresWebProject.py<br/>#Script Author: Your Name<br/>#Script Created on: Today's date<br/>#Last Updated on: Today's date<br/>#Last Updated by: Your Name<br/>#Purpose: This script calculates the parcels area in acres and updates the acres field. It then projects the parcels to the WGS 84 Web Mercator coordinate system so it can be used within the City's web application.<br/>#Software: ArcGIS Pro 2.5 (or the version you are running)<br/>#*****************************************************</pre>
        <ol start="4">
          <li>Now you need to add the code line that imports the <kbd>ArcPy</kbd> module so that the script can access the ArcGIS Pro tools. Add the following code to your script in the code window:</li>
        </ol>
        <pre style="padding-left: 60px">#Imports the ArcPy module for ArcGIS<br/>import arcpy</pre>
        <ol start="5">
          <li>Save your script by clicking File and then Save. If you get a warning, just click OK.</li>
        </ol>
        <p style="padding-left: 60px">Now you will define some variables within your script that specify the location of the parcels data and where to save the results of the <strong>Project</strong> tool.</p>
        <ol start="6">
          <li>Type the following code after the <kbd>import</kbd> statement in the code window:</li>
        </ol>
        <pre style="padding-left: 60px">#Specifies the input variables for the script tools<br/>#If the data is moved or in a different database then these paths will need to be updated<br/>Parcels = "C:\\Student\\IntroArcPro\\Databases<br/>    \\Trippville_GIS.gdb\\Base\\Parcels"</pre>
        <pre style="padding-left: 60px">Parcels_Web = "C:\\Student\\IntroArcPro\\Chapter12\\Ex12.gdb<br/>     \\Parcels_Web"</pre>
        <p style="padding-left: 60px">The preceding code you have just added to your Python script starts with two lines of comments which explain what the next lines do. As you have learned, comment lines are indicated with the <kbd>#</kbd> symbol. The next two lines define two variables.</p>
        <p style="padding-left: 60px">The first is <kbd>Parcels</kbd>. This variable points to the location of the <kbd>Parcels</kbd> feature class, that is stored in the <strong>Base</strong> feature dataset within the Trippville_GIS geodatabase. The second variable you have defined in this code is <kbd>Parcels_Web</kbd>. It references the <kbd>Parcels_Web</kbd> feature class in the Ex12 geodatabase. </p>
        <ol start="7">
          <li>Save your script.</li>
        </ol>
        <p style="padding-left: 60px">Now you need to begin adding the code for the tools that you will need to run in the script. You will use the ArcGIS Pro help to get the proper syntax for the <strong>Calculate Field</strong> and <strong>Project</strong> tools. Then, modify it so that it works properly in your script.</p>
        <ol start="8">
          <li>Open ArcGIS Pro and <kbd>Ex12.aprx</kbd>.</li>
          <li>Click on the Analysis tab and the Tools button to open the Geoprocessing pane.</li>
          <li>In the Geoprocessing pane, click on Toolboxes located near the top of the pane.</li>
          <li>Expand the Data Management Tools toolbox and the Fields toolset.</li>
          <li>Select the Calculate Field tool.</li>
          <li>Click on the Help button. It is the blue question mark in the upper right corner.</li>
          <li>You have opened the online tool reference for this tool; click on Syntax.</li>
          <li>Highlight and copy the syntax for the tool. It should read as follows:</li>
        </ol>
        <pre style="padding-left: 60px">CalculateField_management (in_table, field, expression, <br/>    {expression_type}, {code_block})</pre>
        <ol start="16">
          <li>Active the IDLE code window and paste the copied syntax onto a line below the variables that you defined earlier.</li>
          <li>Add a comment above the code that you just pasted into the script that says <kbd>calculates the area in acres for each parcel and updates the acres field</kbd>.</li>
        </ol>
        <ol start="18">
          <li>Now edit the code sample syntax that you just pasted into the script as follows:</li>
        </ol>
        <pre style="padding-left: 60px">arcpy.CalculateField_management (Parcels, "Acres", "!Shape_Area! / <br/>    43560", "PYTHON_9.3", "")</pre>
        <ol start="19">
          <li>You have now defined the <kbd>CalculateField</kbd> tool within a Python script, so it includes all the variables it needs to run; save your script.</li>
          <li>Now you need to add the <strong>Project</strong> tool to the script and define its syntax properly. Using the same process that you used for the <strong>Calculate Field</strong> tool, open the help for the <strong>Project</strong> tool and copy the syntax into your script. The <strong>Project</strong> tool is located in the same toolbox but is in the Projections and Transformations toolset.</li>
          <li>Add an appropriate comment to the script that is above the code for the project tool, which will let others know its purpose similar to the comment that you added for the <strong>Calculate Field</strong> tool.</li>
          <li>Modify the <strong>Project</strong> tool code as follows (to make things easier you can copy the syntax from the <kbd>Project Tool Sample.txt</kbd> file in the <kbd>Chapter12</kbd> folder):</li>
        </ol>
        <pre style="padding-left: 60px">arcpy.Project_management(Parcels, Parcels_Web, "PROJCS['WGS_1984_Web_Mercator_Auxiliary_Sphere',<br/>GEOGCS['GCS_WGS_1984',DATUM['D_WGS_1984',SPHEROID['WGS_1984',6378137.0,298.257223563]],PRIMEM['Greenwich',0.0],UNIT['Degree',0.0174532925199433]],PROJECTION['Mercator_Auxiliary_Sphere'],PARAMETER['False_Easting',0.0],PARAMETER['False_Northing',0.0],PARAMETER['Central_Meridian',0.0],PARAMETER['Standard_Parallel_1',0.0],PARAMETER['Auxiliary_Sphere_Type',0.0],UNIT['Meter',1.0]]", "WGS_1984_(ITRF00)_To_NAD_1983", "PROJCS['NAD_1983_StatePlane_Georgia_West_FIPS_1002_Feet',GEOGCS['GCS_North_American_1983',DATUM['D_North_American_1983',SPHEROID['GRS_1980',6378137.0,298.257222101]],PRIMEM['Greenwich',0.0],UNIT['Degree',0.0174532925199433]],PROJECTION['Transverse_Mercator'],PARAMETER['False_Easting',2296583.333333333],PARAMETER['False_Northing',0.0],PARAMETER['Central_Meridian',-84.16666666666667],PARAMETER['Scale_Factor',0.9999],PARAMETER['Latitude_Of_Origin',30.0],UNIT['Foot_US',0.3048006096012192]]")</pre>
        <p style="padding-left: 60px">The preceding code seems extremely complicated, and to some extent it is. It contains all the parameters required to define two coordinate systems. The first is the coordinate system for the <kbd>Parcels</kbd> feature class. The second is the coordinate system used by the output feature class, <kbd>Parcels_Web</kbd>. </p>
        <ol start="23">
          <li>Save your script.</li>
        </ol>
        <p style="padding-left: 60px">Your script should look like this on your screen:</p>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/e29618ca-af92-4767-a2eb-88e8df31dab7.png" style="width:66.42em;"/>
        </p>
        <p class="mce-root"/>
        <ol start="24">
          <li>Once you have verified your script and saved it, close IDLE.</li>
        </ol>
        <p>We'll now move on to the next step.</p>
        <h3 id="uuid-e7e82b86-7475-4cfc-afe7-d0db2742c0ec">Step 3 – Adding the script to ArcGIS Pro and running it</h3>
        <p>Now that you have created a Python script, you need to add it to ArcGIS Pro and test it. In this step, you will add the script you just created to a toolbox in your project and then run it:</p>
        <ol>
          <li>If necessary, start ArcGIS Pro and open <kbd>Ex12.aprx</kbd>.</li>
          <li>In the Catalog pane, expand the Toolboxes folder.</li>
          <li>Right-click on the Ex12 toolbox and select New&gt;Script from the menu.</li>
          <li>Fill out the information for the new script as follows:
<ul><li>Type <kbd>CalcAcresProject</kbd> in theNamefield.</li><li>Type <kbd>Calculate Parcel Acres and Project to Web Mercator</kbd> in the Label field.</li></ul></li>
        </ol>
        <ol start="5">
          <li>Click on the Browse button located next to the Script File cell, then navigate to <kbd>C:\Student\IntroArcPro\Chapter12</kbd>, and select the <kbd>AcresWebProject.py</kbd> script that you just created. Your window should now look like this:</li>
        </ol>
        <p class="CDPAlignCenter CDPAlign">
          <img src="img/8688cb20-4644-4d75-879c-58a7fa27a2ff.png" style="width:39.83em;"/>
        </p>
        <ol start="6">
          <li>Click OK once you have verified everything is set correctly.</li>
        </ol>
        <p style="padding-left: 60px">The script will appear in the Ex12 toolbox. This means you can now run it in ArcGIS Pro. You must add all Python scripts that you create to a toolbox before they are able to be used in ArcGIS Pro. For those with experience with ArcGIS for Desktop, it should be noted that ArcGIS Pro does not support Python add-ins yet. That functionality should be added to a future version.</p>
        <p style="padding-left: 60px">Now you will need to run the script to test and make sure it works as expected.</p>
        <ol start="7">
          <li>Double-click on the Python script that you just added to the toolbox. This will open it in the Geoprocessing pane. Since you hardcoded all the variables into the script, it has no parameters that the user needs to define.</li>
        </ol>
        <ol start="8">
          <li>Click the Run button at the bottom of the Geoprocessing pane.</li>
          <li>Once the script has completed running, return to the Catalog pane.</li>
          <li>Expand the Databases folder and expand <kbd>Ex12.gdb</kbd>. If the script ran successfully, you should see a new feature class named <kbd>Parcels_Web</kbd>. You may need to right-click on the Ex12 geodatabase and refresh in order to see the new feature class that was created.</li>
        </ol>
        <p style="padding-left: 60px">If you do see the new feature class, congratulations! You have just created and run your first Python script. If your script did not run successfully, you may wish to compare it to the sample included in the <kbd>Python Sample</kbd> folder located in <kbd>C:\Student\IntroArcPro\Chapter12\</kbd>.</p>
        <ol start="11">
          <li>Save your project and close ArcGIS Pro along with IDLE, if it is still open.</li>
        </ol>
        <p>You have just created your first Python script, which projects data from one coordinate system to another. Since this is a Python script, you could use the scheduling functionality found in your operating system to schedule this script to run at a specified frequency automatically so you do not have to worry about it. This can reduce your overall workload and ensure that required functions run on a regular schedule.</p>
        <h1 id="uuid-7e811549-26eb-4887-ba5e-3b7694a246f3">Summary</h1>
        <p>In this chapter, you learned that ArcGIS Pro contains two methods for automating and streamlining tasks; that is, you can create a model or a Python script. Which one will work best will largely depend on your skills and how they will be used. You have gained the skills to create and run your own model.</p>
        <p>We learned that models are created in ModelBuilder, which provides a graphical interface for creating tools that will automate a series of processes required to accomplish an analysis or other workflow. Each model will contain a series of processes. Each process will include a tool that can be a geoprocessing tool, script, or another model, along with their associated variables. As you create a model, you can choose to make it interactive by designating variables as parameters. The biggest limitation of models is that they can only be run from inside of ArcGIS Pro. This means they cannot be scheduled to run automatically.</p>
        <p>Python scripts can be used to automate processes that can then be scheduled to run at specified times and dates. Unlike the case with models, creating Python scripts does require knowledge of the Python language and the ability to write code.</p>
        <p>In addition to the ability of Python scripts to be run on a schedule, they can also be used to access functionality from other applications other than ArcGIS Pro. Through this chapter, you have gained the skills to create scripts that can integrate the functionality of several different applications into a single automated script.</p>
        <p>In the next chapter, you will learn how you can share the various maps and data you create in ArcGIS Pro with others on your computer network and those that are not on your network. You will also learn ways to share your GIS content with others that do not have GIS software.</p>
        <h1 id="uuid-cf82bb71-1ae7-4ace-89b3-7223a5110d67" class="mce-root">Further reading</h1>
        <p>If you would like to learn more about creating Python scripts for ArcGIS, you might want to get <em>Programming ArcGIS with Python Cookbook</em> by Eric Pimpler.</p>
      
    
  </body></html>