<html><head></head><body><div class="chapter" title="Chapter&#xA0;3.&#xA0;Presenting Data on a Print Map" id="aid-QMFO1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Presenting Data on a Print Map</h1></div></div></div><p>Print maps are<a id="id204" class="indexterm"/> a great tool for sharing your spatial information because they can be included in presentations, publications, and reports as high-quality graphics or printed in a conventional way. QGIS has powerful capabilities of creating single-page or multipage (so-called atlases) maps that you can export in multiple, easy-to-distribute, and print graphical formats (for example, .pdf, .png, .svg, and so on).</p><p>In this chapter, you will be exposed to QGIS's main tool for creating print maps, called <span class="strong"><strong>print composer</strong></span>, and will learn how to use it to get outstanding results.</p><div class="section" title="Print composer"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec22"/>Print composer</h1></div></div></div><p>With print composer, map designing<a id="id205" class="indexterm"/> becomes easy and intuitive, as it allows you to set up a layout and add a map and its necessary elements, such as text labels, the legend, the scale bar, and the north arrow. Moreover, you can significantly enliven your map by combining multiple overviews, images, drawings, and HTML labels. To simplify map generation and save your time, you can use map templates and the atlas generator functionality.</p><p>To enter print composer mode, go<a id="id206" class="indexterm"/> to <span class="strong"><strong>Project</strong></span> | <span class="strong"><strong>New Print Composer</strong></span> from the menu, click on the <span class="inlinemediaobject"><img src="../Images/image00363.jpeg" alt="Print composer"/></span> button on the <span class="strong"><strong>File</strong></span> toolbar, or just use the <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>P</em></span> keyboard shortcut. In the <span class="strong"><strong>Composer title</strong></span> dialog window, you will be asked to give a title to your map. Click on the <span class="strong"><strong>OK</strong></span> button for the title to be generated automatically (<code class="literal">Composer 1</code>, <code class="literal">Composer 2</code>, <code class="literal">Composer 3</code>, and so on; you will be able to rename them later if you want).</p><p>In the upper row of the print composer window, there are drop-down menus that provide access to its options and functionality. The upper row of toolbars provides quick-access buttons for the same functionality. Note that the <span class="strong"><strong>Composer Items</strong></span> toolbar is, by default, placed separately on the left side of the window because it provides quick access to all elements that are usually necessary to constitute a map, for example, a map canvas, a legend, a scale bar, labels, annotations, and so on. In the central part of the window, you can see an empty page that represents the composer canvas available for item arrangement, as shown here:</p><div class="mediaobject"><img src="../Images/image00364.jpeg" alt="Print composer"/></div><p style="clear:both; height: 1em;"> </p><p>In the right part <a id="id207" class="indexterm"/>of the print composer window, there are two panels with tabs. The upper panel holds the following tabs:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Items</strong></span>: This displays the list of map items added to the map. It allows you to define their visibility, rename, reorder, and lock them for changes.</li><li class="listitem"><span class="strong"><strong>Command history</strong></span>: This displays the list of commands used. With the history, you can easily roll back changes and have better control over the process of map generation.</li></ul></div><p>The lower panel holds three tabs, as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Composition</strong></span>: This is responsible for <span class="strong"><strong>Paper and quality</strong></span> (page size, number, and resolution) and <span class="strong"><strong>Guides and Grid</strong></span> (spacing and snapping tolerance) so as to simplify map item placement.</li><li class="listitem"><span class="strong"><strong>Item properties</strong></span>: This is a dynamic tab whose contents changes automatically, depending on the map item currently selected.</li><li class="listitem"><span class="strong"><strong>Atlas generation</strong></span>: Once the <span class="strong"><strong>Generate an atlas</strong></span> toggle is active, you can set and modify its <a id="id208" class="indexterm"/>parameters.<div class="note" title="Note"><h3 class="title"><a id="note15"/>Note</h3><p>Note that it is only the default panels' placement that can be rearranged. In order to change the panel/tab position, hover your mouse arrow over its perforated area, which looks like this:</p><div class="mediaobject"><img src="../Images/image00365.jpeg" alt="Print composer"/></div><p style="clear:both; height: 1em;"> </p><p>Now, drag and drop it at another place. You can also close any unnecessary panel by clicking on the button in its top-right corner. Also, panels can be turned on or off with the toggles that become available after right-clicking on the menu or the toolbar's panel, that is, when you see something like this:</p><div class="mediaobject"><img src="../Images/image00366.jpeg" alt="Print composer"/></div><p style="clear:both; height: 1em;"> </p></div></li></ul></div><p>You can get additional control over composer settings from its <span class="strong"><strong>Composer Options</strong></span> menu, which can be found under <span class="strong"><strong>Settings</strong></span>. For example, you might want to change the <span class="strong"><strong>Default font</strong></span> that will be used for the legend and text labels. For further work in the <span class="strong"><strong>Grid appearance</strong></span> section, we set <span class="strong"><strong>Grid style</strong></span> to <span class="strong"><strong>Solid</strong></span> and leave <span class="strong"><strong>Grid and guide defaults</strong></span> unchanged, as we will configure them later.</p></div></div>
<div class="section" title="The initial setup &#x2013; page format and other essentials" id="aid-RL0A1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec23"/>The initial setup – page format and other essentials</h1></div></div></div><p>Before creating the map, we should set up our working space, which is mainly defined by page settings. All the necessary <a id="id209" class="indexterm"/>options are present under the <span class="strong"><strong>Composition</strong></span> tab. Let's take a closer look at the <span class="strong"><strong>Paper and quality</strong></span> section. The default page size in the <span class="strong"><strong>Presets</strong></span> drop-down list is <span class="strong"><strong>A4</strong></span>, but you can select from among 23 other sizes. We <a id="id210" class="indexterm"/>are going to create our own page by performing the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Select <span class="strong"><strong>Custom</strong></span> from the list.</li><li class="listitem">The <span class="strong"><strong>Width</strong></span> and <span class="strong"><strong>Height</strong></span> fields will be activated. Enter a value of <code class="literal">200</code> for both of them (this means that we are going to create a square page for a map composition). The value depends on the units chosen in<span class="strong"><strong> Units</strong></span>, and by default, it is set to <span class="strong"><strong>mm</strong></span> (millimeters).</li></ol><div style="height:10px; width: 1px"/></div><p>As we are going to create only one map, we leave <span class="strong"><strong>Number of pages</strong></span> as 1, but you can always enter more if you're going to combine several pages into one document. This is because you could have several maps in a single-page composition. As shown in the example, we're using a square page. So, it doesn't matter whether it has the <span class="strong"><strong>Portrait</strong></span> or <span class="strong"><strong>Landscape</strong></span> page orientation. <span class="strong"><strong>Page background</strong></span> is a very important item as it allows you to achieve cool cartographic visualization effects. By clicking on the <span class="strong"><strong>Change</strong></span> button, you can see that, by default, it is set to <span class="strong"><strong>Simple fill</strong></span> with white color (which we are going to use). However, you can change it and select from among multiple filling options to create an original filling pattern.</p><div class="note" title="Note"><h3 class="title"><a id="tip14"/>Tip</h3><p>For example, you can find nice raster or SVG textures and use them as background patterns by selecting <span class="strong"><strong>Raster image fill</strong></span> or <span class="strong"><strong>SVG fill</strong></span> respectively. Otherwise, you can select <span class="strong"><strong>Gradient</strong></span> or <span class="strong"><strong>Shapeburst fill</strong></span> to play around with some color grading effects.</p></div><p><span class="strong"><strong>Export resolution</strong></span> defines the quality of the exported map in dpi units. The higher this value, the better the map. However, the resulting file will also be bigger. For common purposes, such as publications, reports, and presentation graphics, <code class="literal">300 dpi</code> is enough. When the <span class="strong"><strong>Print as raster</strong></span> toggle is active, the entire composition is converted into raster before exporting to <code class="literal">.pdf</code>. The <span class="strong"><strong>World file on</strong></span> toggle allows you to attach a <code class="literal">.wld</code> file that contains information about a geographic reference to the image export output. This means that your map can not only be viewed in graphical or preview software, but can also be opened and aligned properly directly in GIS software.</p><p>Now, we will adjust the grid that will be<a id="id211" class="indexterm"/> used to align map items within a map layout:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the <span class="strong"><strong>Guides and Grid</strong></span> section, enter <code class="literal">5</code> mm as the <span class="strong"><strong>Grid spacing</strong></span> value to make it denser, and set <span class="strong"><strong>Snap tolerance</strong></span> to <code class="literal">10</code> pixels (the higher the value, the stronger the snapping).</li><li class="listitem">To show the grid, activate the <span class="strong"><strong>Show grid</strong></span> button, which is under <span class="strong"><strong>View</strong></span>, or use the <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>'</em></span> keyboard shortcut.</li><li class="listitem">Toggle <span class="strong"><strong>Snap to grid</strong></span>, which is under <span class="strong"><strong>View</strong></span>, or pressing <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>'</em></span> activates snapping.<div class="note" title="Note"><h3 class="title"><a id="tip15"/>Tip</h3><p>Instead of using a predefined grid, you can create your own guidelines by placing the mouse arrow over horizontal (for vertical guidelines) or vertical (for horizontal guidelines) ruler bars and clicking and dragging them along the page canvas. Deactivate <span class="strong"><strong>Snap to Grid</strong></span> and use various options from the <span class="strong"><strong>View</strong></span> menu such as <span class="strong"><strong>Show/Clear</strong></span> or <span class="strong"><strong>Snap to Guides</strong></span>. The <span class="strong"><strong>Smart Guides</strong></span> option helps you detect the best placement position automatically based on the other items in your composition.</p></div></li></ol><div style="height:10px; width: 1px"/></div></div>
<div class="section" title="Adding and customizing a map"><div class="titlepage" id="aid-SJGS2"><div><div><h1 class="title"><a id="ch03lvl1sec24"/>Adding and customizing a map</h1></div></div></div><p>In this section, we <a id="id212" class="indexterm"/>are going to create a population map of the Brooklyn borough. Make sure that<a id="id213" class="indexterm"/> in the main window, the following layers are active: <code class="literal">Brooklyn borough boundaries</code>, <code class="literal">zipcode</code> (with the population style), <code class="literal">NY borough boundaries</code>, and <code class="literal">water area</code>.</p><p>To add a map to your print layout, click on the <span class="strong"><strong>Add new map</strong></span> <span class="inlinemediaobject"><img src="../Images/image00367.jpeg" alt="Adding and customizing a map"/></span> button in the <span class="strong"><strong>Composer Items</strong></span> toolbar, and drag the mouse arrow diagonally over the page while holding down the left mouse button. You will see a rectangle drawn on the page and a map inside it.</p><div class="note" title="Note"><h3 class="title"><a id="note17"/>Note</h3><p>Note that the content of the map changes dynamically to reflect the content of the map canvas in the main window. This means that if you turn on/off some layers in the main window, or change their styling, the map in the print composer window will be changed too. If you don't see the changes, click on the <span class="strong"><strong>Refresh view</strong></span> <span class="inlinemediaobject"><img src="../Images/image00368.jpeg" alt="Adding and customizing a map"/></span> button to update the map. We will discuss how to suppress this behavior soon.</p></div><p>The map frame can be moved or resized by dragging the special squared markers on the borders' centers <a id="id214" class="indexterm"/>and corners. If you don't see the frame and markers, it means that the current item is inactive. To activate it, click on the <span class="strong"><strong>Select/Move item</strong></span> <span class="inlinemediaobject"><img src="../Images/image00369.jpeg" alt="Adding and customizing a map"/></span> button in the <span class="strong"><strong>Composer Items</strong></span> toolbar. If you want to move a map inside the frame, use the <span class="strong"><strong>Move item content</strong></span> button, <span class="inlinemediaobject"><img src="../Images/image00370.jpeg" alt="Adding and customizing a map"/></span>, in the <span class="strong"><strong>Composer Items</strong></span> toolbar. Also, as long as this button is active, you can zoom into the map with the mouse wheel (or with <span class="emphasis"><em>Ctrl</em></span> and the mouse wheel). Using markers, extend the map in such a way that it covers the whole page.</p><p>After placing the map<a id="id215" class="indexterm"/> properly, we can proceed to the advanced options on the <span class="strong"><strong>Item properties</strong></span> tab. The tab brings together several sections that can be expanded or collapsed by clicking on the <span class="inlinemediaobject"><img src="../Images/image00371.jpeg" alt="Adding and customizing a map"/></span> symbol beside them.</p><p>The <span class="strong"><strong>Main properties</strong></span> section allows<a id="id216" class="indexterm"/> you to select from the following map preview modes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Cache</strong></span>: This renders the map in the current screen resolution, which will not change while zooming in/out, but the image itself will be scaled properly.</li><li class="listitem"><span class="strong"><strong>Render</strong></span>: The map resolution will be adjusted to the maximum value while zooming. This mode gives better a preview picture, but is slower comparing to <span class="strong"><strong>Cache</strong></span>.</li><li class="listitem"><span class="strong"><strong>Rectangle</strong></span>: Instead of a map, a <code class="literal">Map will be printed here</code> message will be shown in an empty box.</li></ul></div><p>When you enter some values in the <span class="strong"><strong>Scale</strong></span> field, the map extent changes dynamically. Set its value to <code class="literal">100000</code> and use the <span class="strong"><strong>Move item content</strong></span> <span class="inlinemediaobject"><img src="../Images/image00370.jpeg" alt="Adding and customizing a map"/></span> button to locate map within frame properly. The following screenshot shows you how the tab <span class="strong"><strong>Item properties</strong></span> looks like at this stage:</p><div class="mediaobject"><img src="../Images/image00372.jpeg" alt="Adding and customizing a map"/></div><p style="clear:both; height: 1em;"> </p><p>With the <a id="id217" class="indexterm"/><span class="strong"><strong>Map rotation</strong></span> field, you can define an angle in degrees to rotate the map clockwise within its frame. Note that the angle of rotation will be applied automatically to the<a id="id218" class="indexterm"/> grid lines to adjust them properly with respect to the map's content. There are three toggles and they provide the following options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">When the <span class="strong"><strong>Draw map canvas items</strong></span> toggle is activated, existing annotations from the main map canvas window will be added to the map.</li><li class="listitem">The <span class="strong"><strong>Lock layers for map item</strong></span> option is very useful if you don't want your print map to reflect changes made in the main map canvas window. So, the layers will remain the same, but their styling and labeling will change according to the main window. We activate this option because we don't want the composition of layers to be changed.</li><li class="listitem"><span class="strong"><strong>Lock layer styles for map item</strong></span> blocks the map item from style changes made in the main map canvas window. Activate this option too. Jointly applied with the previous option, it allows us to block the composer map from changes made in the main map canvas window (that is, the layers' style and composition).</li></ul></div><p>On the right-hand side of the toggles, there is a <span class="strong"><strong>Set layer list from a visibility preset</strong></span> button, <span class="inlinemediaobject"><img src="../Images/image00373.jpeg" alt="Adding and customizing a map"/></span>. This<a id="id219" class="indexterm"/> button allows us to quickly define map item content from the visibility presets on the toolbar of the <span class="strong"><strong>Layers</strong></span> panel. To load a preset, click on the small triangular arrow in the<a id="id220" class="indexterm"/> bottom-right corner of the button, and select the preset you want to show on the map. The map's content will be changed according to the preset and the layers will be locked automatically.</p><p>The <span class="strong"><strong>Extents</strong></span> section provides various options to define and adjust the map item's extent:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Manual definition, by entering <span class="strong"><strong>X</strong></span> and <span class="strong"><strong>Y</strong></span> values in the correspondent fields.</li><li class="listitem"><span class="strong"><strong>Set to map canvas extent</strong></span>: The current map extent will become the same as the extent of the main map canvas window.</li><li class="listitem"><span class="strong"><strong>View extent in map canvas</strong></span>: This does exactly the opposite of the previous button. It changes the map canvas extent in the main window according to the current map item extent.</li></ul></div><p>The <span class="strong"><strong>Controlled by atlas</strong></span> section will be covered later, when we talk about atlas generation in the <span class="emphasis"><em>Creating atlases</em></span> section.</p><p>The <span class="strong"><strong>Grids</strong></span> section allows you to add coordinate grids and frames to the map frame. To add a new grid, click on the <span class="inlinemediaobject"><img src="../Images/image00374.jpeg" alt="Adding and customizing a map"/></span> button and adjust its main properties, such as <span class="strong"><strong>Grid type</strong></span>, <span class="strong"><strong>Interval</strong></span>, <span class="strong"><strong>Grid frame</strong></span>, <span class="strong"><strong>Coordinates</strong></span>, and so on.</p><div class="note" title="Note"><h3 class="title"><a id="tip16"/>Tip</h3><p>You can combine multiple grids that use different coordinate reference systems within a single map item. Just add one more grid. Then, in the <span class="strong"><strong>Draw "Grid 2" grid</strong></span> section, click on the <span class="strong"><strong>Change</strong></span> button beside <span class="strong"><strong>CRS</strong></span> and select the CRS you want to use. A common use case of this option is to combine a projected CRS, which uses linear measurement units (feet and meter), with a geodetic CRS, which provides latitude and longitude coordinates in degrees.</p></div><p>The <span class="strong"><strong>Overviews</strong></span> section allows you to combine multiple overviews in various scales into a single map composition. This will be covered later, in the <span class="emphasis"><em>Working with map overviews</em></span> section.</p><p>The following sections<a id="id221" class="indexterm"/> are common for various map items:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><strong>Position and size</strong></span><a id="id222" class="indexterm"/> section allows you to define the size of the item frame in page units. <span class="strong"><strong>Reference point</strong></span> decides which corner of the item is specified by the X and Y positions.</li><li class="listitem">The <span class="strong"><strong>Rotation field</strong></span> values set the item's rotation angle in degrees.</li><li class="listitem">The <span class="strong"><strong>Frame</strong></span> toggle enables the frame around the item, and provides access to its options, such as <span class="strong"><strong>Frame color</strong></span>, <span class="strong"><strong>Thickness</strong></span>, and <span class="strong"><strong>Join style</strong></span>.</li><li class="listitem"><span class="strong"><strong>Background</strong></span> is responsible for the frame's fill color.</li><li class="listitem"><span class="strong"><strong>Item ID</strong></span> can be used with web clients to create links between map items, and also for easier identification of specific items within the <span class="strong"><strong>Items</strong></span> panel.</li><li class="listitem"><span class="strong"><strong>Rendering</strong></span> provides access to the <span class="strong"><strong>Blending mode</strong></span> and <span class="strong"><strong>Transparency</strong></span> options that allow us to apply professional graphics affects.</li></ul></div></div>
<div class="section" title="Adding and customizing a legend"><div class="titlepage" id="aid-TI1E2"><div><div><h1 class="title"><a id="ch03lvl1sec25"/>Adding and customizing a legend</h1></div></div></div><p>A legend is a necessary element in<a id="id223" class="indexterm"/> any map. It provides explanations of the layers' symbology and helps us read and understand the map. To add a legend, click on the <a id="id224" class="indexterm"/><span class="strong"><strong>Add a new legend</strong></span> <span class="inlinemediaobject"><img src="../Images/image00375.jpeg" alt="Adding and customizing a legend"/></span> button in the <span class="strong"><strong>Composer Items</strong></span> toolbar, and drag the mouse arrow diagonally over the page while holding down the left mouse button. You will see a rectangle drawn on the page and a legend inside it. By default, all layers in the project will be included in the legend, so it may look too big to fit the layout. With the legend item selected, you can use the <span class="strong"><strong>Item properties</strong></span> tab to customize its content and appearance. There are several legend-specific sections that should be discussed.</p><p>The <span class="strong"><strong>Main properties</strong></span> section allows you to customize the following options:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Title</strong></span>: By default, the <code class="literal">Legend</code> title is used, but you can type any other text here, or leave the field empty to remove the title.</li><li class="listitem"><span class="strong"><strong>Title alignment</strong></span>: This can align the title to <span class="strong"><strong>Left</strong></span>, <span class="strong"><strong>Center</strong></span>, or <span class="strong"><strong>Right</strong></span>.</li><li class="listitem"><span class="strong"><strong>Map</strong></span>: By default, there is only <span class="strong"><strong>Map 0</strong></span> available, but if you combine several maps within a single page layout, you can decide which map the legend will refer to.</li><li class="listitem"><span class="strong"><strong>Wrap text on</strong></span>: Type here a symbol that will be used to separate long lines into shorter chunks of text. Later, you can edit text in the legend item and insert this symbol wherever necessary to forcibly start a new line.</li></ul></div><p>The <span class="strong"><strong>Legend items</strong></span> <a id="id225" class="indexterm"/>section is responsible for the content of the legend. By default, the <span class="strong"><strong>Auto update</strong></span> mode is active, and all available layers are loaded into the legend. Turn the <span class="strong"><strong>Auto update</strong></span> mode off and the buttons below the legend contents tree will be activated, providing the following options (from left to right):</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">The <span class="strong"><strong>down</strong></span><span class="inlinemediaobject"><img src="../Images/image00376.jpeg" alt="Adding and customizing a legend"/></span> and <span class="strong"><strong>up</strong></span><span class="inlinemediaobject"><img src="../Images/image00377.jpeg" alt="Adding and customizing a legend"/></span> buttons are<a id="id226" class="indexterm"/> used to move items and change their order. Otherwise, you can simply drag and drop an item at a new position. After any changes the legend's item content is immediately updated.
</li><li class="listitem">
The <span class="strong"><strong>add group</strong></span><span class="inlinemediaobject"><img src="../Images/image00378.jpeg" alt="Adding and customizing a legend"/></span> button allows you to<a id="id227" class="indexterm"/> add new groups and subgroups to develop a legend hierarchy.
</li><li class="listitem">
The <span class="strong"><strong>plus</strong></span><span class="inlinemediaobject"><img src="../Images/image00374.jpeg" alt="Adding and customizing a legend"/></span> and <span class="strong"><strong>minus</strong></span><span class="inlinemediaobject"><img src="../Images/image00379.jpeg" alt="Adding and customizing a legend"/></span> buttons are responsible for adding and removing any item, whether it is<a id="id228" class="indexterm"/> a group or a layer. Note that only<a id="id229" class="indexterm"/> layers active in the main map canvas window are available for adding.
</li><li class="listitem">
The <span class="strong"><strong>edit</strong></span><span class="inlinemediaobject"><img src="../Images/image00380.jpeg" alt="Adding and customizing a legend"/></span> button allows us to change<a id="id230" class="indexterm"/> the text for any selected item (group, subgroup, layer, or symbology label). For example, if you want a long line to be wrapped, insert in the text symbol defined in the <span class="strong"><strong>Main properties</strong></span> section. These changes are applied only within a <span class="strong"><strong>print composer legend</strong></span> item and <a id="id231" class="indexterm"/>don't affect map items in the main window.
</li><li class="listitem">
The <span class="strong"><strong>sum</strong></span><span class="inlinemediaobject"><img src="../Images/image00381.jpeg" alt="Adding and customizing a legend"/></span> button shows the feature count for<a id="id232" class="indexterm"/> each class of the vector layer.
</li><li class="listitem">
The <span class="strong"><strong>filter</strong></span><span class="inlinemediaobject"><img src="../Images/image00382.jpeg" alt="Adding and customizing a legend"/></span> button filters the<a id="id233" class="indexterm"/> legend by map content; that is, only the legend items (layers and classes) that are shown in the map item will be included in the legend.
</li></ul></div><p>In the <span class="strong"><strong>Fonts</strong></span> section, you<a id="id234" class="indexterm"/> can define a common color and different fonts for the title, subgroups, groups, and items to enhance the legend's readability. If the legend contains many items and is too long to be shown in a single column, it can be split in the <span class="strong"><strong>Columns</strong></span> section. Here, you can define the number of columns in the <span class="strong"><strong>Count</strong></span> field. By default, the column's width is adjusted according to the content. If you want it to be set equally for all columns, activate the <span class="strong"><strong>Equal column widths</strong></span> toggle. If the <span class="strong"><strong>Split layers</strong></span> mode is on, categorized layer symbology items will be allocated equally among columns; otherwise, categories are not allowed to be moved into another column. In the<a id="id235" class="indexterm"/> following screenshot, you can see how this works. At the top, there is a legend in which layer splitting is prohibited, and at the bottom, the categories are equally split between three columns.</p><div class="mediaobject"><img src="../Images/image00383.jpeg" alt="Adding and customizing a legend"/></div><p style="clear:both; height: 1em;"> </p><p>In the <span class="strong"><strong>Symbol</strong></span> section, the<a id="id236" class="indexterm"/> default <span class="strong"><strong>Width</strong></span> and <span class="strong"><strong>Height</strong></span> values can be modified manually. <span class="strong"><strong>WMS Legend Graphic</strong></span> is used to add a legend for a WMS layer, but this is if it is supported and provided by the WMS server. In the dialog window, you can resize the legend width and height that is provided as a raster image. The <span class="strong"><strong>Spacing</strong></span> section allows <a id="id237" class="indexterm"/>you to refine the legend's layout and readability by adjusting the spaces between its various items: title, groups, subgroups, symbols, icon labels, bounding box, and columns.</p><p>Other sections, such as <span class="strong"><strong>Position and Size</strong></span>, <span class="strong"><strong>Rotation</strong></span>, <span class="strong"><strong>Frame</strong></span>, <span class="strong"><strong>Background</strong></span>, <span class="strong"><strong>Item ID</strong></span>, and <span class="strong"><strong>Rendering</strong></span>, provide the same options as those for the map item.</p></div>
<div class="section" title="Other map items"><div class="titlepage" id="aid-UGI02"><div><div><h1 class="title"><a id="ch03lvl1sec26"/>Other map items</h1></div></div></div><p>For now, our map <a id="id238" class="indexterm"/>contains two necessary items: the map itself and the legend that explains its content. However, there are more items that can be used to improve its aesthetic<a id="id239" class="indexterm"/> view and geographic readability, such as a scale bar, a north arrow, text labels, and so on.</p><div class="section" title="Scale bar"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec26"/>Scale bar</h2></div></div></div><p>Before adding a scale bar item, make<a id="id240" class="indexterm"/> sure that your map canvas is using the projected coordinate reference system in linear measurement units (meters and feet). To add a scale bar, click on the <span class="strong"><strong>Add new scalebar</strong></span> <span class="inlinemediaobject"><img src="../Images/image00384.jpeg" alt="Scale bar"/></span> button in the <span class="strong"><strong>Composer Items</strong></span> toolbar, and drag the mouse <a id="id241" class="indexterm"/>arrow over the page while holding down the left mouse button. You will see a rectangle drawn on the page and a scale bar inside it. With the scale bar item selected, use the <span class="strong"><strong>Item properties</strong></span> tab to customize its appearance.</p><p>In the <span class="strong"><strong>Main properties</strong></span> section, select a map to associate the scale bar with. As you will be working with only one map, <span class="strong"><strong>Map 0</strong></span> will be set by default. The <span class="strong"><strong>Style</strong></span> drop-down list defines the appearance of the scale bar:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Single</strong></span> or <span class="strong"><strong>Double Box</strong></span> is responsible for scalebar appearance as a singular or double zebra box respectively</li><li class="listitem"><span class="strong"><strong>Line Ticks Middle</strong></span>, <span class="strong"><strong>Down</strong></span>, or <span class="strong"><strong>Up</strong></span> produce a simple horizontal line with tick marks on it for fixing scale units</li><li class="listitem"><span class="strong"><strong>Numeric</strong></span> displays the scale as a numeric ratio<div class="note" title="Note"><h3 class="title"><a id="tip17"/>Tip</h3><p>A graphical scale bar is the right approach to represent scales on maps that appear as images in presentations, reports, and publications. It is advisable to use it instead of a numeric ratio scale because the graphical bar will be proportionally scaled during image resizing. If you still need to use a ratio scale, make sure that the image will be distributed in its original size.</p></div></li></ul></div><p>For the purpose of this tutorial, select <span class="strong"><strong>Double Box Style</strong></span>. The <span class="strong"><strong>Units</strong></span> section is responsible for the right representation of measurement units:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">From the drop-down list, select the <span class="strong"><strong>Feet</strong></span> projection measurement units. The scale bar will be converted into a bar that measures miles. Similarly, conversions are supported by <span class="strong"><strong>Meters</strong></span> and <span class="strong"><strong>Nautical Miles</strong></span>. <span class="strong"><strong>Map units</strong></span> can use the original map units, but you will have to specify them.</li><li class="listitem">In the <span class="strong"><strong>Label</strong></span> field, type in <code class="literal">mi</code> to use the abbreviation of measurement units (miles, in our case).</li><li class="listitem"><span class="strong"><strong>Map units per bar unit</strong></span> represents the ratio of map units to bar units. Enter the value as <code class="literal">5280</code> here, as we know that 1 mile is equal to 5,280 feet.</li></ol><div style="height:10px; width: 1px"/></div><p>Don't worry about strange, collapsed appearance of your scale bar; we will fix it in the <span class="strong"><strong>Segments</strong></span> section as explained:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the <span class="strong"><strong>Size</strong></span> section, you should enter the value to define how long a segment will be. If you want it to be 1 mile long, enter <code class="literal">5280</code>; to make it 2 miles long, enter <code class="literal">10560</code> (<span class="emphasis"><em>5,280×2</em></span>); and so on. The principle is simple—just use the <span class="strong"><strong>Map units per </strong></span><a id="id242" class="indexterm"/><span class="strong"><strong>bar unit</strong></span> ratio that you entered in the <span class="strong"><strong>Main properties</strong></span> section and multiply it by the number of scale bar units that should be in one segment. For the purpose of this tutorial, we will make one segment equal to 1 mile and enter a value of <code class="literal">5280</code>.</li><li class="listitem">In <span class="strong"><strong>Segments</strong></span>, enter value <code class="literal">2</code> for <span class="strong"><strong>left</strong></span> and <code class="literal">1</code> for <span class="strong"><strong>right</strong></span>.</li><li class="listitem">Increase the scale bar's <span class="strong"><strong>Height</strong></span> value to <code class="literal">5</code> mm.</li></ol><div style="height:10px; width: 1px"/></div><p>In the <span class="strong"><strong>Display</strong></span> <a id="id243" class="indexterm"/>section, you can customize the following scale bar properties:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Box margin</strong></span>: The bigger this value, the longer the distance between the scale bar item 's contents and the border of its bounding box.</li><li class="listitem"><span class="strong"><strong>Labels margin</strong></span>: This defines the space between the scale bar and text labels.</li><li class="listitem"><span class="strong"><strong>Line width</strong></span>: This defines the width of the scale bar's outline.</li><li class="listitem"><span class="strong"><strong>Join style</strong></span>: This defines the appearance of the scale bar's corner. It is available only for box type scale bars.</li><li class="listitem"><span class="strong"><strong>Cap style</strong></span>: This defines the appearance of line endings. It is available only for line type scale bars.</li><li class="listitem"><span class="strong"><strong>Alignment</strong></span>: This aligns the scale bar and its labels within the bounding box. It is available only for the numeric scale type.</li></ul></div><p>The<span class="strong"><strong> Fonts and colors</strong></span> section provides access to the eponymous functionality. To change the font or color, click on the button and select the necessary item from the dialog window. Note that <span class="strong"><strong>Fill color</strong></span> and <span class="strong"><strong>Secondary fill color</strong></span> work only with box type scale bars. In the following screenshot, you can see the example of a simple <span class="strong"><strong>Double Box</strong></span> scale bar with two segments on the left side and one on the right side:</p><div class="mediaobject"><img src="../Images/image00385.jpeg" alt="Scale bar"/></div><p style="clear:both; height: 1em;"> </p><p>Sections such as <span class="strong"><strong>Position and Size</strong></span>, <span class="strong"><strong>Rotation</strong></span>, <span class="strong"><strong>Frame</strong></span>, <span class="strong"><strong>Background</strong></span>, <span class="strong"><strong>Item ID</strong></span>, and <span class="strong"><strong>Rendering</strong></span> provide the<a id="id244" class="indexterm"/> same options as those that were covered for the map<a id="id245" class="indexterm"/> item.</p></div><div class="section" title="North arrow"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec27"/>North arrow</h2></div></div></div><p>To add a north arrow, click on<a id="id246" class="indexterm"/> the <span class="strong"><strong>Add image</strong></span> <span class="inlinemediaobject"><img src="../Images/image00386.jpeg" alt="North arrow"/></span> button in the <span class="strong"><strong>Composer Items</strong></span> toolbar, and drag the mouse <a id="id247" class="indexterm"/>arrow over the page while holding down the left mouse button. You will see an empty rectangle drawn on the page. With <span class="strong"><strong>Image item</strong></span> selected, use the <span class="strong"><strong>Item properties</strong></span> tab to customize its appearance.</p><p>First of all, you should navigate to the <span class="strong"><strong>Image source</strong></span> file you want to use:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Expand the <span class="strong"><strong>Search directories</strong></span> section. In this section, you can set up <span class="strong"><strong>Image search paths</strong></span>. By default, you will see the <code class="literal">QGIS installation path\qgis\svg\</code> path and its subfolders. You can always redefine paths with the <span class="strong"><strong>Remove</strong></span> and <span class="strong"><strong>Add</strong></span> buttons, and get access to your own images.</li><li class="listitem">In the <span class="strong"><strong>Loading previews...</strong></span> window, you will see thumbnails of the available images as shown in the following screenshot. Clicking on them automatically loads them into the image item frame. For the purpose of this tutorial, we select <code class="literal">NorthArrow_02.svg</code>.<div class="mediaobject"><img src="../Images/image00387.jpeg" alt="North arrow"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div style="height:10px; width: 1px"/></div><p>Now that you have selected the north arrow, you can adjust some of its <span class="strong"><strong>Main properties</strong></span>. <span class="strong"><strong>Resize mode</strong></span> defines the approach to image adjustment within its frame:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Zoom</strong></span>: The<a id="id248" class="indexterm"/> image will be adjusted to the frame and its proportions will be saved.</li><li class="listitem"><span class="strong"><strong>Stretch</strong></span>: The image will be stretched within the frame, ignoring its proportions.</li><li class="listitem"><span class="strong"><strong>Clip</strong></span>: The image will be resized to its original size, and the frame will be used to clip the image, so only the part of it will be visible. This mode is appropriate for raster images only.</li><li class="listitem"><span class="strong"><strong>Zoom and resize frame</strong></span>: Both the image and the frame will be resized to fit each other. First, the image will be proportionally adjusted to fit the frame, and then the <a id="id249" class="indexterm"/>frame will be adjusted to encompass the image.</li><li class="listitem"><span class="strong"><strong>Resize frame to image size</strong></span>: The frame will be adjusted to the original image size.</li></ul></div><p>For the purpose of this tutorial, we will use the <span class="strong"><strong>Zoom and resize frame</strong></span> mode. In this mode, the <span class="strong"><strong>Placement</strong></span> option is inactive, but you can use it when selecting the <span class="strong"><strong>Zoom</strong></span> and <span class="strong"><strong>Clip</strong></span> modes to position an image within its frame. Similarly, <span class="strong"><strong>Image rotation</strong></span> is also available for the <span class="strong"><strong>Zoom</strong></span> and <span class="strong"><strong>Zoom and resize frame</strong></span> modes. Activate the <span class="strong"><strong>Sync with map</strong></span> toggle if you want to rotate the north arrow synchronously with the map.</p><p>Other sections, such as <span class="strong"><strong>Position and Size</strong></span>, <span class="strong"><strong>Rotation</strong></span>, <span class="strong"><strong>Frame</strong></span>, <span class="strong"><strong>Background</strong></span>, <span class="strong"><strong>Item ID</strong></span>, and <span class="strong"><strong>Rendering</strong></span>, provide the same options as those covered for the map item.</p></div><div class="section" title="Other items"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec28"/>Other items</h2></div></div></div><p>So far, we have covered only the most important and the necessary map items. You have probably noticed that the <span class="strong"><strong>Composer Items</strong></span> panel provides access to many more items, as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Label item</strong></span><span class="inlinemediaobject"><img src="../Images/image00388.jpeg" alt="Other items"/></span>: This provides<a id="id250" class="indexterm"/> control over text (or HTML) labels and their various properties, such as <span class="strong"><strong>Font</strong></span>, <span class="strong"><strong>Font color</strong></span>, <span class="strong"><strong>Vertical</strong></span> and <span class="strong"><strong>Horizontal</strong></span> (alignment), <span class="strong"><strong>Position and Size</strong></span>, <span class="strong"><strong>Rotation</strong></span>, and so on.
</li><li class="listitem"><span class="strong"><strong>Shape item</strong></span><span class="inlinemediaobject"><img src="../Images/image00389.jpeg" alt="Other items"/></span>: This allows you to add simple geometric figures, such as rectangles, triangles, or ellipses, to the layout. In the <span class="strong"><strong>Item properties</strong></span> tab, you can change their type, style, and <a id="id251" class="indexterm"/>other basic options, such as <span class="strong"><strong>Position and Size</strong></span>, <span class="strong"><strong>Rotation</strong></span>, <span class="strong"><strong>Frame</strong></span>, <span class="strong"><strong>Background</strong></span>, <span class="strong"><strong>Item ID</strong></span>, and <span class="strong"><strong>Rendering</strong></span>.
</li><li class="listitem"><span class="strong"><strong>Arrow item</strong></span><span class="inlinemediaobject"><img src="../Images/image00390.jpeg" alt="Other items"/></span>: This is a very useful element for highlighting relations between multiple maps and<a id="id252" class="indexterm"/> overviews. In the <span class="strong"><strong>Item properties</strong></span> tab, you can select <span class="strong"><strong>Line style</strong></span>, <span class="strong"><strong>Arrow outline</strong></span> and <span class="strong"><strong>fill colors</strong></span>, <span class="strong"><strong>Arrow outline</strong></span> and <span class="strong"><strong>width</strong></span>, and <span class="strong"><strong>Start</strong></span> and <span class="strong"><strong>End markers</strong></span>.</li><li class="listitem"><span class="strong"><strong>Attribute table item</strong></span><span class="inlinemediaobject"><img src="../Images/image00391.jpeg" alt="Other items"/></span>: This item adds a vector layer attribute table to the map layout. If you want to do so, select <span class="strong"><strong>Layer</strong></span> under <span class="strong"><strong>Item properties</strong></span> tab. By clicking on the <span class="strong"><strong>Attributes</strong></span> button, you will be<a id="id253" class="indexterm"/> taken to the <span class="strong"><strong>Select attributes</strong></span> window, where you can modify the table's structure and appearance by adding or removing unnecessary columns; changing headings, column alignment, and width; and applying sorting options.
<div class="mediaobject"><img src="../Images/image00392.jpeg" alt="Other items"/></div><p style="clear:both; height: 1em;"> </p>For this item, you can also apply <span class="strong"><strong>Feature filtering</strong></span> to exclude unnecessary<a id="id254" class="indexterm"/> or excess elements. Within the <span class="strong"><strong>Appearance</strong></span> and <span class="strong"><strong>Font and text styling</strong></span> sections, you can find various options for enhancing table readability.</li><li class="listitem"><span class="strong"><strong>HTML frame item</strong></span><span class="inlinemediaobject"><img src="../Images/image00393.jpeg" alt="Other items"/></span>: This is<a id="id255" class="indexterm"/> responsible for adding a web page or user-generated content using HTML markup. For example, you can type the following expression in the <span class="strong"><strong>Source</strong></span> window: <code class="literal">Map data is provided by &lt;a href='https://nycopendata.socrata.com/'&gt;NYC Open Data Portal&lt;/a&gt;</code>. This adds a link to the original website.</li></ul></div><p>When everything is ready, you <a id="id256" class="indexterm"/>can export your map from the menu, by navigating to <span class="strong"><strong>Composer</strong></span> | <span class="strong"><strong>Export as Image</strong></span> or <span class="strong"><strong>Export as SVG</strong></span> or <span class="strong"><strong>Export as PDF</strong></span>, or by clicking on the relevant buttons in the <span class="strong"><strong>Composer</strong></span> toolbar, where <span class="inlinemediaobject"><img src="../Images/image00394.jpeg" alt="Other items"/></span> is responsible for image exporting, <span class="inlinemediaobject"><img src="../Images/image00395.jpeg" alt="Other items"/></span> is for exporting as SVG, and <span class="inlinemediaobject"><img src="../Images/image00396.jpeg" alt="Other items"/></span> for exporting as PDF.</p><div class="mediaobject"><img src="../Images/image00397.jpeg" alt="Other items"/><div class="caption"><p>An example of a simple map created in print composer</p></div></div><p style="clear:both; height: 1em;"> </p></div></div>
<div class="section" title="Working with multiple maps and overviews"><div class="titlepage" id="aid-VF2I2"><div><div><h1 class="title"><a id="ch03lvl1sec27"/>Working with multiple maps and overviews</h1></div></div></div><p>Sometimes, there is <a id="id257" class="indexterm"/>a need to combine multiple maps within a single layout. For example, suppose you need to combine a few different maps on one page, or show the location of an area of interest within a general region. While these tasks look similar, they<a id="id258" class="indexterm"/> require slightly different solutions, which we will explore in the following sections.</p><div class="section" title="Combining several maps within a single print composer"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec29"/>Combining several maps within a single print composer</h2></div></div></div><p>For our example, we will combine two<a id="id259" class="indexterm"/> maps—relief and hurricane evacuation <a id="id260" class="indexterm"/>zones—and do this within a single print layout:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the main window, activate the layers that will be used in the relief map—<code class="literal">Brooklyn borough boundaries</code>, <code class="literal">NY borough boundaries</code>, <code class="literal">water area</code> (to show the shoreline and water bodies properly), and finally, <code class="literal">hillshade</code> and <code class="literal">height a.s.l., ft</code>.</li><li class="listitem">Then, open the <span class="strong"><strong>New Print Composer</strong></span> window, either from the <span class="strong"><strong>Project</strong></span> menu or using the <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>Shift</em></span> + <span class="emphasis"><em>P</em></span> keyboard shortcut. Adjust <span class="strong"><strong>Page Size</strong></span> for this example to <span class="strong"><strong>A3</strong></span>, set <span class="strong"><strong>Grid Spacing</strong></span> to <code class="literal">5</code> mm, and activate the <span class="strong"><strong>Show Grid</strong></span> and <span class="strong"><strong>Snap to Grid</strong></span> options from the <span class="strong"><strong>View</strong></span> menu.</li><li class="listitem">Add a new map item and adjust its size to <code class="literal">200×200</code> mm in the <span class="strong"><strong>Position and Size</strong></span> section of the <span class="strong"><strong>Item properties</strong></span> tab. Set the scale to <code class="literal">100000</code> and place the map content properly. After that, activate the following toggles to prevent changes to the map's content:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Lock layers for map item</strong></span></li><li class="listitem"><span class="strong"><strong>Lock layers styles for map item</strong></span></li></ul></div></li><li class="listitem">Add and adjust another necessary map items, such as the scale bar, legend, north arrow, and so on. Compose a legend, removing unnecessary layers. If you want to block some items from changes, lock them in the <span class="strong"><strong>Items</strong></span> panel, as shown here:<div class="mediaobject"><img src="../Images/image00398.jpeg" alt="Combining several maps within a single print composer"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">When you are done with the relief map and its elements, go to the main map canvas window<a id="id261" class="indexterm"/> and activate the layer you want to show on<a id="id262" class="indexterm"/> the map. For example, activate <code class="literal">hurricane evacuation zones</code> and <code class="literal">primary residential zoning</code>, and deactivate <code class="literal">hillshade</code> and <code class="literal">height a.s.l., ft</code>.</li><li class="listitem">Add a new map item and repeat steps 3 and 4. After you are done, the result may look like what is shown in the following screenshot:<div class="mediaobject"><img src="../Images/image00399.jpeg" alt="Combining several maps within a single print composer"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div style="height:10px; width: 1px"/></div><p>You can combine any number of maps within a single layout, and use different scales and individual legends for them. The only thing you should always remember is to use <span class="strong"><strong>Lock layers (styles) for map item</strong></span> to prevent any changes within a map.</p><p>This approach is simple<a id="id263" class="indexterm"/> and effective when you need to present similar maps<a id="id264" class="indexterm"/> within a single page, but sometimes there is a need to show different areas of interest in different zoom levels, and also relate their extents with each other. In such cases, you should use so-called map overviews.</p></div><div class="section" title="Working with map overviews"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec30"/>Working with map overviews</h2></div></div></div><p>Map overviews relate multiple map extents within a single layout, and they are very useful for showing how an area<a id="id265" class="indexterm"/> of interest is related to a bigger spatial context, for example, a region within a country, a district within a city area, and so on.</p><p>In this example, we will combine three overviews into a single map layout to show how Brooklyn is related with the whole of New York and how the area of interest within Brooklyn is related to the borough's extent. To achieve this, you need to perform the following steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">In the main map canvas window, activate the <code class="literal">NY borough boundaries</code> layer and deactivate all other layers. Create a new print composer, use the default <span class="strong"><strong>A4</strong></span> page size, and adjust any other properties required. Add a new map item to the layout. This map will be used to show simple boundaries and provide spatial context for the main map, so it may be encompassed in a small 95 x 95 mm frame with a scale of 1:515,000. After you have adjusted the map view, don't forget to select <span class="strong"><strong>Lock layers for map item</strong></span> and <span class="strong"><strong>Lock layers styles for map item</strong></span>.</li><li class="listitem">Now, you will be adding the main map, and it will be the core of the layout. In the main map canvas window, activate the layers you wish to show on the map (for example, <code class="literal">hurricane evacuation zones</code> and <code class="literal">primary residential zoning</code>). Again, add a new map item to the layout and adjust its size, scale, and position. For example, it might be of 200 x 200 mm with a scale of 1:97,000. Again, use <span class="strong"><strong>Lock layers for map item</strong></span> and <span class="strong"><strong>Lock layers styles for map item</strong></span>.</li><li class="listitem">Finally, add the third map. Activate the layers you wish to show in the map in the main map canvas window (for example, <code class="literal">hillshade</code>, and <code class="literal">height a.s.l., ft</code>). Add a new map item. Adjust the map size to 95 x 95 mm and set the scale to <code class="literal">20000</code>. Move the item content to show the area you are interested in and select <span class="strong"><strong>Lock layers for map item</strong></span>.</li><li class="listitem">
Now, we need to relate the map extents with each other. We can do this with the help of overviews. Activate the very first map item you added and expand the <span class="strong"><strong>Overviews</strong></span> section under the <span class="strong"><strong>Item properties</strong></span> tab. To add a new overview, click on the <span class="inlinemediaobject"><img src="../Images/image00374.jpeg" alt="Working with map overviews"/></span> button, and to show it on the map, activate the <span class="strong"><strong>Draw "Name" overview</strong></span> toggle. To relate an overview with a map item extent, select the map<a id="id266" class="indexterm"/> from the <span class="strong"><strong>Map frame</strong></span> drop-down list. You can change the default <span class="strong"><strong>Frame style</strong></span> using the <span class="strong"><strong>Symbol selector</strong></span> dialog window.
<div class="mediaobject"><img src="../Images/image00400.jpeg" alt="Working with map overviews"/></div><p style="clear:both; height: 1em;"> </p><span class="strong"><strong>Blending mode</strong></span> is useful for achieving more stylish effects when combining several overview frames. The <span class="strong"><strong>Invert overview</strong></span> toggle will invert the fill of the overview outside of its area. <span class="strong"><strong>Center on overview</strong></span> will move the map item content to place an overview in its center.
Add another overview that encompasses <span class="strong"><strong>Map frame</strong></span> with a smaller extent using the <span class="inlinemediaobject"><img src="../Images/image00374.jpeg" alt="Working with map overviews"/></span> button. You can combine as many overviews as you want. Use the <span class="inlinemediaobject"><img src="../Images/image00379.jpeg" alt="Working with map overviews"/></span> button to remove unnecessary overviews and the <span class="inlinemediaobject"><img src="../Images/image00377.jpeg" alt="Working with map overviews"/></span> and <span class="inlinemediaobject"><img src="../Images/image00376.jpeg" alt="Working with map overviews"/></span> buttons to<a id="id267" class="indexterm"/> reorder them.
</li><li class="listitem">
Go to another map and add an overview to it. Select the map item you are interested in and go to its <span class="strong"><strong>Properties</strong></span> tab. Expand the <span class="strong"><strong>Overviews</strong></span> section and click on the <span class="inlinemediaobject"><img src="../Images/image00374.jpeg" alt="Working with map overviews"/></span> button to add an overview. Select a necessary map from the <span class="strong"><strong>Map frame</strong></span> drop-down list and adjust the overview's <span class="strong"><strong>Frame style</strong></span>.
<div class="note" title="Note"><h3 class="title"><a id="tip18"/>Tip</h3><p>QGIS makes it possible to combine multiple overviews and produce complex results. To highlight the differences and relations between different overviews, use individual map frames and scale bars.</p></div></li></ol><div style="height:10px; width: 1px"/></div><p>In the following screenshot, you can see the resulting map. It combines three map items and relates their extents with overviews.</p><div class="mediaobject"><img src="../Images/image00401.jpeg" alt="Working with map overviews"/></div><p style="clear:both; height: 1em;"> </p></div><div class="section" title="Creating atlases"><div class="titlepage"><div><div><h2 class="title"><a id="ch03lvl2sec31"/>Creating atlases</h2></div></div></div><p>In QGIS, an atlas is a<a id="id268" class="indexterm"/> multipage map created in an automated way with the atlas generation functionality. The idea underlying atlases is very simple—very often, the user needs to generate several small maps, instead of one big map. To arrange multiple maps properly within several pages, an atlas coverage layer is used. This coverage layer may contain various types of geometry (points, lines, and polygons) that are used to define the general extent of the map, separate sheet's extents, their quantity, and their sequence. The most common example of an atlas is a large area (for example, a country, borough, or watershed basin) separated into several parts based on its subunits (for example, regions, states, counties, or subbasins).</p><p>In this example tutorial, we will generate multiple street network maps using the <code class="literal">zipcode</code> layer elements as bounding extents for multiple maps. Moreover, we will use a specially designed plugin to mask all excluded areas and achieve stylish cartographic effects:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First of all, we enable the layers that we are going to create our map from: <code class="literal">Brooklyn borough boundaries</code>, <code class="literal">zipcode</code>, <code class="literal">water area</code>, <code class="literal">parks</code>, and <code class="literal">roads</code>.</li><li class="listitem">For the purpose of this tutorial, we are going to use the external <span class="strong"><strong>Mask</strong></span> plugin. This plugin allows the user to create a map-masking layer and also filter the labeling of other layers, removing labels that are outside the area of interest. It is also able to interact with the atlas generation process. Install and activate the <span class="strong"><strong>Mask</strong></span> plugin as described in <a class="link" title="Chapter 1. Handling Your Data" href="part0014.xhtml#aid-DB7S2">Chapter 1</a>, <span class="emphasis"><em>Handling Your Data</em></span>.</li><li class="listitem">
When the<a id="id269" class="indexterm"/> plugin is activated, we need to provide it with layer features on which masking will be based. In our case, this will be <code class="literal">zipcode</code>. Activate it. Then, using the <span class="strong"><strong>Select features by area or single click</strong></span><span class="inlinemediaobject"><img src="../Images/image00402.jpeg" alt="Creating atlases"/></span> mode, click on the map canvas to select any feature.
</li><li class="listitem">
Once the selected polygon is highlighted, go to <span class="strong"><strong>Plugins</strong></span> | <span class="strong"><strong>Mask</strong></span> | <span class="strong"><strong>Create a mask</strong></span> and open the <span class="strong"><strong>Create a mask</strong></span> dialog window. In this window, you can define the following properties of the mask:
<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Style</strong></span> of the masking polygon, which, by default, uses <span class="strong"><strong>Inverted polygons renderer</strong></span> with the <span class="strong"><strong>Shapeburst fill</strong></span> option, modified by <span class="strong"><strong>Transparency</strong></span>.</li><li class="listitem">The <span class="strong"><strong>Buffer</strong></span> toggle generates a buffer around the area of interest whose width and complexity are defined by the <span class="strong"><strong>Units</strong></span> and <span class="strong"><strong>Segments</strong></span> values.</li><li class="listitem">On-the-fly simplification is used for the mask geometry used in expressions. The higher the value, the coarser the geometry.</li><li class="listitem"><span class="strong"><strong>Function used for labeling filtering on polygons</strong></span> defines how exactly labels outside the masking polygon will be eliminated.</li><li class="listitem"><span class="strong"><strong>Function used for labeling filtering on lines</strong></span> defines the exclusion mode for line labels. Select <span class="strong"><strong>The mask geometry contains the line</strong></span> from the drop-down list. In the available layers list, activate <code class="literal">roads</code> (note that this layer is available only when its labeling is turned on).</li><li class="listitem">Activate the <span class="strong"><strong>Save as</strong></span> toggle and navigate to the catalog where you want to save<a id="id270" class="indexterm"/> the newly created mask layer. Otherwise, a so-called memory (temporary) layer will be created, and it will not be saved after closing the project.</li></ul></div><div class="mediaobject"><img src="../Images/image00403.jpeg" alt="Creating atlases"/></div><p style="clear:both; height: 1em;"> </p></li><li class="listitem">After you've clicked on <span class="strong"><strong>OK</strong></span>, the mask layer will appear in the layers panel, and you will see its fancy styling effect applied to the map canvas. The selected polygon feature looks highlighted, while the outer map is faded out. Also, labels appear only within the masked feature. Now we can deactivate the <code class="literal">zipcode</code> layer, as we don't want its borders to be shown on the resulting map, and proceed to print composer to generate an atlas.</li><li class="listitem">Open a new print composer and add to it a new map item and any other items you want to include in the layout. In our example, we will use the following:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Custom <a id="id271" class="indexterm"/>page size equal to 200 x 200 mm.</li><li class="listitem">Road network map item with the same size, 200 x 200 mm, and a scale of 1: 20000. Don't lock the layers for this map item because it will be changed dynamically in the atlas.</li><li class="listitem">A small 50 x 50 mm map item in the top-right corner, with the <code class="literal">New York borough boundaries</code> layer and an overview added to it. After creating this map, lock its layers and their styles.</li><li class="listitem">Now you can come back to the main window and activate the layers that are necessary for the road network map.</li></ul></div></li><li class="listitem">After you have adjusted all the necessary items, go to the <span class="strong"><strong>Atlas generation</strong></span> tab and activate the <span class="strong"><strong>Generate an atlas</strong></span> toggle.</li><li class="listitem">The <span class="strong"><strong>Configuration</strong></span> section provides the following options to configure an atlas from its coverage:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">Select <code class="literal">zipcode</code> from the <span class="strong"><strong>Coverage layer</strong></span> drop-down list. You can select any layer from this list, and its features will be used to iterate over them and create atlas pages.</li><li class="listitem">When <span class="strong"><strong>Hidden coverage layer</strong></span> is active, the coverage layer isn't shown on the map. In our case, we don't use it because we have already deactivated the coverage layer.</li><li class="listitem">In the <span class="strong"><strong>Filter with</strong></span> area, you can create an expression to select only some futures from the coverage area. For example, you can use only polygons with an area larger than some predefined value.</li></ul></div></li><li class="listitem">The <span class="strong"><strong>Output</strong></span> section provides control over the results through the following options:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Output filename expression</strong></span> is a template that will be used to name multiple output files.</li><li class="listitem"><span class="strong"><strong>Single file export when possible</strong></span> generates a single multipage file (useful for exports to <code class="literal">.pdf</code>). If this option is active, <span class="strong"><strong>Output filename expression</strong></span> is not applied.</li><li class="listitem">The <span class="strong"><strong>Sort by</strong></span> option provides access to the names of attribute fields of the coverage layer, and you can select any of them to sort output files in ascending or descending order of the field values, with the arrow button beside.</li></ul></div></li><li class="listitem">Go back to the<a id="id272" class="indexterm"/> <span class="strong"><strong>Item properties</strong></span> tab. Note that the map item with the main map (road network) should be selected. Activate the <span class="strong"><strong>Controlled by atlas</strong></span> section, where you can select from among the following options:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="strong"><strong>Margin around feature</strong></span>: you can set the amount of surrounding area for each feature that is mapped on a single atlas page. This means that the map extent and scale will not be fixed. They will be adjusted to encompass the feature and its margin set. We select this option and set a value of <code class="literal">5</code> percent.</li><li class="listitem"><span class="strong"><strong>Predefined scale (best fit)</strong></span>: One of the project's predefined scales that best fits the feature into the atlas page will be used.</li><li class="listitem"><span class="strong"><strong>Fixed scale</strong></span>: Each feature will be shown in the same scale and the map page will automatically be centered around it. This is very useful when you need to print several maps in the same scale.</li></ul></div></li><li class="listitem">
Now, everything is ready for you to generate and preview the atlas. You will notice that the <span class="strong"><strong>Preview atlas</strong></span> button in the <span class="strong"><strong>Atlas</strong></span> toolbar is active. Click on it to generate your atlas. When the generation process completes, you will see that the other buttons on the toolbar have also become active. Click on them to preview the atlas pages.
<div class="mediaobject"><img src="../Images/image00404.jpeg" alt="Creating atlases"/></div><p style="clear:both; height: 1em;"> </p>
Using the toolbar buttons, you can not only explore your atlas, which contains multiple pages created within minutes, but also get quick access to the <span class="strong"><strong>Print</strong></span><span class="inlinemediaobject"><img src="../Images/image00405.jpeg" alt="Creating atlases"/></span>, <span class="strong"><strong>Export</strong></span>, and <span class="strong"><strong>Settings</strong></span><span class="inlinemediaobject"><img src="../Images/image00406.jpeg" alt="Creating atlases"/></span> options. The <span class="strong"><strong>Export</strong></span> options<a id="id273" class="indexterm"/> are shown in this screenshot:
<div class="mediaobject"><img src="../Images/image00407.jpeg" alt="Creating atlases"/></div><p style="clear:both; height: 1em;"> </p></li></ol><div style="height:10px; width: 1px"/></div><p>In the following screenshot, you can see an example of a single atlas page:</p><div class="mediaobject"><img src="../Images/image00408.jpeg" alt="Creating atlases"/></div><p style="clear:both; height: 1em;"> </p></div></div>
<div class="section" title="Managing print composers" id="aid-10DJ41"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec28"/>Managing print composers</h1></div></div></div><p>Beginners usually forget to <a id="id274" class="indexterm"/>apply map locking options and often create every map from scratch. As a result, they are overloaded with multiple map composers that have permanently changing maps. If you want to save your time, then it is wise to use <span class="strong"><strong>Lock layers for map item</strong></span> and <span class="strong"><strong>Lock layer styles for map item</strong></span> to block undesirable changes in your maps.</p><p>You can have multiple maps and atlases that are stored within a single project, and get access to them by going to <span class="strong"><strong>Project</strong></span> | <span class="strong"><strong>Print Composers</strong></span>. Advanced options are available at <span class="strong"><strong>Print Composer Manager</strong></span>, which is<a id="id275" class="indexterm"/> under<span class="strong"><strong> Project</strong></span>.</p><div class="mediaobject"><img src="../Images/image00409.jpeg" alt="Managing print composers"/></div><p style="clear:both; height: 1em;"> </p><div class="note" title="Note"><h3 class="title"><a id="tip19"/>Tip</h3><p>In <span class="strong"><strong>Composer manager</strong></span>, you can create a new print composer from the template. Any map layout can be saved as a template from the print composer menu <span class="strong"><strong>Composer</strong></span> | <span class="strong"><strong>Save as Template</strong></span>.</p></div></div>
<div class="section" title="Summary" id="aid-11C3M1"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec29"/>Summary</h1></div></div></div><p>In this chapter, you learned about basic map items and their configuration with print composer. Now you know that QGIS is not only a great tool for creating a simple print map, but it also provides sophisticated options to combine multiple maps into a single layout, relate them with overviews, and finally, generate multipage map atlases with a few clicks.</p><p>While print maps are very useful, they are not very efficient if you prefer to share your results online. In the next chapter, you will learn how to publish your data online quickly and efficiently.</p></div></body></html>