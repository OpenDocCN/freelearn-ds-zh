<html><head></head><body>
<div><h1 class="chapter-number" id="_idParaDest-108"><a id="_idTextAnchor109" class="calibre6 pcalibre1 pcalibre"/>7</h1>
<h1 id="_idParaDest-109" class="calibre5"><a id="_idTextAnchor110" class="calibre6 pcalibre1 pcalibre"/>Developing a Native Application with Snowpark</h1>
<p class="calibre3">In today’s data-driven world, the demand for actionable insights is at an all-time high. However, traditional data analysis workflows often need help with slow processing times, siloed data, and complex development procedures. This is where Snowpark, with its unique features for native applications, comes to the rescue. By offering a powerful and innovative solution, Snowpark overcomes these challenges and opens up new revenue streams for organizations through distribution in the Snowflake Marketplace.</p>
<p class="calibre3">In this chapter, we’re going to cover the following main topics:</p>
<ul class="calibre15">
<li class="calibre14">Introduction to the Native App Framework</li>
<li class="calibre14">Developing the native application</li>
<li class="calibre14">Publishing the native application</li>
<li class="calibre14">Managing the native application</li>
</ul>
<h1 id="_idParaDest-110" class="calibre5"><a id="_idTextAnchor111" class="calibre6 pcalibre1 pcalibre"/>Technical requirements</h1>
<p class="calibre3">To set up the environment, please refer to the technical requirements in the previous chapter. The supporting materials are available at <a href="https://github.com/PacktPublishing/The-Ultimate-Guide-To-Snowpark" class="calibre6 pcalibre1 pcalibre">https://github.com/PacktPublishing/The-Ultimate-Guide-To-Snowpark</a>.</p>
<h1 id="_idParaDest-111" class="calibre5"><a id="_idTextAnchor112" class="calibre6 pcalibre1 pcalibre"/>Introduction to the Native Apps Framework</h1>
<p class="calibre3">Data analysis has evolved beyond <a id="_idIndexMarker401" class="calibre6 pcalibre1 pcalibre"/>static reports. In today’s business landscape, real-time insights, interactive visuals, and seamless integration with operational tools are in high demand. While traditional methods utilizing SQL or pre-built dashboards have their place, they need more agility and flexibility for modern data exploration. This is where native applications step in, offering exciting potential for immediate and actionable insights and sparking new possibilities for your data analysis.</p>
<p class="calibre3">Snowflake native applications offer a unique advantage by allowing you to develop applications directly within the Data Cloud. These applications reside alongside your data, eliminating the need for data movement or external connectors. This removes the data transfer bottleneck between systems and significantly reduces network latency. Snowflake’s architecture, optimized for parallel processing and distributed storage, enables faster analysis of complex queries and large datasets than traditional models. Moreover, the native <a id="_idIndexMarker402" class="calibre6 pcalibre1 pcalibre"/>applications benefit from Snowflake’s secure foundation, which offers a multi-layered security architecture with features such as encryption, access controls, and audit trails without separate infrastructure.</p>
<h2 id="_idParaDest-112" class="calibre7"><a id="_idTextAnchor113" class="calibre6 pcalibre1 pcalibre"/>Snowflake’s native application Landscape</h2>
<p class="calibre3">The Snowflake Native App Framework is a powerful tool for building data applications that utilize Snowflake’s core functionality. With this framework, you can extend the capabilities of Snowflake features by sharing data and relevant business logic with other Snowflake accounts. This can include <a id="_idIndexMarker403" class="calibre6 pcalibre1 pcalibre"/>using Streamlit apps, stored procedures, and functions written in the Snowpark API, JavaScript, and SQL. By leveraging the power of Snowflake’s capabilities, you can create sophisticated applications that are tailored to your unique needs.</p>
<p class="calibre3">In addition to expanding Snowflake’s features, the Snowflake Native App Framework also allows you to share your applications with others. You can distribute your apps through free or paid listings in the Snowflake Marketplace, or privately distribute them to specific consumers. Furthermore, this framework allows you to create rich visualizations in your application using Streamlit. With the Snowflake Native App Framework, you have all the tools you need to create powerful, scalable, and flexible data applications that meet your organization’s needs.</p>
<p class="calibre3">In summary, the Snowflake Native App Framework provides a comprehensive solution for building sophisticated data applications. Whether you need to expand Snowflake’s capabilities, share your applications with others, or create rich visualizations, this framework has you covered. With its powerful features and scalability, the Snowflake Native App Framework is an essential tool for any organization looking to build data applications that leverage Snowflake’s full potential.</p>
<p class="calibre3">Snowflake native applications consist of business logic that defines the core functionality of your application, encompassing tasks such as data transformations, calculations, and model predictions. The data model can be developed using Snowpark, where native applications leverage Snowflake’s powerful engine to interact with your data efficiently. Snowpark enables you to manipulate tables, query datasets, and extract meaningful insights. The user interface can be developed using Streamlit, and users can interact with the application natively within Snowflake.</p>
<p class="calibre3">Snowpark bridges the gap <a id="_idIndexMarker404" class="calibre6 pcalibre1 pcalibre"/>between traditional data analysis and modern application development by offering several key features that make it the ideal engine for building native applications. The applications seamlessly scale with your data volume, eliminating the need for manual infrastructure provisioning.</p>
<p class="calibre3">Before diving deep into developing a Snowpark application, let us understand the benefits that Native Apps provide.</p>
<h2 id="_idParaDest-113" class="calibre7"><a id="_idTextAnchor114" class="calibre6 pcalibre1 pcalibre"/>Native App Framework components</h2>
<p class="calibre3">The <strong class="bold">Snowflake Native App Framework</strong> components consist of the <strong class="bold">provider</strong>, the developer of the apps and the <a id="_idIndexMarker405" class="calibre6 pcalibre1 pcalibre"/>distributor of them<a id="_idIndexMarker406" class="calibre6 pcalibre1 pcalibre"/> for consumption, and the <strong class="bold">consumer</strong>, who accesses the data and <a id="_idIndexMarker407" class="calibre6 pcalibre1 pcalibre"/>application that the provider distributes. The high-level components of the Native App Framework are shown in the following diagram:</p>
<div><div><img alt="Figure 7.1 – Native App Framework components" src="img/B19923_07_1.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.1 – Native App Framework components</p>
<p class="calibre3">The provider account is where the application is developed and packaged for distribution. The package includes the application code, Snowpark models, and associated data. It also <a id="_idIndexMarker408" class="calibre6 pcalibre1 pcalibre"/>consists of the various licenses and entitlements required for the application packages. The application is then packed and can be made available for distribution.</p>
<p class="calibre3">The provider can distribute the packages as a public marketplace listing that other organizations can consume or through a private listing, which can also be distributed as internal apps within the same organization. The consumer account deploys the application and can consume it with local data and access external systems. The app for this can be built using Streamlit in Python.</p>
<h2 id="_idParaDest-114" class="calibre7"><a id="_idTextAnchor115" class="calibre6 pcalibre1 pcalibre"/>Streamlit in Snowflake</h2>
<p class="calibre3">Streamlit is an open source Python<a id="_idIndexMarker409" class="calibre6 pcalibre1 pcalibre"/> library that makes creating <a id="_idIndexMarker410" class="calibre6 pcalibre1 pcalibre"/>and sharing custom web apps for machine learning and data <a id="_idIndexMarker411" class="calibre6 pcalibre1 pcalibre"/>science easy. It allows you to build and deploy powerful data applications quickly. Streamlit in Snowflake helps you move beyond pure data and enter the territory of application logic, making the application come alive and transforming insights into actions and reactions. Using Streamlit in Snowflake, you can build applications that process and use data in Snowflake without moving data or application code to an external system. The Native App can embed interactive data visualizations and<a id="_idIndexMarker412" class="calibre6 pcalibre1 pcalibre"/> user interfaces directly into the app, enabling dynamic charts and graphs that update as users interact<a id="_idIndexMarker413" class="calibre6 pcalibre1 pcalibre"/> with the data, and interactive data exploration tools for users to drill down and uncover <a id="_idIndexMarker414" class="calibre6 pcalibre1 pcalibre"/>more profound insights.</p>
<p class="calibre3">Let’s discuss the various benefits provided by Native Apps.</p>
<h2 id="_idParaDest-115" class="calibre7"><a id="_idTextAnchor116" class="calibre6 pcalibre1 pcalibre"/>Benefits of Native Apps</h2>
<p class="calibre3">Native applications <a id="_idIndexMarker415" class="calibre6 pcalibre1 pcalibre"/>built within Snowflake offer unparalleled advantages for data analysis and decision-making. Native Apps provide multiple benefits; by offering streamlined development with Snowpark, they eliminate the steep learning curve typically associated with a development framework. Developers can seamlessly transition to data manipulation within Snowflake’s robust cloud environment, allowing rapid innovation. This empowers developers to focus on building impactful applications and extracting valuable insights without syntax roadblocks.</p>
<p class="calibre3">Snowflake’s integration with Streamlit enables developers to unleash the power of their existing Python expertise directly within Snowflake. Developers can build sophisticated applications for data exploration, machine learning, and interactive dashboards. This eliminates context switching and maximizes productivity within Snowflake’s secure and scalable environment. Snowflake’s <em class="italic">data residency</em> principle ensures that valuable information remains within the secure perimeter, significantly reducing the risk of data breaches.</p>
<p class="calibre3">Native applications seamlessly interface with existing Snowflake features and tools, such as Tasks and Streams, creating an integrated analytics environment. Leveraging Snowflake Tasks for automated execution and scheduling, along with Snowflake Streams or Snowpipe for real-time data<a id="_idIndexMarker416" class="calibre6 pcalibre1 pcalibre"/> ingestion and delivery, ensures continuous updates and enhances <a id="_idIndexMarker417" class="calibre6 pcalibre1 pcalibre"/>performance. Snowflake <strong class="bold">user-defined functions</strong> (<strong class="bold">UDFs</strong>) and stored procedures also improve flexibility and minimize data movement. We will explore Streamlit in Snowflake in the next section.</p>
<p class="calibre3">As we delve deeper into this chapter, we will utilize the familiar Bike Sharing dataset and its associated Snowpark <a id="_idIndexMarker418" class="calibre6 pcalibre1 pcalibre"/>model we saw in the previous chapters and develop a <a id="_idIndexMarker419" class="calibre6 pcalibre1 pcalibre"/>Streamlit application using Snowsight.</p>
<h1 id="_idParaDest-116" class="calibre5"><a id="_idTextAnchor117" class="calibre6 pcalibre1 pcalibre"/>Developing the native application</h1>
<p class="calibre3">The initial step involves developing a<a id="_idIndexMarker420" class="calibre6 pcalibre1 pcalibre"/> Streamlit application to illustrate the development of the Snowpark model. The application provides a user-friendly interface that streamlines the exploration and understanding of Snowpark’s underlying data and modeling techniques. Within Snowflake, the Streamlit application can be developed through a dedicated Python editor within Snowsight. This editor empowers users to write, edit, and execute code for their Streamlit applications effortlessly. Notably, it offers invaluable features such as auto-completion and comprehensive documentation, facilitating a smooth and intuitive development experience while leveraging the full potential of Streamlit and Snowpark functionalities. We will be using this editor to develop the Streamlit application.</p>
<p class="calibre3">Let’s delve into the detailed steps of creating a Streamlit application within the Snowflake environment:</p>
<p class="callout-heading">Note</p>
<p class="callout">The <strong class="bold">CREATE STREAMLIT</strong> privilege is required for the user at the schema level to develop the application and this application will utilize <a id="_idIndexMarker421" class="calibre6 pcalibre1 pcalibre"/>warehouse compute to run it, so choose the warehouse size appropriately. X-Small will be sufficient for the Streamlit and Native Apps developed in this chapter.</p>
<ol class="calibre13">
<li class="calibre14">Upon successful login, select <strong class="bold">Projects</strong> from the left navigation bar within Snowsight and select <strong class="bold">Streamlit</strong> to initiate the Streamlit application:</li>
</ol>
<div><div><img alt="Figure 7.2 – Streamlit Snowsight" src="img/B19923_07_2.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.2 – Streamlit Snowsight</p>
<ol class="calibre13">
<li value="2" class="calibre14">Within the Streamlit projects section, click the <strong class="bold">+ Streamlit App</strong> button to create a new Streamlit application:</li>
</ol>
<div><div><img alt="Figure 7.3 – Streamlit app creation" src="img/B19923_07_3_V.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.3 – Streamlit app creation</p>
<ol class="calibre13">
<li value="3" class="calibre14">Once you click <a id="_idIndexMarker422" class="calibre6 pcalibre1 pcalibre"/>the button, the <strong class="bold">Create Streamlit App</strong> window will appear. Provide a name for your application, as shown here:</li>
</ol>
<div><div><img alt="Figure 7.4 – Configuring the application details" src="img/B19923_07_4.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.4 – Configuring the application details</p>
<ol class="calibre13">
<li value="4" class="calibre14">Select the appropriate warehouse from the drop-down menu where you wish to execute your application’s queries. Specify the database and schema where the application will be hosted from the respective drop-down menus:</li>
</ol>
<div><div><img alt="Figure 7.5 – Defining the execution environment" src="img/B19923_07_5_V.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.5 – Defining the execution environment</p>
<ol class="calibre13">
<li value="5" class="calibre14">Finalize the creation <a id="_idIndexMarker423" class="calibre6 pcalibre1 pcalibre"/>process by clicking the <strong class="bold">Create</strong> button, which initiates the setup of your Streamlit application. Upon successful creation, Streamlit will be launched in your Snowflake editor, presenting an example of the Streamlit application in the <strong class="bold">Viewer</strong> mode. This mode offers a preview of how the application will appear to end users, facilitating visualization and assessment of its user interface:</li>
</ol>
<div><div><img alt="Figure 7.6 – The Streamlit Snowflake editor" src="img/B19923_07_6.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.6 – The Streamlit Snowflake editor</p>
<p class="calibre3">In the next section, we will discover and familiarize ourselves with the Streamlit editor.</p>
<h2 id="_idParaDest-117" class="calibre7"><a id="_idTextAnchor118" class="calibre6 pcalibre1 pcalibre"/>The Streamlit editor</h2>
<p class="calibre3">The Streamlit editor in Snowflake <a id="_idIndexMarker424" class="calibre6 pcalibre1 pcalibre"/>helps develop the Streamlit <a id="_idIndexMarker425" class="calibre6 pcalibre1 pcalibre"/>application within Snowflake. The editor is built into the Snowsight interface, making it easier to create without needing an external environment. The Streamlit in Snowflake interface is structured into three primary panes.</p>
<p class="calibre3">The object browser provides visibility into the databases, schemas, and views accessible under your permissions, aiding in data exploration and access. The Streamlit editor houses a dedicated Python editor tailored to craft your Streamlit application code, facilitating seamless development and customization. The Streamlit preview displays the running Streamlit <a id="_idIndexMarker426" class="calibre6 pcalibre1 pcalibre"/>application in real time, allowing you to observe its behavior and appearance as you make modifications.</p>
<p class="calibre3">By default, only the Streamlit <a id="_idIndexMarker427" class="calibre6 pcalibre1 pcalibre"/>editor and preview panes are visible. However, you can adjust the interface layout according to your preferences. Use the <strong class="bold">Show</strong>/<strong class="bold">Hide</strong> buttons in the lower-left corner of the Streamlit in Snowflake editor to toggle the visibility of different panes according to your workflow requirements.</p>
<p class="calibre3">Now that we are familiar with the interface, let’s create our first Streamlit application in the next section.</p>
<h2 id="_idParaDest-118" class="calibre7"><a id="_idTextAnchor119" class="calibre6 pcalibre1 pcalibre"/>Running the Streamlit application</h2>
<p class="calibre3">In this section, we will build an<a id="_idIndexMarker428" class="calibre6 pcalibre1 pcalibre"/> application using the Streamlit code from the <code>chapter_7</code> folder of the GitHub repository (<a href="https://github.com/PacktPublishing/The-Ultimate-Guide-To-Snowpark/tree/main/chapter_7" class="calibre6 pcalibre1 pcalibre">https://github.com/PacktPublishing/The-Ultimate-Guide-To-Snowpark/tree/main/chapter_7</a>). The SnowparkML <a id="_idIndexMarker429" class="calibre6 pcalibre1 pcalibre"/>code has been extensively covered in previous chapters and is available in the repository. Copy and paste the code in the <code>streamlit_bike_share_analysis.py</code> file from the repository into the Streamlit editor. The code requires the <code>BSD_TRAIN</code> table created from the <em class="italic">Bike Sharing</em> dataset that we have used before. The <code>chapter_7_data_load.ipynb</code> file can be run to create the required table.</p>
<p class="calibre3">Now, execute the Streamlit application by selecting the <strong class="bold">Run</strong> option to refresh, and the result will be updated within the Streamlit preview pane:</p>
<div><div><img alt="Figure 7.7 – The Streamlit App preview" src="img/B19923_07_7_V.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.7 – The Streamlit App preview</p>
<p class="calibre3">The code requires several <a id="_idIndexMarker430" class="calibre6 pcalibre1 pcalibre"/>packages to be installed in your <a id="_idIndexMarker431" class="calibre6 pcalibre1 pcalibre"/>Streamlit environment. Click on the <strong class="bold">Packages</strong> button in the code editor and select the following packages:</p>
<ul class="calibre15">
<li class="calibre14">Matplotlib</li>
<li class="calibre14">Seaborn</li>
<li class="calibre14">SciPy</li>
<li class="calibre14">Snowflake-ml-python</li>
</ul>
<p class="calibre3">You have successfully run your first Streamlit app inside Snowflake. You can select the app to execute it within the Snowsight context:</p>
<div><div><img alt="Figure 7.8 – The Streamlit app" src="img/B19923_07_8.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.8 – The Streamlit app</p>
<p class="callout-heading">Note</p>
<p class="callout">Snowsight offers a convenient platform for crafting single-page Streamlit applications. However, deploying multi-page Streamlit apps requires a slightly different approach, necessitating the utilization of SQL commands. Once the deployment process is complete, you can seamlessly <a id="_idIndexMarker432" class="calibre6 pcalibre1 pcalibre"/>navigate and interact with the multi-page application directly within Snowsight’s interface.</p>
<p class="calibre3">In the following section, we will <a id="_idIndexMarker433" class="calibre6 pcalibre1 pcalibre"/>develop and push the Streamlit application using the Native App Framework.</p>
<h2 id="_idParaDest-119" class="calibre7"><a id="_idTextAnchor120" class="calibre6 pcalibre1 pcalibre"/>Developing with the Native App Framework</h2>
<p class="calibre3">Now that our Streamlit application is <a id="_idIndexMarker434" class="calibre6 pcalibre1 pcalibre"/>operational, let’s explore the process of transforming it into a Native App within the Snowflake ecosystem. In this section, we’ll give a detailed walkthrough on leveraging the Native App Framework to develop applications to share data and associated business logic <a id="_idIndexMarker435" class="calibre6 pcalibre1 pcalibre"/>with other Snowflake accounts. We will primarily demonstrate this using the Snowsight web interface, which can also be created using a client such as VS Code.</p>
<p class="calibre3">The following sequential steps will convert your existing Streamlit app into a native application in Snowflake:</p>
<ol class="calibre13">
<li class="calibre14">Creating the application files</li>
<li class="calibre14">Creating an application package</li>
<li class="calibre14">Uploading application files to the named stage</li>
<li class="calibre14">Installing the application</li>
<li class="calibre14">Versioning the application</li>
<li class="calibre14">Testing the application</li>
</ol>
<p class="calibre3">We will start with the first step, creating the application files.</p>
<h3 class="calibre9">Creating the application files</h3>
<p class="calibre3">Creating the application<a id="_idIndexMarker436" class="calibre6 pcalibre1 pcalibre"/> files involves creating the setup script and the manifest file, which are vital components that the Native <a id="_idIndexMarker437" class="calibre6 pcalibre1 pcalibre"/>App Framework requires.</p>
<h4 class="calibre16">Creating the setup script</h4>
<p class="calibre3">The setup script is an SQL file that executes automatically when consumers install the application in their accounts. It facilitates seamless configuration and setup processes and consists of the initialization instructions<a id="_idIndexMarker438" class="calibre6 pcalibre1 pcalibre"/> required to configure the application. To initiate the creation of the setup script, follow these steps:</p>
<ol class="calibre13">
<li class="calibre14">We’ll start by creating a directory structure on your local filesystem. Create a folder named <strong class="source-inline1">native_apps</strong> to serve as the root directory for your application’s external files.</li>
<li class="calibre14">Within this folder, create a subfolder called <strong class="source-inline1">scripts</strong> to store the script files. This folder will contain all the script files necessary for the application.</li>
<li class="calibre14">Inside the <strong class="source-inline1">scripts</strong> folder, create a <a id="_idIndexMarker439" class="calibre6 pcalibre1 pcalibre"/>new file called <strong class="source-inline1">setup.sql</strong> and add the following statement:<pre class="source-code">
-- Setup script for the Bike Share Streamlit application.
CREATE APPLICATION ROLE app_public;
CREATE OR ALTER VERSIONED SCHEMA code_schema;
GRANT USAGE ON SCHEMA code_schema 
  TO APPLICATION ROLE app_public;
CREATE STREAMLIT code_schema.bike_share_streamlit
  FROM '/streamlit'
  MAIN_FILE = '/streamlit_bike_share_analysis.py';
GRANT USAGE ON STREAMLIT code_schema.bike_share_streamlit
  TO APPLICATION ROLE app_public;</pre></li> </ol>
<p class="calibre3">We will be seeing the detailed<a id="_idIndexMarker440" class="calibre6 pcalibre1 pcalibre"/> explanation of the previous code as we move through this section.</p>
<h4 class="calibre16">Creating the Streamlit app file</h4>
<p class="calibre3">We will incorporate the application logic <a id="_idIndexMarker441" class="calibre6 pcalibre1 pcalibre"/>and the Streamlit app, leveraging its capabilities for data science and machine learning tasks. Utilizing the Streamlit app enhances user interaction and facilitates data visualization. We will start the process by creating the Streamlit app:</p>
<ol class="calibre13">
<li class="calibre14">Create a subfolder named <strong class="source-inline1">streamlit</strong> within the <strong class="source-inline1">native_apps</strong> directory.</li>
<li class="calibre14">Within the folder, create a file called <strong class="source-inline1">streamlit_bike_share_analysis.py</strong>. The code for this is available within the repository inside the <strong class="source-inline1">chapter_7</strong> folder.</li>
<li class="calibre14">Copy and paste the following code into this file and save it:<pre class="source-code">
# Set page config
st.set_page_config(layout="wide")
# Get current session
session = get_active_session()
@st.cache_data()
def load_data():
    # Load Bike Share data
    snow_df = session.table(
        "SNOWPARK_DEFINITIVE_GUIDE.MY_SCHEMA.BSD_TRAIN")</pre></li> </ol>
<pre>streamlit_bike_share_analysis.py</strong> file under the <code>chapter_7</code> folder in the book GitHub repository for the complete code.</pre>
<h4 class="calibre16">Creating the README file</h4>
<p class="calibre3">The README file serves as a descriptive guide outlining your application’s functionality. It is readily accessible when viewing <a id="_idIndexMarker442" class="calibre6 pcalibre1 pcalibre"/>your application within Snowsight. To generate the README file for your application, follow these steps:</p>
<ol class="calibre13">
<li class="calibre14">Navigate to the <strong class="source-inline1">native_apps</strong> directory and create a file called <strong class="source-inline1">readme.md</strong>.</li>
<li class="calibre14">Populate the <strong class="source-inline1">readme.md</strong> file with the following content detailing the purpose and features of your application:<pre class="source-code">
# Bike Sharing Analysis - Through Native Apps.
This native app presents the analysis we performed on the Kaggle dataset - Bike sharing demand as an interactive dashboard</pre></li> </ol>
<p class="calibre3">Now we can create the manifest file in the next section.</p>
<h4 class="calibre16">Creating the manifest file</h4>
<p class="calibre3">The manifest file, which uses YAML syntax, contains <a id="_idIndexMarker443" class="calibre6 pcalibre1 pcalibre"/>essential configuration details about the application. It is a foundational document outlining crucial specifications for proper functionality, and every application developed within the Native App Framework necessitates a corresponding manifest file.</p>
<p class="calibre3">To generate the manifest file, proceed as follows:</p>
<ol class="calibre13">
<li class="calibre14">Within the <strong class="source-inline1">native_apps</strong> folder, create a new file named <strong class="source-inline1">manifest.yml</strong>.</li>
<li class="calibre14">Populate the <strong class="source-inline1">manifest.yml</strong> file with the following content:<pre class="source-code">
manifest_version: 1
artifacts:
  setup_script: scripts/setup.sql
  readme: readme.md</pre></li> </ol>
<p class="calibre3">The <code>setup_script</code> property specifies the location of the setup script relative to the manifest file’s location. Ensure that the path and filename specified correspond precisely to the setup script created earlier.</p>
<p class="callout-heading">Note</p>
<p class="callout">The manifest file is crucial for your project. It must be named <strong class="source-inline1">manifest.yml</strong> and placed at the root level. All file paths, including the setup scripts, are relative to this file’s location. Fundamental properties such as <strong class="source-inline1">manifest_version</strong>, <strong class="source-inline1">artifacts</strong>, and <strong class="source-inline1">setup_script</strong> are mandatory to ensure proper functioning. You can optionally include the <strong class="source-inline1">readme</strong> property to provide additional documentation.</p>
<p class="calibre3">In the next section, we will<a id="_idIndexMarker444" class="calibre6 pcalibre1 pcalibre"/> create an application package for the native apps.</p>
<h3 class="calibre9">Creating an application package</h3>
<p class="calibre3">In this section, you will create an application package, a container for the application’s resources. The application package extends <a id="_idIndexMarker445" class="calibre6 pcalibre1 pcalibre"/>Snowflake’s database to encompass additional application-related information, serving as a consolidated container housing shared data content<a id="_idIndexMarker446" class="calibre6 pcalibre1 pcalibre"/> and applications. To create an application package, your role needs to have the <strong class="bold">Create Application Package</strong> privilege. Execute the following command to grant the privilege:</p>
<pre class="console">
GRANT CREATE APPLICATION PACKAGE ON ACCOUNT
  TO ROLE accountadmin;</pre> <p class="calibre3">Once executed, you should see the following output:</p>
<div><div><img alt="Figure 7.9 – Role creation" src="img/B19923_07_9.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.9 – Role creation</p>
<p class="calibre3">Now, run the following command to create the <code>SNOWFLAKE_NATIVE_APPS_PACKAGE</code> application package:</p>
<pre class="console">
CREATE APPLICATION PACKAGE snowflake_native_apps_package;</pre> <p class="calibre3">You will receive the following output that confirms the package has been created:</p>
<div><div><img alt="Figure 7.10 – Package creation" src="img/B19923_07_10.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.10 – Package creation</p>
<p class="calibre3">The application package will be created, and the <a id="_idIndexMarker447" class="calibre6 pcalibre1 pcalibre"/>current context will be switched to <code>SNOWFLAKE_NATIVE_APPS_PACKAGE</code>. We can confirm the list of packages by running the following command:</p>
<pre class="console">
SHOW APPLICATION PACKAGES;</pre> <p class="calibre3">This will display the following output:</p>
<div><div><img alt="Figure 7.11 – Showing the packages" src="img/B19923_07_11.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.11 – Showing the packages</p>
<p class="calibre3">Now that the application <a id="_idIndexMarker448" class="calibre6 pcalibre1 pcalibre"/>packages are created, the next step is to make the named stage for uploading the application files. Switch to the context of the application package by running the following command:</p>
<pre class="console">
USE APPLICATION PACKAGE snowflake_native_apps_package;</pre> <p class="calibre3">This will display the following output:</p>
<div><div><img alt="Figure 7.12 – Using snowflake_native_apps_package" src="img/B19923_07_12.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.12 – Using snowflake_native_apps_package</p>
<p class="calibre3">We will need a schema to host the stage. Create a schema by running the following command:</p>
<pre class="console">
CREATE SCHEMA my_schema;</pre> <p class="calibre3">Once the schema is created, you’ll see the following message:</p>
<div><div><img alt="Figure 7.13 – Creating a new schema" src="img/B19923_07_13.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.13 – Creating a new schema</p>
<p class="calibre3">The next step is to create the stage in this schema. Create a st<a id="_idTextAnchor121" class="calibre6 pcalibre1 pcalibre"/>age by running the following code:</p>
<pre class="console">
CREATE OR REPLACE STAGE snowflake_native_apps_package.my_schema.my_stage FILE_FORMAT = (TYPE = 'csv' FIELD_DELIMITER = '|' SKIP_HEADER = 1);</pre> <p class="calibre3">With this step, you’ve established <a id="_idIndexMarker449" class="calibre6 pcalibre1 pcalibre"/>a named stage within the application package, providing a designated space to upload the files essential for building your application.</p>
<p class="callout-heading">Note on setup.sql</p>
<p class="callout">The following set of SQL commands are <a id="_idIndexMarker450" class="calibre6 pcalibre1 pcalibre"/>part of <strong class="source-inline1">setup.sql</strong> and are packaged inside the native apps folder in <strong class="source-inline1">chapter_7</strong>. This file will be uploaded to the stage area and will be utilized when we create a Native Apps application, so the code need not be executed in the Snowflake worksheet.</p>
<p class="calibre3">Let us see what the <code>set.sql</code> file encompasses to create a Native Apps application. We will also be creating a role that is required for the application. To create an application role, run the following command:</p>
<pre class="console">
CREATE APPLICATION ROLE app_public;
CREATE OR ALTER VERSIONED SCHEMA code_schema;
GRANT USAGE ON SCHEMA code_schema TO APPLICATION ROLE app_public;</pre> <p class="calibre3">This code initializes an application role named <code>app_public</code>. It then creates or updates a versioned schema named <code>code_schema</code>. Finally, it grants permission for the <code>app_public</code> application role to use the <code>code_schema</code> schema. This setup is commonly used for managing access control and schema organization in database applications.</p>
<p class="calibre3">Run the following code to incorporate the Streamlit app:</p>
<pre class="console">
CREATE STREAMLIT code_schema.bike_share_streamlit
  FROM '/streamlit'
  MAIN_FILE = '/streamlit_bike_share_analysis.py';
GRANT USAGE ON STREAMLIT code_schema.bike_share_streamlit
  TO APPLICATION ROLE app_public;</pre> <p class="calibre3">This code creates a Streamlit app named <code>bike_share_streamlit</code> within the <code>code_schema</code> schema, pulling its content from the <code>/streamlit</code> directory and its main file from <code>/streamlit_bike_share_analysis.py</code>. It then grants usage permission for this Streamlit <a id="_idIndexMarker451" class="calibre6 pcalibre1 pcalibre"/>app to the <code>app_public</code> application role, enabling access for authorized users within the application’s scope. This facilitates integrating a Streamlit-based bike share analysis tool into the database setup, with controlled access managed by the application role.</p>
<h3 class="calibre9">Uploading application files to the named stage</h3>
<p class="calibre3">The application files need to <a id="_idIndexMarker452" class="calibre6 pcalibre1 pcalibre"/>be uploaded to the named stage. They can be uploaded via Snowsight or through Snowpark Python code, as described in <a href="B19923_02.xhtml#_idTextAnchor028" class="calibre6 pcalibre1 pcalibre"><em class="italic">Chapter 2</em></a>, Establishing a Foundation with Snowpark. For readers using the<a id="_idIndexMarker453" class="calibre6 pcalibre1 pcalibre"/> SnowSQL client to upload the files to the stage, perform the following steps:</p>
<ol class="calibre13">
<li class="calibre14">Navigate to the <strong class="source-inline1">native_apps</strong> folder on your local machine.</li>
<li class="calibre14">Run the following SnowSQL commands to upload all folders and files:<pre class="source-code">
<strong class="bold1">PUT file:///&lt;path_to_your_root_folder&gt;/native_apps/manifest.yml @snowflake_native_apps_package.my_schema.my_stage overwrite=true auto_compress=false;</strong>
<strong class="bold1">PUT file:///&lt;path_to_your_root_folder&gt;/native_apps/scripts/setup.sql @snowflake_native_apps_package.my_schema.my_stage/scripts overwrite=true auto_compress=false;</strong>
<strong class="bold1">PUT file:///&lt;path_to_your_root_folder&gt;/native_apps/streamlit/streamlit_bike_share_analysis.py @snowflake_native_apps_package.my_schema.my_stage/streamlit overwrite=true auto_compress=false;</strong>
<strong class="bold1">PUT file:///&lt;path_to_your_root_folder&gt;/native_apps/readme.md @snowflake_native_apps_package.my_schema.my_st<a id="_idTextAnchor122" class="pcalibre1 pcalibre calibre17"/>age overwrite=true auto_compress=false;</strong></pre></li> <li class="calibre14">Run the following command<a id="_idIndexMarker454" class="calibre6 pcalibre1 pcalibre"/> in the worksheet to verify<a id="_idTextAnchor123" class="calibre6 pcalibre1 pcalibre"/> whether the file upload was successful:<pre class="source-code">
<strong class="bold1">List @snowflake_native_apps_package.my_schema.my_stage;</strong></pre><p class="calibre3">After running the command, the uploaded files are displayed in the output:</p></li> </ol>
<div><div><img alt="Figure 7.14 – Checking the application files via SnowSQL" src="img/B19923_07_14.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.14 – Checking the application files via SnowSQL</p>
<p class="calibre3">We can also check the application <a id="_idIndexMarker455" class="calibre6 pcalibre1 pcalibre"/>files in Snowsight:</p>
<div><div><img alt="Figure 7.15 – Checking the application files via Snowsight" src="img/B19923_07_15.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.15 – Checking the application files via Snowsight</p>
<p class="calibre3">Now that we have uploaded the<a id="_idIndexMarker456" class="calibre6 pcalibre1 pcalibre"/> files to the stage, we will install the application package to Snowflake.</p>
<h3 class="calibre9">Installing the application</h3>
<p class="calibre3">Execute the following <a id="_idIndexMarker457" class="calibre6 pcalibre1 pcalibre"/>command to install the application:</p>
<pre class="console">
CREATE APPLICATION bike_share_native_app 
  FROM APPLICATION PACKAGE snowflake_native_apps_package 
  USING '@snowflake_native_apps_package.my_schema.my_stage';</pre> <p class="calibre3">This automatically creates a new and current version of the application inside Snowflake. The native apps also provide the ability to version the application and update the version, which we will cover in the following section.</p>
<div><div><img alt="Figure 7.16 – Application installed" src="img/B19923_07_16.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.16 – Application installed</p>
<p class="calibre3">Now that the application is installed, let’s update the version of the application.</p>
<h3 class="calibre9">Versioning the application</h3>
<p class="calibre3">In this section, we will update the application’s version and install it on Snowflake. We will utilize the <code>ALTER APPLICATION PACKAGE</code> command to update the previously created application. To update a<a id="_idIndexMarker458" class="calibre6 pcalibre1 pcalibre"/> new version, follow these steps:</p>
<ol class="calibre13">
<li class="calibre14">Run the following command to append a version to <strong class="source-inline1">SNOWFLAKE_NATIVE_APPS_PACKAGE</strong>:<pre class="source-code">
<strong class="bold1">ALTER APPLICATION PACKAGE snowflake_native_apps_package </strong>
  <strong class="bold1">ADD VERSION v1_0 </strong>
  <strong class="bold1">USING '@ snowflake_native_apps_package.my_schema.my_stage';</strong></pre><p class="calibre3">This will display the following output:</p>
<div><div><img alt="Figure 7.17 – Modifying the application version" src="img/B19923_07_17.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.17 – Modifying the application version</p>
<p class="calibre3">This command modifies the application package by incorporating a version derived from the application files uploaded to the named stage in an earlier section.</p></li> </ol>
<ol class="calibre13">
<li value="2" class="calibre14">Next, confirm the successful update of the version by executing the following command:<pre class="source-code">
<strong class="bold1">SHOW VERSIONS IN APPLICATION PACKAGE snowflake_native_apps_package;</strong></pre><p class="calibre3">This will display the updated version as the output:</p>
<div><div><img alt="Figure 7.18 – The updated version of the application" src="img/B19923_07_18.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.18 – The updated version of the application</p>
<p class="calibre3">This command provides additional insights into the version, including creation timestamp and review status.</p></li> </ol>
<ol class="calibre13">
<li value="3" class="calibre14">Before you install the new version, drop the existing application by running the following command:<pre class="source-code">
<strong class="bold1">DROP APPLICATION bike_share_native_app;</strong></pre><p class="calibre3">You should see the following confirmation message:</p>
<div><div><img alt="Figure 7.19 – Application deleted" src="img/B19923_07_19.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.19 – Application deleted</p>
<p class="calibre3">Now that the existing<a id="_idIndexMarker459" class="calibre6 pcalibre1 pcalibre"/> application has been dropped, we can install the new application.</p></li> </ol>
<ol class="calibre13">
<li value="4" class="calibre14">Finally, to install the new version of the application, run the following code:<pre class="source-code">
<strong class="bold1">CREATE APPLICATION bike_share_native_app </strong>
  <strong class="bold1">FROM APPLICATION PACKAGE snowflake_native_apps_package </strong>
  <strong class="bold1">USING VERSION V1_0;</strong></pre>
<p class="calibre3">This creates a new application based on the specified version, ensuring your application incorporates all the latest enhancements and features.</p></li> </ol>
<p class="callout-heading">Note</p>
<p class="callout">The value provided for <strong class="source-inline1">VERSION</strong> serves as a label rather than a numerical or string value. It’s important to note that the patch number is automatically set to <strong class="source-inline1">0</strong> when adding a new version. Subsequent patches added to the version will be automatically incremented. However, when introducing a new version, such as <strong class="source-inline1">V1_1</strong>, the patch number for that specific version is reset to <strong class="source-inline1">0</strong>.</p>
<p class="calibre3">We have successfully deployed the new application version. In the next section, we will run the application to test it within<a id="_idIndexMarker460" class="calibre6 pcalibre1 pcalibre"/> the Snowflake environment.</p>
<h3 class="calibre9">Testing the application</h3>
<p class="calibre3">In this section, we will run our native application in Snowpark to perform the testing. While previous sections primarily utilized SQL statements for testing and information retrieval, Snowsight offers an<a id="_idIndexMarker461" class="calibre6 pcalibre1 pcalibre"/> alternative interface for interacting with and inspecting your application. Moreover, you can examine the Streamlit application you have deployed. To access and explore your application in Snowsight, follow these steps:</p>
<ol class="calibre13">
<li class="calibre14">In Snowsight, switch to the <strong class="bold">ACCOUNTADMIN</strong> role that grants you the necessary privileges to effectively view and manage applications within Snowsight:</li>
</ol>
<div><div><img alt="Figure 7.20 – Switching to the ACCOUNTADMIN role" src="img/B19923_07_20.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.20 – Switching to the ACCOUNTADMIN role</p>
<ol class="calibre13">
<li value="2" class="calibre14">Within Snowsight’s intuitive navigation menu, locate and select the <strong class="bold">Data Products</strong> option, followed by <strong class="bold">Apps</strong>. This action directs you to a repository of installed applications within your Snowflake environment:</li>
</ol>
<div><div><img alt="Figure 7.21 – The native applications repository" src="img/B19923_07_21.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.21 – The native applications repository</p>
<ol class="calibre13">
<li value="3" class="calibre14">Locate your application within the <strong class="bold">Installed Apps</strong> list and select <strong class="source-inline1">BIKE_SHARE_NATIVE_APP</strong>. This action offers a comprehensive view of your application, allowing you to delve into<a id="_idIndexMarker462" class="calibre6 pcalibre1 pcalibre"/> its various components and functionalities. The <strong class="bold">Readme</strong> tab provides access to the content you previously added to the README file, offering insights into the purpose and features of your application:</li>
</ol>
<div><div><img alt="Figure 7.22 – Native application README file" src="img/B19923_07_22.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.22 – Native application README file</p>
<ol class="calibre13">
<li value="4" class="calibre14">Locate and select <strong class="source-inline1">BIKE_SHARE_STREAMLIT</strong> to access your deployed Streamlit application. Upon selection, the content of the <strong class="source-inline1">SNOWFLAKE_NATIVE_APPS_PACKAGE</strong> database is showcased within a Streamlit DataFrame, facilitating dynamic interaction and visualization of your data:</li>
</ol>
<div><div><img alt="Figure 7.23 – The native application" src="img/B19923_07_23_V.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.23 – The native application</p>
<p class="callout-heading">Note on step 4</p>
<p class="callout">Before executing step 4, make sure all the commands under the <em class="italic">CREATE VIEW ON BSD TRAIN TABLE</em> section in <strong class="source-inline1">chapter_7.sql</strong> are executed. This is necessary to access the <strong class="source-inline1">BSD_TRAIN</strong> table residing in the <strong class="source-inline1">SNOWPARK_DEFINITIVE_GUIDE</strong> database.</p>
<p class="calibre3">The Streamlit application runs <a id="_idIndexMarker463" class="calibre6 pcalibre1 pcalibre"/>successfully within the Snowflake environment, highlighting data representation and interaction features.</p>
<p class="calibre3">In the next section, we will look at how to publish the native application.</p>
<h1 id="_idParaDest-120" class="calibre5"><a id="_idTextAnchor124" class="calibre6 pcalibre1 pcalibre"/>Publishing the native application</h1>
<p class="calibre3">In this section, we will examine publishing the application by crafting a private listing, utilizing the application package as its core data content. This process enables seamless sharing <a id="_idIndexMarker464" class="calibre6 pcalibre1 pcalibre"/>of your application with other Snowflake users, empowering them to install and use it within their accounts. We will start by setting the release directive.</p>
<h2 id="_idParaDest-121" class="calibre7"><a id="_idTextAnchor125" class="calibre6 pcalibre1 pcalibre"/>Setting the default release directive</h2>
<p class="calibre3">Before proceeding with the listing <a id="_idIndexMarker465" class="calibre6 pcalibre1 pcalibre"/>creation, it’s essential to establish a default release directive specifying which version of your application is accessible to consumers. To designate version <code>v1_0</code> and patch <code>0</code> as the default release directive, execute the following command:</p>
<pre class="console">
SHOW VERSIONS IN APPLICATION PACKAGE snowflake_native_apps_package;</pre> <p class="calibre3">This will display the following output:</p>
<div><div><img alt="Figure 7.24 – Checking the application version" src="img/B19923_07_24.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.24 – Checking the application version</p>
<p class="calibre3">The output confirms the successful establishment of the default release directive, ensuring clarity and consistency<a id="_idIndexMarker466" class="calibre6 pcalibre1 pcalibre"/> in version management.</p>
<p class="calibre3">In the next section, we will create the listing for the application.</p>
<h2 id="_idParaDest-122" class="calibre7"><a id="_idTextAnchor126" class="calibre6 pcalibre1 pcalibre"/>Creating a listing for your application</h2>
<p class="calibre3">With the default release directive in place, we<a id="_idIndexMarker467" class="calibre6 pcalibre1 pcalibre"/> will create a listing for your application, incorporating the application package as its shared data content. Follow these steps to create a listing:</p>
<ol class="calibre13">
<li class="calibre14">Open <strong class="bold">Provider Studio</strong> by navigating to <strong class="bold">Data Products</strong> | <strong class="bold">Provider Studio</strong> to access the listing creation interface:</li>
</ol>
<div><div><img alt="Figure 7.25 – Provider Studio" src="img/B19923_07_25.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.25 – Provider Studio</p>
<ol class="calibre13">
<li value="2" class="calibre14">Next, initiate the listing creation by selecting <strong class="bold">+ Listing</strong> to open the <strong class="bold">Create Listing</strong> window, prompting<a id="_idIndexMarker468" class="calibre6 pcalibre1 pcalibre"/> you to specify the listing’s name and other essential details:</li>
</ol>
<div><div><img alt="Figure 7.26 – The Create Listing dialog box" src="img/B19923_07_26.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.26 – The Create Listing dialog box</p>
<ol class="calibre13">
<li value="3" class="calibre14">Enter a descriptive name for your listing and choose the <strong class="bold">Only Specified Consumers</strong> visibility option to ensure private sharing with specific accounts only. Select the application package associated with the listing, effectively linking it as the core data content. Provide a comprehensive description of your listing to inform potential users about its functionality and purpose:</li>
</ol>
<div><div><img alt="Figure 7.27 – Creating a listing description" src="img/B19923_07_27.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.27 – Creating a listing description</p>
<ol class="calibre13">
<li value="4" class="calibre14">Add the consumer account by <a id="_idIndexMarker469" class="calibre6 pcalibre1 pcalibre"/>including the account identifier for the account you’re utilizing to test the consumer experience of installing the application from the listing:</li>
</ol>
<div><div><img alt="Figure 7.28 – Adding the Consumer account" src="img/B19923_07_28.0.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.28 – Adding the Consumer account</p>
<p class="calibre3">Now you have successfully curated a private listing containing your application package as the shared data content, facilitating streamlined dissemination and installation of your application among <a id="_idIndexMarker470" class="calibre6 pcalibre1 pcalibre"/>designated users.</p>
<p class="calibre3">The following section will discuss how to manage the native application.</p>
<h1 id="_idParaDest-123" class="calibre5"><a id="_idTextAnchor127" class="calibre6 pcalibre1 pcalibre"/>Managing the native application</h1>
<p class="calibre3">Configuring and managing installed applications created with the Native App Framework involves various tasks, including viewing installed applications, accessing README information, granting application roles to account roles, and uninstalling applications. Let’s delve into each aspect in more detail.</p>
<h2 id="_idParaDest-124" class="calibre7"><a id="_idTextAnchor128" class="calibre6 pcalibre1 pcalibre"/>Viewing installed applications</h2>
<p class="calibre3">To access and view installed applications <a id="_idIndexMarker471" class="calibre6 pcalibre1 pcalibre"/>or Streamlit apps associated with your account, follow the following steps:</p>
<ol class="calibre13">
<li class="calibre14">From the navigation menu, select <strong class="bold">Data Products</strong> and <strong class="bold">Apps</strong> to access the list of installed applications:</li>
</ol>
<div><div><img alt="Figure 7.29 – The list of installed applications" src="img/B19923_07_29.0.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.29 – The list of installed applications</p>
<ol class="calibre13">
<li value="2" class="calibre14">Review the list of installed applications, then select the desired application. If you choose an application, the app interface will be displayed:</li>
</ol>
<div><div><img alt="Figure 7.30 – The Streamlit application" src="img/B19923_07_30.0.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.30 – The Streamlit application</p>
<p class="calibre3">Next, we will cover how to view <a id="_idIndexMarker472" class="calibre6 pcalibre1 pcalibre"/>README for the application.</p>
<h2 id="_idParaDest-125" class="calibre7"><a id="_idTextAnchor129" class="calibre6 pcalibre1 pcalibre"/>Viewing README for applications</h2>
<p class="calibre3">The README provides a meaningful <a id="_idIndexMarker473" class="calibre6 pcalibre1 pcalibre"/>description and other details related to the application. Select the application from the list to access the README, then click on the <strong class="bold">Readme</strong> icon in the toolbar to view the README associated with the application:</p>
<div><div><img alt="Figure 7.31 – The Streamlit README information" src="img/B19923_07_31.0.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.31 – The Streamlit README information</p>
<p class="calibre3">Next, we will cover managing access to the application by granting it to roles.</p>
<h2 id="_idParaDest-126" class="calibre7"><a id="_idTextAnchor130" class="calibre6 pcalibre1 pcalibre"/>Managing access to the application</h2>
<p class="calibre3">To grant an application role access, select the application and select <strong class="bold">Manage Access</strong>. Click on <strong class="bold">Add roles</strong>, then select the account role to which you want to grant access to an<a id="_idIndexMarker474" class="calibre6 pcalibre1 pcalibre"/> application role. Click <strong class="bold">Done</strong> to confirm:</p>
<div><div><img alt="Figure 7.32 – Application access" src="img/B19923_07_32.0.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.32 – Application access</p>
<p class="calibre3">Alternatively, you can grant application roles to account roles in the consumer account by running the following command:</p>
<pre class="console">
GRANT APPLICATION ROLE bike_share_native_app.app_public
  TO ROLE &lt;ACCOUNT ROLE&gt;;</pre> <p class="calibre3">In the final section, we will learn how to uninstall an installed application.</p>
<h2 id="_idParaDest-127" class="calibre7"><a id="_idTextAnchor131" class="calibre6 pcalibre1 pcalibre"/>Removing an installed application</h2>
<p class="calibre3">The application can be removed <a id="_idIndexMarker475" class="calibre6 pcalibre1 pcalibre"/>using the Snowsight UI or the command line. To remove the application using Snowsight, click on the ellipsis (<strong class="bold">...</strong>) next to the application and choose <strong class="bold">Uninstall</strong>. Confirm the action by selecting <strong class="bold">Uninstall</strong>:</p>
<div><div><img alt="Figure 7.33 – Uninstalling an application" src="img/B19923_07_33.0.jpg" class="calibre4"/>
</div>
</div>
<p class="img---caption" lang="en-US" xml:lang="en-US">Figure 7.33 – Uninstalling an application</p>
<p class="calibre3">We can also uninstall it via command by executing the following in the worksheet:</p>
<pre class="console">
DROP APPLICATION BIKE_SHARE_NATIVE_APP;</pre> <p class="calibre3">This concludes the management of native applications. Snowflake provides an easy way to do this. We will <a id="_idIndexMarker476" class="calibre6 pcalibre1 pcalibre"/>conclude this chapter with a summary.</p>
<h1 id="_idParaDest-128" class="calibre5"><a id="_idTextAnchor132" class="calibre6 pcalibre1 pcalibre"/>Summary</h1>
<p class="calibre3">In this chapter, we explored Native Apps within the Snowflake ecosystem, uncovering their dynamic landscape and intrinsic value. The chapter commenced with an insightful introduction to Native Apps in Snowflake, where we delved into their foundational aspects, including robust security features and their significance in the broader native apps landscape. We explored Streamlit in Snowflake, a powerful tool for developing immersive data science and machine learning applications. We provided a comprehensive overview of Streamlit, highlighting its intuitive nature and seamless integration with Snowflake. We navigated through the process of deploying the first Streamlit application within Snowflake, empowering readers to harness this powerful combination for data-driven insights.</p>
<p class="calibre3">Overall, this chapter provided a comprehensive overview of Native Apps in Snowflake, empowering you with the knowledge and tools needed to harness the full potential of this innovative technology within your data workflows. In the next chapter, we will discuss Snowpark Container Services.</p>
</div>
</body></html>