<html><head></head><body>
  <div id="sbo-rt-content"><div class="chapter" title="Chapter 10. Listing and Describing GIS Data"><div class="titlepage"><div><div><h1 class="title"><a id="ch10"/>Chapter 10. Listing and Describing GIS Data</h1></div></div></div><p>In this chapter, we will cover the following recipes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Getting a list of feature classes in a workspace</li><li class="listitem" style="list-style-type: disc">Restricting the list of objects returned with a wildcard</li><li class="listitem" style="list-style-type: disc">Restricting the list of objects returned with a feature type</li><li class="listitem" style="list-style-type: disc">Getting a list of fields in a feature class or table</li><li class="listitem" style="list-style-type: disc">Using the Describe() function to return descriptive information about a feature class</li><li class="listitem" style="list-style-type: disc">Using the Describe() function to return descriptive information about an image</li><li class="listitem" style="list-style-type: disc">Returning workspace information with the Describe() function</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec70"/>Introduction</h1></div></div></div><p>Python provides you the ability to batch process data through scripting. This helps you to automate workflows and increases the efficiency of your data processing. For example, you may need to iterate through all the datasets on a disk and perform a specific action on each dataset. Your first step is often to perform an initial gathering of data before proceeding to the main body of the geoprocessing task. This initial data gathering is often accomplished through the use of one or more <span class="strong"><strong>List</strong></span> methods found in ArcPy. These lists are returned as true Python list objects. These list objects can then be iterated over for further processing. ArcPy provides a number of functions that can be used to generate lists of data. These methods work on many different types of GIS data. In this chapter, we will examine the many functions provided by ArcPy for creating lists of data. In <a class="link" href="ch03.html" title="Chapter 3. Managing Map Documents and Layers">Chapter 3</a>, <span class="emphasis"><em>Managing Map Documents and Layers</em></span>, we also covered a number of list functions. However, these functions were related to working with the <code class="literal">arcpy.mapping</code> module, and specifically for working with map documents and layers. The list functions we cover in this chapter reside directly in <code class="literal">arcpy</code> and are more generic in nature.</p><p>We will also cover the <code class="literal">Describe()</code> function for returning a dynamic object that will contain property groups. These dynamically generated <code class="literal">Describe</code> objects will contain property groups that are dependent upon the type of data that has been described. For instance, when the <code class="literal">Describe()</code> function is run against a feature class, the properties specific to a feature class will be returned. In addition, all data, regardless of the datatype, acquires a set of generic properties that we'll discuss. </p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Getting a list of feature classes in a workspace"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec71"/>Getting a list of feature classes in a workspace</h1></div></div></div><p>As with all the list<a id="id704" class="indexterm"/>
<a id="id705" class="indexterm"/> functions that we'll examine in this chapter, getting a list of feature classes in a workspace is often the first step in a multi-step process that your script will execute. For example, you might want to add a new field to all the feature classes in a file geodatabase. To do this, you'd first need to get a list of all the feature classes in the workspace.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec178"/>Getting ready</h2></div></div></div><p>ArcPy provides functions for getting lists of fields, indexes, datasets, feature classes, files, rasters, tables, and more. The <code class="literal">ListFeatureClasses()</code> function<a id="id706" class="indexterm"/> can be used to generate a list of all feature classes in a workspace. <code class="literal">ListFeatureClasses()</code> has three optional arguments that can be passed into the function and which will serve to limit the returned list. The first optional argument is a <span class="strong"><strong>wildcard</strong></span>
<a id="id707" class="indexterm"/> that can be used to limit the feature classes returned based on name. The second optional argument can be used to limit the feature classes returned based on the datatype (point, line, polygon, and so on). The third optional parameter limits the returned feature classes by a feature dataset. In this recipe, we will return all feature classes from a workspace.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec179"/>How to do it…</h2></div></div></div><p>Follow these steps to learn how to use the <code class="literal">ListFeatureClasses()</code> function to retrieve a list of the feature classes in a workspace:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open IDLE and create a new script window.</li><li class="listitem">Save the script as <code class="literal">c:\ArcpyBook\Ch10\ListFeatureClasses.py</code>.</li><li class="listitem">Import the <code class="literal">arcpy</code> module:<div class="informalexample"><pre class="programlisting">import arcpy</pre></div></li><li class="listitem">Set the workspace:<div class="informalexample"><pre class="programlisting">arcpy.env.workspace = "C:/ArcpyBook/data/CityOfSanAntonio.gdb"</pre></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note14"/>Note</h3><p>You must always remember to set the workspace using the environment settings before calling any list function. Otherwise, the list function will not know which dataset the list should be pulled from. </p></div></div></li><li class="listitem">Call <a id="id708" class="indexterm"/><a id="id709" class="indexterm"/>the <code class="literal">ListFeatureClasses()</code> function<a id="id710" class="indexterm"/> and assign the results to a variable called <code class="literal">fcList</code>:<div class="informalexample"><pre class="programlisting">fcList = arcpy.ListFeatureClasses()</pre></div></li><li class="listitem">Loop through each of the feature classes in <code class="literal">fcList</code> and print them to the screen:<div class="informalexample"><pre class="programlisting">for fc in fcList:
  print fc</pre></div></li><li class="listitem">Save and run the script. You should see the following output:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>Crimes2009</strong></span>
<span class="strong"><strong>CityBoundaries</strong></span>
<span class="strong"><strong>CrimesBySchoolDistrict</strong></span>
<span class="strong"><strong>SchoolDistricts</strong></span>
<span class="strong"><strong>BexarCountyBoundaries</strong></span>
<span class="strong"><strong>Texas_Counties_LowRes</strong></span>
<span class="strong"><strong>Burglary</strong></span>
</pre></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec180"/>How it works…</h2></div></div></div><p>Before calling any list function, you need to set the workspace environment setting, which sets the current workspace from which you will generate the list. The <code class="literal">ListFeatureClasses()</code> function can accept three optional parameters that will limit the feature classes that are returned. Most of the other list functions work in the same way. However, in this case, we've called the <code class="literal">ListFeatureClasses()</code> function without passing in any parameters. What this will do is return all the feature classes in the current workspace within a Python list object, which will then be iterated with a <code class="literal">for</code> loop. Each feature class returned in the list is represented as a string containing the name of the feature class. </p></div><div class="section" title="There's more…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec181"/>There's more…</h2></div></div></div><p>Instead of returning a list of feature classes in a workspace, you may need to get a list of tables. The <code class="literal">ListTables()</code> function<a id="id711" class="indexterm"/> returns a list of standalone tables in a workspace. This list can be filtered by name or table type. Table types can include <code class="literal">dBase</code>, <code class="literal">INFO</code>, and <code class="literal">ALL</code>. All the values in the list are of the <code class="literal">string</code> datatype and contain the table names. </p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Restricting the list of feature classes returned with a wildcard"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec72"/>Restricting the list of feature classes returned with a wildcard</h1></div></div></div><p>By default, the <a id="id712" class="indexterm"/> <code class="literal">ListFeatureClasses()</code> function<a id="id713" class="indexterm"/> will return all of the feature classes in a workspace. You will often want to restrict this list in some way. Three optional parameters can be passed into <code class="literal">ListFeatureClasses()</code> to restrict the feature classes returned. All are optional. The first parameter is a wildcard used to restrict the returned list based on some combination of characters. Other parameters that can be used to restrict the list to include a datatype and a feature dataset.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec182"/>Getting ready</h2></div></div></div><p>The list of feature classes returned by the <code class="literal">ListFeatureClasses()</code> function can be restricted through the use of a wildcard passed in as the first parameter. The wildcard is used to restrict the contents of your list based on a name. For example, you may want to return only a list of feature classes that start with the letter <code class="literal">B</code>. To accomplish this, you use a combination of an asterisk with any number of characters. The following code example shows the use of a wildcard to restrict the contents of a list:</p><div class="informalexample"><pre class="programlisting">fcs = arcpy.ListFeatureClasses("B*")</pre></div><p>In this recipe, you will learn how to restrict the list of feature classes returned through the use of a wildcard.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec183"/>How to do it…</h2></div></div></div><p>Follow these steps to learn how to restrict the list of feature classes returned by the <code class="literal">ListFeatureClasses()</code> function through the use of a wildcard that is passed in as the first parameter:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open IDLE and the <code class="literal">c:\ArcpyBook\Ch10\ListFeatureClasses.py</code> script.</li><li class="listitem">Add a wildcard that restricts the list of feature classes returned to only those feature classes that start with the letter <code class="literal">C</code>:<div class="informalexample"><pre class="programlisting">fcs = arcpy.ListFeatureClasses("C*")</pre></div></li><li class="listitem">Save and run the script to see the following output:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>Crimes2009</strong></span>
<span class="strong"><strong>CityBoundaries</strong></span>
<span class="strong"><strong>CrimesBySchoolDistrict</strong></span>
</pre></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec184"/>How it works…</h2></div></div></div><p>The <code class="literal">ListFeatureClasses()</code> function<a id="id714" class="indexterm"/> can accept three optional parameters including a wildcard that will restrict the list of feature classes by a name. In this case, we used the wildcard character (<code class="literal">*</code>) to restrict the list of feature classes returned to only those that begin with the letter <code class="literal">C</code>.</p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Restricting the list of feature classes returned with a feature type."><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec73"/>Restricting the list of feature classes returned with a feature type.</h1></div></div></div><p>In addition to <a id="id715" class="indexterm"/>using a wildcard to restrict the feature classes returned by <code class="literal">ListFeatureClasses()</code>, you can also filter by feature type. </p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec185"/>Getting ready</h2></div></div></div><p>In addition to using a wildcard to restrict the list returned by the <code class="literal">ListFeatureClasses()</code> function, a type restriction can also be applied in conjunction with the wildcard or by itself. For example, the following code sample shows the two being used together to restrict the list returned to only <code class="literal">polygon</code> feature classes beginning with the letter <code class="literal">B</code>. In this recipe, you will restrict the feature classes returned through the use of a feature type parameter along with a wildcard:</p><div class="informalexample"><pre class="programlisting">fcs = arcpy.ListFeatureClasses("B*", "Polygon")</pre></div></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec186"/>How to do it…</h2></div></div></div><p>Follow these steps to learn how to restrict the list of feature classes returned by the <code class="literal">ListFeatureClasses()</code> function by feature type:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open IDLE and the <code class="literal">c:\ArcpyBook\Ch10\ListFeatureClasses.py</code> script.</li><li class="listitem">Add a second parameter to the <code class="literal">ListFeatureClasses()</code> function that restricts the feature classes returned to only those that start with the letter <code class="literal">C</code> and are of type <code class="literal">polygon</code>:<div class="informalexample"><pre class="programlisting">fcs = arcpy.ListFeatureClasses("C*","Polygon")</pre></div></li><li class="listitem">Save and run the script to see the following output:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>CityBoundaries</strong></span>
<span class="strong"><strong>CrimesBySchoolDistrict</strong></span>
</pre></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec187"/>How it works…</h2></div></div></div><p>The second, <a id="id716" class="indexterm"/>optional parameter that can be passed into the <code class="literal">ListFeatureClasses()</code> function can be used to limit the results by feature type. In this recipe, we have limited the feature classes to only polygon features. Other valid feature types include point and polyline, region. </p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec188"/>There's more...</h2></div></div></div><p>The third, optional parameter that can be passed into the <code class="literal">ListFeatureClasses()</code> function is a feature dataset name. This will filter the list to return only the featured classes within a particular feature dataset. When this optional parameter is not included in the call to <code class="literal">ListFeatureClasses()</code>, only standalone feature classes from the current workspace will be returned. </p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Getting a list of fields in a feature class or table"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec74"/>Getting a list of fields in a feature class or table</h1></div></div></div><p>Feature classes <a id="id717" class="indexterm"/>
<a id="id718" class="indexterm"/>
<a id="id719" class="indexterm"/>
<a id="id720" class="indexterm"/>and tables contain one or more columns of attribute information. You can get a list of the fields in a feature class through the <code class="literal">ListFields()</code> function.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec189"/>Getting ready</h2></div></div></div><p>The <code class="literal">ListFields()</code> function<a id="id721" class="indexterm"/> returns a list containing individual <code class="literal">Field</code> objects for each field in a feature class or table. Some functions, such as <code class="literal">ListFields()</code> and <code class="literal">ListIndexes()</code>, require an input dataset to operate on. You can use a wildcard or<a id="id722" class="indexterm"/> field type to constrain the list that is returned. Each <code class="literal">Field</code> object contains various read-only properties, including <code class="literal">Name</code>, <code class="literal">AliasName</code>, <code class="literal">Type</code>, <code class="literal">Length</code>, and so on.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec190"/>How to do it…</h2></div></div></div><p>Follow <a id="id723" class="indexterm"/>
<a id="id724" class="indexterm"/>
<a id="id725" class="indexterm"/>
<a id="id726" class="indexterm"/>these steps to learn how to return a list of fields in a feature class:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open IDLE and create a new script window.</li><li class="listitem">Save the script as <code class="literal">c:\ArcpyBook\Ch10\ListOfFields.py</code>.</li><li class="listitem">Import the <code class="literal">arcpy</code> module.<div class="informalexample"><pre class="programlisting">import arcpy</pre></div></li><li class="listitem">Set the workspace:<div class="informalexample"><pre class="programlisting">arcpy.env.workspace = "C:/ArcpyBook/data/CityOfSanAntonio.gdb"</pre></div></li><li class="listitem">Call the <code class="literal">ListFields()</code> method on the <code class="literal">Burglary</code> feature class inside a <code class="literal">try</code> block:<div class="informalexample"><pre class="programlisting">try:
  fieldList = arcpy.ListFields("Burglary")</pre></div></li><li class="listitem">Loop through each of the fields in the list of fields and print the name, type, and length. Make sure you indent as needed:<div class="informalexample"><pre class="programlisting">  for fld in fieldList:
    print "%s is a type of %s with a length of %i" % (fld.name, fld.type, fld.length)</pre></div></li><li class="listitem">Add the <code class="literal">except</code> block:<div class="informalexample"><pre class="programlisting">except Exception e:
  print e.message();</pre></div></li><li class="listitem">The entire script should appear as follows:<div class="informalexample"><pre class="programlisting">import arcpy

arcpy.env.workspace = "C:/ArcpyBook/data/CityOfSanAntonio.gdb"
try:
 fieldList = arcpy.ListFields("Burglary")
  for fld in fieldList:
    print "%s is a type of %s with a length of %i" % (fld.name, fld.type, fld.length)
except Exception e:
  print e.message()</pre></div></li><li class="listitem">Save and run the script. You should see the following output:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>OBJECTID is a type of OID with a length of 4</strong></span>
<span class="strong"><strong>Shape is a type of Geometry with a length of 0</strong></span>
<span class="strong"><strong>CASE is a type of String with a length of 11</strong></span>
<span class="strong"><strong>LOCATION is a type of String with a length of 40</strong></span>
<span class="strong"><strong>DIST is a type of String with a length of 6</strong></span>
<span class="strong"><strong>SVCAREA is a type of String with a length of 7</strong></span>
<span class="strong"><strong>SPLITDT is a type of Date with a length of 8</strong></span>
<span class="strong"><strong>SPLITTM is a type of Date with a length of 8</strong></span>
<span class="strong"><strong>HR is a type of String with a length of 3</strong></span>
<span class="strong"><strong>DOW is a type of String with a length of 3</strong></span>
<span class="strong"><strong>SHIFT is a type of String with a length of 1</strong></span>
<span class="strong"><strong>OFFCODE is a type of String with a length of 10</strong></span>
<span class="strong"><strong>OFFDESC is a type of String with a length of 50</strong></span>
<span class="strong"><strong>ARCCODE is a type of String with a length of 10</strong></span>
<span class="strong"><strong>ARCCODE2 is a type of String with a length of 10</strong></span>
<span class="strong"><strong>ARCTYPE is a type of String with a length of 10</strong></span>
<span class="strong"><strong>XNAD83 is a type of Double with a length of 8</strong></span>
<span class="strong"><strong>YNAD83 is a type of Double with a length of 8</strong></span>
</pre></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec191"/>How it works…</h2></div></div></div><p>The <code class="literal">ListFields()</code> function <a id="id727" class="indexterm"/>
<a id="id728" class="indexterm"/>
<a id="id729" class="indexterm"/>
<a id="id730" class="indexterm"/>returns a list of fields from a feature class or a table. This function accepts one required <a id="id731" class="indexterm"/>parameter, which is a reference to the feature class or table the function should be executed against. You can limit the fields returned by using a wild card or a field type. In this recipe, we only specified a feature class, which indicates that all fields will be returned. For each field returned, we printed the name, field type, and field length. As I mentioned earlier when discussing the <a id="id732" class="indexterm"/> <code class="literal">ListFeatureClasses()</code> function, <code class="literal">ListFields()</code> and all the other list functions are often called as the first step in a multi-step process within a script. For example, you might want to update the population statistics contained within a population field for a census tracts feature class. To do this, you could get a list of all the fields within a feature class, loop through this list looking for a specific field name that contains the population information, and then update the population information for each row. Alternatively, the <code class="literal">ListFields()</code> function accepts a wildcard as one of its parameters. So, if you know the name of the population field ahead of time, pass this in as the wildcard and only a single field will be returned. </p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Using the Describe() function to return descriptive information about a feature class"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec75"/>Using the Describe() function to return descriptive information about a feature class</h1></div></div></div><p>All datasets contain<a id="id733" class="indexterm"/>
<a id="id734" class="indexterm"/> information that is descriptive in nature. For example, a feature class has a name, shape type, spatial reference, and so on. This information can be valuable to your scripts when you seek specific information before continuing with further processing in the script. For example, you might want to perform a buffer only on polyline feature classes instead of points or polygons. Using the <code class="literal">Describe()</code> function you can obtain basic descriptive information about any dataset. You can think of this information as metadata.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec192"/>Getting ready</h2></div></div></div><p>The <code class="literal">Describe()</code> function provides you with the ability to get basic information about datasets. These datasets could include feature classes, tables, ArcInfo coverage, layer files, workspaces, rasters, and others. A <code class="literal">Describe</code> object is returned, which contains specific properties based on the datatype being described. Properties on the <code class="literal">Describe</code> object are organized into property groups, and all datasets fall into at least one property group. For example, performing a <code class="literal">Describe()</code> against a geodatabase would return the <span class="strong"><strong>GDB</strong></span> <code class="literal">FeatureClass</code>, <code class="literal">Table</code>, and <code class="literal">Dataset</code> property groups. Each of these property groups contains specific properties that can be examined. </p><p>The <code class="literal">Describe()</code> function accepts a string parameter, which is a pointer to a data source. In the following code example, we pass in a feature class contained within a file geodatabase. The function returns a <code class="literal">Describe</code> object that contains a set of dynamic properties called property groups. We can then access these various properties, as we have done in this case, by simply printing the properties using the <code class="literal">print</code> function:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>arcpy.env.workspace = "c:/ArcpyBook/Ch10/CityOfSanAntonio.gdb"</strong></span>
<span class="strong"><strong>desc = arcpy.Describe("Schools")</strong></span>
<span class="strong"><strong>print "The feature type is: " + desc.featureType</strong></span>
<span class="strong"><strong>The feature type is: Simple</strong></span>
<span class="strong"><strong>print "The shape type is: " + desc.shapeType</strong></span>
<span class="strong"><strong>The shape type is: Polygon</strong></span>
<span class="strong"><strong>print "The name is: " + desc.name</strong></span>
<span class="strong"><strong>The name is: Schools</strong></span>
<span class="strong"><strong>print "The path to the data is: " + desc.path</strong></span>
<span class="strong"><strong>The path to the data is: c:/ArcpyBook/Ch10/CityOfSanAntonio.gdb</strong></span>
</pre></div><p>All datasets, irrespective of their type, contain a default set of properties located on the <code class="literal">Describe</code> object. These are read-only properties. Some of the more commonly used properties include <code class="literal">dataType</code>, <code class="literal">catalogPath</code>, <code class="literal">name</code>, <code class="literal">path</code>, and <code class="literal">file</code>. </p><p>In this recipe, you will write a script that obtains descriptive information about a feature class using the <code class="literal">Describe()</code> function.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec193"/>How to do it…</h2></div></div></div><p>Follow these steps to <a id="id735" class="indexterm"/>
<a id="id736" class="indexterm"/>learn how to obtain descriptive information about a feature class:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open IDLE and create a new script window.</li><li class="listitem">Save the script as <code class="literal">c:\ArcpyBook\Ch10\DescribeFeatureClass.py</code>.</li><li class="listitem">Import the <code class="literal">arcpy</code> module.</li><li class="listitem">import arcpy Set the workspace:<div class="informalexample"><pre class="programlisting">arcpy.env.workspace = "C:/ArcpyBook/data/CityOfSanAntonio.gdb"</pre></div></li><li class="listitem">Start a <code class="literal">try</code> block:<div class="informalexample"><pre class="programlisting">try:</pre></div></li><li class="listitem">Call the <code class="literal">Describe()</code> function on the <code class="literal">Burglary</code> feature class and print the shape type:<div class="informalexample"><pre class="programlisting">descFC = arcpy.Describe("Burglary")
print "The shape type is: " + descFC.ShapeType</pre></div></li><li class="listitem">Get a list of fields in the feature class and print the name, type, and length of each:<div class="informalexample"><pre class="programlisting">flds = descFC.fields
for fld in flds:
  print "Field: " + fld.name
  print "Type: " + fld.type
  print "Length: " + str(fld.length)</pre></div></li><li class="listitem">Get the geographic extent of the feature class and print the coordinates that define the extent:<div class="informalexample"><pre class="programlisting">ext = descFC.extent
print "XMin: %f" % (ext.XMin)
print "YMin: %f" % (ext.YMin)
print "XMax: %f" % (ext.XMax)
print "YMax: %f" % (ext.YMax)</pre></div></li><li class="listitem">Add the <code class="literal">except</code> block:<div class="informalexample"><pre class="programlisting">except Exception e:
  print e.message()</pre></div></li><li class="listitem">The entire script should appear as follows:<div class="informalexample"><pre class="programlisting">import arcpy
arcpy.env.workspace = "c:/ArcpyBook/data/CityOfSanAntonio.gdb"
try:
  descFC = arcpy.Describe("Burglary")
  print "The shape type is: " + descFC.ShapeType
  flds = descFC.fields
  for fld in flds:
    print "Field: " + fld.name
    print "Type: " + fld.type
    print "Length: " + str(fld.length)
  ext = descFC.extent
  print "XMin: %f" % (ext.XMin)
  print "YMin: %f" % (ext.YMin)
  print "XMax: %f" % (ext.XMax)
  print "YMax: %f" % (ext.YMax)
except:
  print arcpy.GetMessages()</pre></div></li><li class="listitem">Save and <a id="id737" class="indexterm"/><a id="id738" class="indexterm"/>run the script. You should see the following output:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>The shape type is: Point</strong></span>
<span class="strong"><strong>Field: OBJECTID</strong></span>
<span class="strong"><strong>Type: OID</strong></span>
<span class="strong"><strong>Length: 4</strong></span>
<span class="strong"><strong>Field: Shape</strong></span>
<span class="strong"><strong>Type: Geometry</strong></span>
<span class="strong"><strong>Length: 0</strong></span>
<span class="strong"><strong>Field: CASE</strong></span>
<span class="strong"><strong>Type: String</strong></span>
<span class="strong"><strong>Length: 11</strong></span>
<span class="strong"><strong>Field: LOCATION</strong></span>
<span class="strong"><strong>Type: String</strong></span>
<span class="strong"><strong>Length: 40</strong></span>
<span class="strong"><strong>.....</strong></span>
<span class="strong"><strong>..... </strong></span>
<span class="strong"><strong>XMin: -103.518030</strong></span>
<span class="strong"><strong>YMin: -6.145758</strong></span>
<span class="strong"><strong>XMax: -98.243208</strong></span>
<span class="strong"><strong>YMax: 29.676404</strong></span>
</pre></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec194"/>How it works…</h2></div></div></div><p>Executing<a id="id739" class="indexterm"/>
<a id="id740" class="indexterm"/> a <code class="literal">Describe()</code> function against a feature class, which we have done in this script, returns a <code class="literal">FeatureClass</code> property group along with access to the <code class="literal">Table</code> and <code class="literal">Dataset</code> property groups. In addition to returning a <code class="literal">FeatureClass</code> property group, you also have access to a <code class="literal">Table</code> properties group.</p><p>The <code class="literal">Table</code> property group is important primarily because it gives you access to the fields in a standalone table or feature class. You can also access any indexes on the table or feature class through this property group. The <code class="literal">Fields</code> property on table properties returns a Python list containing one <code class="literal">Field</code> object for each field in the feature class. Each field has a number of read-only properties including the <code class="literal">name</code>, <code class="literal">alias</code>, <code class="literal">length</code>, <code class="literal">type</code>, <code class="literal">scale</code>, <code class="literal">precision</code>, and so on. The most obviously useful properties are <code class="literal">name</code> and <code class="literal">type</code>. In this script, we printed the field name, type, and length. Note the use of a Python <code class="literal">for</code> loop to process each field in the Python list. </p><p>Finally, we printed out the geographic extent of the layer through the use of the <code class="literal">Extent</code> object, returned by the <code class="literal">extent</code> property on the <code class="literal">Dataset</code> property group. The <code class="literal">Dataset</code> property group contains a number of useful properties. Perhaps, the most used properties include <code class="literal">extent</code> and <code class="literal">spatialReference</code>, as many geoprocessing tools and scripts require this information at some point during execution. You can also obtain the <code class="literal">datasetType</code> and versioning information along with several other properties. </p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Using the Describe() function to return descriptive information about an image"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec76"/>Using the Describe() function to return descriptive information about an image</h1></div></div></div><p>Raster files also contain descriptive information, which can be returned by the <code class="literal">Describe()</code> function. </p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec195"/>Getting ready</h2></div></div></div><p>A raster <a id="id741" class="indexterm"/>
<a id="id742" class="indexterm"/>dataset can also be described through the use of the <code class="literal">Describe()</code> function. In this recipe, you will describe a raster dataset by returning its extent and spatial reference. The <code class="literal">Describe()</code> function contains a reference to the general purpose <code class="literal">Dataset</code> properties group as well, which contains a reference to the <code class="literal">SpatialReference</code> object for the dataset. The <code class="literal">SpatialReference</code> object can then be used to get detailed spatial reference information for the dataset.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec196"/>How to do it…</h2></div></div></div><p>Follow these steps to learn how to obtain descriptive information about a raster image file:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open IDLE and create a new script window.</li><li class="listitem">Save the script as <code class="literal">c:\ArcpyBook\Ch10\DescribeRaster.py</code>.</li><li class="listitem">Import the <code class="literal">arcpy</code> module:<div class="informalexample"><pre class="programlisting">import arcpy</pre></div></li><li class="listitem">Set the workspace:<div class="informalexample"><pre class="programlisting">arcpy.env.workspace = "C:/ArcpyBook/data"</pre></div></li><li class="listitem">Start a <code class="literal">try</code> block:<div class="informalexample"><pre class="programlisting">try:</pre></div></li><li class="listitem">Call the <code class="literal">Describe()</code> function on a raster dataset making sure you indent the next few lines of code inside the <code class="literal">try</code> statement:<div class="informalexample"><pre class="programlisting">descRaster = arcpy.Describe("AUSTIN_EAST_NW.sid")</pre></div></li><li class="listitem">Get the extent of the raster dataset and print it:<div class="informalexample"><pre class="programlisting">ext = descRaster.extent
print "XMin: %f" % (ext.XMin)
print "YMin: %f" % (ext.YMin)
print "XMax: %f" % (ext.XMax)
print "YMax: %f" % (ext.YMax)</pre></div></li><li class="listitem">Get a reference to the <code class="literal">SpatialReference</code> object and print it:<div class="informalexample"><pre class="programlisting">sr = descRaster.SpatialReference
print sr.name
print sr.type</pre></div></li><li class="listitem">Add the <code class="literal">except</code> block:<div class="informalexample"><pre class="programlisting">except Exception e:
  print e.message()</pre></div></li><li class="listitem">The entire script should appear as follows:<div class="informalexample"><pre class="programlisting">import arcpy
arcpy.env.workspace = "c:/ArcpyBook/data"
try:
  descRaster = arcpy.Describe("AUSTIN_EAST_NW.sid")
  ext = descRaster.extent
  print "XMin: %f" % (ext.XMin)
  print "YMin: %f" % (ext.YMin)
  print "XMax: %f" % (ext.XMax)
  print "YMax: %f" % (ext.YMax)
	
  sr = descRaster.SpatialReference
  print sr.name
  print sr.type
except:
  print arcpy.GetMessages()</pre></div></li><li class="listitem">Savr <a id="id743" class="indexterm"/><a id="id744" class="indexterm"/>and run the script. You should see the following output:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>XMin: 3111134.862457</strong></span>
<span class="strong"><strong>YMin: 10086853.262238</strong></span>
<span class="strong"><strong>XMax: 3131385.723907</strong></span>
<span class="strong"><strong>YMax: 10110047.019228</strong></span>
<span class="strong"><strong>NAD83_Texas_Central</strong></span>
<span class="strong"><strong>Projected</strong></span>
</pre></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec197"/>How it works…</h2></div></div></div><p>This recipe is very similar to the previous one. The difference is that we're using the <code class="literal">Describe()</code> function against a raster dataset instead of against a vector feature class. In both cases, we've returned the geographic extent of the datasets using the <code class="literal">extent</code> object. However, in the script we've also obtained the <code class="literal">SpatialReference</code> object for the raster dataset and printed the information about this object including the name and type.</p></div></div></div>


  <div id="sbo-rt-content"><div class="section" title="Returning workspace information with the Describe() function"><div class="titlepage"><div><div><h1 class="title"><a id="ch10lvl1sec77"/>Returning workspace information with the Describe() function</h1></div></div></div><p>There are<a id="id745" class="indexterm"/>
<a id="id746" class="indexterm"/> several different types of geodatabases that can be used with ArcGIS, including personal, file, and enterprise. As we saw in <a class="link" href="ch08.html" title="Chapter 8. Querying and Selecting Data">Chapter 8</a>, <span class="emphasis"><em>Querying and Selecting Data</em></span>, the construction of queries will vary depending upon the type of geodatabase a dataset resides within. Your scripts may or may not know the geodatabase type ahead of time. To make your scripts more robust in the case of queries, you could use the <code class="literal">Describe()</code> function against a workspace to capture this information and construct your query accordingly.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec198"/>Getting ready</h2></div></div></div><p>The <code class="literal">Workspace</code> property group provides information about a workspace (such as a folder, personal or file <a id="id747" class="indexterm"/>
<a id="id748" class="indexterm"/>geodatabase, or enterprise geodatabase). These properties are particularly helpful when obtaining information about an ArcSDE connection. Information that can be obtained through this property group includes the connection information when the workspace is an ArcSDE workspace, domains associated with the geodatabase, and the workspace type, which can be <code class="literal">FileSystem</code>, <code class="literal">LocalDatabase</code>, or <code class="literal">RemoteDatabase</code>. <code class="literal">LocalDatabase</code> refers to personal or file geodatabases, while <code class="literal">RemoteDatabase</code> refers to an <code class="literal">ArcSDE</code> geodatabase. In this recipe, you'll use the <code class="literal">Workspace</code> property group to obtain information about a file geodatabase.</p></div><div class="section" title="How to do it…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec199"/>How to do it…</h2></div></div></div><p>Follow these steps to learn how to obtain descriptive information about a workspace:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open IDLE and create a new script window.</li><li class="listitem">Save the script as <code class="literal">c:\ArcpyBook\Ch10\DescribeWorkspace.py</code>.</li><li class="listitem">Import the <code class="literal">arcpy</code> module:<div class="informalexample"><pre class="programlisting">import arcpy</pre></div></li><li class="listitem">Start a <code class="literal">try</code> block:<div class="informalexample"><pre class="programlisting">try:</pre></div></li><li class="listitem">Call the <code class="literal">Describe()</code> function on the <code class="literal">CityOfSanAntonio</code> geodatabase and make sure to indent this statement inside the try statement.  The two print statements below should also be indented.<div class="informalexample"><pre class="programlisting">descRaster = arcpy.Describe("c:/ArcpyBook/data/CityOfSanAntonio.gdb")</pre></div></li><li class="listitem">Print the workspace type:<div class="informalexample"><pre class="programlisting">print descWorkspace.workspaceType</pre></div></li><li class="listitem">Print the detailed workspace information:<div class="informalexample"><pre class="programlisting">print descWorkspace.workspaceFactoryProgID</pre></div></li><li class="listitem">Add the <code class="literal">except</code> block:<div class="informalexample"><pre class="programlisting">except Exception e:
  print e.message()</pre></div></li><li class="listitem">Save<a id="id749" class="indexterm"/><a id="id750" class="indexterm"/> and run the script. You should see the following output:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>LocalDatabase</strong></span>
<span class="strong"><strong>esriDataSourcesGDB.FileGDBWorkspaceFactory.1</strong></span>
</pre></div></li></ol></div></div><div class="section" title="How it works…"><div class="titlepage"><div><div><h2 class="title"><a id="ch10lvl2sec200"/>How it works…</h2></div></div></div><p>The <code class="literal">workspaceType</code> property<a id="id751" class="indexterm"/> returns one of three values: <code class="literal">FileSystem</code>, <code class="literal">LocalDatabase</code>, or <code class="literal">RemoteDatabase</code>. The <code class="literal">localDatabase</code> value indicates that you're working with either a personal or file geodatabase. However, it isn't any more specific. To get the specific geodatabase, you can retrieve the <code class="literal">workspaceFactoryProgID</code> property, which will indicate the type of geodatabase. In this case, it's a file geodatabase.</p></div></div></div>
</body></html>