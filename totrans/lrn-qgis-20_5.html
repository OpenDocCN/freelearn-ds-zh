<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Creating Great Maps"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Creating Great Maps</h1></div></div></div><p>In this chapter, we will cover the important features that enable us to create great maps. We will first go into advanced vector styling, building on what we learned in <a class="link" href="ch02.html" title="Chapter 2. Viewing Spatial Data">Chapter 2</a>, <span class="emphasis"><em>Viewing Spatial Data</em></span>. Then, we will learn how to label features by following examples for point labels as well as more advanced road labels with road shield graphics. We will also cover how to tweak labels manually. Finally, we will get to know the print composer and how to use it to create printable maps and map books.</p><div class="section" title="Advanced vector styling"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec37"/>Advanced vector styling</h1></div></div></div><p>This section<a id="id330" class="indexterm"/> introduces more advanced vector styling features, building on the basics we saw in <a class="link" href="ch02.html" title="Chapter 2. Viewing Spatial Data">Chapter 2</a>, <span class="emphasis"><em>Viewing Spatial Data</em></span>. We will see how to use graduated styles, categorized styles, and rulebased styles.</p><div class="section" title="Creating a graduated style with size-scaling"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec16"/>Creating a graduated style with size-scaling</h2></div></div></div><p>Graduated styles are great to visualize distributions of numeric values in a choropleth map <a id="id331" class="indexterm"/>or similar. In our sample data,<a id="id332" class="indexterm"/> there is a <code class="literal">climate.shp</code> file, which <a id="id333" class="indexterm"/>contains locations and mean temperature values that we can visualize using a graduated style by simply selecting the value <span class="strong"><strong>T_F_MEAN</strong></span> for the <span class="strong"><strong>Column</strong></span> field and clicking on <span class="strong"><strong>Classify</strong></span>. We can pick<a id="id334" class="indexterm"/> an existing <span class="strong"><strong>Color ramp</strong></span> field<a id="id335" class="indexterm"/> or create a new one by scrolling down the list to the <span class="strong"><strong>New color ramp…</strong></span> entry. Graduated styles are available in different classification modes as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Equal Intervals</strong></span>: This<a id="id336" class="indexterm"/> mode creates<a id="id337" class="indexterm"/> classes by splitting at equal intervals between the maximum and minimum values found in the specified column</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Quantile (Equal Count)</strong></span>: This<a id="id338" class="indexterm"/> mode<a id="id339" class="indexterm"/> creates classes so that each class contains an equal number of features</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Natural Breaks (Jenks)</strong></span>: This<a id="id340" class="indexterm"/> mode <a id="id341" class="indexterm"/>uses the Jenks Natural Breaks algorithm to create classes by taking the distribution of values into account</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Standard Deviation</strong></span>: <a id="id342" class="indexterm"/>This mode <a id="id343" class="indexterm"/>uses the column values' standard deviation to create classes</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Pretty Breaks</strong></span>: This <a id="id344" class="indexterm"/>mode is the only <a id="id345" class="indexterm"/>classification that doesn't strictly create the specified number of classes, but tries to find pretty class breaks instead</li></ul></div><p>Besides using color to distinguish between the different temperature values, we can also use<a id="id346" class="indexterm"/> size. By setting the <span class="strong"><strong>Size scale </strong></span>
<a id="id347" class="indexterm"/>
<span class="strong"><strong>field</strong></span> field in the <span class="strong"><strong>Advanced</strong></span> tab to <span class="strong"><strong>T_F_MEAN</strong></span>, <a id="id348" class="indexterm"/>as shown in the following<a id="id349" class="indexterm"/> screenshot, all point symbols will be scaled so that locations with higher mean temperatures are displayed with a bigger symbol.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip14"/>Tip</h3><p>Using <span class="strong"><strong>Size scale field</strong></span>
<a id="id350" class="indexterm"/>, we can make the size of point symbols or the width of line symbols responsive to a certain attribute value. Note that we can choose between scaling the area or the diameter of a point symbol depending on the nature of the values. Similarly, there is also a <span class="strong"><strong>Rotation field</strong></span> option<a id="id351" class="indexterm"/>, which allows us to rotate point symbols. The expected input is in degrees from 0 to 360 with 0 pointing towards the north.</p></div></div><div class="mediaobject"><img src="graphics/7488_05_01.jpg" alt="Creating a graduated style with size-scaling"/></div><p>The following screenshot shows the results of using a <span class="strong"><strong>Graduated renderer</strong></span> <a id="id352" class="indexterm"/>option<a id="id353" class="indexterm"/> with<a id="id354" class="indexterm"/> four classes using the<a id="id355" class="indexterm"/> <span class="strong"><strong>Pretty Breaks</strong></span> classification mode and a <span class="strong"><strong>Size scale field</strong></span> option, as shown in the <a id="id356" class="indexterm"/>preceding screenshot:</p><div class="mediaobject"><img src="graphics/7488_05_02.jpg" alt="Creating a graduated style with size-scaling"/></div></div><div class="section" title="Using categorized styles"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec17"/>Using categorized styles</h2></div></div></div><p>Just <a id="id357" class="indexterm"/>as graduated styles are very useful to visualize numeric values, categorized styles are great for text values, or more generally speaking, for <a id="id358" class="indexterm"/>all kinds of values on a nominal scale. A good example for this kind of data can be found in the <code class="literal">trees.shp</code> file in our sample data. <a id="id359" class="indexterm"/>For each area, there is a <span class="strong"><strong>VEGDESC</strong></span> value that describes the type of forest found there. Using a categorized style, we can very easily generate a style with one symbol for every unique value in the <span class="strong"><strong>VEGDESC</strong></span> column as shown in the following screenshot. </p><p>Of course, every symbol is editable and can be customized. Just double-click on the symbol preview to open the <span class="strong"><strong>Symbol</strong></span> selector dialog, which allows us to select and combine different symbols.</p><div class="mediaobject"><img src="graphics/7488_05_03.jpg" alt="Using categorized styles"/></div><p>Once we click on <span class="strong"><strong>OK</strong></span>, the style is applied to our trees layer to visualize the distribution of different tree types in the area. The map will look like the following screenshot:</p><div class="mediaobject"><img src="graphics/7488_05_04.jpg" alt="Using categorized styles"/></div></div><div class="section" title="Creating a rule-based style for road layers"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec18"/>Creating a rule-based style for road layers</h2></div></div></div><p>With rule-based styles, we can create a layer style with a hierarchy of rules. Rules can take <a id="id360" class="indexterm"/>into account anything, <a id="id361" class="indexterm"/>from attribute values to scale and <a id="id362" class="indexterm"/>geometry properties such as area or length. The following screenshot shows an example of a rule-based renderer for the <code class="literal">ne_10m_roads.shp</code> file<a id="id363" class="indexterm"/> from Natural Earth (you can download it from <a class="ulink" href="http://www.naturalearthdata.com/downloads/10m-cultural-vectors/roads/">http://www.naturalearthdata.com/downloads/10m-cultural-vectors/roads/</a>). On<a id="id364" class="indexterm"/> the first level of rules, we distinguish between roads of <span class="strong"><strong>"type" = 'Major Highway'</strong></span> and those of <span class="strong"><strong>"type" = 'Secondary Highway'</strong></span>. The next level of rules handles scale-dependence. To add this second layer of rules, we<a id="id365" class="indexterm"/> can use the <span class="strong"><strong>Refine current rules</strong></span> button and select <span class="strong"><strong>Add scales to rule</strong></span>. We simply input one or more scale values at which we want the rule to be split.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip15"/>Tip</h3><p>There are no symbols specified on the first rule level. If we would have symbols specified on the first level as well, the renderer would draw two symbols over each other. While this can be useful in certain cases, we don't want this effect now. Symbols <a id="id366" class="indexterm"/>can be deactivated in the Rule properties, which are accessible by double-clicking on the rule or clicking on the edit button below the rule's tree view (the button between the plus and minus buttons).</p></div></div><div class="mediaobject"><img src="graphics/7488_05_05.jpg" alt="Creating a rule-based style for road layers"/></div><p>In<a id="id367" class="indexterm"/> the following screenshot, <a id="id368" class="indexterm"/>we can see the scale rules in action. While <a id="id369" class="indexterm"/>the left-hand side shows a simplified version with thin grey lines for secondary highways, the right-hand side version shows wider, white roads with grey outlines.</p><div class="mediaobject"><img src="graphics/7488_05_06.jpg" alt="Creating a rule-based style for road layers"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip16"/>Tip</h3><p>You <a id="id370" class="indexterm"/>can download<a id="id371" class="indexterm"/> the symbols used in this<a id="id372" class="indexterm"/> style by going to <span class="strong"><strong>Settings</strong></span> | <span class="strong"><strong>Style Manager</strong></span> | <span class="strong"><strong>Share</strong></span> | <span class="strong"><strong>Import from</strong></span>. The <a id="id373" class="indexterm"/>URL is <a class="ulink" href="https://raw.github.com/anitagraser/QGIS-resources/master/symbols/osm_symbols.xml">https://raw.github.com/anitagraser/QGIS-resources/master/symbols/osm_symbols.xml</a>. Paste the URL in the <span class="strong"><strong>Location</strong></span> textbox, click on <span class="strong"><strong>Fetch Symbols</strong></span>, then on <span class="strong"><strong>Select all</strong></span>, and finally on <span class="strong"><strong>Import</strong></span>. The dialog will look like the following screenshot:</p><div class="mediaobject"><img src="graphics/7488_05_07.jpg" alt="Creating a rule-based style for road layers"/></div></div></div></div></div></div>
<div class="section" title="Labeling"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec38"/>Labeling</h1></div></div></div><p>We can activate labeling by going to <span class="strong"><strong>Layer Properties</strong></span> | <span class="strong"><strong>Labels</strong></span>, checking <span class="strong"><strong>Label this layer with</strong></span>, and selecting the attribute field that we want to use for the labels. This is all we need <a id="id374" class="indexterm"/>to do to display labels with default settings. While default labels are great for a quick preview, we usually want to customize the labels if we create visualizations for reports or stand-alone maps.</p><p>Using <span class="strong"><strong>Expressions</strong></span> (the button that is right beside the attribute drop-down list), we can format the<a id="id375" class="indexterm"/> label text to suit our needs. For example, the <span class="strong"><strong>NAME</strong></span> field in our sample <code class="literal">airports.shp</code> file<a id="id376" class="indexterm"/> contains text in uppercase. To display the airport names in mixed case instead, we can set the expression <code class="literal">title(NAME)</code>, which will reformat the name text in title case. We can also use multiple fields to create the label, for example, combining name and elevation in brackets using the concatenation operator <code class="literal">||</code> as follows:</p><p>
<code class="literal">title(NAME) || ' (' || "ELEV" || ')'</code>
</p><p>Note the use of simple quotation marks around text such as <code class="literal">' ('</code> and double quotation marks around field names such as <code class="literal">"ELEV"</code>. The dialog will look like the following screenshot:</p><div class="mediaobject"><img src="graphics/7488_05_08a.jpg" alt="Labeling"/></div><p>The big preview area at the top of the dialog titled <span class="strong"><strong>Text/Buffer sample</strong></span> shows a preview of the<a id="id377" class="indexterm"/> current settings. The background color can be adjusted to test readability on different backgrounds. Under the preview area, we find the following different label settings:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Text</strong></span>: Besides changing the font style, size, color, and transparency, we can also modify<a id="id378" class="indexterm"/> letter and word spacing as well as the blend mode, <a id="id379" class="indexterm"/>which works like the layer blending mode we covered in <a class="link" href="ch02.html" title="Chapter 2. Viewing Spatial Data">Chapter 2</a>, <span class="emphasis"><em>Viewing Spatial Data</em></span>. Note the column of buttons on the right-hand side of every setting. Clicking on these buttons allows us to create so-called data-defined overrides. These can be used, for example, to define different label colors or to vary label size depending on an individual <a id="id380" class="indexterm"/>feature's attribute value or an expression.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Formatting</strong></span>: Here<a id="id381" class="indexterm"/> we can enable multiline labels by<a id="id382" class="indexterm"/> specifying which characters to wrap on. Additionally, we can control <span class="strong"><strong>line height</strong></span> and <span class="strong"><strong>alignment</strong></span>. We can also add a symbol that displays the line's digitizing direction to the label. Finally, the <span class="strong"><strong>Formatted numbers</strong></span> option offers a shortcut to format numeric values<a id="id383" class="indexterm"/> to a certain number of decimal places.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Buffer</strong></span>: We <a id="id384" class="indexterm"/>can adjust the buffer size, color and <a id="id385" class="indexterm"/>transparency, as well as the pen join style, and blending mode. With transparency and blending, we can improve label readability without blocking out the underlying map too much.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Background</strong></span>: This <a id="id386" class="indexterm"/>allows us to add<a id="id387" class="indexterm"/> a background shape in the form of a rectangle, square, circle, ellipsoid, or an SVG. SVG backgrounds are great to create effects such as highway shields.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Shadow</strong></span>: This <a id="id388" class="indexterm"/>makes it possible to add a <a id="id389" class="indexterm"/>shadow to labels. We can control everything from shadow direction to color, blur, size, and transparency.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Placement</strong></span>: The<a id="id390" class="indexterm"/> available automatic<a id="id391" class="indexterm"/> label placement options depend on the layer geometry type. For point layers, we can choose between the following:<div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The flexible <span class="strong"><strong>Around point</strong></span> option tries to find the best position for<a id="id392" class="indexterm"/> labels by distributing them around<a id="id393" class="indexterm"/> the points without overlaps. As you can see in the following screenshot, some labels are put to the upper-right corner of their point symbol while others appear at different positions in the lower-left (for example, <span class="strong"><strong>Anchorage Intl (129)</strong></span>) or lower-right (for example, <span class="strong"><strong>Merrill Fld (123)</strong></span>) corners.</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>Offset from point</strong></span> option forces all labels to a certain position;<a id="id394" class="indexterm"/> for example, all labels can<a id="id395" class="indexterm"/> be placed above their point symbol.</li></ul></div><p>The following screenshot shows airport labels with a 50 percent transparent <span class="strong"><strong>Buffer</strong></span> and <span class="strong"><strong>Drop Shadow</strong></span> placed using <span class="strong"><strong>Around point</strong></span> and a <span class="strong"><strong>Label distance</strong></span> of 1 mm:</p><div class="mediaobject"><img src="graphics/7488_05_08.jpg" alt="Labeling"/></div><p>For line layers, we can choose from the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Parallel</strong></span><a id="id396" class="indexterm"/> for straight labels that <a id="id397" class="indexterm"/>are rotated according to the line orientation</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Curved</strong></span> for <a id="id398" class="indexterm"/>labels that follow the <a id="id399" class="indexterm"/>shape of the line</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Horizontal</strong></span> for <a id="id400" class="indexterm"/>labels that keep a<a id="id401" class="indexterm"/> horizontal orientation regardless of the line orientation</li></ul></div><p>For further fine-tuning, we can define whether the label should be placed <span class="strong"><strong>Above</strong></span>
<a id="id402" class="indexterm"/>
<span class="strong"><strong> line</strong></span>, <span class="strong"><strong>One line</strong></span>, or <span class="strong"><strong>Below line</strong></span>, and how far above and below using <span class="strong"><strong>Label distance</strong></span>.</p><p>The following example shows labels with road shields. You can download<a id="id403" class="indexterm"/> a blank road shield SVG from <a class="ulink" href="http://upload.wikimedia.org/wikipedia/commons/c/c3/Blank_shield.svg">http://upload.wikimedia.org/wikipedia/commons/c/c3/Blank_shield.svg</a>. Note how only Interstates are labeled. This can be achieved using the following labeling expression:</p><p>
<code class="literal">CASE WHEN "level" = 'Interstate' THEN name END</code>
</p><p>The labels are positioned using the <span class="strong"><strong>Horizontal</strong></span> option<a id="id404" class="indexterm"/>. Additionally, <span class="strong"><strong>Merge connected lines to avoid duplicate labels</strong></span> (in the Rendering section) and <span class="strong"><strong>Suppress labeling of features smaller than</strong></span> are activated; for example, 5 mm helps to avoid clutter by not labeling pieces of road that are shorter than 5 mm at the current scale.</p><div class="mediaobject"><img src="graphics/7488_05_09.jpg" alt="Labeling"/></div><p>To set up the road shield, go to the <span class="strong"><strong>Background</strong></span> section and select the blank shield SVG from the folder you downloaded it to. To make sure that the label fits nicely inside the shield, we additionally specify the <span class="strong"><strong>Size type</strong></span> field<a id="id405" class="indexterm"/> as a buffer with a <span class="strong"><strong>Size</strong></span> of 1 mm, which makes the shield a little bigger than the label it contains. </p><p>If you click on <span class="strong"><strong>Apply</strong></span> now, you will notice that the labels are not centered perfectly inside the shields. To fix that, we apply a small <span class="strong"><strong>Offset</strong></span> in the <span class="strong"><strong>Y</strong></span> direction to the shield position, as shown in the following screenshot. Additionally, I recommend to deactivate the label <span class="strong"><strong>Buffer</strong></span> as it tends to block out parts of the shield, and we don't need it anyway.</p><div class="mediaobject"><img src="graphics/7488_05_10.jpg" alt="Labeling"/></div><p>For <a id="id406" class="indexterm"/>polygon layers, the options are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Offset from centroid</strong></span>, <a id="id407" class="indexterm"/>which uses the polygon centroid as an anchor and <a id="id408" class="indexterm"/>works like <span class="strong"><strong>Offset from point</strong></span> for point layers</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Around centroid</strong></span> works in <a id="id409" class="indexterm"/>a<a id="id410" class="indexterm"/> manner similar to <span class="strong"><strong>Around point</strong></span></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Horizontal</strong></span><a id="id411" class="indexterm"/> places a horizontal<a id="id412" class="indexterm"/> label somewhere inside the polygon, independent of the centroid</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Free</strong></span> fits <a id="id413" class="indexterm"/>a freely rotated label <a id="id414" class="indexterm"/>inside the polygon</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Using perimeter</strong></span> places<a id="id415" class="indexterm"/> the<a id="id416" class="indexterm"/> label on the polygon outline</li></ul></div><p>The following screenshot shows lake labels (<code class="literal">lakes.shp</code>) using the <span class="strong"><strong>Multiple lines</strong></span> feature wrapping on the empty space character and positioned using the <span class="strong"><strong>Free</strong></span> option:</p><div class="mediaobject"><img src="graphics/7488_05_11.jpg" alt="Labeling"/></div><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip17"/>Tip</h3><p>By default, QGIS avoids overlapping labels, but for debug purposes, it can be useful to force <span class="strong"><strong>Show all labels (including colliding labels)</strong></span> using the options in the Rendering section.</p></div></div><p>Besides<a id="id417" class="indexterm"/> automatic label placement, we also have the option to use data-defined placement to position labels exactly where we want them to be. In the labeling toolbar, we find tools to move and rotate labels by hand. They are only active and available for layers that have data-defined placement for at least X and Y coordinates set up. To start using the tools, we can simply add three new columns, <code class="literal">label_x</code>, <code class="literal">label_y</code>, and <code class="literal">label_rot</code> to, for example, the <code class="literal">airports.shp</code> file<a id="id418" class="indexterm"/>. Then, we can specify these columns in data-defined settings by pressing the buttons beside <span class="strong"><strong>Offset X, Y</strong></span> and <span class="strong"><strong>Rotation</strong></span>. We don't have to enter any values in the attribute table right now. The labeling engine will check for values, and if it finds the attribute fields empty, it will simply place the labels automatically. By specifying data-defined placement, the labeling toolbar's tools are now available (note that the editing mode has to be turned on), and we can use the tools to move and rotate any of the labels on the map. The changes are written back to the attribute table. Try moving some labels, especially where they are placed closely together, and watch how the automatically placed labels adapt to your changes.</p></li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Rendering</strong></span>: This<a id="id419" class="indexterm"/> allows us to define<a id="id420" class="indexterm"/> <span class="strong"><strong>scale-based visibility</strong></span> limits to display labels only at certain scales and <span class="strong"><strong>pixel size-based visibility</strong></span> to hide labels for small features. Here, we can also tell the labeling engine to <span class="strong"><strong>show colliding labels, </strong></span>which are normally hidden by default.</li></ul></div></div>
<div class="section" title="Designing print maps"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec39"/>Designing print maps</h1></div></div></div><p>In QGIS, print maps<a id="id421" class="indexterm"/> are designed in the print composer. A QGIS project can contain multiple composers, so it makes sense to pick descriptive names. Compositions are saved automatically whenever we save the project. To see a list of all the compositions available in a project, go to <span class="strong"><strong>Project</strong></span> | <span class="strong"><strong>Composer Manager</strong></span>.</p><p>We can open a new composer by going to <span class="strong"><strong>Project</strong></span> | <span class="strong"><strong>New Print Composer</strong></span> or by using <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>P</em></span>. The composer window consists of the following:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A preview area for the map composition displaying a blank page on start</li><li class="listitem" style="list-style-type: disc">Panels for configuring the <span class="strong"><strong>Composition</strong></span>, <span class="strong"><strong>Item properties</strong></span>, and <span class="strong"><strong>Atlas generation</strong></span>, as well as a <span class="strong"><strong>Command history</strong></span> panel for quick undo and redo</li><li class="listitem" style="list-style-type: disc">Toolbars for managing, saving and exporting compositions, navigating in the preview area, as well as adding and arranging different composer items</li></ul></div><p>The <span class="strong"><strong>Composition</strong></span> panel gives us access to the paper options such as size, orientation, and number of <a id="id422" class="indexterm"/>pages. It is also the place to configure snapping behavior and output resolution.</p><p>First, we add a map item to the paper using the <span class="strong"><strong>Add new map</strong></span> button, or by going to <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Add Map</strong></span> <a id="id423" class="indexterm"/>and drawing the map rectangle onto the paper. Click on the paper, keep the mouse button pressed down, and drag the rectangle open. We can move, resize, and zoom the map using the mouse and the <span class="strong"><strong>Select/Move item</strong></span> tools<a id="id424" class="indexterm"/>. Alternatively, it is also possible to configure all map settings in the <span class="strong"><strong>Item Properties</strong></span> panel.</p><p>The <span class="strong"><strong>Item Properties</strong></span> panel content depends on the currently selected composition item. If a map item is selected, we can adjust the map's <span class="strong"><strong>Scale</strong></span> and <span class="strong"><strong>Extents</strong></span> as well as the <span class="strong"><strong>Position and size</strong></span> tool<a id="id425" class="indexterm"/> of the map item itself. At a <span class="strong"><strong>Scale</strong></span> of 10,000,000, we can more or less fit Alaska on an A4 paper. To move the area that is displayed within the<a id="id426" class="indexterm"/> map item, we can use the <span class="strong"><strong>Move item content</strong></span> tool.</p><p>After the map looks like we want it to, we can add a scale bar using the <span class="strong"><strong>Add new scalebar</strong></span> button<a id="id427" class="indexterm"/> or by going to <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Add Scalebar</strong></span> and clicking on the map. The <span class="strong"><strong>Item Properties</strong></span> panel now displays the scalebar's properties similar to what you can see in the following screenshot. Since we can add multiple map items to one composition, it is important to specify which map the scale belongs to. The second main property is the scalebar style, which allows us to choose between different scalebar types or a <span class="strong"><strong>Numeric</strong></span> type<a id="id428" class="indexterm"/> for a simple textual representation such as 1:10,000,000. Using the <span class="strong"><strong>Units</strong></span> properties, we can convert the map units in<a id="id429" class="indexterm"/> feet or meters to something more manageable, such as miles or kilometers. </p><p>The <span class="strong"><strong>Segments</strong></span> properties control the number of segments and the size of a single segment in the scalebar. Further, the properties control the scalebar's color, font, background, and so on.</p><p>North arrows <a id="id430" class="indexterm"/>can be added to a composition using the <span class="strong"><strong>Add Image</strong></span> button or by going to <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Add image</strong></span> and clicking on the paper. It might take a while for the <span class="strong"><strong>Item Properties</strong></span>
<a id="id431" class="indexterm"/> panel to update while QGIS loads the previews of the images in the SVG folder. Pick a north arrow from the list of images shipped with QGIS or select your own SVG. Further map decorations such as arrows or rectangle, triangle, and ellipse shapes can be added using the appropriate toolbar buttons <span class="strong"><strong>Add Arrow</strong></span>, <span class="strong"><strong>Add Rectangle</strong></span>, and so on.</p><div class="mediaobject"><img src="graphics/7488_05_12.jpg" alt="Designing print maps"/></div><p>Maps<a id="id432" class="indexterm"/> that show an area close up are often accompanied by a second map that tells the reader where the area is located in a larger context. To create such an overview map,<a id="id433" class="indexterm"/> we add a second map item and activate its <span class="strong"><strong>Overview</strong></span> option. By setting the <span class="strong"><strong>Overview frame</strong></span>, we can define which detail map's extent should be highlighted.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="tip18"/>Tip</h3><p>Every map item in a composition can display a different combination of layers. Generally, map items in composer are synced with the map in the main QGIS window. So, if we turn a layer off in the main window, it also gets removed from the print composer map. But, we can stop this automatic synchronization by enabling <span class="strong"><strong>Lock layers</strong></span> for a map item in the map item's properties.</p></div></div><p>Other common map features are grids and coordinate frames. Grids can be enabled for any map item. We can choose between a normal <span class="strong"><strong>Solid</strong></span> grid or <span class="strong"><strong>Crosses</strong></span> only. <span class="strong"><strong>Interval</strong></span> and <span class="strong"><strong>Offset</strong></span> values have to be specified in map units. Additionally, we can activate a value of <span class="strong"><strong>Zebra</strong></span> for the <span class="strong"><strong>Frame style</strong></span> and <span class="strong"><strong>Draw coordinates</strong></span> inside or outside the frame, as shown in the following screenshot:</p><div class="mediaobject"><img src="graphics/7488_05_13.jpg" alt="Designing print maps"/></div><p>Legends are another vital map element. We can use the <span class="strong"><strong>Add new legend</strong></span> button or go to <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Add legend</strong></span> to add<a id="id434" class="indexterm"/> a default legend with entries for all currently visible map layers. Legend entries can be reorganized, edited, and removed in the Legend items' properties. <a id="id435" class="indexterm"/>Using the <span class="strong"><strong>Wrap text on</strong></span> option<a id="id436" class="indexterm"/>, we can split long labels on multiple rows as shown in the following screenshot. Additionally, the legend in this example is divided into four columns. By default, QGIS tries to keep all entries of one layer in a single column, but we can override this behavior be enabling <span class="strong"><strong>Split layers</strong></span>.</p><p>To add text to the map, we can use the <span class="strong"><strong>Add new label</strong></span> button or go to <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Add label</strong></span>. <a id="id437" class="indexterm"/>Simple labels display all text using the same font. By enabling <span class="strong"><strong>Render</strong></span> as HTML, we can create more elaborate labels with headers, lists, different colors, and highlights in bold or italics using the normal HTML notation, for example:</p><div class="informalexample"><pre class="programlisting">&lt;h1&gt;Alaska&lt;/h1&gt;
&lt;p&gt;The name &lt;i&gt;"Alaska"&lt;/i&gt; means "the mainland"&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;one list entry&lt;/li&gt;&lt;li&gt;another entry&lt;/li&gt;&lt;/ul&gt;</pre></div><p>Labels can also contain expressions such as:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">[% $now %]</code> to insert the current timestamp</li><li class="listitem" style="list-style-type: disc"><code class="literal">[% $page %] of [% $numpages %]</code> to insert page numbers in compositions with multiple pages</li></ul></div><p>Even more <a id="id438" class="indexterm"/>advanced text areas can be added using the <span class="strong"><strong>Add html frame</strong></span> button<a id="id439" class="indexterm"/>. We can point the item's URL reference to any HTML page on our local machines or online, and the content will be displayed on the composer page.</p><div class="mediaobject"><img src="graphics/7488_05_14.jpg" alt="Designing print maps"/></div><p>To add additional details to the map, the composer also offers the possibility to add an attribute table to the composition using the <span class="strong"><strong>Add attribute table</strong></span> button<a id="id440" class="indexterm"/> or by going to <span class="strong"><strong>Layout</strong></span> | <span class="strong"><strong>Add attribute table</strong></span>. By enabling <span class="strong"><strong>Show only visible features</strong></span>, we can filter the table and display only relevant results. Sorting and renaming of columns is <a id="id441" class="indexterm"/>possible via the <span class="strong"><strong>Attributes…</strong></span> button.</p><p>Finally, the <span class="strong"><strong>Atlas generation</strong></span> panel enables us to create a series of maps using one print composition. The tool will create one map for every feature in the <span class="strong"><strong>Coverage layer</strong></span> dropdown we define in the atlas configuration. Features in the Coverage layer can be displayed like regular features or hidden by enabling <span class="strong"><strong>Hidden coverage layer</strong></span>. <span class="strong"><strong>Feature sorting</strong></span> and <span class="strong"><strong>Feature filtering</strong></span> make it possible to further fine-tune the results. </p><p>Using the <span class="strong"><strong>Fixed scale</strong></span> option<a id="id442" class="indexterm"/>, all maps will be rendered using the same scale. If we need more flexible <a id="id443" class="indexterm"/>output, we can switch to the <span class="strong"><strong>Margin around feature</strong></span> option instead, which zooms to every Coverage layer feature and renders it in addition to the specified margin surrounding area. The <span class="strong"><strong>Output</strong></span> field can<a id="id444" class="indexterm"/> be one image or PDF for each Coverage layer feature or a multipage PDF by enabling <span class="strong"><strong>Single file export</strong></span> when possible before going to <span class="strong"><strong>Composer</strong></span> | <span class="strong"><strong>Export as PDF</strong></span>.</p><div class="mediaobject"><img src="graphics/7488_05_15.jpg" alt="Designing print maps"/></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec40"/>Summary</h1></div></div></div><p>In this chapter, we had a closer look into how we can create some more complex maps using advanced vector layer styles such as the categorized or rule-based style. We also covered the automatic and manual feature labeling options available in QGIS. This chapter also showed how to create printable maps using print composer, and introduced the Atlas functionality for creating map books. Congratulations! Over the previous chapters, you have learned how to install and use QGIS to create, edit, and analyze spatial data and how to present it in an effective manner.</p></div></body></html>