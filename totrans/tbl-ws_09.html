<html><head></head><body>
		<div><div></div>
		</div>
		<div><h1 id="_idParaDest-252">9. <a id="_idTextAnchor280"/>Data Analysis: Creating and Using Level of Details (LOD) Calculations</h1>
		</div>
		<div><p class="callout-heading">Overview</p>
			<p class="callout">This chapter introduces the concept of <strong class="bold">Level of Detail</strong> (<strong class="bold">LOD</strong>) calculations. You will learn about the different types of LOD calculations and the benefits of using them. The goal of this chapter is to improve your analytical skills using LOD calculations by looking at the data through different views to understand the underlying patterns. By the end of this chapter, you will be able to control the granularity of your data visualizations and perform comparative analyses using LOD calculations.</p>
			<h1 id="_idParaDest-253"><a id="_idTextAnchor281"/>Introduction</h1>
			<p>For any visualization, dimensions determine the level at which measures are computed. As an example, consider the following view, in which the sum of profits is calculated based on <code>Country</code> and <code>Region</code>. These two dimensions form the details that are combined to determine the value of <code>SUM(Profit)</code>. Now, suppose you remove <code>Region</code> from the view. Then, <code>SUM(Profit)</code> would be re-computed, and would only consider <code>Country</code> in the view. Accordingly, the value of <code>SUM(Profit)</code> changes as the level of the computation changes, as can be seen from the following figure:</p>
			<div><div><img src="img/B16342_09_01.jpg" alt="Figure 9.1: Understanding LOD&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.1: Understanding LOD</p>
			<p>LOD calculations help you control the granularity of visualizations. You can choose to view calculation results at a detailed level, or an aggregated level, based on the LOD function you use, LOD calculations require measures to be aggregated.</p>
			<p>In this chapter, you will work with LOD calculations in Tableau.</p>
			<p>Throughout these exercises, you will be working with the <code>Sample - Superstore</code>  dataset, to learn about the different concepts related to LOD calculations.</p>
			<h2 id="_idParaDest-254"><a id="_idTextAnchor282"/>Exercise 9.01: Creating a LOD Calculation</h2>
			<p>You will now create an LOD calculation using the <code>Profit</code> measure in the <code>Sample - Superstore</code> dataset. The following steps will help you complete this exercise:</p>
			<ol>
				<li>Load the <code>Sample – Superstore</code> dataset in your Tableau instance. Navigate to <code>Documents | My Tableau Repository | Data Sources</code>, then open the <code>Sample - Superstore.xls</code> file.</li>
				<li>Once the data is loaded, in the data pane, right-click on <code>Profit</code> and select <code>Create | Calculated Field…</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_09_02.jpg" alt="Figure 9.2: Creating a calculated field&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.2: Creating a calculated field</p>
			<ol>
				<li value="3">In the calculation editor, select <code>Aggregate</code> from the dropdown to access the LOD calculations:</li>
			</ol>
			<div><div><img src="img/B16342_09_03.jpg" alt="Figure 9.3: Calculated field editor&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.3: Calculated field editor</p>
			<p>LOD calculations fall under the <code>Aggregate</code> set of functions. There are four LOD calculation types: <code>FIXED</code>, <code>INCLUDE</code>, <code>EXCLUDE</code>, and <code>Table-Scoped</code>. You will learn more about these as the chapter progresses. For now, hover over <code>FIXED</code>. Notice the calculation syntax, as can be seen in the following figure:</p>
			<div><div><img src="img/B16342_09_04.jpg" alt="Figure 9.4: Various LOD types in Tableau&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.4: Various LOD types in Tableau</p>
			<ol>
				<li value="4">Click on <code>FIXED</code> and add it to the calculation editor. Add the <code>{FIXED : SUM([Profit])}</code> formula to the editor and click <code>OK</code>:</li>
			</ol>
			<div><div><img src="img/B16342_09_05.jpg" alt="Figure 9.5: Creating a LOD calculation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.5: Creating a LOD calculation</p>
			<p>LOD calculations require an aggregate measure. If you do not aggregate the measure, Tableau will show an error. Aggregation here means to use SUM, AVG, or similar types of calculation with a measure value, rather than using the measure directly, as with the SUM function previously.</p>
			<ol>
				<li value="5">For this calculation, compute <code>SUM(Profit)</code> at the highest level of granularity in the data, which is the <code>Country</code> level. Add this to the view, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_09_06.jpg" alt="Figure 9.6: Initial view with country&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.6: Initial view with country</p>
			<p>Notice that the measure value does not change, irrespective of how many dimensions you add in the view:</p>
			<div><div><img src="img/B16342_09_07.jpg" alt="Figure 9.7: Initial view with region&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.7: Initial view with region</p>
			<p>In this exercise, you created an LOD calculation, by comparing how the <code>SUM(Fixed_Profit)</code> aggregation behaves, based on various dimensions such as <code>Region</code>. You observed that the values of the output measure do not change, irrespective of the other dimension in the view, because you chose the <code>FIXED</code> LOD calculation.</p>
			<p>Next, you will learn about the different types of LOD calculations.</p>
			<h1 id="_idParaDest-255"><a id="_idTextAnchor283"/>Types of LOD Calculations</h1>
			<p>In this section, you will learn about the various LOD calculations. There are four LOD calculation types:</p>
			<ul>
				<li><code>FIXED</code></li>
				<li><code>INCLUDE</code></li>
				<li><code>EXCLUDE</code></li>
				<li><code>Table-Scoped</code></li>
			</ul>
			<p>You will now learn about each of these LOD calculations in greater depth. You will also learn their application in visualizations by performing an exercise for each.</p>
			<h2 id="_idParaDest-256"><a id="_idTextAnchor284"/>FIXED</h2>
			<p><code>FIXED</code> LOD calculations compute an expression using specified dimensions. An example would be identifying the top-performing product categories per region per country. This can easily be done using <code>FIXED</code> LOD calculations.</p>
			<h2 id="_idParaDest-257"><a id="_idTextAnchor285"/>Exercise 9.02: Creating a FIXED LOD Calculation</h2>
			<p>In this exercise, you will calculate <code>SUM(Profit)</code> fixed at a <code>Country</code> level. Suppose, as a country-level manager, you are only interested in the profits generated at country level, but occasionally would like to hone in on the <code>Region</code> level of that country. Now, you will compute a measure at a specific dimension level, rather than making calculations using all dimensions in the view.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">If you are using the local copy of <code>Superstore</code> that comes with Tableau, the field <code>Country</code> will have the label <code>Country/Region</code> instead. This will not affect the calculations.</p>
			<p>Perform the following steps to complete this exercise:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Country</code> and <code>Region</code> along with <code>SUM(Profit)</code>. Currently, the view shows <code>SUM(Profit)</code> at the <code>Region</code> level, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_09_08.jpg" alt="Figure 9.8: Initial view with country and region&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.8: Initial view with country and region</p>
			<ol>
				<li value="3">Create a <code>FIXED</code> LOD calculation:</li>
			</ol>
			<div><div><img src="img/B16342_09_09.jpg" alt=" Figure 9.9: Calculation editor &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption"> Figure 9.9: Calculation editor </p>
			<ol>
				<li value="4">You can use any number of dimensions in the expression before the colon (<code>:</code>). Note the expression on the right side of the colon (<code>:</code>) has to be an aggregation, or else you will get a syntax error:</li>
			</ol>
			<div><div><img src="img/B16342_09_10.jpg" alt="Figure 9.10: Understanding the syntax of LOD calculations&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.10: Understanding the syntax of LOD calculations</p>
			<ol>
				<li value="5">Add this calculation to the view:</li>
			</ol>
			<div><div><img src="img/B16342_09_11.jpg" alt="Figure 9.11: Comparing LOD and normal calculations&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.11: Comparing LOD and normal calculations</p>
			<p>The second calculation in each row is the LOD calculation. Notice how the value remains constant irrespective of the <code>Region</code> dimension in the view. </p>
			<p>In this exercise, you learned about the <code>FIXED</code> LOD calculation type and its application. You also saw how computation works when adding another dimension such as <code>Region</code> to the view. Next, you will learn about the <code>INCLUDE</code> LOD calculation.</p>
			<h2 id="_idParaDest-258"><a id="_idTextAnchor286"/>INCLUDE</h2>
			<p><code>INCLUDE</code> LOD calculations are used to calculate values based on the dimensions specified, along with those used in the view. This is useful when wanting to know results at a detailed level, but also want the view to be at a higher level. An example would be computing the average literacy rate at district level, but viewing it at state level. Here, instead of averaging it directly at state level, you would average it at district level, and then re-aggregate the results at state level. The next exercise covers this concept in detail.</p>
			<h2 id="_idParaDest-259"><a id="_idTextAnchor287"/>Exercise 9.03: Creating an INCLUDE LOD Calculation</h2>
			<p>In this exercise, you will calculate <code>AVG(Profit)</code> using the <code>Customer</code> and <code>Region</code> dimensions. You will learn how to compute the average profit at a customer level, and then group it again by the <code>Region</code> dimension in the view. Perform the following steps to complete this exercise:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows <code>Region</code> along with <code>AVG(Profit)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_09_12.jpg" alt="Figure 9.12: Initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.12: Initial view</p>
			<ol>
				<li value="3">Currently, the view shows <code>AVG(Profit)</code> at the <code>Region</code> level. Create an <code>INCLUDE</code> LOD calculation, and write the formula as given in the following figure:</li>
			</ol>
			<div><div><img src="img/B16342_09_13.jpg" alt="Figure 9.13: INCLUDE LOD calculation expression &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.13: INCLUDE LOD calculation expression </p>
			<ol>
				<li value="4">Use the average profit generated by a customer in that region to compute the overall average. Duplicate the preceding view, and add this calculation instead of <code>AVG(Profit)</code> to get the following:</li>
			</ol>
			<div><div><img src="img/B16342_09_14.jpg" alt="Figure 9.14: Adding the LOD calculation to the initial view &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.14: Adding the LOD calculation to the initial view </p>
			<ol>
				<li value="5">Check that the aggregation is set to average by clicking on the calculation dropdown and selecting the <code>Measure (Average)</code> option as <code>Average</code> on both the <code>Text</code> and <code>Columns</code> shelves:</li>
			</ol>
			<div><div><img src="img/B16342_09_15.jpg" alt="Figure 9.15: Changing a calculation aggregation format &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.15: Changing a calculation aggregation format </p>
			<p>Notice that the numbers are different in both views, despite the dimension being the same. You will now see how the computation is happening within Tableau.</p>
			<ol>
				<li value="6">At the <code>Region</code> level, to compute the average profit, add the profit across the region, and divide the sum by the total number of records , as follows:</li>
			</ol>
			<div><div><img src="img/B16342_09_16.jpg" alt="Figure 9.16: Calculation logic explanation &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.16: Calculation logic explanation </p>
			<ol>
				<li value="7">Now it is time to see how the customer-level computation works. Plot the average profit generated by each customer in <code>Central Region</code>. Once you have the average, sum all averages ($8,442), and divide the result by <code>Count (630)</code> to get the value of $13.42 per customer in that region. These values can be referred to in the <code>Summary</code> card, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_09_17.jpg" alt="Figure 9.17: Customer-level computations&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.17: Customer-level computations</p>
			<p>This kind of calculation is useful when you want to see the aggregations at different levels without using them in the view.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">You can perform a similar calculation at the <code>Segment</code>, ship mode, or any other dimension to understand underlying trends in data.</p>
			<p>In this exercise, you learned about the <code>INCLUDE</code> LOD calculation type and how it can be applied to analyze trends at different levels of dimensions. Next, you will learn about the <code>EXCLUDE</code> LOD calculation.</p>
			<h2 id="_idParaDest-260"><a id="_idTextAnchor288"/>EXCLUDE </h2>
			<p>An <code>EXCLUDE</code> LOD calculation declares dimensions to be omitted from the view LOD. It is the opposite of the <code>INCLUDE</code> LOD. In an <code>EXCLUDE</code> LOD, the calculation is computed excluding the specified dimensions in the expression; that is, the specified dimensions are ignored while computing the results. Continuing on with the previous example, you can add both the customer and product categories to the view, but can exclude the customer dimension when computing sales, and just calculate sales at a product category level. You will explore this in detail in the next exercise.</p>
			<h2 id="_idParaDest-261"><a id="_idTextAnchor289"/>Exercise 9.04: Creating an EXCLUDE LOD Calculation</h2>
			<p>In this exercise, you will calculate <code>AVG(Profit)</code> using the <code>Customer</code> and <code>Region</code> dimensions, and will see how the <code>EXCLUDE</code> LOD calculation can be applied. This will help you learn how to compute the average profit only at the region level, despite having customer information in the view:</p>
			<ol>
				<li value="1">Load the <code>Sample – Superstore</code> dataset in your Tableau instance.</li>
				<li>Create a view that shows the <code>Region</code> and Customer dimensions along with <code>AVG(Profit)</code>, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_09_18.jpg" alt="Figure 9.18: Initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.18: Initial view</p>
			<ol>
				<li value="3">Add a <code>Central</code> filter for <code>Region</code>. Here, you only view the <code>Customer</code> information for <code>Central Region</code>, along with the average profit.</li>
				<li>Create an <code>EXCLUDE</code> LOD calculation to exclude the customer and re-compute the average profit, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_09_19.jpg" alt="Figure 9.19: Exclude LOD expression&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.19: Exclude LOD expression</p>
			<ol>
				<li value="5">Add this calculation to the view, and you will see the following:</li>
			</ol>
			<div><div><img src="img/B16342_09_20.jpg" alt="Figure 9.20: Adding exclude LOD to the view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.20: Adding exclude LOD to the view</p>
			<ol>
				<li value="6">Check that the aggregation is set to <code>Average</code>. Here, you have excluded the <code>Customer</code>-level profit, and have instead grouped it at a higher granular level of <code>Region</code>.</li>
				<li>At a <code>Region</code> level, to compute the average profit, you can simply add the profits across the region and divide the sum by the number of records, as follows:</li>
			</ol>
			<div><div><img src="img/B16342_09_21.jpg" alt="Figure 9.21: Profit computation logic explanation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.21: Profit computation logic explanation</p>
			<p>This kind of calculation comes in useful when wanting to see aggregation at different levels without actually using them in the view. In this exercise, you learned about the <code>EXCLUDE</code> LOD calculation type, and how its application can help analyze trends at different levels of dimension. Next, you will learn about the <code>Table-Scoped</code> LOD calculation.</p>
			<h2 id="_idParaDest-262"><a id="_idTextAnchor290"/>Table-Scoped </h2>
			<p>Tableau provides a way to define an expression without using LOD functions such as <code>FIXED</code>, <code>INCLUDE</code>, and <code>EXCLUDE</code>. The following expression returns the minimum profit for the entire table:</p>
			<div><div><img src="img/B16342_09_22.jpg" alt="Figure 9.22: Table-scoped syntax&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.22: Table-scoped syntax</p>
			<p>The <code>Table-Scoped</code> calculation is equivalent to a <code>FIXED</code> LOD calculation with no dimension declaration:</p>
			<div><div><img src="img/B16342_09_23.jpg" alt="Figure 9.23: Comparison to the fixed LOD calculation type&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.23: Comparison to the fixed LOD calculation type</p>
			<p>Now you have learned about different LOD calculations, their syntax, and their applications, you can now see how Tableau categorizes LOD calculations and what canges are required in the worksheet view for the LOD calculation to give the right output.</p>
			<h1 id="_idParaDest-263"><a id="_idTextAnchor291"/>LOD Calculations: Dimensions or Measures?</h1>
			<p>In the previous exercises, when calculating LOD calculations, you have always used a measure to give a numerical output. <code>FIXED</code> LOD calculations can show results in measures or dimensions, depending on the field used in the expression. </p>
			<p>So, <code>MIN ([Order_Date])}</code> will be a dimension, because <code>[Order_Date]</code> is a dimension, and <code>{fixed Country: AVG([GDP])}</code> will be a measure, because <code>[GDP]</code> is a measure. In contrast, <code>INCLUDE</code> and <code>EXCLUDE</code> LOD calculations always show results in measures.</p>
			<p>You will now learn how dimensions used in the view affect the LOD calculation's computation.</p>
			<h2 id="_idParaDest-264"><a id="_idTextAnchor292"/>Aggregation and LOD Calculations</h2>
			<p>In previous exercises, you computed <code>AVG(Profit)</code> per <code>Customer</code> at a <code>Region</code> level, but did not include <code>Customer</code> in the view. How did Tableau manage that? </p>
			<div><div><img src="img/B16342_09_24.jpg" alt="Figure 9.24: Understanding aggregations&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.24: Understanding aggregations</p>
			<p>The answer lies in how Tableau handles the level of aggregation. In this section, you will learn about the backend computation of LOD calculations in comparison to the LOD in the view in the following scenarios:</p>
			<ul>
				<li>LOD calculation is coarser than the view LOD.</li>
				<li>LOD calculation is finer than the view LOD.</li>
				<li>Nested LOD calculations.</li>
			</ul>
			<p>You will now explore each of these in detail.</p>
			<h3 id="_idParaDest-265"><a id="_idTextAnchor293"/>LOD Calculation Is Higher than the View LOD</h3>
			<p>Compared to the view, an expression provides higher-level detail for dimensions. For example, for a view that contains the <code>Region</code> and <code>Customer</code> dimensions, you can build a LOD calculation that uses only one of these dimensions:</p>
			<p><code>{FIXED [Region]: SUM([Profit])}</code></p>
			<p>Here, the expression provides a coarser LOD compared to the view. The value of the expression is based on one dimension (<code>[Region]</code>), whereas the view bases its view on two dimensions (<code>[Region]</code> and <code>[Customer]</code>).</p>
			<p>The result, is that using the LOD calculation in the view causes certain values to be replicated,that is, to appear multiple times. Observe the measure values of each customer. This is what you saw in the <code>EXCLUDE</code> LOD exercise:</p>
			<div><div><img src="img/B16342_09_25.jpg" alt="Figure 9.25: Similarity to the exclude LOD calculation output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.25: Similarity to the exclude LOD calculation output</p>
			<h3 id="_idParaDest-266"><a id="_idTextAnchor294"/>LOD Calculation Is Finer than the View LOD</h3>
			<p>When referencing a superset of dimensions, an expression provides a finer LOD compared to the view. When this is used, Tableau aggregates results up to the view level. For example, the following LOD expression references two dimensions:</p>
			<p><code>{FIXED [Region],[Customer]: AVG([Profit])}</code></p>
			<p>When this expression is used in a view that has only <code>Region</code> as its LOD, the values must be aggregated. Here is what you would see if you dragged that expression to a shelf:</p>
			<p><code>AVG([{FIXED [Region]], [Customer]] : AVG([Profit]])}])</code></p>
			<p>This is exactly what happened in the <code>INCLUDE</code> LOD calculation exercise:</p>
			<div><div><img src="img/B16342_09_26.jpg" alt="Figure 9.26: Comparing finer views with the include LOD output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.26: Comparing finer views with the include LOD output</p>
			<p>When you calculated average profit at the customer level, and the view only had <code>Region</code>, all profits were first averaged at the customer level. The result of this was then averaged again at the <code>Region</code> level, which was the final output, as shown in the preceding figure.</p>
			<h3 id="_idParaDest-267"><a id="_idTextAnchor295"/>Nested LOD Calculations</h3>
			<p>In a nested LOD calculation, a LOD expression is used within another LOD expression, as follows:</p>
			<div><div><img src="img/B16342_09_27.jpg" alt="Figure 9.27: Nested LOD syntax&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.27: Nested LOD syntax</p>
			<p>Here, an <code>INCLUDE</code> LOD is performed; that is, average profits are computed at the customer level, then this output is again averaged at the <code>REGION</code> level in the outer <code>FIXED</code> LOD.</p>
			<p>When using nested LODs, the inner expression inherits its dimension from the outer expression. This means that you first calculate the average of the inner LOD, but also keep the level <code>Fixed</code> for <code>Region</code>. The output generated is as follows:</p>
			<div><div><img src="img/B16342_09_28.jpg" alt="Figure 9.28: Nested LOD output&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.28: Nested LOD output</p>
			<p>Can you identify which computation matches this result? It is the <code>INCLUDE</code> LOD calculation. </p>
			<p>Nested LODs currently have limited use in a worksheet (depending on the complexity required), but are a powerful concept in Tableau.</p>
			<p>Now you have familiarized yourself with the inner workings of LOD calculations, it is time to learn how different components within a workbook can affect the LOD calculation output. You will learn about filter applications, and some limitations of LOD calculations.</p>
			<h1 id="_idParaDest-268"><a id="_idTextAnchor296"/>Effects of Filters on LOD Calculations</h1>
			<p>There are different kinds of filters in Tableau. Since LOD calculations modify the aggregation levels based on the view, the filters applied in the view are executed based on the kind of LOD calculation applied. The following chart describes how filters are executed in the view:</p>
			<div><div><img src="img/B16342_09_29.jpg" alt="Figure 9.29: Order of filter execution&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.29: Order of filter execution</p>
			<p>These are defined in greater detail below:</p>
			<ul>
				<li><strong class="bold">Extract Filters</strong>: Extract filters are applied when you extract the data, as highlighted in the following figure:</li>
			</ul>
			<div><div><img src="img/B16342_09_30.jpg" alt="Figure 9.30: Adding an extract filter&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.30: Adding an extract filter</p>
			<p>Extract filters are executed before LOD calculations.</p>
			<ul>
				<li><strong class="bold">Data Source Filters</strong>: These filters are applied when you add data in the Data Explorer tab, as highlighted in the following figure:</li>
			</ul>
			<div><div><img src="img/B16342_09_31.jpg" alt="Figure 9.31: Adding a data source filter&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.31: Adding a data source filter</p>
			<p>Like extract filters, data source filters are applied before the LOD calculations execute.</p>
			<ul>
				<li><strong class="bold">Context filters</strong>: A context filter is an independent filter type that dictates which values will be available in other filters in the view. It creates a data partition, that ensures the next filters are loaded with only the partitioned data, rather than the entire dataset's values. To add a filter on context, click the dropdown and select Add to Context, as follows:</li>
			</ul>
			<div><div><img src="img/B16342_09_32.jpg" alt="Figure 9.32: Final filter to context&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.32: Final filter to context</p>
			<p>Context filters  execute before LOD calculations. As good practice, to ensure that the LOD calculations work properly, make sure you add all filters to <code>Context</code>. </p>
			<ul>
				<li><strong class="bold">Dimension filters</strong>: Dimension filters are related to dimensions added to the Filters shelf. Fixed LOD calculations execute before dimension filters. INCLUDE/EXCLUDE LOD calculations execute after dimension filters.</li>
				<li><strong class="bold">Measure and table calculation filters</strong>: These two filters execute after all LOD calculations execute.</li>
			</ul>
			<p>Now you have learned about the execution process of LOD calculations, you will also learn about some limitations of them. These are some of the major limitations of LOD calculations:</p>
			<ul>
				<li>Some data sources such as Microsoft Access, Microsoft Jet-based connections (connectors for Microsoft Excel, Microsoft Access, and Cubes) might not support LOD calculations.</li>
				<li>When using LOD calculations with data blending, the linking field from the primary data source must be available in the view before you can use LOD calculations from the secondary data source, or else it might not work.</li>
				<li>LOD calculations are not shown on the Data Explorer tab. Hence, you won't be able to add filters to these LOD calculations.</li>
				<li>When using a parameter inside a LOD calculation, you must reference it by the parameter name, and not by the value, else you may get an incorrect output.</li>
			</ul>
			<p>Now you have learned about LOD calculations, it is time to work through some activities that may come up in real-world situations.</p>
			<h2 id="_idParaDest-269"><a id="_idTextAnchor297"/>Activity 9.01: Identifying the Top-Performing Sales Executives</h2>
			<p>Imagine you are a data visualizer at the ABC Marketing company, and have been tasked with identifying the top performers in a segment. You have been provided with a dataset containing the details of all sales executives' names, the city and state they work in, and order details for sales, including the order ID and order date.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">You can find the dataset used for this activity in the GitHub repository for this chapter at <a href="https://packt.link/v7C3u">https://packt.link/v7C3u</a>.</p>
			<p>To complete this activity, you must identify the sales representatives who have the highest sales values in each city. This activity serves to strengthen your knowledge of LOD calculations, and will give you the chance to apply what you have learned to real-world use cases. </p>
			<p>The following steps will help you complete this activity:</p>
			<ol>
				<li value="1">Open the dataset in your Tableau instance.</li>
				<li>The data should consist of <code>Order ID</code>, <code>Order Date</code>, the name of the sales executives, <code>State</code>, <code>City</code>, and the number of sales. You need to identify the top sales executives in each city using a <code>FIXED</code> LOD calculation.</li>
				<li>Create a view consisting of <code>State</code>, <code>City</code>, <code>Sales Executive</code>, <code>Order ID</code>, and <code>SUM(Sales)</code>. Use the sorting option to sort this in descending order of <code>SUM(Sales)</code>. This view gives you an overall picture of the sales in different cities, along with order IDs, and the sales executive who sold that order.</li>
				<li>Identify the sales executives who sold the order with the highest sale amount. To do this, create a <code>FIXED</code> LOD calculation to identify orders with the maximum sales value per city and state.</li>
				<li>Once you have the maximum sales value, write another calculation to identify the sales executive who sold this order, using the preceding LOD calculation. Then, use this as a filter to show only the sales executives with the maximum sales value in the view. The final output should list all states and cities, along with the sales executive's name and sales amount.</li>
			</ol>
			<p>The initial view will look like the following:</p>
			<div><div><img src="img/B16342_09_33.jpg" alt="Figure 9.33: Activity 1 initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.33: Activity 1 initial view</p>
			<p>The final output will look like the following:</p>
			<div><div><img src="img/B16342_09_34.jpg" alt="Figure 9.34: Activity 1 final view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.34: Activity 1 final view</p>
			<p>In this activity, you identified the top sales performers using a <code>FIXED</code> LOD calculation. This activity emulates a real-world application, where you are required to identify top-performing instances in categories, such as top-selling products. By changing the dimensions in the LOD expression, you can change the way the view gets computed, thus reusing the same concept across various dimensions in the data.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The solution to this activity can be found here: <a href="https://packt.link/CTCxk">https://packt.link/CTCxk</a>.</p>
			<h2 id="_idParaDest-270"><a id="_idTextAnchor298"/>Activity 9.02: Performing a Comparative Analysis</h2>
			<p>Another common use case in any data visualization project, is to show comparisons based on parameters between different dimensions. For example, in a fast-food chain, some products sell more than others. By identifying such patterns, you can further analyze the reason for those sales, and strategize accordingly. This could mean introducing new products based on the best-selling ones, creating combo offers, etc. In the following activity, you will work on the food item dataset. You will perform a comparison between the cooking times for the various food items. </p>
			<p>This activity serves to strengthen your knowledge of LOD calculations using comparative analysis. Before starting the activity, you must first understand the data. The data contains information about the food items such as name, diet (<code>veg</code> or <code>non-veg</code>), <code>cook_time</code> , flavor type (which contains sweet, sour, spicy, or bitter), and course type (such as starter, snack, main course, or dessert).</p>
			<p class="callout-heading">Note</p>
			<p class="callout">You can find the dataset to be used for this activity at <a href="https://packt.link/Ie1Ta">https://packt.link/Ie1Ta</a>.</p>
			<p>Follow these steps to complete the activity:</p>
			<ol>
				<li value="1">Open the dataset for this activity in your Tableau instance.</li>
				<li>The data consists of the food dish name, diet, cook time, flavor type, and course type. Here, you need to compare the cooking time for different dishes. For this activity, you will only compare the cooking time for the desserts.</li>
				<li>Create a view with the dish name and cooking time in a bar chart.</li>
				<li>Create a parameter selection containing dishes in the dessert category. First, you need to create a calculation to check whether the dish is a dessert. If it is, keep the dish, else it can be discarded. Then, use this calculation as the input to the parameter. </li>
				<li>Create an <code>EXCLUDE</code> LOD calculation to keep only the cooking time for the selected dish. If no dish is selected, the cooking time should be <code>0</code>. By doing this, you are creating a baseline with which to compare the other dishes' cooking times.</li>
				<li>Create another calculation that gives the difference of cooking time of all other dishes compared to the selected dish. This calculation shows whether other dishes cook faster (or not) than the selected dish.</li>
				<li>Add this calculation to the initial view. Now you can easily compare the cooking times of the selected dish against all the other dishes in the dataset. </li>
			</ol>
			<p>The initial view will look like the following:</p>
			<div><div><img src="img/B16342_09_35.jpg" alt="Figure 9.35: Activity 2 initial view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.35: Activity 2 initial view</p>
			<p>The final output should look like the following:</p>
			<div><div><img src="img/B16342_09_36.jpg" alt="Figure 9.36: Activity 2 final view&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 9.36: Activity 2 final view</p>
			<p>In this activity, you compared the cooking time of various dishes using the <code>EXCLUDE</code> LOD calculation. This activity acts as a reference point to learn about real-world applications, where it is required to compare categories based on the various measure values associated with them.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The solution to this activity can be found here: <a href="https://packt.link/CTCxk">https://packt.link/CTCxk</a>.</p>
			<h1 id="_idParaDest-271"><a id="_idTextAnchor299"/>Summary</h1>
			<p>In this chapter, you learned  about the different types of LOD calculations. You learned how LOD calculations are executed internally, and saw how different components used in the view, such as filters, are executed, and how these affect the LOD calculation output. </p>
			<p>The key benefit of LOD calculations is that they allow you to control aggregation levels in data without adding or removing components in the view. This can help identify trends at different levels of granularity within your dataset.</p>
			<p>LOD calculations greatly enhance data analysis, and allow analysts to control the granularity of analysis or visualization. In the next chapter, you will combine all you have learned so far, and will begin to create storyboards and dashboards in Tableau.</p>
		</div>
	</body></html>