- en: Chapter 3. Presenting Data on a Print Map
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3章。在打印地图上展示数据
- en: Print maps are a great tool for sharing your spatial information because they
    can be included in presentations, publications, and reports as high-quality graphics
    or printed in a conventional way. QGIS has powerful capabilities of creating single-page
    or multipage (so-called atlases) maps that you can export in multiple, easy-to-distribute,
    and print graphical formats (for example, .pdf, .png, .svg, and so on).
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 打印地图是分享您空间信息的一个很好的工具，因为它们可以作为高质量的图形包含在演示文稿、出版物和报告中，或者以传统方式打印。QGIS具有创建单页或多页（所谓的大地志）地图的强大功能，您可以将其导出为多种易于分发和打印的图形格式（例如，.pdf、.png、.svg等）。
- en: In this chapter, you will be exposed to QGIS's main tool for creating print
    maps, called **print composer**, and will learn how to use it to get outstanding
    results.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将接触到QGIS创建打印地图的主要工具，称为**打印作曲**，并学习如何使用它以获得出色的结果。
- en: Print composer
  id: totrans-3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 打印作曲
- en: With print composer, map designing becomes easy and intuitive, as it allows
    you to set up a layout and add a map and its necessary elements, such as text
    labels, the legend, the scale bar, and the north arrow. Moreover, you can significantly
    enliven your map by combining multiple overviews, images, drawings, and HTML labels.
    To simplify map generation and save your time, you can use map templates and the
    atlas generator functionality.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 使用打印作曲，地图设计变得简单直观，因为它允许您设置布局并添加地图及其必要的元素，例如文本标签、图例、比例尺和指向北方的箭头。此外，您可以通过结合多个概述、图像、绘图和HTML标签来显著增强您的地图。为了简化地图生成并节省您的宝贵时间，您可以使用地图模板和大地志生成器功能。
- en: To enter print composer mode, go to **Project** | **New Print Composer** from
    the menu, click on the ![Print composer](img/image00363.jpeg) button on the **File**
    toolbar, or just use the *Ctrl* + *P* keyboard shortcut. In the **Composer title**
    dialog window, you will be asked to give a title to your map. Click on the **OK**
    button for the title to be generated automatically (`Composer 1`, `Composer 2`,
    `Composer 3`, and so on; you will be able to rename them later if you want).
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 要进入打印作曲模式，请从菜单中选择**项目** | **新建打印作曲**，点击**文件**工具栏上的![打印作曲](img/image00363.jpeg)按钮，或者直接使用*Ctrl*
    + *P*键盘快捷键。在**作曲标题**对话框窗口中，您将被要求为您的地图提供一个标题。点击**确定**按钮，标题将自动生成（例如`作曲 1`、`作曲 2`、`作曲
    3`等；如果您想的话，稍后可以重命名它们）。
- en: 'In the upper row of the print composer window, there are drop-down menus that
    provide access to its options and functionality. The upper row of toolbars provides
    quick-access buttons for the same functionality. Note that the **Composer Items**
    toolbar is, by default, placed separately on the left side of the window because
    it provides quick access to all elements that are usually necessary to constitute
    a map, for example, a map canvas, a legend, a scale bar, labels, annotations,
    and so on. In the central part of the window, you can see an empty page that represents
    the composer canvas available for item arrangement, as shown here:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在打印作曲窗口的上行中，有下拉菜单，提供访问其选项和功能。工具栏的上行提供了快速访问相同功能的按钮。请注意，**作曲项**工具栏默认放置在窗口的左侧，因为它提供了快速访问通常构成地图所需的所有元素，例如地图画布、图例、比例尺、标签、注释等。在窗口的中央部分，您可以看到一个空白的页面，它代表可用于项目排列的作曲画布，如图所示：
- en: '![Print composer](img/image00364.jpeg)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![打印作曲](img/image00364.jpeg)'
- en: 'In the right part of the print composer window, there are two panels with tabs.
    The upper panel holds the following tabs:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在打印作曲窗口的右侧，有两个带有标签的面板。上方面板包含以下标签页：
- en: '**Items**: This displays the list of map items added to the map. It allows
    you to define their visibility, rename, reorder, and lock them for changes.'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**项**：这显示添加到地图中的地图项列表。它允许您定义它们的可见性、重命名、重新排序并将它们锁定以防止更改。'
- en: '**Command history**: This displays the list of commands used. With the history,
    you can easily roll back changes and have better control over the process of map
    generation.'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**命令历史记录**：这显示使用的命令列表。使用历史记录，您可以轻松回滚更改，并更好地控制地图生成过程。'
- en: 'The lower panel holds three tabs, as follows:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 下方面板包含三个标签页，如下所示：
- en: '**Composition**: This is responsible for **Paper and quality** (page size,
    number, and resolution) and **Guides and Grid** (spacing and snapping tolerance)
    so as to simplify map item placement.'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**组合**：这负责**纸张和质量**（页面大小、数量和分辨率）以及**指南和网格**（间距和吸附容差），以便简化地图项的放置。'
- en: '**Item properties**: This is a dynamic tab whose contents changes automatically,
    depending on the map item currently selected.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**项目属性**：这是一个动态标签页，其内容会根据当前选定的地图项目自动更改。'
- en: '**Atlas generation**: Once the **Generate an atlas** toggle is active, you
    can set and modify its parameters.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**图集生成**：一旦**生成图集**切换处于活动状态，您就可以设置和修改其参数。'
- en: Note
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: 'Note that it is only the default panels'' placement that can be rearranged.
    In order to change the panel/tab position, hover your mouse arrow over its perforated
    area, which looks like this:'
  id: totrans-16
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，只有默认面板的位置可以重新排列。为了更改面板/标签位置，将鼠标箭头悬停在它的穿孔区域上，它看起来像这样：
- en: '![Print composer](img/image00365.jpeg)'
  id: totrans-17
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![打印作曲家](img/image00365.jpeg)'
- en: 'Now, drag and drop it at another place. You can also close any unnecessary
    panel by clicking on the button in its top-right corner. Also, panels can be turned
    on or off with the toggles that become available after right-clicking on the menu
    or the toolbar''s panel, that is, when you see something like this:'
  id: totrans-18
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在，将其拖放到另一个位置。您还可以通过点击右上角按钮关闭任何不必要的面板。此外，您可以通过在菜单或工具栏面板上右键单击后可用的切换来打开或关闭面板，即当您看到类似以下内容时：
- en: '![Print composer](img/image00366.jpeg)'
  id: totrans-19
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![打印作曲家](img/image00366.jpeg)'
- en: You can get additional control over composer settings from its **Composer Options**
    menu, which can be found under **Settings**. For example, you might want to change
    the **Default font** that will be used for the legend and text labels. For further
    work in the **Grid appearance** section, we set **Grid style** to **Solid** and
    leave **Grid and guide defaults** unchanged, as we will configure them later.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过其**Composer选项**菜单获取对作曲设置的控制，该菜单位于**设置**下。例如，您可能想更改用于图例和文本标签的**默认字体**。在**网格外观**部分进行进一步工作，我们将**网格样式**设置为**实线**，并保持**网格和引导默认值**不变，因为我们将在稍后进行配置。
- en: The initial setup – page format and other essentials
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 初始设置 - 页面格式和其他基本设置
- en: 'Before creating the map, we should set up our working space, which is mainly
    defined by page settings. All the necessary options are present under the **Composition**
    tab. Let''s take a closer look at the **Paper and quality** section. The default
    page size in the **Presets** drop-down list is **A4**, but you can select from
    among 23 other sizes. We are going to create our own page by performing the following
    steps:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建地图之前，我们应该设置我们的工作空间，这主要是由页面设置定义的。所有必要的选项都位于**编排**标签下。让我们更仔细地看看**纸张和品质**部分。在**预设**下拉列表中的默认页面大小是**A4**，但您可以从23种其他大小中选择。我们将通过以下步骤创建自己的页面：
- en: Select **Custom** from the list.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从列表中选择**自定义**。
- en: The **Width** and **Height** fields will be activated. Enter a value of `200`
    for both of them (this means that we are going to create a square page for a map
    composition). The value depends on the units chosen in **Units**, and by default,
    it is set to **mm** (millimeters).
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**宽度**和**高度**字段将被激活。为两者输入`200`的值（这意味着我们将为地图编排创建一个方形页面）。该值取决于在**单位**中选择的单位，默认情况下设置为**毫米**（毫米）。'
- en: As we are going to create only one map, we leave **Number of pages** as 1, but
    you can always enter more if you're going to combine several pages into one document.
    This is because you could have several maps in a single-page composition. As shown
    in the example, we're using a square page. So, it doesn't matter whether it has
    the **Portrait** or **Landscape** page orientation. **Page background** is a very
    important item as it allows you to achieve cool cartographic visualization effects.
    By clicking on the **Change** button, you can see that, by default, it is set
    to **Simple fill** with white color (which we are going to use). However, you
    can change it and select from among multiple filling options to create an original
    filling pattern.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们只创建一张地图，我们将**页数**保留为1，但如果您打算将多个页面合并成一个文档，您始终可以输入更多。这是因为您可以在单页编排中包含多个地图。如图例所示，我们使用的是方形页面。因此，它是否有**纵向**或**横向**页面方向无关紧要。**页面背景**是一个非常重要的项目，因为它允许您实现酷炫的地图可视化效果。通过点击**更改**按钮，您可以看到默认情况下，它设置为**简单填充**，颜色为白色（我们将使用它）。但是，您可以更改它，并从多个填充选项中选择以创建独特的填充图案。
- en: Tip
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: For example, you can find nice raster or SVG textures and use them as background
    patterns by selecting **Raster image fill** or **SVG fill** respectively. Otherwise,
    you can select **Gradient** or **Shapeburst fill** to play around with some color
    grading effects.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，您可以选择漂亮的栅格或SVG纹理，并通过选择**栅格图像填充**或**SVG填充**分别将它们用作背景图案。否则，您可以选择**渐变**或**形状爆发填充**来尝试一些色彩分级效果。
- en: '**Export resolution** defines the quality of the exported map in dpi units.
    The higher this value, the better the map. However, the resulting file will also
    be bigger. For common purposes, such as publications, reports, and presentation
    graphics, `300 dpi` is enough. When the **Print as raster** toggle is active,
    the entire composition is converted into raster before exporting to `.pdf`. The
    **World file on** toggle allows you to attach a `.wld` file that contains information
    about a geographic reference to the image export output. This means that your
    map can not only be viewed in graphical or preview software, but can also be opened
    and aligned properly directly in GIS software.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '**导出分辨率**定义了导出地图的dpi单位质量。此值越高，地图越好。然而，生成的文件也会更大。对于常见的用途，如出版物、报告和演示图形，`300 dpi`就足够了。当**打印为栅格**切换处于活动状态时，整个作品在导出为`.pdf`之前被转换为栅格。**世界文件打开**切换允许您将包含地理参考信息的`.wld`文件附加到图像导出输出。这意味着您的地图不仅可以用于图形或预览软件，还可以直接在GIS软件中打开并正确对齐。'
- en: 'Now, we will adjust the grid that will be used to align map items within a
    map layout:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将调整用于在地图布局中对齐地图元素的网格：
- en: In the **Guides and Grid** section, enter `5` mm as the **Grid spacing** value
    to make it denser, and set **Snap tolerance** to `10` pixels (the higher the value,
    the stronger the snapping).
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**指南和网格**部分，将**网格间距**值设置为`5`毫米以使其更密集，并将**吸附容差**设置为`10`像素（值越高，吸附力越强）。
- en: To show the grid, activate the **Show grid** button, which is under **View**,
    or use the *Ctrl* + *'* keyboard shortcut.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要显示网格，请激活位于**视图**下的**显示网格**按钮，或者使用*Ctrl* + *'*键盘快捷键。
- en: Toggle **Snap to grid**, which is under **View**, or pressing *Ctrl* + *Shift*
    + *'* activates snapping.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 切换**吸附到网格**，它位于**视图**下，或按*Ctrl* + *Shift* + *'*激活吸附。
- en: Tip
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Instead of using a predefined grid, you can create your own guidelines by placing
    the mouse arrow over horizontal (for vertical guidelines) or vertical (for horizontal
    guidelines) ruler bars and clicking and dragging them along the page canvas. Deactivate
    **Snap to Grid** and use various options from the **View** menu such as **Show/Clear**
    or **Snap to Guides**. The **Smart Guides** option helps you detect the best placement
    position automatically based on the other items in your composition.
  id: totrans-34
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 除了使用预定义的网格外，您还可以通过将鼠标箭头放在水平（用于垂直指南）或垂直（用于水平指南）的标尺栏上，并点击并沿页面画布拖动它们来创建自己的指南。禁用**吸附到网格**，并使用**视图**菜单中的各种选项，如**显示/清除**或**吸附到指南**。**智能指南**选项可以帮助您根据您作品中的其他项目自动检测最佳放置位置。
- en: Adding and customizing a map
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加和自定义地图
- en: 'In this section, we are going to create a population map of the Brooklyn borough.
    Make sure that in the main window, the following layers are active: `Brooklyn
    borough boundaries`, `zipcode` (with the population style), `NY borough boundaries`,
    and `water area`.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将创建布鲁克林区的人口地图。请确保在主窗口中，以下图层处于活动状态：`布鲁克林区边界`、`zipcode`（带有人口样式）、`NY区边界`和`水域区域`。
- en: To add a map to your print layout, click on the **Add new map** ![Adding and
    customizing a map](img/image00367.jpeg) button in the **Composer Items** toolbar,
    and drag the mouse arrow diagonally over the page while holding down the left
    mouse button. You will see a rectangle drawn on the page and a map inside it.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 要将地图添加到您的打印布局中，请点击**作曲项目**工具栏中的**添加新地图** ![添加和自定义地图](img/image00367.jpeg) 按钮，并按住鼠标左键的同时，将鼠标箭头以对角线方式拖动到页面上。您将在页面上看到一个矩形，并在其中看到一个地图。
- en: Note
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that the content of the map changes dynamically to reflect the content
    of the map canvas in the main window. This means that if you turn on/off some
    layers in the main window, or change their styling, the map in the print composer
    window will be changed too. If you don't see the changes, click on the **Refresh
    view** ![Adding and customizing a map](img/image00368.jpeg) button to update the
    map. We will discuss how to suppress this behavior soon.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，地图的内容会动态变化，以反映主窗口中地图画布的内容。这意味着，如果您在主窗口中打开/关闭某些图层或更改它们的样式，打印作曲家窗口中的地图也会发生变化。如果您看不到变化，请点击**刷新视图**![添加和自定义地图](img/image00368.jpeg)按钮以更新地图。我们很快将讨论如何抑制这种行为。
- en: The map frame can be moved or resized by dragging the special squared markers
    on the borders' centers and corners. If you don't see the frame and markers, it
    means that the current item is inactive. To activate it, click on the **Select/Move
    item** ![Adding and customizing a map](img/image00369.jpeg) button in the **Composer
    Items** toolbar. If you want to move a map inside the frame, use the **Move item
    content** button, ![Adding and customizing a map](img/image00370.jpeg), in the
    **Composer Items** toolbar. Also, as long as this button is active, you can zoom
    into the map with the mouse wheel (or with *Ctrl* and the mouse wheel). Using
    markers, extend the map in such a way that it covers the whole page.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过拖动边框中心和角落的特殊方形标记来移动或调整地图框架的大小。如果您看不到框架和标记，这意味着当前项目是无效的。要激活它，请点击**作曲家项目**工具栏中的**选择/移动项目**![添加和自定义地图](img/image00369.jpeg)按钮。如果您想在框架内移动地图，请使用**作曲家项目**工具栏中的**移动项目内容**按钮，![添加和自定义地图](img/image00370.jpeg)。此外，只要此按钮处于活动状态，您就可以使用鼠标滚轮（或使用*Ctrl*和鼠标滚轮）放大地图。使用标记，以覆盖整个页面的方式扩展地图。
- en: After placing the map properly, we can proceed to the advanced options on the
    **Item properties** tab. The tab brings together several sections that can be
    expanded or collapsed by clicking on the ![Adding and customizing a map](img/image00371.jpeg)
    symbol beside them.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在正确放置地图后，我们可以转到**项目属性**选项卡上的高级选项。此选项卡汇集了几个可以通过点击它们旁边的![添加和自定义地图](img/image00371.jpeg)符号来展开或折叠的分区。
- en: 'The **Main properties** section allows you to select from the following map
    preview modes:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**主要属性**部分允许您从以下地图预览模式中选择：'
- en: '**Cache**: This renders the map in the current screen resolution, which will
    not change while zooming in/out, but the image itself will be scaled properly.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**缓存**: 此模式将在当前屏幕分辨率下渲染地图，在缩放时不会改变，但图像本身将被适当地缩放。'
- en: '**Render**: The map resolution will be adjusted to the maximum value while
    zooming. This mode gives better a preview picture, but is slower comparing to
    **Cache**.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**渲染**: 在缩放时，地图的分辨率将调整到最大值。此模式提供了更好的预览图片，但与**缓存**模式相比，速度较慢。'
- en: '**Rectangle**: Instead of a map, a `Map will be printed here` message will
    be shown in an empty box.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**矩形**: 代替地图，将在一个空框中显示`Map will be printed here`消息。'
- en: 'When you enter some values in the **Scale** field, the map extent changes dynamically.
    Set its value to `100000` and use the **Move item content** ![Adding and customizing
    a map](img/image00370.jpeg) button to locate map within frame properly. The following
    screenshot shows you how the tab **Item properties** looks like at this stage:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 当您在**比例**字段中输入一些值时，地图范围会动态变化。将其值设置为`100000`，并使用**移动项目内容**![添加和自定义地图](img/image00370.jpeg)按钮将地图正确地定位在框架内。以下截图显示了此阶段**项目属性**选项卡的外观：
- en: '![Adding and customizing a map](img/image00372.jpeg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![添加和自定义地图](img/image00372.jpeg)'
- en: 'With the **Map rotation** field, you can define an angle in degrees to rotate
    the map clockwise within its frame. Note that the angle of rotation will be applied
    automatically to the grid lines to adjust them properly with respect to the map''s
    content. There are three toggles and they provide the following options:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 使用**地图旋转**字段，您可以定义一个角度（以度为单位），在地图的框架内顺时针旋转地图。请注意，旋转角度将自动应用于网格线，以适当地调整它们与地图内容的关系。有三个切换按钮，它们提供以下选项：
- en: When the **Draw map canvas items** toggle is activated, existing annotations
    from the main map canvas window will be added to the map.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当**绘制地图画布项目**切换按钮被激活时，主地图画布窗口中的现有注释将被添加到地图中。
- en: The **Lock layers for map item** option is very useful if you don't want your
    print map to reflect changes made in the main map canvas window. So, the layers
    will remain the same, but their styling and labeling will change according to
    the main window. We activate this option because we don't want the composition
    of layers to be changed.
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您不希望打印地图反映主地图画布窗口中做出的更改，**锁定地图项图层**选项非常有用。因此，图层将保持不变，但它们的样式和标签将根据主窗口进行更改。我们激活此选项是因为我们不希望图层组合发生变化。
- en: '**Lock layer styles for map item** blocks the map item from style changes made
    in the main map canvas window. Activate this option too. Jointly applied with
    the previous option, it allows us to block the composer map from changes made
    in the main map canvas window (that is, the layers'' style and composition).'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**锁定地图项图层样式**阻止地图项在主地图画布窗口中做出的样式更改。也要激活此选项。与上一个选项一起应用，它允许我们阻止作曲图从主地图画布窗口中的更改（即图层的样式和组合）。'
- en: On the right-hand side of the toggles, there is a **Set layer list from a visibility
    preset** button, ![Adding and customizing a map](img/image00373.jpeg). This button
    allows us to quickly define map item content from the visibility presets on the
    toolbar of the **Layers** panel. To load a preset, click on the small triangular
    arrow in the bottom-right corner of the button, and select the preset you want
    to show on the map. The map's content will be changed according to the preset
    and the layers will be locked automatically.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在切换按钮的右侧，有一个**从可见性预设设置图层列表**按钮，![添加和自定义地图](img/image00373.jpeg)。此按钮允许我们从**图层**面板的工具栏上的可见性预设中快速定义地图项内容。要加载预设，请点击按钮右下角的小三角形箭头，并选择要在地图上显示的预设。地图的内容将根据预设和图层自动锁定。
- en: 'The **Extents** section provides various options to define and adjust the map
    item''s extent:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '**范围**部分提供了各种选项来定义和调整地图项的范围：'
- en: Manual definition, by entering **X** and **Y** values in the correspondent fields.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 手动定义，通过在相应字段中输入**X**和**Y**值。
- en: '**Set to map canvas extent**: The current map extent will become the same as
    the extent of the main map canvas window.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**设置为地图画布范围**：当前地图范围将变为与主地图画布窗口的范围相同。'
- en: '**View extent in map canvas**: This does exactly the opposite of the previous
    button. It changes the map canvas extent in the main window according to the current
    map item extent.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在地图画布中查看范围**：这与上一个按钮正好相反。它根据当前地图项范围更改主窗口中的地图画布范围。'
- en: The **Controlled by atlas** section will be covered later, when we talk about
    atlas generation in the *Creating atlases* section.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '**由图集控制**部分将在我们讨论*创建图集*部分中的图集生成时再进行介绍。'
- en: The **Grids** section allows you to add coordinate grids and frames to the map
    frame. To add a new grid, click on the ![Adding and customizing a map](img/image00374.jpeg)
    button and adjust its main properties, such as **Grid type**, **Interval**, **Grid
    frame**, **Coordinates**, and so on.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '**网格**部分允许您向地图框架中添加坐标网格和框架。要添加新的网格，请点击![添加和自定义地图](img/image00374.jpeg)按钮，并调整其主要属性，如**网格类型**、**间隔**、**网格框架**、**坐标**等。'
- en: Tip
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: You can combine multiple grids that use different coordinate reference systems
    within a single map item. Just add one more grid. Then, in the **Draw "Grid 2"
    grid** section, click on the **Change** button beside **CRS** and select the CRS
    you want to use. A common use case of this option is to combine a projected CRS,
    which uses linear measurement units (feet and meter), with a geodetic CRS, which
    provides latitude and longitude coordinates in degrees.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在单个地图项内组合使用不同坐标参考系统的多个网格。只需添加一个额外的网格。然后，在**绘制“网格2”网格**部分中，点击**CRS**旁边的**更改**按钮，并选择您想要使用的CRS。此选项的常见用例是将投影CRS（使用线性测量单位，如英尺和米）与提供经纬度坐标的地理CRS（以度为单位）组合。
- en: The **Overviews** section allows you to combine multiple overviews in various
    scales into a single map composition. This will be covered later, in the *Working
    with map overviews* section.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**概述**部分允许您将不同比例的多个概述组合成单个地图组合。这将在*使用地图概述*部分中稍后介绍。'
- en: 'The following sections are common for various map items:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分适用于各种地图项：
- en: The **Position and size** section allows you to define the size of the item
    frame in page units. **Reference point** decides which corner of the item is specified
    by the X and Y positions.
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**位置和大小**部分允许您以页面单位定义项目框架的大小。**参考点**决定X和Y位置指定的是项目的哪个角落。'
- en: The **Rotation field** values set the item's rotation angle in degrees.
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**旋转字段**值设置项目的旋转角度（以度为单位）。'
- en: The **Frame** toggle enables the frame around the item, and provides access
    to its options, such as **Frame color**, **Thickness**, and **Join style**.
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**框架**切换按钮启用项目周围的框架，并提供访问其选项，例如**框架颜色**、**厚度**和**连接样式**。'
- en: '**Background** is responsible for the frame''s fill color.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**背景**负责框架的填充颜色。'
- en: '**Item ID** can be used with web clients to create links between map items,
    and also for easier identification of specific items within the **Items** panel.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**项目 ID**可用于与网络客户端创建地图项之间的链接，并且也便于在**项目**面板中识别特定项目。'
- en: '**Rendering** provides access to the **Blending mode** and **Transparency**
    options that allow us to apply professional graphics affects.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**渲染**提供了访问**混合模式**和**透明度**选项，这些选项允许我们应用专业的图形效果。'
- en: Adding and customizing a legend
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加和自定义图例
- en: A legend is a necessary element in any map. It provides explanations of the
    layers' symbology and helps us read and understand the map. To add a legend, click
    on the **Add a new legend** ![Adding and customizing a legend](img/image00375.jpeg)
    button in the **Composer Items** toolbar, and drag the mouse arrow diagonally
    over the page while holding down the left mouse button. You will see a rectangle
    drawn on the page and a legend inside it. By default, all layers in the project
    will be included in the legend, so it may look too big to fit the layout. With
    the legend item selected, you can use the **Item properties** tab to customize
    its content and appearance. There are several legend-specific sections that should
    be discussed.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图例是任何地图的必要元素。它解释了图层的符号，并帮助我们阅读和理解地图。要添加图例，请点击**作曲家项目**工具栏中的**添加新图例** ![添加和自定义图例](img/image00375.jpeg)
    按钮，并按住鼠标左键的同时，用鼠标箭头斜向拖动页面。您将在页面上看到一个矩形，其中包含一个图例。默认情况下，项目中的所有图层都将包含在图例中，因此它可能看起来太大，无法适应布局。选择图例项后，您可以使用**项目属性**选项卡来自定义其内容和外观。有几个特定的图例部分应该讨论。
- en: 'The **Main properties** section allows you to customize the following options:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '**主要属性**部分允许您自定义以下选项：'
- en: '**Title**: By default, the `Legend` title is used, but you can type any other
    text here, or leave the field empty to remove the title.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标题**：默认情况下，使用`图例`标题，但您可以在此处输入任何其他文本，或者留空以删除标题。'
- en: '**Title alignment**: This can align the title to **Left**, **Center**, or **Right**.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标题对齐**：这可以将标题对齐到**左对齐**、**居中对齐**或**右对齐**。'
- en: '**Map**: By default, there is only **Map 0** available, but if you combine
    several maps within a single page layout, you can decide which map the legend
    will refer to.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**地图**：默认情况下，只有**地图 0**可用，但如果您在单个页面布局中组合多个地图，您可以决定图例将引用哪个地图。'
- en: '**Wrap text on**: Type here a symbol that will be used to separate long lines
    into shorter chunks of text. Later, you can edit text in the legend item and insert
    this symbol wherever necessary to forcibly start a new line.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在**此处**换行**：在此处输入一个符号，该符号将用于将长行文本分割成较短的文本块。稍后，您可以在图例项中编辑文本并在此符号处插入，以强制开始新的一行。'
- en: 'The **Legend items** section is responsible for the content of the legend.
    By default, the **Auto update** mode is active, and all available layers are loaded
    into the legend. Turn the **Auto update** mode off and the buttons below the legend
    contents tree will be activated, providing the following options (from left to
    right):'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '**图例项**部分负责图例的内容。默认情况下，**自动更新**模式处于活动状态，所有可用图层都加载到图例中。关闭**自动更新**模式后，图例内容树下面的按钮将被激活，提供以下选项（从左到右）：'
- en: The **down**![Adding and customizing a legend](img/image00376.jpeg) and **up**![Adding
    and customizing a legend](img/image00377.jpeg) buttons are used to move items
    and change their order. Otherwise, you can simply drag and drop an item at a new
    position. After any changes the legend's item content is immediately updated.
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**向下**![添加和自定义图例](img/image00376.jpeg) 和 **向上**![添加和自定义图例](img/image00377.jpeg)
    按钮用于移动项并更改它们的顺序。否则，您可以直接拖放项到新位置。任何更改后，图例的项内容将立即更新。'
- en: The **add group**![Adding and customizing a legend](img/image00378.jpeg) button
    allows you to add new groups and subgroups to develop a legend hierarchy.
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加组**![添加和自定义图例](img/image00378.jpeg) 按钮允许您添加新组和子组以构建图例层次结构。'
- en: The **plus**![Adding and customizing a legend](img/image00374.jpeg) and **minus**![Adding
    and customizing a legend](img/image00379.jpeg) buttons are responsible for adding
    and removing any item, whether it is a group or a layer. Note that only layers
    active in the main map canvas window are available for adding.
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**加号**![添加和自定义图例](img/image00374.jpeg) 和 **减号**![添加和自定义图例](img/image00379.jpeg)
    按钮负责添加和删除任何项，无论是组还是图层。请注意，只有主地图画布窗口中激活的图层才可用于添加。'
- en: The **edit**![Adding and customizing a legend](img/image00380.jpeg) button allows
    us to change the text for any selected item (group, subgroup, layer, or symbology
    label). For example, if you want a long line to be wrapped, insert in the text
    symbol defined in the **Main properties** section. These changes are applied only
    within a **print composer legend** item and don't affect map items in the main
    window.
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**编辑**![添加和自定义图例](img/image00380.jpeg) 按钮允许我们更改任何选定项（组、子组、图层或符号标签）的文本。例如，如果您想将长行换行，可以在
    **主属性** 部分定义的文本符号中插入。这些更改仅应用于 **打印作曲家图例** 项，不会影响主窗口中的地图项。'
- en: The **sum**![Adding and customizing a legend](img/image00381.jpeg) button shows
    the feature count for each class of the vector layer.
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**总和**![添加和自定义图例](img/image00381.jpeg) 按钮显示矢量图层每个类的要素计数。'
- en: The **filter**![Adding and customizing a legend](img/image00382.jpeg) button
    filters the legend by map content; that is, only the legend items (layers and
    classes) that are shown in the map item will be included in the legend.
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**过滤**![添加和自定义图例](img/image00382.jpeg) 按钮通过地图内容过滤图例；也就是说，只有显示在地图项中的图例项（图层和类）将被包括在图例中。'
- en: In the **Fonts** section, you can define a common color and different fonts
    for the title, subgroups, groups, and items to enhance the legend's readability.
    If the legend contains many items and is too long to be shown in a single column,
    it can be split in the **Columns** section. Here, you can define the number of
    columns in the **Count** field. By default, the column's width is adjusted according
    to the content. If you want it to be set equally for all columns, activate the
    **Equal column widths** toggle. If the **Split layers** mode is on, categorized
    layer symbology items will be allocated equally among columns; otherwise, categories
    are not allowed to be moved into another column. In the following screenshot,
    you can see how this works. At the top, there is a legend in which layer splitting
    is prohibited, and at the bottom, the categories are equally split between three
    columns.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在 **字体** 部分中，您可以定义标题、子组、组和项目的通用颜色和不同字体，以增强图例的可读性。如果图例包含许多项目并且太长而无法在单列中显示，它可以在
    **列** 部分中拆分。在这里，您可以在 **计数** 字段中定义列数。默认情况下，列宽根据内容进行调整。如果您希望所有列的宽度相等，请激活 **等宽列**
    切换。如果 **拆分图层** 模式开启，分类图层符号项将平均分配到各列；否则，不允许将类别移动到另一列。在下面的屏幕截图中，您可以查看这是如何工作的。顶部有一个不允许图层拆分的图例，底部类别在三个列中平均分配。
- en: '![Adding and customizing a legend](img/image00383.jpeg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![添加和自定义图例](img/image00383.jpeg)'
- en: 'In the **Symbol** section, the default **Width** and **Height** values can
    be modified manually. **WMS Legend Graphic** is used to add a legend for a WMS
    layer, but this is if it is supported and provided by the WMS server. In the dialog
    window, you can resize the legend width and height that is provided as a raster
    image. The **Spacing** section allows you to refine the legend''s layout and readability
    by adjusting the spaces between its various items: title, groups, subgroups, symbols,
    icon labels, bounding box, and columns.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在 **符号** 部分中，默认的 **宽度** 和 **高度** 值可以手动修改。**WMS图例图形** 用于为WMS图层添加图例，但这取决于WMS服务器是否支持并提供。在对话框窗口中，您可以调整作为栅格图像提供的图例宽度和高度。**间距**
    部分允许您通过调整其各种项目（标题、组、子组、符号、图标标签、边界框和列）之间的空间来细化图例布局和可读性。
- en: Other sections, such as **Position and Size**, **Rotation**, **Frame**, **Background**,
    **Item ID**, and **Rendering**, provide the same options as those for the map
    item.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 其他部分，如 **位置和大小**、**旋转**、**框架**、**背景**、**项目ID** 和 **渲染**，提供与地图项相同的选项。
- en: Other map items
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他地图项
- en: 'For now, our map contains two necessary items: the map itself and the legend
    that explains its content. However, there are more items that can be used to improve
    its aesthetic view and geographic readability, such as a scale bar, a north arrow,
    text labels, and so on.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，我们的地图包含两个必要的项目：地图本身和解释其内容的图例。然而，还有更多项目可以用来改善其美学观感和地理可读性，例如刻度尺、指向北方的箭头、文本标签等。
- en: Scale bar
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 刻度尺
- en: Before adding a scale bar item, make sure that your map canvas is using the
    projected coordinate reference system in linear measurement units (meters and
    feet). To add a scale bar, click on the **Add new scalebar** ![Scale bar](img/image00384.jpeg)
    button in the **Composer Items** toolbar, and drag the mouse arrow over the page
    while holding down the left mouse button. You will see a rectangle drawn on the
    page and a scale bar inside it. With the scale bar item selected, use the **Item
    properties** tab to customize its appearance.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在添加刻度尺项目之前，请确保您的地图画布使用线性测量单位的投影坐标参考系统（米和英尺）。要添加刻度尺，请单击**作曲项目**工具栏中的**添加新刻度尺**
    ![刻度尺](img/image00384.jpeg) 按钮，并按住鼠标左键的同时将鼠标箭头拖动到页面上。您将在页面上看到一个矩形和一个刻度尺在其中。选择刻度尺项目后，使用**项目属性**选项卡来定制其外观。
- en: 'In the **Main properties** section, select a map to associate the scale bar
    with. As you will be working with only one map, **Map 0** will be set by default.
    The **Style** drop-down list defines the appearance of the scale bar:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在**主要属性**部分，选择一个地图以将其与刻度尺关联。由于您将只使用一个地图，**地图 0**将默认设置。**样式**下拉列表定义了刻度尺的外观：
- en: '**Single** or **Double Box** is responsible for scalebar appearance as a singular
    or double zebra box respectively'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**单框**或**双框**分别负责刻度尺以单个或双条纹框的形式出现的外观'
- en: '**Line Ticks Middle**, **Down**, or **Up** produce a simple horizontal line
    with tick marks on it for fixing scale units'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**线刻度中间**、**向下**或**向上**产生一个带有刻度标记的简单水平线，用于固定比例单位'
- en: '**Numeric** displays the scale as a numeric ratio'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数字**显示比例作为数字比例'
- en: Tip
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: A graphical scale bar is the right approach to represent scales on maps that
    appear as images in presentations, reports, and publications. It is advisable
    to use it instead of a numeric ratio scale because the graphical bar will be proportionally
    scaled during image resizing. If you still need to use a ratio scale, make sure
    that the image will be distributed in its original size.
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图形刻度尺是表示在演示文稿、报告和出版物中作为图像出现的地图比例的正确方法。建议使用它而不是数字比例尺，因为图形刻度尺在图像缩放时会按比例缩放。如果您仍然需要使用比例尺，请确保图像将以原始大小分布。
- en: 'For the purpose of this tutorial, select **Double Box Style**. The **Units**
    section is responsible for the right representation of measurement units:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 为了本教程的目的，请选择**双框样式**。**单位**部分负责正确表示测量单位：
- en: From the drop-down list, select the **Feet** projection measurement units. The
    scale bar will be converted into a bar that measures miles. Similarly, conversions
    are supported by **Meters** and **Nautical Miles**. **Map units** can use the
    original map units, but you will have to specify them.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉列表中选择**英尺**投影测量单位。刻度尺将转换为测量英里的条形。类似地，**米**和**海里**也支持转换。**地图单位**可以使用原始地图单位，但您必须指定它们。
- en: In the **Label** field, type in `mi` to use the abbreviation of measurement
    units (miles, in our case).
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**标签**字段中，输入`mi`以使用测量单位的缩写（在我们的例子中是英里）。
- en: '**Map units per bar unit** represents the ratio of map units to bar units.
    Enter the value as `5280` here, as we know that 1 mile is equal to 5,280 feet.'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**每条刻度线单位**表示地图单位与刻度线单位的比例。在此处输入`5280`，因为我们知道1英里等于5,280英尺。'
- en: 'Don''t worry about strange, collapsed appearance of your scale bar; we will
    fix it in the **Segments** section as explained:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 不要担心您的刻度尺看起来奇怪或折叠；我们将在**段**部分中修复它，如以下解释：
- en: In the **Size** section, you should enter the value to define how long a segment
    will be. If you want it to be 1 mile long, enter `5280`; to make it 2 miles long,
    enter `10560` (*5,280×2*); and so on. The principle is simple—just use the **Map
    units per** **bar unit** ratio that you entered in the **Main properties** section
    and multiply it by the number of scale bar units that should be in one segment.
    For the purpose of this tutorial, we will make one segment equal to 1 mile and
    enter a value of `5280`.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**大小**部分，您应该输入定义段长度的值。如果您想让它有1英里长，请输入`5280`；要让它有2英里长，请输入`10560`（*5,280×2*）；依此类推。原理很简单——只需使用**每****刻度单位****地图单位**比例，您在**主要属性**部分中输入的，并将其乘以应在一段中包含的刻度单位数。为了本教程的目的，我们将一个段设为1英里，并输入一个值为`5280`。
- en: In **Segments**, enter value `2` for **left** and `1` for **right**.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**段**中，为**左**输入值`2`，为**右**输入值`1`。
- en: Increase the scale bar's **Height** value to `5` mm.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将刻度尺的**高度**值增加到`5`毫米。
- en: 'In the **Display** section, you can customize the following scale bar properties:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在**显示**部分，您可以自定义以下刻度尺属性：
- en: '**Box margin**: The bigger this value, the longer the distance between the
    scale bar item ''s contents and the border of its bounding box.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**框边距**：此值越大，刻度尺项目内容与其边界框边界的距离就越长。'
- en: '**Labels margin**: This defines the space between the scale bar and text labels.'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标签边距**：这定义了刻度尺与文本标签之间的空间。'
- en: '**Line width**: This defines the width of the scale bar''s outline.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**线宽**：这定义了刻度尺轮廓的宽度。'
- en: '**Join style**: This defines the appearance of the scale bar''s corner. It
    is available only for box type scale bars.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**连接样式**：这定义了刻度尺角落的外观。它仅适用于框型刻度尺。'
- en: '**Cap style**: This defines the appearance of line endings. It is available
    only for line type scale bars.'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**端头样式**：这定义了线条末尾的外观。它仅适用于线型刻度尺。'
- en: '**Alignment**: This aligns the scale bar and its labels within the bounding
    box. It is available only for the numeric scale type.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**对齐**：这将对刻度尺及其标签在边界框内的对齐进行设置。它仅适用于数字刻度类型。'
- en: 'The **Fonts and colors** section provides access to the eponymous functionality.
    To change the font or color, click on the button and select the necessary item
    from the dialog window. Note that **Fill color** and **Secondary fill color**
    work only with box type scale bars. In the following screenshot, you can see the
    example of a simple **Double Box** scale bar with two segments on the left side
    and one on the right side:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '**字体和颜色**部分提供了相应的功能。要更改字体或颜色，请点击按钮并从对话框窗口中选择必要的项目。请注意，**填充颜色**和**次要填充颜色**仅适用于框型刻度尺。在下面的屏幕截图中，您可以看到一个简单的**双框**刻度尺示例，左侧有两个段，右侧有一个段：'
- en: '![Scale bar](img/image00385.jpeg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![刻度尺](img/image00385.jpeg)'
- en: Sections such as **Position and Size**, **Rotation**, **Frame**, **Background**,
    **Item ID**, and **Rendering** provide the same options as those that were covered
    for the map item.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '**位置和大小**、**旋转**、**框架**、**背景**、**项目ID**和**渲染**等部分提供了与地图项目相同的选项。'
- en: North arrow
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 北箭头
- en: To add a north arrow, click on the **Add image** ![North arrow](img/image00386.jpeg)
    button in the **Composer Items** toolbar, and drag the mouse arrow over the page
    while holding down the left mouse button. You will see an empty rectangle drawn
    on the page. With **Image item** selected, use the **Item properties** tab to
    customize its appearance.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加北箭头，请点击**作曲工具栏中的**![北箭头](img/image00386.jpeg)**添加图像**按钮，并按住鼠标左键拖动鼠标箭头到页面上。您将在页面上看到一个空矩形。选择**图像项目**后，使用**项目属性**选项卡来定制其外观。
- en: 'First of all, you should navigate to the **Image source** file you want to
    use:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，您应该导航到您想要使用的**图像源**文件：
- en: Expand the **Search directories** section. In this section, you can set up **Image
    search paths**. By default, you will see the `QGIS installation path\qgis\svg\`
    path and its subfolders. You can always redefine paths with the **Remove** and
    **Add** buttons, and get access to your own images.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开**搜索目录**部分。在此部分中，您可以设置**图像搜索路径**。默认情况下，您将看到`QGIS安装路径\qgis\svg\`路径及其子文件夹。您可以使用**删除**和**添加**按钮重新定义路径，并访问您自己的图像。
- en: In the **Loading previews...** window, you will see thumbnails of the available
    images as shown in the following screenshot. Clicking on them automatically loads
    them into the image item frame. For the purpose of this tutorial, we select `NorthArrow_02.svg`.![North
    arrow](img/image00387.jpeg)
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**加载预览...**窗口中，您将看到可用图像的缩略图，如下面的截图所示。点击它们会自动将它们加载到图像项框架中。为了本教程的目的，我们选择`NorthArrow_02.svg`。![北箭头](img/image00387.jpeg)
- en: 'Now that you have selected the north arrow, you can adjust some of its **Main
    properties**. **Resize mode** defines the approach to image adjustment within
    its frame:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经选择了北箭头，您可以调整其一些**主要属性**。**调整模式**定义了在框架内调整图像的方法：
- en: '**Zoom**: The image will be adjusted to the frame and its proportions will
    be saved.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**缩放**：图像将被调整到框架中，并且其比例将被保存。'
- en: '**Stretch**: The image will be stretched within the frame, ignoring its proportions.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**拉伸**：图像将在框架内拉伸，忽略其比例。'
- en: '**Clip**: The image will be resized to its original size, and the frame will
    be used to clip the image, so only the part of it will be visible. This mode is
    appropriate for raster images only.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**剪辑**：图像将被调整到其原始大小，框架将用于剪辑图像，因此只有其中的一部分将是可见的。此模式仅适用于位图图像。'
- en: '**Zoom and resize frame**: Both the image and the frame will be resized to
    fit each other. First, the image will be proportionally adjusted to fit the frame,
    and then the frame will be adjusted to encompass the image.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**缩放和调整框架**：图像和框架都将调整大小以适应彼此。首先，图像将按比例调整以适应框架，然后框架将调整以包含图像。'
- en: '**Resize frame to image size**: The frame will be adjusted to the original
    image size.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**调整框架到图像大小**：框架将被调整到原始图像大小。'
- en: For the purpose of this tutorial, we will use the **Zoom and resize frame**
    mode. In this mode, the **Placement** option is inactive, but you can use it when
    selecting the **Zoom** and **Clip** modes to position an image within its frame.
    Similarly, **Image rotation** is also available for the **Zoom** and **Zoom and
    resize frame** modes. Activate the **Sync with map** toggle if you want to rotate
    the north arrow synchronously with the map.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 为了本教程的目的，我们将使用**缩放和调整框架**模式。在此模式下，**放置**选项不可用，但您可以在选择**缩放**和**剪辑**模式时使用它来在框架内定位图像。同样，**图像旋转**也适用于**缩放**和**缩放和调整框架**模式。如果您想将北箭头与地图同步旋转，请激活**与地图同步**切换按钮。
- en: Other sections, such as **Position and Size**, **Rotation**, **Frame**, **Background**,
    **Item ID**, and **Rendering**, provide the same options as those covered for
    the map item.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 其他部分，如**位置和大小**、**旋转**、**框架**、**背景**、**项目ID**和**渲染**，提供了与地图项相同的选项。
- en: Other items
  id: totrans-128
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 其他项
- en: 'So far, we have covered only the most important and the necessary map items.
    You have probably noticed that the **Composer Items** panel provides access to
    many more items, as follows:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们只介绍了最重要的和必要的地图项。您可能已经注意到，**项目项**面板提供了访问更多项的途径，如下所示：
- en: '**Label item**![Other items](img/image00388.jpeg): This provides control over
    text (or HTML) labels and their various properties, such as **Font**, **Font color**,
    **Vertical** and **Horizontal** (alignment), **Position and Size**, **Rotation**,
    and so on.'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标签项**![其他项](img/image00388.jpeg)：这提供了对文本（或HTML）标签及其各种属性的控制，例如**字体**、**字体颜色**、**垂直**和**水平**（对齐）、**位置和大小**、**旋转**等。'
- en: '**Shape item**![Other items](img/image00389.jpeg): This allows you to add simple
    geometric figures, such as rectangles, triangles, or ellipses, to the layout.
    In the **Item properties** tab, you can change their type, style, and other basic
    options, such as **Position and Size**, **Rotation**, **Frame**, **Background**,
    **Item ID**, and **Rendering**.'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**形状项**![其他项](img/image00389.jpeg)：这允许您向布局添加简单的几何图形，例如矩形、三角形或椭圆。在**项目属性**选项卡中，您可以更改它们的类型、样式和其他基本选项，例如**位置和大小**、**旋转**、**框架**、**背景**、**项目ID**和**渲染**。'
- en: '**Arrow item**![Other items](img/image00390.jpeg): This is a very useful element
    for highlighting relations between multiple maps and overviews. In the **Item
    properties** tab, you can select **Line style**, **Arrow outline** and **fill
    colors**, **Arrow outline** and **width**, and **Start** and **End markers**.'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**箭头项**![其他项](img/image00390.jpeg)：这是一个非常有用的元素，用于突出多个地图和概述之间的关系。在**项目属性**选项卡中，您可以选择**线条样式**、**箭头轮廓**和**填充颜色**、**箭头轮廓**和**宽度**，以及**起始**和**结束标记**。'
- en: '**Attribute table item**![Other items](img/image00391.jpeg): This item adds
    a vector layer attribute table to the map layout. If you want to do so, select
    **Layer** under **Item properties** tab. By clicking on the **Attributes** button,
    you will be taken to the **Select attributes** window, where you can modify the
    table''s structure and appearance by adding or removing unnecessary columns; changing
    headings, column alignment, and width; and applying sorting options.![Other items](img/image00392.jpeg)For
    this item, you can also apply **Feature filtering** to exclude unnecessary or
    excess elements. Within the **Appearance** and **Font and text styling** sections,
    you can find various options for enhancing table readability.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**属性表项目**![其他项目](img/image00391.jpeg)：此项目将矢量图层属性表添加到地图布局中。如果您想这样做，请选择**项目属性**标签页下的**图层**。通过点击**属性**按钮，您将被带到**选择属性**窗口，在那里您可以通过添加或删除不必要的列；更改标题、列对齐和宽度；以及应用排序选项来修改表格的结构和外观。![其他项目](img/image00392.jpeg)对于此项目，您还可以应用**特征过滤**以排除不必要的或多余的元素。在**外观**和**字体和文本样式**部分，您可以找到各种增强表格可读性的选项。'
- en: '**HTML frame item**![Other items](img/image00393.jpeg): This is responsible
    for adding a web page or user-generated content using HTML markup. For example,
    you can type the following expression in the **Source** window: `Map data is provided
    by <a href=''https://nycopendata.socrata.com/''>NYC Open Data Portal</a>`. This
    adds a link to the original website.'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**HTML框架项目**![其他项目](img/image00393.jpeg)：这负责使用HTML标记添加网页或用户生成的内容。例如，您可以在**源**窗口中输入以下表达式：`地图数据由<a
    href=''https://nycopendata.socrata.com/''>纽约开放数据门户</a>提供`。这将在原始网站添加一个链接。'
- en: When everything is ready, you can export your map from the menu, by navigating
    to **Composer** | **Export as Image** or **Export as SVG** or **Export as PDF**,
    or by clicking on the relevant buttons in the **Composer** toolbar, where ![Other
    items](img/image00394.jpeg) is responsible for image exporting, ![Other items](img/image00395.jpeg)
    is for exporting as SVG, and ![Other items](img/image00396.jpeg) for exporting
    as PDF.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 当一切准备就绪时，您可以通过菜单导出您的地图，导航到**组合器** | **导出为图像**或**导出为SVG**或**导出为PDF**，或者通过点击**组合器**工具栏中的相关按钮，其中![其他项目](img/image00394.jpeg)负责图像导出，![其他项目](img/image00395.jpeg)用于导出为SVG，![其他项目](img/image00396.jpeg)用于导出为PDF。
- en: '![Other items](img/image00397.jpeg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![其他项目](img/image00397.jpeg)'
- en: An example of a simple map created in print composer
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在打印组合器中创建的简单地图示例
- en: Working with multiple maps and overviews
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与多张地图和概览一起工作
- en: Sometimes, there is a need to combine multiple maps within a single layout.
    For example, suppose you need to combine a few different maps on one page, or
    show the location of an area of interest within a general region. While these
    tasks look similar, they require slightly different solutions, which we will explore
    in the following sections.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，需要在单个布局中结合多张地图。例如，假设您需要在单页上结合几张不同的地图，或者在一个大区域内显示感兴趣区域的地理位置。虽然这些任务看起来相似，但它们需要略微不同的解决方案，我们将在以下章节中探讨。
- en: Combining several maps within a single print composer
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在单个打印组合器中结合多张地图
- en: 'For our example, we will combine two maps—relief and hurricane evacuation zones—and
    do this within a single print layout:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的示例中，我们将结合两张地图——地形图和飓风疏散区域图——并在单个打印布局中完成：
- en: In the main window, activate the layers that will be used in the relief map—`Brooklyn
    borough boundaries`, `NY borough boundaries`, `water area` (to show the shoreline
    and water bodies properly), and finally, `hillshade` and `height a.s.l., ft`.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在主窗口中，激活将在地形图中使用的图层——“布鲁克林区边界”、“纽约区边界”、“水域”（以正确显示海岸线和水体），最后是“阴影”和“海拔高度，英尺”。
- en: Then, open the **New Print Composer** window, either from the **Project** menu
    or using the *Ctrl* + *Shift* + *P* keyboard shortcut. Adjust **Page Size** for
    this example to **A3**, set **Grid Spacing** to `5` mm, and activate the **Show
    Grid** and **Snap to Grid** options from the **View** menu.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，打开**新打印组合器**窗口，无论是从**项目**菜单还是使用*Ctrl* + *Shift* + *P*键盘快捷键。为此示例调整**页面大小**为**A3**，将**网格间距**设置为`5`毫米，并从**视图**菜单激活**显示网格**和**吸附到网格**选项。
- en: 'Add a new map item and adjust its size to `200×200` mm in the **Position and
    Size** section of the **Item properties** tab. Set the scale to `100000` and place
    the map content properly. After that, activate the following toggles to prevent
    changes to the map''s content:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**项目属性**标签页的**位置和大小**部分添加一个新的地图项目，并调整其大小为`200×200`毫米。将比例设置为`100000`并正确放置地图内容。之后，激活以下切换按钮以防止更改地图内容：
- en: '**Lock layers for map item**'
  id: totrans-145
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**锁定地图项目图层**'
- en: '**Lock layers styles for map item**'
  id: totrans-146
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**锁定地图项目样式**'
- en: Add and adjust another necessary map items, such as the scale bar, legend, north
    arrow, and so on. Compose a legend, removing unnecessary layers. If you want to
    block some items from changes, lock them in the **Items** panel, as shown here:![Combining
    several maps within a single print composer](img/image00398.jpeg)
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加并调整其他必要的地图元素，例如比例尺、图例、北箭头等。创建图例，移除不必要的图层。如果您想阻止某些项目发生变化，请在**项目**面板中锁定它们，如图所示：![在单个打印作曲家内组合多个地图](img/image00398.jpeg)
- en: When you are done with the relief map and its elements, go to the main map canvas
    window and activate the layer you want to show on the map. For example, activate
    `hurricane evacuation zones` and `primary residential zoning`, and deactivate
    `hillshade` and `height a.s.l., ft`.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当您完成等高线地图及其元素后，转到主地图画布窗口并激活您想在地图上显示的图层。例如，激活`飓风疏散区域`和`主要住宅区划`，并停用`阴影`和`海拔高度，ft`。
- en: Add a new map item and repeat steps 3 and 4\. After you are done, the result
    may look like what is shown in the following screenshot:![Combining several maps
    within a single print composer](img/image00399.jpeg)
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个新的地图项目并重复步骤3和4。完成后，结果可能看起来像以下屏幕截图所示：![在单个打印作曲家内组合多个地图](img/image00399.jpeg)
- en: You can combine any number of maps within a single layout, and use different
    scales and individual legends for them. The only thing you should always remember
    is to use **Lock layers (styles) for map item** to prevent any changes within
    a map.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在单个布局中组合任意数量的地图，并为它们使用不同的比例尺和单独的图例。您应该始终记住的是使用**锁定地图项目（样式）**以防止对地图进行任何更改。
- en: This approach is simple and effective when you need to present similar maps
    within a single page, but sometimes there is a need to show different areas of
    interest in different zoom levels, and also relate their extents with each other.
    In such cases, you should use so-called map overviews.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 当您需要在单页内展示类似地图时，这种方法简单且有效，但有时需要在不同缩放级别上展示不同的感兴趣区域，并将它们的范围相互关联。在这种情况下，您应该使用所谓的地图概览。
- en: Working with map overviews
  id: totrans-152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用地图概览
- en: Map overviews relate multiple map extents within a single layout, and they are
    very useful for showing how an area of interest is related to a bigger spatial
    context, for example, a region within a country, a district within a city area,
    and so on.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 地图概览在单个布局中关联多个地图范围，并且对于展示感兴趣区域与更大的空间背景之间的关系非常有用，例如，一个国家内的一个地区，一个城市区域内的一个区，等等。
- en: 'In this example, we will combine three overviews into a single map layout to
    show how Brooklyn is related with the whole of New York and how the area of interest
    within Brooklyn is related to the borough''s extent. To achieve this, you need
    to perform the following steps:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在本例中，我们将结合三个概览到一个单个地图布局中，以展示布鲁克林与整个纽约的关系，以及布鲁克林内的感兴趣区域与该区范围的关系。为了实现这一点，您需要执行以下步骤：
- en: In the main map canvas window, activate the `NY borough boundaries` layer and
    deactivate all other layers. Create a new print composer, use the default **A4**
    page size, and adjust any other properties required. Add a new map item to the
    layout. This map will be used to show simple boundaries and provide spatial context
    for the main map, so it may be encompassed in a small 95 x 95 mm frame with a
    scale of 1:515,000\. After you have adjusted the map view, don't forget to select
    **Lock layers for map item** and **Lock layers styles for map item**.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在主地图画布窗口中，激活`NY地区边界`图层并停用所有其他图层。创建一个新的打印作曲家，使用默认的**A4**页面大小，并调整任何其他所需的属性。将一个新的地图项目添加到布局中。此地图将用于显示简单的边界并为主地图提供空间背景，因此它可能被包含在一个小95
    x 95 mm的框架中，比例为1:515,000。在调整地图视图后，不要忘记选择**锁定地图项目图层**和**锁定地图项目样式**。
- en: Now, you will be adding the main map, and it will be the core of the layout.
    In the main map canvas window, activate the layers you wish to show on the map
    (for example, `hurricane evacuation zones` and `primary residential zoning`).
    Again, add a new map item to the layout and adjust its size, scale, and position.
    For example, it might be of 200 x 200 mm with a scale of 1:97,000\. Again, use
    **Lock layers for map item** and **Lock layers styles for map item**.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您将添加主地图，它将是布局的核心。在主地图画布窗口中，激活您想在地图上显示的图层（例如，`飓风疏散区域`和`主要住宅区划`）。再次，将一个新的地图项目添加到布局中并调整其大小、比例和位置。例如，它可能是200
    x 200 mm，比例为1:97,000。再次，使用**锁定地图项目图层**和**锁定地图项目样式**。
- en: Finally, add the third map. Activate the layers you wish to show in the map
    in the main map canvas window (for example, `hillshade`, and `height a.s.l., ft`).
    Add a new map item. Adjust the map size to 95 x 95 mm and set the scale to `20000`.
    Move the item content to show the area you are interested in and select **Lock
    layers for map item**.
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，添加第三个地图。在主地图画布窗口中激活您希望在地图中显示的图层（例如，`hillshade`和`height a.s.l., ft`）。添加一个新的地图元素。调整地图大小为95
    x 95毫米，并将比例设置为`20000`。移动项目内容以显示您感兴趣的区域，并选择**锁定地图元素图层**。
- en: Now, we need to relate the map extents with each other. We can do this with
    the help of overviews. Activate the very first map item you added and expand the
    **Overviews** section under the **Item properties** tab. To add a new overview,
    click on the ![Working with map overviews](img/image00374.jpeg) button, and to
    show it on the map, activate the **Draw "Name" overview** toggle. To relate an
    overview with a map item extent, select the map from the **Map frame** drop-down
    list. You can change the default **Frame style** using the **Symbol selector**
    dialog window.![Working with map overviews](img/image00400.jpeg)**Blending mode**
    is useful for achieving more stylish effects when combining several overview frames.
    The **Invert overview** toggle will invert the fill of the overview outside of
    its area. **Center on overview** will move the map item content to place an overview
    in its center. Add another overview that encompasses **Map frame** with a smaller
    extent using the ![Working with map overviews](img/image00374.jpeg) button. You
    can combine as many overviews as you want. Use the ![Working with map overviews](img/image00379.jpeg)
    button to remove unnecessary overviews and the ![Working with map overviews](img/image00377.jpeg)
    and ![Working with map overviews](img/image00376.jpeg) buttons to reorder them.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要将地图范围相互关联。我们可以通过概述来实现这一点。激活您添加的第一个地图元素，并在**项目属性**选项卡下展开**概述**部分。要添加新的概述，请点击![使用地图概述](img/image00374.jpeg)按钮，要将其显示在地图上，请激活**绘制“名称”概述**切换按钮。要将概述与地图元素范围关联，从**地图框架**下拉列表中选择地图。您可以使用**符号选择器**对话框窗口更改默认的**框架样式**。![使用地图概述](img/image00400.jpeg)**混合模式**在组合多个概述框架时非常有用，可以实现更时尚的效果。**反转概述**切换按钮将反转概述区域外的填充。**居中于概述**将地图元素内容移动到放置概述的中心。使用![使用地图概述](img/image00374.jpeg)按钮添加另一个包含**地图框架**且范围较小的概述。您可以根据需要组合任意数量的概述。使用![使用地图概述](img/image00379.jpeg)按钮删除不必要的概述，以及使用![使用地图概述](img/image00377.jpeg)和![使用地图概述](img/image00376.jpeg)按钮重新排序它们。
- en: Go to another map and add an overview to it. Select the map item you are interested
    in and go to its **Properties** tab. Expand the **Overviews** section and click
    on the ![Working with map overviews](img/image00374.jpeg) button to add an overview.
    Select a necessary map from the **Map frame** drop-down list and adjust the overview's
    **Frame style**.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往另一个地图并为其添加一个概述。选择您感兴趣的地图元素，并转到其**属性**选项卡。展开**概述**部分，点击![使用地图概述](img/image00374.jpeg)按钮以添加概述。从**地图框架**下拉列表中选择必要的地图，并调整概述的**框架样式**。
- en: Tip
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: QGIS makes it possible to combine multiple overviews and produce complex results.
    To highlight the differences and relations between different overviews, use individual
    map frames and scale bars.
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: QGIS使您能够组合多个概述并生成复杂的结果。为了突出不同概述之间的差异和关系，请使用单个地图框架和比例尺。
- en: In the following screenshot, you can see the resulting map. It combines three
    map items and relates their extents with overviews.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的屏幕截图中，您可以查看生成的地图。它结合了三个地图元素，并关联了它们的范围和概述。
- en: '![Working with map overviews](img/image00401.jpeg)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![使用地图概述](img/image00401.jpeg)'
- en: Creating atlases
  id: totrans-164
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建图集
- en: In QGIS, an atlas is a multipage map created in an automated way with the atlas
    generation functionality. The idea underlying atlases is very simple—very often,
    the user needs to generate several small maps, instead of one big map. To arrange
    multiple maps properly within several pages, an atlas coverage layer is used.
    This coverage layer may contain various types of geometry (points, lines, and
    polygons) that are used to define the general extent of the map, separate sheet's
    extents, their quantity, and their sequence. The most common example of an atlas
    is a large area (for example, a country, borough, or watershed basin) separated
    into several parts based on its subunits (for example, regions, states, counties,
    or subbasins).
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在QGIS中，图谱是通过自动化的图谱生成功能创建的多页地图。图谱背后的理念非常简单——用户通常需要生成多个小地图，而不是一个大地图。为了在多个页面中正确排列多个地图，使用图谱覆盖层。此覆盖层可能包含各种类型的几何体（点、线和多边形），用于定义地图的一般范围、单独页面的范围、它们的数量和它们的顺序。图谱最常见的一个例子是将一个大区域（例如，一个国家、地区或流域盆地）根据其子单位（例如，地区、州、县或子流域）分成几个部分。
- en: 'In this example tutorial, we will generate multiple street network maps using
    the `zipcode` layer elements as bounding extents for multiple maps. Moreover,
    we will use a specially designed plugin to mask all excluded areas and achieve
    stylish cartographic effects:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 在本示例教程中，我们将使用`zipcode`图层元素作为多个地图的边界范围，生成多个街道网络地图。此外，我们将使用专门设计的插件来遮罩所有排除区域，并实现时尚的制图效果：
- en: 'First of all, we enable the layers that we are going to create our map from:
    `Brooklyn borough boundaries`, `zipcode`, `water area`, `parks`, and `roads`.'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们启用我们将从中创建地图的图层：`布鲁克林地区边界`、`zipcode`、`水域面积`、`公园`和`道路`。
- en: For the purpose of this tutorial, we are going to use the external **Mask**
    plugin. This plugin allows the user to create a map-masking layer and also filter
    the labeling of other layers, removing labels that are outside the area of interest.
    It is also able to interact with the atlas generation process. Install and activate
    the **Mask** plugin as described in [Chapter 1](part0014.xhtml#aid-DB7S2 "Chapter 1. Handling
    Your Data"), *Handling Your Data*.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了本教程的目的，我们将使用外部**遮罩**插件。此插件允许用户创建地图遮罩层，并过滤其他层的标签，移除位于兴趣区域外的标签。它还能够与图谱生成过程交互。按照[第1章](part0014.xhtml#aid-DB7S2
    "第1章。处理您的数据")中所述，*处理您的数据*，安装并激活**遮罩**插件。
- en: When the plugin is activated, we need to provide it with layer features on which
    masking will be based. In our case, this will be `zipcode`. Activate it. Then,
    using the **Select features by area or single click**![Creating atlases](img/image00402.jpeg)
    mode, click on the map canvas to select any feature.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当插件被激活时，我们需要提供它基于哪些图层特征进行遮罩。在我们的案例中，这将是指`zipcode`。激活它。然后，使用**按区域或单击选择特征**![创建图谱](img/image00402.jpeg)模式，点击地图画布以选择任何特征。
- en: 'Once the selected polygon is highlighted, go to **Plugins** | **Mask** | **Create
    a mask** and open the **Create a mask** dialog window. In this window, you can
    define the following properties of the mask:'
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦选定的多边形被突出显示，请转到**插件** | **遮罩** | **创建遮罩**并打开**创建遮罩**对话框。在此窗口中，您可以定义遮罩的以下属性：
- en: '**Style** of the masking polygon, which, by default, uses **Inverted polygons
    renderer** with the **Shapeburst fill** option, modified by **Transparency**.'
  id: totrans-171
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**遮罩多边形的样式**，默认使用**反转多边形渲染器**和**形状爆发填充**选项，通过**透明度**进行修改。'
- en: The **Buffer** toggle generates a buffer around the area of interest whose width
    and complexity are defined by the **Units** and **Segments** values.
  id: totrans-172
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**缓冲区**切换会在兴趣区域周围生成一个缓冲区，其宽度和复杂性由**单位**和**段数**值定义。'
- en: On-the-fly simplification is used for the mask geometry used in expressions.
    The higher the value, the coarser the geometry.
  id: totrans-173
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在表达式中所使用的遮罩几何体使用即时简化。值越高，几何体越粗糙。
- en: '**Function used for labeling filtering on polygons** defines how exactly labels
    outside the masking polygon will be eliminated.'
  id: totrans-174
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用于多边形标签过滤的函数**定义了如何确切地消除遮罩多边形外的标签。'
- en: '**Function used for labeling filtering on lines** defines the exclusion mode
    for line labels. Select **The mask geometry contains the line** from the drop-down
    list. In the available layers list, activate `roads` (note that this layer is
    available only when its labeling is turned on).'
  id: totrans-175
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用于线标签过滤的函数**定义了线标签的排除模式。从下拉列表中选择**遮罩几何包含线**。在可用图层列表中激活`roads`（注意，只有当其标签开启时此图层才可用）。'
- en: Activate the **Save as** toggle and navigate to the catalog where you want to
    save the newly created mask layer. Otherwise, a so-called memory (temporary) layer
    will be created, and it will not be saved after closing the project.
  id: totrans-176
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 激活**另存为**切换按钮，并导航到您想要保存新创建的掩膜层的目录。否则，将创建一个所谓的内存（临时）层，并且在关闭项目后不会保存。
- en: '![Creating atlases](img/image00403.jpeg)'
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![创建图集](img/image00403.jpeg)'
- en: After you've clicked on **OK**, the mask layer will appear in the layers panel,
    and you will see its fancy styling effect applied to the map canvas. The selected
    polygon feature looks highlighted, while the outer map is faded out. Also, labels
    appear only within the masked feature. Now we can deactivate the `zipcode` layer,
    as we don't want its borders to be shown on the resulting map, and proceed to
    print composer to generate an atlas.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您点击**确定**后，掩膜层将出现在图层面板中，您将看到其应用于地图画布上的华丽样式效果。选定的多边形要素看起来被突出显示，而外围地图则变暗。此外，标签仅出现在掩膜要素内。现在我们可以禁用`zipcode`层，因为我们不希望其边界显示在生成的地图上，然后转到打印编者以生成图集。
- en: 'Open a new print composer and add to it a new map item and any other items
    you want to include in the layout. In our example, we will use the following:'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个新的打印编者，并向其中添加一个新地图项以及您想要包含在布局中的任何其他项。在我们的示例中，我们将使用以下内容：
- en: Custom page size equal to 200 x 200 mm.
  id: totrans-180
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自定义页面大小等于 200 x 200 毫米。
- en: 'Road network map item with the same size, 200 x 200 mm, and a scale of 1: 20000\.
    Don''t lock the layers for this map item because it will be changed dynamically
    in the atlas.'
  id: totrans-181
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '路网地图项具有相同的尺寸，200 x 200 毫米，比例尺为 1: 20000。不要锁定此地图项的图层，因为它将在图集中动态更改。'
- en: A small 50 x 50 mm map item in the top-right corner, with the `New York borough
    boundaries` layer and an overview added to it. After creating this map, lock its
    layers and their styles.
  id: totrans-182
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在右上角添加一个小的 50 x 50 毫米地图项，其中包含`New York borough boundaries`层，并添加一个概述。在创建此地图后，锁定其图层及其样式。
- en: Now you can come back to the main window and activate the layers that are necessary
    for the road network map.
  id: totrans-183
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现在，您可以回到主窗口并激活对路网地图必要的图层。
- en: After you have adjusted all the necessary items, go to the **Atlas generation**
    tab and activate the **Generate an atlas** toggle.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在调整所有必要的项目后，转到**图集生成**选项卡并激活**生成图集**切换按钮。
- en: 'The **Configuration** section provides the following options to configure an
    atlas from its coverage:'
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**配置**部分提供了以下选项来配置从其覆盖层生成的图集：'
- en: Select `zipcode` from the **Coverage layer** drop-down list. You can select
    any layer from this list, and its features will be used to iterate over them and
    create atlas pages.
  id: totrans-186
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从**覆盖层**下拉列表中选择`zipcode`。您可以从此列表中选择任何图层，并使用其特征来迭代它们并创建图集页面。
- en: When **Hidden coverage layer** is active, the coverage layer isn't shown on
    the map. In our case, we don't use it because we have already deactivated the
    coverage layer.
  id: totrans-187
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当**隐藏覆盖层**处于活动状态时，覆盖层在地图上不会显示。在我们的案例中，我们不使用它，因为我们已经禁用了覆盖层。
- en: In the **Filter with** area, you can create an expression to select only some
    futures from the coverage area. For example, you can use only polygons with an
    area larger than some predefined value.
  id: totrans-188
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**筛选条件**区域，您可以创建一个表达式来仅从覆盖区域选择某些要素。例如，您可以使用面积大于某个预定义值的多边形。
- en: 'The **Output** section provides control over the results through the following
    options:'
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**输出**部分通过以下选项提供了对结果的控制：'
- en: '**Output filename expression** is a template that will be used to name multiple
    output files.'
  id: totrans-190
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**输出文件名表达式**是一个模板，将用于命名多个输出文件。'
- en: '**Single file export when possible** generates a single multipage file (useful
    for exports to `.pdf`). If this option is active, **Output filename expression**
    is not applied.'
  id: totrans-191
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**尽可能生成单个文件**在可能的情况下生成单个多页文件（适用于导出到`.pdf`）。如果此选项处于活动状态，则**输出文件名表达式**不适用。'
- en: The **Sort by** option provides access to the names of attribute fields of the
    coverage layer, and you can select any of them to sort output files in ascending
    or descending order of the field values, with the arrow button beside.
  id: totrans-192
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**排序方式**选项提供了访问覆盖层属性字段名称的权限，您可以选择其中的任何一个来按字段值升序或降序排序输出文件，旁边有箭头按钮。'
- en: 'Go back to the **Item properties** tab. Note that the map item with the main
    map (road network) should be selected. Activate the **Controlled by atlas** section,
    where you can select from among the following options:'
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回到**项目属性**选项卡。请注意，应选择包含主地图（路网）的地图项。激活**由图集控制**部分，您可以从以下选项中进行选择：
- en: '**Margin around feature**: you can set the amount of surrounding area for each
    feature that is mapped on a single atlas page. This means that the map extent
    and scale will not be fixed. They will be adjusted to encompass the feature and
    its margin set. We select this option and set a value of `5` percent.'
  id: totrans-194
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**要素周围边距**：你可以为单个地图集页面上映射的每个要素设置周围区域的大小。这意味着地图范围和比例将不会固定。它们将调整以包含要素及其设置的边距。我们选择此选项并设置值为`5`百分比。'
- en: '**Predefined scale (best fit)**: One of the project''s predefined scales that
    best fits the feature into the atlas page will be used.'
  id: totrans-195
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**预定义比例尺（最佳匹配）**：项目的一个预定义比例尺，最适合将要素放入地图集页面中将被使用。'
- en: '**Fixed scale**: Each feature will be shown in the same scale and the map page
    will automatically be centered around it. This is very useful when you need to
    print several maps in the same scale.'
  id: totrans-196
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**固定比例尺**：每个要素将以相同的比例显示，地图页面将自动围绕它居中。当你需要打印多个相同比例的地图时，这非常有用。'
- en: Now, everything is ready for you to generate and preview the atlas. You will
    notice that the **Preview atlas** button in the **Atlas** toolbar is active. Click
    on it to generate your atlas. When the generation process completes, you will
    see that the other buttons on the toolbar have also become active. Click on them
    to preview the atlas pages.![Creating atlases](img/image00404.jpeg)Using the toolbar
    buttons, you can not only explore your atlas, which contains multiple pages created
    within minutes, but also get quick access to the **Print**![Creating atlases](img/image00405.jpeg),
    **Export**, and **Settings**![Creating atlases](img/image00406.jpeg) options.
    The **Export** options are shown in this screenshot:![Creating atlases](img/image00407.jpeg)
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，一切准备就绪，你可以生成和预览地图集。你会注意到**预览地图集**按钮在**地图集**工具栏中是激活的。点击它来生成你的地图集。当生成过程完成后，你会看到工具栏上的其他按钮也变得激活了。点击它们来预览地图集页面。![创建地图集](img/image00404.jpeg)使用工具栏按钮，你不仅可以探索你的地图集，它包含几分钟内创建的多个页面，还可以快速访问**打印**![创建地图集](img/image00405.jpeg)、**导出**和**设置**![创建地图集](img/image00406.jpeg)选项。**导出**选项显示在本截图上：![创建地图集](img/image00407.jpeg)
- en: 'In the following screenshot, you can see an example of a single atlas page:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下截图上，你可以看到一个单页地图集的示例：
- en: '![Creating atlases](img/image00408.jpeg)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![创建地图集](img/image00408.jpeg)'
- en: Managing print composers
  id: totrans-200
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理打印作曲家
- en: Beginners usually forget to apply map locking options and often create every
    map from scratch. As a result, they are overloaded with multiple map composers
    that have permanently changing maps. If you want to save your time, then it is
    wise to use **Lock layers for map item** and **Lock layer styles for map item**
    to block undesirable changes in your maps.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 初学者通常忘记应用地图锁定选项，经常从头开始创建每个地图。结果，他们被多个地图作曲家所压倒，这些地图作曲家中的地图会永久性地改变。如果你想节省时间，那么使用**锁定地图项图层**和**锁定地图项样式**来阻止地图中的不希望的变化是明智的。
- en: You can have multiple maps and atlases that are stored within a single project,
    and get access to them by going to **Project** | **Print Composers**. Advanced
    options are available at **Print Composer Manager**, which is under **Project**.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在单个项目中存储多个地图和地图集，并通过转到**项目** | **打印作曲家**来访问它们。在**项目**下的**打印作曲家管理器**中提供了高级选项。
- en: '![Managing print composers](img/image00409.jpeg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![管理打印作曲家](img/image00409.jpeg)'
- en: Tip
  id: totrans-204
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: In **Composer manager**, you can create a new print composer from the template.
    Any map layout can be saved as a template from the print composer menu **Composer**
    | **Save as Template**.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 在**作曲家管理器**中，你可以从模板创建一个新的打印作曲家。任何地图布局都可以从打印作曲家的菜单**作曲家** | **另存为模板**保存为模板。
- en: Summary
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned about basic map items and their configuration with
    print composer. Now you know that QGIS is not only a great tool for creating a
    simple print map, but it also provides sophisticated options to combine multiple
    maps into a single layout, relate them with overviews, and finally, generate multipage
    map atlases with a few clicks.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了基本地图元素及其与打印作曲家的配置。现在你知道QGIS不仅是一个创建简单打印地图的强大工具，而且还提供了将多个地图组合成一个布局、通过概述关联它们以及最终通过几点击生成多页地图集的复杂选项。
- en: While print maps are very useful, they are not very efficient if you prefer
    to share your results online. In the next chapter, you will learn how to publish
    your data online quickly and efficiently.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然打印地图非常有用，但如果你更喜欢在线分享你的结果，它们效率不高。在下一章中，你将学习如何快速有效地在线发布你的数据。
