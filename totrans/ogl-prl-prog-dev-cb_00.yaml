- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: Welcome to the *OpenCL Parallel Programming Development Cookbook*! Whew, that
    was more than a mouthful. This book was written by a developer, that's me, and
    for a developer, hopefully that's you. This book will look familiar to some and
    distinct to others. It is a result of my experience with OpenCL, but more importantly
    in programming heterogeneous computing environments. I wanted to organize the
    things I've learned and share them with you, the reader, and decided upon taking
    an approach where each problem is categorized into a recipe. These recipes are
    meant to be concise, but admittedly some are longer than others. The reason for
    doing that is because the problems I've chosen, which manifest as chapters in
    this book describe how you can apply those techniques to your current or future
    work. Hopefully it can be a part of the reference, which rests on your desk among
    others. I certainly hope that understanding the solution to these problems can
    help you as much as they helped me.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 欢迎来到 *OpenCL 并行编程开发食谱集*！哇，这个名字确实有点长。这本书是由一位开发者（就是我）为开发者（希望也是你）编写的。这本书对一些人来说可能很熟悉，而对另一些人来说则很独特。它是我在
    OpenCL 方面的经验的结果，但更重要的是在编程异构计算环境方面的经验。我想整理我所学到的知识，并与你，读者分享，并决定采用一种方法，即将每个问题分类到一个食谱中。这些食谱旨在简洁，但诚然有些比其他的长。这样做的原因是因为我选择的问题，它们以本书的章节形式出现，描述了你可以如何将这些技术应用到你的当前或未来工作中。希望它能成为你桌上众多参考资料的一部分。我确实希望理解这些问题的解决方案能像帮助我一样帮助你。
- en: This book was written keeping a software developer in mind, who wishes to know
    not only how to program in parallel but also think in parallel. The latter is
    in my opinion more important than the former, but neither of them alone solves
    anything. This book reinforces each concept with code and expands on that as we
    leverage upon more recipes.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书是为那些希望不仅知道如何并行编程，而且希望学会并行思维的软件开发者而编写的。在我看来，后者比前者更重要，但单独任何一方都无法解决问题。本书通过代码强化每个概念，并在我们利用更多食谱时对其进行扩展。
- en: This book is structured to ease you gently into OpenCL by getting you to be
    familiar with the core concepts of OpenCL, and then we'll take deep dives by applying
    that newly gained knowledge into the various recipes and general parallel computing
    problems you'll encounter in your work.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书结构旨在通过让你熟悉 OpenCL 的核心概念，让你轻松地进入 OpenCL，然后我们将通过将新获得的知识应用到你在工作中遇到的各个食谱和一般并行计算问题中进行深入研究。
- en: To get the most out of this book, it is highly recommended that you are a software
    developer or an embedded software developer, and is interested in parallel software
    development but don't really know where/how to start. Ideally, you should know
    some C or C++ (you can pick C up since its relatively simple) and comfortable
    using a cross-platform build system, for example, CMake in Linux environments.
    The nice thing about CMake is that it allows you to generate build environments
    for those of you who are comfortable using Microsoft's Visual Studio, Apple's
    XCode, or some other integrated development environment. I have to admit that
    the examples in this book used neither of these tools.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 为了最大限度地利用这本书，强烈建议你是软件开发者或嵌入式软件开发者，并对并行软件开发感兴趣，但不知道从哪里或如何开始。理想情况下，你应该了解一些 C 或
    C++（你可以学习 C，因为它相对简单），并且熟悉使用跨平台构建系统，例如 Linux 环境中的 CMake。CMake 的好处是它允许你为那些习惯使用微软的
    Visual Studio、苹果的 XCode 或其他集成开发环境的人生成构建环境。我必须承认，本书中的示例没有使用这些工具。
- en: What this book covers
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖的内容
- en: '[Chapter 1](ch01.html "Chapter 1. Using OpenCL"), *Using OpenCL*, sets the
    stage for the reader by establishing OpenCL in its purpose and motivation. The
    core concepts are outlined in the recipes covering the intrinsics of devices and
    their interactions and also by real working code. The reader will learn about
    contexts and devices and how to create code that runs on those devices.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '[第 1 章](ch01.html "第 1 章。使用 OpenCL")，*使用 OpenCL*，通过建立 OpenCL 的目的和动机为读者设定了场景。核心概念通过涵盖设备和它们之间交互的内在特性以及实际工作代码的食谱来概述。读者将了解上下文和设备以及如何创建在这些设备上运行的代码。'
- en: '[Chapter 2](ch02.html "Chapter 2. Understanding OpenCL Data Transfer and Partitioning"),
    *Understanding OpenCL Data Transfer and Partitioning*, discusses the buffer objects
    in OpenCL and strategies on how to partition data amongst them. Subsequently,
    readers will learn what work items are and how data partitioning can take effect
    by leveraging OpenCL abstractions.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 3](ch03.html "Chapter 3. Understanding OpenCL Data Types"), *Understanding
    OpenCL Data Types*, explains the two general data types that OpenCL offers, namely
    scalar and vector data types, how they are used to solve different problems, and
    how OpenCL abstracts native vector architectures in processors. Readers will be
    shown how they can effect programmable vectorization through OpenCL.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 4](ch04.html "Chapter 4. Using OpenCL Functions"), *Understanding
    OpenCL Functions*, discusses the various functionalities offered by OpenCL in
    solving day-to-day problems, for example, geometry, permuting, and trigonometry.
    It also explains how to accelerate that by using their vectorized counterparts.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 5](ch05.html "Chapter 5. Developing a Histogram OpenCL program"),
    *Developing a Histogram OpenCL program*, witnesses the lifecycle of a typical
    OpenCL development. It also discusses about the data partitioning strategies that
    rely on being cognizant of the algorithm in question. The readers will inadvertently
    realize that not all algorithms or problems require the same approach.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 6](ch06.html "Chapter 6. Developing a Sobel Edge Detection Filter"),
    *Developing a Sobel Edge Detection Filter*, will guide you in how to build an
    edge detection filter using the Sobel''s method. They will be introduced into
    some mathematical formality including convolution theory in one-dimension and
    two-dimensions and its accompanying code. And finally, we introduce how profiling
    works in OpenCL and its application in this recipe.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 7](ch07.html "Chapter 7. Developing the Matrix Multiplication with
    OpenCL"), *Developing the Matrix Multiplication with OpenCL*, discusses parallelizing
    the matrix multiplication by studying its parallel form and applying the tranformation
    from sequential to parallel. Next, it''ll optimize the matrix multiplication by
    discussing how to increase the computation throughput and warming the cache.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 8](ch08.html "Chapter 8. Developing the Sparse Matrix Vector Multiplication
    in OpenCL"), *Developing the Sparse Matrix-Vector Multiplication with OpenCL*,
    discusses the context of this computation and the conventional method used to
    solve it, that is, the conjugate gradient through enough math. Once that intuition
    is developed, readers will be shown how various storage formats for sparse matrices
    can affect the parallel computation and then the readers can examine the ELLPACK,
    ELLPACK-R, COO, and CSR.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 9](ch09.html "Chapter 9. Developing the Bitonic Sort with OpenCL"),
    *Developing Bitonic Sort Using OpenCL*, will introduce readers, to the world of
    sorting algorithms, and focus on the parallel sorting network also known as bitonic
    sort. This chapter works through the recipes, as we did in all other chapters
    by presenting the theory and its sequential implementation, and extracting the
    parallelism from the transformation, and then developing the final parallel version.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[第 9 章](ch09.html "第 9 章. 使用 OpenCL 开发 Bitonic 排序"), *使用 OpenCL 开发 Bitonic
    排序*，将向读者介绍排序算法的世界，并专注于并行排序网络，也称为 Bitonic 排序。本章通过展示理论及其顺序实现，从转换中提取并行性，然后开发最终的并行版本，来介绍这些配方，就像我们在所有其他章节中所做的那样。'
- en: '[Chapter 10](ch10.html "Chapter 10. Developing the Radix Sort with OpenCL"),
    *Developing the Radix Sort with OpenCL*, will introduce a classic example of non-comparison
    based sorting algorithms, for example, QuickSort where it suits a GPU architecture
    better. The reader is also introduced to another core parallel programming technique
    known as reduction, and we developed the intuition of how reduction helps radix
    sort perform better. The radix sort recipe also demonstrates multiple kernel programming
    and highlights the advantages as well as the disadvantages.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[第 10 章](ch10.html "第 10 章. 使用 OpenCL 开发基数排序"), *使用 OpenCL 开发基数排序*，将介绍一个非比较排序算法的经典示例，例如
    QuickSort，它更适合 GPU 架构。读者还将被介绍到另一种称为归约的核心并行编程技术，我们开发了归约如何帮助基数排序表现更好的直觉。基数排序配方还展示了多个内核编程，并突出了其优点和缺点。'
- en: What you need for this book
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 你需要这本书的以下内容
- en: 'You need to be comfortable working in a Linux environment, as the examples
    are tested against the Ubuntu 12.10 64-bit operating system. The following are
    the requirements:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要在一个 Linux 环境中感到舒适，因为示例是在 Ubuntu 12.10 64 位操作系统上测试的。以下是一些要求：
- en: GNU GCC C/C++ compiler Version 4.6.1 (at least)
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GNU GCC C/C++ 编译器版本 4.6.1（至少）
- en: OpenCL 1.2 SDK by AMD, Intel & NVIDIA
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AMD、Intel 和 NVIDIA 的 OpenCL 1.2 SDK
- en: AMD APP SDK Version 2.8 with AMD Catalyst Linux Display Driver Version 13.4
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AMD APP SDK 版本 2.8 与 AMD Catalyst Linux 显示驱动程序版本 13.4
- en: Intel OpenCL SDK 2012
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Intel OpenCL SDK 2012
- en: CMake Version 2.8 (at least)
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CMake 版本 2.8（至少）
- en: Clang Version 3.1 (at least)
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Clang 版本 3.1（至少）
- en: Microsoft Visual C++ 2010 (if you work on Windows)
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你在 Windows 上工作，则需要 Microsoft Visual C++ 2010
- en: Boost Library Version 1.53
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Boost 库版本 1.53
- en: VexCL (by Denis Demidov)
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VexCL（由 Denis Demidov 编写）
- en: CodeXL Profiler by AMD (Optional)
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AMD 的 CodeXL Profiler（可选）
- en: At least eight hours of sleep
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 至少需要八小时的睡眠
- en: An open and receptive mind
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个开放和接受的心态
- en: A fresh brew of coffee or whatever that works
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一杯新鲜煮的咖啡或任何能起作用的东西
- en: Who this book is for
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 这本书是为谁而写的
- en: This book is intended for software developers who have often wondered what to
    do with that newly bought CPU or GPU they bought other than using it for playing
    computer games. Having said that, this book isn't about toy algorithms that works
    only on your workstations at home. This book is ideally for the developers who
    have a working knowledge of C/C++ and who want to learn how to write parallel
    programs that execute in heterogeneous computing environments in OpenCL.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书是为那些经常想知道除了玩电脑游戏之外，如何使用他们新购买的 CPU 或 GPU 的软件开发者而编写的。话虽如此，这本书并不是关于那些只能在你的家用工作站上运行的玩具算法。这本书非常适合那些对
    C/C++ 有一定了解并希望学习如何编写在 OpenCL 异构计算环境中执行的并行程序的开发者。
- en: Conventions
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 约定
- en: In this book, you will find a number of styles of text that distinguish between
    different kinds of information. Here are some examples of these styles, and an
    explanation of their meaning.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，你会发现许多不同风格的文本，用于区分不同类型的信息。以下是一些这些风格的示例及其含义的解释。
- en: 'Code words in text are shown as follows: "We can include other contexts through
    the use of the `#include` directive."'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 文本中的代码单词如下显示：“我们可以通过使用 `#include` 指令来包含其他上下文。”
- en: 'A block of code is set as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块如下设置：
- en: '[PRE0]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望将您的注意力引到代码块的一个特定部分时，相关的行或项目将以粗体显示：
- en: '[PRE1]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都应如下编写：
- en: '[PRE2]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'New terms and important words are shown in bold. Words that you see on the
    screen, in menus or dialog boxes for example, appear in the text like this: "clicking
    on the **Next** button moves you to the next screen".'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 新术语和重要词汇以粗体显示。你在屏幕上看到的单词，例如在菜单或对话框中，在文本中如下显示：“点击**下一个**按钮将您带到下一屏幕”。
- en: Note
  id: totrans-43
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Warnings or important notes appear in a box like this.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 警告或重要注意事项以这种框的形式出现。
- en: Tip
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Tips and tricks appear like this.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 技巧和窍门以这种方式出现。
- en: Reader feedback
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 读者反馈
- en: Feedback from our readers is always welcome. Let us know what you think about
    this book—what you liked or may have disliked. Reader feedback is important for
    us to develop titles that you really get the most out of.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们始终欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正能从中获得最大收益的标题非常重要。
- en: To send us general feedback, simply send an e-mail to `<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`,
    and mention the book title via the subject of your message.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 要向我们发送一般反馈，只需发送一封电子邮件到`<[feedback@packtpub.com](mailto:feedback@packtpub.com)>`，并在邮件主题中提及书名。
- en: If there is a topic that you have expertise in and you are interested in either
    writing or contributing to a book, see our author guide on [www.packtpub.com/authors](http://www.packtpub.com/authors).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在某个主题上具有专业知识，并且您对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。
- en: Customer support
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 客户支持
- en: Now that you are the proud owner of a Packt book, we have a number of things
    to help you to get the most from your purchase.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您是Packt书籍的骄傲拥有者，我们有一些事情可以帮助您从您的购买中获得最大收益。
- en: Downloading the example code
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 下载示例代码
- en: You can download the example code files for all Packt books you have purchased
    from your account at [http://www.packtpub.com](http://www.packtpub.com). If you
    purchased this book elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[http://www.packtpub.com](http://www.packtpub.com)的账户下载您购买的所有Packt书籍的示例代码文件。如果您在其他地方购买了这本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。
- en: Errata
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 错误清单
- en: Although we have taken every care to ensure the accuracy of our content, mistakes
    do happen. If you find a mistake in one of our books—maybe a mistake in the text
    or the code—we would be grateful if you would report this to us. By doing so,
    you can save other readers from frustration and help us improve subsequent versions
    of this book. If you find any errata, please report them by visiting [http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata),
    selecting your book, clicking on the **errata** **submission** **form** link,
    and entering the details of your errata. Once your errata are verified, your submission
    will be accepted and the errata will be uploaded on our website, or added to any
    list of existing errata, under the Errata section of that title. Any existing
    errata can be viewed by selecting your title from [http://www.packtpub.com/support](http://www.packtpub.com/support).
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然会发生。如果您在我们的某本书中找到一个错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进此书的后续版本。如果您发现任何错误清单，请通过访问[http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**错误清单****提交****表单**链接，并输入您的错误清单详情来报告它们。一旦您的错误清单得到验证，您的提交将被接受，错误清单将被上传到我们的网站，或添加到该标题的错误清单部分。任何现有的错误清单都可以通过从[http://www.packtpub.com/support](http://www.packtpub.com/support)中选择您的标题来查看。
- en: Piracy
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 盗版
- en: Piracy of copyright material on the Internet is an ongoing problem across all
    media. At Packt, we take the protection of our copyright and licenses very seriously.
    If you come across any illegal copies of our works, in any form, on the Internet,
    please provide us with the location address or website name immediately so that
    we can pursue a remedy.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网上版权材料的盗版是一个持续存在的问题，所有媒体都存在。在Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以追究补救措施。
- en: Please contact us at `<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`
    with a link to the suspected pirated material.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 请通过`<[copyright@packtpub.com](mailto:copyright@packtpub.com)>`与我们联系，并提供涉嫌盗版材料的链接。
- en: We appreciate your help in protecting our authors, and our ability to bring
    you valuable content.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 我们感谢您在保护我们作者方面的帮助，以及我们为您提供有价值内容的能力。
- en: Questions
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题
- en: You can contact us at `<[questions@packtpub.com](mailto:questions@packtpub.com)>`
    if you are having a problem with any aspect of the book, and we will do our best
    to address it.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在本书的任何方面遇到问题，可以通过`<[questions@packtpub.com](mailto:questions@packtpub.com)>`与我们联系，我们将尽力解决。
