<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Developing Automatic Presentations</h1>
                
            
            <article>
                
<p class="calibre2">Have you ever found yourself doing the same mechanical task over and over again? It's surprising how many programmers, statisticians, and scientists, in general, do not invest time to automate many of their activities, especially reporting results. Doing so would allow them to focus deeper on their core competencies. Furthermore, this is not unique to individuals; organizations at large still do not automate many of their processes, especially analytical ones. Remember the graph creation automation we performed in <a href="part0059.html#1O8H60-f494c932c729429fb734ce52cafce730" class="calibre4">Chapter 2</a>, <em class="calibre19">Understanding Votes with Descriptive Statistics</em>, or the regressions automation we performed in <a href="part0076.html#28FAO0-f494c932c729429fb734ce52cafce730" class="calibre4">Chapter 3</a>, <em class="calibre19">Predicting Votes with Linear Models</em>? In this chapter, we will show you how to automate another activity—developing presentations. By this, we don't mean to automate the explanations behind the results, but automate the creation of slides that show tables and graphs of the <em class="calibre19">current status</em> of a process. This a very high benefit/cost area that is often overlooked, and a lot of time is wasted producing such presentations for discussion among peers.</p>
<p class="calibre2">This is the last chapter for The Food Factory example, and here, we will automate an activity that people in many organizations find themselves doing over and over again—developing presentations for weekly updates. We will show what a content automation pipeline looks like in R and build a presentation that can be updated automatically with the latest data. To do so, we will use the results we have developed during the previous chapters in this example.</p>
<p class="calibre2">Some of the important topics covered in this chapter are as follows:</p>
<ul class="calibre11">
<li class="calibre12">The importance and benefits of automation</li>
<li class="calibre12">Setting up and running automation pipelines</li>
<li class="calibre12">Communicating ideas with literate programming</li>
<li class="calibre12">Writing static content using Markdown</li>
<li class="calibre12">Developing dynamic content using R Markdown</li>
<li class="calibre12">Producing presentation and web pages using knitr</li>
<li class="calibre12">Integrating R resources efficiently</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Required packages</h1>
                
            
            <article>
                
<p class="calibre2">There are only two required packages for this chapter and you should be able to install them without a problem in your system. For more information take a look at <a href="part0296.html#8Q96G0-f494c932c729429fb734ce52cafce730" class="calibre4">Appendix</a><em class="calibre19">, Required Packages</em>.</p>
<table class="calibre5">
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><strong class="calibre1">Package</strong></p>
</td>
<td class="calibre8">
<p class="calibre2">Reason</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><kbd class="calibre9">ggrepel</kbd></p>
</td>
<td class="calibre8">
<p class="calibre2">Avoid overlapping labels in graphs</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><kbd class="calibre9">rmarkdown</kbd></p>
</td>
<td class="calibre8">
<p class="calibre2">Markdown documents with executable R code</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Why invest in automation?</h1>
                
            
            <article>
                
<p class="calibre2">Automation is an investment. It often involves taking different applications and integrating them to make processes happen repeatedly, hopefully seamlessly and effortlessly. Process automation can increase productivity by reducing the time taken to perform repetitive tasks, as well as reduce defects, which also saves time and enhances the value-creation process.</p>
<p class="calibre2">Furthermore, automated systems do not get bored. It's likely that anyone who has to undertake a repetitive task over and over again will get bored. This will slow down their performance and increase the risk of defects. An automated process will not get bored, no matter how often it is run, so performance is not likely to be slowed down.</p>
<p class="calibre2">Scientists can leverage automation to reduce cycle time through scientific methods, which in turn increases learning rates, often exponentially. In my opinion, this is one of the most powerful consequences of automation: accelerating learning processes by removing us (humans) from activities to which we do not add value, and allowing us to focus on activities that (so far) cannot be automated, such as being creative or developing innovative solutions to valuable problems.</p>
<p class="calibre2">Lastly, people often complain about not having enough time. One effective way to get time back is to automate processes, and that's the ultimate benefit of automation—making more of your time.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Literate programming as a content creation methodology</h1>
                
            
            <article>
                
<p class="calibre2">Automation requires us to put different pieces together in such a way that the process is clear for both humans and machines. The process must be reproducible and capable of evolving as new ideas come to us or requirements change. Automating content creation can be achieved with literate programming, which comes from Donald Knuth's <em class="calibre19">Literate Programming, 1992</em> (<a href="http://www-cs-faculty.stanford.edu/~knuth/lp.html" target="_blank" class="calibre4">http://www-cs-faculty.stanford.edu/~knuth/lp.html</a>). The basic idea is that a document is viewed as a combination of text and code. Code is divided into chunks with text surrounding the code chunks explaining what is going on. Text adapts as necessary to keep the ideas behind the code updated, clear, and accurate.</p>
<div class="packt_tip">In this chapter, we use the words <em class="calibre27">presentation</em> and <em class="calibre27">document</em> interchangeably as you can create both of them with the tools we will show.</div>
<p class="calibre2">Literate programming is not a requisite for automating content creation, but it certainly is a great tool for it. Literate programming has the advantages of being easily readable, just as a manual or instruction set. Also, it allows for where code and natural language need to be combined. Results can be automatically shown as we go through the document. The document itself is simple text, which makes it flexible and easy to change. In general, literate programs are <em class="calibre19">weaved</em> to produce human-readable documents and <em class="calibre19">tangled</em> to produce machine-readable documents. To make this work, we only need a documentation language and a programming language, which are English and R in our case.</p>
<p class="calibre2">Literate programming seems to have the potential to make many tools obsolete that are currently being used to produce content. However, there are still better tools available if you need to produce documents with very accurate formatting or that require highly technical optimizations. This is not due to any inherent weaknesses in the concept of literate programming, but due to the fact that available tools are not as performant as specialized tools in those aspects.</p>
<p class="calibre2">When it comes to literate programming, R strikes a nice balance between technical complexity and simple presentations, allowing for a wide range of content automation to be developed, and this can produce documents that can serve very well for research and data analysis in general. If at some point you find that you need to make a change, you can easily do so, recompile, and you'll be looking at the latest version in a matter of seconds. That's why it's very handy to develop automated presentations the way we will show you in this chapter.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Reproducibility as a benefit of literate programming</h1>
                
            
            <article>
                
<p class="calibre2">In science, reproducibility is the most important element of verifying and validating analysis findings. The analyses, models, and algorithms we run are much more complicated than they used to be. Having a basic understanding of these algorithms is difficult, even for a sophisticated person, and it's almost impossible to describe with words alone. Understanding what someone did nowadays requires looking at data and code directly, not only at results.</p>
<p class="calibre2">Scientists write a lot of reports describing the results of data analyses. Making those reports reproducible is essential to have your work reviewed by your peers, and it is a very good way to accomplish this with literate programming. With it, the final report depends on code that is executed at the moment of its creation, and thus, reproducibility is embedded in the process. There's a clear and automatic path from data and code to the final report.</p>
<p class="calibre2">Literate programming for data analysis has become quite popular due to the development and communication efficiency it provides. In the following sections, we will show, how to do it using R, R Markdown, and knitr.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">The basic tools for an automation pipeline</h1>
                
            
            <article>
                
<p class="calibre2">A pipeline is a process that starts with text, code, and raw data, and ends with the final document or presentation we want to show or distribute. Luckily, much of the hard work is automated for you within R, so there's not much you need to do other than install these tools and set up a compilation file.</p>
<div class="cdpaligncenter"><img src="../images/00054.gif" class="calibre55"/></div>
<p class="calibre2">Our pipeline should be general enough to accommodate various use cases without having to be modified substantially. If it is, we can master one set of tools and reuse them for different projects rather than learning a new tool set each time. On the input side, using text, code, and data, is general enough. On the output side, being able to generate HTML, PDF, LaTeX, and even Word documents seems to be general enough so we are good to go.</p>
<p class="calibre2">Markdown is a low-overhead mark-up language (<a href="http://spec.commonmark.org/0.28/" target="_blank" class="calibre4">http://spec.commonmark.org/0.28/</a>). Its main benefit for writers is that it allows us to focus on writing as opposed to formatting. It has simple and minimal yet intuitive formatting elements, and there are many programs that can translate Markdown into HTML and PDF files, among many others. R Markdown is an extension of Markdown to incorporate R code (<a href="http://rmarkdown.rstudio.com/" target="_blank" class="calibre4">http://rmarkdown.rstudio.com/</a>). Documents written in R Markdown have R code nested inside, which allows us to create dynamic presentations. They can not be evaluated using standard Markdown tools. Instead, R code is evaluated as part of the processing of the R Markdown before the traditional Markdown tools are called.</p>
<p class="calibre2">One of the first literate programming systems in R is <strong class="calibre1">Sweave</strong>, which is used for creating dynamic reports and reproducible research using <strong class="calibre1">LaTeX</strong> (<a href="https://www.latex-project.org/" target="_blank" class="calibre4">https://www.latex-project.org/</a>). Sweave enables the embedding of R code within LaTeX documents to generate a PDF file that includes text, analysis, graphics, code, and the computation results. knitr (with first letter lowercase) is an R package that adds many new capabilities to Sweave (<a href="https://yihui.name/knitr/" class="calibre4">https://yihui.name/knitr/</a>).</p>
<p class="calibre2">R Markdown can be converted to standard markdown using the knitr package in R, which inserts R results into a Markdown document. Markdown can subsequently be converted to HTML using Pandoc (a very powerful document translator, <a href="https://pandoc.org/" target="_blank" class="calibre4">https://pandoc.org/</a>). The use of R Markdown to create reproducible reports has quickly become a core tool for many scientists.</p>
<p class="calibre2">We won't go into details of how Sweave, LaTeX, or Pandoc transform files among different formats, since you won't have to operate them directly. We will focus on using R Markdown and knitr. However, we still need to make sure that we have all these tools installed in our system before we continue. Sweave is shipped within any R distribution. R Markdown and knitr can be installed within R. Pandoc and LaTeX should be installed directly into your computer. Specific instructions for Windows, macOS, and Linux can be found in <a href="part0296.html#8Q96G0-f494c932c729429fb734ce52cafce730" class="calibre4">Appendix</a>, <em class="calibre19">Required Packages</em>.</p>
<p class="calibre2">Finally, you should note that these are not the only tools available to produce automated content. As literate programming for R has become a topic of high interest, naturally, many tools have been, and continue to be, developed for it. Even though this chapter focuses on R Markdown and knitr, there are other tools such as <strong class="calibre1">R Studio's Presenter</strong> (<strong class="calibre1">RPres</strong>) and <strong class="calibre1">Slidify</strong>. We have not shown this tools in this book because they are either more restricted in their application or more complex in their usage. We believe that the R Markdown-knitr combination strikes a very good balance between power and ease of use, and it's our combination of choice. However, we encourage the reader to research other tools and find the best fit.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">A gentle introduction to Markdown</h1>
                
            
            <article>
                
<p class="calibre2">Markdown has various syntax versions that are supported by different systems and platforms. The one we show here is a general one that is useful throughout many systems, including R Markdown.</p>
<p class="calibre2">What we show in the following examples are the basic elements to structure content using Markdown. The actual aesthetics depend on what styles are being applied to your files. The examples shown as follows don't have any aesthetics applied to them. We will show you how to adjust them for our presentation later in the chapter.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Text</h1>
                
            
            <article>
                
<p class="calibre2">If you want simple text, you can simply write as you normally would. If you want to format the text, you can use pairs of asterisks (<kbd class="calibre9">*</kbd>) or underscores (<kbd class="calibre9">_</kbd>). The following table shows how to use pairs of asterisks. Underscores work the same way.</p>
<p class="calibre2"><span>If we use the following input:</span></p>
<pre class="mce-root">Text with *italic* text inside.<br class="title-page-name"/>Text with **bold** text inside.<br class="title-page-name"/>Text with **bold and *italic* text**.</pre>
<p class="calibre2">We get the following output:</p>
<p class="calibre2">Text with <em class="calibre19">italic</em> text inside.</p>
<p class="calibre2">Text with <strong class="calibre1">bold</strong> text inside.</p>
<p class="calibre2">Text with <strong class="calibre1"><em class="calibre19">bold and italic text</em></strong>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Headers</h1>
                
            
            <article>
                
<p class="calibre2">If you want, you can have the equivalent to sections (first-level headers), subsections (second-level headers), sub-subsections (third-level headers), and so on. The organizational structures are marked using a number sign, repeated as many times as the depth you want to produce in the document. A string like <kbd class="calibre9"># Header</kbd> would produce a first-level header, while <kbd class="calibre9">### Header</kbd> would create a third-level header.</p>
<p class="calibre2">If we use the following input:</p>
<pre class="mce-root"># Header Level 1

## Header Level 2

### Header Level 3

#### Header Level 4</pre>
<p class="calibre2">We get the following output:</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Header Level  1</h1>
                
            
            <article>
                


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Header Level  2</h1>
                
            
            <article>
                


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Header Level  3</h1>
                
            
            <article>
                


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Header Level  4</h1>
                
            
            <article>
                


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Lists</h1>
                
            
            <article>
                
<p class="calibre2">Lists can be ordered, unordered, and can be marked as tasks. These cover most cases you'll need, and they are very simple to use. For ordered lists, you can use hyphens (-) or asterisks (*), and you can nest them to create nested lists. For ordered lists, you can use numbers and letters. Finally, to create task lists, you simply need to put a pair of brackets at the beginning of an item ([]). If the brackets contain an X, then it means that the task has been completed. If the brackets have a space in between them, then the item is still pending.</p>
<p class="calibre2"><span>If we use the following input:</span></p>
<pre class="mce-root">1. This is an ordered item
    - This is an unordered item
    - This is another unordered item
2. This is another ordered item
    - [ ] This is a pending task
    - [X] This is a completed task
- [ ] This is another incomplete task
    1. Which contains one ordered item
    - And one unordered item</pre>
<p class="calibre2">Output</p>
<ol class="calibre14">
<li class="calibre12" value="1">This is an ordered item
<ul class="calibre56">
<li class="calibre12">This is an unordered item</li>
<li class="calibre12">This is another unordered item</li>
</ul>
</li>
<li class="calibre12" value="2">This is another ordered item
<ul class="calibre56">
<li class="calibre12">[ ] This is a pending task</li>
<li class="calibre12">[X] This is a completed task</li>
</ul>
</li>
</ol>
<ul class="calibre11">
<li class="calibre12">[ ] This is another incomplete task</li>
</ul>
<ol class="calibre14">
<li class="calibre12" value="1">Which contains one ordered item
<ul class="calibre56">
<li class="calibre12">And one unordered item</li>
</ul>
</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Tables</h1>
                
            
            <article>
                
<p class="calibre2">Tables are one of the most cumbersome structures to create when using Markdown. Having said that, it's still not hard to create them. If you align them, everything looks normal. However, most of the time, people don't align them, and they seem a bit odd if you're not used to the syntax. By non-aligned tables, we mean that there are no padding spaces after items so that vertical lines align. The table shown as follows is an aligned table.</p>
<p class="calibre2">If we use the following input:</p>
<pre class="mce-root">| First column | Second column | Third column |
|--------------|---------------|--------------|
| Item one     | Item two      | Item three   |
| Item four    | Item five     | Item six     |
| Item seven   | Item eight    | Item nine    |</pre>
<p class="calibre2">We get the following output:</p>
<table class="calibre5">
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><strong class="calibre1">First column</strong></p>
</td>
<td class="calibre8">
<p class="calibre2"><strong class="calibre1">Second column</strong></p>
</td>
<td class="calibre8">
<p class="calibre2"><strong class="calibre1">Third column</strong></p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2">Item one</p>
</td>
<td class="calibre8">
<p class="calibre2">Item two</p>
</td>
<td class="calibre8">
<p class="calibre2">Item three</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2">Item four</p>
</td>
<td class="calibre8">
<p class="calibre2">Item five</p>
</td>
<td class="calibre8">
<p class="calibre2">Item six</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2">Item seven</p>
</td>
<td class="calibre8">
<p class="calibre2">Item eight</p>
</td>
<td class="calibre8">
<p class="calibre2">Item nine</p>
</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Links</h1>
                
            
            <article>
                
<p class="calibre2">To provide links, you can simply write the link directly. If you want to name links so that only the name shows but not the URL, like the ones you see in web pages, you can use brackets containing the name followed immediately by parenthesis containing the actual link , in the format "[Name](URL)".</p>
<p class="calibre2">If we use the following input:</p>
<pre class="mce-root">[The R Project for Statistical Computing](https://www.r-project.org/) <br class="title-page-name"/>[Packt Publishing](https://www.packtpub.com/)</pre>
<p class="calibre2">We get the following output:</p>
<p class="calibre2"><a href="https://www.r-project.org/" class="calibre4"><span>The R Project for Statistical Computing</span></a></p>
<p class="calibre2"><a href="https://www.packtpub.com/" class="calibre4"><span>Packt Publishing</span></a></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Images</h1>
                
            
            <article>
                
<p class="calibre2">Images have a similar structure to links, but they are preceded by an exclamation mark (!). The name for the image (what is contained inside the brackets) is only shown if the actual image was not (for example, the file was not found in the specified route). The URL is replaced by the path to the image you want to show. By default, an image's size will be as large as possible. Under the assumption that the images are within a directory named images in the same directory as the Markdown file is, the following example works.</p>
<p class="calibre2">If we use the following input:</p>
<pre class="mce-root">[The R Project for Statistical Computing](./images/r.png) <br class="title-page-name"/><br class="title-page-name"/>[Packt Publishing](./images/packt-publishing.png)</pre>
<p class="calibre2">We get the following output:</p>
<div class="cdpaligncenter"><img src="../images/00055.jpeg" class="calibre57"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Quotes</h1>
                
            
            <article>
                
<p class="calibre2">Quotes are very useful when trying to emphasize points to the readers. They are also very easy to create. All you have to do is prepend a greater-than sign (&gt;) followed by a space at the beginning of a line.</p>
<p class="calibre2"><span>If we use the following input:</span></p>
<pre class="mce-root">&gt; Look deep into nature, and then you will understand everything better.
&gt;
&gt; —Albert Einstein</pre>
<p class="calibre2">We get the following output:</p>
<div class="packt_quote"> Look deep into nature, and then you will understand everything better. </div>
<div class="packt_quote">- Albert Einstein</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Code</h1>
                
            
            <article>
                
<p class="calibre2">Code can be embedded within text using single backticks (<kbd class="calibre9">`</kbd>) surrounding it, or can be used in independent blocks by using triple backticks (<kbd class="calibre9">```</kbd>). Optionally, you may specify the programming language in the code block to activate syntax highlighting for that code.</p>
<p class="calibre2"><span>If we use the following input:</span></p>
<pre class="mce-root">```r
add_two_numbers &lt;- function(x, y) {
    return(x + y)
}
```</pre>
<p class="calibre2">We get the following output:</p>
<pre class="mce-root">add_two_numbers &lt;- function(x, y) {
    return(x + y)
}</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Mathematics</h1>
                
            
            <article>
                
<p class="calibre2">Embedding mathematics in Markdown is similar to embedding code. However, instead of using backticks (“ ’), you use dollar signs ($). If you want to use mathematics blocks, you may use two (instead of three) dollar signs. Keep in mind that this is not a standard Markdown feature, and, even though R Markdown does support it, it may not be supported in other systems. If you're trying to create a web page using Markdown, to be able to use LaTeX-like code, you need to make sure that the system loads the <kbd class="calibre9">MathJax</kbd> library to the browser.</p>
<p class="calibre2"><span>If we use the following input:</span></p>
<pre class="mce-root">$$\Theta = \begin{pmatrix} \alpha &amp; \beta \\ \gamma &amp; \delta \end{pmatrix}$$</pre>
<p class="calibre2">We get the following output:</p>
<div class="cdpaligncenter"><img src="../images/00056.jpeg" class="calibre58"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Extending Markdown with R Markdown</h1>
                
            
            <article>
                
<p class="calibre2">As mentioned earlier, R Markdown extends Markdown. It offers many features to enhance it. There are various examples in R Markdown's documentation (<a href="http://rmarkdown.rstudio.com/gallery.html" target="_blank" class="calibre4">http://rmarkdown.rstudio.com/gallery.html</a>) where you may get a sense of what's possible. In this section, we will focus on code chunks, tables, graphs, local and global chunk options, and caching.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Code chunks</h1>
                
            
            <article>
                
<p class="calibre2"><em class="calibre19">Code chunks</em> are simply standard Markdown code blocks, which have a special syntax that uses curly braces (<kbd class="calibre9">{}</kbd>) along the top line of the block to send metadata to knitr, about how the block should be treated. The metadata sent is in the form of parameters with the <kbd class="calibre9"><em class="calibre19">key = value</em></kbd> <span>format</span>. We'll cover more on this in the <em class="calibre19">Chunk options</em> section.</p>
<p class="calibre2">When you use a block header like (<kbd class="calibre9">```{r chunk-label}</kbd>), knitr knows that it's an R code block which will be identified with the <kbd class="calibre9">chunk-label</kbd> label. The chunk label is not a requirement, and if you do not specify one, one will be automatically created for you, but they are useful when trying to remember the purpose of a code block and to reference images (more on this later).</p>
<p class="calibre2">Finally, you should note that whatever code you write inside a standard Markdown code block is not executed in any way, so it can be full of errors and nothing will happen. However, when using R Markdown code chunks, the code within an R block is actually evaluated when compiling the document, and if it contains errors, the document or presentation will not compile successfully until you fix them.</p>
<p class="calibre2"><span>If we use the following input:</span></p>
<pre class="mce-root">```{r optional-label}
1 + 2
```</pre>
<p class="calibre2">We get the following output:</p>
<pre class="mce-root">1 + 2<br class="title-page-name"/><strong class="calibre1">[1] 3</strong></pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Tables</h1>
                
            
            <article>
                
<p class="calibre2">In informal reports, you may just print out a matrix or data frame rather than creating a formal table. If you need to, there are multiple ways to make tables with R Markdown that may look a bit nicer. We show how to use <kbd class="calibre9">kable</kbd> from the <kbd class="calibre9">knitr</kbd> package, as it's the simplest one. If you need more control, you may look at the <kbd class="calibre9">xtable</kbd> package, which gives you complete control. You need to be sure to use <kbd class="calibre9">results = "asis"</kbd> in the code chunk.</p>
<p class="calibre2"><span>If we use the following input:</span></p>
<pre class="mce-root">```{r r-markdown-label, results = "asis"}
library(knitr)
x &lt;- rnorm(100)
y &lt;- 2 * x + rnorm(100)
coeficients &lt;- summary(lm(y ~ x))$coef
kable(coeficients, digits = 2)
```</pre>
<p class="calibre2">We get the following output:</p>
<table class="calibre5">
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre8"/>
<td class="calibre8"><strong class="calibre1">Estimate</strong></td>
<td class="calibre8"><strong class="calibre1">Std. error</strong></td>
<td class="calibre8"><strong class="calibre1">t value</strong></td>
<td class="calibre8"><strong class="calibre1">Pr(&gt;|t|)</strong></td>
</tr>
<tr class="calibre7">
<td class="calibre8">(Intercept)</td>
<td class="calibre8">0.02</td>
<td class="calibre8">0.10</td>
<td class="calibre8">0.21</td>
<td class="calibre8">0.83</td>
</tr>
<tr class="calibre7">
<td class="calibre8"><kbd class="calibre41">x</kbd></td>
<td class="calibre8">2.09</td>
<td class="calibre8">0.09</td>
<td class="calibre8">22.98</td>
<td class="calibre8">0.00</td>
</tr>
</tbody>
</table>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Graphs</h1>
                
            
            <article>
                
<p class="calibre2">Creating graphs with R Markdown is as easy as creating the within R. Actually, you don't need to do anything extra; knitr is smart enough to do it automatically. If you need to, specify the width and height for your image using the corresponding chunk options shown in the next section.</p>
<p class="calibre2"><span>If we use the following input:</span></p>
<pre class="mce-root">```{r basic-r-graph}
attach(mtcars)
plot(wt, mpg)
abline(lm(mpg ~ wt))
title("Regression of MPG on Weight")
```</pre>
<p class="calibre2">We get the following output:</p>
<div class="cdpaligncenter"><img src="../images/00057.jpeg" class="calibre59"/></div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Chunk options</h1>
                
            
            <article>
                
<p class="calibre2">When working with chunks we have a lot of flexibility, and this flexibility can be seen by the many options we may adjust. Here, we will only mention the most common ones. To avoid including the code as output, use <kbd class="calibre9">echo = FALSE</kbd>. To avoid showing the results, use <kbd class="calibre9">include = FALSE</kbd>. To avoid evaluating the code block, use <kbd class="calibre9">eval = FALSE</kbd>. To avoid showing warnings, use <kbd class="calibre9">warning = FALSE</kbd>. To set the figure width and height, use <kbd class="calibre9">fig.height = 10</kbd> and <kbd class="calibre9">fig.width = 10</kbd> with the actual numbers you want (units are inches by default). All of these can be used in the code chunk header shown as follows:</p>
<pre class="mce-root">```{r some-label, include = TRUE, eval = FALSE}
1 + 2
```</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Global chunk options</h1>
                
            
            <article>
                
<p class="calibre2">You may use global chunk options rather than repeated local chunk options. Whenever you need to, you can override a global chunk option by specifying a different local chunk option. Using the following code would make every code chunk have the <kbd class="calibre9">echo = TRUE</kbd> and <kbd class="calibre9">eval = FALSE</kbd> options enabled, unless otherwise specified at specific blocks:</p>
<pre class="mce-root">```{r global-options}
knitr::opts_chunk$set(echo = TRUE, eval = FALSE)
```</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Caching</h1>
                
            
            <article>
                
<p class="calibre2">As we mentioned earlier, knitr is not so useful if you are writing a very long document or one involving complex computations. However, you may avoid some of these problems by using caches. The basic issue is that if you have a long document or one involving lengthy computations, then every time you want to <em class="calibre19">refresh</em> your document, you need to recompile it, meaning that you need to rerun all the computations. This may not be a problem if your document is efficient or small. However, it can be inefficient to sit there and wait for every computation to run every single time. Chunk caching is one way to avoid those lengthy computations. By setting the <kbd class="calibre9">cache = TRUE</kbd> chunk option, knitr runs the chunk once and stores the output in your working directory. When you <em class="calibre19">reknit</em> the document, instead of running the code in that particular chunk, knitr will reload the stored output. If the code in the chunk changes at all, knitr will detect it and will rerun the code, storing the updated results.</p>
<p class="calibre2">There are some caveats to caching. In particular, by default, dependencies between chunks are not checked. If the results of a cached chunk depend on a previous chunk that has been modified, those changes will not necessarily propagate down to later cached chunks. Also, chunks with significant side effects, such as those writing output to files or interacting with the external environment in any way, may not be cacheable. As long as you are careful with these, you should not have any issues.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Producing the final output with knitr</h1>
                
            
            <article>
                
<p class="calibre2">Once you have a finished document or are ready to see its next iteration, you may compile within R Studio if you're using it or by executing the code that triggers the compilation. We will show the latter since it's more general and can be used by people who are not necessarily using R Studio. You simply need to execute the following lines, changing the filename <kbd class="calibre9">"document.Rmd"</kbd> with your own, and choosing the appropriate output:</p>
<pre class="mce-root">library(rmarkdown)
outputs &lt;- c("html_document", "pdf_document")
render("document.Rmd", outputs)</pre>
<p class="calibre2">We suggest that you create a <kbd class="calibre9">compile.R</kbd> file that contains those line, and execute it every time you want to recompile your document. The following outputs are available:.</p>
<table class="calibre5">
<tbody class="calibre6">
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><strong class="calibre1">String</strong></p>
</td>
<td class="calibre8">
<p class="calibre2"><strong class="calibre1">Output</strong></p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><kbd class="calibre9">html_document</kbd></p>
</td>
<td class="calibre8">
<p class="calibre2">HTML document</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><kbd class="calibre9">pdf_document</kbd></p>
</td>
<td class="calibre8">
<p class="calibre2">PDF document</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><kbd class="calibre9">word_document</kbd></p>
</td>
<td class="calibre8">
<p class="calibre2">Word document</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><kbd class="calibre9">10slides_presentation</kbd></p>
</td>
<td class="calibre8">
<p class="calibre2">HTML presentation, type 1</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><kbd class="calibre9">slidy_presentation</kbd></p>
</td>
<td class="calibre8">
<p class="calibre2">HTML presentation, type 2</p>
</td>
</tr>
<tr class="calibre7">
<td class="calibre8">
<p class="calibre2"><kbd class="calibre9">beamer_presentation</kbd></p>
</td>
<td class="calibre8">
<p class="calibre2">Beamer (LaTex) PDF presentation</p>
</td>
</tr>
</tbody>
</table>
<p class="calibre2"> </p>
<p class="calibre2">At this point, you should be able to create your own presentations. In the following sections, we will start building the presentation we want to actually develop for The Food Factory example.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Developing graphs and analysis as we normally would</h1>
                
            
            <article>
                
<p class="calibre2">As you saw in previous sections, you can work directly with our R Markdown file for the presentation (<kbd class="calibre9">presentation.Rmd</kbd>, in our case). However, you can be more productive if you first develop the content for the presentation as you would normally work with R, taking advantage of any configurations and tooling you may be accustomed to. When the code has been finalized, you translate only the necessary parts into the R Markdown file. Even though it seems counter intuitive because it would be more work, it's actually faster to work this way just because you're used to working with R more than with R Markdown, and you'll think about producing modular code that can be plugged into your presentation. This allows your to produce higher quality and reusable code. That's exactly what we will do here. We will start working with our usual <kbd class="calibre9">main.R</kbd> and <kbd class="calibre9">functions.R</kbd> files to develop what we need. Then, in a later section, we will migrate the code into our <kbd class="calibre9">presentation.Rmd</kbd> file.</p>
<p class="calibre2">Since we want to present the analysis we have developed during the last couple of chapters and we shouldn't rewrite code, we will bring some of it back from <a target="_blank" href="part0091.html#2MP360-f494c932c729429fb734ce52cafce730" class="calibre4">Chapter 4</a>, <em class="calibre19">Simulating Sales Data and Working with Databases</em>, as well as the data that we simulated for <strong class="calibre1">The Food Factory</strong>:</p>
<pre class="mce-root">source("../../chapter-05/functions.R")
all_time &lt;- readRDS("../../chapter-04/results/sales.rds")</pre>
<p class="calibre2">Note that using the <kbd class="calibre9">source()</kbd> function, as we did, loads into memory all of the functions we have in the functions file from <a target="_blank" href="part0110.html#38STS0-f494c932c729429fb734ce52cafce730" class="calibre4">Chapter 5</a>, <em class="calibre19">Communicating Sales with Visualization</em>. This may or may not be what you actually need, and if you're not careful, you may end up overwriting a function definition when doing so. In this particular case, it's not a problem, so we'll leave it as is. If it were a problem, we could always move the desired function into its own file and just <kbd class="calibre9">source</kbd> that file. The function we are interested in is the following:</p>
<pre class="mce-root">filter_n_days_back &lt;- function(data, n) {
    if (is.null(n)) {
        return(data)
    }
    n_days_back &lt;- Sys.Date() - n
    return(data[data[, "DATE"] &gt;= n_days_back, ])
}</pre>
<p class="calibre2">Let's suppose that a long time has passed since you first simulated the data. If you execute a function call like <kbd class="calibre9">filter_n_days_back(data, 7)</kbd>, you are not guaranteed to have the data for the previous week, and you'll most likely get an empty result due to <kbd class="calibre9">n_days_back &lt;- Sys.Date() - n</kbd> containing  data of 7 days back from <kbd class="calibre9">today</kbd>, not the last date recorded in the data. That's a problem.</p>
<p class="calibre2">How to deal with situations like these can take you down a long debate with your peers. In general, we have two options: rewrite an independent function, or fix the code we already have. The right answer will depend on your specific circumstances and context, and both of them have their advantages and disadvantages. In general, when you write a new function, you'll be certain that your code works and that you didn't accidentally break someone else's code, which depended on the previous version. The disadvantage is that you'll have to maintain more code without gaining much functionality, and over time, this can be a huge pain. Remember the DRY principle we mentioned before? <strong class="calibre1">Don't Repeat Yourself</strong> (<strong class="calibre1">DRY</strong>). If you decide to fix the current version of the code, you will possibly end up with a more robust code base that you can reuse for even more cases that you initially anticipated without increasing too much (sometimes decreasing) the code you need to maintain. However, there's also the possibility that you break code that depended on the previous functionality, which can be very tricky to fix down the road when you realize that you did.</p>
<p class="calibre2">There are two basic fundamentals that will save you from strong headaches when dealing with these types of situations. We have been using one of them throughout this book: developing small and modular code. By small, we mean code that follows the <em class="calibre19">Single Responsibility</em> principle, mentioned in <a target="_blank" href="part0022.html#KVCC0-f494c932c729429fb734ce52cafce730" class="calibre4">Chapter 1</a>, <em class="calibre19">Introduction to R</em>. When you do, something magical happens; you start plugging in code to other code and you can easily modify those plugins and create new ones as you need them without too much trouble. The other fundamental is having unit tests for your code. Simply put, unit tests are pieces of code designed to test that other code is performing as it should. Unit testing is out of the scope for this book, but it's something you should definitely study if you don't already know.</p>
<p class="calibre2">Going back to the code for this specific example, we choose to fix the code we already have. For us to make sure that we don't accidentally break other code that depends on this function, we follow the <em class="calibre19">Open-Closed</em> principle, which states that objects should be open for extensions and closed for modification (<a href="https://www.cs.duke.edu/courses/fall07/cps108/papers/ocp.pdf" target="_blank" class="calibre4">https://www.cs.duke.edu/courses/fall07/cps108/papers/ocp.pdf</a>).</p>
<p class="calibre2">Basically, we will extend the interface without modifying it in such a way that the output is the same when using the same previous inputs, but the extended version will allow us to get the new outputs we want. It sounds more cumbersome than it really is. As you can see, we simply add a new optional parameter with a default value of <kbd class="calibre9">NULL</kbd>. Then, instead of computing <kbd class="calibre9">n_days_back</kbd> with the current date, we check to see if any value was sent; if it was, then we use that as the starting point; if not, we go back to the old behavior:</p>
<pre class="mce-root">filter_n_days_back &lt;- function(data, n, from_date = NULL) {
    if (is.null(n)) {
        return(data)
    }
    if (is.null(from_date)) {
        from_date &lt;- Sys.Date()
    } else if (is.character(from_date)) {
        from_date &lt;- as.Date(from_date)
    }
    n_days_back &lt;- from_date - n
    return(data[data[, "DATE"] &gt;= n_days_back, ])
}</pre>
<p class="calibre2">Now that we have this new version of the function, we can actually use it to take the last week in the data by computing the maximum date we have recorded in it, and using that as our <kbd class="calibre9">from_date</kbd> parameter. Also, note how easy it is to take not only the data for this week, but also from last week. However, for this to work, we need to make sure that the <kbd class="calibre9">max_date</kbd> object is a <kbd class="calibre9">Date</kbd> object in R, so that we can subtract 7 from it, and it actually means 7 days. If it's a string instead of a date, we would get an error.</p>
<p class="calibre2">As a side note, note that if were using data that is constantly being recorded, <em class="calibre19">this week</em> and <em class="calibre19">last week</em> would make perfect sense, but since we're using data we simulated possibly a long time ago, <em class="calibre19">this week</em> and <em class="calibre19">last week</em> will vary depending on the dates in the actual data we're using. That's not a problem because we're using the <em class="calibre19">maximum</em> date in the data, which will be adjusted accordingly for each situation:</p>
<pre class="mce-root">max_date &lt;- max(all_time$DATE)
this_week &lt;- filter_n_days_back(all_time, 7, max_date)
last_week &lt;- filter_n_days_back(all_time, 7, max_date - 7)</pre>
<p class="calibre2">Now that we have the three datasets we need (<kbd class="calibre9">all_time</kbd>, <kbd class="calibre9">last_week</kbd>, and <kbd class="calibre9">this_week</kbd>), we can start developing the code that will use them to create the graphs we're looking for. First, we need to get proportion tables for each variable of interest and for each dataset. As always, we want to wrap code that is not very explicit about its functionality into its own function so that we can assign a name to it and quickly know what it's supposed to do. In this case, we create the <kbd class="calibre9">proportion_table()</kbd> function, which should be self-explanatory, and we apply it as mentioned. Note that we're multiplying by <kbd class="calibre9">100</kbd>, because we want to show <kbd class="calibre9">20%</kbd> instead of <kbd class="calibre9">0.2</kbd> in our graphs:</p>
<pre class="mce-root">proportions_table &lt;- function(data, variable) {
    return(prop.table(table(data[, variable])))
}<br class="title-page-name"/><br class="title-page-name"/>quantity_all &lt;- proportions_table(all_time, "QUANTITY")
continent_all &lt;- proportions_table(all_time, "CONTINENT")
protein_all &lt;- proportions_table(all_time, "PROTEIN_SOURCE")
<br class="title-page-name"/>quantity_last &lt;- proportions_table(last_week, "QUANTITY")
continent_last &lt;- proportions_table(last_week, "CONTINENT")
protein_last &lt;- proportions_table(last_week, "PROTEIN_SOURCE")
<br class="title-page-name"/>quantity_this &lt;- proportions_table(this_week, "QUANTITY")
continent_this &lt;- proportions_table(this_week, "CONTINENT")
protein_this &lt;- proportions_table(this_week, "PROTEIN_SOURCE")</pre>
<p class="calibre2">At this point, each of these objects should contain a table with the percentage of each category within the variable of interest. Those ending with <kbd class="calibre9">_all</kbd> contain the percentages for all the data recorded. Similarly, those ending with <kbd class="calibre9">_last</kbd> and <kbd class="calibre9">_this</kbd> contain the percentages for last week and this week, respectively. The number of decimal points will depend on the actual data and your configuration. In all cases, the numbers should add up to 100:</p>
<pre class="mce-root">quantity_all
<strong class="calibre1">#&gt;     1     2     3     4    5    6    7    8    9
#&gt; 13.22 27.78 26.09 18.29 9.19 3.77 1.29 0.30 0.07
</strong>
quantity_last
<strong class="calibre1">#&gt;       1       2       3       4      5      6      7      8
#&gt; 12.1387 33.5260 28.3234 12.7160 5.7803 5.7803 1.1560 0.5780</strong>

quantity_this
<strong class="calibre1">#&gt;  1  2  3  4  5  6  7  8
#&gt; 12 36 25 14  7  4  1  1</strong></pre>
<p class="calibre2">The careful reader should have noticed that <kbd class="calibre9">quantity_all</kbd> contains one more category than <kbd class="calibre9">quantity_last</kbd> and <kbd class="calibre9">quantity_this</kbd>. That's because in the last two weeks in the data, there were no sales for nine items. This means that when we try to compare the count change in each of these categories, we will have a problem due to the extra category in <kbd class="calibre9">quantity_all</kbd>. We will deal with it by keeping only categories that are shared among any table pair we're using. The <kbd class="calibre9">equal_length_data()</kbd> function receives two of these tables as <kbd class="calibre9">data_1</kbd> and <kbd class="calibre9">data_2</kbd>, then, it computes the minimum length (<kbd class="calibre9">ml</kbd>) among them and uses it to get elements up to that point in both <kbd class="calibre9">data_1</kbd> and <kbd class="calibre9">data_2</kbd>. Since both of them are tables at this point, we want the numeric array of its values, not the table object, that's why we apply the <kbd class="calibre9">as.numeric()</kbd>. If we don't do so, <kbd class="calibre9">ggplot2</kbd> will complain about not knowing how to deal with objects of type <kbd class="calibre9">table</kbd>. We don't lose the category names by applying the <kbd class="calibre9">as.numeric()</kbd> function to the tables because we're taking those separately in the <kbd class="calibre9">names</kbd> element of the returned list. Finally, we want to know if any categories were deleted, and we can know that by checking if the length of any of the data tables contains less categories than the <kbd class="calibre9">ml</kbd> number indicates. If that's the case, <kbd class="calibre9">deleted</kbd> will be <kbd class="calibre9">TRUE</kbd> and will be sent, and it will be <kbd class="calibre9">FALSE</kbd> otherwise:</p>
<pre class="mce-root">equal_length_data &lt;- function(data_1, data_2) {
    ml &lt;- min(length(data_1), length(data_2))
    return(list(
        names = names(data_1[1:ml]),
        data_1 = as.numeric(data_1[1:ml]),
        data_2 = as.numeric(data_2[1:ml]),
        deleted = ml != length(data_1) || ml != length(data_2))<br class="title-page-name"/>    )
}</pre>
<p class="calibre2">We now have access to data with equal length, with the corresponding category names, and with a Boolean value indicating whether any categories were deleted. We can use this object as follows:</p>
<pre class="mce-root">parts &lt;- equal_length_data(quantity_all, quantity_this)

parts$names
<strong class="calibre1">#&gt; [1] "1" "2" "3" "4" "5" "6" "7" "8"</strong>

parts$data_1
<strong class="calibre1">#&gt; [1] 0.1322 0.2778 0.2609 0.1829 0.0919 0.0377 0.0129 0.0030</strong>

parts$data_2
<strong class="calibre1">#&gt; [1] 0.12 0.36 0.25 0.14 0.07 0.04 0.01 0.01</strong>

parts$deleted
<strong class="calibre1">#&gt; [1] TRUE</strong></pre>
<p class="calibre2">Now, we will focus on preparing the data for our graphs. As we will be using the <kbd class="calibre9">ggplot2</kbd> package, we know we need to create a dataframe. This dataframe should contain category names in <kbd class="calibre9">Category</kbd>, the absolute and percent differences among matching categories from the two tables in the <kbd class="calibre9">Difference</kbd> and <kbd class="calibre9">Percent</kbd>, respectively, the <kbd class="calibre9">Sign</kbd> and <kbd class="calibre9">Color</kbd> depending on whether the absolute difference is positive or negative, and the <em class="calibre19">before</em> and <em class="calibre19">after</em> data in <kbd class="calibre9">Before</kbd> and <kbd class="calibre9">After</kbd>, respectively. Note that the order in which the <kbd class="calibre9">parts</kbd> were computed is important for the absolute and percent differences, which in turn impact the color and sign. We must be careful of sending the latest data as <kbd class="calibre9">data_2</kbd> so that we get an interpretation like <em class="calibre19">compared to last week, this week we had X more</em>. Otherwise, the interpretation would be inverted:</p>
<pre class="mce-root">prepare_data &lt;- function(parts) {
    data &lt;- data.frame("Category" = parts$names)
    data$Difference &lt;- parts$data_2 - parts$data_1
    data$Percent &lt;- (parts$data_2 - parts$data_1) / parts$data_1 * 100
    data$Sign &lt;- ifelse(data$Difference &gt;= 0, "Positive", "Negative")
    data$Color &lt;- ifelse(data$Difference &amp;gt;= 0, GREEN, RED)
    data$Before &lt;- parts$data_1
    data$After &lt;- parts$data_2
    return(data)
}</pre>
<p class="calibre2">We will define two colors using hexadecimal notation so that we can call them by name instead of copying the hexadecimal string every time. Later, if we want to change the colors, we can change them in a single place instead of replacing them everywhere we used them:</p>
<pre class="mce-root">RED &lt;- "#F44336"
GREEN &lt;- "#4CAF50"</pre>
<p class="calibre2">If you read <a target="_blank" href="part0110.html#38STS0-f494c932c729429fb734ce52cafce730" class="calibre4">Chapter 5</a>, <em class="calibre19">Communicating Sales with Visualizations</em>, the <kbd class="calibre9">difference_bars()</kbd> function should be clear. As you can see, we are computing the <kbd class="calibre9">parts</kbd> and <kbd class="calibre9">data</kbd> objects using the functions shown earlier, and then we use the <kbd class="calibre9">ggplot2</kbd> package to develop the graph. Note that we only add a subtitle containing the indication that some categories have been deleted if the <kbd class="calibre9">deleted</kbd> Boolean from <kbd class="calibre9">parts</kbd> is <kbd class="calibre9">TRUE</kbd>:</p>
<pre class="mce-root">difference_bars &lt;- function(data_1, data_2, before, after) {
    parts &lt;- equal_length_data(data_1, data_2)
    data &lt;- prepare_data(parts)
    p &lt;- ggplot(data, aes(Category, Difference, fill = Sign))
    p &lt;- p + geom_bar(stat = "identity", width = 0.5)
    p &lt;- p + scale_fill_manual(values = <br class="title-page-name"/>    c("Positive" = GREEN, "Negative" = RED))
    p &lt;- p + theme(legend.position = "none", <br class="title-page-name"/>    text = element_text(size = 14))
    p &lt;- p + scale_y_continuous(labels = scales::percent)
    p &lt;- p + labs(title = paste(before, "vs", after))
    p &lt;- p + labs(x = "", y = "")
    if (parts$deleted) {
        p &lt;- p + labs(subtitle = <br class="title-page-name"/>            "(Extra categories have been deleted)")
    }
    return(p)
}</pre>
<p class="calibre2">Now we can create some useful graphs, as follows. Keep in mind that the values in the <em class="calibre19">y</em> axis do not indicate a percentage growth, but a change in percentage points. This can be immediately understood by looking at the code, but it is not clear when looking at the graph. In reality, we would have to include some explanation for this in a real presentation:</p>
<pre class="mce-root">difference_bars(quantity_all, quantity_this, "This week", "All-time")
difference_bars(continent_all, continent_this, "This week", "All-time")
difference_bars(protein_all, protein_this, "This week", "All-time")</pre>
<p class="calibre2">The resulting graphs are shown as follows:</p>
<div class="cdpaligncenter"><img src="../images/00058.jpeg" class="calibre22"/></div>
<p class="calibre2">The second type of graph we want to develop is a bit more complex. We will create vertical lines at 1 and 2 along the <em class="calibre19">x</em> axis, place text labels indicating where the percentage for each category is in the <kbd class="calibre9">before</kbd> and <kbd class="calibre9">after</kbd> data sets, and the change percentage in the middle. First, we create the <kbd class="calibre9">data</kbd> object as we did before. Next, we create the labels we will use for each category. The ones one the left are the <kbd class="calibre9">before_labels</kbd>, the ones in the center are the <kbd class="calibre9">percent_labels</kbd>, and the ones in the right are the <kbd class="calibre9">after_labels</kbd>.</p>
<p class="calibre2">The <kbd class="calibre9">percent_y</kbd> contains the values for the y axis where the <kbd class="calibre9">percent_labels</kbd> will be placed. The <em class="calibre19">x</em> axis value is fixed at 1.5 so that it's between the two vertical lines. To compute the <kbd class="calibre9">percent_y</kbd> value, we want to get the minimum between the before and after values for each category and add half the difference between them. This will make sure that the value is at the middle of the line that will join both values.</p>
<p class="calibre2">We are now ready to start using the <kbd class="calibre9">ggplot2</kbd> package. First, we define the data as we normally would and add a segment joining the <em class="calibre19">before</em> and <em class="calibre19">after</em> values for each category by starting at the <kbd class="calibre9">$(1, Before)$</kbd> tuple and ending at the <kbd class="calibre9">$(2, After)$</kbd> tuple, where each tuple has the form <kbd class="calibre9">$(x, y)$</kbd>. We will use the <kbd class="calibre9">Sign</kbd> variable as the <em class="calibre19">fill</em> color for the bars, and avoid showing a legend since we will show some labels ourselves. We will use the <em class="calibre19">scale_color_manual()</em> function to specify the colors that should be used for each line depending on whether the absolute difference was positive or negative.</p>
<p class="calibre2">Next come the vertical lines, which are created with the <kbd class="calibre9">geom_vline()</kbd> function. As mentioned before, they will be placed at values 1 and 2 along the <em class="calibre19">x</em> axis. We will make the line dashed to improve aesthetics and use a smaller size than the segment lines we created before.</p>
<p class="calibre2">Next,  we will place the labels using the <kbd class="calibre9">geom_text()</kbd> function. We start creating the label for each of the vertical lines, which are created at 0.7 and 2.3 <em class="calibre19">x</em> axis values, and a slightly increased maximum of the <em class="calibre19">before</em> and <em class="calibre19">after</em> values. Then, we place the labels for the categories in the left, center, and right using the <kbd class="calibre9">geom_text_repel()</kbd> function. This function is not included in the <kbd class="calibre9">ggplot2</kbd> package, and it's actually an extension for it. It is designed to <em class="calibre19">repel</em> (hence the name) labels that overlap each other. To do so, the function moves labels away from the point's position and draws a line that indicates which label belongs to each point. You can find nice examples on its website (<a href="https://cran.r-project.org/web/packages/ggrepel/vignettes/ggrepel.html" target="_blank" class="calibre4">https://cran.r-project.org/web/packages/ggrepel/vignettes/ggrepel.html</a>). In our case, we remove said line with the <em class="calibre19">segment.color = NA</em> parameter and indicate that the direction for adjustment is only along the <em class="calibre19">y</em> axis.</p>
<p class="calibre2">In reality, it's very hard for someone to come up with all of this code on their first attempt, and our case was no different. We started with some small plots and continuously added the elements we were looking for through iterated experimentation. In particular, we realized that some labels were overlapping each other, which doesn't look great, and so we decided to use the <kbd class="calibre9">geom_text_repl()</kbd> package, which we did not previously know, but easily found online since many people have the same problem and luckily someone had developed a solution for it.</p>
<p class="calibre2">The <kbd class="calibre9">x_adjustment</kbd> parameter is a result of similar experimentation. We realized that different graph's labels were overlapping the vertical lines depending on the number of characters in the category names. To fix that, we decided to introduce a new parameter that adjusts the position along the x axis that can be experimented with until we find a good parameter for it. All this is to say that you should take advantage of R's rapid experimentation cycles to iteratively produce what you're looking for.</p>
<p class="calibre2">Finally, we remove any text from the x and y axes and limit their range of values because they are unnecessary to read the graph and provide a cleaner visualization. It may take a bit of experimentation for you to understand exactly what each part of the code is doing, which is totally fine, and you should definitely do so:</p>
<pre class="mce-root">change_lines &lt;- function(data_1, data_2, before, after, x_adjustment) {
    parts &lt;- equal_length_data(data_1, data_2)
    data &lt;- prepare_data(parts)
    percent_labels &lt;- paste(round(data$Percent, 2), "%", sep = "")
    before_labels &lt;- paste(
        data$Category, " (", round(data$Before, 2), "%)", sep = "")
    after_labels &lt;- paste(
        data$Category, " (", round(data$After, 2), "%)", sep = "")
    percent_y &lt;- (
        apply(data[, c("Before", "After")], 1, min) +
        abs(data$Before - data$After) / 2<br class="title-page-name"/>    )<br class="title-page-name"/><br class="title-page-name"/>    p &lt;- ggplot(data)
    p &lt;- p + geom_segment(<br class="title-page-name"/>        aes(x = 1, xend = 2, y = Before, yend = After, col = Sign), <br class="title-page-name"/>        show.legend = FALSE, <br class="title-page-name"/>        size = 1.5)
<br class="title-page-name"/>    p &lt;- p + scale_color_manual(<br class="title-page-name"/>        values = c("Positive" = GREEN, "Negative" = RED))<br class="title-page-name"/><br class="title-page-name"/>    p &lt;- p + geom_vline(xintercept = 1, linetype = "dashed", size = 0.8)
    p &lt;- p + geom_vline(xintercept = 2, linetype = "dashed", size = 0.8)<br class="title-page-name"/>    p &lt;- p + geom_text(<br class="title-page-name"/>        label = before, <br class="title-page-name"/>        x = 0.7, <br class="title-page-name"/>        y = 1.1 * max(data$Before, data$After), <br class="title-page-name"/>        size = 7)<br class="title-page-name"/><br class="title-page-name"/>    p &lt;- p + geom_text(<br class="title-page-name"/>        label = after, <br class="title-page-name"/>        x = 2.3, <br class="title-page-name"/>        y = 1.1 * max(data$Before, data$After), <br class="title-page-name"/>        size = 7)
<br class="title-page-name"/>    p &lt;- p + geom_text_repel(<br class="title-page-name"/>        label = before_labels, <br class="title-page-name"/>        x = rep(1 - x_adjustment, nrow(data)), <br class="title-page-name"/>        y = data$Before, size = 5, direction = "y", <br class="title-page-name"/>        segment.color = NA)
<br class="title-page-name"/>    p &lt;- p + geom_text_repel( label = after_labels, <br class="title-page-name"/>        x = rep(2 + x_adjustment, nrow(data)), <br class="title-page-name"/>        y = data$After, size = 5, <br class="title-page-name"/>        direction = "y", <br class="title-page-name"/>        segment.color = NA)
<br class="title-page-name"/>    p &lt;- p + geom_text_repel(label = percent_labels, <br class="title-page-name"/>        x = rep(1.5, nrow(data)), <br class="title-page-name"/>        y = percent_y, col = data$Color, size = 5, <br class="title-page-name"/>        direction = "y", <br class="title-page-name"/>        segment.color = NA)
<br class="title-page-name"/>    p &lt;- p + theme(
        axis.ticks = element_blank(),
        axis.text.x = element_blank(),
        axis.text.y = element_blank()
    )
<br class="title-page-name"/>    p &lt;- p + ylim(0, (1.1 * max(data$Before, data$After)))
    p &lt;- p + labs(x = "", y = "")
    p &lt;- p + xlim(0.5, 2.5)
    return(p)
}</pre>
<div class="cdpaligncenter"><img src="../images/00059.jpeg" class="calibre22"/></div>
<p class="calibre2">Now, we can present some very useful and nice-looking graphs with the following code:</p>
<pre class="mce-root">change_lines(quantity_last, quantity_this, "This week", "Last week", 0.2)
change_lines(continent_last, continent_this, "This week", "Last week", 0.3)
change_lines(protein_last, protein_this, "This week", "Last week", 0.5)</pre>
<p class="calibre2">These graphs can be easily interpreted and don't seem to be as vulnerable to the <em class="calibre19">x</em> axis percentage units problem we mentioned for the previous graphs. You can easily see if a category increased or decreased its percentage among periods, and by how much percentage. Keep in mind that the plots for <em class="calibre19">all-time</em> also contain <em class="calibre19">this week</em> when interpreting them. In reality, this may or may not be correct for your specific use case.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Building our presentation with R Markdown</h1>
                
            
            <article>
                
<p class="calibre2">In this section, we will develop our presentation's R Markdown file. We create an empty file named <kbd class="calibre9">presentation.R</kbd> and put the following headers in. The quotation marks are not required unless you want to include a colon in the title. As shown in a previous section, using backticks (“ ’), we can execute R code. In this case, we put the current date automatically in the front page. Finally, we chose <kbd class="calibre9">ioslides_presentation</kbd> as an output format. Feel free to experiment with the other outputs shown previously:</p>
<pre class="mce-root">---
title:  "The Food Factory"
author: "Weekly Update"
date:   "`r Sys.Date()`"
output: ioslides_presentation
---</pre>
<p class="calibre2">The following code sets up the default configuration for the <em class="calibre19">code chunks</em> in our presentation. We avoid showing code in the presentation with <kbd class="calibre9">echo = FALSE</kbd> and make each picture full width unless stated otherwise with <kbd class="calibre9">out.width = '100%'</kbd>:</p>
<pre class="mce-root">```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, out.width = '100%')
```</pre>
<p class="calibre2">Now, we need to bring all the resources we need for our presentation to work. Specifically, we need to load the functions we have developed along the last three chapters. Load the data <kbd class="calibre9">sales</kbd> and <kbd class="calibre9">client_messages</kbd> data and apply the same transformation we have seen in previous chapters to set up the data. Note that in this chapter, we referenced the sales data as <kbd class="calibre9">all_time</kbd> instead of <kbd class="calibre9">sales</kbd>, and to avoid changing our code so that we can still easily reference our development files, we simply copy the <kbd class="calibre9">sales</kbd> object into the <kbd class="calibre9">all_time</kbd> object. Be careful when doing this if you have tight memory restrictions in your system:</p>
<pre class="mce-root">```{r load-functions-and-data, include=FALSE}
source("../functions.R")
source("../../chapter-05/functions.R")
source ("../../chapter-06/functions.R")

sales           &lt;- readRDS("../../chapter-04/results/sales.rds")
client_messages &lt;- readRDS("../../chapter-04/results/client_messages.rds")
sales           &lt;- add_profits(sales)

all_time  &lt;- sales
max_date  &lt;- max(all_time$DATE)
this_week &lt;- filter_n_days_back(all_time, 7, max_date)
last_week &lt;- filter_n_days_back(all_time, 7, max_date - 7)

quantity_all   &lt;- proportions_table(all_time, "QUANTITY")
continent_all  &lt;- proportions_table(all_time, "CONTINENT")
protein_all    &lt;- proportions_table(all_time, "PROTEIN_SOURCE")

quantity_last  &lt;- proportions_table(last_week, "QUANTITY")
continent_last &lt;- proportions_table(last_week, "CONTINENT")
protein_last   &lt;- proportions_table(last_week, "PROTEIN_SOURCE")

quantity_this  &lt;- proportions_table(this_week, "QUANTITY")
continent_this &lt;- proportions_table(this_week, "CONTINENT")
protein_this   &lt;- proportions_table(this_week, "PROTEIN_SOURCE")
```</pre>
<p class="calibre2">Now that our resources have been set up, we can work on the code that will actually show our analysis in the presentation. We start with the slides that use the functions we developed previously in this chapter to show changes using bars and lines. Note that we are specifying different heights in each case for bar and line graphs. Also note that we're using a 50% width for line graphs. That's because we want them to appear vertically in the slide. A 50% width with a height of 10 achieves that distribution.</p>
<p class="calibre2">In reality, you may want to choose better titles for each slide, but we will keep them obvious for this example. Note that working this way, we avoid placing any logic code in our slides, and by simply reading the function titles, we know exactly what will be shown. This lets you easily move things around without breaking things up due to dependencies among pieces of code since we have abstracted that into separate files. If you fill your presentation files with R logic, you'll quickly find it very confusing when you need to change them. It's better to have that logic in an actual <kbd class="calibre9">.R</kbd> file, as we do with our <kbd class="calibre9">functions.R</kbd> file. Not to mention that it's also much more reusable that way:</p>
<pre class="mce-root">## Changes in quantity (1/2)

```{r quantity-bars, fig.height = 2.5}
difference_bars_absolute(quantity_last, quantity_this, "This week", "Last week")
difference_bars_absolute(quantity_all, quantity_this, "This week", "All-time")
```

## Changes in quantity (2/2)

```{r quantity-lines, out.width = '50%', fig.height = 10}
change_lines(quantity_last, quantity_this, "This week", "Last week", 0.2)
change_lines(quantity_all, quantity_this, "This week", "All-time", 0.2)
```

## Changes in continent (1/2)

```{r continent-bars, fig.height = 2.5}
difference_bars_absolute(continent_last, continent_this, "This week", "Last week")
difference_bars_absolute(continent_all, continent_this, "This week", "All-time")
```

## Changes in continent (2/2)

```{r continent-lines, out.width = '50%', fig.height = 10}
change_lines(continent_last, continent_this, "This week", "Last week", 0.3)
change_lines(continent_all, continent_this, "This week", "All-time", 0.3)
```

## Changes in protein source (1/2)

```{r protein-source-bars, fig.height = 2.5}
difference_bars_absolute(protein_last, protein_this, "This week", "Last week")
difference_bars_absolute(protein_all, protein_this, "This week", "All-time")
```

## Changes in protein source (2/2)

```{r protein-source-lines, out.width = '50%', fig.height = 10}
change_lines(protein_last, protein_this, "This week", "Last week", 0.5)
change_lines(protein_all, protein_this, "This week", "All-time", 0.5)
```</pre>
<p class="calibre2">Now, we will add function calls to code we developed in previous chapters. As you can see, the process is exactly the same since we have already loaded those resources at this point in the <kbd class="calibre9">load-functions-and-data</kbd> code chunk shown earlier. All we have to do is actually call the functions that produce the graphs for us. If you can't remember what these functions do, we suggest to go back to their corresponding chapters to go over the details on how they were created.</p>
<p class="calibre2">As you can see, the last slide from this <em class="calibre19">code chunk</em> calls the <kbd class="calibre9">graph_client_messages_interactive()</kbd> function that produces the interactive map you could move around in <a target="_blank" href="part0110.html#38STS0-f494c932c729429fb734ce52cafce730" class="calibre4">Chapter 5</a>, <em class="calibre19">Communicating Sales with Visualizations</em>. A great thing about creating presentations this way is that you can actually play around with the map within the presentation! Of course, this will only work if you're using an output format that uses the web browser for visualization (it will not work with PDFs or Word documents, for example), but it can be a fantastic way to add powerful content to your presentations if you're using a web browser to visualize them:</p>
<pre class="mce-root">## Profit ratio vs continent

```{r sales-proft-ratio-by-continent-and-protein-source }
graph_bars(sales, "CONTINENT", "PROFIT_RATIO", "PROTEIN_SOURCE")
```

## Cost vs price

```{r price-vs-cost}
graph_marginal_distributions(sales, "COST", "PRICE", "PROTEIN_SOURCE", "CONTINENT")
```

## Price vs profit

```{r price-vs-profit-ratio}
graph_marginal_distributions(sales, "PRICE", "PROFIT_RATIO", "PROTEIN_SOURCE", "CONTINENT")
```
## Historic pricing

```{r date-vs-frequency-profit-and-profit-ratio, fig.height = 1.8}
graph_last_n_days(sales, 30, color = "PROTEIN_SOURCE")
graph_last_n_days(sales, 30, "PROFIT", "PROTEIN_SOURCE")
graph_last_n_days(sales, 30, "PROFIT_RATIO", "PROTEIN_SOURCE")
```

## Top 5 customers' preferences

```{r top-customers-preferences}
subset &lt;- filter_data(sales, 30, 5, "CLIENT_ID")
graph_radar(subset, "CLIENT_ID")
```

## Customer messages geolocations

```{r customers-dynamic-map}
graph_client_messages_interactive(client_messages, sales)
```</pre>
<p class="calibre2">Finally, we want to show the latest tweets using actual live Twitter data. Since The Food Factory company that we have alluded to during this example is fictitious, we can't really get data for it, but we will still search Twitter for <em class="calibre19">The Food Factory</em> phrase and show the top 5 results we get back. In reality, you can retrieve tweets that mention a specific account you're interested in, and be more creative with the querying process. We will keep it simple for this example.</p>
<p class="calibre2">The first thing we must do, as shown in <a target="_blank" href="part0129.html#3R0OI0-f494c932c729429fb734ce52cafce730" class="calibre4">Chapter 6</a>, <em class="calibre19">Understanding Reviews with Text Analysis</em>, is to identify ourselves with Twitter's API so that we can retrieve data. If you don't remember how to do so, take a look at said chapter. Since we want to execute this piece of code but we don't want to show it or its output, we simply apply the option <kbd class="calibre9">include = FALSE</kbd>. Note that we keep the slide title on top of the authentication code as a sign to ourselves that this code belongs to this slide's logic:</p>
<pre class="mce-root">## Latest messages from Twitter

```{r twitter-setup, include = FALSE}
consumer_key    &lt;- "b9SGfRpz4b1rnHFtN2HtiQ9xl"
consumer_secret &lt;- "YMifSUmCJ4dlgB8RVxKRNcTLQw7Y4IBwDwBRkdz2Va1vcQjOP0"
access_token    &lt;- "171370802-RTl4RBpMDaSFdVf5q9xrSWQKxtae4Wi3y76Ka4Lz"
access_secret   &lt;- "dHfbMtmpeA2QdOH5cYPXO5b4hF8Nj6LjxELfOMSwHoUB8"
setup_twitter_oauth(consumer_key, consumer_secret, access_token, access_secret)
```</pre>
<p class="calibre2">Next, we put in another <em class="calibre19">code chunk</em> that actually produces the output we want to show in the slide. We are getting data from Twitter using the <kbd class="calibre9">get_twitter_data()</kbd> we created in the previous chapter, and we pass it through the <kbd class="calibre9">format_tweets()</kbd> function we will show next:</p>
<pre class="mce-root">```{r twitter-live-data, size = "footnotesize", comment = ""}
format_tweets(get_twitter_data("The Food Factory", 5))
```</pre>
<p class="calibre2">This <kbd class="calibre9">format_tweets()</kbd> function was necessary to print the data we are interested in showing in the slide. If you remember, the data we get from the <kbd class="calibre9">get_twitter_data()</kbd> function contains quite a bit of metadata around each tweet, which is very useful when doing analysis, but for this slide, we would rather show only the screen name for the person who tweeted, the tweet's timestamp, and the actual tweet. We also need to truncate the tweet's length to make sure that it looks fine in the presentation. Even though it's a small function, the code can be a bit complex if you haven't seen those functions before, so we will take it step by step.</p>
<p class="calibre2">The <kbd class="calibre9">format_tweets()</kbd> function receives a single argument, which is the data we got back from the <kbd class="calibre9">get_twitter_data()</kbd> function, and we know that data structure contains the <kbd class="calibre9">created</kbd>, <kbd class="calibre9">text</kbd>, and <kbd class="calibre9">screenName</kbd> variables we're interested in. Since this is vectorized code, we don't have to use a for loop to print each tweet independently. We can simply use the arrays of values directly. If you don't remember what vectorized code refers to, you can review it in <a target="_blank" href="part0022.html#KVCC0-f494c932c729429fb734ce52cafce730" class="calibre4">Chapter 1</a>, <em class="calibre19">Introduction to R</em>:</p>
<pre class="mce-root">format_tweets &lt;- function(data) {
    write(paste(
        data$screenName, " (", data$created, "): \n",
        iconv(enc2utf8(substr(data$text, 1, 65)), sub = ""),
        "(...) \n", sep = ""
    ), stdout())
}</pre>
<p class="calibre2">The first thing you may notice is that we're not using the <kbd class="calibre9">print()</kbd> function. We are using the <kbd class="calibre9">write()</kbd> function passing in the <kbd class="calibre9">stdout()</kbd> function call. This means that we will <em class="calibre19">write</em> an object into the standard output. You can think of this as a <em class="calibre19">dumb</em> <kbd class="calibre9">print()</kbd> function call, where R will not do any processing for us, and will simply show exactly what we tell it to. What this does is avoid printing the numbered lines we normally get when using the print function. Remember those <kbd class="calibre9">[1], [2], ...</kbd> at the beginning of the output in the previous code? This <kbd class="calibre9">write(..., stdout())</kbd> technique avoids them. You normally don't want that, but it's useful for aesthetics purposes in this particular case.</p>
<p class="calibre2">Next, we use the <kbd class="calibre9">paste()</kbd> function as we have been doing to put together everything we want to print. In this case, we start with screen names, followed by parenthesis enclosing the timestamp (contained in <kbd class="calibre9">data$created</kbd>), and followed by a combination that indicates a <em class="calibre19">new line</em>. The <kbd class="calibre9">\n</kbd> combination, when used inside the <kbd class="calibre9">write()</kbd> function, tells R to actually introduce a new line at that point, just as if you had pressed the <em class="calibre19">return</em> key (<em class="calibre19">Enter</em> key on your keyboard). Next, we pass the actual tweet (<kbd class="calibre9">data$text</kbd>) to the <kbd class="calibre9">substr()</kbd> function so that we can get characters 1 through 65. This is done, again, for aesthetic purposes since we don't want very long tweets to take more than one line. That output is sent to the <kbd class="calibre9">enc2utf8()</kbd> function, which sets the string's encoding to UTF-8, and this output is passed through the <kbd class="calibre9">iconv()</kbd> function with a <kbd class="calibre9">sub = ""</kbd> parameter, which will delete any non-convertible characters. Finally, we put a <kbd class="calibre9">"(...) \n"</kbd> string to show that the tweet was probably truncated, and another <em class="calibre19">new line</em> symbol.</p>
<p class="calibre2">When using the <kbd class="calibre9">iconv()</kbd> function, what happens is that it will try to convert characters one by one, and whenever it can't convert a character, it will replace it with the <kbd class="calibre9">sub</kbd> string we send. We need to do this because we may get characters from languages like Chinese or Arabic whose output, would contain a Unicode representation which would not make sense to people who are not familiar with these types of encoding issues. We're trying to produce a user-friendly presentation.</p>
<div class="packt_quote">If you recompile this presentation, the messages you retrieve from Twitter will be different from the ones shown here because they will be retrieved at that moment.</div>
<p class="calibre2">Now, you can compile your presentation with any of the methods mentioned earlier, and if everything goes fine, you should see a <kbd class="calibre9">presentation.html</kbd> file in your directory. If you open that file in your web browser, you should see slides similar to the ones shown as follows. You may also open directly the live presentation in the repository for this book. Remember to play around with the interactive map!</p>
<pre class="mce-root">Session info ------------------------------------------------------
setting value
version R version 3.4.2 (2017-09-28)
system x86_64, linux-gnu
ui X11
language (EN)
collate en_US.UTF-8
tz America/Mexico_City
date 2017-10-30
<br class="title-page-name"/>Packages --------------------------------------------------------
package * version date source
assertthat 0.2.0 2017-04-11 CRAN (R 3.3.2)
base * 3.4.2 2017-10-28 local
base64enc 0.1-3 2015-07-28 CRAN (R 3.3.2)
bindr 0.1 2016-11-13 CRAN (R 3.3.2)
[... truncated ...]</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            <article>
                
<p class="calibre2">In this chapter, we discussed the benefits of automating tasks as well as content creation. We showed how to integrate automation pipelines for content creation, how to write R Markdown documents, which provide dynamic content, and how to use these documents to produce documents and presentations that look nice and are efficient. We showed how to integrate various R resources to create content that can be updated automatically.</p>
<p class="calibre2">In case you want to develop documents that are more technical or lengthy, the <kbd class="calibre9">bookdown</kbd> package may be a good option for you. Its purpose is to make the creation of lengthy documents, such as books, easier using R Markdown. As a matter of fact, this book was written using <kbd class="calibre9">bookdown</kbd>, and the process was a really nice one.</p>
<p class="calibre2">In the next chapter, we will start a new example focused on evaluating cryptocurrency trades. We will start by building an object-oriented system that simulates a trading platform and evaluates traders' performances automatically. After that, we will show you how to make our algorithms run faster by using parallelization and delegation, and finally, in the last chapter, we will show you how to create web pages that contain interactive dashboards, all from within R.</p>


            </article>

            
        </section>
    </body></html>