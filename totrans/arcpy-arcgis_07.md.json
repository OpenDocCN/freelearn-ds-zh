["```py\n#Chapter 7.py\nimport arcpy, csv\nbusStops = arcpy.GetParameterAsText(0)\ncensusBlocks2010 = arcpy.GetParameterAsText(1)\ncensusBlockField = arcpy.GetParameterAsText(2)\ncsvname = arcpy.GetParameterAsText(3)\nheaders = arcpy.GetParameterAsText(4).split(',')\nsql = arcpy.GetParameterAsText(5)\nkeyfields = arcpy.GetParameterAsText(6).split(';')\ndataDic = {}\n\ncensusFields = ['BLOCKID10',censusBlockField, 'SHAPE@']\nif \"SHAPE@\" not in keyfields:\n keyfields.append(\"SHAPE@\")\n\narcpy.AddMessage(busStops)\narcpy.AddMessage(censusBlocks2010)\narcpy.AddMessage(censusBlockField)\narcpy.AddMessage(csvname)\narcpy.AddMessage(sql)\narcpy.AddMessage(keyfields)\n\n```", "```py\nimport arcpy, csv\nbusStops = arcpy.GetParameterAsText(0)\ncensusBlocks2010 = arcpy.GetParameterAsText(1)\ncensusBlockField = arcpy.GetParameterAsText(2)\ncsvname = arcpy.GetParameterAsText(3)\nheaders = arcpy.GetParameterAsText(4).split(',')\nsql = arcpy.GetParameterAsText(5)\nkeyfields = arcpy.GetParameterAsText(6).split(';')\ndataDic = {}\ncensusFields = [ 'BLOCKID10',censusBlockField,'SHAPE@']\nif \"SHAPE@\" not in keyfields:\n keyfields.append(\"SHAPE@\")\n\narcpy.AddMessage(busStops)\narcpy.AddMessage(censusBlocks2010)\narcpy.AddMessage(censusBlockField)\narcpy.AddMessage(csvname)\narcpy.AddMessage(sql)\narcpy.AddMessage(keyfields)\nx = 0\nwith arcpy.da.SearchCursor(busStops, keyfields, sql) as cursor:\n for row in cursor:\n stopid = x\n shape = row[-1]\n dataDic[stopid] = []\n dataDic[stopid].append(shape.buffer(400))\n dataDic[stopid].extend(row[:-1])\n x+=1\n\nprocessedDataDic = {}\nfor stopid in dataDic.keys():\n values = dataDic[stopid]\n busStopBuffer = values[0]\n blocksIntersected = []\n with arcpy.da.SearchCursor(censusBlocks2010, censusFields) as cursor:\n for row in cursor:\n block = row[-1]\n population = row[1]\n blockid = row[0] \n\n if busStopBuffer.overlaps(block) ==True:\n interPoly = busStopBuffer.intersect(block,4)\n data = population,interPoly, block\n blocksIntersected.append(data)\n processedDataDic[stopid] = values, blocksIntersected\n\ndataList = []\nfor stopid in processedDataDic.keys():\n allValues = processedDataDic[stopid]\n popValues = []\n blocksIntersected = allValues[-1]\n for blocks in blocksIntersected:\n pop = blocks[0]\n totalArea = blocks[-1].area\n interArea = blocks[-2].area\n finalPop = pop * (interArea/totalArea)\n popValues.append(finalPop)\n averagePop = round(sum(popValues)/len(popValues),2)\n busStopLine = allValues[0][1]\n busStopID = stopid\n finalData = busStopLine, busStopID, averagePop\n dataList.append(finalData)\n\ndef createCSV(data, csvname, mode ='ab'):\n with open(csvname, mode) as csvfile:\n csvwriter = csv.writer(csvfile, delimiter=',')\n csvwriter.writerow(data)\n\nheaders.insert(0,\"ID\")\ncreateCSV(headers, csvname, 'wb') \nfor data in dataList:\n createCSV(data, csvname)\n\n```", "```py\narcpy.AddMessage(finalData)\n\n```"]