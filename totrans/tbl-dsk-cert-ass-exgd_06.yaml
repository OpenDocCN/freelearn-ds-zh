- en: Visualizing Geographic Data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'For centuries, maps have been used to convey meaningful data. We are used to
    seeing maps representing data commonly around us, be it with Google Maps calculating
    distances, Uber tracking the cost and distance of locations, or weather forecasts
    looking at each region, and so on. In the last chapter, we learned a bit about
    the two standard map charts available in the **Show Me** menu, and how we can
    use these to visualize geographic data. In this chapter, we will dive deeper into
    the various mapping capabilities of Tableau and cover the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Mapping basics
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Map navigation – geographic search, pan and zoom, mark selection, and scaling
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Map features – layering and custom territories
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Modifying locations
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Importing and managing custom geocoding
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Connecting to spatial data
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Using the background screenshot map
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating density maps
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Technical requirements
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'This chapter uses the following datasets:'
  prefs: []
  type: TYPE_NORMAL
- en: Global Superstore dataset, which can be found at [http://www.tableau.com/sites/default/files/training/global_superstore.zip](http://www.tableau.com/sites/default/files/training/global_superstore.zip).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The London Wards dataset, which can be found at [https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip](https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The 311 calls dataset, which can be found at [https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx](https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mapping basics
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Mapping in Tableau is very simple and based on geographic data fields that
    can be identified by the globe symbol next to them. To create a map, select the
    geographic fields and any measure, and then click on the **Show Me** Window. As
    you can see in the following screenshot, Tableau automatically highlights the
    symbol map as the preferred visual:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/87913c65-614f-4736-a18b-86833697ebc2.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once you click it, it will create the following screenshot. As you can see,
    for each country, the symbol marks a point at the geographic center of the location:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/157a6486-5527-49f3-a835-54abe1de6342.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Symbol maps always plot marks at the geographic centers and can plot two measures
    at a time. Filled maps, on the other hand, use geographic locations to define
    the boundaries within which to fill and can only plot one measure at a time. Using
    the **Show Me** menu, if we now switch to filled maps, we can see the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c8cb6d08-faf4-4cab-810b-ddf3997822f6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'If there are no geographic fields automatically detected by your data, right-click
    the field you want to display. Click **Geographic Role | Appropriate Level.**
    For example, in the following screenshot, if `Country` is not automatically detected
    as a geographic field, we can right-click and select **Geographic Role |** **Country/Region**:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d60151dc-9a8e-431f-bd11-150816b3547b.png)'
  prefs: []
  type: TYPE_IMG
- en: This will now turn the `Country` field into a **Geographic field**, which can
    be used in both **symbol maps** and **filled maps**. Both **symbol maps** and
    **filled maps** only differ in the number of measures they can show and how they
    visualize data. Other than that, both maps have the same shared common features
    and properties. From this section onward, we will use the common term **map**
    to refer to them, instead of differentiating between them. All of the properties
    discussed from here on apply to both map visuals. Now that we have clarified this,
    let's dive into the various **map navigation** features.
  prefs: []
  type: TYPE_NORMAL
- en: Map navigation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'When the mouse is anywhere on the map, you will see the **Map Options** menu appear
    by default, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f16c41b1-3d7a-44ac-bd58-be0482519f1b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'If you do not see these options, don''t worry. On the **Menu Bar**, click on
    **Map | Map Options** and it will show the options to add to the screen. You can
    see in the following screenshot that we had only the option for **Show Map Scale** unchecked.
    Go ahead and check that:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/765643b9-5607-4e52-8203-7e1f533c5f70.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will notice at the bottom-right of the screen that, the map scale accuracy
    has appeared. The more you zoom into the map, the more your accuracy will increase.
    Having the distances scale easily allows us to look at distances in miles, kilometers,
    or any of your preferred units:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/15aef036-976e-423d-acde-4232a499ff3d.png)'
  prefs: []
  type: TYPE_IMG
- en: Now, let's look at each of the features in detail.
  prefs: []
  type: TYPE_NORMAL
- en: Pan and zoom
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The pan and zoom features allow us to interact and inspect data on the map.
    We can focus on specific locations and move the map around to focus on key information.
  prefs: []
  type: TYPE_NORMAL
- en: Zoom in/out
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The **Zoom In (+)** or **Zoom Out (-)** buttons can be used to zoom into the
    map. You can also use your mouse to zoom in/out as you would usually do. Alternatively,
    you can **double-click** to **Zoom In** and press *Shift* and **double-click**
    to **Zoom Out**.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once you zoom in/out, the map gets fixed to that area in the view. To quickly
    go back to the default view, click on the **Reset Map** pin. For example, in the
    following map, we are zoomed in on Europe, and the moment we click on Reset Map,
    it will take us back to the wider world view:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/7c05204d-54f9-4d81-874c-778aa520b4c2.png)'
  prefs: []
  type: TYPE_IMG
- en: Zoom area
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To zoom in to a particular area on the graph, the Zoom Area option is also
    available. Simply select the **Zoom Area** button ![](img/77a4211f-823c-482c-a7ce-f51f36dca049.png) from
    the toolbar and highlight the area you want to zoom into. In the following example,
    we are using the **Zoom Area** button to zoom into Canada and Alaska:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/6fb9eea1-d52e-4a33-9c5d-644fb78b1010.png)'
  prefs: []
  type: TYPE_IMG
- en: Pan
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The **Pan** option can be found right next to the Zoom Area options. **Pan**
    allows us to move the map to focus on it or show the regions the way we want.
    To pan, just select the **Pan Option** and then move the map around to suit your
    needs. Alternatively, you can hold down the *Shift* key and move the map. For
    example, in the following map, the position has been moved from the default display
    to show—to start with—Asia in the left and moving up to Europe and Africa on the
    right:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4e88feb2-e5b7-4c4b-98a3-95292303ef5b.png)'
  prefs: []
  type: TYPE_IMG
- en: For pan/zoom, use the shortcuts to navigate faster. Double-click to zoom in,
    press *Shift* and double-click to zoom out (alternatively, use default mouse zooming),
    and press *Shift* and move the map to pan.
  prefs: []
  type: TYPE_NORMAL
- en: Geographic Search
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Geographic Search** allows us to quickly search locations on the maps. For
    example, in our map of the countries, if we wanted to quickly look for Nigeria,
    we could simply use the search box and type `Nigeria` in it. As you type, a list
    of all relevant locations appears in the suggestions for you:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/3693ef90-4f4f-46d5-a111-dc4f099e20bc.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You can search for the following on the maps:'
  prefs: []
  type: TYPE_NORMAL
- en: Continent
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Country
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: State or province
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: County
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: City
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Postcode
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Once you type/select **Nigeria**, and press *Enter*, the map will zoom in to
    focus on it. You may notice that the map again gets pinned. Whenever you search/zoom/pan,
    the map will get pinned to that location. Just click on the reset button to reset
    to the default view. The following screenshot shows the result we obtain after
    searching for **Nigeria**:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e483abda-d0d6-47c3-9f95-69995e318378.png)'
  prefs: []
  type: TYPE_IMG
- en: Marks selection
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'As with all graphs, you can select marks on the maps, and perform activities
    such as grouping/sets creation. Beyond the usual rectangular selections, maps
    have two other selection features, Radial Selection and Lasso Selection, respectively:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ee458f44-b926-40b2-b419-619df0f1ef89.png)'
  prefs: []
  type: TYPE_IMG
- en: Rectangular Selection
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Rectangular Selection is the default selection option available. Just drag
    the mouse on the screen to make a selection:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/802ed054-43a8-4ee2-9f70-25245b71b503.png)'
  prefs: []
  type: TYPE_IMG
- en: Radial Selection
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Radial Selection is a super useful feature of maps. It allows us to select locations
    in terms of a circular radius, which, in turn, allows us to look at the location
    in a radial distance of a point or to calculate distances between locations.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, we want to find the combined profit for all of the cities within
    a 50-mile radius of New York City, USA. We first search and zoom into New York
    City, USA. Then, we select **Radial Search**. Now, keeping New York City in the
    center, we zoom out 50 miles from the USA. The following screenshot shows a radial
    search:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/24550e08-5181-43ce-ad53-9a183492962d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In case you do not see any distance marks, zoom into the location a bit more
    until they become visible. Once you have selected the locations, as shown in the
    preceding screenshot, you can see the summary for the locations selected as you
    would with a rectangular selection. Here, we can see the sum of profit is 79,534:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4fb21a6c-f767-45d3-a2fb-90b9586f134a.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In this example, we used the radial select tool to define the locations which
    fall within a certain radius. Using the same principle, we can use this to find
    the radial distance between two locations. For example, if we had to search for
    the radial distance between San Diego and Los Angeles, we first filter on the
    two locations and then create a radial distance search between the two points.
    Choose any city as the center and extend the radius till you reach the other city.
    In the following screenshot, we kept Los Angeles as the center and extended the
    radius for 110 miles, until we reached San Diego. Hence, the radial distance between
    the two locations is 110 miles:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c758bac0-7c4a-46a0-9253-270862fcae3b.png)'
  prefs: []
  type: TYPE_IMG
- en: Lasso Selection
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Sometimes, bounded ways of selection are not enough and we may need to select
    certain locations in an area but exclude others. In this case, **Lasso** (a freehand
    shape selection) is the best way to go. An example of this kind of selection can
    be seen in the following screenshot. Here, all western states that we want except
    Georgia are selected:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d1194ad7-8f2b-483b-a5a1-357e9b36255d.png)'
  prefs: []
  type: TYPE_IMG
- en: Scaling
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To change the scale of the map, go to Map | Map Options and select the **Show
    Map Scale** option. Here, you can switch the scales between the automatic, metric
    system, or US system. Once you set the scales, they become visible on the lower-right
    side of the map.
  prefs: []
  type: TYPE_NORMAL
- en: Read the units specified in any question related to mapping very carefully.
    You may need to change the scale of the map before performing the next steps.
  prefs: []
  type: TYPE_NORMAL
- en: Map features – layering and custom territories
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now that we have learned how to create maps, let's look at how we can customize
    certain map details, such as the color of the map, what level of details it will
    display, and the territories shown within it.
  prefs: []
  type: TYPE_NORMAL
- en: Map Layers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To view the layers that can be added or removed from the map or how it will
    look in the background, select **Map | Map Layers**. In previous versions of Tableau,
    you would select **Map | Map Options. **You will get the following screen:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/bb1500ee-680c-4d46-8edc-f3010169d757.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Here, you can select and change between the different backgrounds: **Normal**,
    **Light**, and **Dark**. Depending on the Tableau version, you may also have **Street**,
    **Outdoors**, and **Satellite Backgrounds** available:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e7ab0db4-a7b0-48da-ae2f-d0a06924cc6b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'As shown in the following screenshot, in **Map Layers**, you can add the details
    you want to see on the map. For example, after focusing on New Jersey, the map
    now shows Zip Code, Metro Code, and Metro Boundaries as can be seen in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/8ede3123-d4ba-4cf9-a9da-ee5067d81309.png)'
  prefs: []
  type: TYPE_IMG
- en: These layers help to add a deeper level of detail to the maps and allow you
    to customize what to view as per your needs. There are many map layers available
    for various regions. Explore each of them to see what you can add.
  prefs: []
  type: TYPE_NORMAL
- en: Certain map layers are only available at certain zoom levels and will appear
    grayed out if you are not at that level. Zoom in to reveal further layers.
  prefs: []
  type: TYPE_NORMAL
- en: Beyond changing the map background and layers, Tableau also has many data layers
    available that can be used to overlay data on the map. To add a data layer, select
    a layer from the **Data Layers** menu. For example, to understand whether `Profit`
    in `State` of the US is linked to the median age of the people, we can overlay
    **Median Age** on the graphs.
  prefs: []
  type: TYPE_NORMAL
- en: 'Create a symbol graph showing `Profit` by each `State`, and zoom in on the
    USA. Under **Data Layers**, select the following:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Layer: Median Age'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'By: State'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Using: Blue Green Sequence**'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You will see the following graph:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c9acd823-ef1d-4d1f-8da0-0648d2d9ef44.png)'
  prefs: []
  type: TYPE_IMG
- en: As an exercise, add a few data layers and change the level to view them. This
    will familiarize you more with the data layer options you have available.
  prefs: []
  type: TYPE_NORMAL
- en: Custom territories
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Beyond defining what the map layers display, we can also create and show your
    own custom territory. There are two ways in which we can create our own territories:'
  prefs: []
  type: TYPE_NORMAL
- en: Grouping locations
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Geocoding a field using other geographic fields
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Grouping locations
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Assume you are looking at data at the country level and focusing on Europe
    as a continent. Instead of looking at each country individually, you want to look
    at the data in two sections, Eastern Europe and Western Europe. To achieve this,
    look at the locations on the map, and use the selection tool to select the territories.
    Once you have them selected, click on the grouping icon, as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/144f6c4f-19c5-48b1-ab90-81cd7b324b90.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Selecting the groups will create a combined group for these locations. It will
    also add a `Country & State` grouping to the marks shelf. All of your selected
    locations are now grouped and will be colored the same:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9bfa89c5-d432-4c84-9f5e-b299064accf5.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Continue and group locations as you want. Once you are done grouping, remove
    the field from the Colors shelf. From Dimensions, bring `Country (group)1` to
    the Marks detail shelf, and move `Profit` back to colors. For example, in the
    following screenshot, based on Countries, two groups called Group 1 and Group
    2 were created:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/41fac3cd-a81c-423d-8972-b070a87bfe0f.png)'
  prefs: []
  type: TYPE_IMG
- en: Another way to create similar groups would be to right-click on the geographic
    field and select **Create Group**. Once the group is created, bring it to the
    details shelf and use it as you would use any other geographic field.
  prefs: []
  type: TYPE_NORMAL
- en: Geocoding using other geographic fields
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Another way to create custom territories is to geocode a custom location field
    present in the data based on other fields.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, we want to add the `Region` field to `Location Hierarchy`. To
    achieve this, right-click on the `Region` field. Select **Geographic Role | Create
    From | Country.** This adds the field to the location hierarchy and the globe
    shape denoting a geographic field appears next to it:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/c86f4f69-87f3-44c7-a437-02af38953c62.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Bring the `Region` field onto the **Labels** shelf. You can see the custom
    location on the map now appear as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/253cfaed-9c21-48ca-a84b-12c940f616cb.png)'
  prefs: []
  type: TYPE_IMG
- en: Using this method, you can view any custom territory that you have in your dataset.
  prefs: []
  type: TYPE_NORMAL
- en: Now that we have learned how to create maps and add geographic fields, we will
    move on to the next section where we will learn about modifying locations to help
    deal with erroneous or ambiguous location data.
  prefs: []
  type: TYPE_NORMAL
- en: Modifying locations
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once you define a field as a geographic field, Tableau automatically detects
    the locations of the places. Sometimes, however, Tableau will show x Unknowns
    in the right-hand corner of the screen. This could be because the location can
    be ambiguous, that is, multiple places having the same name, or the spelling could
    differ from what Tableau recognizes, for example.
  prefs: []
  type: TYPE_NORMAL
- en: The easiest way to fix most errors is to bring other data fields into the map
    details as well. For example, if you are only plotting cities, many countries
    can have the same city names. Adding a country and state can help to rectify such
    errors. If there is a hierarchy of locations, then Tableau automatically uses
    it to remove ambiguities. If, after doing this, there are still errors remaining,
    you can custom edit the locations to make them match.
  prefs: []
  type: TYPE_NORMAL
- en: Editing locations
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To edit locations, either click on the right-hand corner on the x Unknowns value
    and it will open the **Edit Locations** window, or go to **Maps |** **Edit Locations.**
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on **Country/Region.** This will show how the country or region is getting
    detected. Many times, this field is set to fixed for a particular country. So,
    if you are in the UK, your map could be set at the fixed field for the United
    Kingdom. Now, if you had a dataset with states from the USA, it would not match
    any location. To fix it, you would need to edit the location and set either the
    fixed **field **to be the **United States**, or if your dataset contains a `Country`
    field, then set it to be matched from that field. In the following example, you
    can see that the **Country/Region **field is mapped to the `Country` geographic
    field, which is good:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/799e9fe9-f324-4859-9f0c-86a0ab1343d1.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Close that dialog box and look at the ambiguous values to edit. You will notice
    that the unmatched locations are highlighted. For example, for **Lower Normandy**,
    we know this is the state of **Normandy**. Search for *Normandy* in the **Unrecognized**
    box. Once you search and find it, select it. This will now match the location,
    as can be seen in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d7c00439-99b4-4c21-9029-9228098b6661.png)'
  prefs: []
  type: TYPE_IMG
- en: If you can't find matching names, but know the latitude and longitude of the
    location and when you are typing, you will see a message in the dialog box saying
    `Enter a Latitude and Longitude value`. If you don't see this, just type any number.
    Once you click on it, it will open a box where you can enter the **Latitude**
    and **Longitude** values alternatively, and click **OK**.
  prefs: []
  type: TYPE_NORMAL
- en: Once you are have mapped all of the locations you can, click OK. Now if you
    look at the lower-right corner, the number of **Unknowns** decreases. In this
    way, even if you have custom locations or different spellings, you can custom
    match them to appropriate locations to appear in the maps. So far, we have learned
    how to modify and match locations, and create custom geolocations. In the next
    section, we will go one step further and learn how to import custom geocoding
    into Tableau.
  prefs: []
  type: TYPE_NORMAL
- en: Importing and managing custom geocoding
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Beyond providing standard geocoding for geolocations such as City, State, Country,
    Country/Region, Zip Code, Postal Code, and County, Tableau also allows us to custom
    import their own geocoded files. Custom geocoded files are useful if we have locations
    that Tableau can't map, for example, a street address, or if there is a custom
    geographic field that we want to define, and so on.
  prefs: []
  type: TYPE_NORMAL
- en: To create a custom geocoding, we need a `.csv` file to import into Tableau.
    This file must contain `Latitude` and `Longitude` columns as real numbers, with
    at least one decimal point in them. Other than these two columns, the other columns
    will depend on whether we are extending an existing role or adding a new role.
  prefs: []
  type: TYPE_NORMAL
- en: Extending an existing role
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'If your data contains many locations that do not get mapped easily using Tableau
    default hierarchies, instead of trying to correct every error manually, you can
    just extend the locations to include these missing values. The import file should
    contain the names matching the hierarchy you are extending and data for all levels
    above the location you are extending. For example, if you wanted to extend the
    `States` mapping to improve it, you will need to include the columns for `State/Province`
    and `Country` along with `Latitude` and `Longitude`. For example, if we want to
    add the following location to our data, we will first create a `.csv`, as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ee613ebe-bb4d-4906-9441-f8e29541808c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To import data, select **Map | Geocoding** | **Import Custom Geocoding**:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/518e2501-e7c4-4ac3-956f-9fedd970ae3a.png)'
  prefs: []
  type: TYPE_IMG
- en: Select the folder where your `.csv` file is saved and click **Import**. Depending
    on the size of the default file and the geocoding to be imported, it will take
    a couple of minutes and then get imported.
  prefs: []
  type: TYPE_NORMAL
- en: Remember that, the highest level when extending geocoding is Country. There
    is no continent level. However, we can add new roles if we want to add geocoding
    up to the continent level.
  prefs: []
  type: TYPE_NORMAL
- en: Adding new roles
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'If, for example, we wanted to create a hierarchy for locations including a
    **Continent** as a geographic field, we can create a simple dataset as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/96fe5416-f30a-4454-af03-8b73ab1a4590.png)'
  prefs: []
  type: TYPE_IMG
- en: Now, click on **Map | Import Custom Geocoding** and find the location of the
    folder. Click on **Import**. Depending on your files for geocoding, it will take
    a couple of minutes for the file to be imported.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, right-click on **Continent | Geographic Role**:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/32178944-86c3-42b4-9086-0edcff2a61d9.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will see that Continent appears as a role. You can select that to be the
    geographic type for `Continent`. To create a map from the custom mapping, select
    the `Latitude` and `Longitude` fields (not the generated ones) and the continent
    field, and create a map using the **Show Me** menu. Now, move the `Continent`
    field to **Labels **so you can see the labels on the `Continent` field. You should
    get a map like the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/b20857f9-7307-4040-86ef-29cbbf07091a.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see, all of the continents are plotted where we want them to be.
    Beyond adding geocoding, you can also import your own spatial files to plot maps.
    Let's look into them in the next section.
  prefs: []
  type: TYPE_NORMAL
- en: Connecting to spatial data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We can connect to, and import spatial data from, TopoJSON files, Shapefiles,
    MapInfo tables, GeoJSON files, KML files, and Esri File Geodatabases. Using these
    files, we can connect to point, linear, and polygon geometries. Currently, mixed
    geometries are not allowed in Tableau.
  prefs: []
  type: TYPE_NORMAL
- en: 'Each of the file sources listed earlier has certain restrictions on what the
    folder containing these files must include. These are listed in the following
    table:'
  prefs: []
  type: TYPE_NORMAL
- en: '| **File Source** | **Files Required in Folder** |'
  prefs: []
  type: TYPE_TB
- en: '| Esri Shapefiles | `.shp`, `.shx`, `.dbf` , `.prj`, and `.zip` |'
  prefs: []
  type: TYPE_TB
- en: '| Esri Geodatabases | Either `.zip` containing `.gdb` or a `.gdb` file |'
  prefs: []
  type: TYPE_TB
- en: '| KML files | `.kml` |'
  prefs: []
  type: TYPE_TB
- en: '| TopoJSON | `.topojson` or `.json` |'
  prefs: []
  type: TYPE_TB
- en: '| GeoJSON | `.geojson` |'
  prefs: []
  type: TYPE_TB
- en: '| MapInfo | `.MAP`, `.DAT`, `.TAB`, and `.MID`, or a `.MIF`, or `.ID` file
    |'
  prefs: []
  type: TYPE_TB
- en: For an example of how to create maps using shapefiles, we will use the file
    downloaded for London Wards as an example. If you haven't already done so, download
    the `London-wards-2018.zip` file ([https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip](https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip))
    and extract it.
  prefs: []
  type: TYPE_NORMAL
- en: To connect the file in Tableau, go to **Data | New Data Source | Spatial File**.
    Locate the extracted folder for the London Wards Zip. Select either the Esri folder
    or the `Mapinfo` folder. For this example, we are loading the ESRI folder. It
    will ask you to select the shapefile. Select the `london_ward.shp` file.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once you have imported the file, you are now ready to create maps. To create
    a map with all of the details for London Wards, click on the `Geometry` field.
    You will notice that, Tableau has automatically detected it as a Geographic field.
    Bring this field to the Detail Marks tab. As soon as you do this, the autogenerated
    `Latitude` and `Longitude` marks appear and a graph is created. Zoom out and you
    will see the same as the following screenshot. As you can see in the following
    screenshot, all of the wards for London in the UK have been plotted:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1aa7b044-33ae-4e1e-b11b-c0011b3b7a01.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now, to see the hectares per ward, bring the `Name` field in the details Marks,
    add the hectares field to the color, and your graph is created:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/8ecab1d3-69d1-4da3-b25d-dfc7fa35082e.png)'
  prefs: []
  type: TYPE_IMG
- en: 'If you instead want to view the data at the district level, remove `Name` from
    detail and add `District` to the graph. In this way, you can see data at the district
    level. You can also make the map cleaner by removing any borders. Click on **Color
    | Border | None.** This will make the map cleaner, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/88a272f5-c78a-4cc1-af11-342dc876eebc.png)'
  prefs: []
  type: TYPE_IMG
- en: Sometimes, shapefiles only contain geometric details but not the measures you
    want to see; for example, if you wanted to inspect a dataset about the population
    of each ward. Not to worry. Shapefiles function as normal files and can be joined
    to any other files, even other shapefiles. As an exercise, join two shapefiles
    and use them to create a dual-axis map.
  prefs: []
  type: TYPE_NORMAL
- en: In this section, we learned how to import custom geocoding to enhance mapping
    capabilities. For some use cases, even custom geocoding may not meet our needs.
    For such cases, we can use background images to plot our data. Let's learn how
    to do this in the next section.
  prefs: []
  type: TYPE_NORMAL
- en: Using background images to plot spatial data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There may be situations when spatial data is not enough to accurately plot data
    on the map. In such cases, we can also use background images as a background.
    While this option allows for the most flexibility in how to plot, it also requires
    the most effort in defining the boundary and point coordinates.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, say you wanted to plot the house plan of your house and have the
    following data:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Location | Location ID | X | Y | Size |'
  prefs: []
  type: TYPE_TB
- en: '| Room 3 | 1 | 15 | 20 | 100 |'
  prefs: []
  type: TYPE_TB
- en: '| Room 1 | 2 | 15 | 50 | 100 |'
  prefs: []
  type: TYPE_TB
- en: '| Room 4 | 3 | 40 | 20 | 125 |'
  prefs: []
  type: TYPE_TB
- en: '| Room 5 | 4 | 40 | 50 | 125 |'
  prefs: []
  type: TYPE_TB
- en: '| Porch | 5 | 60 | 40 | 60 |'
  prefs: []
  type: TYPE_TB
- en: 'You also have this screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/6e97fed6-ca57-48ec-a34a-8c1135eb1490.png)'
  prefs: []
  type: TYPE_IMG
- en: 'We add the screenshot data as the data source. To test how the appropriate
    positions would look, create a scatter plot with unaggregated measures. For the
    preceding example, plotting the `X` and `Y` values, we get the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9b99ccdb-65d0-4116-af2e-7ed8b9b9ce43.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once happy with where the `X` and `Y` points appear, click on **Map | Background
    Image | Dataset**. Select **Add Image**. Browse to where you saved the floor plan
    screenshot and click **OK**. Add in the details shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2ef7edb7-d370-4067-a6f4-6c0036d36c24.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Once you have entered the limits for **X** and **Y** and which fields denote
    **X** and **Y**, go to **Options** and select **Always Show Entire Image**. Click
    **OK**. You will get the points plotted on the screenshot. Now, you can see where
    each of the points is plotted. Change the marks type to Map and then add in the
    measures you want to plot. This now behaves like a map:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/586b0a8b-2b20-44a4-b22c-3d580cc156d6.png)'
  prefs: []
  type: TYPE_IMG
- en: This technique can be used to plot static images from any map and plot measures
    on them.
  prefs: []
  type: TYPE_NORMAL
- en: Creating density maps
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Density marks were added to Tableau in version 2018.3\. These marks add another
    way of finding patterns in areas where there is a lot of overlapping data or the
    concentration of data is very high. Density marks find their best use in creating
    density maps, making it super easy to find trends in spatial data. Density maps
    work best with custom geocoded files, as they allow for detailed granular data
    to be added. Granular and precise data in a small range, along with smooth changes
    in measure values is the ideal use case for using density maps.
  prefs: []
  type: TYPE_NORMAL
- en: 'For this example, we will be using the 311 calls dataset. In case you have
    not yet downloaded it, download it here in a `.csv` format: [https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx](https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, if we want to understand the distribution of calls by `Zip Code` for `LA`,
    and decide to plot a **Symbol Map**, after much zooming in, the following screenshot
    shows what it would look like:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2e805c81-20dd-4782-a203-adfaae082101.png)'
  prefs: []
  type: TYPE_IMG
- en: 'This doesn''t give us much information. Looking at the map, it looks like all
    locations have almost equal calls, which isn''t true. In cases like this, density
    maps become super useful. To convert this screenshot into a density map, in the **Marks**
    menu, change the mark type from Automatic to Density. You will see a certain pattern
    emerging, but it isn''t very clear. To enhance it, it becomes important to have
    a proper color scheme. Click on the **Color** mark, and change the color to Density
    Multi-Color Light. Once the color is changed, we can see the pattern more easily
    as in the following screenshot. You can further change the intensity and opacity
    of the colors in the **Color** menu:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/a25cccf2-d05f-4ff4-8ee3-82caabdb8979.png)'
  prefs: []
  type: TYPE_IMG
- en: You can quickly see that the calls are concentrated in the center of the city
    and less toward the lakeshore. You can further filter and compare the different
    issue types and see how they differ in their concentration. You can further use
    the Pages shelf to see the trends across time for the issues. The density when
    using the pages shelf is calculated for the entire dataset, so the patterns can
    quickly be seen relative to time or other factors.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we detailed how to create, navigate, and customize maps. We
    learned how to identify the correct locations for mapping, enhance geocoding,
    and create our own custom geocoding and geographic fields. Furthermore, we covered
    spatial files, and how they can be leveraged to create nuanced maps for specific
    purposes. We also looked at adding background images to maps, creating custom
    maps, and creating density maps.
  prefs: []
  type: TYPE_NORMAL
- en: All of this will give you a firm understanding of the extent of customization
    you can achieve with maps and how they can be a powerful analysis tool. In the
    next chapter, we will start by creating simple calculations that can be leveraged
    across the various visuals we have learned about in this chapter and the last.
  prefs: []
  type: TYPE_NORMAL
