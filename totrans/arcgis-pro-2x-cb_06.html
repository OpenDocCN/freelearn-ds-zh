<html><head></head><body>
        

                            
                    <h1 class="header-title">Projections and Coordinate System Basics</h1>
                
            
            
                
<p>In this chapter, we will cover the following recipes:</p>
<ul>
<li>Determining the coordinate system for an existing map</li>
<li>Setting the coordinate system for a new map</li>
<li>Changing the coordinate system for a map</li>
<li>Defining a coordinate system for data</li>
<li>Projecting data to different coordinate systems</li>
</ul>


            

            
        
    

        

                            
                    <h1 class="header-title">Introduction</h1>
                
            
            
                
<p>One of the things that makes GIS such a powerful visualization and analytical tool is the ability to overlay multiple layers of information together in a map. Putting our GIS data in real-world coordinate systems and projections is how we are able to do this. By placing our data in a real-world system, we tie it to the Earth. This allows us to locate features anywhere on the Earth’s surface and then bring them into a map so we can see how those features are related spatially.</p>
<p>There are two basic types of coordinate systems we can use in ArcGIS Pro, geographic and projected. A geographic coordinate system is based on a 3D model of the earth, called the ellipsoid or spheroid. The ellipsoid is then tied back to the physical Earth by the datum. Geographic coordinate systems use degrees as their primary unit of measurement.</p>
<p>Each degree can then be broken down into different sub-units, such as decimal degrees, minutes, decimal minutes, or minutes, and seconds. You will often hear geographic coordinate systems referred to as <strong>Latitude</strong> and <strong>Longitude</strong>:</p>
<div><img class="alignnone size-full wp-image-865 image-border" height="197" src="img/65b4855a-54af-4d92-9b4e-8dfd19fe0f40.png" width="268"/></div>
<p>The primarily lines of reference used in a geographic coordinate system are the <strong>Equator</strong> and the <strong>Prime Meridian</strong>.  These are the starting points for determining the latitude and longitude values required to locate a feature's position. Geographic coordinate systems can be used to identify the location of a feature on the Earth very accurately. However, as the diagram illustrates, the distance between the lines of latitude and longitude are not consistent. It varies depending where on the Earth you are located. This makes it difficult to measure distances and areas. This is where projected coordinate systems come in.</p>
<p>Projected coordinate systems locate and display data in a 2D plane, using a cartesian coordinate system. This allows us to apply standard units of linear measurement, such as feet and meters. The origin of the projected coordinate system is tied to a geographic coordinate system. This is what ties the projected coordinate system to the earth. From the origin, an <em>x</em> and <em>y</em> axis is defined, along with the units, as illustrated in the following diagram. Because projected coordinate systems use uniform units, we are able to easily measure distances and areas:</p>
<div><img class="alignnone size-full wp-image-866 image-border" height="258" src="img/5d401606-6f0d-4086-9379-9087a548e93e.png" width="430"/></div>
<p>Of course, taking a 3D surface such as the Earth and flattening it does introduce distortions into our data. So, we have different methods of projecting the data from a 3D model to a 2D plane to reduce these distortions. There are three basic types of projections, planar, conic, and cylindrical. From there they can get more advanced.</p>
<p>As long as all your data is in a real-world coordinate system, regardless of what type, ArcGIS Pro can display it in a single map or scene, even if the layers are in different coordinate systems. It will project the data on the fly in that map or scene to a common coordinate system. So, it is important that all your spatial data is assigned the correct coordinate system. Otherwise your data may be displayed incorrectly and results of your analysis might be incorrect.</p>
<p>In this chapter, you will learn how to work with coordinate systems within ArcGIS Pro. You will start by learning how to determine the coordinate system for an existing map. Then you will learn how to set the coordinate system for a new map. Next, you will learn how to change the coordinate system for an existing map. Then you will learn how to define the coordinate system for data. Lastly you will learn how to project data from one coordinate system to another.   </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Determining the coordinate system for an existing map</h1>
                
            
            
                
<p>Every map and scene you create in ArcGIS Pro makes use of a coordinate system in order to display data in a location. However, it not only can impact how and where features are displayed, but also what you can do with the map. The coordinate system used by a map can impact if you can share it as a web map via ArcGIS Online, how well layers overlay one another, and more. So, it is important to know what coordinate system your map is using.</p>
<p>The first layer you add to the map will define the coordinate system for that map. But what if you are working with an existing map, maybe one that was created by someone else? How do you determine the coordinate system for the existing map you are working with?</p>
<p>In this recipe, you will learn how to determine which coordinate system has been assigned to an existing map.   </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This recipe does require the sample data be installed on the computer. You are not required to have completed any previous recipes. However, it is recommended that you complete the recipes in <a href="45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml">Chapter 1</a>, <em>ArcGIS Pro Capabilities and Terminology</em>, or have some experience using ArcGIS Pro before you start this recipe. You can complete this recipe with any ArcGIS Pro licensing level.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>Please start by launching ArcGIS Pro using skills learned in <a href="45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml">Chapter 1</a>, <em>ArcGIS Pro Capabilities and Terminology</em>, or based on your prior user experience.</li>
<li>In the ArcGIS Pro start window, click on Open another project:</li>
</ol>
<div><img src="img/20a6fd04-fb18-48e0-9174-3435792778bd.png"/></div>
<ol start="3">
<li>Select Computer from the Open window, and then click Browse in the area on the right.</li>
<li>Navigate to <kbd>C:\Student\ArcGISProCookbook\Chapter6\CoordinateSystems</kbd> by clicking on <kbd>C:\</kbd> in the area on the left of the Open Project window. Then double-click on the Student, ArcGISProCookbook, Chapter6, and CoordinateSystems folders.</li>
<li>Select the CoordinateSystems.aprx project file and click OK.</li>
</ol>
<p style="padding-left: 60px">The project will open with the Basic Map of Trippville visible. This is an existing map, which was obviously created by someone else:</p>
<ol start="6">
<li>Look down at the bottom of the Map view, and you should see a small status bar. This displays the current scale of the map, buttons to enable functionality, the coordinate display, and more:</li>
</ol>
<div><img height="154" src="img/a47623fa-39ce-4e32-a6ec-e8e4428681a1.png" width="550"/></div>
<ol start="7">
<li>Move your mouse pointer around within the map while watching the Mouse Pointer Coordinate Display. Then answer the question ahead:</li>
</ol>
<div><p><strong>Question</strong>: What units are being displayed in the map?</p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">As you moved your mouse within the map while watching the coordinate display, you should have seen the values change. The first value displayed is the X value for the location of your mouse pointer within the map. The second value is the Y value for the location of your pointer. The display is in US feet, as indicated by the ftUS located to the right of the coordinates.</p>
<div><p>When working with projected coordinate systems, you may see the X value also referred to as the <strong>Easting</strong> and the Y as the <strong>Northing</strong>.</p>
</div>
<p style="padding-left: 60px">Looking at the values in the coordinate display can help you determine what type of coordinate system your map may be in, Geographic or Projected. X values greater than 180 and Y values greater than 90 might indicate that your map is using a projected coordinate system.</p>
<div><p>You can control the units used in the Mouse Pointer Coordinate Display within the Map Properties window. In the General option, you can set the display units to be any value you wish. This can differ from the primary Map Units, which are based on the coordinate system assigned to the map.</p>
</div>
<p style="padding-left: 60px">Now, it is time to determine exactly what coordinate system is being used in the Basic Map of Trippville.</p>
<ol start="8">
<li>In the Contents pane, right-click on the Basic Map of Trippville, and select Properties from the menu that appears, as illustrated:</li>
</ol>
<div><img height="266" src="img/679c55aa-7147-49bd-a5e4-3bd6a13904e8.png" width="245"/></div>
<ol start="9">
<li>In the General option in the Map Properties window, review the various settings and answer the following questions:</li>
</ol>
<div><p><strong>Question</strong>: What are the Map Units?</p>
<p><strong>Answer</strong>: </p>
<p><strong>Question</strong>: What are the Display Units?</p>
<p><strong>Answer</strong>: </p>
</div>
<ol start="10">
<li>Click on the Coordinate Systems option in the left panel of the Map Properties window.</li>
<li>Look in the right panel of the Map Properties window, under Current XY Coordinate System. Answer the question that follows:</li>
</ol>
<div><p><strong>Question</strong>: What is the Current XY Coordinate System for the map?</p>
<p><strong>Answer</strong>: </p>
</div>
<ol start="12">
<li>Click on Details, located just beside the Current XY, as shown in the following screenshot:</li>
</ol>
<div><img height="425" src="img/b0651207-079c-4a22-99c9-4af20244fc81.png" width="600"/></div>
<ol start="13">
<li>Examine the details associated with the coordinate system assigned to the map. Answer the following questions:</li>
</ol>
<div><p><strong>Question</strong>: What type of coordinate system is being used?</p>
<p><strong>Answer</strong>: </p>
<p><strong>Question</strong>: What datum is being used by the assigned coordinate system?</p>
<p><strong>Answer</strong>: </p>
<p><strong>Question</strong>: What spheroid or ellipsoid is referenced for the assigned coordinate system?</p>
<p><strong>Answer</strong>: </p>
</div>
<p style="padding-left: 60px">As you can now see, the map is using the Georgia State Plane West Zone, which references the North American Datum of 1983 (NAD 83). This is a projected coordinate system that uses the GRS 80 spheroid.</p>
<ol start="14">
<li>Close the Coordinate System Details and Map Properties windows.</li>
<li>Save your project.</li>
<li>If you are not continuing to the next recipe you can close ArcGIS Pro. If you are continuing, keep ArcGIS Pro open.</li>
</ol>
<p>You now know how to determine the coordinate system for an existing map. It is important to know what coordinate system you are working with because it forms the foundation for how layers interact with each other spatially. If a map is not assigned a coordinate system, then you will not be able to bring layers together into a single map and expect them to overlay one another properly. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Setting the coordinate system for a new map</h1>
                
            
            
                
<p>You now know how to determine the coordinate system assigned to existing maps. But how do you assign one to a new map? That is pretty easy. As was mentioned earlier, the first layer you add to a new map will set the coordinate system for the map.  </p>
<p>In this recipe, you will create a new map in the project you used in the previous recipe. You will then see what coordinate system has been assigned to the new map. Next, you will add a new layer to the map and see what that does to the coordinate system for your map. Lastly, you will add another layer to the map that is in a different coordinate system, and check to see if that changes the coordinate system for your map.  </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>This recipe does require the sample data be installed on the computer. It is recommended that you complete the previous recipe in this chapter along with the recipes in <a href="45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml">Chapter 1</a>, <em>ArcGIS Pro Capabilities and Terminology</em>, before you begin this recipe. This will ensure that you have the necessary skills and understanding required to complete this recipe successfully. You can complete this recipe with any ArcGIS Pro licensing level.    </p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>If you closed ArcGIS Pro before starting this recipe, you will need to start ArcGIS Pro. Then, open the <kbd>CoordinateSystems.aprx</kbd> project located in <kbd>C:\Student\ArcGISProCookbook\Chapter6\CoordinateSystems</kbd> using the skills you have learned in past recipes.</li>
<li>Click on the Insert tab in the ribbon.</li>
<li>Click on the New Map button located on the Project group in the Insert tab. As you have seen demonstrated in past recipes, this will create a new blank 2D map in your project. The new map should automatically be opened and named Map.</li>
<li>In the Contents pane, right-click on the Map and select Properties from the menu that appears, as illustrated in the following screenshot:</li>
</ol>
<div><img class="alignnone size-full wp-image-867 image-border" height="267" src="img/fe83648b-a46a-4986-acb7-6047f504044f.png" width="224"/></div>
<ol start="5">
<li>Click on Coordinate system in the panel located on the left of the Map Properties window. Then answer the following question:</li>
</ol>
<div><p><strong>Question</strong>: What coordinate system is currently assigned to the new map you just created?</p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">As you can see, the new map you added has been assigned a coordinate system even though you have not added a layer yet. The assigned coordinate system is based on the basemap which is automatically added by default. If the basemap is one of the Esri provided ones from ArcGIS Online, then the coordinate system assigned to your map will be the WGS 1984 Web Mercator (Auxiliary Sphere).</p>
<p>WGS 1984 Web Mercator (Auxiliary Sphere) is the standard coordinate system used by most commercial web mapping systems, including Google Maps, Bing Maps, and Esri ArcGIS Online content.</p>
<p style="padding-left: 60px">If you are using a custom basemap, the coordinate system will be whatever is assigned to the custom basemap. If you have configured ArcGIS Pro to not automatically use a basemap, the coordinate system will be undefined.</p>
<p style="padding-left: 60px">Now, let’s see what happens when you add a layer to your new map.</p>
<ol start="6">
<li>Close the Map Properties window by clicking Cancel.</li>
<li>In the Catalog pane, expand the Databases folder so that you can see its contents.</li>
<li>Expand the Trippville_GIS.gdb geodatabase.</li>
<li>Right-click on the Zoning feature class and select Add to Current Map.</li>
<li>Save your project.</li>
</ol>
<ol start="6">
<li>In the Contents pane, right-click on the Zoning layer that you just added, and select Properties from the menu that appears.</li>
<li>In the left panel, select the Source option, as illustrated on in the following screenshot:</li>
</ol>
<div><img class="alignnone size-full wp-image-868 image-border" height="303" src="img/cddc8765-f37a-415d-b64a-865f8edf0e8e.png" width="503"/></div>
<ol start="13">
<li>In the right panel, scroll down until you see the Spatial Reference option.</li>
<li>Expand the Spatial Reference by clicking on the small arrowhead located to the left so that you can see its contents.</li>
<li>Examine the Spatial Reference information for the layer and answer the following question:</li>
</ol>
<div><strong>Question</strong>: What is the Projected Coordinate System for the Zoning layer?<br/>
<br/>
<strong>Answer</strong>: </div>
<p class="mce-root" style="padding-left: 60px">Close the Layer Properties window by clicking Cancel.</p>
<ol start="16">
<li>Right-click on Map in the Contents pane, as illustrated in the following screenshot:</li>
</ol>
<div><img class="alignnone size-full wp-image-869 image-border" height="308" src="img/a5dc2aa4-5fe0-4976-a530-97cdb9ba57a8.png" width="270"/></div>
<ol start="17">
<li>Select the Coordinate System option in the panel on the left of the Map Properties window.</li>
<li>Look at the area below Current XY in the right panel, then answer the following questions:</li>
</ol>
<div><p><strong>Question</strong>: What is the coordinate system assigned to the map?</p>
<p><strong>Answer</strong>: </p>
<p><strong>Question</strong>: Has the coordinate system for the map changed since you added the new layer?</p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">As you can see, the coordinate system for your map has changed. It is now using the NAD 1983 State Plane Georgia West FIPS 1002 Feet coordinate system. Now, let’s see if it changes again if you add another layer to the map:</p>
<ol start="19">
<li>Close the Map Properties window by clicking Cancel.</li>
</ol>
<ol start="20">
<li>In the Catalog pane, expand the Folders folder so that you can see its contents.</li>
<li>Expand the Coordinate System folder to see its contents.</li>
<li>Select the Elevation Contours shapefile, and drag and drop it into the map. This will add it as a new layer to your map.</li>
<li>Using the same method you used for the Zoning layer, examine the spatial reference for the Elevation Contours layer. Then answer the following question:</li>
</ol>
<div><p><strong>Question</strong>: What coordinate system is assigned to the Elevation Contours layer?</p>
<p><strong>Answer</strong>:</p>
</div>
<ol start="24">
<li>Close the Layer Properties window.</li>
<li>Open the Properties for the Map again using the same method you used in <em>step 17</em> of this recipe. Verify the coordinate system used by the map, and answer the following question:</li>
</ol>
<div><p><strong>Question</strong>: Did the coordinate system for your map change again? </p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">Even though the Elevation Contours layer is in the GCS WGS 1984 Geographic Coordinate system, the coordinate system for your map has not changed. Only the first layer added to a map will change the coordinate system. All other layers are projected on the fly to match the coordinate system of the map:</p>
<ol start="26">
<li>Close the Map Properties window.</li>
<li>Save your project.</li>
<li>If you are not continuing to the next recipe, you may close ArcGIS Pro. Otherwise keep it open.</li>
</ol>
<p>You can now set the coordinate system for any new map that you create. This is important for the same reason that you need to know the coordinate system of any existing map you may work with: GIS is reliant on the use of real world coordinate systems to properly display the location of data within our maps. As long as the data we use is in and properly assigned the correct coordinate system, ArcGIS Pro is able display the data in the common coordinate system we assign to a map. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Changing the coordinate system of a map</h1>
                
            
            
                
<p>You now know how to determine the coordinate system for an existing map, and how to set one for a new map. But how do you change the coordinate system for a map or scene?</p>
<p>You might be wondering why you would want to change the coordinate system for a map. There are several reasons why you might want to change the coordinate system assigned to a map. As mentioned in the introduction, some coordinate systems are better suited for specific operations. If you need to measure areas or distances for analysis or editing, a projected coordinate system is best, especially for small areas such as a county, city, or district. If you are trying to show locations of features across large areas, such as a country or the world, then a geographic coordinate system is often best. If you are publishing as a web map then it might require the map be in the WGS 1984 Web Mercator (Auxiliary Sphere) coordinate system to conform with other datasets. So, if you need to do one of these and your map is in a different coordinate system, you might need to change it. Luckily it is not hard to change the coordinate system for a map, as you are about to see.</p>
<p>Changing the coordinate system for a map does not change the coordinate system for the underlying data referenced in the map. This means that if you have a shapefile in your map as a layer, and that shapefile is in NAD 83 UTM Zone 16N Meters, then if you change the Map Coordinate system to the WGS 1984 Web Mercator (Auxiliary Sphere), this will not change the coordinate system the shapefile is stored in. In other words, changing the coordinate system of the map does not project the data it references to a new coordinate system. You will learn how to project data to a different coordinate system later in this chapter.</p>
<p>In this recipe, you will learn how you can change the coordinate system used within a map.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>It is recommended that you complete all previous recipes in this chapter before starting this one. That will ensure that you have the basic knowledge and understanding required to successfully complete this recipe. This recipe can be completed with all license levels of ArcGIS Pro. You do need to have the sample data installed as well.</p>
<p> </p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>If you closed ArcGIS Pro before starting this recipe, you will need to start ArcGIS Pro and open the <kbd>CoordinateSystems.aprx</kbd> project located in <kbd>C:\Student\ArcGISProCookbook\Chapter6\CoordinateSystems</kbd> using the skills you have learned in past recipes. If you are continuing from the previous recipe, the project should already be open and you can continue to the next step. </li>
<li>Make sure the Basic Map of Trippville is the active map in the map view. If the map is still open, click on the tab for the Basic Map of Trippville at the top of the map view area, as illustrated in the following screenshot. If you closed the map during a past recipe, you will need to reopen it. To reopen the map, expand the Maps folder in the Catalog pane. Then right-click on the Basic Map of Trippville in the Maps folder and select Open from the menu that appears, as illustrated:</li>
</ol>
<div><img height="295" src="img/a50b263b-3e04-489e-9d1e-22dfc9546d5e.png" width="901"/></div>
<p>Activating the map or opening it if needed</p>
<ol start="3">
<li>Move your mouse pointer to the approximate center of the map and answer the question. Try to remember the location you use. You will need to know it for a later task in this recipe.</li>
</ol>
<div><p><strong>Question</strong>: What is the x and y coordinate for the location of your mouse pointer? (Remember, you can get this value from the status bar at the bottom of the map view.)</p>
<p>Answer:</p>
</div>
<p style="padding-left: 60px">As you can see, the <em>x</em> coordinate will be somewhere around a value of 2,150,000, and the <em>y</em> coordinate somewhere around a value of 1,390,000. Of course, your values will be different, but should be in the general ballpark:</p>
<ol start="4">
<li>Right-click on the Basic Map of Trippville in the Contents pane, as shown in the following screenshot, and select Properties:</li>
</ol>
<div><img height="342" src="img/d1f8c325-77ff-4fde-bf39-867be91a2add.png" width="309"/></div>
<div><p>You can also just double-click on the map name in the Contents pane to open the map properties. This also works with layers.</p>
</div>
<ol start="5">
<li>Click on the Coordinate Systems option in the left panel of the Map Properties pane. It should look like the following: </li>
</ol>
<div><img height="293" src="img/894a7750-930e-465f-b72e-659fd3e2057c.png" width="498"/></div>
<p style="padding-left: 60px">You are going to change the map's coordinate system from the NAD 1983 State Plane Georgia West FIPS 1002 Feet to the WGS 1984 Web Mercator (Auxiliary Sphere) so it will be ready to publish as a web map later:</p>
<ol start="6">
<li>Expand the Projected coordinate system option by clicking on the small arrowhead located to the left of it.</li>
<li>Scroll down to World and expand it as well.</li>
<li>Scroll down until you see WGS 1984 Web Mercator (auxiliary sphere). It will be located near the bottom of the list.</li>
<li>Select the WGS 1984 Web Mercator (auxiliary sphere) from the list. Your Current XY value should change to reflect the coordinate system you selected, as shown in the following screenshot:</li>
</ol>
<div><img height="264" src="img/47ce657c-733c-4444-9cbe-94591f5b0f5d.png" width="443"/></div>
<ol start="10">
<li>Once you have verified that you have selected the correct coordinate system, click OK to apply the change.</li>
<li>Save your project.</li>
<li>Now move your mouse pointer to approximately the same location that you used in <em>step 3</em> as the estimated center of the map.</li>
<li>Compare the results to those you got in <em>step 3,</em> and answer the following question:</li>
</ol>
<div><p><strong>Question</strong>: Are the coordinates for the approximate center of the map different now that you have changed the coordinate system?</p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">As you can see, the coordinates for the approximate center of the map have indeed changed. They are very different. But has this also changed the coordinate system for the layers and their source data? It was said earlier that they should not have changed, but let’s verify just to make sure:</p>
<ol start="14">
<li>In the Contents pane, open the Properties for the City Limits layer using skills you have learned in past recipes.</li>
</ol>
<div><p>You access the properties for a layer the same way you access the properties for a map.</p>
</div>
<ol start="15">
<li>Click on the Source option located in the left panel of the Layer Properties window.</li>
<li>Scroll down in the right panel until you see Spatial Reference. Then expand Spatial Reference by clicking on the small arrowhead.</li>
<li>Look at the Project Coordinate System assigned to the City Limits layer. Then answer the following question:</li>
</ol>
<div><p><strong>Question</strong>: Is the coordinate system assigned to the layer the same or different from the map?</p>
<p><strong>Answer</strong>:</p>
</div>
<ol start="18">
<li>Close the Layer Properties window by clicking Cancel.</li>
<li>If you are not continuing to the next recipe, save your project and close ArcGIS Pro. If you are continuing, leave ArcGIS Pro and the project open.</li>
</ol>
<p>As you have just verified, the coordinate system for the layer source has not changed. It is still being stored in the same coordinate system it has always been in. So just changing the coordinate system for the map does not change the source data's coordinate system. It only changes how it is displayed in that specific map. ArcGIS Pro projects the data on the fly from the coordinate system it is stored in to that the map is displaying. This is very useful when working with data from multiple organizations which may not use the same coordinate system as yours. One thing to remember though is that projecting on the fly does use more computer resources and will slow down the rendering of the data every time you pan or zoom in the map. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Defining a coordinate system for data</h1>
                
            
            
                
<p>You now know how to assign and change the coordinate system used in a map. Maps are not the only thing that are assigned a coordinate system. Our data is also assigned a coordinate system, or at least it should be. If your data is not assigned a coordinate system then ArcGIS Pro may not be able to display the correct location with all your other data. This is also true if your data is assigned the wrong coordinate system.</p>
<p>Where is the coordinate system information stored within your data? Well, that depends on what type of data you are working with. If it is a feature class stored in a geodatabase, then the coordinate system information is stored within the geodatabase itself. If you are working with shapefiles, then the assigned coordinate system is stored in a file with a .prj file extension.</p>
<p>If you are working with CAD data, meaning <kbd>.dwg</kbd>, <kbd>.dxf</kbd>, or <kbd>.dgn</kbd> files, then you will also need a <kbd>.prj</kbd> file in order for ArcGIS Pro to know what coordinate system it is in. While some CAD files can be assigned a coordinate system within the drawing itself, ArcGIS Pro cannot access that part of the file, so you must have an external <kbd>.prj</kbd> file.</p>
<p>As you saw in <a href="b6f25e84-28a9-4d2d-aaca-3550460d4650.xhtml">Chapter 2</a>, <em>Creating and Storing Data</em>, in the <em>Creating a new Geodatabase</em> recipe, when you create a new feature class in a geodatabase, you are asked to assign the coordinate system as part of the Create Feature Class tool. So, in most cases, when you create new feature classes or shapefiles, you will assign the coordinate system for that data as you create it. However, you will find that many existing or legacy datasets do not have a coordinate system defined. This is true mostly for shapefiles and CAD files.  </p>
<p>Just because a dataset does not have an assigned coordinate system does not mean it was not created in a real-world coordinate system. The majority of all shapefiles are created in a real-world coordinate system. They are just missing the <kbd>.prj</kbd> file required by ArcGIS Pro and other Esri products to know what the coordinate system is. The same is true of many CAD files as well, though you will encounter a larger number of CAD files that are not in a real-world coordinate system. You will learn more about that in a later chapter. If the data that is missing from the coordinate system was created in the same coordinate system as the rest of your data, you can still use it for maps, to perform analysis, and more, without defining the coordinate system for the data. It is when you try to mix data in different coordinate systems that you will start to encounter problems if you try to publish the data to a web service or convert it to another format. So, it is generally considered best practice to always define a coordinate system for all your data.</p>
<p>In this recipe, you will learn how to define a coordinate system for data that does not have one. In this case, it will be a CAD file that was created in a real-world coordinate system, which is different from all your other data.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>It is recommended that you complete all the recipes in <a href="b6f25e84-28a9-4d2d-aaca-3550460d4650.xhtml">Chapter 2</a>, <em>Creating and Storing Data</em>, of this cookbook before you begin this recipe. <a href="b6f25e84-28a9-4d2d-aaca-3550460d4650.xhtml">Chapter 2</a>, <em>Creating and Storing Data</em>, will provide you with a better understanding of data and how it is created in ArcGIS Pro. That lays part of the foundational understanding needed to work and understand this recipe.</p>
<p>This recipe can be completed with all license levels of ArcGIS Pro. You will need to ensure the sample data is also installed before starting. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>If you closed ArcGIS Pro before starting this recipe, you will need to start ArcGIS Pro. Once ArcGIS Pro has started, open the <kbd>CoordinateSystems.aprx</kbd> project located in <kbd>C:\Student\ArcGISProCookbook\Chapter6\CoordinateSystems</kbd> using the skills you have learned in past recipes. If you are continuing from the previous recipe, the project should already be open and you can continue. </li>
<li>Make sure the Basic Map of Trippville is the active map in the map view. If you are not sure how to do this, refer back to <em>step 2</em> in the previous recipe.</li>
<li>In the Catalog pane, expand the Folders folder so you can see its contents.</li>
<li>Expand the CoordinateSystems folder.</li>
<li>Expand the Northern Subdivision.DWG file. This is an AutoCAD drawing file that contains information about a new subdivision being built near the City of Trippville.</li>
<li>Right-click on the Polyline feature class within the Northern Subdivision.DWG file and select Add to Current Map.</li>
</ol>
<p style="padding-left: 60px">The new layer should appear in the Contents pane, however, you will not see it drawn in your map. You will now begin to investigate why:</p>
<ol start="7">
<li>Right-click on the Northern Subdivision–Polyline layer and select Zoom to Layer, as illustrated:</li>
</ol>
<div><strong><img height="260" src="img/19ae1738-8d99-4dc3-af7b-b65d601ca351.png" width="262"/></strong></div>
<ol start="8">
<li>Move your mouse pointer to the map view and watch the map display the coordinate readout in the Status Bar at the bottom of the map view.</li>
</ol>
<p style="padding-left: 60px">As you can see, the layer was drawn in the map. It is just not appearing in the right location. Let’s continue to investigate a little more to see why it is not drawing the layer in the correct location in relation to all your other data:</p>
<ol start="9">
<li>Double-click on the Northern Subdivision-Polyline layer to open the Layer Properties window.</li>
<li>Select the Source option from the panel on the left side of the window.</li>
<li>Scroll down in the panel on the right until you see Spatial Reference.</li>
<li>Expand the Spatial Reference and answer the following question:</li>
</ol>
<div><strong>Question</strong>: What is the coordinate system assigned to the Northern Subdivision–Polyline layer?<br/>
<br/>
<strong>Answer</strong>: </div>
<p class="mce-root" style="padding-left: 60px">As you can see, ArcGIS Pro indicates that this new layer has an Unknown Coordinate System. This means that as far as ArcGIS Pro is concerned, the data is not in a real-world coordinate system. However, after talking with the person that created the drawing file, you have found out it is in the UTM 16N coordinate system. ArcGIS Pro just does not know this because there is no projection file to tell it that the data is in that coordinate system. You need to create the projection file for the drawing file:</p>
<ol start="13">
<li>Click on the Analysis tab in the ribbon.</li>
<li>Click on the Tools button located in the Geoprocessing group in the Analysis tab. This will open the Geoprocessing pane.</li>
</ol>
<ol start="15">
<li>In the Geoprocessing pane, click on the Toolboxes tab near the top. This will display all the system toolboxes included in ArcGIS Pro.</li>
<li>Expand the Data Management toolbox.</li>
<li>Select the Define Projection tool, as indicated:</li>
</ol>
<div><strong><img height="280" src="img/3770a047-2c68-4ecf-ac4a-2a656950c20c.png" width="237"/></strong></div>
<ol start="18">
<li>Scroll down until you see the Projections and Transformations toolset.</li>
<li>For the Input Dataset or Feature Class, click on the drop-down arrow and select the Northern Subdivision–Polygon layer from the list.</li>
<li>For the Coordinate System, click on the Select Coordinate System icon, which looks like a small wireframe globe. This will open the Coordinate System window.</li>
<li>In the area available under XY Coordinate Systems Available, expand the projected coordinate systems, as illustrated in the following screenshot:</li>
</ol>
<div><strong><img height="272" src="img/88b997ed-3aa3-434e-a25c-d2438c328fca.png" width="317"/></strong></div>
<ol start="22">
<li>Scroll down the list and expand UTM.</li>
<li>Scroll down and expand NAD 1983.</li>
<li>Scroll down and select NAD 1983 UTM Zone 16N, as shown in the following screenshot, then click OK:</li>
</ol>
<div><strong><img height="292" src="img/877313be-8d24-4357-9f4d-445da0e891ef.png" width="340"/></strong></div>
<ol start="25">
<li>Verify that your Define Projection tool looks like the screenshot, and click on Run:</li>
</ol>
<div><img class="alignnone size-full wp-image-870 image-border" height="216" src="img/9a482fc4-030b-4ed0-82e0-a39841a62520.png" width="327"/></div>
<p style="padding-left: 60px">When the Define Projection tools completes, the Northern Subdivision–Polyline layer should disappear from view in the map:</p>
<ol start="26">
<li>Right-click on the Northern Subdivision–Polyline layer in the Contents pane and select Zoom to Layer. If necessary, zoom out using the scroll wheel on your mouse so that you can see the layer in relation to the other layers.</li>
</ol>
<p style="padding-left: 60px">Your map view should look similar to the following screenshot. The new subdivision is located due north of the City of Trippville. This is the correct location. Remember that your colors and scale might be different:</p>
<div><strong><img src="img/2894678f-d8f5-4db6-af72-657b865dd84c.png"/></strong></div>
<p>New subdivision shown in the correct location in relation to the City of Trippville</p>
<p style="padding-left: 60px">The layer is now showing up in the correct location because you defined the coordinate system, creating the <kbd>.prj</kbd> file for the drawing file referenced by the layer. This allowed ArcGIS Pro to project the layer from NAD 1983 UTM 16N coordinate system, which the data was created in, to NAD 1983 State Plane GA West, which is used by the map. ArcGIS Pro does project the data on the fly once the coordinate system is defined:</p>
<ol start="27">
<li>Close the Geoprocessing pane to free up screen space.</li>
</ol>
<div><p>The Define Projection tool will also assign a coordinate system and generate a <kbd>.prj</kbd> file for shapefiles, DXF, and DGN files. You do need to ensure that the data is in a real-world coordinate system and what that coordinate system is before you use the tool. The Define Projection tool will not georeference data that was not created in a real-world coordinate system, nor will it project data from one coordinate system to another.</p>
</div>
<ol start="28">
<li>Save your project to ensure you do not lose any of your work.</li>
<li>If you are not continuing to the next recipe, close ArcGIS Pro. If you are continuing, keep ArcGIS Pro open.</li>
</ol>
<p>This recipe illustrates the importance of having a coordinate system assigned to your GIS data. As you saw, without it, the data will not display in the correct location. This makes it impossible to use as part of a map or to perform analysis. It is also not unusual to get data which has been assigned the wrong coordinate system. The behavior and process described in this recipe can also be used to assign the correct coordinate system to data that has been wrongly assigned. </p>


            

            
        
    

        

                            
                    <h1 class="header-title">Projecting data to different coordinate systems</h1>
                
            
            
                
<p>You now know how to change the coordinate system for a map, and how to assign one to data that is missing a coordinate system. But how do you change the coordinate system for data? That process is called projecting data.</p>
<p>When you need to move or project data from one coordinate system to another, it requires a lot more than just redefining the assigned coordinate system like you did in the previous recipe. It requires ArcGIS Pro to recalculate all the coordinate values for the features within that dataset. This means all those features will have new coordinates that represent values in the coordinate system it has moved to. To calculate the new coordinate values, ArcGIS Pro must perform many calculations for each feature to account for possible changes in datums, units, reference locations, earth models, and more. So, it can take a long time for larger datasets.</p>
<p>The tool you use to move data from one coordinate system to another is the Project tool. This tool is located in the Data Management Tools toolbox and the Projections and Transformations toolset. In this recipe, you will use the Project tool to move data from one coordinate system to another. You will project the Trippville City Limits from its current coordinate system to the WGS 1984 Web Mercator (Auxiliary Sphere) coordinate system for publishing to ArcGIS Online.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">Getting ready</h1>
                
            
            
                
<p>As with the previous recipe, it is recommended that you complete all the recipes in <a href="b6f25e84-28a9-4d2d-aaca-3550460d4650.xhtml">Chapter 2</a>, <em>Creating and Storing Data</em>, of this cookbook before you work with this recipe. <a href="b6f25e84-28a9-4d2d-aaca-3550460d4650.xhtml">Chapter 2</a>, <em>Creating and Storing Data</em>, will provide you with a better understanding of data and how it is created in ArcGIS Pro. That lays part of the foundational understanding needed to work through and understand this recipe.</p>
<p>This recipe can be completed with all license levels of ArcGIS Pro. To complete the last part of this recipe you will also need a connection to ArcGIS Online.  Your user account will need to be tier two and have publisher rights.</p>


            

            
        
    

        

                            
                    <h1 class="header-title">How to do it...</h1>
                
            
            
                
<ol>
<li>If you closed ArcGIS Pro before starting this recipe, you will need to start ArcGIS Pro. Then open the <kbd>CoordinateSystems.aprx</kbd> project located in <kbd>C:\Student\ArcGISProCookbook\Chapter6\CoordinateSystems</kbd> using the skills you have learned in past recipes. If you did not close ArcGIS Pro when you completed the previous recipe, the project should already be open and you can continue. </li>
<li>Make sure the Basic Map of Trippville is the active map in the map view. If you are not sure how to do this, refer back to <em>step 2</em> in the <em>Changing the coordinate system of a map</em> recipe located in this chapter.</li>
<li>In the Contents pane, double-click on the City Limits layer to open the Layer Properties.</li>
<li>Click on the Source option in the left panel of the window.</li>
<li>In the right panel of the Layer Properties window, scroll through the options until you get to Spatial Reference.</li>
<li>Expand the Spatial Reference option and answer the following question:</li>
</ol>
<div><p><strong>Question</strong>: What is the Projected Coordinate system for the City Limits layer?</p>
<p><strong>Answer</strong>:</p>
</div>
<p style="padding-left: 60px">You can see that the City Limits layer is being stored in the NAD 1983 State Plane Georgia West coordinate system. You want to project this layer so that it is in the WGS 1984 Web Mercator (Auxiliary Sphere) coordinate system, so it will be easier to integrate with other online content. The WGS 1984 Web Mercator (Auxiliary Sphere) coordinate system is the one used by most public mapping websites, such as Google Earth, Bing Maps, and Esri ArcGIS Online:</p>
<ol start="7">
<li>Close the Layer Properties window by clicking Cancel.</li>
<li>Click on the Analysis tab in the ribbon.</li>
<li>Click on the Tools button, in the Geoprocessing group on the Analysis tab, to open the Geoprocessing pane.</li>
<li>Click on the Toolboxes tab at the top of the Geoprocessing pane, as shown in the following screenshot:</li>
</ol>
<div><img height="174" src="img/8532fb1e-f3de-49e0-b48d-8eb7cfb0e820.png" width="264"/></div>
<ol start="11">
<li>Expand the Data Management Tools toolbox by clicking on the small arrowhead located next to it.</li>
<li>Scroll down and expand the Projections and Transformations Toolset by clicking on the small arrowhead next to it.</li>
<li>Click on the Project tool to open it.</li>
</ol>
<div><p>The Batch Project tool does the same thing as the Project tool, but allows you to input multiple feature classes or datasets.</p>
</div>
<ol start="14">
<li>Click on the drop-down arrow for the Input Dataset or Feature Class and select City Limits from the list.</li>
<li>Click on the Browse button located to the right of the Output Dataset or Feature Class cell, as indicated:</li>
</ol>
<div><strong><img height="196" src="img/06e8611f-dbf3-41bb-8af4-63697b426580.png" width="258"/></strong></div>
<ol start="16">
<li>In the Output Dataset or Feature Class window, select Databases from the panel on the left. You may need to expand the Project option first.</li>
<li>Double-click on the Trippville_GIS.gdb geodatabase in the right panel.</li>
<li>In the Name cell located at the bottom, type <kbd>City_Limits_Web</kbd>.</li>
<li>Verify, your Output Dataset or Feature Class window looks like the following screenshot, and click Save:</li>
</ol>
<div><strong><strong><img height="295" src="img/bec2d0b2-838e-4744-9115-d1bfb4eebfdd.png" width="428"/></strong></strong></div>
<ol start="20">
<li>Click on the small wireframe globe, located to the right of the Output Coordinate System, to open the Coordinate System window.</li>
<li>In the bottom panel, expand the Projected coordinate systems.</li>
<li>Scroll through the list of the different types of projected coordinate systems until you see World. Expand the World option so you can see its contents.</li>
<li>Scroll down until you see WGS 1984 Web Mercator (auxiliary sphere) and select it.</li>
<li>Verify that your Coordinate System window looks like the screenshot and click OK:</li>
</ol>
<div><strong><img height="450" src="img/c7bf34d4-4489-49c4-af23-7e3476cc26d7.png" width="495"/></strong></div>
<p>Coordinate system window, selecting the WGS 84 Web Mercator (auxiliary sphere) coordinate system</p>
<ol start="25">
<li>Verify that your Project tool looks like the following screenshot, then click on the Run button at the bottom. The new City_Limits_Web layer will be added to your map when it is complete:</li>
</ol>
<div><img class="alignnone size-full wp-image-871 image-border" height="263" src="img/4aaf51fc-063d-4a14-9989-11daa1614b29.png" width="398"/></div>
<p style="padding-left: 60px">Notice that a Geographic Transformation is automatically applied. Transformations apply mathematical adjustments when projecting data, to account for differences in datums. The original coordinate system for the City Limits layer referenced the North American Datum of 1983 (NAD 1983). The WGS 1984 Web Mercator (auxiliary sphere) coordinate system references the WGS 84 datum. While these are both Earth-centered datums, they are slightly different. That difference must be accounted for when the data is projected. That is what the transformation does.</p>
<p style="padding-left: 60px">Also, note that the Project tool creates a new feature class, leaving the original one intact. This provides a safety net in case you were to select the wrong output coordinate system:</p>
<ol start="26">
<li>Close the Geoprocessing pane when the Project tool is complete and save your project.</li>
<li>Right-click on the City_Limits_Web layer in the Contents pane and select Copy, as illustrated in the following screenshot:</li>
</ol>
<div><strong><img height="290" src="img/9c6bc729-9387-4df8-af7c-261e4562fe34.png" width="275"/></strong></div>
<ol start="28">
<li>Click on the Insert tab in the ribbon.</li>
<li>Select the New map button in the Project group on the Insert tab to add a new map to your project.</li>
<li>Right-click on the Map in the Content pane and select Paste, as shown in the following  screenshot:</li>
</ol>
<div><strong><strong><img height="176" src="img/ebb34b8f-bc10-4478-9d30-c4bb76dd7572.png" width="201"/></strong></strong></div>
<div><p>If the Paste option is grayed out, you may need to go back to the Basic Map of Trippville and copy the layer again.</p>
</div>
<ol start="31">
<li>Click on the Share tab in the ribbon.</li>
<li>Click on the Web Layer button located in the Share As group on the Share tab. This will open the Share as Web Layer tool pane.</li>
</ol>
<div><p>If this button is grayed out or not accessible, it may be because you are not logged in to ArcGIS Online. Look in the upper-right corner of the ArcGIS Pro interface. If it says Sign in, you are not connected to ArcGIS Online and need to do so. Click on Sign in to log in to your ArcGIS Online account.</p>
</div>
<ol start="33">
<li>In the Name cell, type <kbd>City_of_Trippville_Limits</kbd>.</li>
</ol>
<div><p>Spaces and special characters are not allowed in the name of a web layer, with the exception of an underscore.</p>
</div>
<ol start="34">
<li>Ensure Layer Type is set to Feature.</li>
<li>Type the following for the Description: <kbd>This layer represents the current boundary for the City of Trippville.</kbd></li>
<li>Type the following for Tags, and make sure to press the <em>Enter</em> key between each one: <kbd>Trippville</kbd>, <kbd>City</kbd>, <kbd>Boundary</kbd>, <kbd>Limits</kbd>.</li>
<li>Set your Sharing Options as desired. If you are using your organization's primary ArcGIS Online account, it is probably best to leave it set to My Content only, otherwise other users in your organization may see and have access to the layer you are about to share.</li>
</ol>
<ol start="38">
<li>Verify that your Share As a Web layer tool looks like the following screenshot, then click the Configuration tab located near the top of the pane:</li>
</ol>
<div><strong><img height="402" src="img/5d36550a-80d2-49ae-aceb-69f3630b0dbe.png" width="354"/></strong></div>
<p>Share Map As Web Layer window</p>
<ol start="39">
<li>Review the options under Configuration; you are not going to change these. When you are done reviewing the options, click on the Content tab near the top of the pane.</li>
<li>Verify that your Web Layer will include the City_of_Trippville_Limits with the City_Limits_Web.</li>
<li>Click the Analyze button at the bottom of the pane to see if there are any issues that might prevent the web layer from being published successfully.</li>
</ol>
<p style="padding-left: 60px">You should get two warnings, as illustrated in the screenshot. Warnings are signified by exclamation points in a yellow triangle. Warnings indicate something that violates recommended settings or practices, but which will not stop the web layer from publishing. Errors, on the other hand, will cause the publishing of the web layer to fail:</p>
<div><img height="404" src="img/90b7dfd5-b0ed-4206-96c6-8f51e94ef491.png" width="356"/></div>
<p style="padding-left: 60px">The first warning, as shown, indicates that a layer is missing a feature template. Since you are not allowing editing of this layer when it is published to the web, this is not going to be a problem and can be ignored. The second warning, indicating that the layer’s data source is not supported, is referring to the Basemap. We are not concerned with the basemap since one can be added in ArcGIS Online if you use the City_Limits_Web layer in a web map. You will learn more about creating web maps in <a href="4ba4882e-2afc-4bb8-9906-cb4ef46722ca.xhtml">Chapter 12</a>, <em>Introducing ArcGIS Online</em> and <a href="9ed15eab-33d0-4c1e-a272-5ed54842381a.xhtml">Chapter 13</a>, <em>Publishing Your Own Content to ArcGIS Online</em>. These warnings should not adversely impact the publishing of the layer to the web.</p>
<ol start="42">
<li>Click the Publish button at the bottom of the Share As Web Layer pane. This will publish this layer to ArcGIS Online. Depending on your web connection, this operation might take some time to complete.</li>
<li>Once the tool has successfully published the web layer, click on Manage the web layer, located at the bottom of the tool, as illustrated in the following screenshot. This will launch your web browser and take you to your ArcGIS Online login screen:</li>
</ol>
<div><strong><strong><img height="504" src="img/18c60d5b-b345-4b33-a0b1-fbaf453e475a.png" width="443"/></strong></strong></div>
<ol start="44">
<li>Log in into your ArcGIS Online account, as shown in the following screenshot:</li>
</ol>
<div><strong><img height="433" src="img/e75c38a3-3b95-44f1-a774-7e501ab0d8c2.png" width="716"/></strong></div>
<p>ArcGIS Online Login page</p>
<p style="padding-left: 60px">You should now see the properties associated with the web layer that you just published. The web layer is a copy of your data now stored in ArcGIS Online and served out as a web feature service. Now, let’s look at the web layer you just published in the ArcGIS Online Map Viewer:</p>
<ol start="45">
<li>Click on the Open in Map Viewer button located on the right side of the web page in your web browser. This will open the web layer you created in a web map:</li>
</ol>
<div><strong><img src="img/bec5e90a-ff69-421e-b9d9-c1d2507aa418.png"/></strong></div>
<p>ArcGIS Online Map Viewer application with your web layer displayed</p>
<ol start="46">
<li>Explore the web layer you created in the web viewer. Once done, close your browser.</li>
<li>Return to ArcGIS Pro.</li>
<li>Close the Share As Web Layer pane.</li>
<li>Save your project.</li>
<li>Close ArcGIS Pro.</li>
</ol>
<p>You have just projected a layer to a new coordinate system using the Project tool. You projected the City Limits layer to the coordinate system used by most web mapping applications, so it could be more easily integrated with other web-based GIS data in the future, then you published that layer to ArcGIS Online. Next, you viewed the new layer that you published in a web map via the ArcGIS Online Map Viewer. In <a href="4ba4882e-2afc-4bb8-9906-cb4ef46722ca.xhtml">Chapter 12</a>, <em>Introducing ArcGIS Online</em>, you will learn more about ArcGIS Online and how you can use it to share and access data with those both in and outside your organization.</p>
<p class="mce-root"/>


            

            
        
    </body></html>