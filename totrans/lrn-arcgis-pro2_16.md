与他人共享你的工作

正如你在本书中学到的，ArcGIS Pro拥有强大的工具来创建令人惊叹的2D和3D地图，以及执行丰富的空间分析任务。如果无法将这些结果交给需要的人，所有这些功能都显得微不足道。

随着大众对地理空间和移动技术的日益增长，对地理信息系统（**GIS**）信息的需求也在增加。如今，几乎每个人都有一部智能手机或平板电脑，并使用过某种类型的地图应用程序，如**Google Maps**、**Waze**、**Bing Maps**或当地的县税务地块应用程序。所有这些都意味着人们变得更加地理空间化和技术熟练。他们期望能够访问和使用你提供的数据和分析。

ArcGIS Pro提供了几种方法和工具来与他人共享你的GIS内容。哪种可用的工具或方法最适合取决于以下几个因素：

+   首先，*你试图共享的是什么？* 是数据、整个地图还是工具？

+   第二，*你的受众拥有哪些软件和技能？*

+   第三，*你希望他们能够对共享内容做什么 – 打印、编辑、查询或下载？*

+   第四，*他们如何连接到你的GIS信息？*

本章我们将涵盖以下主题：

+   与网络上的其他人共享内容

+   与网络外的人共享内容

+   如何导出为其他GIS数据格式

+   如何导出为非GIS数据格式

+   如何通过ArcGIS Online将内容发布到网络上

在本章中，你将了解各种数据共享方法。你将能够使用这些不同的方法与他人共享你的GIS数据，无论他们是否拥有GIS软件。

# 技术要求

除了ArcGIS Pro许可证外，你还需要一个具有发布者或管理员权限的**ArcGIS Online**用户登录，才能完成本章的所有练习。

# 与网络上的其他人共享内容

与计算机网络上的其他人共享GIS内容相对容易。最大的考虑因素将是他们是否有访问GIS软件的权限。在本节中，我们将看到如何与计算机网络上的其他人共享信息，无论他们是否有GIS软件。

如果你也有ArcGIS Pro、**ArcGIS Desktop**或某些其他GIS应用程序，那么共享你的GIS数据会更容易。只要他们能够访问数据文件，许多这些应用程序都有能力打开相同类型的数据。这应该允许他们将数据添加到他们的应用程序中。

如果您的网络上有没有 GIS 软件的人，事情会变得稍微复杂一些，因为虽然他们可能能够访问数据，但他们将没有所需的软件。在这种情况下，您需要将 GIS 内容导出为更常见的非 GIS 格式，例如 `.pdf` 文件。幸运的是，ArcGIS Pro 也支持这种能力。

无论他们是否有 GIS 软件，他们都需要访问和权限来使用您存储 GIS 内容的数据库、文件和文件夹。如果他们没有适当的权限，他们将无法使用您创建的数据或文件。

## 如果用户拥有 ArcGIS Pro

如果您的网络上的其他用户拥有 ArcGIS Pro，只要他们有权访问和项目以及项目中使用的源数据，他们就能打开您创建的项目。您还可以共享图层、地图、任务和布局文件以标准化您的内容。我们将在接下来的几个部分中查看所有这些文件。

### 理解图层文件

ArcGIS Pro 中的图层文件具有 `.lyrx` 文件扩展名。它们存储与地图中图层相关的所有属性设置，例如源、符号、字段可见性、标签、定义查询等。图层文件允许您标准化这些设置，以便图层可以在多个地图和项目中以相同的方式显示。

使用图层文件添加新图层的过程与使用要素类添加图层的过程相同。但是，您不是选择 **地理数据库**、**shapefile**、**计算机辅助设计**（**CAD**）文件或 **栅格**，而是选择图层文件。当您这样做时，您的图层将带有所有预配置的属性添加到您的地图中，因此您不需要手动设置所有图层属性。这可以为您节省宝贵的时间。

在 **ArcMap** 中创建的图层文件也可以像在 ArcGIS Pro 中创建的图层一样在 ArcGIS Pro 中使用。然而，在 ArcGIS Pro 中创建的图层文件不能在较旧的 ArcMap 应用程序中使用。

创建图层文件相对简单。您只需在内容窗格中选择图层。然后激活共享选项卡并选择图层文件。从那里，填写所需信息并点击保存。就这么简单。

为什么不试一试呢？

## 练习 13A – 创建图层文件并使用它

现在，这是您通过动手练习将所学知识付诸实践的机会。在这个练习中，您将创建一个图层文件，然后使用它通过 ArcGIS Pro 在项目内添加一个新图层到地图中。

### 步骤 1 – 创建图层文件

在这个步骤中，您将为 Trippville 区划图层创建图层文件。看起来有几个人已经在多个地图中使用过 zoning 图层，但他们一直使用自己的个人设置。这导致了混淆，因此社区发展总监希望您根据城市的官方 zoning 图创建一个标准：

1.  启动ArcGIS Pro并打开位于`C:\Student\IntroArcPro\Chapter13`的`Ex13.aprx`项目文件。

1.  检查地图，特别注意 zoning 图层。注意已经应用到图层上的设置，如符号化和标注。

问题：*Zoning 图层正在应用哪种符号化类型？图层是否被标注？*

1.  在内容窗格中选择 zoning 图层，然后在功能区中点击“共享”选项卡。

1.  在“另存为”组中点击图层文件按钮。这将打开“另存图层（s）为LYRX文件”窗口。

1.  使用窗口左侧的树形图导航到`C:\Student\IntroArcPro\Chapter13`。

1.  将新的`.lyrx`文件命名为`Trippville Official Zoning`并点击保存。

你刚刚为`Ex13`项目中的官方 zoning 地图中出现的 zoning 图层创建了一个图层文件。这将允许你轻松地将此图层添加到该项目或其他项目中的其他地图，以便它将保持所有现有的图层属性，如符号化、标注、定义查询、比例范围等。

### 第2步 – 使用图层文件将图层添加到地图

在这一步，你需要测试你创建的图层文件，以确保它按预期工作。你将使用它来在你项目的空白地图中添加一个新的图层：

1.  在目录窗格中，展开`Folders`文件夹。然后展开`Chapter13`文件夹，以便你可以看到其内容。

1.  右键点击`Trippville Official Zoning.lyrx`文件，然后点击“添加到新”选项，然后选择地图，如下面的截图所示：

![图片](img/250dedcb-8da7-41bd-8d93-3dcfbccdbccd.png)

你的项目中已经添加了一个新的地图，并且它应该包含 zoning 图层，自动以与官方 zoning 地图相同的方式符号化和标注。这是因为你使用图层文件添加了图层，而不是直接访问地理数据库中的要素类，就像你在过去的练习中所做的那样。

1.  保存你的项目并关闭ArcGIS Pro。

正如你所经历的，图层文件可以让你快速将已经配置好的图层添加到地图中，这可以为你和你的组织中的其他人节省大量时间。图层文件还可以用来标准化在组织中的各种地图中特定图层显示的方式。

现在我们继续下一节，关于地图文件的内容。

## 学习地图文件

地图文件与图层文件类似，但它们保存了整个地图的设置。这包括当该地图处于活动状态时在内容窗格中显示的所有图层以及每个图层的设置。地图文件可以是来自 ArcGIS Pro 项目的二维或三维场景。地图文件具有`.mapx`文件扩展名。

对于那些使用过 ArcGIS Desktop（**ArcMap** 和 **ArcCatalog**）的用户，重要的是要记住，在 ArcGIS Pro 中的地图或场景只是项目的一个组成部分。与 ArcMap 中的地图文档不同，它通常被称为地图，ArcGIS Pro 中的地图是一个单独的项目，不包括布局和其他地图（这些在 ArcMap 中称为数据框架）。

地图文件允许您共享在 ArcGIS Pro 中创建的地图，以便其他人可以将它们包含在自己的项目中，或者您可以使用他人的。这可以节省大量时间，因为地图不需要从头开始创建。它可以直接导入到项目中，然后调整以满足当前需求。

将新地图添加到您的项目中从地图文件开始并不困难。只需在 ArcGIS Pro 的功能区中点击“插入”选项卡，然后选择“导入地图”。从那里，您只需导航到地图文件的位置并导入它。

创建地图文件遵循与创建图层文件相同的基本过程。您转到功能区中的“共享”选项卡。而不是选择“图层文件”，您选择“地图文件”。

对于那些一直在使用 ArcGIS Desktop（**ArcMap** 和 **ArcCatalog**）的用户，请记住，在 ArcGIS Pro 中的地图并不完全等同于地图文档。在 ArcGIS Pro 项目中，您可能有几个地图以及单独的布局。当您在 ArcGIS Pro 中创建地图文件时，它将仅包含创建地图文件时选择的活动的地图。这不会包括可能包含地图的任何布局。

### 地图文件挑战

使用您在前几节中学到的创建图层文件技能，基于 `Ex13` 项目中的“官方 zoning 地图”创建地图文件。然后打开一个新的项目，并尝试导入地图文件以在该项目中创建一个新的地图。

接下来，我们将查看布局文件。

## 理解布局文件

布局文件允许您共享创建的布局，以便它们可以作为模板由您和其他人使用。布局文件将包括您在布局中看到的所有元素，包括地图、图例、边框、指向北方的箭头、比例尺、标题、徽标、免责声明等。

如果布局中包含的地图引用的数据不可访问或位于不同的位置，您将需要重新发送您的数据源。布局文件，如图层和地图文件，不存储任何 GIS 数据。

创建和导入布局文件的过程与地图文件使用的流程非常相似。同样，它从功能区中的“共享”选项卡开始，然后是“另存为”组中的“布局文件”按钮。

### 布局文件挑战

尝试将 `Ex12` 项目中包含的布局导出为图层文件。然后打开一个新的空白项目或您之前工作过的其中一个项目，并将布局文件导入到项目中。

这里有一个提示：尝试在功能区“插入”选项卡上的“新建布局”工具。注意当您导入布局文件时发生了什么。

通过本节，您已经了解了您可以通过各种方式与拥有 GIS 软件（如 ArcGIS Pro）的网络上其他人共享您的 GIS 内容。这包括创建图层文件、地图文件、打开现有项目等。这使得组织中的其他人可以打开和使用您创建的内容。

我们现在将讨论用户没有 ArcGIS Pro 用于在网络上共享数据的情况。

## 如果用户没有 ArcGIS Pro，则共享数据

如果您想与那些没有 ArcGIS Pro 的用户共享您的 GIS 内容，您的选择将受到很大限制。根据您潜在用户的软件和能力，您可以将内容导出为其他 GIS 格式、非 GIS 格式，或者尝试将内容发布到 **ArcGIS Online**、**ArcGIS Portal** 或 **ArcGIS Server** 作为网络地图或图层。

### 导出为其他 GIS 格式

ArcGIS Pro 允许您将数据导出为多种不同的 GIS 格式，如 **shapefile**、**Keyhole 标记语言**（**KML**/**KMZ**）或 CAD 文件（`.dwg`、`.dxf` 或 `.dgn`）。其中一些允许您将多个图层导出到单个文件中，而其他一些只支持单个图层。

Shapefile 是一种非常常见的 GIS 数据格式，起源于 Esri。Shapefile（`.shp`）只存储单个图层或要素类。因此，如果您想使用此格式，您可能需要将多个图层导出到各自的 shapefile 中。

大多数具有 GIS 功能的应用程序，如 **QGIS**、**Grass**、**MapWindow** 和 **Map3D**，都能够读取和显示 shapefile。其中一些甚至具有编辑的能力。此外，大多数 **全球定位系统**（**GPS**）和 **全球导航卫星系统**（**GNSS**）软件应用程序和收集器也能够导入和导出 shapefile。因此，shapefile 已经成为许多人的事实上的数据共享格式。

KML 格式也很流行。这是由 **Google Earth** 使用的格式，它是一个免费的应用程序。将数据导出为 KML 格式将允许您在以下屏幕截图中看到的数据与您在谷歌地图上看到的数据相关联：

![图片](img/be45f1ed-533c-418b-af89-6c74463951f2.png)

您将在转换工具箱和它们的各个工具集中找到导出到这些其他 GIS 格式的工具。每种格式都有自己的工具集，如下面的屏幕截图所示：

![图片](img/6c5be778-5b36-4a11-bce9-eab9d6bf343e.png)

如前一个屏幕截图所示，ArcGIS Pro 能够转换多种数据格式。在接下来的练习中，您将学习如何将 Trippville 城市的地理数据库中的数据导出为 shapefile，以便在其他 GIS 软件应用程序中使用。

## 练习 13B – 将数据导出为 shapefile

规划总监正在与一位使用 **QGIS** 的顾问合作。他们需要能够打开并编辑城市分区数据，以查看可能的未来发展的不同选项。

形状文件可以很容易地在QGIS中使用，当然比城市用来存储其GIS数据的地理数据库文件更容易。因此，你将导出现有的分区数据到形状文件。

### 第1步 – 打开项目并验证数据

当然，在你可以导出数据之前，你需要打开项目。在此步骤中，你将打开包含你需要导出数据的适当项目：

1.  如果之前已关闭，请打开ArcGIS Pro和`Ex13`项目。

1.  在视图区域顶部选择官方分区地图标签，使其成为活动地图。

1.  从功能区选择分析选项卡，然后点击工具组中的工具按钮以打开地理处理面板。

1.  在地理处理面板中，点击面板顶部的工具箱选项卡，位于查找工具搜索框下方。

1.  通过点击左侧的小箭头展开转换工具工具箱。然后点击到形状文件工具集。

1.  之后，选择特征类到形状文件工具。

1.  要设置输入要素，点击单元格左侧的小下拉箭头，然后选择分区层。

注意，当你将分区层作为输入添加时，工具中会出现另一个输入单元格。特征类到形状文件工具允许你一次将多个图层或特征类转换为单个形状。每个输入将变成一个具有与输入层或特征类相同名称的唯一形状文件。

1.  将输出文件夹设置为`C:\Student\IntroArcPro\Chapter13\`。

你的特征类到形状文件工具应该看起来像以下截图：

![图片](img/e752dd69-7852-4c9c-923f-34b854a2380e.png)

1.  一旦你已验证特征类到形状文件工具已正确配置，点击位于地理处理面板底部的运行按钮。

此工具将生成一个新的形状文件。这个新的形状文件将包含与原始分区层相同的数据，该层基于地理数据库特征类。如前所述，形状文件通常用于在软件包之间共享数据，因为几乎任何GIS应用都可以读取和编辑它们。

现在你将通过将其作为图层添加到新地图中，验证工具是否成功创建了新的形状文件。

### 第2步 – 创建新地图并将形状文件作为图层添加

在此步骤中，你将添加你刚刚创建的新形状文件到地图中，以验证其是否成功创建：

1.  在功能区中，点击插入选项卡以激活它。

1.  接下来，点击插入选项卡上的项目组中的新建地图按钮。这将向你的项目中添加一个新的空白地图。

1.  在目录面板中，展开`Folders`文件夹，然后双击`Chapter13`文件夹以查看其内容。

1.  你应该在`Chapter13`文件夹中看到你创建的`Zoning.shp`文件。右键单击它，然后选择添加到当前地图。

你的地图现在应该看起来类似于以下截图。请记住，你的颜色可能不同，因为ArcGIS Pro为新添加的图层分配随机颜色。你的地图也可能包含底图，这取决于你组织的设置：

![](img/4ed34a99-3aa8-4556-a0b5-1af283d2ad6d.png)

你可能想知道为什么你刚刚添加的新shapefile图层没有与从官方分区图中导出的分区图层相同的符号。记住，无论图层是shapefile、地理数据库要素类还是其他什么，其实际来源都不存储我们可视化的方式。那些设置存储在地图、图层文件或图层包中。

1.  保存你的项目。

我们现在进入这个练习的主要步骤。

### 第3步 – 使用图层文件应用符号

在此步骤中，你将使用图层文件将你在官方分区图中看到的符号应用于你刚刚添加到新地图的基于shapefile的图层。这将帮助你验证所有重要的属性信息都已包含在导出的shapefile中：

1.  在内容窗格中选择分区图层，以便在功能区中显示特征图层组选项卡。

1.  接下来，点击功能区中的外观选项卡。

1.  在功能区的外观选项卡中的绘图组中点击“导入”按钮。这将在浮动窗口中打开“导入符号”工具。

1.  确认输入层已设置为分区。

1.  要设置符号层，点击单元格末尾的浏览按钮。它看起来像一个文件文件夹。

1.  在打开的符号层窗口中，点击位于窗口左侧面板项目下方的“文件夹”。

1.  在窗口的右侧面板中，双击`Chapter13`文件夹。

1.  选择`Trippville Official Zoning.lyrx`文件并点击“确定”。

1.  注意，一旦你点击“确定”，类型、源字段和目标字段的值将自动分配。请确认你的“从图层应用符号”工具窗口看起来如下截图所示：

![](img/01b92ede-18df-4a93-8a95-58709c38ec27.png)

你会看到源和目标字段的值已自动分配，因为源和目标字段都是相同类型的字段，并且具有相同的名称。此工具允许你使用字段末尾的下拉箭头手动分配这些值。

1.  在确认工具设置后，点击“确定”按钮以从图层文件应用新的符号。

你的地图现在应该看起来类似于以下截图：

![](img/a967c793-d804-4180-8274-25a077fa2342.png)

1.  保存你的项目并关闭ArcGIS Pro。

现在你已经知道如何将图层导出为shapefile，以便与他人共享。你还学会了如何使用图层文件将符号应用于图层。

将这些数据与另一个人分享的下一步可以是通过电子邮件发送或上传到在线资源，例如**Google Drive**或**ArcGIS Online**。我们将在本章后面学习如何上传到ArcGIS Online。当您尝试与他人共享shapefile时，请记住，shapefile实际上由多个文件组成。您需要确保发送所有这些文件，而不仅仅是您在ArcGIS Pro中看到的`.shp`文件。我们将在下一节中学习这一点。

## 将数据导出为非GIS格式

ArcGIS Pro支持将地图、布局和表格导出为其他非GIS格式。这包括几个光栅和矢量格式。这可以使没有ArcGIS Pro的人查看您所创建的内容。您可以使用ArcGIS Pro导出的许多非GIS格式也可以插入到其他非GIS应用程序中，例如**Word**和**PowerPoint**。这将允许您将GIS信息纳入报告和演示文稿。

### 导出地图和布局

使用ArcGIS Pro，您可以以各种类型的矢量图形或光栅格式导出地图和布局。这包括以下内容：

+   **位图图像文件**（`.bmp`）可以导出为**光栅**格式文件。

+   **增强型元文件**（`.emf`）可以导出为**矢量图形**。

+   **封装后置格式**（`.eps`）文件可以导出为**矢量图形**。

+   **图形交换格式**（`.gif`）文件可以导出为**光栅**格式文件。

+   **联合图像专家小组**（`.jpeg`）文件可以导出为**光栅**格式文件。

+   **便携式文档格式**（`.pdf`）文件可以导出为**矢量图形**。

+   **便携式网络图形**（`.png`）文件可以导出为**光栅**格式文件。

+   **可缩放矢量图形**（`.svg`）文件可以导出为**矢量图形**。

+   一个`.svgz`文件，它是一个使用**gzip压缩**压缩的`.svg`文件，可以导出为**矢量图形**。

+   **Truevision图形适配器**（`.tga`）文件可以导出为**光栅**格式文件。

+   **标记图像文件格式**（`.tiff`）文件可以导出为**光栅**格式文件。

许多这些格式可以轻松地在其他应用程序中打开，例如网络浏览器（如**Chrome**、**Internet Explorer**或**Firefox**）、免费应用程序（如**Adobe Acrobat Reader**和**Microsoft Paint**）或其他GIS应用程序。

大多数光栅格式也可以嵌入或插入到文档、电子表格和演示文稿中。这使得它们可以包含在报告、研究、信件、展览等更多内容中。

**便携式文档格式**（**PDF**）格式实际上支持创建交互式文件的一些能力。当您导出为`.pdf`时，如果您希望的话，可以选择包含图层和/或属性，如下面的截图所示：

![图片](img/98c058fa-db7f-4af8-bd2e-03ea1ae641ff.png)

如您从前面的屏幕截图中所见，此选项位于PDF设置下。PDF还允许您加密文件，使其需要密码才能打开。

接下来，我们将学习如何将GIS中的表格导出到其他格式。

## 导出表格

如果您只需要导出图层属性表中的属性，您也可以将信息导出到各种格式。这可以通过两种方式完成：

1.  第一种方法是从表格窗格开始的。点击右上角选项按钮（三个水平线），然后选择导出表格选项，如以下截图所示：

![](img/9fe85074-c0d9-48c7-aa33-777308e7d61d.png)

1.  第二种方法是直接转到位于数据管理工具箱和表格工具集中的复制行地理处理工具。两种方法最终都会产生相同的结果。

上述两种方法都将允许您将整个表格或所选记录集导出到另一个表格。您可以选择以下格式和类型进行导出：

+   **地理数据库独立表格**

+   **dBase**（`.dbf`）

+   **逗号分隔的文本文件**（`.csv`）

+   **制表符分隔的文本文件**（`.txt`）

+   **信息**

**信息**是一种回溯到20世纪70年代的数据库类型。它是**dBase**等数据库的先驱。Esri购买它作为其旧产品**ArcInfo**的主要数据库。

ArcGIS Pro还允许您将表格导出到电子表格。您需要使用位于**转换工具**工具箱和**Excel**工具集中的**表格到Excel Python地理处理脚本**。这将允许您将整个表格或所选记录集导出到Excel电子表格，供他人使用。

在下一节中，我们将探讨您可以用来与不在您的计算机网络上的人共享数据的方法。

# 与不在您网络中的人共享内容

与不在您网络中的人共享内容要更具挑战性。正如您所学的，地图和布局实际上并不存储它们引用的GIS数据，而是指向原始数据源。数据源可能存储在项目文件夹结构中，也可能位于其他地方。项目、地图和布局甚至可以包含多个图层，所有这些图层都引用来自完全不同来源的数据。

这就是为什么与那些无法连接到您所使用相同资源的人共享您的工作变得困难。您不能仅仅发送给他们一个地图或图层文件，因为这两个文件都不包括底层数据。您可以将项目文件夹一起压缩成一个文件，然后通过电子邮件发送或上传到**文件传输协议**（**FTP**）网站供下载，但这仅适用于您在项目中使用的所有数据都存储在项目结构中。

如果您能创建一个包含项目中所有引用数据的文件，地图或图层，那该多好。幸运的是，使用ArcGIS Pro，您可以做到这一点。它具有允许您将项目、地图或图层及其引用数据一起打包的工具，这样您就可以与不在您的网络上的那些人共享。

包也是存档数据的好方法。包创建了一个快照，记录了创建包时的数据状态。这为您提供了该点的数据备份，您可以在需要时引用。这也意味着包与您的实时数据断开连接。因此，如果您更改了该数据，您需要重新创建包，以便它包含更改。

在本节中，您将探索您可以创建的各种包，并学习如何创建它们。您将从最小的包类型，即**图层包**开始，然后逐步过渡到最大的包，即**项目包**。

## 了解图层包

**图层包**与图层文件非常相似。它也存储了图层的所有属性设置，以便当它添加到地图时，这些设置会自动应用。除了保存这些设置外，图层包还包括图层引用的数据。这意味着图层包可以与那些无法访问您数据的人共享。然后他们可以将图层包添加到地图中，并看到带有您设置和数据的状态。

由于图层包仅包含单个图层，因此它们通常比其他包小得多。这使得它们更适合通过电子邮件发送给他人。

创建图层包与创建图层文件类似。您可以在地图中选择您希望打包的图层。然后选择功能区中的“共享”选项卡。接下来，您选择“包”组中的“图层”按钮。这将启动打包向导。

我们现在进入下一节，其中包含一个创建图层包的练习。

## 练习13C – 创建图层包

社区发展总监已聘请咨询公司帮助准备城市的长期综合规划。咨询公司需要城市分区图层的完整副本，因此总监询问您是否可以创建一个文件，他可以将其发送给顾问，该文件包含所有标准的城市分区符号和数据。

在这个练习中，您将创建一个包含分区图层的图层包。然后您将测试它以确保它正常工作。

### 第1步 – 创建图层包

在此步骤中，您将创建分区图层包。您将完成打包向导，并提供创建包所需的所有数据和输入：

1.  启动ArcGIS Pro并打开您在本章其他练习中使用的`Ex13.aprx`项目。

1.  在视图区域顶部选择“官方分区地图”选项卡以激活地图。

1.  在内容窗格中选择分区层。

1.  接下来，在功能区中点击“共享”选项卡。

1.  在功能区共享选项卡中，点击位于包组中的“层”按钮。

1.  在包层面板顶部选择“将包保存到文件”选项。注意你可以自动将层包上传到ArcGIS Online以与组织内外的人共享。

1.  点击单元格末尾的“浏览”按钮以提供层包文件的名称和位置。

1.  使用左侧的树形结构，导航到`C:\Student\IntroArcPro\My Projects`，将包命名为`Trippville_Zoning`，然后点击“保存”。

1.  在摘要和标签字段中输入以下内容：

    +   将“显示Trippville市地块的分区分类”输入到摘要字段中。

    +   将“分区”、`Trippville`和“地块”标签添加到标签字段中。

现在包层面板应该看起来像这样：

![图片](img/b65dbe66-fc2e-4c81-a207-bdb339fadc85.png)

1.  点击“分析”按钮以查看在创建包的过程中是否会出现任何问题。

层的分析要么不会显示错误，要么可能只显示一个错误。如果你得到一个错误，那是因为层描述缺失。由于这是一个错误，而不仅仅是消息，所以在你继续创建包之前必须修复它。

如果你得到错误，请按照以下步骤操作。如果你没有得到任何错误，请跳到*步骤15*。

1.  右键单击错误，从显示的上下文菜单中选择“更改层描述”。这将打开分区层的层属性窗口。

1.  将“Trippville市分区层”输入到层属性窗口中。你也可以自由更新其他缺失的值。

1.  当你完成更新层属性后，点击“确定”。错误现在应该用绿色勾号代替红色和白色的错误图标。

1.  再次点击“分析”按钮以确保没有会导致包创建失败的问题。

1.  如果没有返回错误，请点击“包”按钮。

1.  当包成功创建后，关闭“包层”面板。

接下来，你需要验证包是否确实已成功创建。

### 步骤2 – 测试包

在此步骤中，你将在项目中创建一个新的地图，并将你创建的层包添加到其中：

1.  在目录窗格中，右键单击“地图”文件夹，从显示的上下文菜单中选择“新建地图”。一个新的地图应该出现在你的项目中。

1.  点击功能区中的“地图”选项卡。

1.  在图层组中点击“添加数据”按钮。

1.  在“添加数据”窗口中，导航到`C:\Student\IntroArcPro\My Projects`文件夹。一旦到达那里，你应该能看到你刚刚创建的`Trippville_Zoning.lpkx`文件。

1.  点击`Trippville Zoning.lpkx`文件，然后点击“确定”按钮以将层添加到你的地图中。

现在分区层应该在你的新地图上可见。你现在将验证分区层的来源。

1.  点击内容窗格顶部的“按数据源列表”按钮。

1.  如有必要，调整内容窗格的大小，以便您可以看到分区图层数据源的完整路径。

问题：*分区图层数据源的路径是什么？这与您用于创建图层包的分区图层使用的数据源不同吗？*

1.  保存您的项目并关闭 ArcGIS Pro。

恭喜！您刚刚创建并测试了您的第一个包。现在，您拥有了与他人共享图层数据和设置的技能和知识。接下来，您将研究地图包。

## 理解地图包

正如图层包将图层的数据及其属性设置捆绑在一起一样，**地图包**将地图中包含的所有与图层相关联的数据以及这些图层的属性设置捆绑在一起。因此，地图包将您在地图中看到的所有内容捆绑成一个具有 `.mapx` 扩展名的单个文件。

地图包提供了一种简单的方法，可以将整个地图与他人共享，即使他们无法连接到您的数据源。但有一点需要考虑的是大小。因为地图包将包含所有图层及其引用的数据在一个单独的文件中，所以它们可能会变得非常大。

*我亲自为一位客户创建了一个超过 20 GB 大小的地图包。* 它之所以如此之大，是因为客户在要素数据库中存储了图片。此外，地图还包括了当地航空摄影。因此，当创建地图包时，它包括了图层、图层属性、要素的附加图片以及用于地图的航空照片。

当然，这并不常见，实际上在创建地图包时代表了大小的一个最坏情况。然而，它确实说明了地图包可以有多大。在创建地图包时，最好首先从地图中删除任何不需要的图层，以将地图包的大小保持在最小。关闭图层的可见性是不够的。不可见的图层仍然会被包含在地图包中，因此它们必须从地图中物理移除。

创建地图包的过程与创建图层包的过程基本相同。您激活您希望打包的两个或三维地图，然后转到“共享”选项卡。然后，您点击“地图包”工具并按照向导操作。

### 地图包挑战

现在，您已经拥有了创建图层包的技能，以及创建包含在 `Ex13.aprx` 项目中的官方分区地图的地图包所需的信息。现在，将新的地图包保存到与您保存 *练习 13C – 创建图层包* 中创建的图层包相同的地点。然后，比较图层包的大小与您创建的地图包的大小。

## 了解项目包

**项目包**通常是您可以创建的最大类型的包。项目包将项目中的所有内容捆绑成一个单独的文件。这包括地图、图层、数据、工具箱、任务、附件、地理处理历史记录和连接。项目包将具有`.ppkx`文件扩展名。

由于项目包实际上包括了项目中的所有内容，因此它们通常很大，肯定比地图包或图层包大得多。这意味着它们通常不适合通过电子邮件共享。然而，可以将它们发布到FTP站点供下载，保存到外部设备，甚至发布到ArcGIS Online。如果您将它们发布到ArcGIS Online，您将因存储包而付费。您被收取的信用额度将取决于包的大小。这也适用于您可能也发布到ArcGIS Online的图层包和地图包。

项目包是完成项目或达到特定里程碑后存档项目的绝佳方式。它们是创建给定包时项目的快照。由于所有内容都存储在一个单独的文件中，因此它们的管理和维护备份要容易得多。

再次强调，项目包的创建方法与地图包或图层包相同。在成功创建包之前，您需要提供某些信息，包括摘要、描述和标签。

创建后，包可以成功导入到ArcGIS Pro中，作为一个完整的项目，包括创建包时包含的地图、图层、布局、连接等。然而，与地图包和图层包类似，新导入的项目包将指向原始数据源的**副本**，而不是原始数据源本身。

### 项目包挑战

利用您到目前为止所获得的知识和技能，尝试为您在阅读本书时使用的项目之一创建一个项目包。创建完成后，比较项目包的大小与您创建的地图包和图层包的大小。

您现在已经学会了多种方式，可以通过这些方式与您网络内外的个人以及有或没有GIS软件的人共享您的GIS内容。与他人共享数据的能力通过使GIS对更广泛的受众可用来增加GIS的价值。接下来，您将学习如何使用ArcGIS Online将您的GIS共享提升到新的水平。

# 发布到ArcGIS Online

ArcGIS Pro的一个主要优势是它与ArcGIS Online和Portal for ArcGIS的集成。这使您能够轻松地将数据和分析结果发布到网络上，其他人即使没有安装GIS软件也可以访问。

ArcGIS Online是Esri基于云的**软件即服务**（**SaaS**）解决方案。这允许您和您的组织内外的人通过互联网访问数据、地图和应用程序。这使得与他人共享GIS变得更加容易，因为他们可以通过正常的网络浏览器访问您与他们共享的内容。

在本节中，您将学习如何将您在ArcGIS Pro中创建的地图发布到ArcGIS Online，以便其他人可以通过网络浏览器访问。

## 练习13D – 将地图发布到ArcGIS Online

规划总监希望使Trippville市的分区地图可供他人访问，即使他们没有ArcGIS Pro软件。她希望访问地图的人能够切换图层、查询数据、查看属性表，甚至打印地图。由于总监期望的功能水平和用户即使没有GIS软件也需要访问地图，因此您需要将其作为网络地图发布到ArcGIS Online。

在这个练习中，您将优化官方分区地图，以确保它通过互联网查看时表现良好。然后，您将发布地图到ArcGIS Online。最后，您将共享地图，以便其他人可以访问它。

### 第1步 – 优化您的地图

在此步骤中，您将优化官方分区地图，以确保它通过互联网在浏览器中查看时表现良好：

1.  启动ArcGIS Pro并打开您在本章中一直在工作的`EX13.aprx`项目。

1.  在视图区域中单击“官方分区地图”标签，使其成为当前使用的活动地图。

1.  右键单击分区图层。然后从出现的菜单中选择“缩放到图层”。

1.  接下来，从内容窗格的顶部选择“官方分区地图”。然后右键单击并选择“属性”，如下面的截图所示：

![图片](img/7abc3de1-ec83-45e2-a24b-3371347c8a6a.png)

1.  在属性窗口中，单击位于地图属性窗口左侧面板中的“范围”选项。

1.  在窗口右侧面板的顶部单击“使用自定义范围”。

1.  在“获取范围从”下方，选择“当前可见范围”。这将设置当有人按下ArcGIS Pro中的“缩放到全范围”按钮或网络应用程序中的“主页”按钮时，地图将缩放多远。

1.  接下来，在属性窗口的左侧面板中单击“元数据”选项。然后输入以下值：

    +   在“标题”字段中输入`Trippville市公共分区地图`。

    +   在“标签”字段中，添加`分区`、`规划`、`代码`和`地图`。

    +   在“摘要”字段中，应显示Trippville市内地块的分区分类。

    +   在“描述”字段中输入`此地图由Trippville市GIS和规划部门创建。它显示了城市分区条例定义的每个地块的分区分类`。

    +   对于“致谢”字段，请输入`Trippville市GIS和规划部门`。

    +   在“使用限制”字段中，键入`This map is for general reference only. It is not to be considered the full legal map of record. It is recommended that any data contained herein be verified by calling the City Planning Department`。

1.  确认你的地图属性窗口看起来如下，并在完成后点击“确定”按钮：

![图片](img/55b2038b-60b7-4cd1-a5ef-c3a2f3e29a65.png)

你刚刚完成了在发布到ArcGIS Online之前优化地图的第一步。你设置了范围，这样当用户在ArcGIS Pro中缩放到完整范围或使用大多数网络应用中找到的“主页”按钮时，他们不会缩放到整个地球。

相反，他们将会缩放到能够看到整个分区图层的比例。然后，你配置了地图的元数据。这被搜索引擎和工具用来定位项目。通常在ArcGIS Pro允许你发布到ArcGIS Online或门户之前，需要完全配置地图的元数据。

接下来，你将优化你的图层。你将首先为你的图层应用缩放范围。这将根据地图的缩放比例控制它们何时可见。

1.  右键单击Base_Anno图层，并从出现的上下文菜单中选择“属性”。

1.  在窗口的左侧面板中选择“常规”选项。在“超出”处，使用下拉箭头选择1:10,000。这将使得这个图层在用户缩放到你选择的缩放比例或更近时才变得可见。点击“确定”应用设置并关闭属性窗口。

即使在桌面环境中，注释和标签的表现也不佳，更不用说通过浏览器查看地图时了，因此尽可能限制这些的使用被认为是一种最佳实践。使用缩放范围是一个良好的开始。

1.  在内容面板中选择分区图层，然后在功能区中点击“标签”选项卡。

1.  使用下拉箭头将“超出”值设置为1:10,000。这将限制分区图层的标签显示，直到有人缩放到该比例或更近时才显示。

1.  在功能区中选择“外观”选项卡，同时确保分区图层仍然被选中。

1.  在“可见范围”组中，使用下拉箭头将“超出”值设置为1:50,000。

1.  对剩余的图层做同样的事情，然后保存你的项目。

为了优化地图以便在网络上发布，你可以限制在任何给定时间内可以绘制的数据量。你刚刚设置的缩放范围是一个非常有效的方法。你还可以使用定义查询和选择层等工具。

### 第2步 - 将地图发布到ArcGIS Online

现在你已经采取了步骤优化你的地图，以便在发布到ArcGIS Online时表现更好，现在是时候实际发布它了。

此步骤将要求你拥有一个具有发布你组织 ArcGIS Online 门户权限的 ArcGIS Online 用户账户。如果将此地图长时间存储在 ArcGIS Online 中，它将使用你组织的一些 ArcGIS Online 信用额度：

1.  在功能区中点击“共享”标签。

1.  在“共享”标签页上的“共享为”组中点击“Web 地图”按钮。这将打开“共享为 Web 地图”窗口。

1.  注意，名称、摘要和标签字段已经填写好了。这些来自你为地图创建的元数据。

1.  将“选择配置”字段设置为“复制所有数据：探索性”。你使用这个设置是因为规划总监特别提到用户需要能够对地图进行查询。其他选项没有优化以允许这样做，或者允许过多的功能，如编辑数据，而这对于这张地图是不希望的。

1.  如果你想在你的 ArcGIS Online 账户中创建一个文件夹并将此地图也上传，你可以使用已选文件夹的下拉箭头选择它。否则，它将默认为你的 ArcGIS Online 用户账户的根目录。

1.  将“共享给”选项设置为“所有人”，如图所示，因为规划总监希望包括公众在内的每个人都能够访问并查看这张地图：

![图片](img/5aef6a8f-eb48-44b8-8ed7-81584a2fcd26.png)

1.  接下来，再次点击“分析”按钮以验证你的地图是否已准备好发布。

当你的地图分析完成时，它应该会返回几个错误和几个警告。在你可以将地图发布到 ArcGIS Online 之前，必须修复这些错误。警告应该被检查，但不需要修复就可以发布。你现在将修复错误。

1.  在官方分区图下，你应该看到一个错误，显示“00230 服务层”的投影与地图投影不同。这意味着底图和其他图层使用的是不同的坐标系。右键单击此错误，并选择“更新地图以使用底图的坐标系”。

如果你的地图没有分配底图，你可能会看到不同的错误。如果是这种情况，请转到“地图”标签页，点击“底图”按钮，并从显示的选项中选择“地形底图”。

1.  再次点击“分析”按钮。其他错误现在也应该消失了。调整坐标系修复了这两个错误。

1.  现在花点时间阅读剩余的警告。在这个练习中，你将不会尝试修复这些问题，因为它们不会对地图的质量或功能产生重大影响。然而，如果这是一张你组织的地图，那么在发布之前你可能想要修复这些问题。

1.  现在你已经修复了错误并审查了警告，是时候将这张地图发布到 ArcGIS Online 了。记住，一旦你将其发布到 ArcGIS Online，它将托管在你组织的账户中，并且只要它在那里，每个月都会使用一些信用额度。

使用的积分数量应该非常少，但在您继续之前需要记住这一点。如果您准备好发布，请点击“分享为网络地图”窗口底部的“分享”按钮。

点击“分享”后，ArcGIS Pro 将开始打包地图并将其上传到 ArcGIS Online。这可能会根据您计算机的功能和互联网连接的速度而花费一些时间。

我们现在进入下一步。

### 第3步 – 在 ArcGIS Online 中查看新地图

在这一步，您将使用 ArcGIS Online 的 **Web Map Viewer** 查看您刚刚发布的地图：

1.  在“分享为网络地图”窗口的底部，您应该看到一个指示器显示发布地图的过程是成功的。下面，您应该看到一个链接，上面写着“管理网络地图” – 点击该链接。

1.  您的默认网络浏览器应该会打开，显示您刚刚发布的网络地图的属性。点击页面右上角的“在地图视图中打开”按钮。这将打开 ArcGIS Online 的网络地图查看器应用程序。

1.  如果在工具成功完成后，由于某种原因“分享为网络地图”窗口或 ArcGIS Pro 被关闭，您仍然可以找到您的地图。只需按照以下步骤操作：

    1.  打开您喜欢的网络浏览器，例如 **Chrome**、**Internet Explorer**、**Edge**、**Firefox** 或任何其他浏览器。

    1.  前往 [www.arcgis.com](http://www.arcgis.com)。

    1.  点击页面中间或右上角的“登录”按钮。

    1.  输入您的 ArcGIS Online 登录信息。

    1.  点击页面顶部最上面的“内容”标签，然后确保已选择“我的内容”。

    1.  从您创建的内容列表中找到“官方分区地图”。如果是第一次，它将是唯一的条目。

    1.  最后，点击“在地图查看器中打开”按钮。

1.  您现在应该能看到您从 ArcGIS Pro 发布的分区地图。现在其他人也可以看到它了。花点时间回顾一下您刚刚创建的新网络地图。

1.  点击地图顶部的“分享”按钮。这将打开分享窗口。在这里，您将看到一个可以发送给其他人的链接，他们也可以通过电子邮件或社交媒体访问地图。

1.  在您完成地图探索后，点击“完成”并关闭浏览器。

1.  返回 ArcGIS Pro 并保存您的项目，然后关闭应用程序。

恭喜！您刚刚使用 ArcGIS Pro 和 ArcGIS Online 之间的集成，将地图从桌面发布到网络。现在任何有互联网访问的人都能访问您的地图。这将使他们能够看到 Trippville 市内地块的分区值。您可以使用此相同的过程与组织中的其他人共享您创建的数据和地图，扩大您 GIS 的覆盖范围。

# 摘要

在本章中，你学习了多种可以用来与他人分享你的 GIS 内容的方法。你看到了如何使用项目、地图和图层文件来分享和标准化那些与你有相同数据源访问权限的计算机网络上的人的内容。

你还学会了如何导出你的内容，以便其他人即使没有 ArcGIS Pro 也能访问和使用你的数据。本章为你提供了将你的 GIS 数据导出为非 GIS 格式的技能，这样那些没有 GIS 软件的人也能在文档、报告、演示文稿和电子表格中使用你的 GIS 信息。

最后，你还学会了如何通过使用包与他人分享网络之外的数据。包不仅限于数据共享，还可以用来在特定存在状态下存档或备份重要数据，以便在需要时可以恢复。

在下一章中，你将了解 **Arcade**，Esri 的新表达式语言。你可以使用 Arcade 创建复杂的标签，并控制符号，使其在 ArcGIS 平台上具有兼容性。

# 进一步阅读

如果你想要了解更多关于分享你的 GIS 内容的信息，你可能想要考虑以下内容：

+   *ArcGIS Pro 2.x 烹饪书*，作者 Tripp Corbin，由 Packt 出版（*第 12 章* 和 *第 13 章*）
