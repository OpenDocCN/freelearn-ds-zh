- en: Chapter 7. Answering Questions with Suitability Analysis
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第7章。使用适宜性分析回答问题
- en: 'We live in a world full of various relationships that can be analyzed in functional,
    temporal, or spatial contexts. Spatial relationships are of particular interest
    when it comes to GIS, because here objects in space are represented in a way that
    facilitates explanations and analyses of their geographic relations. Suitability
    analysis is a fundamental part of GIS analysis that answers the question, "Where
    is the best place for something to be located?" In this chapter, you will be exposed
    to the fundamentals of suitability analysis through the search for the best place
    to live in. You will learn how to:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我们生活在一个充满各种关系的世界上，这些关系可以在功能、时间或空间背景下进行分析。在GIS中，空间关系尤其引人关注，因为在这里，空间中的对象以便于解释和分析其地理关系的方式表示。适宜性分析是GIS分析的基本部分，它回答了“某物最佳位置在哪里？”的问题。在本章中，你将通过寻找最佳居住地来了解适宜性分析的基本原理。你将学习如何：
- en: interpret spatial relationships between objects
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解释对象之间的空间关系
- en: express these relationships through spatial data
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过空间数据表达这些关系
- en: analyze spatial data according to a set of predefined criteria
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据一组预定义的标准分析空间数据
- en: overlap layers and interpret the results
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 叠加图层并解释结果
- en: Before starting with this chapter, some essentials of suitability analysis and
    types of spatial relationships between objects will be explained.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始本章之前，将解释适宜性分析的一些基本原理和对象之间空间关系的类型。
- en: Basics of suitability analysis
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 适宜性分析基础
- en: 'Suitability analysis is recognized as a multi-criteria decision support approach.
    In other words, its main aim is to divide the area of interest into two categories
    based on a set of predefined criteria: appropriate for some kind of use (living,
    building, conservation, and so on) and inappropriate. A general approach that
    is used for suitability assessment is multiple layer overlays that support multi-criteria
    decisions. Depending on the data that represents suitability criteria and overlaid,
    there are two basic approaches available:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 适宜性分析被认可为一种多标准决策支持方法。换句话说，其主要目的是根据一组预定义的标准将感兴趣的区域分为两类：适用于某种用途（居住、建筑、保护等）和不适用。用于适宜性评估的一般方法是多层叠加，支持多标准决策。根据表示适宜性标准和叠加的数据，有两种基本方法可用：
- en: Suitability analysis with vector data. This primarily utilizes operations such
    as buffering and their sequential combination using vector overlay operations,
    such as clipping, intersection, and union.
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用向量数据的适宜性分析。这主要利用缓冲区等操作，并通过向量叠加操作（如裁剪、交集和并集）的顺序组合。
- en: Suitability analysis with raster data. This heavily relies on raster algebra,
    which is used to reclassify initial raster coverages and then combine them to
    produce binary or ranked suitability rasters. This approach is more flexible,
    as it makes it possible to produce multiple suitability classes and change the
    raster weight according to the importance of the factor it represents. As a result,
    the user is able to produce a compound result, but the workflow requires more
    effort connected to data preprocessing and consolidation decisions.
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用栅格数据的适宜性分析。这主要依赖于栅格代数，它用于重新分类初始栅格覆盖，然后将其组合以产生二进制或排序适宜性栅格。这种方法更灵活，因为它使得产生多个适宜性类别并根据其代表因素的重要性改变栅格权重成为可能。因此，用户能够产生复合结果，但工作流程需要更多与数据预处理和整合决策相关的努力。
- en: 'The following table summarizes the main geoprocessing stages, advantages, and
    pitfalls of suitability assessment with vector and raster data:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 以下表格总结了使用向量和栅格数据的适宜性评估的主要地理处理阶段、优点和缺点：
- en: '|   | Vector data | Raster data |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '|   | 向量数据 | 栅格数据 |'
- en: '| --- | --- | --- |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| **Main geoprocessing and analysis operations** |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| **主要地理处理和分析操作** |'
- en: Buffering
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缓冲区
- en: Clip overlay
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 裁剪叠加
- en: Intersection overlay
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交集叠加
- en: Union overlay
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 并集叠加
- en: '|'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Vector data rasterization
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向量数据栅格化
- en: Proximity raster creation
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 临近栅格创建
- en: Raster reclassification
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 栅格重分类
- en: Raster algebra addition
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 栅格代数加法
- en: Raster algebra multiplication
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 栅格代数乘法
- en: Raster algebra subtraction
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 栅格代数减法
- en: '|'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Advantages** |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| **优点** |'
- en: Workflow quickness
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 工作流程的快速性
- en: Workflow simplicity
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 工作流程的简单性
- en: Good representation of man-made features
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人工特征的优良表示
- en: '|'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Simple data reclassification
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 简单数据重分类
- en: Good representation of continuous features
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连续特征的优良表示
- en: Crisp and fuzzy classes are possible
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可能存在清晰和模糊的类别
- en: Possibility to weigh different coverages according to their importance
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据其重要性对不同的覆盖范围进行加权
- en: Various assessments are possible, such as binary, ranked, and weighted
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可能进行各种评估，如二元、排序和加权
- en: '|'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Limitations** |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| **局限性** |'
- en: Provide only crisp classes
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 只提供清晰的类别
- en: Usually provides binary (yes/no) assessments only
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通常只提供二元（是/否）评估
- en: '|'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Reclassification and ranking subjectivity
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重新分类和排序的主观性
- en: Workflow complexity
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 工作流程复杂性
- en: '|'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: 'No matter what approach you will follow, the general suitability analysis workflow
    involves several common steps. We will now take a closer look at them to ensure
    better understanding of the suitability analysis system:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你将遵循哪种方法，一般适宜性分析的工作流程涉及几个共同步骤。我们现在将更深入地探讨它们，以确保更好地理解适宜性分析系统：
- en: '**Define the goal and objectives of your analysis**: The question to be studied
    is formulated in general, and its applied significance is determined, which will
    later become the set of suitability criteria. Some popular suitability applications
    include the following:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**定义分析的目标和目标**：要研究的问题被一般性地表述，并确定其应用意义，这将成为后续的适宜性标准集合。一些流行的适宜性应用包括以下内容：'
- en: '**Agriculture**: The appropriateness of the area for cultivation of certain
    crops is assessed.'
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**农业**：评估特定作物种植区域的适宜性。'
- en: '**Retail**: The area is assessed from a marketing prospective—whether it will
    attract new customers or buyers, or not. This type of analysis is in great demand
    when selecting preferable shopping locations.'
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**零售**：从市场营销的角度评估区域——它是否会吸引新客户或买家。在选择理想的购物地点时，这种分析需求很大。'
- en: '**Renewable energy**: Assessing land suitability for locations of wind power
    or solar power stations is a remarkable trend in the field of geospatial planning
    for sustainability.'
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可再生能源**：评估风力发电站或太阳能电站的用地适宜性是地理空间规划领域可持续性方面的一个显著趋势。'
- en: '**Nature conservation**: Conservancy needs are prioritized using habitat suitability
    modeling, and the area is divided into locations that are more or less valuable
    for certain species'' survival and reproduction.'
  id: totrans-50
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自然保护**：通过栖息地适宜性建模优先考虑保护需求，并将区域划分为对某些物种生存和繁殖或多或少有价值的地点。'
- en: Generally speaking, the primary application of suitability analysis is in the
    field of land use planning, aimed at reasonable prioritization of various types
    of human activities within limited space and natural resources.
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 通常来说，适宜性分析的主要应用领域是土地利用规划，旨在对有限空间和自然资源内各种人类活动进行合理优先排序。
- en: '**Analyze the available data and define its relevance to the goals and objectives**:
    Data''s relevance to the goal and objectives is defined. Current data availability
    and future data requirements are analyzed, especially the knowledge of whether
    the current data derivatives can be used for analysis or not. For example, if
    we have to analyze suitability for agricultural needs, a DEM can be a great source.
    It provides not only basic information about the relief, but also some useful
    derivatives, such as slope and aspect. The main outcome of this stage is a list
    of primary data sources and their potential derivatives.'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**分析可用数据并定义其与目标和目标的相关性**：定义数据与目标和目标的相关性。分析当前数据可用性和未来数据需求，特别是了解当前数据衍生品是否可用于分析。例如，如果我们必须分析农业需求的适宜性，DEM（数字高程模型）可以是一个很好的来源。它不仅提供了关于地形的基本信息，还提供了一些有用的衍生信息，如坡度和方位。这一阶段的主要成果是列出主要数据来源及其潜在衍生品。'
- en: '**Define the criteria of analysis**: This is the most important stage, where
    the objectives of analysis are described as clear numerical criteria based on
    relevant data. Descriptive objectives are translated into the language of GIS
    analysis. At this stage, various types of spatial relationships between objects
    are analyzed, and some of the most popular relationships include the following:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**定义分析的标准**：这是最重要的阶段，分析的目标被描述为基于相关数据的清晰数值标准。描述性目标被翻译成GIS分析的语言。在这个阶段，分析对象之间各种类型的空间关系被分析，其中一些最流行的关系包括以下内容：'
- en: '**point-to-point relationships**:'
  id: totrans-54
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**点对点关系**:'
- en: '"is within": All schools that are within a distance of 1 km from a living place'
  id: totrans-55
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '"在...范围内"：所有距离居住地1公里范围内的学校'
- en: '"is nearest to": The primary school that is closest to a living place'
  id: totrans-56
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '"最接近于"：离居住地最近的小学'
- en: '![Basics of suitability analysis](img/image00470.jpeg)'
  id: totrans-57
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![适宜性分析基础](img/image00470.jpeg)'
- en: Example of the "is within" point-to-point relationship
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “是...点关系”示例
- en: '**point-to-line relationships**:'
  id: totrans-59
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**点到线关系**：'
- en: '"is nearest to": The street that is closest to a subway station entrance'
  id: totrans-60
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “最近”：距离地铁站入口最近的街道
- en: '![Basics of suitability analysis](img/image00471.jpeg)'
  id: totrans-61
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![适宜性分析基础](img/image00471.jpeg)'
- en: Example of the "nearest to" point-to-line relationship
  id: totrans-62
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “最近点”点到线关系示例
- en: '**point-to-polygon relationships**:'
  id: totrans-63
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**点到多边形关系**：'
- en: '"is contained in": All public schools within a certain community boundary'
  id: totrans-64
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “包含于”：所有位于一定社区边界内的公立学校
- en: '![Basics of suitability analysis](img/image00472.jpeg)'
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![适宜性分析基础](img/image00472.jpeg)'
- en: Example of the "is contained in" point-to-polygon relationship
  id: totrans-66
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “包含于”点到多边形关系示例
- en: '**line-to-line relationships**:'
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**线到线关系**：'
- en: '"crosses": Whether a particular trail crosses a road'
  id: totrans-68
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “穿越”：特定小径是否穿越道路
- en: '"is within": Find all trails that are within a distance of 1 km from a particular
    river'
  id: totrans-69
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “在...内”：查找距离特定河流1公里范围内的所有小径
- en: '"is connected to": Find all streets connected to a particular highway'
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “连接到”：查找连接到特定高速公路的所有街道
- en: '**line-to-polygon relationships**:'
  id: totrans-71
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**线到多边形关系**：'
- en: '"intersects": Find all districts crossed by a cycleway'
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “相交”：查找被自行车道穿越的所有区域
- en: '"contains": Find all streets that are completely within a certain district'
  id: totrans-73
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “包含”：查找完全位于某个区域内的所有街道
- en: '![Basics of suitability analysis](img/image00473.jpeg)'
  id: totrans-74
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_IMG
  zh: '![适宜性分析基础](img/image00473.jpeg)'
- en: Example of the "intersects" line-to-polygon relationship
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “相交”线到多边形关系示例
- en: '**polygon-to-polygon** **relationships**:'
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**多边形到多边形** **关系**：'
- en: '"completely within": Find all districts that are completely within a hazard
    zone'
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “完全包含”：查找完全位于危险区域内的所有区域
- en: '"is nearest to": Find the building that is nearest to a park'
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: “最近”：查找距离公园最近的大楼
- en: '![Basics of suitability analysis](img/image00474.jpeg)'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![适宜性分析基础](img/image00474.jpeg)'
- en: Example of the "completely within" polygon-to-polygon relationship
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: “完全包含”多边形到多边形关系示例
- en: '**Primarily analyze and prepare the data**: The data is analyzed according
    to the set of criteria defined in the previous stages. Common analysis operations
    involve selection by location, buffering, rasterization, proximity (raster distance),
    and so on. After all the necessary layers are ready, they should be prepared for
    overlay, which involves reprojection into a common coordinate reference system
    (if necessary), setting ranges for various ranks, and reclassification in the
    common ranking system. All the layers should contain values in uniform units,
    otherwise their overlay will be meaningless and hard to interpret.'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**主要分析和准备数据**：数据根据先前阶段定义的准则进行分析。常见的分析操作包括按位置选择、缓冲区、栅格化、邻近度（栅格距离）等。所有必要的图层准备就绪后，应准备进行叠加，这涉及到（如果需要）重新投影到共同的坐标系，设置各种排名的范围，并在共同的排名系统中进行重新分类。所有图层应包含统一单位的值，否则它们的叠加将没有意义且难以解释。'
- en: '**Overlay the data and interpret the results**: Previously prepared layers
    are combined into a single coverage based on a set of user-defined rules. Depending
    on the data available and the rules applied, the following suitability assessments
    are possible:'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**叠加数据并解释结果**：根据用户定义的规则，先前准备好的图层基于一组规则合并成一个单一覆盖。根据可用数据和应用的规则，以下适宜性评估是可能的：'
- en: '**Binary suitability assessment**: All of the area is divided into appropriate
    and inappropriate categories. This is the simplest type of assessment that can
    be obtained from vector data overlay.'
  id: totrans-83
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**二元适宜性评估**：整个区域被划分为适宜和不适宜的类别。这是从矢量数据叠加中可以获得的最简单类型的评估。'
- en: '**Ranked suitability assessment**: Places are ranked from least appropriate
    to most appropriate based on the entire range of predefined criteria. This type
    of assessment can be derived from both vector and raster data. It lets you avoid
    simple yes/no assessments, which are not inherent to the real word. This advantage
    is counterbalanced by the subjectivity of data rankings and equal importance of
    various factors. Nevertheless, in the real world, their contribution to overall
    assessment can vary.'
  id: totrans-84
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**排序适宜性评估**：根据预定义的全部标准范围，将地点从最不适宜到最适宜进行排序。此类评估可以从矢量和栅格数据中得出。它让您避免简单的是/否评估，这些评估并非现实世界的固有属性。这种优势被数据排名的主观性和各种因素同等重要性的缺点所抵消。然而，在现实世界中，它们对整体评估的贡献可能会有所不同。'
- en: '**Weighted suitability assessment**: This is similar to the previous type of
    assessment and has only one significant difference: various factors can be weighted
    differently according to their importance for a certain type of activity. This
    type of assessments relies on the raster algebra approach and is thought to be
    all-inclusive, but not without some subjectivity, especially when it comes to
    factor weighting and interpreting the final result.'
  id: totrans-85
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**加权适宜性评估**：这与之前类型的评估类似，只有一个显著的不同点：根据某种活动的不同重要性，各种因素可以有不同的权重。这种评估依赖于栅格代数方法，被认为是全面的，但并非没有主观性，尤其是在因素权重和解释最终结果方面。'
- en: In the following sections, we will go through all of these stages individually
    and perform a weighted suitability assessment for living, combining various data
    types from the training dataset.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将逐一介绍这些阶段，并对居住进行加权适宜性评估，结合训练数据集中的各种数据类型。
- en: Step 1 – define the goal and objectives of our analysis
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1步 – 定义我们分析的目标和目标
- en: Throughout this tutorial, we will suppose that we are working on behalf of a
    young couple with a little child. They are looking for a perfect place to live
    in within a certain region of their interest. Our goal is to use the power of
    GIS-based suitability analysis methods and provide an objective and reliable answer
    to their question.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，我们将假设我们代表一对年轻夫妇及其小孩进行工作。他们正在寻找一个理想的生活地点，位于他们感兴趣的区域之内。我们的目标是利用基于GIS的适宜性分析方法，为他们的问题提供客观和可靠的答案。
- en: 'The goal of this analysis is to find areas that would be a good match for a
    young family with a child, given certain considerations. Many of their requirements
    are similar to those of a traditional housing estate development company. For
    example, proximity of subway stations, green zones, and public safety must be
    all taken into consideration. There are also some family-specific requirements
    that should be considered. As already mentioned, the family has a little baby,
    which means that we should take into account the existence of early childhood
    or elementary schools nearby. Also, they are keen on sports, and it would be great
    if the area they are going to live in has well-developed and active rest infrastructure.
    After this kind of review, we can formulate some more specific requirements and
    objectives:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 本分析的目标是找到符合有小孩年轻家庭的区域，考虑到某些因素。他们的许多要求与传统住宅开发公司的要求相似。例如，地铁站、绿化区和公共安全必须全部考虑在内。还有一些家庭特有的要求需要考虑。如前所述，这个家庭有一个小孩，这意味着我们应该考虑附近是否存在早教或小学。此外，他们热衷于运动，如果他们将要居住的区域有发达和活跃的休闲基础设施那就更好了。经过这样的审查，我们可以制定一些更具体的要求和目标：
- en: '**Safety**: The area should not be exposed to various natural and crime hazards'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全性**：该区域不应暴露于各种自然和犯罪风险'
- en: '**Connectivity**: It should be well-connected to the city''s transport network'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**连通性**：应与城市的交通网络良好连接'
- en: '**Greenness and openness**: It should be close to parks or other green areas'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**绿色和开放性**：它应该靠近公园或其他绿色区域'
- en: '**Educational potential**: Early childhood or elementary schools should be
    located in the neighborhood'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**教育潜力**：早教或小学应位于附近'
- en: '**Active rest opportunities**: These include a cycling network and athletic
    facilities'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**积极休闲机会**：包括自行车网络和体育设施'
- en: '**Cultural life**: Art galleries and museums can be recognized as general signs
    of cultural pulse beating'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文化生活**：艺术画廊和博物馆可以被视为文化脉搏跳动的一般标志'
- en: Now that the main objectives and requirements have been clarified, we can proceed
    to the next step and study all of the available data to assess its relevance to
    our example.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 现在主要目标和要求已经明确，我们可以进行下一步，研究所有可用数据，以评估其对我们例子的相关性。
- en: Step 2 – analyze the available data and define its relevance
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2步 – 分析可用数据并定义其相关性
- en: 'As soon as we have defined the basic requirements, we need to explore the data
    layers that are potentially useful and relevant for our analysis. The training
    dataset contains a large number of datasets, and the most relevant among them
    are listed in the following table:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们定义了基本要求，就需要探索对我们分析可能有用和相关的数据层。训练数据集包含大量数据集，其中最相关的是以下表格中列出的：
- en: '| Requirement | Layer | Potential relevance |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
  zh: '| 要求 | 图层 | 可能的相关性 |'
- en: '| --- | --- | --- |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| Safety | `hurricane_evacuation_zones` | Hurricane evacuation zones are the
    areas of the city that may need to be evacuated due to life- and safety-related
    threats from a hurricane storm surge. |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
  zh: '| 安全性 | `hurricane_evacuation_zones` | 飓风疏散区是可能因飓风风暴潮的生命和安全隐患而需要疏散的城市区域。|'
- en: '| `hurricane_inundation_zones` | Hurricane inundation zones are the areas of
    worst-case storm surge inundation. |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '| `hurricane_inundation_zones` | 飓风淹没区是风暴潮淹没最严重的区域。|'
- en: '| `noise_heatmap` | The raster created in the *Creating heat maps with the
    Heatmap plugin* section of [Chapter 5](part0043.xhtml#aid-190861 "Chapter 5. Answering
    Questions with Density Analysis"), *Answering Questions with Density Analysis*,
    that shows the spatial density of registered noise complaints might be useful
    for potential assessment for public safety. |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
  zh: '| `noise_heatmap` | 在[第5章](part0043.xhtml#aid-190861 "第5章。使用密度分析回答问题")的*使用Heatmap插件创建热图*部分中创建的栅格，*使用密度分析回答问题*，显示了已注册噪音投诉的空间密度，可能有助于对公共安全的潜在评估。|'
- en: '| Connectivity | `subway_entrances` | Locations of subway entrances. |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
  zh: '| 连通性 | `subway_entrances` | 地铁入口的位置。|'
- en: '| Greenness and openness | `parks` | A layer containing open space features,
    such as courts, tracks, parks, and so on. |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
  zh: '| 绿色和开放性 | `parks` | 包含开放空间特征（如法院、跑道、公园等）的层。|'
- en: '| `tree_density` | This is a raster layer created from the tree census data.
    |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
  zh: '| `tree_density` | 这是一个由树木普查数据创建的栅格层。|'
- en: '| Educational potential | `elementary_schools` | These are the point locations
    of schools based on the official addresses. This layer includes some basic information
    about the school, such as the name, address, type, and principal''s contact information.
    |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
  zh: '| 教育潜力 | `elementary_schools` | 这些是基于官方地址的学校点位置。该层包含一些关于学校的基本信息，例如名称、地址、类型和校长的联系方式。|'
- en: '| Active rest opportunities | `bike_routes` | Locations of bike lanes and routes
    throughout the city. |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| 活动休息机会 | `bike_routes` | 城市中自行车道和路线的位置。|'
- en: '| `athletic_facilities` | This layer contains athletic facilities and some
    basic information about them, including primary sport type, surface, dimensions,
    and so on. |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| `athletic_facilities` | 该层包含体育设施及其一些基本信息，包括主要运动类型、表面、尺寸等。|'
- en: '| Cultural life | `museumart` | Locations of museums and art galleries. |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| 文化生活 | `museumart` | 博物馆和艺术画廊的位置。|'
- en: These layers are primarily defined as most suitable for our analysis because
    they are directly related to the specified requirements, but most of them are
    represented as simple geometric primitives or density raster coverages that are
    difficult to be directly interpreted as suitability criteria. in the next stage,
    we will explore their main properties, including attributes, and will try to formulate
    specific and measurable criteria based on various types of spatial relationships
    between objects.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 这些层主要被定义为最适合我们的分析，因为它们与指定的要求直接相关，但其中大部分以简单的几何原语或密度栅格覆盖表示，难以直接解释为适宜性标准。在下一阶段，我们将探索它们的主要属性，包括属性，并尝试根据对象之间各种类型的空间关系制定具体和可衡量的标准。
- en: Step 3 – define the criteria of analysis
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第3步 – 定义分析标准
- en: 'According to the description of `hurricane_evacuation_zones`, there are six
    zones, ranked in the attribute field zone by risk of storm surge impact, with
    zone `1` being the region most likely to be flooded. In the event of a hurricane
    or tropical storm, residents in these zones may be ordered to evacuate. Areas
    with a zone value of `X` are not in any evacuation zone. Areas with a zone value
    of `0` are any of the following: water, small piers, or uninhabited islands. For
    the purpose of analysis, this layer should be rasterized and ranked according
    to the risk of hurricane impact, with rank values descending from areas that are
    not in any evacuation zone to those most likely to be flooded.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 根据`hurricane_evacuation_zones`的描述，有六个区域，按风暴潮影响风险在属性字段区域中排序，区域`1`是最可能被淹没的区域。在飓风或热带风暴的情况下，这些区域的居民可能会被命令疏散。区域值为`X`的区域不在任何疏散区。区域值为`0`的区域包括以下任何一种：水域、小码头或无人居住的岛屿。为了分析目的，这个层应该被栅格化并根据飓风影响风险排序，排名值从不在任何疏散区的区域到最可能被淹没的区域递减。
- en: The `hurricane_inundation_zones` polygon layer contains information about the
    risk of storm surge inundation in the `category` attribute field, in which the
    value is the surge height in feet. Areas that are most likely to be inundated
    are assigned a value of `1`, and areas that are excluded from inundation modeling
    are assigned a value of `5`. This layer should be rasterized and ranked with the
    highest potential suitability values for excluded areas, and the lowest for the
    areas of the `1` category.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '`hurricane_inundation_zones`多边形层包含有关风暴潮淹没风险的`category`属性字段信息，其中值为英尺单位的海拔高度。最有可能被淹没的区域被分配值为`1`，而排除在淹没建模之外的区域被分配值为`5`。这个层应该被栅格化和排序，以最高潜在适宜性值对应排除区域，最低值对应`1`类区域。'
- en: The `noise_heatmap` raster layer is a raster that should be ranked using several
    categories, with the lowest suitability values for the noisiest places and vice
    versa. A good thing here is that we don't need to rasterize this layer, as we
    did with the previous layers. At the same time, establishing the amount and ranges
    for the rankings brings subjectivity into our assessment. The `tree_density` layer,
    which is also a density raster, should be analyzed similarly.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '`noise_heatmap`栅格层是一个应该使用几个类别进行排序的栅格，最不适宜的值对应最嘈杂的地方，反之亦然。这里的好事是，我们不需要像之前那些层一样栅格化这个层。同时，确定排名的数量和范围将使我们的评估带有主观性。`tree_density`层，也是一个密度栅格，应类似进行分析。'
- en: The other selected layers should be analyzed first for their proximity. For
    this purpose, we will first rasterize them, then create continuous proximity rasters,
    and finally rank them under several categories according to the proximity values
    (the closer an object, the higher the suitability value). Again, in the case of
    user rankings, we will not be able to avoid some subjectivity in our assessments.
    Also, the final proximity rasters can be weighted according to their importance
    in the overall suitability assessment.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 其他选定的层应首先分析其邻近性。为此，我们首先将它们栅格化，然后创建连续的邻近栅格，最后根据邻近值（物体越近，适宜性值越高）对它们进行分类排序。同样，在用户排名的情况下，我们无法避免评估中的主观性。此外，最终的邻近栅格可以根据其在整体适宜性评估中的重要性进行加权。
- en: Step 4 – Analyze and prepare the data
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第4步 - 分析和准备数据
- en: 'There are three main approaches to primary data analysis. These depend on the
    initial data type and available attributes:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 原始数据的主要分析方法有三种。这些方法取决于初始数据类型和可用的属性：
- en: '**Rasterizing and ranking categorized vector layers**: These are the layers
    that already contain all the necessary values, and at the preparation stage, all
    of them should be rasterized to the similar extent and resolution. Also, their
    categories should be ranked properly, with the highest values for the most suitable
    areas and vice versa. Examples of these layers are `hurricane_evacuation_zones`,
    `hurricane_inundation_zones`, and so on.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**栅格化和排序分类矢量层**：这些层已经包含了所有必要的值，在准备阶段，所有这些层都应栅格化到相似的范围和分辨率。同时，它们的类别应正确排序，最高值对应最适宜的区域，反之亦然。这些层的例子包括`hurricane_evacuation_zones`、`hurricane_inundation_zones`等。'
- en: '**Ranking density rasters**: These are raster heat maps that should be converted
    from continuous coverages to categorized values where the highest value symbolizes
    the most appropriate area, and the lowest is related to the least suitable area.
    Examples of these layers are `noise_heatmap` and `tree_density`.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**排序密度栅格**：这些是从连续覆盖转换为分类值的栅格热图，其中最高值表示最适宜的区域，最低值与最不适宜的区域相关。这些层的例子包括`noise_heatmap`和`tree_density`。'
- en: '**Generating and ranking proximity rasters**: This is the most tedious workflow.
    Vector layers should be rasterized first, and then proximity rasters should be
    created and ranked properly. This category encompasses the following vector layers:
    `subway_entrances`, `parks`, `public_schools`, `bike_routes`, `athletic_facilities`,
    and `museumart`.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生成和排序邻近栅格**：这是最繁琐的工作流程。首先应将矢量层栅格化，然后创建邻近栅格并正确排序。这一类别包括以下矢量层：`subway_entrances`、`parks`、`public_schools`、`bike_routes`、`athletic_facilities`和`museumart`。'
- en: Note that for the final output, we will always have ranked unique value rasters,
    with the highest values denoting the most suitable areas. Also, it is important
    that all output rasters share a common extent, which is necessary for their proper
    overlay with the raster calculator and overall suitability assessment.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，对于最终输出，我们始终会有按顺序排列的唯一值光栅，最高值表示最合适的区域。此外，所有输出光栅共享一个共同的范围也很重要，这对于它们与光栅计算器和整体适宜性评估的正确叠加是必要的。
- en: In the upcoming sections, we will go through the previously mentioned workflows
    for the example of raster layers. As soon as you grasp the principle, you will
    be able to prepare other layers independently.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将通过光栅图层示例来介绍之前提到的流程。一旦你掌握了原理，你将能够独立准备其他图层。
- en: Rasterizing and ranking categorized vector layers
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 光栅化和对分类矢量图层进行排序
- en: In this example, we will work on the `hurricane_evacuation_zones` layer. The
    attribute we are particularly interested in is `zone`. This is because by this
    attribute, areas are prioritized for evacuation. Areas with the lowest value,
    `1`, are the most likely to be evacuated, and vice versa. In this case, we can
    use these values directly to rank the raster. We have already done rasterization
    in [Chapter 6](part0047.xhtml#aid-1CQAE1 "Chapter 6. Answering Questions with
    Visibility Analysis"), *Answering Questions with Visibility Analysis*, in the
    *Step 1 – converting a buildings' vector layer to raster* section. This time,
    we will follow the same procedure.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们将处理`hurricane_evacuation_zones`图层。我们特别感兴趣的属性是`zone`。这是因为通过这个属性，区域被优先考虑进行疏散。具有最低值`1`的区域最有可能被疏散，反之亦然。在这种情况下，我们可以直接使用这些值来对光栅进行排序。我们已经在[第6章](part0047.xhtml#aid-1CQAE1
    "第6章。使用可见性分析回答问题")，*使用可见性分析回答问题*，*步骤1 - 将建筑矢量图层转换为光栅*部分中进行了光栅化。这次，我们将遵循相同的程序。
- en: 'One thing that prevents us from doing rasterization directly is that the attribute
    field that is used for rasterization should be numeric. If you check out the attribute
    field in the **Fields** section under **Properties**, you will see that the field
    zone has **Type QString**, and its values that contain numbers 1-6 and letters
    (X) are interpreted not as numbers but as sequences of symbols or strings. That''s
    why this field is unavailable for rasterization and should first be converted
    to numbers. This can be done easily with **Field calculator**:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 阻碍我们直接进行光栅化的一个因素是，用于光栅化的属性字段应该是数值型的。如果你查看**属性**下的**字段**部分中的属性字段，你会看到字段区域具有**类型
    QString**，并且包含数字1-6和字母（X）的值被解释为符号或字符串的序列，而不是数字。这就是为什么这个字段无法用于光栅化，并且首先应该将其转换为数字。这可以通过**字段计算器**轻松完成：
- en: Open the attribute table of the layer using the right-click **Open Attribute
    Table** shortcut, or hit the relative button ![Rasterizing and ranking categorized
    vector layers](img/image00475.jpeg) from the **Attributes** toolbar. In the attribute
    table toolbar, either click on the **Open field calculator** button or use the
    *Ctrl* + *I* keyboard shortcut.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用右键单击**打开属性表**快捷方式或点击**属性**工具栏中的相关按钮![光栅化和对分类矢量图层进行排序](img/image00475.jpeg)来打开图层的属性表。在属性表工具栏中，要么点击**打开字段计算器**按钮，要么使用*Ctrl*
    + *I*键盘快捷方式。
- en: 'First of all, we should get rid of the `X` value that cannot be interpreted
    as a number and cannot be converted to it. As we have only one line that contains
    the `X` value, we simply toggle editing mode by clicking on the ![Rasterizing
    and ranking categorized vector layers](img/image00476.jpeg) button in the attribute
    table toolbar. Double-click on the cell and manually enter the new value of `7`.
    If you have multiple values to change, you can use the following expression in
    **Field calculator** to change some zone field values: `CASE WHEN "zone" = ''X''
    THEN ''7'' ELSE "zone" END`.'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们应该去除无法解释为数字且无法转换为数字的`X`值。由于我们只有一行包含`X`值，我们只需通过点击属性表工具栏中的![光栅化和对分类矢量图层进行排序](img/image00476.jpeg)按钮切换编辑模式。双击单元格并手动输入新的`7`值。如果你有多个值需要更改，你可以在**字段计算器**中使用以下表达式来更改某些区域字段的值：`CASE
    WHEN "zone" = 'X' THEN '7' ELSE "zone" END`。
- en: 'Click on the ![Rasterizing and ranking categorized vector layers](img/image00477.jpeg)
    button to open the **Field calculator** dialog window as shown in the following
    screenshot, and make the following adjustments:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击![光栅化和对分类矢量图层进行排序](img/image00477.jpeg)按钮打开如图所示的**字段计算器**对话框窗口，并进行以下调整：
- en: Make sure that the **Create a new field** toggle is on.
  id: totrans-130
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保已开启**创建新字段**切换按钮。
- en: Type the **Output field** name manually, for example, `rank`.
  id: totrans-131
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 手动输入**输出字段**名称，例如，`rank`。
- en: Select **Whole number (integer)** from the **Output field** type list, as we
    are going to use short integers for ranking.
  id: totrans-132
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从**输出字段**类型列表中选择**整数（整数）**，因为我们打算使用短整数进行排序。
- en: Reduce **Output field width** to `1`. This is because the rank values don't
    exceed 10 and we don't want to create excess data by producing fields of length
    that exceed actual data values.
  id: totrans-133
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将**输出字段宽度**减少到`1`。这是因为排序值不超过10，我们不希望通过产生超过实际数据值的字段长度来创建多余的数据。
- en: In the **Expression** field, we need to type a function that will be used to
    create the values of a new field. In the **Functions** list, expand the **Conversions**
    item and double-click on the **toint** function. According to its description,
    it converts a string to an integer number. Nothing changes if a value cannot be
    converted to integer (for example, `123asd` is invalid). After double-clicking,
    the function will be added to the expression with an open bracket, after which
    you should type (or double-click to add an item from **Fields and Values**) the
    field name to be converted in double quotation marks, and close the brackets.
    In our case, the resulting expression will be `toint( "zone" )`.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**表达式**字段中，我们需要输入一个函数，该函数将用于创建新字段的值。在**函数**列表中，展开**转换**项，并双击**toint**函数。根据其描述，它将字符串转换为整数。如果值无法转换为整数（例如，`123asd`是无效的），则不会发生任何变化。双击后，函数将以一个开括号添加到表达式中，之后你应该在双引号中输入（或双击从**字段和值**添加项）要转换的字段名称，然后关闭括号。在我们的例子中，生成的表达式将是`toint(
    "zone" )`。
- en: After you've clicked on the **OK** button, the new field will appear at the
    end of the table. Deactivate editing mode, confirm saving of the edits, and exit
    the attribute table window.![Rasterizing and ranking categorized vector layers](img/image00478.jpeg)
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**按钮后，新字段将出现在表格末尾。取消编辑模式，确认保存编辑，并退出属性表窗口。![光栅化和排序分类矢量图层](img/image00478.jpeg)
- en: 'The layer is ready for rasterization. Open a dialog window by going to **Raster**
    | **Conversion** | **Rasterize (Vector to Raster)**. In this dialog window as
    shown in the following screenshot, adjust the following settings:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 图层已准备好进行光栅化。通过访问**栅格** | **转换** | **光栅化（矢量到栅格）**打开一个对话框窗口。在此对话框窗口中，如以下截图所示，调整以下设置：
- en: From the **Input file (shapefile)** drop-down list, select `hurricane_evacuation_zones`.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**输入文件（shapefile）**下拉列表中选择`hurricane_evacuation_zones`。
- en: From the **Attribute** drop-down list, select `rank`.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**属性**下拉列表中选择`rank`。
- en: 'In **Output file for** **rasterized vectors (raster)**, click on the **Select**
    button. Navigate to your working directory, and type `hurricane_evacuation_zones.tif`
    as the new layer name. This message will be shown: **The output file doesn''t
    exist. You must set up the output size or resolution to create it.**. Click on
    **OK** and proceed to the next stage.'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**输出文件**的**栅格化矢量（栅格）**中，点击**选择**按钮。导航到您的当前工作目录，并将新图层名称输入为`hurricane_evacuation_zones.tif`。将显示此消息：**输出文件不存在。您必须设置输出大小或分辨率才能创建它**。点击**确定**并继续下一阶段。
- en: 'In the previous steps, you defined some major options. For convenience, we
    will create rasters in this tutorial with the same extent and resolution using
    `lidar_dem.tif` as a template. Click on the ![Rasterizing and ranking categorized
    vector layers](img/image00479.jpeg) button to make the `gdal_rasterize` command-line
    parameters editable. After modification, the line should look similar to the following
    example:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在前面的步骤中，您定义了一些主要选项。为了方便起见，我们将使用`lidar_dem.tif`作为模板，在本教程中使用相同的范围和分辨率创建栅格。点击![光栅化和排序分类矢量图层](img/image00479.jpeg)按钮以使`gdal_rasterize`命令行参数可编辑。修改后，行应类似于以下示例：
- en: '[PRE0]'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This means that the output raster will contain rasterized values from the rank
    attribute field. Areas outside the layer polygons will be assigned a value of
    `0`, which will be interpreted as `nodata`. The output data type is a 16-bit unsigned
    integer.
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这意味着输出栅格将包含来自排序属性字段的栅格化值。图层多边形外的区域将被分配一个值为`0`，这将被解释为`nodata`。输出数据类型是16位无符号整数。
- en: Click on the **OK** button. The result of rasterization will appear in the **Layers**
    panel.![Rasterizing and ranking categorized vector layers](img/image00480.jpeg)
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**按钮。光栅化结果将显示在**图层**面板中。![光栅化和排序分类矢量图层](img/image00480.jpeg)
- en: 'The `hurricane_inundation_zones` layer should be preprocessed in a similar
    way. The layer contains some `zone` numbers. These can be interpreted as the severity
    of inundation risk; that is, the higher the number, the lower the risk. This means
    that we can use these values directly for ranking. In the case of this layer,
    the `gdal_rasterize` command-line parameters will look as follows:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '`hurricane_inundation_zones`图层应以类似的方式进行预处理。该图层包含一些`区域`编号。这些可以解释为洪水风险的严重程度；也就是说，数字越高，风险越低。这意味着我们可以直接使用这些值进行排序。对于这个图层，`gdal_rasterize`命令行参数将如下所示：'
- en: '[PRE1]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: When combined, these layers can give a cumulative assessment of suitability
    based on risk's severity from natural hazards.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 当结合使用时，这些图层可以根据自然灾害风险的严重程度提供基于适宜性的累积评估。
- en: Ranking density rasters
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 排名密度栅格
- en: 'In the case of density rasters, we can use the ready `noise_heatamp.tif` created
    in the *Creating heat maps with the Heatmap plugin* section of [Chapter 5](part0043.xhtml#aid-190861
    "Chapter 5. Answering Questions with Density Analysis"), *Answering Questions
    with Density Analysis*, and create the `tree_density.tif` layer ourselves. First,
    we will prepare a `noise_heatmap.tif` that is originally much larger by extent
    than the area of interest that we are working on in this chapter. To clip the
    raster layer go to **Raster** | **Extraction** | **Clipper**:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 在密度栅格的情况下，我们可以使用在[第5章](part0043.xhtml#aid-190861 "第5章。使用密度分析回答问题")的*使用Heatmap插件创建热图*部分中创建的现成的`noise_heatamp.tif`，并在*使用密度分析回答问题*中创建`tree_density.tif`图层。首先，我们将准备一个`noise_heatmap.tif`，其范围比我们在本章中工作的感兴趣区域大得多。要裁剪栅格图层，请转到**栅格**
    | **提取** | **裁剪器**：
- en: From the **Input file (raster)** drop-down list select **noise-heatmap**, which
    is the raster to be clipped.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**输入文件（栅格）**下拉列表中选择**noise-heatmap**，这是要裁剪的栅格。
- en: In **Output file**, click on the **Select** button to set a path and name for
    the output file, for example, `noise_heatmap_clip.tif`.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**输出文件**中，点击**选择**按钮以设置输出文件的路径和名称，例如，`noise_heatmap_clip.tif`。
- en: 'In the **Clipping mode** section, there are two possible modes:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**裁剪模式**部分，有两种可能的模式：
- en: '**Extent** is where you can enter the bounding box''s coordinates manually
    or by dragging the map canvas. Use this approach to set the extent for your output
    file. Just remember that the extent should exceed the boundaries of the area of
    interest set by the `zipcode_bound` shapefile.'
  id: totrans-152
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**范围**是您可以手动输入边界框坐标或通过拖动地图画布的地方。使用这种方法设置输出文件的范围。只需记住，范围应超过由`zipcode_bound`形状文件设定的感兴趣区域的边界。'
- en: If **Mask layer** is active, you can select a polygonal shapefile, and it will
    be used as a clipping boundary.
  id: totrans-153
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果**掩膜层**处于活动状态，您可以选择一个多边形形状文件，它将被用作裁剪边界。
- en: After you have clicked on the **OK** button, the layer will be loaded into the
    map canvas.
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在您点击**确定**按钮后，该图层将被加载到地图画布上。
- en: '![Ranking density rasters](img/image00481.jpeg)'
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![排名密度栅格](img/image00481.jpeg)'
- en: 'The following steps should be done to assess its value range, divide it into
    categories, and rank them:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤应执行以评估其值范围，将其分为类别，并对它们进行排序：
- en: Double-click on the `noise_heatmap_clip` layer to open the **Layer Properties**
    window. In this window, go to the **Metadata** section. Explore the **Properties**
    window in the lower part of the dialog until you find the **Band 1** highlighted
    line with basic raster statistics, as shown here:![Ranking density rasters](img/image00482.jpeg)
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击`noise_heatmap_clip`图层以打开**图层属性**窗口。在此窗口中，转到**元数据**部分。在对话框下方的**属性**窗口中探索，直到找到带有基本栅格统计信息的**波段
    1**高亮行，如图所示：![排名密度栅格](img/image00482.jpeg)
- en: 'We will deal with the density raster, and its values are interpreted as the
    number of noise complaints per pixel area. This continuous surface should be divided
    into categories and they should be ranked according to the number of complaints.
    For this, a certain critical number of complaints should be set. There are no
    officially recognized limits and requirements, but we can interpret the mean dataset
    value as some critical number (it is slightly greater than 56, but we will use
    50 for convenience). Divide the values into categories and assign them the following
    ranks (the less the number of complaints, the better):'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将处理密度栅格，其值被解释为每像素面积内的噪声投诉数量。这个连续表面应分为类别，并且应根据投诉数量进行排序。为此，应设置一定的投诉临界值。没有官方认可的限制和要求，但我们可以将平均数据集值解释为某个临界值（它略大于56，但我们将使用50以方便起见）。将值分为类别，并分配以下排名（投诉数量越少，排名越好）：
- en: '| Category | Value range | Suitability rank |'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类别 | 值范围 | 适应性排名 |'
- en: '| --- | --- | --- |'
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| 1 | Less than 50 | 5 |'
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 1 | 小于50 | 5 |'
- en: '| 2 | 50 to 100 | 4 |'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 2 | 50到100 | 4 |'
- en: '| 3 | 100 to 150 | 3 |'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 3 | 100到150 | 3 |'
- en: '| 4 | 150 to 200 | 2 |'
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 4 | 150 to 200 | 2 |'
- en: '| 5 | Greater than 200 | 1 |'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 5 | 大于200 | 1 |'
- en: 'For the rankings, go to **Raster** | **Raster Calculator** and adjust the following
    options in its dialog window:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于排名，转到**栅格** | **栅格计算器**，并在其对话框窗口中调整以下选项：
- en: Enter the **Output layer** path and name, for example, `noise_ranked`
  id: totrans-167
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 输入**输出层**路径和名称，例如，`noise_ranked`
- en: Select the `noise_heatmap_clip @1` raster band and click on the **Current layer
    extent** button to make sure that the output layer will have the same resolution
    and extent
  id: totrans-168
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择`noise_heatmap_clip @1`栅格波段，并点击**当前图层范围**按钮，以确保输出层将具有相同的分辨率和范围
- en: 'In the **Raster Calculator** expression window, enter the following expression:'
  id: totrans-169
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**栅格计算器**表达式窗口中，输入以下表达式：
- en: '[PRE2]'
  id: totrans-170
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: This expression means that every pixel that falls under a certain range given
    in brackets first assigned 1 value, and then it is ranked by a certain multiplier
    value, which is outside the brackets. After you click on the **OK** button, the
    reclassified raster will be loaded into the **Layers** panel.
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这个表达式意味着在括号中给出的某个范围内每个落在该范围内的像素首先被分配1个值，然后它通过括号外的某个乘数值进行排名。点击**确定**按钮后，重新分类的栅格将被加载到**图层**面板中。
- en: '![Ranking density rasters](img/image00483.jpeg)'
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![排名密度栅格](img/image00483.jpeg)'
- en: 'Pay attention to this: due to ranking, the heat map was inverted; that is,
    the noisiest hotspots get the lowest ranks and the quietest places get the highest.'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：由于排名，热图被反转；也就是说，最嘈杂的热点获得最低排名，而最安静的地方获得最高排名。
- en: In a similar way, we can create and rank heat maps for other point objects that
    are of interest in our suitability analysis, namely `trees` and `museumart`.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 以类似的方式，我们可以为其他对我们适应性分析感兴趣的点对象创建和排名热图，即`trees`和`museumart`。
- en: Generating and ranking proximity rasters
  id: totrans-175
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 生成和排名邻近度栅格
- en: 'The workflow will be explained in the example of the `subway_entrances` point
    vector layer:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 以下将使用`subway_entrances`点矢量层为例来解释工作流程：
- en: 'First, the layer should be rasterized in a common way. The `gdal_rasterize`
    line will contain the following parameters:'
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，该层应以常见的方式进行栅格化。`gdal_rasterize`行将包含以下参数：
- en: '[PRE3]'
  id: totrans-178
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: In the output layer, existing point locations will be marked by pixel values
    of `1`, while all other areas will be assigned the `nodata` values of `0`.
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在输出层中，现有的点位置将通过像素值`1`进行标记，而所有其他区域将被分配`nodata`值的`0`。
- en: 'Go to **Raster** | **Analysis** | **Proximity (Raster Distance)**. This dialog
    generates a raster proximity map that indicates the distance from the center of
    each pixel to the center of the nearest pixel identified as a target pixel. Target
    pixels are those pixels in the source raster for which the raster pixel value
    is in the set of target pixel values. If not specified, all nonzero pixels will
    be considered target pixels. In the dialog window, adjust the following parameters:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**栅格** | **分析** | **邻近度（栅格距离）**。此对话框生成一个栅格邻近度图，指示每个像素中心到最近的被识别为目标像素的像素中心的距离。目标像素是源栅格中其栅格像素值在目标像素值集中的像素。如果没有指定，所有非零像素将被视为目标像素。在对话框窗口中，调整以下参数：
- en: From the **Input file** drop-down list, select the `subway_entrances` layer.
  id: totrans-181
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从**输入文件**下拉列表中，选择`subway_entrances`层。
- en: In the **Output file**, click on the **Select** button and specify a path and
    a name for the output layer, for example, `subway_entances_proximity.tif`.
  id: totrans-182
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**输出文件**中，点击**选择**按钮并指定输出图层路径和名称，例如，`subway_entances_proximity.tif`。
- en: Make sure that the **Dist units** parameter is activated and set to **GEO**.
    In this case, the distances generated will be in georeferenced coordinates (feet).
  id: totrans-183
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保已激活**距离单位**参数并将其设置为**GEO**。在这种情况下，生成的距离将在地理坐标（英尺）中。
- en: 'The resulting parameters line will look like this:'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 生成的参数行将看起来像这样：
- en: '[PRE4]'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Note
  id: totrans-186
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: To convert a vector to raster, we used a tool from the GDAL. It is called `gdal_proximity`.
    You can read an extensive synopsis of the `gdal_proximity` parameters and their
    values at [http://www.gdal.org/gdal_proximity.html](http://www.gdal.org/gdal_proximity.html).
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将矢量转换为栅格时，我们使用了GDAL的一个工具。它被称为`gdal_proximity`。你可以在[http://www.gdal.org/gdal_proximity.html](http://www.gdal.org/gdal_proximity.html)阅读关于`gdal_proximity`参数及其值的详细说明。
- en: '![Generating and ranking proximity rasters](img/image00484.jpeg)'
  id: totrans-188
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![生成和排名邻近度栅格](img/image00484.jpeg)'
- en: 'The proximity raster should be divided into discrete categories and they should
    be ranked. For this operation, we will use **Raster Calculator**. The major problem
    here is to decide on the amount and properly select the proximity categories for
    ranking. The optimal decision depends on the so-called walking radius, that is,
    the distance that people are comfortable to walk up to. Generally, transport planners
    have observed that the walking distance that most people seem to cover comfortably—
    beyond which ridership falls drastically—is about 400 m (approximately 1300 feet).
    We will apply this 400 m rule to categorize the layer values (min as zero and
    max as 4988.71) into four categories, with the following ranks:'
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 邻近度栅格应分为离散的类别，并且应进行排名。为此操作，我们将使用**栅格计算器**。这里的主要问题是决定数量和正确选择排名的邻近度类别。最佳决策取决于所谓的步行半径，即人们愿意步行到的距离。通常，交通规划者观察到，大多数人似乎能够舒适地覆盖的步行距离——超过这个距离，乘客量会急剧下降——大约是400米（约1300英尺）。我们将应用这个400米规则将层值（最小为零，最大为4988.71）分类为四个类别，以下排名：
- en: '| Category | Proximity values range (feet) | Suitability rank |'
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 类别 | 邻近度值范围（英尺） | 适宜性排名 |'
- en: '| --- | --- | --- |'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| 1 | Less than 1,300 | 4 |'
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 1 | 小于1,300 | 4 |'
- en: '| 2 | 1,300 to 2,600 | 3 |'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 2 | 1,300到2,600 | 3 |'
- en: '| 3 | 2,600 to 3,900 | 2 |'
  id: totrans-194
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 3 | 2,600到3,900 | 2 |'
- en: '| 4 | Greater than 3,900 | 1 |'
  id: totrans-195
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 4 | 大于3,900 | 1 |'
- en: 'Go to **Raster** | **Raster Calculator** and adjust the main options. Enter
    the following expression to generate a new `subway_entrances_proximity_ranks`
    raster:'
  id: totrans-196
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前往**栅格** | **栅格计算器**并调整主要选项。输入以下表达式以生成一个新的`subway_entrances_proximity_ranks`栅格：
- en: '[PRE5]'
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'In the following screenshot, you can see what continuous (on the left) and
    ranked (on the right) rasters may look like:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的屏幕截图中，你可以看到连续（在左侧）和排名（在右侧）栅格可能的样子：
- en: '![Generating and ranking proximity rasters](img/image00485.jpeg)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![生成和排名邻近度栅格](img/image00485.jpeg)'
- en: In a similar way, you can preprocess other vector layers that should be analyzed
    from the proximity position, namely `parks`, `bike_routes`, `athletic_facilities`,
    and `elementary schools`. As a result, you will have a set of raster layers ranked
    with several categories according to the proximity of selected objects. The higher
    the rank, the closer the objects. As a general rule of thumb, apply the 400 m
    (or 1300 feet) value to rank the rasters properly.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 以类似的方式，你可以预处理其他需要从邻近位置进行分析的矢量图层，即`公园`、`自行车路线`、`体育设施`和`小学`。结果，你将拥有一组根据选定对象的邻近度进行分类的栅格图层。排名越高，对象越接近。一般来说，可以将400米（或1300英尺）的值应用于正确地排名栅格。
- en: Step 5 – overlay the data and interpret the results
  id: totrans-201
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第5步 – 叠加数据和解释结果
- en: Now we have everything ready for overlaying the rasters and generating a cumulative
    suitability assessment. In the following table, you can see the full list of layers,
    weighted by their importance for general suitability. Weights are simple coefficients
    within a range of 0 to 1, and they are used to modify the rank properly.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经准备好了叠加栅格并生成累积适宜性评估的所有条件。在下面的表格中，你可以看到按其一般适宜性重要性加权的完整图层列表。权重是介于0到1之间的简单系数，它们被用来正确地修改排名。
- en: '| No. | Raster layer name | Raster layer type | Rank min | Rank max | Weight
    coefficient | Max possible value = max rank * weight |'
  id: totrans-203
  prefs: []
  type: TYPE_TB
  zh: '| No. | 栅格图层名称 | 栅格图层类型 | 排名最小值 | 排名最大值 | 权重系数 | 最大可能值 = 最大排名 * 权重 |'
- en: '| --- | --- | --- | --- | --- | --- | --- |'
  id: totrans-204
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- | --- | --- |'
- en: '| 1 | `athletic_facilities_proximity_ranks` | Proximity | 1 | 5 | 0.04 | 0.2
    |'
  id: totrans-205
  prefs: []
  type: TYPE_TB
  zh: '| 1 | `athletic_facilities_proximity_ranks` | Proximity | 1 | 5 | 0.04 | 0.2
    |'
- en: '| 2 | `bike_routes_proximity_ranks` | Proximity | 1 | 3 | 0.06 | 0.18 |'
  id: totrans-206
  prefs: []
  type: TYPE_TB
  zh: '| 2 | `bike_routes_proximity_ranks` | Proximity | 1 | 3 | 0.06 | 0.18 |'
- en: '| 3 | `hurricane_evacuation_zones` | Zoning | 1 | 7 | 0.16 | 1.12 |'
  id: totrans-207
  prefs: []
  type: TYPE_TB
  zh: '| 3 | `hurricane_evacuation_zones` | Zoning | 1 | 7 | 0.16 | 1.12 |'
- en: '| 4 | `hurricane_inundation_zones` | Zoning | 1 | 5 | 0.16 | 0.8 |'
  id: totrans-208
  prefs: []
  type: TYPE_TB
  zh: '| 4 | `hurricane_inundation_zones` | Zoning | 1 | 5 | 0.16 | 0.8 |'
- en: '| 5 | `Museumart_ranked` | Density | 1 | 4 | 0.05 | 0.2 |'
  id: totrans-209
  prefs: []
  type: TYPE_TB
  zh: '| 5 | `Museumart_ranked` | Density | 1 | 4 | 0.05 | 0.2 |'
- en: '| 6 | `Noise_ranked` | Density | 1 | 5 | 0.13 | 0.65 |'
  id: totrans-210
  prefs: []
  type: TYPE_TB
  zh: '| 6 | `Noise_ranked` | Density | 1 | 5 | 0.13 | 0.65 |'
- en: '| 7 | `Parks_proximity_ranks` | Proximity | 1 | 3 | 0.12 | 0.36 |'
  id: totrans-211
  prefs: []
  type: TYPE_TB
  zh: '| 7 | `Parks_proximity_ranks` | Proximity | 1 | 3 | 0.12 | 0.36 |'
- en: '| 8 | `Schools_proximity_ranks` | Proximity | 1 | 4 | 0.15 | 0.6 |'
  id: totrans-212
  prefs: []
  type: TYPE_TB
  zh: '| 8 | `Schools_proximity_ranks` | Proximity | 1 | 4 | 0.15 | 0.6 |'
- en: '| 9 | `subway_entrances_proximity_ranks` | Proximity | 1 | 4 | 0.06 | 0.24
    |'
  id: totrans-213
  prefs: []
  type: TYPE_TB
  zh: '| 9 | `subway_entrances_proximity_ranks` | Proximity | 1 | 4 | 0.06 | 0.24
    |'
- en: '| 10 | `Tree_ranked` | Density | 1 | 4 | 0.07 | 0.28 |'
  id: totrans-214
  prefs: []
  type: TYPE_TB
  zh: '| 10 | `Tree_ranked` | Density | 1 | 4 | 0.07 | 0.28 |'
- en: '| Total | 10 | 44 | 1.0 | 4.63 |'
  id: totrans-215
  prefs: []
  type: TYPE_TB
  zh: '| 总计 | 10 | 44 | 1.0 | 4.63 |'
- en: 'The expression to be used for our assessment of suitability can be constructed
    by several steps:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 用于我们适宜性评估的表达式可以通过以下步骤构建：
- en: 'All the available factors that are represented by raster layers should be multiplied
    by their weight coefficients and summarized, like this: `(factor_1*weight + factor_2*weight
    + factor_3*weight + … factor_n*weight)`. This kind of assessment gives gross suitability,
    which is difficult for interpretation because the obtained values are not calculated
    relatively to the possible minimum and maximum.'
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所有由栅格图层表示的可用因素都应乘以其权重系数并汇总，如下所示：（factor_1*weight + factor_2*weight + factor_3*weight
    + … factor_n*weight）。这种评估给出的是总适宜性，由于获得的值没有相对于可能的最小值和最大值进行计算，因此难以解释。
- en: 'For simplicity of interpretation, a gross suitability assessment can be divided
    into the sum of the maximum possible value. The extended formula will look like
    this: *(factor_1*weight + factor_2*weight + factor_3*weight + … factor_n*weight)
    / (factor_1_max*weight + factor_2_max*weight + factor_3_max*weight + … factor_n_max*weight)*.
    As a result, the output value range will be from 0 to 1, where the maximum suitability
    values are close to 1.'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了便于解释，总适宜性评估可以分成最大可能值的总和。扩展公式将如下所示：（factor_1*weight + factor_2*weight + factor_3*weight
    + … factor_n*weight）/（factor_1_max*weight + factor_2_max*weight + factor_3_max*weight
    + … factor_n_max*weight）。结果，输出值范围将从 0 到 1，其中最大适宜性值接近 1。
- en: Optionally, the result can be multiplied by 100\. Then the output values will
    be a percentage of suitability.
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可选地，结果可以乘以 100。然后输出值将是适宜性的百分比。
- en: 'Go to **Raster** | **Raster Calculator** to perform an assessment:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 前往**栅格** | **栅格计算器**进行评估：
- en: Set the path and name for **Output layer**
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置**输出图层**的路径和名称
- en: Select a layer from the **Raster bands** list to set up **Current layer extent**,
    for example, `hurricane_inundataion`
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从**栅格波段**列表中选择一个图层来设置**当前图层范围**，例如，`hurricane_inundataion`
- en: 'In the **Expression** window, enter the following formula (if you are not sure
    about the values, check out the preceding table):'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**表达式**窗口中，输入以下公式（如果您不确定值，请查看前面的表格）：
- en: '[PRE6]'
  id: totrans-224
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'After you have clicked on the **OK** button, the resulting layer will be added
    to the map canvas. The suitability raster value''s range varies from 42 to 96
    percent. Thus, it can easily be classified and interpreted. Navigate to **Layer
    properties** | **Style** and adjust the rendering properties to those shown in
    the following screenshot:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**确定**按钮后，生成的图层将被添加到地图画布上。适宜性栅格值的范围从 42% 到 96%。因此，它可以很容易地进行分类和解释。导航到**图层属性**
    | **样式**并调整渲染属性，如以下截图所示：
- en: '![Step 5 – overlay the data and interpret the results](img/image00486.jpeg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 – 对数据进行叠加并解释结果](img/image00486.jpeg)'
- en: 'After applying these settings, the layer will look as follows:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 应用这些设置后，图层将如下所示：
- en: '![Step 5 – overlay the data and interpret the results](img/image00487.jpeg)'
  id: totrans-228
  prefs: []
  type: TYPE_IMG
  zh: '![步骤 5 – 对数据进行叠加并解释结果](img/image00487.jpeg)'
- en: We can use this raster as a basis for a primary visual suitability assessment
    of the area of our interest, or go further and combine it with other layers to
    identify the exact blocks that match best the entire range of suitability criteria.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用这个栅格作为对我们感兴趣区域进行初步视觉适宜性评估的基础，或者进一步将其与其他图层结合，以确定与整个适宜性标准范围最匹配的确切区块。
- en: 'In that case, we need to perform the inverse sequence of steps: select the
    most suitable areas, vectorize, and overlay the polygons of maximum suitability
    with residential living areas to identify the blocks and buildings that would
    be particularly suitable:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 在那种情况下，我们需要执行步骤的逆序：选择最适宜的区域，矢量化，并将最大适宜性的多边形与住宅生活区域叠加，以识别特别适宜的街区和建筑：
- en: 'The initial suitability raster should be categorized into only two classes
    by a limit of 90 percent suitability. Go to **Raster** | **Raster Calculator**
    and define the path and name for the output raster (for example `max_suitability`).
    In the **Expression** window, enter `"suitability, %@1" >= 90`. On the next page,
    you can see that the resulting layer contains only two classes: suitable (the
    value is 1; assigned to areas with suitability greater than or equal to 90 percent),
    and unsuitable (the value is 0).'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 初始适宜性栅格应通过90%适宜性限制分为仅两个类别。转到**栅格** | **栅格计算器**，定义输出栅格的路径和名称（例如 `max_suitability`）。在**表达式**窗口中，输入
    `"suitability, %@1" >= 90`。在下一页，你可以看到生成的图层仅包含两个类别：适宜（值为1；分配给适宜性大于或等于90%的区域），和不适宜（值为0）。
- en: Now we need to vectorize these areas to be able to query vector layers with
    them. Open the **Polygonize (Raster to vector)** dialog window by going to **Raster**
    | **Conversion** and adjust the following parameters:![Step 5 – overlay the data
    and interpret the results](img/image00488.jpeg)
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们需要将这些区域矢量化，以便能够使用它们查询矢量图层。通过转到**栅格** | **转换**打开**多边形化（栅格到矢量）**对话框，调整以下参数：![步骤5
    – 对数据叠加并解释结果](img/image00488.jpeg)
- en: Select `max_suitability` as the raster to be polygonized from **Input file (raster)**.
  id: totrans-233
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从**输入文件（栅格）**中选择`max_suitability`作为要矢量的栅格。
- en: Provide the path and name of the output shapefile in **Output file for polygons
    (shapefile)**, for example, `max_suitability_polygons`.
  id: totrans-234
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**输出多边形文件（shapefile）**中提供输出形状文件的路径和名称，例如，`max_suitability_polygons`。
- en: Activate the **Field name** toggle and accept the default `DN` value. This option
    is responsible for creating and populating field with class values from the initial
    raster.
  id: totrans-235
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 激活**字段名**切换按钮，并接受默认的`DN`值。此选项负责从初始栅格创建并填充具有类别值的字段。
- en: '![Step 5 – overlay the data and interpret the results](img/image00489.jpeg)'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![步骤5 – 对数据叠加并解释结果](img/image00489.jpeg)'
- en: 'After you click on the **OK** button, the resulting shapefile will be added
    to the **Layers** panel. Originally, the layer contains polygons of all classes,
    whereas we are interested only in class 1\. For the purpose of selecting and deleting
    unnecessary polygons, we will use the **Select features using an expression**
    option:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**按钮后，生成的形状文件将被添加到**图层**面板。最初，该图层包含所有类别的多边形，而我们只对类别1感兴趣。为了选择和删除不必要的多边形，我们将使用**使用表达式选择要素**选项：
- en: Open the `max_suitability` attribute table by clicking on the ![Step 5 – overlay
    the data and interpret the results](img/image00475.jpeg) button in the **Attribute**
    panel, or from the right-click **Open Attribute Table** layer shortcut.
  id: totrans-238
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过单击**属性**面板中的![步骤5 – 对数据叠加并解释结果](img/image00475.jpeg)按钮或从右键菜单中选择**打开属性表**快捷方式，打开`max_suitability`属性表。
- en: 'In the attribute table toolbar panel, click on the **Select features using
    an expression** button, ![Step 5 – overlay the data and interpret the results](img/image00490.jpeg),
    and enter the following expression: `"DN" = 0`. After clicking on **OK**, all
    the polygons that satisfy the condition will be highlighted in the attribute table
    and on the map canvas.'
  id: totrans-239
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在属性表工具栏面板中，单击**使用表达式选择要素**按钮，![步骤5 – 对数据叠加并解释结果](img/image00490.jpeg)，并输入以下表达式：`"DN"
    = 0`。点击**确定**后，满足条件的所有多边形将在属性表和地图画布上突出显示。
- en: As we don't need these polygons for further analysis, we should delete them.
    In the attribute table toolbar panel, click on the ![Step 5 – overlay the data
    and interpret the results](img/image00476.jpeg) button to toggle editing mode,
    or use the *Ctrl* + *E* keyboard shortcut. Now we can execute **Delete selected
    features** using the ![Step 5 – overlay the data and interpret the results](img/image00491.jpeg)
    button, or just press *Del* from the keyboard.
  id: totrans-240
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于我们不需要这些多边形进行进一步分析，我们应该删除它们。在属性表工具栏面板中，单击![步骤5 – 对数据叠加并解释结果](img/image00476.jpeg)按钮切换编辑模式，或使用*Ctrl*
    + *E*键盘快捷键。现在我们可以使用![步骤5 – 对数据叠加并解释结果](img/image00491.jpeg)按钮执行**删除所选要素**，或者直接从键盘按下*Del*键。
- en: 'After deleting the unnecessary data, don''t forget to save your edits (using
    ![Step 5 – overlay the data and interpret the results](img/image00492.jpeg) or
    *Ctrl* + *S*) and deactivate editing mode. In the following screenshot, you can
    see that the layer contains only those polygons that encompass the maximum suitability
    values, which are set to 90 percent:'
  id: totrans-241
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在删除不必要的资料后，别忘了保存您的编辑（使用 ![步骤 5 – 对数据叠加并解释结果](img/image00492.jpeg) 或 *Ctrl* +
    *S*) 并取消编辑模式。在以下屏幕截图中，您可以看到该图层仅包含那些包含最大适宜值的多边形，这些值设置为90%：
- en: '![Step 5 – overlay the data and interpret the results](img/image00493.jpeg)'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![步骤 5 – 对数据叠加并解释结果](img/image00493.jpeg)'
- en: 'Now this layer can be used to overlay with other vector layers and analyze
    spatial relationships between objects, as was described in the *Basics of* *suitability
    analysis* section. For example, we can identify the zoning areas of primary residential
    living area that are of potential interest to us according to the suitability
    criteria:'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，这个图层可以用来与其他矢量图层叠加，并分析对象之间的空间关系，正如在*适宜性分析基础*部分所描述的。例如，我们可以根据适宜性标准识别对我们可能感兴趣的主要住宅区的分区区域：
- en: Open a dialog window by going to **Vector** | **Research tools** | **Select
    by location**. In this dialog, you should first select the layer from which objects
    are to be selected—`residential_zoning` from the **Select features in:** drop-down
    list—like this:![Step 5 – overlay the data and interpret the results](img/image00494.jpeg)
  id: totrans-244
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过访问**向量** | **研究工具** | **按位置选择**来打开一个对话框。在这个对话框中，您首先应从下拉列表中选择要从中选择对象的图层—从**选择特征在：**下拉列表中选择**`residential_zoning`**—如下所示：![步骤
    5 – 对数据叠加并解释结果](img/image00494.jpeg)
- en: the **that intersect features in:** drop-down list, select `max_suitability_polygons`,
    which will be used as a selector.
  id: totrans-245
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在**与特征相交的**下拉列表中，选择`max_suitability_polygons`，它将被用作选择器。
- en: 'There are several overlay selection options. Activate **Include input features
    that intersect the selection features**. Only those polygons that are within the
    query mask boundary or intersect it will be added to the selection. Click on the
    **OK** button. You will see the following result on the map canvas:'
  id: totrans-246
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有几种叠加选择选项。激活**包括与选择特征相交的输入特征**。只有那些在查询掩码边界内或与之相交的多边形将被添加到选择中。点击**确定**按钮。您将在地图画布上看到以下结果：
- en: '![Step 5 – overlay the data and interpret the results](img/image00495.jpeg)'
  id: totrans-247
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![步骤 5 – 对数据叠加并解释结果](img/image00495.jpeg)'
- en: Similarly, you can try another type of query and identify the exact buildings
    that satisfy a suitability condition. In that case, the dialog window will look
    as follows:![Step 5 – overlay the data and interpret the results](img/image00496.jpeg)
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 同样，您可以尝试另一种类型的查询并确定满足适宜条件的确切建筑物。在这种情况下，对话框将如下所示：![步骤 5 – 对数据叠加并解释结果](img/image00496.jpeg)
- en: 'After clicking on the **OK** button, you will see the following results on
    the map canvas:'
  id: totrans-249
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 点击**确定**按钮后，您将在地图画布上看到以下结果：
- en: '![Step 5 – overlay the data and interpret the results](img/image00497.jpeg)'
  id: totrans-250
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![步骤 5 – 对数据叠加并解释结果](img/image00497.jpeg)'
- en: Notice that this time, we have selected buildings that were completely within
    the maximum suitability areas. So, we are ready to provide a solid and specific
    answer to the question, "Which is the best place to live?"
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 注意这次，我们选择了完全位于最大适宜区域内的建筑物。因此，我们准备好为问题“哪个地方最适合居住？”提供一个坚实且具体的答案。
- en: Summary
  id: totrans-252
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this chapter, you followed the entire path of spatial analysis, from raising
    questions to providing concrete answers, that is, finding a specific place and
    objects on a map. You explored some basics of suitability analysis and saw how
    it defines and interprets spatial relations between objects. Also, you explored
    a lot of operations related to data preprocessing: rasterization, reclassification,
    raster algebra performance, and so on. Finally, you reviewed spatial queries that
    are based on overlaying spatial objects and analyzing spatial relationships between
    them.'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您跟随了整个空间分析的全过程，从提出问题到提供具体的答案，即找到地图上的特定地点和对象。您探索了适宜性分析的一些基础知识，并了解了它是如何定义和解释对象之间的空间关系的。此外，您还探索了许多与数据预处理相关的操作：栅格化、重新分类、栅格代数性能等。最后，您回顾了基于叠加空间对象和分析它们之间空间关系的空间查询。
- en: Executing analysis operations step by step is good when you learn, but if you
    have a lot of data and limited time to provide the answer, then you should improve
    the performance of your analysis. This can be done with the QGIS Processing framework.
    It provides access to hundreds of geoprocessing tools (from the simplest to the
    most sophisticated).
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 在学习时，逐步执行分析操作是好的，但如果您有大量数据且时间有限需要提供答案，那么您应该提高您分析的性能。这可以通过QGIS处理框架实现。它提供了访问数百个地理处理工具（从最简单的到最复杂的）。
- en: In the next chapter, we will introduce QGIS Processing, and you will learn how
    to automate spatial analysis routines by creating your own chains of instruments
    (models).
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将介绍QGIS处理，您将学习如何通过创建自己的仪器链（模型）来自动化空间分析流程。
