- en: Loading Data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 加载数据
- en: The next two chapters are all about using data in QGIS. In [Chapter 3](0e2ba9ae-3346-4444-b28a-389d22737646.xhtml),
    *Creating Data*, we will look at how we build and edit GIS data. In this chapter,
    we will start by loading existing data. QGIS supports many GIS data formats. It
    makes use of the OGR library for vector data and the GDAL library for raster data.
    By default, QGIS uses the GeoPackage format. As such, we will make this the default
    format for this book.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的两章都是关于在QGIS中使用数据的。在第3章[创建数据](0e2ba9ae-3346-4444-b28a-389d22737646.xhtml)中，我们将探讨如何构建和编辑GIS数据。在本章中，我们将从加载现有数据开始。QGIS支持许多GIS数据格式。它使用OGR库处理矢量数据，使用GDAL库处理栅格数据。默认情况下，QGIS使用GeoPackage格式。因此，我们将将其作为本书的默认格式。
- en: 'These are the topics that will be covered in this chapter:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Vector, raster, and other data types
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 矢量、栅格和其他数据类型
- en: GeoPackage
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GeoPackage
- en: Loading data
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 加载数据
- en: Projections
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 投影
- en: Creating and saving a project
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建和保存项目
- en: GIS data
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: GIS数据
- en: What do I mean by GIS data? By vector data, I mean points, lines, and polygons.
    The most common file format is a Shapefile (multiple files make up a Shapefile).
    By raster data, I mean (georeferenced) bitmaps. The most common file format is
    GeoTIFF.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 我所说的GIS数据是什么意思？通过矢量数据，我指的是点、线和多边形。最常见的文件格式是Shapefile（多个文件组成一个Shapefile）。通过栅格数据，我指的是（地理参考的）位图。最常见的文件格式是GeoTIFF。
- en: Download the QGIS sample dataset from [https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/qgis_sample_data.zip](https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/qgis_sample_data.zip).
    Extract it to a working directory on your computer[.](https://qgis.org/downloads/data/)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 从[https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/qgis_sample_data.zip](https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/qgis_sample_data.zip)下载QGIS样本数据集。将其提取到您计算机上的工作目录中[.](https://qgis.org/downloads/data/)
- en: 'In QGIS, you should now be able to see this data in the Browser panel, as shown
    in the following screenshot:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在QGIS中，您现在应该能够在浏览器面板中看到这些数据，如下面的屏幕截图所示：
- en: '![](img/8f538a9b-88d9-45ca-8535-b1a0fd648823.png)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/8f538a9b-88d9-45ca-8535-b1a0fd648823.png)'
- en: Browser panel
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览器面板
- en: Loading data
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 加载数据
- en: 'Loading data into QGIS can be done in several ways. Three of the most common
    ways are as follows:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在QGIS中加载数据可以通过多种方式完成。以下三种最常见的方式如下：
- en: You can drag data directly from a folder (Windows OS) straight into the map
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以直接从文件夹（Windows操作系统）中将数据拖动到地图中
- en: You can drag data from the Browser panel into the map
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以将数据从浏览器面板直接拖动到地图中
- en: You can click Layer | Add Layer and choose what type of layer to add to the
    map
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以点击“图层”|“添加图层”，然后选择要添加到地图中的图层类型
- en: This way opens Data Source Manager
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以这种方式打开数据源管理器
- en: 'In the following screenshot, we are choosing to load Add Vector Layer, which
    can also be done using the *Ctrl* + *Sh**ift* + *V* shortcut:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的屏幕截图中，我们选择加载添加矢量图层，这也可以通过*Ctrl* + *Shift* + *V* 快捷键完成：
- en: '![](img/514ed447-b922-4570-9d4f-1fcc4b80e771.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/514ed447-b922-4570-9d4f-1fcc4b80e771.png)'
- en: Loading data
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 加载数据
- en: 'This screenshot gives you an idea of all the different data types that QGIS
    can consume. We will not be covering all these formats; we mention it to highlight
    the data capabilities of QGIS only. By adding data this way, you will be opening
    Data Source Manager, as shown in the following screenshot:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 这张屏幕截图展示了QGIS可以消费的所有不同数据类型。我们不会涵盖所有这些格式；我们提到它只是为了突出QGIS的数据能力。通过这种方式添加数据，您将打开数据源管理器，如下面的屏幕截图所示：
- en: '![](img/6606f033-79d0-4a51-8bf9-365447f4dc00.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6606f033-79d0-4a51-8bf9-365447f4dc00.png)'
- en: The QGIS Data Source Manager
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: QGIS数据源管理器
- en: 'Data Source Manager is a really nice way of adding data to your map. You can
    add files one by one, add multiple files, or add different file types at the same
    time. To use an analogy, Data Source Manager is very much like a data menu: just
    select the data you want.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 数据源管理器是向您的地图添加数据的一种非常不错的方式。您可以逐个添加文件，添加多个文件，或者同时添加不同类型的文件。打个比方，数据源管理器非常像是一个数据菜单：只需选择您想要的数据。
- en: 'From the QGIS sample data downloaded earlier, load `airport.shp` from the `shapefiles`
    folder and the `SR_50M_alaska_nad.tif` file from the `raster` folder. These should
    load into the map and appear as follows:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 从之前下载的QGIS样本数据中，从`shapefiles`文件夹中加载`airport.shp`文件，从`raster`文件夹中加载`SR_50M_alaska_nad.tif`文件。这些数据应该加载到地图中，并显示如下：
- en: '![](img/05b58db2-99db-4584-a352-aa52aaab0f9f.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/05b58db2-99db-4584-a352-aa52aaab0f9f.png)'
- en: The overview of QGIS with data loaded
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 加载数据后的QGIS概览
- en: 'Right-click on `SR_50M_alaska_nad` and select Zoom to Layer to zoom to the
    layer extent. This is shown in the following screenshot:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 右键单击 `SR_50M_alaska_nad` 并选择缩放到图层以缩放到图层范围。这显示在以下截图中：
- en: '![](img/60e32648-fcb2-4b6a-880e-22a9cafea912.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/60e32648-fcb2-4b6a-880e-22a9cafea912.png)'
- en: Zoom to Layer
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 缩放到图层
- en: Select Project | New and don't save changes to clear the project and open a
    new one.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 选择项目 | 新建，不保存更改以清除项目并打开一个新的项目。
- en: GeoPackage
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: GeoPackage
- en: 'I have loaded all the Shapefiles in the `shapefiles` folder to a GeoPackage
    layer. You can download this layer from here: [https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip](https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip).'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我已将 `shapefiles` 文件夹中的所有 Shapefiles 加载到 GeoPackage 图层中。您可以从这里下载此图层：[https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip](https://github.com/PacktPublishing/QGIS-Quick-Start-Guide/blob/master/Alaska_GeoPackage.zip)。
- en: 'Expand `GeoPackage` in the Browser panel, as shown in the following screenshot.
    In [Chapter 3](0e2ba9ae-3346-4444-b28a-389d22737646.xhtml), *Creating Data*, we
    will look at how to add a layer to this package. For now, select the `Airports`
    layer and drag it into your map as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在浏览器面板中展开 `GeoPackage`，如下截图所示。在[第3章](0e2ba9ae-3346-4444-b28a-389d22737646.xhtml)
    “创建数据”中，我们将探讨如何向此包中添加图层。现在，选择 `Airports` 图层并将其拖动到地图中，如下所示：
- en: '![](img/819ec575-0267-41ea-a442-0a642210c8e5.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/819ec575-0267-41ea-a442-0a642210c8e5.png)'
- en: GeoPackage in the Browser panel
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 浏览器面板中的 GeoPackage
- en: Experiment by dragging in more layers and zooming to the layer extent. This
    data looks no different to the Shapefiles we loaded previously. If you look at
    the file in your file manager (Windows Explorer, for example), instead of several
    Shapefiles and the several files associated to a Shapefile, we have one file.
    This makes the GeoPackage format (`.gpkg`) ideal for sharing and managing project
    data. The GeoPackage format has no file size limitations and is platform-independent,
    unlike a Shapefile.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 通过拖动更多图层并缩放到图层范围进行实验。这些数据看起来与我们之前加载的 Shapefiles 没有区别。如果你在文件管理器（例如 Windows Explorer）中查看该文件，而不是几个
    Shapefiles 和与 Shapefile 相关的几个文件，我们只有一个文件。这使得 GeoPackage 格式（`.gpkg`）非常适合共享和管理项目数据。GeoPackage
    格式没有文件大小限制，且平台无关，与 Shapefile 不同。
- en: Interacting with the data
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与数据交互
- en: 'In this section, we will use Map Navigation and Attributes Toolbar. Create
    a new project (Project | New) and load the following data from the GeoPackage
    into the QGIS project:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将使用地图导航和属性工具栏。创建一个新的项目（项目 | 新建）并将以下数据从 GeoPackage 加载到 QGIS 项目中：
- en: '`Airports`'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Airports`'
- en: '`majrivers`'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`majrivers`'
- en: '`trees`'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`trees`'
- en: 'Load `SR_50M_alaska_nad.tif` from the `raster` folder. Make sure the layers
    are ordered in this way. Zoom to the extent of the `Airports` layer. Your screen
    should look similar to the following screenshot:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 从 `raster` 文件夹加载 `SR_50M_alaska_nad.tif`。确保图层按此顺序排列。缩放到 `Airports` 图层的范围。您的屏幕应类似于以下截图：
- en: '![](img/89eca300-0a98-4a60-8191-0c25840746d0.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/89eca300-0a98-4a60-8191-0c25840746d0.png)'
- en: The overview of QGIS with layers added
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 添加图层后的 QGIS 概览
- en: Identifying data
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 识别数据
- en: 'From Attributes Toolbar, click on the blue i button and then click on a point
    from the `Airports` layer in the map. This will display the Feature attributes
    in a new panel; again, like all panels, you can move it around and resize as needed.
    The clicked point will be highlighted in the map and its attributes displayed,
    similar to the following screenshot:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 从属性工具栏中，点击蓝色 i 按钮，然后在地图中的 `Airports` 图层上点击一个点。这将在新面板中显示要素属性；同样，像所有面板一样，您可以移动它并按需调整大小。点击的点将在地图中突出显示，其属性将显示，类似于以下截图：
- en: '![](img/0b1d04d8-0283-4f3d-b2cb-80439ac8d7a1.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/0b1d04d8-0283-4f3d-b2cb-80439ac8d7a1.png)'
- en: Identify tool
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 识别工具
- en: 'Investigate the identify tool with the other layers. Note that the Mode shown
    in the identify results is currently set to Current layer. That means that you
    only see the results from the layer that is currently active. There are four options
    in Mode:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 使用其他图层调查识别工具。请注意，在识别结果中显示的模式当前设置为当前图层。这意味着您只能看到当前活动图层的结果。模式中有四个选项：
- en: Current layer
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当前图层
- en: Top down, stop at first
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自顶向下，首次停止
- en: Top down
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自顶向下
- en: Selection
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择
- en: 'Set Mode to Selection and click another location on the map. This time, you
    will be presented with identify options for all the layers (relating to the clicked
    location). This way, you get to choose the feature you wish to query. An example
    of this is shown in the following screenshot:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 将模式设置为选择并点击地图上的另一个位置。这次，您将看到所有图层（与点击位置相关）的识别选项。这样，您可以选择要查询的要素。以下是一个示例截图：
- en: '![](img/2858276c-209e-43e8-b0a5-dea7c2118eab.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/2858276c-209e-43e8-b0a5-dea7c2118eab.png)'
- en: Identifying all layers
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 识别所有图层
- en: Close the identify results panel. Next, we will look at selecting data.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 关闭识别结果面板。接下来，我们将查看如何选择数据。
- en: Data selection
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据选择
- en: 'There are several ways to select data in QGIS. In this chapter, we will look
    at the drawing selection options in Attributes Toolbar that we highlighted in
    [Chapter 1](44524991-c928-4616-a928-9fee41ef2270.xhtml), *Getting Started with
    QGIS 3*. Let''s select some data from `Airports`. Click on the `Airports` layer
    in the Layers panel (making sure it is highlighted) and select the Select Features
    by area or single click button. Note that there are other ways of drawing a selection
    from the drop-down button, including selecting by polygon, freehand, and radius.
    In this example, we will use the default select features option, as shown in the
    following screenshot:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在QGIS中，选择数据有多种方法。在本章中，我们将查看属性工具栏中的绘图选择选项，这是我们已在[第1章](44524991-c928-4616-a928-9fee41ef2270.xhtml)“QGIS
    3入门”中强调的内容。让我们从“机场”中选择一些数据。在图层面板中点击“机场”图层（确保它被突出显示）并选择“按区域或单击选择要素”按钮。请注意，还有其他从下拉按钮绘制选择的方法，包括按多边形、自由手绘和半径选择。在本例中，我们将使用默认的要素选择选项，如下面的截图所示：
- en: '![](img/438a3cd8-c4fa-48ff-af54-07e4e6ddab1c.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/438a3cd8-c4fa-48ff-af54-07e4e6ddab1c.png)'
- en: Select features by area or with a single click
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 按区域或单击选择要素
- en: 'Click and drag a box around several Airports'' points. The selected points
    will change color. Press *F6* or click on the open table button in the toolbar.
    The attribute table for the `Airports` layer will appear. In the lower-left corner,
    set the query to Show Selected Features. This is shown in the following screenshot:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 点击并拖动一个框围绕几个机场的点。选中的点将改变颜色。按*F6*或点击工具栏中的打开表格按钮。将出现“机场”图层的属性表。在左下角，将查询设置为“显示所选要素”。这如下面的截图所示：
- en: '![](img/a2fdff4d-5b46-44a3-a2e5-cd2f284a9c98.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/a2fdff4d-5b46-44a3-a2e5-cd2f284a9c98.png)'
- en: Attribute table for Airports layer
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 机场图层属性表
- en: 'In the attribute table, click on the Invert selection (Ctrl+R) button (yellow
    right-angled triangle and clear triangle forming a square), as follows:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在属性表中，点击“反转选择”（Ctrl+R）按钮（黄色直角三角形和清除三角形形成一个正方形），如下所示：
- en: '![](img/c8e4ae54-cdd6-43d0-b65c-fced8b169f5a.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c8e4ae54-cdd6-43d0-b65c-fced8b169f5a.png)'
- en: Inverting a selection
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 反转选择
- en: 'Inverting a data selection can often be useful. For example, you might want
    to select many points, but want to exclude only a few. Using inversion allows
    you to select the few and invert the selection to select the many. Close the attribute
    table and you will see the newly selected airports on the map. Click on Deselect
    Features from All Layers from Attributes Toolbar to clear the selection. This
    is shown in the following screenshot:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 反转数据选择通常很有用。例如，您可能想选择许多点，但只想排除少数几个。使用反转功能，您可以选择少数几个并反转选择以选择多数。关闭属性表，您将在地图上看到新选择的机场。从属性工具栏点击“从所有图层取消选择要素”以清除选择。这如下面的截图所示：
- en: '![](img/6e69e3df-2ef8-453c-b116-63f6515e1b88.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6e69e3df-2ef8-453c-b116-63f6515e1b88.png)'
- en: Deselecting features from all layers
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 从所有图层取消选择要素
- en: 'Finally, let''s select a feature in the `Airports` layer by an attribute value.
    Click on the Select Features by Value button in Attributes Toolbar. This is shown
    in the following screenshot:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，让我们通过属性值在“机场”图层中选择一个要素。在属性工具栏中点击“按值选择要素”按钮。这如下面的截图所示：
- en: '![](img/8992ab4c-a4f7-4981-9e55-4ecadcf85e6b.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/8992ab4c-a4f7-4981-9e55-4ecadcf85e6b.png)'
- en: Selecting features by value
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 按值选择要素
- en: A selection dialog box will appear. Set the ID field to equal `1`. Click on
    the Select features button and the selected airport will be highlighted in the
    map. You can click on Flash features to flash the selected airport and also click
    on Zoom to features to zoom into the selected airport.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 将出现一个选择对话框。将ID字段设置为等于`1`。点击“选择要素”按钮，选中的机场将在地图上突出显示。您可以点击“闪烁要素”以闪烁选中的机场，也可以点击“缩放到要素”以放大到选中的机场。
- en: 'The Select Features by Value dialog box is shown in the following screenshot:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 按值选择要素的对话框如下截图所示：
- en: '![](img/b8f3f6e6-5c34-4310-89a3-ef2723d75eb6.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b8f3f6e6-5c34-4310-89a3-ef2723d75eb6.png)'
- en: Select Features by Value dialog box
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 通过值选择功能对话框
- en: Click on the Close button and clear the selection (using the Clear Selection
    button shown previously). Note here that Select Features by Expression is also
    available. We will look at expressions in more detail later this book.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 点击关闭按钮并清除选择（使用之前显示的清除选择按钮）。注意，这里也可以使用通过表达式选择功能。我们将在本书稍后更详细地探讨表达式。
- en: Measuring distance and area
  id: totrans-82
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测量距离和面积
- en: A common function of a GIS is to quickly calculate distance and area. In [Chapter
    3](0e2ba9ae-3346-4444-b28a-389d22737646.xhtml), *Creating Data*, we will show
    how to write the area of a feature to an attribute table. In this chapter, though,
    we will look at the measuring options available from Attributes Toolbar.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: GIS的一个常见功能是快速计算距离和面积。在[第3章](0e2ba9ae-3346-4444-b28a-389d22737646.xhtml)，*创建数据*中，我们将展示如何将特征面积写入属性表。然而，在本章中，我们将探讨从属性工具栏中可用的测量选项。
- en: The measure tool does not require a layer to be selected in the layer panel
    in order for it to work. This means that it is independent of layers. The measure
    tool can measure length, area, or angle, and you can use the drop-down button
    next to the tool to select the required option. In this example, let's measure
    length. Select the Measure Line option and then left-click on the map to begin
    the measurement. After doing this, left-click again to measure the segment. Continue
    to left-click to measure segments of the line or right-click on the end point
    to finish measuring.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 测量工具不需要在图层面板中选择图层即可工作。这意味着它是独立的。测量工具可以测量长度、面积或角度，您可以使用工具旁边的下拉按钮选择所需的选项。在这个例子中，让我们测量长度。选择测量线选项，然后在地图上左键单击开始测量。完成后，再次左键单击以测量线段。继续左键单击以测量线段，或右键单击终点以完成测量。
- en: 'The following screenshot shows the distance in meters between airports:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了机场之间的距离（以米为单位）：
- en: '![](img/6124e047-87cf-4406-963c-33abaeb59dc4.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6124e047-87cf-4406-963c-33abaeb59dc4.png)'
- en: The Measure tool in QGIS
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: QGIS中的测量工具
- en: Change the units from meters to kilometers to show more meaningful distance
    at this scale. Try measuring area; the tool works in the same way as distance.
    Measuring in any GIS depends on the projection of the map. In the next section,
    we will look at projections in QGIS.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 将单位从米转换为千米，以显示在此比例尺上更有意义的距离。尝试测量面积；工具的工作方式与测量距离相同。在任何GIS中测量都取决于地图的投影。在下一节中，我们将探讨QGIS中的投影。
- en: Projections
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 投影
- en: The default projection for QGIS (on loading the first time) has the EPSG code
    4326 (WGS 84). Unless changed, the default settings in QGIS allow the projection
    of the map to be set by the projection of the first layer loaded into the map,
    assuming that the data has a projection associated to it.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: QGIS的默认投影（首次加载时）具有EPSG代码4326（WGS 84）。除非更改，否则QGIS中的默认设置允许通过加载到地图中的第一个层的投影来设置地图的投影，假设数据与投影相关联。
- en: It is beyond the scope of this book to go into details about various coordinate
    systems; if you are interested in learning more about this, then a good starting
    point is the Wikipedia entry on geographic coordinate systems at [https://en.wikipedia.org/wiki/Geographic_coordinate_system](https://en.wikipedia.org/wiki/Geographic_coordinate_system).
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 本书不涉及各种坐标系统的详细内容；如果您想了解更多关于这方面的知识，那么一个很好的起点是维基百科上关于地理坐标系统的条目[https://en.wikipedia.org/wiki/Geographic_coordinate_system](https://en.wikipedia.org/wiki/Geographic_coordinate_system)。
- en: Suffice to say that getting the projection correct in your GIS is fundamental
    to any analysis, mapping, or derivation of knowledge from your data. The world
    is not flat and projecting your data is the process of taking the part of the
    Earth's surface you are working on and mathematically shrinking and distorting
    it so it fits on a plane. You can move from one projection system to another by
    transforming your data.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: suffice to say that getting the projection correct in your GIS is fundamental
    to any analysis, mapping, or derivation of knowledge from your data. The world
    is not flat and projecting your data is the process of taking the part of the
    Earth's surface you are working on and mathematically shrinking and distorting
    it so it fits on a plane. You can move from one projection system to another by
    transforming your data.
- en: Using the `Airports` layer as an example, the projection of the layer is EPSG
    2964 and on loading the data, your QGIS project will be set to this projection.
    If you add data in another projection, then QGIS will make reprojections of your
    data on the fly. This is very powerful and useful, but be careful that you know
    what projection system all your data is in.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 以`Airports`图层为例，图层的投影是EPSG 2964，在加载数据时，你的QGIS项目将设置为这个投影。如果你添加了另一个投影的数据，那么QGIS将实时对你的数据进行重投影。这非常强大且有用，但请注意，你了解所有数据所在的投影系统。
- en: 'To illustrate projections, consider changing the projection from EPSG 2964
    to EPSG 4326 with the internal reprojection parameters. Here is our data in the
    EPSG 2964 projection:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 为了说明投影，考虑将投影从EPSG 2964更改为EPSG 4326，使用内部重投影参数。以下是我们的数据，在EPSG 2964投影下：
- en: '![](img/3fe070c7-d80b-459c-b628-5b2259456444.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3fe070c7-d80b-459c-b628-5b2259456444.png)'
- en: The overview of QGIS project in EPSG 2964
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: EPSG 2964下QGIS项目的概述
- en: 'In the Status Bar, in the lower-right-hand corner you will see EPSG 2964\.
    Click on this and change the projection to WGS 84\. Search for `4326` in the Filter
    box as follows:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在状态栏的右下角，你会看到EPSG 2964\. 点击它并将投影更改为WGS 84\. 在过滤器框中搜索`4326`，如下所示：
- en: '![](img/7710959c-b19a-4afa-a2ff-43d0837da9b4.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7710959c-b19a-4afa-a2ff-43d0837da9b4.png)'
- en: Overview of project projection properties
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 项目投影属性概述
- en: 'Click on OK and return to your map. You will see the data represented very
    differently to before. This is shown in the following screenshot:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 点击确定并返回到你的地图。你会看到数据与之前表示得非常不同。以下屏幕截图中显示了此操作：
- en: '![](img/77d82407-e9b3-4d01-abec-bb3bbd7fb5a2.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![](img/77d82407-e9b3-4d01-abec-bb3bbd7fb5a2.png)'
- en: The overview of reprojected data
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 重投影数据概述
- en: Reset the projection by repeating these steps and selecting EPSG 2964.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 通过重复这些步骤并选择EPSG 2964来重置投影。
- en: Saving data
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 保存数据
- en: In later chapters, when we start creating data, we will be working in one projection
    system. However, it is worth noting in this section that both vector data (points,
    line, and polygons) and raster data (bitmaps) can be saved in different projections.
    Right-click on the `Airports` layer and select Export | Save Features As. In the
    dialog box, you will see an option for CRS; this is where you can change the projection
    system.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在后面的章节中，当我们开始创建数据时，我们将在一个投影系统中工作。然而，在本节中值得注意，矢量数据（点、线和多边形）和栅格数据（位图）都可以保存为不同的投影。在`Airports`图层上右键单击并选择导出
    | 保存要素为。在对话框中，你会看到一个选项为CRS；这就是你可以更改投影系统的地方。
- en: 'This dialog box is shown in the following screenshot:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 此对话框在以下屏幕截图中显示：
- en: '![](img/d2fbe5ce-105e-4a0b-a454-848c0c3f6c94.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d2fbe5ce-105e-4a0b-a454-848c0c3f6c94.png)'
- en: Saving the layer
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 保存图层
- en: 'For a raster, select Raster | Projections | Warp (Reproject) from the menu
    bar. This is shown in the following screenshot:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 对于栅格，从菜单栏中选择栅格 | 投影 | Warp（重投影）。以下屏幕截图中显示了此操作：
- en: '![](img/6814ef30-72ed-41c5-a988-afe8adba8d56.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6814ef30-72ed-41c5-a988-afe8adba8d56.png)'
- en: Reprojecting rasters in QGIS
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在QGIS中重投影栅格
- en: 'The `Warp` command uses `gdalwarp` to reproject raster data. An example of
    reprojecting the `SR_50M_alaska_nad` raster to EPSG:4326 is shown in the following
    screenshot:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '`Warp`命令使用`gdalwarp`重投影栅格数据。以下屏幕截图中显示了将`SR_50M_alaska_nad`栅格重投影到EPSG:4326的示例：'
- en: '![](img/705c74d4-7ed2-49f4-9cf9-e43eb3e1356a.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](img/705c74d4-7ed2-49f4-9cf9-e43eb3e1356a.png)'
- en: Reproject raster tool
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 重投影栅格工具
- en: If you scroll down to the bottom of this dialog box, you will see the corresponding
    `gdalwarp` command. This could be pasted into the OSGeo4W shell (if you installed
    QGIS via the OSGeo4W installer) and run on the command line (like so many QGIS
    functions).
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你滚动到对话框的底部，你会看到相应的`gdalwarp`命令。这可以粘贴到OSGeo4W shell中（如果你通过OSGeo4W安装程序安装了QGIS）并在命令行上运行（就像许多QGIS功能一样）。
- en: Saving your project
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 保存你的项目
- en: 'We can save a QGIS project so we can return to it in the future. The default
    format is `.qgz`. To save your project, go to Select Project | Save. I have called
    mine `ch2.qgz`; it is shown in Windows Explorer as follows:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将QGIS项目保存下来，以便将来返回。默认格式是`.qgz`。要保存项目，请转到选择项目 | 保存。我将其命名为`ch2.qgz`；在Windows资源管理器中显示如下：
- en: '![](img/6d08fd74-4f95-417b-90b8-cab01f3d9a01.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6d08fd74-4f95-417b-90b8-cab01f3d9a01.png)'
- en: Saving the project as a .qgz file
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 将项目保存为.qgz文件
- en: Summary
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: We have looked at geographic/spatial data in QGIS. We talked about vector and
    raster formats. This chapter has introduced the default file new format, GeoPackage.
    In the next chapter, we will be creating data in a GeoPackage. QGIS still fully
    supports Shapefiles and GeoTIFFs, and they are both still widely used throughout
    many sectors and the GIS community. In [Chapter 7](bab7139e-9f38-4dff-b1eb-c5056be9c960.xhtml),
    *Expanding QGIS 3*, we will look at exporting and loading text files into and
    out of QGIS.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经探讨了 QGIS 中的地理/空间数据。我们讨论了矢量格式和栅格格式。本章介绍了默认文件新格式，GeoPackage。在下一章中，我们将创建 GeoPackage
    中的数据。QGIS 仍然完全支持 Shapefiles 和 GeoTIFFs，它们在许多行业和 GIS 社区中仍然被广泛使用。在[第 7 章](bab7139e-9f38-4dff-b1eb-c5056be9c960.xhtml)，*扩展
    QGIS 3*中，我们将探讨将文本文件导入和导出到 QGIS。
- en: We have explored the options for exploring data, via Attributes Toolbar. We
    looked at querying, selecting, and measuring data. There is so much more we can
    do, and in the next chapter we will look at building data in QGIS.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经探索了通过属性工具栏来探索数据的方法。我们查看过查询、选择和测量数据。我们还能做很多事情，在下一章中，我们将探讨在 QGIS 中构建数据。
