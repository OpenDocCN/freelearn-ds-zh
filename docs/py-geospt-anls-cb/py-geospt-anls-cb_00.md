# 前言

地理空间分析并不特殊；与其他类型的分析（如金融市场分析）相比，它只是有所不同。我们处理几何对象，如线、点和多边形，并将这些几何形状与属性（如业务数据）连接起来。我们提出“在哪里”的问题，例如“最近的酒吧在哪里？”“我的所有客户都位于哪里？”“我的竞争对手位于哪里？”其他位置问题包括，“这栋新建筑会投射到公园上吗？”“去学校的最短路线是什么？”“我孩子去学校最安全的路线是什么？”“这栋建筑会阻挡我观看山景的视线吗？”“在哪里建造我的下一家商店是最优的位置？”确定消防车从其站点出发 5 分钟、10 分钟或 20 分钟内可以到达的区域，等等。

所有这些问题共同的一点是，您需要知道某些对象的位置才能回答它们。没有*空间*组件，您无法回答这些问题，这正是地理空间分析的全部内容。

地理空间特征相互叠加，模式和趋势很容易识别。这种看到模式或趋势的能力是地理空间分析最简单的形式。

在本书中，提供了简单和复杂的代码配方作为小型工作模型，这些模型可以轻松集成或扩展到更大的项目或模型中。

分析是 GIS 中有趣的部分，涉及可视化关系、识别趋势，以及看到在电子表格中不可见的模式。

Python 编程语言简洁、清晰、简洁，非常适合初学者。它还拥有高级功能，帮助专业人士快速编码解决复杂问题的解决方案。Python 使专家或初学者处理地理空间数据时的可视化变得快速且简单。就这么简单。

# 本书涵盖的内容

第一章，*设置您的地理空间 Python 环境*，探讨了如何一次性设置您的计算机以处理所有软件需求，例如 pyproj、NumPy 和 Shapely。本章满足了您在 Windows 和 Linux 上启用空间分析或地理处理的全部开发软件需求。

第二章，*处理投影*，解释了如何处理投影或未投影的空间数据。您可以学习和发现如何将数据转换为正确的投影，以便为分析做准备。

第三章，*将空间数据从一个格式转换为另一个格式*，解释了地理空间数据以许多不同的格式出现，以及从一种格式到另一种格式的消息数据是日常工作的例行公事。在本章中，您将了解最常见的数据管理任务。

第四章, *使用 PostGIS*，展示了我们的大多数地理空间数据是如何存储在空间数据库中的，以及如何使用 Python 访问、操作这些数据，这正是本章的主题。

第五章, *矢量分析*，介绍了一种非常常见的地理空间数据格式，即矢量数据格式。为了在矢量数据上执行分析功能，我们将探索通过捕捉、裁剪、切割和叠加矢量数据集来创建新数据的模式，然后确定 3D 地面距离和总高程增益。

第六章, *叠加分析*，解释了如何通过叠加两组数据来创建新数据，从而结合空间数据。

第七章, *栅格分析*，展示了如何创建高程剖面和快速合并图像的方法，以在你的数据上执行栅格分析功能。

第八章, *网络路由分析*，展示了寻找最近的事物是一个常见的地理空间分析功能。本章将揭示如何解决室内网络类型问题，并演示一些在建筑物内进行寻路的一些常见用例。

第九章, *拓扑检查和数据验证*，涵盖了数据质量和连接。在本章中，你将学习如何使用自定义拓扑函数验证你的数据以查找错误。

第十章, *可视化你的分析*，解释了地理空间数据天生具有可视化特性，你将了解如何在网络地图和 3D 网络上展示你的分析。

第十一章, *使用 GeoDjango 进行网络分析*，基于第八章, *网络路由分析*，其中你将创建一个室内路由网络应用程序。你将能够轻松地将一个人从 A 点路由到建筑内的 B 点，使用真实的 3D 网络数据。这些关键特性将通过汇集你迄今为止所学食谱的所有部分来展示。

附录 A, *其他地理空间 Python 库*，解释了 Python 如何与地理空间库蓬勃发展，你还将找到许多用于数据分析的流行库列表，无论它们是否具有空间性。这可能会激发你的兴趣。

附录 B, *地图图标库*，快速概述了在 Python 地理空间工作环境中扮演特殊角色的图标库。

# 你需要这本书的内容

要使用这本书，您应该熟悉编程语言 Python 以及编程中涉及的概念。这意味着如果您还没有安装，您应该能够在您的机器（Windows、Linux 或 OS X）上安装 Python 2.7.x。与 GIS（地理信息系统）相关的概念肯定有帮助，但不是必需的。这本书的入门书籍可以是*使用 Python 进行地理空间分析入门，作者 Joel Lawhead*或*Python 地理空间开发，作者 Eric Westra*，均由*Packt Publishing*出版。

# 适合这本书的读者

如果你是学生、教师、程序员、地理空间或 IT 管理员、GIS 分析师、研究人员或科学家，想要学习空间分析，那么这本书适合你。任何试图回答简单到复杂空间分析问题的人，都将通过实际数据帮助，了解 Python 的强大功能。你们中的一些人可能是初学者，但大多数人可能已经对地理空间分析和编程有了一定的了解。

# 部分

在这本书中，您会发现一些经常出现的标题（准备工作、如何操作...、工作原理...、更多内容...和相关信息）。

为了清楚地说明如何完成食谱，我们使用以下章节：

## 准备工作

本节将向您介绍在食谱中可以期待的内容，并描述如何设置任何软件或食谱所需的任何初步设置。

## 如何操作…

本节包含遵循食谱所需的步骤。

## 工作原理…

本节通常包含对前一个章节发生情况的详细解释。

## 更多内容…

本节包含有关食谱的附加信息，以便使读者对食谱有更深入的了解。

## 相关内容

本节提供了指向其他有用信息的链接，这些信息对食谱很有帮助。

# 惯例

在这本书中，您将找到多种文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词显示如下：“如果由于某种原因`workon`没有启动您的虚拟环境，您可以通过从命令行执行`source /home/mdiener/.venvs/pygeoan_cb/bin/activate`来简单地启动它。”

代码块按照以下方式设置：

```py
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from osgeo import ogr
shp_driver = ogr.GetDriverByName('ESRI Shapefile')
shp_dataset = shp_driver.Open(r'../geodata/schools.shp')
shp_layer = shp_dataset.GetLayer()
shp_srs = shp_layer.GetSpatialRef()
print shp_srs
```

任何命令行输入或输出都按照以下方式编写：

```py
$ sudo apt-get install python-setuptools python-pip

```

**新术语**和**重要词汇**以粗体显示。您在屏幕上看到的单词，例如在菜单或对话框中，在文本中显示如下：“选择**路由到**：并输入`2`以查看二楼选项。”

### 注意

警告或重要注意事项以如下框的形式出现。

### 小贴士

技巧和窍门如下所示。

# 读者反馈

我们欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正从中受益的标题非常重要。

要发送一般反馈，只需将电子邮件发送到`<feedback@packtpub.com>`，并在邮件主题中提及书籍标题。

如果您在某个主题上具有专业知识，并且您对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 书籍的骄傲拥有者，我们有众多事项可以帮助您从您的购买中获得最大收益。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)的账户下载您购买的所有 Packt 书籍的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

## 下载本书的彩色图像

我们还为您提供了一个包含本书中使用的截图/图表彩色图像的 PDF 文件。这些彩色图像将帮助您更好地理解输出的变化。您可以从[`www.packtpub.com/sites/default/files/downloads/5079OS_ColorImage.pdf`](https://www.packtpub.com/sites/default/files/downloads/5079OS_ColorImage.pdf)下载此文件。

## 勘误

尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以避免其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/support`](http://www.packtpub.com/support)，选择您的书籍，点击**勘误提交表单**链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站，或添加到该标题的勘误部分中。

## 盗版

互联网上版权材料的盗版是一个跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现我们作品的任何非法副本，无论形式如何，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。

请通过`<copyright@packtpub.com>`与我们联系，并提供疑似盗版材料的链接。

我们感谢您在保护我们的作者以及为我们提供有价值内容的能力方面的帮助。

## 问答

如果您在本书的任何方面遇到问题，可以通过`<questions@packtpub.com>`联系我们，我们将尽力解决。
