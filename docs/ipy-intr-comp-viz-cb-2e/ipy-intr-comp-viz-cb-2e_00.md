# 前言

我们正被来自科学研究、工程学、经济学、政治学、新闻学、商业等多个领域的数字数据洪流所淹没。因此，分析、可视化和利用数据成为了越来越多人的职业。编程、数值计算、数学、统计学和数据挖掘等量化技能构成了数据科学的核心，并在看似无尽的各个领域中愈加受到重视。

我之前的书籍，《*Learning IPython for Interactive Computing and Data Visualization*》，*Packt Publishing*，2013 年出版，是一本面向初学者的数据科学与 Python 数值计算入门书籍。这种广泛使用的编程语言也是这些学科最受欢迎的平台之一。

本书继续了这一旅程，展示了 100 多个高级数据科学和数学建模的案例。这些案例不仅涵盖了编程和计算主题，如交互式计算、数值计算、高性能计算、并行计算和交互式可视化，还包括数据分析主题，如统计学、数据挖掘、机器学习、信号处理等多个领域。

本书中的所有代码均在 IPython 笔记本中编写。IPython 是 Python 数据分析平台的核心。最初为了增强默认的 Python 控制台，IPython 现在以其广受好评的笔记本而闻名。这个基于 Web 的交互式计算环境将代码、丰富的文本、图片、数学方程式和图表整合成一个文档。它是进行 Python 数据分析和高性能数值计算的理想入口。

# 本书是什么

本书包含超过一百个专注的实用案例，回答了在 IPython 上进行数值计算和数据分析的具体问题，涉及内容包括：

+   如何使用 pandas、PyMC 和 SciPy 探索公共数据集

+   如何在 IPython 笔记本中创建交互式图表、小部件和图形用户界面

+   如何创建具有自定义魔法命令的可配置 IPython 扩展

+   如何在 IPython 中并行分配异步任务

+   如何使用 OpenMP、MPI、Numba、Cython、OpenCL、CUDA 和 Julia 编程语言加速代码

+   如何从数据集中估计概率密度

+   如何在笔记本中开始使用 R 统计编程语言

+   如何使用 scikit-learn 训练分类器或回归器

+   如何在高维数据集中找到有趣的投影

+   如何在图像中检测人脸

+   如何模拟反应-扩散系统

+   如何在路网中计算行程

本书的选择是介绍各种不同的主题，而不是深入探讨少数几种方法。目标是让你了解 Python 在数据科学领域令人难以置信的丰富能力。所有方法都在多种真实世界的例子上应用。

本书的每个配方不仅演示了如何应用某个方法，还解释了它如何以及为什么有效。理解这些方法背后的数学概念和思想，而不仅仅是盲目应用它们，是非常重要的。

此外，每个配方都附有许多参考资料，供有兴趣的读者深入了解。由于在线参考资料经常变动，它们将会在本书的网站上保持更新（[`ipython-books.github.io`](http://ipython-books.github.io)）。

# 本书涵盖的内容

本书分为两部分：

第一部分（第 1 到 6 章）涵盖了交互式数值计算、高性能计算和数据可视化中的高级方法。

第二部分（第 7 到 15 章）介绍了数据科学和数学建模中的标准方法。所有这些方法都应用于真实世界的数据。

## 第一部分 – 高性能交互式计算

第一章，*使用 IPython 进行交互式计算简介*，简要而深刻地介绍了如何使用 IPython 进行数据分析和数值计算。它不仅涵盖了 Python、NumPy、pandas 和 matplotlib 等常用包，还涉及了 IPython 的高级主题，如笔记本中的交互式小部件、自定义魔法命令、可配置的 IPython 扩展以及新的语言内核。

第二章，*交互式计算中的最佳实践*，详细讲解了编写可重复、高质量代码的最佳实践：任务自动化、使用 Git 进行版本控制、与 IPython 的工作流、使用 nose 进行单元测试、持续集成、调试以及其他相关主题。这些主题在计算研究和数据分析中的重要性不言而喻。

第三章，*精通笔记本*，涵盖了与 IPython 笔记本相关的高级主题，特别是笔记本格式、笔记本转换和 CSS/JavaScript 定制。自 IPython 2.0 以来推出的新交互式小部件也得到了广泛的介绍。这些技术使得在笔记本中进行数据分析比以往更加互动。

第四章，*性能分析与优化*，介绍了使代码更快、更高效的方法：Python 中的 CPU 和内存性能分析，NumPy 的高级优化技术（包括大数组操作），以及使用 HDF5 文件格式和 PyTables 库进行巨型数组的内存映射。这些技术对于大数据分析至关重要。

第五章，*高性能计算*，介绍了一些使代码*更*高效的高级技术：使用 Numba 和 Cython 加速代码、通过 ctypes 将 C 库封装到 Python 中、使用 IPython、OpenMP 和 MPI 进行并行计算，以及使用 CUDA 和 OpenCL 进行图形处理单元（GPGPU）的通用计算。章节最后介绍了近年来的 Julia 语言，这种语言专为高性能数值计算而设计，并且可以在 IPython 笔记本中轻松使用。

第六章，*高级可视化*，介绍了一些在样式或编程接口方面超越 matplotlib 的数据可视化库。它还涵盖了在笔记本中使用 Bokeh、mpld3 和 D3.js 进行交互式可视化。章节最后介绍了 Vispy，一个利用图形处理单元（GPU）强大计算能力进行大数据高性能交互式可视化的库。

## 第二部分 – 数据科学与应用数学的标准方法

第七章，*统计数据分析*，介绍了获得数据洞察力的方法。它介绍了经典的频率学派和贝叶斯方法，用于假设检验、参数估计和非参数估计、模型推断等。章节中利用了 Python 的 pandas、SciPy、statsmodels 和 PyMC 等库。最后一个示例介绍了统计语言 R，可以轻松地在 IPython 笔记本中使用。

第八章，*机器学习*，讲解了从数据中学习和做出预测的方法。本章使用 scikit-learn Python 包，阐释了数据挖掘和机器学习中的基本概念，如监督学习和无监督学习、分类、回归、特征选择、特征提取、过拟合、正则化、交叉验证和网格搜索。本章涉及的算法包括逻辑回归、朴素贝叶斯、K 近邻、支持向量机、随机森林等。这些方法被应用到不同类型的数据集：数值数据、图像和文本。

第九章，*数值优化*，主要讲解如何最小化或最大化数学函数。这个话题在数据科学中无处不在，尤其是在统计学、机器学习和信号处理领域。本章通过 SciPy 展示了一些根求解、最小化和曲线拟合的常用方法。

第十章，*信号处理*，讲解如何从复杂且嘈杂的数据中提取相关信息。在运行统计和数据挖掘算法之前，有时需要先进行这些步骤。本章介绍了标准的信号处理方法，如傅里叶变换和数字滤波器。

第十一章，*图像与音频处理*，涵盖了图像和声音的信号处理方法。它介绍了图像过滤、分割、计算机视觉和人脸检测，使用 scikit-image 和 OpenCV。还介绍了音频处理和合成的方法。

第十二章，*确定性动力学系统*，描述了特定数据类型背后的动态过程。它演示了离散时间动力学系统的模拟技术，以及常微分方程和偏微分方程的模拟方法。

第十三章，*随机动力学系统*，描述了特定数据类型背后的动态随机过程。它演示了离散时间马尔可夫链、点过程和随机微分方程的模拟技术。

第十四章，*图形、几何与地理信息系统*，涵盖了图形、社交网络、道路网络、地图和地理数据的分析与可视化方法。

第十五章，*符号与数值数学*，介绍了 SymPy，这是一种将符号计算引入 Python 的计算机代数系统。本章最后介绍了 Sage，这是另一种基于 Python 的计算数学系统。

# 本书所需内容

你需要了解本书前一篇的内容，*《学习 IPython 进行交互式计算与数据可视化》*：Python 编程，IPython 控制台与笔记本，使用 NumPy 进行数值计算，利用 pandas 进行基本数据分析，以及使用 matplotlib 绘图。本书涉及高级科学编程主题，你需要熟悉科学 Python 生态系统。

在第二部分，你需要掌握微积分、线性代数和概率论的基础知识。这些章节介绍了数据科学和应用数学中的不同主题（统计学、机器学习、数值优化、信号处理、动力学系统、图论等）。如果你了解基本概念，如实值函数、积分、矩阵、向量空间、概率等，你将更好地理解这些内容。

## 安装 Python

安装 Python 有多种方式。我们强烈推荐免费的 Anaconda 发行版（[`store.continuum.io/cshop/anaconda/`](http://store.continuum.io/cshop/anaconda/)）。这个 Python 发行版包含了本书中大部分将要使用的包。它还包括一个强大的打包系统，名为 conda。书籍网站提供了安装 Anaconda 和运行代码示例的所有说明。你应该学习如何安装包（`conda install packagename`）以及如何使用 conda 创建多个 Python 环境。

本书的代码是为 Python 3 编写的（更准确地说，代码已在 Python 3.4.1、Anaconda 2.0.1、Windows 8.1 64 位环境下进行测试，尽管它在 Linux 和 Mac OS X 上也可以运行），但它同样适用于 Python 2.7。我们会在需要时提到任何兼容性问题。由于 NumPy 在大多数情况下都承担了繁重的计算任务，所以这些问题在本书中很少出现。NumPy 的接口在 Python 2 和 Python 3 之间没有变化。

如果你不确定应该使用哪个 Python 版本，选择 Python 3。只有在你确实需要的情况下才选择 Python 2（例如，如果你必须使用一个不支持 Python 3 的 Python 包，或者你的部分用户群体仍然使用 Python 2）。我们在第二章《*交互式计算最佳实践*》中详细讨论了这个问题。

使用 Anaconda 时，你可以通过 conda 环境同时安装 Python 2 和 Python 3。这样你就可以轻松运行本书中需要 Python 2 的几个食谱。

## GitHub 仓库

本书配有主页和两个 GitHub 仓库：

+   主要网页：[`ipython-books.github.io`](http://ipython-books.github.io)

+   主要 GitHub 仓库，包含所有食谱的代码和参考资料：[`github.com/ipython-books/cookbook-code`](https://github.com/ipython-books/cookbook-code)

+   本书某些食谱使用的数据集：[`github.com/ipython-books/cookbook-data`](https://github.com/ipython-books/cookbook-data)

主要 GitHub 仓库是你可以找到的地方：

+   查找所有的代码示例，格式为 IPython 笔记本

+   查找所有最新的参考文献

+   查找最新的安装说明

+   通过问题跟踪器报告勘误、不准确或错误

+   通过 Pull Requests 提出修复建议

+   通过 Pull Requests 添加笔记、评论或进一步的参考资料

+   通过 Pull Requests 添加新食谱

在线参考文献列表是一个特别重要的资源。它包含了许多关于本书涵盖主题的教程、课程、书籍和视频链接。

你也可以通过我的网站（[`cyrille.rossant.net`](http://cyrille.rossant.net)）和我的 Twitter 账号（`@cyrillerossant`）跟进本书的最新动态。

# 本书适合谁阅读

本书面向学生、研究人员、教师、工程师、数据科学家、分析师、记者、经济学家以及对数据分析和数值计算感兴趣的爱好者。

对于熟悉科学 Python 生态系统的读者，会发现许多资源可以帮助他们在 IPython 中进行高性能交互式计算时提升技能。

需要为领域特定应用实现算法的读者会喜欢这本书中对数据分析和应用数学各种主题的介绍。

对于刚接触 Python 数值计算的读者，应该先从本书的前传《*Learning IPython for Interactive Computing and Data Visualization*》入手，作者是*Cyrille Rossant*，由*Packt Publishing*出版，*2013 年*。第二版计划于 2015 年发布。

# 约定

本书中包含了多种文本样式，用以区分不同类型的信息。以下是这些样式的示例及其含义解释。

文字中的代码词、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟网址、用户输入和 Twitter 用户名如下所示：“笔记本可以通过`%run notebook.ipynb`在交互式会话中运行。”

代码块如下所示：

```py
def do_complete(self, code, cursor_pos):
    return {'status': 'ok',
            'cursor_start': ...,
            'cursor_end': ...,
            'matches': [...]}
```

所有命令行输入或输出如下所示：

```py
from IPython import embed
embed()

```

**新术语**和**重要词汇**以粗体显示。例如，在屏幕上、菜单或对话框中的词语，通常呈现为这样：“最简单的选项是从笔记本仪表板中的**Clusters**选项卡启动它们。”

### 注意

警告或重要提示会以这种框的形式呈现。

### 提示

提示和技巧以这种方式呈现。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对本书的看法——您喜欢或不喜欢的内容。读者的反馈对我们开发更有价值的书籍至关重要，帮助我们提供真正对您有帮助的书籍。

要向我们发送一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果您在某个主题领域具有专业知识，并且有兴趣撰写或参与书籍创作，请参考我们的作者指南，网址为：[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您已经是 Packt 书籍的自豪拥有者，我们有许多资源帮助您最大限度地利用您的购买。

## 下载示例代码

您可以从自己账户的[`www.packtpub.com`](http://www.packtpub.com)下载所有购买的 Packt 书籍的示例代码文件。如果您从其他地方购买本书，可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，文件将直接通过电子邮件发送给您。

## 下载彩色图片

我们还为您提供了一份包含本书中截图/图表彩色图片的 PDF 文件。彩色图片有助于您更好地理解输出的变化。您可以通过以下链接下载该文件：[`www.packtpub.com/sites/default/files/downloads/4818OS_ColoredImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/4818OS_ColoredImages.pdf)。

## 勘误

虽然我们已尽一切努力确保内容的准确性，但错误仍然会发生。如果您在我们的书籍中发现错误——可能是文本或代码的错误——我们将非常感激您能将其报告给我们。通过这样做，您不仅能为其他读者避免困扰，还能帮助我们改进书籍的后续版本。如果您发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)进行报告，选择您的书籍，点击**勘误** **提交** **表单**链接，并填写勘误详细信息。您的勘误一旦验证通过，我们将接受您的提交，并将勘误上传到我们的网站，或者添加到该书籍现有勘误列表中的勘误部分。任何现有勘误可以通过访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并选择您的书名来查看。

## 盗版

网络上盗版版权材料的问题在所有媒体中都很普遍。在 Packt，我们非常重视对版权和许可的保护。如果您在互联网上遇到任何形式的非法复制品，请立即提供相关地址或网站名称，以便我们采取相应措施。

如发现疑似盗版内容，请通过`<copyright@packtpub.com>`与我们联系，并提供相关链接。

感谢您的帮助，保护我们的作者权益，使我们能够为您提供有价值的内容。

## 问题

如果您在书籍的任何部分遇到问题，可以通过`<questions@packtpub.com>`与我们联系，我们将尽力解决。
