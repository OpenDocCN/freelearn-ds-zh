# 前言

|   | *“统计思维有一天将像读写能力一样，成为高效公民所必需的。”* |   |
| --- | --- | --- |
|   | --*H. G. Wells* |
|   | *“我有一个很好的主题[统计学]可以写，但我深感我的文学能力不足，无法在不牺牲准确性和彻底性的情况下使其易于理解。”* |   |
|   | --*Sir Francis Galton* |

在网络上搜索“数据科学韦恩图”会返回许多关于成为一名有效数据科学家所需技能的解读（看起来数据科学评论者特别喜欢韦恩图）。作者和数据科学家 Drew Conway 在 2010 年提出了原型图，将数据科学置于黑客技能、实质性专业知识（即学科领域理解）和数学统计知识的交集处。介于黑客技能和实质性专业知识之间——那些缺乏扎实数学和统计学知识的从业者——存在着“危险区”。

五年过去了，随着越来越多的开发者希望填补数据科学技能的短缺，统计学和数学教育比以往任何时候都更加重要，它能帮助开发者摆脱这一危险区域。因此，当 Packt 出版社邀请我为 Clojure 程序员编写一本适合的数据科学书籍时，我欣然同意。除了意识到此类书籍的必要性外，我还将其视为一个机会，来巩固我作为自己基于 Clojure 的数据分析公司 CTO 所学到的许多知识。最终结果是这本书，正是我希望在起步之前就能读到的书。

*《数据科学与 Clojure》*旨在成为一本远远超过 Clojure 程序员的统计学书籍。数据科学在众多领域的广泛传播，很大程度上得益于机器学习的巨大力量。在本书中，我将展示如何使用纯 Clojure 函数和第三方库来构建机器学习模型，解决回归、分类、聚类和推荐等主要任务。

对于数据科学家来说，可以扩展到非常大数据集的处理方法，所谓的“大数据”，尤为重要，因为它们可以揭示在较小样本中丢失的细微之处。本书展示了如何使用 Clojure 简洁地表达要在 Hadoop 和 Spark 分布式计算框架上运行的作业，并且通过使用专门的外部库和通用优化技术，来结合机器学习。

最重要的是，本书不仅旨在让读者了解如何执行特定类型的分析，更希望让你理解这些技术为何有效。除了提供实践知识（本书几乎每个概念都以可运行的示例呈现）外，我还希望解释理论，帮助你将一个原理应用到相关问题中。我希望这种方法能够帮助你在未来的各种情况中有效地应用统计思维，无论你是否决定从事数据科学职业。

# 本书内容

第一章，*统计学*，介绍了 Incanter，Clojure 的主要统计计算库，贯穿全书使用。通过引用来自英国和俄罗斯的选举数据，我们演示了如何使用汇总统计和统计分布的价值，同时展示了多种对比可视化。

第二章，*推断*，介绍了样本与总体、统计量与参数的区别。我们将假设检验作为一种正式的方法，确定在 A/B 测试网站设计的背景下差异是否显著。我们还讨论了样本偏差、效应大小以及多重检验问题的解决方案。

第三章，*相关性*，展示了我们如何发现变量之间的线性关系，并利用该关系预测某些变量在已知其他变量的情况下的值。我们实现了线性回归——一种机器学习算法——以预测奥林匹克游泳运动员的体重，基于他们的身高，并仅使用核心 Clojure 函数。随后，我们使用矩阵和更多数据来改进模型，提升其准确性。

第四章，*分类*，描述了如何实现几种不同类型的机器学习算法（逻辑回归、朴素贝叶斯、C4.5 和随机森林），以预测泰坦尼克号乘客的生存率。我们学习了适用于类别数据而非连续值的统计显著性检验方法，解释了在训练机器学习模型时可能遇到的各种问题，如偏差和过拟合，并演示了如何使用 clj-ml 机器学习库。

第五章，*大数据*，展示了 Clojure 如何利用各种规模计算机的并行能力，通过 reducers 库，并如何将这些技术扩展到 Hadoop 集群中的机器，结合 Tesser 和 Parkour。通过使用来自 IRS 的 ZIP 代码级别税收数据，我们展示了如何以可扩展的方式执行统计分析和机器学习。

第六章，*聚类*，展示了如何使用 Hadoop 和 Java 机器学习库 Mahout 识别具有相似主题的文本文件。我们描述了与文本处理相关的各种技术以及与聚类相关的更一般性概念。我们还介绍了 Parkour 的一些高级功能，帮助从 Hadoop 作业中获得最佳性能。

第七章, *推荐系统*，介绍了处理推荐问题的多种不同方法。除了使用核心 Clojure 函数实现推荐系统外，我们还通过使用主成分分析和奇异值分解来解决降维问题，以及使用布隆过滤器和 MinHash 算法进行概率集压缩。最后，我们介绍了用于 Spark 分布式计算框架的 Sparkling 和 MLlib 库，并使用它们通过交替最小二乘法生成电影推荐。

第八章, *网络分析*，展示了分析图结构数据的多种方法。我们使用 Loom 库演示了遍历方法，然后展示了如何使用 Spark 的 Glittering 和 GraphX 库来发现社交网络中的社区和影响者。

第九章, *时间序列*，演示了如何拟合曲线以处理简单的时间序列数据。通过使用月度航空公司乘客数量数据，我们展示了如何通过训练自回归滑动平均模型来预测更复杂序列的未来值。我们通过实现一种称为最大似然估计的参数优化方法，并借助 Apache Commons Math 库来完成这一过程。

第十章, *可视化*，展示了如何使用 Clojure 库 Quil 创建自定义可视化图表，以便绘制 Incanter 未提供的图表，并制作能清晰传达发现结果的吸引人图形，无论你的听众背景如何。

# 本书所需的工具

每章的代码都已作为项目在 GitHub 上发布，地址为 [`github.com/clojuredatascience`](https://github.com/clojuredatascience)。你可以从该网站下载示例代码的压缩包，或使用 Git 命令行工具进行克隆。所有书中的示例都可以按照第一章，*统计学*，中描述的方式使用 Leiningen 构建工具进行编译和运行。

本书假设你已经能够使用 Leiningen 编译和运行 Clojure 代码（[`leiningen.org/`](http://leiningen.org/)）。如果你还没有设置好，参考 Leiningen 网站进行配置。

此外，许多示例章节的代码使用了外部数据集。如果可能，这些数据集已与示例代码一起提供。如果无法提供，数据的下载说明已经包含在示例代码的 README 文件中。相关的 Bash 脚本也已与示例代码一起提供，用于自动化此过程。只要安装了 curl、wget、tar、gzip 和 unzip 等工具，Linux 和 OS X 用户可以按照相关章节的说明直接运行这些脚本。Windows 用户可能需要安装 Cygwin 等 Linux 模拟器（[`www.cygwin.com/`](https://www.cygwin.com/)）来运行这些脚本。

# 适合谁阅读

本书面向中级和高级 Clojure 程序员，旨在帮助他们建立统计学知识，应用机器学习算法，或使用 Hadoop 和 Spark 处理大量数据。许多有志成为数据科学家的读者也会从学习这些技能中受益，《*数据科学的 Clojure*》应按顺序从头到尾阅读。按此方式阅读的读者将发现，每一章都在前一章的基础上进一步展开。

如果你还不熟悉阅读 Clojure 代码，可能会觉得本书特别具有挑战性。幸运的是，现在有许多优秀的资源可以帮助学习 Clojure，我在这里并不重复这些资源的内容。写作时，《*勇敢与真诚的 Clojure*》([`www.braveclojure.com/`](http://www.braveclojure.com/))是一个很棒的免费学习资源。请访问[`clojure.org/getting_started`](http://clojure.org/getting_started)以获得适合新手的其他书籍和在线教程链接。

# 约定

本书中会使用多种文本样式，区分不同类型的信息。以下是这些样式的一些示例及其含义解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟网址、用户输入和 Twitter 用户名将按如下方式显示：“每个示例都是`cljds.ch1.examples`命名空间中的一个函数，可以执行。”

代码块的格式如下：

```py
(defmulti load-data identity)

(defmethod load-data :uk [_]
  (-> (io/resource "UK2010.xls")
      (str)
      (xls/read-xls)))
```

当我们希望特别提醒你注意代码块中的某个部分时，相关行或项目将以粗体显示：

```py
    (q/fill (fill-fn x y))
    (q/rect x-pos y-pos x-scale y-scale))
 (q/save "heatmap.png"))]
    (q/sketch :setup setup :size size))
```

任何命令行输入或输出都将按以下格式书写：

```py
lein run –e 1.1

```

**新术语**和**重要单词**以粗体显示。你在屏幕上看到的单词，例如在菜单或对话框中，显示为这样的格式：“每次按下**新样本**按钮时，都会生成一对来自指数分布的新样本，样本的总体均值从滑块中获取。”

### 注意

警告或重要说明通常会以框体形式出现。

### 提示

提示和技巧通常以这种形式出现。

# 读者反馈

我们始终欢迎读者的反馈。让我们知道你对本书的看法——你喜欢或不喜欢的地方。读者反馈对我们非常重要，它帮助我们开发出你会真正受益的书籍。

要向我们发送一般反馈，只需通过电子邮件 `<feedback@packtpub.com>` 与我们联系，并在邮件主题中提到书名。

如果你在某个主题方面有专业知识并且有兴趣参与写作或贡献一本书，请查看我们的作者指南：[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在，既然你已成为一本 Packt 书籍的骄傲拥有者，我们为你提供了许多帮助，让你从购买中获得最大收益。

## 下载示例代码

你可以从你的账户中下载所有你购买的 Packt Publishing 书籍的示例代码文件，访问[`www.packtpub.com`](http://www.packtpub.com)。如果你是在其他地方购买的本书，可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册以便将文件直接通过电子邮件发送给你。

## 下载本书的彩色图片

我们还为你提供了一个 PDF 文件，其中包含本书中使用的截图/图表的彩色图片。这些彩色图片将帮助你更好地理解输出结果中的变化。你可以从[`www.packtpub.com/sites/default/files/downloads/Clojure_for_Data_Science_ColorImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/Clojure_for_Data_Science_ColorImages.pdf)下载该文件。

## 勘误

尽管我们已尽最大努力确保内容的准确性，但仍然会出现错误。如果你在我们的书籍中发现错误——可能是文本或代码中的错误——我们非常感激你能向我们报告。通过这样做，你可以帮助其他读者避免沮丧，并帮助我们改进后续版本的书籍。如果你发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)提交报告，选择你的书籍，点击**勘误提交表格**链接，并填写勘误详情。一旦你的勘误经过验证，将被接受，并上传到我们的网站，或添加到该书标题下的勘误列表中。

要查看之前提交的勘误，访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)并在搜索框中输入书名。所需的信息将在**勘误**部分显示。

## 盗版

互联网版权物品盗版问题在所有媒体上都在持续发生。在 Packt，我们非常重视版权和许可证的保护。如果你在互联网上发现我们作品的任何非法复制，请立即提供该位置地址或网站名称，以便我们采取相应措施。

请通过`<copyright@packtpub.com>`与我们联系，并附上涉嫌盗版材料的链接。

我们感谢你在保护作者权益和我们提供有价值内容方面的帮助。

## 问题

如果你对本书的任何部分有疑问，可以通过`<questions@packtpub.com>`与我们联系，我们将尽力解决问题。
