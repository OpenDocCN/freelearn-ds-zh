# 第九章：数据科学项目的常见陷阱

在本章中，我们将探讨数据科学项目的常见陷阱，以及那些容易犯的错误，这些错误会增加你项目可能遇到的风险。了解如何应对这些问题对于项目的成功至关重要。不同类型的数据科学解决方案有许多诱人的执行方式，但这些方式可能会在项目后期引发不必要的困难。我们将逐一选择并解决这些问题，同时跟随数据科学项目的生命周期。

在本章中，我们将涵盖以下主题：

+   避免数据科学项目的常见风险

+   处理研究项目

+   处理原型和**最小可行产品**（**MVP**）项目

+   减少面向生产的数据科学系统中的风险

# 避免数据科学项目的常见风险

任何数据科学项目的首要风险就是目标定义。正确的目标定义在成功的公式中起着重要作用。常常在任务定义之后，尤其是当任务定义模糊不清时，人们容易急于进入项目的实施阶段。这样做，你可能会以完全不同于业务实际需求的方式来解决问题。因此，定义一个具体且可衡量的目标至关重要，这将为你的团队提供一个工具，帮助他们区分正确与错误的解决方案。

为确保项目目标的正确定义，你可以使用以下检查表：

+   你有一个可量化的业务指标，可以通过输入数据和算法的输出进行计算。

+   业务方理解你使用的最重要技术指标。

+   任务在数据科学术语中被定义。你知道自己是在解决分类、回归或其他类型的任务，并且有技术上的方法来处理它。

+   你了解问题的（业务）流程和领域的细节。

+   项目开始所需的所有数据源都存在，并且能够被实施团队访问。

另一个重要问题是文档记录。在数据科学项目中，实验结果常常会改变项目的方向。因此，记录所有实验、所做的决策和结论是非常重要的。对于数据和需求的任何变动也需要及时修正。当你拥有这些信息时，你将能够看到使你的解决方案按预期工作的思路全过程。

了解数据科学项目的常见风险将帮助你从重大错误中恢复过来，但细节才是关键。在下一节中，我们将讨论不同的管理方法，涉及研究项目、原型以及端到端生产系统，并详细讲解它们的特点。

# 处理研究项目

研究项目是指任何能够为你解决新问题的项目，特别是那些不太为人知的问题。研究项目不总是为了推动科学进步。如果你的团队处理的是一个全新的业务领域，或者一种新的机器学习库，这些也被认为是研究项目。发现如何将数据科学应用于新的业务领域也是研究。几乎每个数据科学项目都包含一个处理建模过程的研究子项目。

研究项目的第一个陷阱是缺乏明确的范围。每个研究项目必须有明确的范围，否则无法完成。同时，确定研究项目的外部约束也非常重要。随着范围的扩大，研究预算也会增加，因此有限的预算可能会影响你能够进行的研究深度和持续时间。

当你了解了自己的研究能力后，可以开始与团队一起填写实验待办事项。每个待办事项应包含一个可能提升模型质量或帮助实现期望功能的想法。每个实验都应根据 SMART 标准进行定义。

例如，针对二分类问题的初步实验待办事项可能如下所示：

1.  执行**探索性数据分析**（**EDA**）并熟悉数据。

1.  使用梯度提升和基本预处理创建一个基准模型。

1.  测试分类变量的编码：哈希编码。

1.  测试分类变量的编码：目标编码。

1.  特征工程：衡量日期特征的影响。

1.  特征工程：聚合特征日期窗口。

为了符合 SMART 标准，每个条目还应包含截止日期、数据集链接、计算资源和度量建议。为了简洁，我们省略了这些细节。

你应该始终根据预期回报优先安排实验。一些实验可能需要大量时间才能完成，但初步测试所需时间较少。如果你和你的团队对优先级不确定，最好广泛开展实验，而不是深度开展。对当前研究周期中的所有实验进行快速初步质量检查，以确定每个实验的大致时间投入。

同时，跟踪实验中的每个细节也非常重要，例如以下内容：

+   输入数据

+   实验的日期和时间

+   生成实验结果的精确代码版本

+   输出文件

+   模型参数和模型类型

+   度量标准

你可以使用简单的共享文档来实现这一目标，或者将专门的实验跟踪框架与**用户界面**（**UI**）集成到你的项目中。实验跟踪框架在需要大量实验的项目中能收回投资。

最后，要确保每个实验都可以重现，并记录你从结果中得出的结论。为了检查实验的可重现性，使用以下标准进行每个独立实验：

+   输入数据易于访问，团队中的任何人都可以发现。

+   实验代码可以在输入数据上运行而不出错。

+   你无需输入未记录的配置参数即可运行实验。所有配置变量都在实验配置中固定。

+   实验代码包含文档，并且易于阅读。

+   实验输出是一致的。

+   实验输出包含可以与其他实验进行比较的指标。

+   实验结果的结论出现在文档、注释或输出文件中。

为了避免研究项目中的陷阱，请确保你做了以下事项：

+   定义明确的目标

+   定义成功标准

+   定义约束条件，包括时间和预算限制

+   填写实验待办事项

+   根据预期进行优先级排序

+   跟踪所有实验及其数据

+   使代码具有可重复性

+   记录你的发现

成功的研究项目可以帮助你找到复杂问题的答案，或推动科学领域和实践学科的边界。研究项目常常与原型混淆，尽管原型通常追求不同的目标。在接下来的部分，我们将探讨原型项目的特性，以及这些类型项目的具体管理策略。

# 处理原型和 MVP 项目

如果你从事数据科学工作，我敢打赌你会发现自己做了很多原型设计。原型通常有非常严格的时间和金钱限制。原型设计的第一课是将每个原型都视为 MVP。MVP 的核心理念是只包含足够的核心功能来展示一个可行的解决方案。其他附加功能可以稍后实现，只要你能够展示原型背后的核心思路。

聚焦核心功能并不意味着你的原型不能有漂亮的用户界面或令人惊叹的数据可视化。如果这些是你未来产品的主要优势，一定要包含它们。为了确定产品的核心功能，你应该从市场和流程的角度思考。

向自己提问以下问题，以检查某个特性是否应包含在 MVP 中：

+   你的用户是谁？

+   你的解决方案针对的是哪些（业务）流程？

+   你想解决什么问题？

然后，看看哪些功能对于达到预期目标至关重要，哪些是附加的，哪些与目标无关。之后，观察你的竞争对手，思考是什么将使你的 MVP 与他们区别开来。如果你没有区别特征，或者你没有解决一个不同的问题，那么你将很难与一个已经开发且可能广泛采用的竞争性产品竞争。

将竞争对手的产品分解为功能列表并对其进行相同的分析，看看你应该实现哪些附加功能，以使你的产品与市场接轨。这种对竞争对手产品的详细功能分析更多的是关于产品开发，而不是创建 MVP，因此我们不会进一步深入探讨这个话题。

通过功能分析获得的信息，你应该能够对所有功能进行排序，并选择一些核心功能作为 MVP 的一部分。请记住，如果你知道某些功能对于成功至关重要，你可以调整它们的优先级。

交付 MVP 的另一个重要方面是削减成本。如果你有很多原型，使用项目模板、内部快速原型工具和文档模板将节省大量的时间和金钱。如果你发现你的团队在使用特定类型的算法或技术创建 MVP 时花费更多时间，可以考虑创建工具来自动化大部分工作。至关重要的是要记住，MVP 应该足够好，让你的客户和用户能够看到其好处。正如伏尔泰所说，*完美是优秀的敌人*。

要更全面地了解如何创建可以转化为实际项目的原型，请参见第七章，*创新管理*。

在下一部分，我们将简要概述如何在咨询公司环境中管理 MVP。

# 案例研究 – 在咨询公司中创建 MVP

我们的朋友 Mark 在一家咨询公司工作。他的团队为一家大型制造公司创建了一个缺陷检测系统原型。该系统应该分析传送带上产品的视频流，并检测出有缺陷的产品。Mark 已回答了初步的 MVP 问题清单：

+   你的用户是谁？

    制造厂的产品质量部门。

+   你的解决方案面向哪些（业务）流程？

    我们的目标是核心的产品质量控制过程。

+   你想解决什么问题？

    我们希望减少当前质量控制过程中未检测到的有缺陷产品的总量。

基于这些答案，Mark 为 MVP 创建了核心功能清单：

+   缺陷检测模型

+   通过监控传送带上的摄像头进行集成

Mark 知道，制造计划主管 Anthony 是关键决策者，他欣赏那些界面简洁直观的系统。此外，Mark 还确信，准备一个模型质量报告对于比较现有和未来质量控制过程的效率至关重要。

这两条见解为 MVP 增加了一些交付物：

+   用于实时监控缺陷的用户界面

+   提供旧流程和改进流程之间效率对比的模型质量报告，以及自动化的质量控制步骤

在客户批准了项目范围后，Mark 决定使用 Scrum 作为管理方法，并专注于尽快交付第一个可工作的版本。为了尽快上手，Mark 的团队已经在应用计算机视觉算法方面积累了经验，因此他们使用了可以为快速原型开发而开发的内部软件库。报告模板使得他们不需要花费大量时间编写文档，从而能够专注于 MVP 开发。

本例总结了我们对原型的概述。现在，我们准备深入探讨数据科学项目中评估和减轻风险的话题。

# 减轻面向生产的数据科学系统中的风险

端到端数据科学项目涵盖了一个或多个完整的数据科学项目生命周期迭代。端到端的数据科学项目包括了研究项目和 MVP 的所有风险，以及与变更管理和生产部署相关的一系列新风险。

第一个主要风险是无法维持持续的变更流。数据科学项目涉及范围变更，您应该能够应对这些变更，而不让项目崩溃。Scrum 为您提供了变更管理所需的基本工具，通过在一周内冻结开发范围来应对变化。然而，任何工具的有效性都依赖于客户与您的团队共同理解并遵循必要的流程。

另一个问题是，给定变更的实施可能会导致许多意外的错误。数据科学项目通常缺乏自动化测试流程。缺乏对现有功能的持续测试，可能会在一个简单的变更引发多个错误时产生连锁反应。如果没有测试，许多错误也会被忽视，并且被直接推向生产环境。同样，实施在线测试模块也非常重要，因为质量保证不仅仅在开发阶段就结束。随着时间的推移，模型的性能可能会下降，您的系统应该监控业务和技术指标的突变。

如果您的团队没有提前为生产做好规划，您将面临许多与非功能性需求相关的复杂工程问题，例如系统的可用性、可扩展性和可靠性。为了避免这种情况，从项目一开始就应该关注系统设计和软件架构。

即使在技术上万事俱备，最终的结果也可能让客户感到困惑。如果关键利益相关者没有看到您的系统的价值，您必须检查目标定义中是否存在任何错误。通常情况下，项目目标会在中途发生变化，同时客户对于什么对他们的业务最好也可能会改变。为了避免这一重大风险，您应该不断检查自己正在做的任务是否重要，解决方法是否正确。

在下表中，我们列出了常见的风险及其解决方案，以总结本章内容：

| **风险组** | **风险** | **解决方案** |
| --- | --- | --- |
| 常见问题 | 目标定义模糊。 | 确保目标的定义完整，并包含本章中清单上的所有项目。 |
| 常见问题 | 项目目标不可量化。 | 定义可以被客户理解的量化业务指标。定义一个或多个与业务指标相关联的技术指标。 |
| 常见问题 | 决策时没有记录跟踪。 | 记录下项目中做出的每一个重大决策和结论。固定数据和代码版本，以便能够重现导致这些决策的结果。 |
| 研究 | 团队无法重现实验结果。 | 跟踪实验结果和数据，以及代码。 |
| 研究 | 研究没有明确的范围和行动计划。 | 提前规划，使用研究待办事项列表。优先处理待办事项列表中的条目，并定期检查是否有过时条目需要移除。通过快速测试（如果可能的话）评估每个实验的期望值。 |
| MVP | 原型未能展示如何解决用户的问题。 | 将每个原型视为一个 MVP，旨在解决客户的问题。通过考虑解决客户问题所需的最少功能，来定义你的范围。 |
| MVP | MVP 包含过多不必要的功能，导致开发时间过长。 | 使用功能分析来定义 MVP 的范围。 |
| MVP | MVP 开发时间过长。 | 如果团队需要制作多个 MVP，考虑创建快速原型框架和项目模板，以加速开发过程。 |
| 项目开发 | 客户不断推动团队进行紧急的范围变更。 | 提倡为项目使用敏捷开发方法。跟踪项目范围变更，展示这些变更如何影响项目的截止日期。 |
| 项目开发 | 客户看不出系统如何解决他们的问题。 | 持续回顾项目目标，并确保你解决问题的方式已获得客户确认。 |
| 项目开发 | 新的变更引入了大量的 bug。 | 编写自动化测试。 |
| 生产部署 | 模型在生产环境中质量下降，且系统没有工具来解决这个问题。 | 开发在线测试模块以跟踪生产环境中的指标。验证输入数据。定期使用新数据重新训练模型。 |
| 生产部署 | 系统不适合用于生产环境。 | 修复系统的功能性和非功能性需求。准备一个架构愿景，以提供一个生产就绪的系统设计。 |

接下来我们将进入下一个案例研究，展示如何检测并控制这些常见风险。

# 案例研究——将销售预测系统投入生产

简在一家初创公司担任高级经理，该公司为全球各地的物流公司提供销售预测解决方案。在一次大型科技会议上，一家物流公司代表马克斯询问简的公司是否可以从使用 AI 中受益。简提到，仅仅依靠工具本身并不能让公司变得更好，AI 也是一种工具，就像他们的 ERP 软件一样，只是更加灵活。她首先通过创建更具体的任务定义，旨在消除风险表中**常见**风险组的风险：

简：那要不要设定一个更明确的目标呢？我知道没有了解 AI 和机器学习的技术细节可能很困难，所以让我来帮您。我们的公司为像您这样的物流公司提供销售预测解决方案。典型的应用场景是将我们的系统集成到您的 ERP 中，这样您的员工就不会浪费时间手动做预测了。这样听起来有兴趣吗？

马克斯：当然，能告诉我更多吗？

简：好的。我们的系统会为您仓库中的每个物品进行需求预测。我们可以估算出您需要在未来某个日期之前发货的物品数量。为此，我们需要访问您的 ERP 数据库。我敢打赌您的员工已经在做这项工作，但通常这个过程会花费很多时间，而且结果可能没有达到最准确，尤其是当您的产品目录包含数百或数千个物品时。

马克斯：是的，确实，这个过程需要很多时间。我们甚至在添加新项目到目录时遇到困难，因为这意味着未来我们需要雇佣两倍的人手。

简：如果我提供的内容对您感兴趣，我很乐意帮助您制作一个小型的 MVP 项目，展示我们的系统如何对您的业务带来好处。不过，我们需要您的协助。为了向您展示使用系统的积极效果，我们需要确保目标以公司管理层能理解的数字形式呈现。让我们安排一个会议，我可以向您展示我们如何量化项目结果，以及我们从您的 IT 专家那里需要什么支持。

马克斯：当然，谢谢！

在这次讨论后，简与马克斯举行了一次会议，向他展示了从业务角度评估项目表现的常见方法。她将所有决策记录在一份小型的业务需求文档中，并通过向马克斯展示，确认讨论的结果是正确的。简还讨论了 MVP 的成功标准。马克斯同意，在项目的这一阶段，生产部署不是必需的，他们可以通过查看简团队将在会议上展示的离线测试结果来决定是否进行生产集成。这样，她就涵盖了**常见**风险组中的所有三大风险。

由于这是一个 MVP 项目，她还考虑了 MVP 小组中的风险。简问了马克斯他们如何向最终用户和公司管理层展示这个系统，以便让他们理解这个系统的好处。他们决定将系统直接集成到公司的 ERP 解决方案中，因为这对双方来说是最具成本效益的方式。马克斯对 MVP 中可以包括哪些有用功能有很多想法，并且提到了可视化仪表板和系统管理工具。简注意到这些功能并没有增加系统的核心价值，更适合在实施阶段进行实现。

在明确了目标定义并塑造了 MVP 约束条件后，简的团队进入了实施阶段。为了关闭项目开发小组中的风险，简与客户协调了项目管理方法论。基于她的经验，简决定在这个 MVP 项目中使用 Scrum。她向客户解释了固定范围迭代的重要性，并确保每个人都同意如何在规划阶段将变更纳入冲刺中。她还使用软件项目管理系统与马克斯共享了项目的待办事项，以便他可以添加新的任务并与团队一起优先排序，充当产品负责人。简确保马克斯能有时间参与春季规划会议，以确保项目不会偏离方向。简所在初创公司的一般软件开发实践已经解决了与代码质量、交付管道自动化和自动化测试相关的风险，因此她不需要担心这些问题。

# 总结

在本章中，我们探讨了数据科学项目中的常见陷阱，以及如何使用实验待办事项和实验跟踪等工具来管理研究项目。我们还看到了原型与研究项目的区别，并从 MVP 的角度审视了如何管理原型开发。接着，这些技术通过一个关于咨询公司 MVP 开发的案例研究进行了总结。最后，我们列举并系统化了研究、原型和生产系统的主要风险及其解决方案。

在下一章中，我们将探讨如何通过使用可重用技术来发展数据科学产品并提高内部团队绩效。
