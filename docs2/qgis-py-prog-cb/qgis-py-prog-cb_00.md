# 前言

开源地理信息系统 QGIS，在 2.6 版本中，其功能性和易用性已经可以与最昂贵的商业 GIS 软件相媲美。它也是展示最佳地理空间开源技术的典范。它不仅仅是一个项目，而是将数十个开源项目融合在一个简洁的界面中。

地理空间技术不仅仅是将技术应用于地理学的综合应用。它是地理学、数学、计算机科学、统计学、物理学和其他领域的交响乐。QGIS 实现的底层算法非常复杂，以至于世界上只有少数人能够理解所有这些算法。然而，QGIS 将这些复杂性封装得如此之好，以至于小学生、城市管理者、疾病研究人员、地质学家以及许多其他专业人士都能轻松地使用这款强大的软件，做出改善地球生活的决策。

然而，本书还涉及 QGIS 的另一个特性，使其成为地理空间工作的最佳选择。QGIS 拥有最深入集成和设计精良的 Python 接口之一。在最新版本中，几乎没有程序方面是 Python 无法触及的，使其成为可用的最大地理空间 Python 库。几乎无一例外，Python API，称为 PyQGIS，是一致的且可预测的。

本书利用 QGIS 的最佳特性，展示了 140 多个可重用的食谱，您可以使用这些食谱来自动化 QGIS 中的工作流程或构建独立的 GIS 应用程序。大多数食谱都非常紧凑，即使您找不到您所寻找的精确解决方案，也应该能够找到接近的解决方案。本书涵盖了大量内容，并将散布在互联网上的碎片化思想和文档以及许多小时的 PyQGIS API 边缘实验结果汇集在一起。

# 本书涵盖的内容

第一章，*自动化 QGIS*，简要概述了您可以使用 Python 与 QGIS 结合的不同方式，包括 QGIS Python 控制台、独立应用程序、插件和脚本运行器插件。本章还涵盖了如何设置和检索应用程序设置以及一些其他 Python 特定功能。

第二章，*查询矢量数据*，介绍了如何使用 Python 从矢量数据中提取信息而不改变数据。涵盖的主题包括测量、从数据库加载数据、过滤数据以及其他相关过程。

第三章, *编辑矢量数据*，介绍了创建和更新数据以添加新信息的话题。它还教您如何根据空间或数据库属性将数据集拆分，以及如何合并数据集。本章还将教您如何将数据转换为不同的格式，更改投影，简化数据等。

第四章, *使用栅格数据*，展示了 25 个使用和转换栅格数据以创建派生产品的食谱。本章突出了 QGIS 作为栅格处理引擎的能力，而不仅仅是矢量 GIS。

第五章, *创建动态地图*，过渡到控制 QGIS 整体以控制地图、项目和应用程序级设置的食谱。它包括访问外部网络服务和构建自定义地图工具的食谱。

第六章, *制作静态地图*，展示了如何使用 QGIS 地图编绘器创建打印地图。您将学习如何在地图上放置参考元素以及设计元素，如标志。

第七章, *与用户交互*，教您如何控制由底层 Qt 框架创建的 QGIS GUI 元素，以便为脚本、插件或独立应用程序创建交互式输入小部件。

第八章, *QGIS 工作流程*，包含更高级的食谱，这些食谱产生最终产品或扩展功能。这些食谱针对地理空间分析师或程序员在工作中遇到的实际任务。

第九章, *其他技巧和窍门*，包含超出前几章范围的有趣食谱。许多这些食谱在单个食谱中演示了多个概念，您可能会发现这些食谱对各种任务都很有用。

# 您需要这本书的

完成本书中所有食谱，您需要以下软件；如果特定版本不可用，请使用最新版本：

+   QGIS 2.6

+   Python 2.7.6（应包含在 QGIS 本身中）

+   IBM Java 7 开发工具包

+   Eclipse Luna 4.4.x

+   Google Earth 7.1.2.2041

# 这本书面向谁

如果您是一位希望了解更多关于自动化日常 GIS 任务的地理空间分析师或负责构建 GIS 应用程序的程序员，这本书适合您。基本的 Python 知识是必需的，并且一些 QGIS 经验将是一个额外的优势。

短小、可重用的食谱使概念易于理解。当它们组合在一起时，您可以构建易于维护的更大应用程序。

# 章节

在这本书中，您会发现一些经常出现的标题（准备就绪、如何操作、工作原理、更多信息以及相关内容）。

为了清楚地说明如何完成食谱，我们使用以下部分如下：

## 准备就绪

本节告诉您在食谱中可以期待什么，并描述了为食谱设置任何软件或任何初步设置的方法。

## 如何操作…

本节包含遵循食谱所需的步骤。

## 工作原理…

本节通常包含对上一节发生情况的详细解释。

## 更多信息…

本节包含有关食谱的附加信息，以便使读者对食谱有更深入的了解。

## 相关内容

本节提供了对其他有用信息的链接，这些信息有助于理解食谱。

# 术语约定

在这本书中，您会发现许多不同风格的文本，用于区分不同类型的信息。以下是一些这些风格的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名如下所示：“在 QGIS **Python 控制台**中，我们将导入`random`模块。”

代码块按如下方式设置：

```py
proj = QgsProject.instance()
proj.title("My QGIS Project")
proj.title()
proj.writeEntry("MyPlugin", "splash", "Geospatial Python Rocks!")
proj.readEntry("MyPlugin", "splash", "Welcome!")[0]
```

任何命令行输入或输出都按如下方式编写：

```py
sudo easy_install PyPDF2

```

**新术语**和**重要词汇**以粗体显示。屏幕上显示的单词，例如在菜单或对话框中，在文本中如下所示：“在表单中输入信息，然后单击**发送**按钮。”

### 注意

警告或重要注意事项以如下方式显示。

### 小贴士

小技巧和技巧如下所示。

# 读者反馈

我们始终欢迎读者的反馈。告诉我们您对这本书的看法——您喜欢什么或可能不喜欢什么。读者反馈对我们开发您真正从中受益的标题非常重要。

要发送一般反馈，只需发送电子邮件到`<feedback@packtpub.com>`，并在邮件主题中提及书名。

如果您在某个主题上具有专业知识，并且您对撰写或为书籍做出贡献感兴趣，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 书籍的骄傲拥有者，我们有一些事情可以帮助您从购买中获得最大收益。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)的账户下载您购买的所有 Packt 书籍的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接通过电子邮件发送给您。

## 下载本书的颜色图像

我们还为您提供了一个包含本书中使用的截图/图表彩色图像的 PDF 文件。彩色图像将帮助您更好地理解输出中的变化。您可以从[`www.packtpub.com/sites/default/files/downloads/4985OS_ColoredImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/4985OS_ColoredImages.pdf)下载此文件。

## 错误

尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然可能发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这一点，我们将不胜感激。通过这样做，您可以节省其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何错误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**errata** **submission** **form**链接，并输入您的错误详情来报告它们。一旦您的错误得到验证，您的提交将被接受，错误将被上传到我们的网站，或添加到该标题的 Errata 部分下的现有错误列表中。任何现有错误都可以通过从[`www.packtpub.com/support`](http://www.packtpub.com/support)中选择您的标题来查看。

## 盗版

在互联网上，版权材料的盗版是一个跨所有媒体持续存在的问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在网上发现了我们作品的任何非法副本，无论形式如何，请立即提供地址或网站名称，以便我们可以寻求补救措施。

如果您发现了疑似盗版材料，请通过`<copyright@packtpub.com>`与我们联系，并提供链接。

我们感谢您在保护我们作者和为我们提供有价值内容的能力方面提供的帮助。

## 问答

如果您在本书的任何方面遇到问题，可以通过`<questions@packtpub.com>`与我们联系，我们将尽力解决。
