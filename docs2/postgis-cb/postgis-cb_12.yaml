- en: Introduction to Location Privacy Protection Mechanisms
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 位置隐私保护机制简介
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下内容：
- en: Adding noise to protect location data
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向位置数据添加噪声以保护
- en: Creating redundancy in geographical query results
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在地理查询结果中创建冗余
- en: This chapter includes a set of references to documents (news, laws, academic
    work, and so on) that will be cited along the text, using a *[#]* format.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章包含了一系列对文档（新闻、法律、学术作品等）的引用，这些引用将在文本中使用*[#]*格式进行引用。
- en: Introduction
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 引言
- en: 'This chapter is dedicated to an emerging issue in the design and implementation
    of location-based information systems: LBISs. The increasing use of smartphones
    in all kinds of applications, and their ability to acquire and report users''
    locations, has been adopted as a core functionality of many service providers.
    Enabling access to users'' accurate locations throughout the day, which gives
    context to their requests and allows companies to better know their client and
    provide any relevant personalized services; however, this information can contain
    much more about the user than just the context of the service they want to access,
    such as their weekly routine, frequently visited places, groups of people gathered,
    and so on. These patterns can be obtained from the phone, and then analyzed and
    used to categorize or profile customers; this information in the wrong hands,
    however, could be used against individuals.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 本章致力于一个新兴的设计和实现基于位置信息系统的议题：LBISs。智能手机在各种应用中的日益普及，以及它们获取和报告用户位置的能力，已被许多服务提供商采纳为核心功能。全天候允许访问用户的准确位置，这为他们的请求提供了上下文，并使公司能够更好地了解他们的客户并提供任何相关的个性化服务；然而，这些信息可能包含关于用户的信息远不止他们想要访问的服务上下文，例如他们的日常作息、常去的地方、聚集的人群等。这些模式可以从手机中获取，然后进行分析并用于对客户进行分类或建立档案；然而，这些信息如果落入错误之手，可能会被用来对付个人。
- en: Even though there is very little *[1]* to no regulation on how to handle location
    information in a way that guarantees privacy for users, it is very important that
    the proper policies and implementation are included at the design stage.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管对如何处理位置信息以保证用户隐私的规定很少*[1]*甚至没有，但在设计阶段包含适当的政策和实施措施是非常重要的。
- en: Fortunately, among geoprivacy researchers, there exists a wide variety of mechanisms
    that can be used to help mitigate the issue of privacy in LBISs.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，在地理隐私研究人员中，存在各种各样的机制，可以用来帮助减轻LBISs中的隐私问题。
- en: This chapter is somewhat different from the others because, in order to understand
    the background of each location privacy technique, we considered important to
    include the theoretical bases that support these recipes that to the best of our
    knowledge are only available through academic publications and not yet presented
    as a hands-on experience.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 本章与其他章节有所不同，因为为了理解每种位置隐私技术的背景，我们认为包括支持这些食谱的理论基础是重要的，这些食谱据我们所知只能通过学术出版物获得，尚未作为实际经验呈现。
- en: Definition of Location Privacy Protection Mechanisms – LPPMs
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 位置隐私保护机制的定义 – LPPMs
- en: 'Location privacy can be defined by *Duckham* and *Kulik* in *[2]* as follows:
    *A special type of information privacy which concerns the claim of individuals
    to determine for themselves when, how, and to what extent location information
    about them is communicated to others*. Based on this definition, users should
    have power over their location information; however, it is well known that this
    is not the reality in many cases. Often, a service provider requires full access
    to a user''s location in order for the service to become available.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 位置隐私可以由Duckham和Kulik在*[2]*中定义为：*一种特殊的信息隐私，涉及个人决定何时、如何以及到什么程度将有关他们的位置信息传达给他人*。根据这个定义，用户应该有权控制他们的位置信息；然而，众所周知，在许多情况下这并不是现实。通常，服务提供商需要完全访问用户的位置信息，以便服务可用。
- en: In addition, because there is no restriction on the quality of location information
    that service providers can record, it's common for the exact GPS coordinates to
    be acquired, even when it is not relevant to the service itself.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，由于服务提供商可以记录的位置信息质量没有限制，因此获取精确的GPS坐标是常见的，即使这与服务本身无关。
- en: The main goal of LPPMs should be to allow users to hide or reduce the quality
    of this location information in such a way that users will still have an adequate
    service functionalities, and that the service provider can still benefit from
    insights product of spatial analysis .
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: LPPMs的主要目标应该是允许用户隐藏或降低这种位置信息的质量，这样用户仍然可以拥有足够的服务功能，并且服务提供商仍然可以从空间分析产生的洞察中受益。
- en: In order to provide geoprivacy, it is important to understand the components
    location information, these are: identity, location, and time. If an adversary
    is able to link those three aspects, location privacy is compromised. These components
    form an instance of location information; a sequence of such instances that gives
    historical location information, allowing others to establish behavior patterns
    and then making it possible for them to identify the user's home, work, and routine.
    Most LPPMs attack at least one of these components in order to protect privacy.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 为了提供地理隐私，理解位置信息组件非常重要，这些组件包括：身份、位置和时间。如果对手能够将这三个方面联系起来，位置隐私就会受到损害。这些组件形成一个位置信息实例；一系列这样的实例提供了历史位置信息，使其他人能够建立行为模式，然后使他们能够识别用户的家庭、工作和日常活动。大多数LPPMs至少攻击这些组件中的一个以保护隐私。
- en: Suppose an attacker gains access to a user's identity and the time, but has
    no clear knowledge of what places the user has visited. As the location component
    has been obfuscated, the attacker would be able to infer very little, as the context
    is highly-altered and the data has lost its potential usability. (This specific
    scenario corresponds to location privacy.)
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 假设攻击者获得了用户的身份和时间，但不知道用户访问过哪些地方。由于位置组件已被模糊化，攻击者能够推断的信息非常有限，因为上下文发生了高度改变，数据失去了其潜在的可用性。（这个特定场景对应于位置隐私。）
- en: Another popular solution has been the implementation of identity privacy or
    anonymity, where users' traveled pathways can be accessed, but they provide no
    information on the identity of the subjects, or even if they are different users;
    however, this information alone could be enough to infer the identity of a person
    by matching records on a phonebook, as in the experiments conducted by *[3]*.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种流行的解决方案是实施身份隐私或匿名，用户旅行路径可以访问，但它们不提供关于受试者身份的信息，甚至无法确定它们是否是不同的用户；然而，仅此信息就足以通过电话簿上的记录匹配来推断一个人的身份，正如*[3]*实验中所进行的那样。
- en: Finally, when a user's location and identity are specified, but the time component
    is missing, the resulting information lacks context, and so pathways may not be
    reconstructed accurately; however, implementing a model in which this occurs is
    unlikely, as requests and LBS responses happen at a specific time and delaying
    queries can cause them to lose their relevance.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，当指定了用户的位置和身份，但缺少时间组件时，结果信息缺乏上下文，因此路径可能无法准确重建；然而，实现这种发生的模型不太可能，因为请求和LBS响应发生在特定时间，延迟查询可能导致它们失去相关性。
- en: Classifying LPPMs
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: LPPMs的分类
- en: Privacy in location-based services is often viewed as reaching a desirable trade-off
    between performance and a user's privacy; the more privacy provided, the less
    likely it is that the service can function as it would under a no-privacy scheme,
    or without suffering alterations in their architecture or application layer. As
    LBS offers a great variety of ever-changing features that keep up with users'
    needs while making use of the latest available technologies and adjusting to social
    behavior, they provide a similar scenario to LPPMs that aims to cover these services.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 基于位置的服务中的隐私通常被视为在性能和用户隐私之间达到一个理想的权衡；提供的隐私越多，服务在无隐私方案下正常工作的可能性就越小，或者在没有遭受其架构或应用层改变的情况下。由于LBS提供了一系列不断变化的功能，这些功能能够跟上用户的需求，同时利用最新的可用技术并适应社会行为，它们为LPPMs提供了一个类似的场景，旨在覆盖这些服务。
- en: In the case of **proactive location-based services** (**PLBS**), where users
    are constantly reporting their location *[4]*, the purpose of LPPMs is to alter
    the route as much as possible, while still providing a minimum level of accuracy
    that will allow the LBS to provide relevant information. This can be challenging
    because many PLBS, like traffic guidance apps, require the exact location of the
    user. So, unless the original data can be recovered or used in the altered format,
    it would be very complicated for these applications to implement an LPPM. Other
    services, like geomarketing or FriendFinder, may tolerate a larger alteration
    of the data, even if the change cannot be undone.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在**主动式位置服务**（**PLBS**）的情况下，用户不断报告他们的位置*[4]*，LPPMs的目的是尽可能改变路线，同时仍然提供最低程度的准确性，以便LBS提供相关信息。这可能具有挑战性，因为许多PLBS，如交通导航应用程序，需要用户的精确位置。因此，除非原始数据可以恢复或以更改的格式使用，否则这些应用程序实现LPPM将非常复杂。其他服务，如地理营销或FriendFinder，可能可以容忍更大的数据更改，即使更改无法撤销。
- en: On the other hand, mechanisms intended for **reactive location-based services**
    (**RLBS**) often do not require critical accuracy, and therefore it is tolerable
    to alter the subject's position in order to provide location privacy.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，旨在为**反应式位置服务**（**RLBS**）设计的机制通常不需要高精度，因此可以容忍改变主体的位置以提供位置隐私。
- en: Some LPPMs require special features alongside the usual client-server architecture,
    such as special database structures, extra data processing layers, third-party
    services, proxies, special electronics, a peer-to-peer approach between the LBS
    users' community, and so on.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 一些LPPMs需要与常规客户端-服务器架构一起使用特殊功能，例如特殊的数据库结构、额外的数据处理层、第三方服务、代理、特殊电子设备、LBS用户社区之间的对等连接方法等。
- en: 'Based on this, a proposed way to classify LPPMs is based on the application
    to PLBS and RLBS. Some of the techniques are general enough that they can be used
    in both worlds, but each has different implications:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 基于此，提出了一种基于PLBS和RLBS应用对LPPMs进行分类的方法。其中一些技术足够通用，可以在两个领域都使用，但每个领域都有不同的影响：
- en: '![](img/24c7c337-24c2-4fea-b3c9-ab4be51bfcd1.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/24c7c337-24c2-4fea-b3c9-ab4be51bfcd1.jpg)'
- en: Figure 1\. Taxonomy of LPPMs
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图1. LPPMs的分类
- en: 'In this chapter, two examples of LPPM implementations will be shown: noise-based
    location obfuscation, and private-information retrieval. Each of these imply changes
    to the design of the LBIS and the geographical database.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，将展示两个LPPM实现的示例：基于噪声的位置模糊化和私有信息检索。这些都会对LBIS和地理数据库的设计产生影响。
- en: Adding noise to protect location data
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 向位置数据添加噪声以保护隐私
- en: Some of the mechanisms designed for location privacy protection are based on
    location obfuscation, which is explained in *[5]* as *the means of deliberately
    degrading the quality of information about an individual's location in order to
    protect that individual's location privacy*.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 一些为位置隐私保护设计的机制基于位置模糊化，如*[5]*中所述，是*故意降低个人位置信息质量的手段，以保护该个人的位置隐私*。
- en: This is perhaps the simplest way to implement location privacy protection in
    LBISs because it has barely any impact on the server-side of the application,
    and is usually easy to implement on the client-side. Another way to implement
    it would be on the server-side, running periodically over the new data, or as
    a function applied to every new entry.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能是实现LBISs中位置隐私保护的最简单方法，因为它几乎不影响应用程序的服务器端，并且通常容易在客户端实现。另一种实现方式是在服务器端运行，定期处理新数据，或作为应用于每个新条目的函数。
- en: The main goal of these techniques is to add random noise to the original location
    obtained by the cellphone or any other location-aware device, so as to reduce
    the accuracy of the data. In this case, the user can usually define the maximum
    and/or minimum amount of noise that they want to add. The higher the noise added,
    the lower the quality of the service; so it is very important to reasonably set
    this parameter. For example, if a real-time tracking application receives data
    altered by 1 km, the information provided to the user may not be relevant to the
    real location.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这些技术的主要目标是向手机或其他位置感知设备获取的原始位置添加随机噪声，以降低数据的准确性。在这种情况下，用户通常可以定义他们想要添加的最大和/或最小噪声量。添加的噪声越高，服务质量越低；因此，合理设置此参数非常重要。例如，如果实时跟踪应用程序接收到的数据被1公里改变，提供给用户的信息可能不会与实际位置相关。
- en: 'Each noise-based location obfuscation technique presents a different way to
    generate noise:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 每种基于噪声的位置模糊技术都提供了一种生成噪声的不同方法：
- en: '![](img/c61c6588-9bd1-4932-826a-71a2c6b79574.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c61c6588-9bd1-4932-826a-71a2c6b79574.png)'
- en: 'When the noise is generated with polar coordinates, it is more uniformly distributed
    over a projection of the circular area because both angle and distance follow
    that distribution. In the case of Cartesian-based noise, points appear to be generated
    uniformly among the area as a whole, resulting in a lower density of points near
    the center. The following figure shows the differences in both circular and rectangular
    projections of 500 random points. In this book, we will work with polar-based
    random generation:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 当噪声以极坐标生成时，它会在圆形区域的投影上更加均匀地分布，因为角度和距离都遵循该分布。在基于笛卡尔坐标的噪声情况下，点似乎在整个区域内均匀生成，导致中心附近的点密度较低。以下图显示了500个随机点在圆形和矩形投影中的差异。在这本书中，我们将使用基于极坐标的随机生成：
- en: '![](img/0849076d-054a-4574-9c6a-9ce37c494a08.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/0849076d-054a-4574-9c6a-9ce37c494a08.png)'
- en: 'The following figure illustrates the way the **N-RAND ***[6]*, **θ-RAND ***[7]*,
    and **Pinwheel ***[8]* techniques work:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图说明了**N-RAND***[6]*、**θ-RAND***[7]*和**Pinwheel***[8]*技术的工作方式：
- en: '![](img/c930fd02-e5c6-403d-ac57-bac0d1d7b360.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c930fd02-e5c6-403d-ac57-bac0d1d7b360.png)'
- en: '**N-RAND** generates *N* points in a given area, and selects the point furthest
    away from the center. **Θ-RAND** does the same, but in a specific sector of the
    circular area. There can be more than just one area to select from. Finally, the
    **Pinwheel** mechanism differs from **N-RAND** and **θ-RAND** because it does
    not generate random distances for the points, and instead defines a specific one
    for each angle in the circumference, making the selection of the radius a more
    deterministic process when generating random points. In this case, the only random
    variable in the generation process is the angle *α*. The formula to calculate
    the radius for a given angle, *α*, is presented in **(1)**, as follows:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**N-RAND**在给定区域内生成 *N* 个点，并选择离中心最远的点。**Θ-RAND**做同样的事情，但在圆形区域的特定扇区。可以选择的领域可能不止一个。最后，**Pinwheel**机制与**N-RAND**和**θ-RAND**不同，因为它不为点生成随机距离，而是为圆周上的每个角度定义一个特定的距离，这使得在生成随机点时选择半径的过程更加确定。在这种情况下，生成过程中的唯一随机变量是角度
    *α*。计算给定角度 *α* 的半径的公式在**（1**）中给出，如下所示：'
- en: '![](img/4fadf42d-3da5-407e-9026-f2fb77a9f503.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4fadf42d-3da5-407e-9026-f2fb77a9f503.png)'
- en: Where *φ* is a preset parameter defined by the user, it determines the amplitude
    of the wings of geometry, which resembles a pinwheel.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *φ* 是用户定义的预设参数，它决定了几何形状的翼幅，类似于螺旋桨。
- en: 'The lower the value of *φ*, the more wings the pinwheel will have, but those
    wings will also be thinner; on the other hand, the higher the value, the fewer
    the number of *wider* wings:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '*φ* 的值越低，螺旋桨的叶片就越多，但那些叶片也会越薄；另一方面，值越高，更宽的叶片数量就越少：'
- en: '![](img/b84090a8-9263-4ce2-8261-53d2705baa98.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/b84090a8-9263-4ce2-8261-53d2705baa98.png)'
- en: Once the locations have been altered, it is very unlikely that you will be able
    to recover the original information; however, filtering noise techniques are available
    in the literature that reduce the impact of alterations and allow a better estimation
    of the location data. One of these mechanisms for noise-filtering is based on
    an **exponential moving average** (**EMA**) called Tis-Bad *[9]*.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦位置被更改，你几乎不可能恢复原始信息；然而，文献中提供了过滤噪声的技术，这些技术可以减少更改的影响，并允许更好地估计位置数据。其中一种基于噪声过滤的机制是一个称为Tis-Bad
    *[9]* 的**指数移动平均**（**EMA**）。
- en: There is still an open discussion on how much degradation of the location information
    is sufficient to provide location privacy to users, and moreover, if the resulting
    obfuscated information remains useful when accessing a LBS. After all, obtaining
    relevant responses while performing geospatial analysis is one of the main issues
    regarding LBS and the study of geo-referenced data.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 关于多少位置信息的退化足以提供给用户位置隐私，以及当访问LBS时，由此产生的模糊信息是否仍然有用，仍然存在开放讨论。毕竟，在进行地理空间分析时获得相关响应是LBS和地理参考数据研究的主要问题之一。
- en: Getting ready
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'In this recipe, we will create PLPGSQL functions that implement three noise-based
    obfuscation mechanisms: Rand, N-Rand, and Pinwheel. Then we will create a trigger
    function for a table in order to alter all newly inserted points. For this chapter,
    we will reuse the `rk_track_points` dataset used in [Chapter 3](68d3e400-24be-4757-ab79-5b395dd79f3c.xhtml),
    *Working with Vector Data – The Basics*.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们将创建实现三种基于噪声的混淆机制的PLPGSQL函数：Rand、N-Rand和Pinwheel。然后我们将为表创建一个触发函数以更改所有新插入的点。对于本章，我们将重用[第3章](68d3e400-24be-4757-ab79-5b395dd79f3c.xhtml)，*处理矢量数据——基础知识*中使用的`rk_track_points`数据集。
- en: In this recipe, we will use the `ST_Project` function to add noise to a single
    point. Then, we will compare the original data with obfuscated data in QGIS. Finally,
    we will show the impact of noise filtering on the obfuscated data.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们将使用`ST_Project`函数向单个点添加噪声。然后，我们将比较原始数据与QGIS中的混淆数据。最后，我们将展示噪声过滤对混淆数据的影响。
- en: You will also need to extract the `data/chp03/runkeeper-gpx.zip` file to `working/chp12/runkeeper_gpx`.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 您还需要将`data/chp03/runkeeper-gpx.zip`文件提取到`working/chp12/runkeeper_gpx`。
- en: In the recipe, we will use some of the same steps as in [Chapter 3](68d3e400-24be-4757-ab79-5b395dd79f3c.xhtml),
    *Working with Vector Data – The Basics*, but for a new schema.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在菜谱中，我们将使用与[第3章](68d3e400-24be-4757-ab79-5b395dd79f3c.xhtml)，*处理矢量数据——基础知识*中相同的步骤，但针对一个新的模式。
- en: First, be sure of the format of the `.gpx` files that you need to import to
    PostGIS. Open one of them and check the file structure—each file must be in the
    XML format, composed of one `<trk>` element, which contains just one `<trkseg>`
    element, which contains multiple `<trkpt>` elements (the points stored from the
    runner's GPS device).
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，请确保您需要导入到PostGIS中的`.gpx`文件的格式。打开其中一个文件并检查文件结构——每个文件都必须是XML格式，由一个`<trk>`元素组成，该元素包含一个`<trkseg>`元素，该元素包含多个`<trkpt>`元素（从跑步者的GPS设备存储的点）。
- en: How to do it...
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: 'Carry out the following steps to create the functions:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以创建函数：
- en: 'Create a new schema named `chp12` to store the data for all the recipes in
    this chapter using the following command:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令创建一个名为`chp12`的新模式以存储本章中所有菜谱的数据：
- en: '[PRE0]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The implementation of `Rand` requires the creation of a PLPGSQL function that
    receives the `radius` parameter, which defines the maximum distance, and the geometry
    `the_geom` to be altered.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Rand`的实现需要创建一个PLPGSQL函数，该函数接收`radius`参数，它定义了最大距离，以及要更改的几何`the_geom`。'
- en: 'The `ST_Project` function will move the point to a given distance and angle
    from its original location. In order to simplify the expression, we will use polar
    noise generation. Execute the following SQL command:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '`ST_Project`函数将点移动到其原始位置给定距离和角度的位置。为了简化表达式，我们将使用极坐标噪声生成。执行以下SQL命令：'
- en: '[PRE1]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The implementation of N-Rand requires the `n` parameter, the number of trials
    to look for the longest distance from the original point, and the `radius` parameter,
    which defines the maximum distance, and the geometry `the_geom` to be altered.
    Execute the following SQL command:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`N-Rand`的实现需要`n`参数，即查找从原始点最长距离的尝试次数，以及`radius`参数，它定义了最大距离，以及要更改的几何`the_geom`。执行以下SQL命令：'
- en: '[PRE2]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The implementation of Pinwheel requires the `n` parameter, the number of trials
    to look for the longest distance from the original point, and the `radius` parameter,
    which defines the maximum distance, and the geometry `the_geom` to be altered.
    Execute the following SQL command:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Pinwheel`的实现需要`n`参数，即查找从原始点最长距离的尝试次数，以及`radius`参数，它定义了最大距离，以及要更改的几何`the_geom`。执行以下SQL命令：'
- en: '[PRE3]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Now we will replicate part of the steps in [Chapter 3](68d3e400-24be-4757-ab79-5b395dd79f3c.xhtml), *Working
    with Vector Data – The Basics*, but for the schema `chp12`. Create the `chp12.rk_track_points`
    table in PostgreSQL by executing the following command lines:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将复制[第3章](68d3e400-24be-4757-ab79-5b395dd79f3c.xhtml)中的一部分步骤，*处理矢量数据——基础知识*，但针对`chp12`模式。通过执行以下命令行在PostgreSQL中创建`chp12.rk_track_points`表：
- en: '[PRE4]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: As an example, let's use the `nrand` function to create a trigger for all the
    new points inserted in the `rk_track_points` table. In order to simulate this,
    we will create a new table that we will use.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 例如，让我们使用`nrand`函数为`rk_track_points`表中所有新插入的点创建触发器。为了模拟这种情况，我们将创建一个新表，我们将使用它。
- en: 'This function will return a new geometry:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 此函数将返回一个新的几何体：
- en: '[PRE5]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Create the following script to import all of the `.gpx` files in the `chp12.rk_track_points`
    table using the GDAL `ogr2ogr` command.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建以下脚本，使用 GDAL 的 `ogr2ogr` 命令导入 `chp12.rk_track_points` 表中的所有 `.gpx` 文件。
- en: 'The following is the Linux version (name it `working/chp03/import_gpx.sh`):'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在 Linux 版本（命名为 `working/chp03/import_gpx.sh`）：
- en: '[PRE6]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The following is the Windows version (name it `working/chp03/import_gpx.bat`):'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在 Windows 版本（命名为 `working/chp03/import_gpx.bat`）：
- en: '[PRE7]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'In Linux, don''t forget to assign an execution permission to it before running.
    Run the following script:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Linux 中，在运行之前不要忘记为其分配执行权限。运行以下脚本：
- en: '[PRE8]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'In Windows, double-click on the `.bat` file, or run it from the command prompt
    using the following command:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 中，双击 `.bat` 文件，或使用以下命令从命令提示符运行它：
- en: '[PRE9]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Once the insertion command is invoked, the trigger call the `nrand` function,
    alter the incoming geometry in the row and store the new version of the data.
    If we compare the first 10 values of the original table `chp03.rk_track_points`
    with the `chp12.rk_track_points`, it can be seen that they are slightly different,
    due to the added noise. Execute the following query in order to see the results:'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦调用插入命令，触发器将调用 `nrand` 函数，修改行中的传入几何形状并存储数据的新的版本。如果我们比较原始表 `chp03.rk_track_points`
    的前 10 个值与 `chp12.rk_track_points`，可以看出它们略有不同，这是由于添加的噪声造成的。执行以下查询以查看结果：
- en: '[PRE10]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The results of the query are as follows:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 查询的结果如下：
- en: '![](img/82bb510f-fa36-4128-b867-2105e7206f39.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/82bb510f-fa36-4128-b867-2105e7206f39.png)'
- en: 'In order to evaluate the impact of the noise in the data, we will create two
    tables to store the obfuscated data with different noise levels: 500 m and 1 km.
    We will use the previously defined function `rand`. Execute the following SQL
    commands to create the tables:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了评估数据中噪声的影响，我们将创建两个表来存储具有不同噪声级别的模糊化数据：500 米和 1 公里。我们将使用先前定义的函数 `rand`。执行以下
    SQL 命令以创建表：
- en: '[PRE11]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Load the tables in QGIS or your favorite Desktop GIS. The following figure
    shows the comparison of the original data and the obfuscated points by 500 m and
    1 km:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 QGIS 或您喜欢的桌面 GIS 中加载表。以下图显示了原始数据和通过 500 米和 1 公里模糊化的点的比较：
- en: '![](img/a771f031-cd82-444f-9dbe-da916fbc2118.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/a771f031-cd82-444f-9dbe-da916fbc2118.png)'
- en: How it works...
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'In this recipe, we applied three different mechanisms for noise-based location
    obfuscation: Rand, N-Rand, and Pinwheel, defining PostgreSQL functions in PLPGSQL
    for each method. We used one of the functions in a trigger in order to automatically
    alter the incoming data, so that no changes would need to be made on the application
    on the user''s side. In addition, we showed the impact of noise comparing two
    versions of the altered data, so we can better appreciate the impact of the configuration
    noise settings'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们应用了三种基于噪声的位置模糊化机制：Rand、N-Rand 和 Pinwheel，为每种方法在 PLPGSQL 中定义了 PostgreSQL
    函数。我们使用其中一个函数在触发器中自动修改传入的数据，这样在用户端的应用程序上就不需要做出任何更改。此外，我们还展示了通过比较修改后的数据的两个版本来展示噪声的影响，这样我们可以更好地理解配置噪声设置的影响。
- en: In the following recipes, we will look at an implementation of a private information
    retrieval-based LPPM.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下菜谱中，我们将查看基于私有信息检索的 LPPM 的实现。
- en: Creating redundancy in geographical query results
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在地理查询结果中创建冗余
- en: '**Private information retrieval** (**PIR**) LPPMs provide location privacy
    by mapping the spatial context to provide a private way to query a service without
    releasing any location information that could be obtained by third parties.'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '**私有信息检索**（**PIR**）LPPMs 通过将空间上下文映射以提供一种私密的方式来查询服务，而不会泄露任何第三方可能获得的位置信息。'
- en: PIR-based methods can be classified as cryptography-based or hardware-based,
    according to [9]. Hardware-based methods use a special kind of **secure coprocessor** (**SC**)
    that acts as securely protected spaces in which the PIR query is processed in
    a non-decipherable way, as in *[10]*. Cryptography-based techniques only use logic
    resources, and do not require a special physical disposition on either the server
    or client-side.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 根据第 [9] 节，基于 PIR 的方法可以分为基于密码学或基于硬件的方法。基于硬件的方法使用一种特殊的 **安全协处理器**（**SC**），它作为安全保护的空间，PIR
    查询以不可解密的方式处理，如*[10]*所述。基于密码学的技术仅使用逻辑资源，并且不需要服务器或客户端的特殊物理配置。
- en: In *[10]*, the authors present a hybrid technique that uses a cloaking method
    through various-size grid Hilbert curves to limit the search domain of a generic
    cryptography-based PIR algorithm; however, the PIR processing on the database
    is still expensive, as shown in their experiments, and it is not practical for
    a user-defined level of privacy. This is because the method does not allow the
    cloaking grid cell size to be specified by the user, nor can it be changed once
    the whole grid has been calculated; in other words, no new PoIs can be added to
    the system. Other techniques can be found in *[12]*.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在*[10]*中，作者提出了一种混合技术，通过使用不同大小的网格希尔伯特曲线来限制基于密码学的PIR算法的通用搜索域；然而，根据他们的实验，PIR在数据库上的处理仍然昂贵，对于用户定义的隐私级别来说并不实用。这是因为该方法不允许用户指定伪装网格单元格的大小，一旦整个网格计算完成，也不能更改；换句话说，无法向系统中添加新的兴趣点。其他技术可以在*[12]*中找到。
- en: PIR can also be combined with other techniques to increase the level of privacy.
    One type of compatible LPPM is the dummy query-based technique, where a set of
    random fake or dummy queries are generated for arbitrary locations within the
    greater search area (city, county, state, for example)  *[13]*, *[14]*. The purpose
    of this is to hide the one that the user actually wants to send.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: PIR也可以与其他技术结合使用，以增加隐私级别。一种兼容的LPPM是模拟查询技术，为更大搜索区域（例如城市、县、州）内的任意位置生成一组随机虚假或模拟查询*[13]*，*[14]*。其目的是隐藏用户实际想要发送的位置。
- en: The main disadvantage of the dummy query technique is the overall cost of sending
    and processing a large number of requests for both the user and the server sides.
    In addition, one of the queries will contain the original exact location and point
    of interest of the user, so the original trajectory could still be traced based
    on the query records from a user - especially if no intelligence is applied when
    generating the dummies. There are improvements to this method discussed in *[15]*,
    where rather than sending each point on a separate query, all the dummy and real
    locations are sent along with the location interest specified by the user. In
    *[16]*, the authors propose a method to avoid the random generation of points
    for each iteration, which should reduce the possibility of detecting the trend
    in real points; but this technique requires a lot of resources from the device
    when generating trajectories for each dummy path, generates separate queries per
    path, and still reveals the user's location.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 模拟查询技术的缺点主要是用户和服务器端发送和处理大量请求的整体成本。此外，其中一个查询将包含用户原始的确切位置和兴趣点，因此可以根据用户的查询记录追踪原始轨迹——尤其是在生成模拟数据时没有应用智能的情况下。在*[15]*中讨论了对此方法的改进，其中不是为每个点发送单独的查询，而是将所有模拟和真实位置以及用户指定的位置兴趣点一起发送。在*[16]*中，作者提出了一种方法来避免为每个迭代随机生成点，这应该会减少检测真实点趋势的可能性；但此技术在为每个模拟路径生成轨迹时需要大量设备资源，为每条路径生成单独的查询，并且仍然揭示了用户的位置。
- en: The LPPM presented as an example in this book is MaPIR – a Map-based PIR *[17]*.
    This is a method that applies a mapping technique to provide a common language
    for the user and server, and that is also capable of providing redundant answers
    to single queries without overhead on the server-side, which, in turn, can improve
    response time due to a reduction in its use of geographical queries.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 本书作为示例介绍的LPPM是MaPIR——基于地图的PIR*[17]*。这是一种将映射技术应用于提供用户和服务器之间的通用语言的方法，并且还能够为单个查询提供冗余答案，而不会在服务器端产生开销，这反过来可以减少对地理查询的使用，从而提高响应时间。
- en: 'This technique creates a redundant geographical mapping of a certain area that
    uses the actual coordinate of the PoI to generate IDs on a different search scale.
    In the MaPIR paper, the decimal digit of the coordinate that will be used for
    the query. Near the Equator, each digit can be approximated to represent a certain
    distance, as shown in the following figure:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 此技术创建了一个特定区域的冗余地理映射，使用实际坐标的PoI在不同搜索尺度上生成ID。在MaPIR论文中，用于查询的坐标的十进制位数。接近赤道时，每个数字可以近似表示一定的距离，如下面的图所示：
- en: '![](img/85f74902-b81b-49a9-b1a8-f23e13834793.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/85f74902-b81b-49a9-b1a8-f23e13834793.png)'
- en: This can be generalized by saying that nearby locations will appear close at
    larger scales (closer to the integer portion of the location), but not necessarily
    in smaller ones. It could also show relatively far away points as though they
    were closer, if they share the same set of digits (nth digit of latitude and nth
    digit of longitude).
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以概括为说，在较大的比例尺下（接近位置的整数部分），附近的地点将看起来很近，但在较小的比例尺下不一定如此。它也可能将相对较远的点显示得似乎更近，如果它们共享相同的数字集（纬度和经度的第n位数字）。
- en: 'Once the digits have been obtained, depending on the selected scale, a mapping
    technique is needed to reduce the number to a single ID. On paper, a simple pseudo-random
    function is applied to reduce the two-dimensional domain to a one-dimensional
    one:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦获得了数字，根据所选的比例尺，需要一个映射技术将数字减少到单个ID。在纸上，应用了一个简单的伪随机函数将二维域减少到一维：
- en: '[PRE12]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'In the preceding equation, we can see that `p` is the next prime number to
    the maximum desired ID. Given that for the paper the maximum ID was **9**, the
    value of `p` is **11**. After applying this function, the final map looks as follows:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的方程中，我们可以看到`p`是比最大期望ID大的下一个素数。鉴于论文中的最大ID是**9**，`p`的值是**11**。应用此函数后，最终的地图看起来如下：
- en: '![](img/f6a4051d-011a-4a32-b113-c4be8ba8039a.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f6a4051d-011a-4a32-b113-c4be8ba8039a.png)'
- en: The following figure shows a sample **PoI ID** that represents a restaurant
    located at **10.964824,-74.804778**. The final mapping grid cells will be **2**,
    **6**, and **1**, using the scales k = 3, 2, and 1 respectively.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了一个示例**PoI ID**，它代表位于**10.964824,-74.804778**的餐厅。最终的映射网格单元将是**2**，**6**，和**1**，分别使用比例尺k
    = 3，2，和1。
- en: 'This information can be stored on a specific table in the database, or as the
    DBA determined best for the application:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 这些信息可以存储在数据库中的特定表中，或者按照DBA为应用程序确定的最佳方式：
- en: '![](img/11b1eb59-2888-4f6d-82af-7c9a67c85bde.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](img/11b1eb59-2888-4f6d-82af-7c9a67c85bde.png)'
- en: Based on this structure, a query generated by a user will need to define the
    scale of search (within 100 m, 1 km, and so on), the type of business they are
    looking for, and the grid cell they are located. The server will receive the parameters
    and look for all restaurants in the same cell ID as the user. The results will
    return all restaurants located in the cells with the same ID, even if they are
    not close to the user. Given that cells are indistinguishable, an attacker that
    gains access to the server's log will only see that a user was in 1 of 10 cell
    IDs. Of course, some of the IDs may fall in inhabitable areas (such as in a forest
    or lake), but some level of redundancy will always be present.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 基于这个结构，用户生成的查询将需要定义搜索的比例尺（在100米内，1公里等），他们要寻找的业务的类型，以及他们所在的网格单元。服务器将接收参数并查找与用户相同单元格ID的所有餐厅。结果将返回位于具有相同ID的单元格中的所有餐厅，即使它们离用户不远。鉴于单元格是不可区分的，如果攻击者获得了服务器的日志访问权限，他们将只会看到用户在10个单元格ID中的1个。当然，一些ID可能位于不可居住的地区（如森林或湖泊），但总会有一定程度的冗余。
- en: Getting ready
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: In this recipe, we will focus on the implementation of the MaPIR technique as
    an example of a PIR and dummy query-based LPPM. For this, a small dataset of supermarkets
    is loaded on the database as PoIs. These points will be processed and stored as
    explained in MaPIR, and then queried by a user.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们将重点关注MaPIR技术的实现，作为一个基于PIR和虚拟查询的LPPM的例子。为此，我们将一个小型超市数据集加载到数据库中作为PoIs。这些点将按照MaPIR中解释的方式进行处理和存储，然后由用户进行查询。
- en: 'The dataset was obtained from the Colombian open data platform *Datos Abiertos* at
    the following link:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集是从哥伦比亚开放数据平台*Datos Abiertos*通过以下链接获得的：
- en: '[https://www.datos.gov.co/Comercio-Industria-y-Turismo/Mapa-supermercados-Guadalajara-de-Buga/26ma-3v68](https://www.datos.gov.co/Comercio-Industria-y-Turismo/Mapa-supermercados-Guadalajara-de-Buga/26ma-3v68)'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.datos.gov.co/Comercio-Industria-y-Turismo/Mapa-supermercados-Guadalajara-de-Buga/26ma-3v68](https://www.datos.gov.co/Comercio-Industria-y-Turismo/Mapa-supermercados-Guadalajara-de-Buga/26ma-3v68)'
- en: 'The points in the dataset are presented in the following figure:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集中的点在以下图中展示：
- en: '![](img/36415eb4-cb45-4023-be00-22cab43bd9e4.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](img/36415eb4-cb45-4023-be00-22cab43bd9e4.png)'
- en: How to do it...
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: 'In the preceding recipe, we created temporary tables to store original data,
    as well as tables containing MaPIR information to be queried later by users. The
    following steps allow other users to access those tables:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的菜谱中，我们创建了临时表来存储原始数据，以及包含要稍后由用户查询的MaPIR信息的表。以下步骤允许其他用户访问这些表：
- en: 'First, create the table `supermarkets` to store the information extracted from
    the dataset, and the table `supermarkets_mapir` to store the MaPIR-related information
    for each supermarket register. Execute the following command:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，创建名为 `supermarkets` 的表来存储从数据集中提取的信息，以及名为 `supermarkets_mapir` 的表来存储每个超市登记处的
    MaPIR 相关信息。执行以下命令：
- en: '[PRE13]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Now, create a trigger function that will be applied to all the new registers
    inserted in the table `supermarkets`, so that the new registers will be inserted
    in the `supermarkets_mapir` table, calculating the `cellid` and `levelid` values.
    The following code will create the function:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，创建一个触发函数，该函数将应用于 `supermarkets` 表中插入的所有新登记项，以便新登记项将被插入到 `supermarkets_mapir`
    表中，计算 `cellid` 和 `levelid` 值。以下代码将创建该函数：
- en: '[PRE14]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Given that the dataset is not properly organized, we extracted the location
    information of the supermarkets and built the following query. After the execution,
    both tables `supermarkets` and `supermarkets_mapir` should be populated. Execute
    the following command:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于数据集没有正确组织，我们提取了超市的位置信息并构建了以下查询。执行后，`supermarkets` 和 `supermarkets_mapir` 两个表都应该被填充。执行以下命令：
- en: '[PRE15]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Now, all the supermarkets inserted in the `supermarket` table will have their
    MaPIR-related information in the `supermarkets_mapir` table. The following query
    will illustrate the information stored in the `supermarkets_mapir` table for a
    given register:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，所有插入到 `supermarket` 表中的超市都将有它们在 `supermarkets_mapir` 表中的 MaPIR 相关信息。以下查询将说明为给定登记项存储在
    `supermarkets_mapir` 表中的信息：
- en: '[PRE16]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The result of the query is shown in the following table:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 查询的结果如下表所示：
- en: '![](img/15a3f8b6-c2bc-4288-b790-db5f53e8f11b.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/15a3f8b6-c2bc-4288-b790-db5f53e8f11b.png)'
- en: Now that the `supermarket` data is ready, assume that a user is at the coordinates
    `(-76.299017, 3.901726)`, which matches the location of one of the supermarkets,
    and that they want to use the scale 2 (the second decimal digit corresponding
    to a grid cell size of approximately 1 km² by the Equator).
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，超市数据已经准备好了，假设用户位于坐标 `(-76.299017, 3.901726)`，这符合某个超市的位置，并且他们想使用比例尺 2（对应于赤道附近大约
    1 km² 的网格单元大小）。
- en: 'The mobile app should generate a query asking for `levelid = 2` and a `cellid
    = 9`, calculated from the second decimal digit from `latitude = 0`, and `longitude
    = 9` on the second decimal digit. This calculation can be verified on the mapping
    table previously shown, with `Lat Nth +1 = 1` and `Long Nth + 1 = 10`:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 移动应用应生成一个查询，请求 `levelid = 2` 和 `cellid = 9`，这些值是从 `latitude = 0` 和 `longitude
    = 9` 的第二位十进制数字计算得出的。这个计算可以在之前显示的映射表中验证，其中 `Lat Nth +1 = 1` 和 `Long Nth + 1 = 10`：
- en: '[PRE17]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Note that there is no need for any geographical information in the query anymore,
    because the mapping was done during the pre-processing stage. This reduces the
    query time, because it does not require the use of complex internal functions
    to determine distance; however, mapping cannot guarantee that all nearby results
    will be returned, as results in adjacent cells with different IDs may not appear.
    In the following figure, you can see that the supermarkets from the previous query
    (in black) do not include some of the supermarkets that are near the user''s location
    (in white near the arrow). Some possible counter-measures can be applied to tackle
    this, such as double-mapping some of the elements close to the edges of the grid
    cells:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，查询中不再需要任何地理信息，因为映射是在预处理阶段完成的。这减少了查询时间，因为它不需要使用复杂的内部函数来确定距离；然而，映射不能保证返回所有附近的结果，因为相邻单元中具有不同
    ID 的结果可能不会出现。在以下图中，你可以看到之前查询中的超市（黑色）没有包括一些靠近用户位置（白色，靠近箭头）的超市。可以应用一些可能的对策来解决这个问题，例如对网格单元边缘附近的一些元素进行双重映射：
- en: '![](img/a8be935a-adae-4e3d-911b-aeff4a68874a.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a8be935a-adae-4e3d-911b-aeff4a68874a.png)'
- en: How it works...
  id: totrans-127
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In this recipe, we implemented an LPPM that uses PIR and a dummy query called
    MaPIR. It created a mapping function for points of interest that allowed us to
    query using different scales. It also included redundancy in the answer, providing
    privacy protection, as it did not reveal the actual location of the user.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，我们实现了一个使用 PIR 和一个名为 MaPIR 的虚拟查询的 LPPM。它为兴趣点创建了一个映射函数，使我们能够使用不同的比例尺进行查询。它还包括了冗余答案，提供隐私保护，因为它没有透露用户的实际位置。
- en: The process required for calculating the mapping of a dataset should be stored
    in a table that will be used for a user’s queries. In the MaPIR paper, it was
    shown that despite the multiple results, the execution time of the MaPIR queries
    took less than half the time, compared to the geopraphical queries based on distance.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 计算数据集映射的过程应存储在用于用户查询的表中。在MaPIR论文中，尽管有多个结果，但MaPIR查询的执行时间比基于距离的地理查询时间少了一半。
- en: References
  id: totrans-130
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: European Union Directive on Privacy and Electronic Communications, 2002.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 欧洲联盟关于隐私和电子通信的指令，2002年。
- en: '*M. Duckham* and *L. Kulik*, *Location Privacy and Location-aware Computing*,
    Dyn. Mob. GIS Investig. Chang. Sp. time, vol. 3, pp. 35–51, 2006.'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*M. Duckham* 和 *L. Kulik*，《位置隐私和位置感知计算》，动态移动GIS研究变化空间，第3卷，第35-51页，2006年。'
- en: '*J. Krumm*, *Inference Attacks on Location Tracks*, in Pervasive Computing.
    Springer, 2007, pp. 127-143.'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*J. Krumm*，《对位置轨迹的推理攻击》，收录于《普适计算》。Springer，2007年，第127-143页。'
- en: '*M. A. Labrador*, *A. J. Perez*, and *P. Wightman*. *Location-based Information
    Systems: Developing Real-time Tracking Applications*. Boca Raton: CRC Press, 2011.'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*M. A. Labrador*，*A. J. Perez*，和 *P. Wightman*，《基于位置的信息系统：开发实时跟踪应用》。波卡罗顿：CRC出版社，2011年。'
- en: '*M. Duckham* and *L. Kulik*, *A Formal Model of Obfuscation and Negotiation
    for Location Privacy*, in *Pervasive Computing. Springer*, 2005, pp. 152-170.'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*M. Duckham* 和 *L. Kulik*，《位置隐私和位置感知计算的形式模型》，收录于《普适计算》。Springer，2005年，第152-170页。'
- en: '*P. Wightman*, *W. Coronell*, *D. Jabba*, *M. Jimeno*, and *M. Labrador*, *Evaluation
    of Location Obfuscation Techniques for Privacy in Location-based Information Systems*,
    in Communications (LATINCOM), 2011 IEEE Latin-American Conference on, pp. 1-6.'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*P. Wightman*，*W. Coronell*，*D. Jabba*，*M. Jimeno*，和 *M. Labrador*，《基于位置信息系统的位置模糊化技术隐私评估》，收录于《通信（LATINCOM）第2011年IEEE拉丁美洲会议》，第1-6页。'
- en: '*P. Wightman*, *M. Zurbarán*, *E. Zurek*, *A. Salazar*, *D. Jabba*, and *M.
    Jimeno*, *θ-Rand: Random Noise-based Location Obfuscation Based on Circle Sectors*,
    in IEEE International Symposium on Industrial Electronics and Applications (ISIEA)
    on, 2013.'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*P. Wightman*，*M. Zurbarán*，*E. Zurek*，*A. Salazar*，*D. Jabba*，和 *M. Jimeno*，《基于圆扇区的随机噪声位置模糊化：θ-Rand》，收录于IEEE国际工业电子与应用研讨会（ISIEA），2013年。'
- en: '*P. Wightman*, *M. Zurbarán*, and *A. Santander*, *High Variability Geographical
    Obfuscation for Location Privacy*, 2013 47th International Carnahan Conference
    on Security Technology (ICCST), Medellin, 2013, pp. 1-6.'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*P. Wightman*，*M. Zurbarán*，和 *A. Santander*，《高变异性地理模糊化以保护位置隐私》，2013年第47届国际卡纳汉安全技术会议（ICCST），麦德林，2013年，第1-6页。'
- en: '*A. Labrador*, *P. Wightman*, *A. Santander*, *D. Jabba*, *M. Jimeno*, *Tis-Bad:
    A Time Series-Based Deobfuscation Algorithm*, in Investigación e Innovación en
    Ingenierías. Universidad Simón Bolívar. Vol. 3 (1), pp. 1 - 8\. 2015.'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*A. Labrador*，*P. Wightman*，*A. Santander*，*D. Jabba*，*M. Jimeno*，《基于时间序列的解模糊化算法：Tis-Bad》，收录于《工程研究与创新》。西蒙·玻利瓦尔大学。第3卷（1），第1-8页。2015年。'
- en: '*A. Khoshgozaran*, *H. Shirani-Mehr*, and *C. Shahabi*, *SPIRAL: A Scalable
    Private Information Retrieval Approach to Location Privacy*, in Mobile Data Management
    Workshops, 2008\. MDMW 2008\. Ninth International Conference on, pp. 55-62.'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*A. Khoshgozaran*，*H. Shirani-Mehr*，和 *C. Shahabi*，《SPIRAL：一种可扩展的私有信息检索方法以保护位置隐私》，收录于移动数据管理研讨会，2008年。MDMW
    2008。第九届国际会议，第55-62页。'
- en: '*F. Olumofin*, *P. K. Tysowski*, *I. Goldberg*, and *U. Hengartner*, *Achieving
    Efficient Query Privacy for Location-based Services*, in Privacy Enhancing Technologies,
    2010, pp. 93-110.'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*F. Olumofin*，*P. K. Tysowski*，*I. Goldberg*，和 *U. Hengartner*，《实现基于位置服务的有效查询隐私》，收录于《隐私增强技术》，2010年，第93-110页。'
- en: '*G. Ghinita*, *P. Kalnis*, *A. Khoshgozaran*, *C. Shahabi*, and *K. Tan*, *Private
    queries in location-based services: Anonymizers are not necessary*, in Proceedings
    of the 2008 ACM SIGMOD International Conference on Management of Data, pp. 121-132.'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*G. Ghinita*，*P. Kalnis*，*A. Khoshgozaran*，*C. Shahabi*，和 *K. Tan*，《基于位置服务的私有查询：匿名化器不是必要的》，收录于2008年ACM
    SIGMOD国际数据管理会议论文集，第121-132页。'
- en: '*D. Quercia*, *I. Leontiadis*, *L. McNamara*, *C. Mascolo*, and *J. Crowcroft*,
    *SpotME if you can: Randomized Responses for Location Obfuscation on Mobile Phones*,
    in *Distributed Computing Systems (ICDCS), 2011 31st International Conference
    on,* 2011, pp. 363-372.'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*D. Quercia*，*I. Leontiadis*，*L. McNamara*，*C. Mascolo*，和 *J. Crowcroft*，《如果你能SpotME：在手机上的位置模糊化随机响应》，收录于《分布式计算系统（ICDCS）第31届国际会议》，2011年，第363-372页。'
- en: '*H. Kido*, *Y. Yanagisawa*, and *T. Satoh*, *An Anonymous Communication Technique
    using Dummies for Location-based Services*, in *Pervasive Services, 2005\. ICPS
    ''05\. Proceedings. International Conference on,* pp. 88-97.'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*H. Kido*，*Y. Yanagisawa*，和 *T. Satoh*，*使用替身的位置服务匿名通信技术*，在*普适服务，2005\. ICPS
    ''05\. 国际会议论文集*，第88-97页。'
- en: '*H. Lu*, *C. S. Jensen*, and *M. L. Yiu*, *Pad: Privacy-area aware, dummy-based
    location privacy in mobile services*, in *Proceedings of the Seventh ACM International
    Workshop on Data Engineering for Wireless and Mobile Access*, pp. 16-23.'
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*H. Lu*，*C. S. Jensen*，和 *M. L. Yiu*，*Pad: 移动服务中的隐私区域感知、基于替身的位置隐私*，在*第七届ACM国际无线和移动访问数据工程研讨会论文集*，第16-23页。'
- en: '*P. Shankar*, *V. Ganapathy*, and *L. Iftode* (2009, September), *Privately
    Querying Location-based Services with sybilquery*. In Proceedings of the 11th
    international conference on Ubiquitous computing, 2009, pp. 31-40.'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*P. Shankar*，*V. Ganapathy*，和 *L. Iftode*（2009年9月），*使用sybilquery对基于位置的服务进行隐私查询*。在2009年第11届国际普适计算会议论文集中，第31-40页。'
- en: '*P. M. Wightman*, *M. Zurbarán*, *M. Rodríguez*, and *M. A. Labrador*, *MaPIR:
    Mapping-based Private Information Retrieval for Location Privacy in LBISs*, 38th
    Annual IEEE Conference on Local Computer Networks - Workshops, Sydney, NSW, 2013,
    pp. 964-971.'
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*P. M. Wightman*, *M. Zurbarán*, *M. Rodríguez*, 和 *M. A. Labrador*，*MaPIR:
    基于映射的隐私信息检索在LBISs中的位置隐私*，38届IEEE年度局部计算机网络会议 - 工作坊，悉尼，新南威尔士州，2013年，第964-971页。'
