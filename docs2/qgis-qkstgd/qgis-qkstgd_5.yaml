- en: Creating Maps
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建地图
- en: '0In this chapter, we will be creating maps using QGIS. We will use the styling
    and the data from the previous chapter. We will look at labeling features, before
    building a map using the data. QGIS is very good at creating maps. Have a look
    at this gallery to get an idea of the capabilities of QGIS: [https://www.flickr.com/groups/qgis/pool/](https://www.flickr.com/groups/qgis/pool/).'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将使用QGIS创建地图。我们将使用上一章中的样式和数据。在构建地图之前，我们将查看标签功能。QGIS在创建地图方面非常出色。查看这个画廊以了解QGIS的功能：[https://www.flickr.com/groups/qgis/pool/](https://www.flickr.com/groups/qgis/pool/)。
- en: 'The topics covered in this chapter are as follows:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章涵盖的主题如下：
- en: Labeling
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标签
- en: Creating maps
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建地图
- en: Saving and exporting maps
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保存和导出地图
- en: Creating an Atlas
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建地图集
- en: Building a web map
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建网络地图
- en: Labeling
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 标签
- en: 'Open the QGIS project we built in [Chapter 4](e8289aa4-8eb7-4d2d-9662-4c17889a53e3.xhtml),
    *Styling Data*. We will be using it to build a map. Turn on the Label Toolbar
    by selecting View | Toolbars and select Label Toolbar. Label Toolbar is shown
    as follows:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 打开我们在[第4章](e8289aa4-8eb7-4d2d-9662-4c17889a53e3.xhtml)，*数据样式*中构建的QGIS项目。我们将使用它来构建地图。通过选择视图
    | 工具栏并选择标签工具栏来打开标签工具栏。标签工具栏如下所示：
- en: '![](img/6f78000c-93ef-4c4f-a4f0-831b0579d2eb.png)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6f78000c-93ef-4c4f-a4f0-831b0579d2eb.png)'
- en: Labeling toolbar
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 标签工具栏
- en: 'There are eight buttons on this toolbar; in order, these are the following:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个工具栏上有八个按钮；按顺序，它们如下：
- en: Clicking on Layer Labeling Options will open the Layer Styling Panel and the
    label tab by default
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点击“图层标签选项”将打开图层样式面板，并默认打开标签选项卡
- en: Layer Diagram Options
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图层图表选项
- en: Highlight Pinned Labels and Diagrams
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 突出显示已锚定的标签和图表
- en: Pin/Unpin Labels And Diagrams
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 锚定/取消锚定标签和图表
- en: Show/Hide Labels And Diagrams
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示/隐藏标签和图表
- en: Move Label and Diagram
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 移动标签和图表
- en: Rotate Label
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 旋转标签
- en: Change Label, used for label editing
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改标签，用于标签编辑
- en: 'Make sure that the `Airports` layer is selected in the Layers panel. Click
    on the layer labeling button on Label Toolbar. This will open the Layer Styling
    Panel; we used this in the previous chapter to style our layers. Choose Single
    labels and the label with NAME to label all `Airports`. I have reduced the Size
    of the text from 10.0000 to 8.0000 points. Make sure that the checkbox next to
    Live update is ticked so any updates can be seen as they are made. This is shown
    in the following screenshot:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 确保在图层面板中选择了“机场”图层。在标签工具栏上点击图层标签按钮。这将打开图层样式面板；我们在上一章中使用它来设置图层样式。选择单个标签和带有NAME的标签来标记所有“机场”。我已经将文本大小从10.0000点减少到8.0000点。确保勾选了“实时更新”旁边的复选框，以便在更新时可以看到任何更改。这在上面的屏幕截图中显示：
- en: '![](img/f1c61a11-c4bb-4c86-ac38-cf9e4689cc64.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f1c61a11-c4bb-4c86-ac38-cf9e4689cc64.png)'
- en: Layer Styling Panel—label design focus
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 图层样式面板——标签设计重点
- en: These are the default labeling options. Any changes you make will be instantly
    seen in the map. Not all labels will be placed perfectly. A good method is to
    try to get as many labels in the best location possible using the Placement tab,
    and then manually move individual labels if they are still not located optimally.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是默认的标签选项。您所做的任何更改都将立即在地图中显示。并非所有标签都将放置得完美。一个好的方法是尽可能多地使用位置选项卡将标签放置在最佳位置，如果它们仍然没有放置得最优，则手动移动单个标签。
- en: 'With the labels tab open, select the Placement tab (the icon with four arrows
    pointing north, south, east, and west). Choose the radio button next to Offset
    from point and click the top middle quadrant in the display. This will move all
    the labels directly north (as you view your map) from the `Airports` icon. Adjust
    Offset X,Y to 0.0000,-2.0000 to exaggerate the distance from the icon. This is
    shown in the following screenshot:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在打开标签选项卡后，选择位置选项卡（带有四个箭头指向北、南、东和西的图标）。选择“从点偏移”旁边的单选按钮，并在显示窗口中点击顶部中间象限。这将使所有标签直接向北（如您查看地图时所见）从“机场”图标移动。调整偏移X，Y为0.0000,-2.0000以夸大与图标的距离。这在上面的屏幕截图中显示：
- en: '![](img/87eaec75-c348-4e01-8f96-8f5a955e52aa.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/87eaec75-c348-4e01-8f96-8f5a955e52aa.png)'
- en: Layer Styling Panel—label Placement focus
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图层样式面板——标签位置重点
- en: 'Now that we have placed the labels, let''s style them using some of the options
    available to us. Click on the buffer tab (the icon shows abc with a blue background).
    Next, check the box next to Draw text buffer. This helps our labels stand out
    more from the map. Click on the customize effects button, check the box next to
    Drop Shadow, and set its Opacity to 50.0%. This is shown in the following screenshot:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经放置了标签，让我们使用我们可用的选项之一来设置它们的样式。点击缓冲区标签（图标显示为蓝色背景下的abc）。接下来，勾选旁边的“绘制文本缓冲区”复选框。这有助于我们的标签从地图中脱颖而出。点击自定义效果按钮，勾选旁边的“阴影”复选框，并将其不透明度设置为50.0%。这如图所示：
- en: '![](img/020af032-6c98-41cf-bcec-fc7bff74bb5e.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/020af032-6c98-41cf-bcec-fc7bff74bb5e.png)'
- en: Layer Styling Panel—label Effects Properties
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 图层样式面板—标签效果属性
- en: 'The map now looks like this:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 地图现在看起来像这样：
- en: '![](img/4b00f7a0-cd71-4679-bb3e-3832dfba50f8.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/4b00f7a0-cd71-4679-bb3e-3832dfba50f8.png)'
- en: Map with layers added
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 添加了图层后的地图
- en: As you can see, there is an issue with labels near the Anchorage International
    Airport. Let's use the interactive Label Toolbar to move these labels manually.
    There are still some labels not being displayed; in the next section, we will
    move them manually.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，靠近安克雷奇国际机场的标签存在问题。让我们使用交互式标签工具栏手动移动这些标签。还有一些标签没有显示；在下一节中，我们将手动移动它们。
- en: Manually moving labels
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 手动移动标签
- en: 'To interactively move a label, click on the Move Label and Diagram button on
    Label Toolbar and accept ID as the primary key. Next, click on a label and move
    it. As you click and drag a label, a placement box appears in green where the
    new location of the label will be. This is shown in the following screenshot:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 要交互式移动一个标签，请点击标签工具栏上的“移动标签和图表”按钮，接受ID作为主键。接下来，点击一个标签并移动它。当你点击并拖动一个标签时，一个放置框以绿色出现在新标签位置。这如图所示：
- en: '![](img/2d855b71-2b8a-412b-ab1b-7a18a4d07fed.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/2d855b71-2b8a-412b-ab1b-7a18a4d07fed.png)'
- en: Placing labels
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 添加标签
- en: 'Keep zooming in and out of the map to ensure your labels are placed where best
    suited to your data. You have many other options that we will not cover in this
    quick start guide, but rotating (as shown highlighted on Label Toolbar as follows)
    is useful, especially on linear features:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 保持放大和缩小地图，以确保你的标签放置在最适合你的数据的位置。你还有许多其他选项，我们不会在本快速入门指南中介绍，但旋转（如图在标签工具栏上突出显示如下）很有用，尤其是在线性特征上：
- en: '![](img/e67a486e-4785-4ded-874f-8573e0c8daf9.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/e67a486e-4785-4ded-874f-8573e0c8daf9.png)'
- en: Label Toolbar
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 标签工具栏
- en: 'The final button on the right of Label Toolbar allows you to change the individual
    properties of one label at a time; size, color, and font size can all be set on
    a label-by-label basis. Your map will look similar to the following screenshot:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 标签工具栏最右侧的按钮允许你一次更改一个标签的个别属性；大小、颜色和字体大小都可以逐个标签设置。你的地图将看起来类似于以下截图：
- en: '![](img/e1204908-3286-4949-9015-89e3f1fb090f.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/e1204908-3286-4949-9015-89e3f1fb090f.png)'
- en: Label placement with adjustment
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 标签放置与调整
- en: If you wanted to label rivers and the grassland areas, apply labels using the
    same tool we have just described.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要标记河流和草地区域，请使用我们刚刚描述的工具应用标签。
- en: We are now ready to bring this all together and make a map.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经准备好将所有这些整合在一起并制作地图。
- en: Making a map in QGIS
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在QGIS中制作地图
- en: Click on Project | New Print Layout (or click the corresponding button on Project
    Toolbar).
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 点击项目 | 新建打印布局（或点击项目工具栏上的相应按钮）。
- en: 'In the Create print layout Title dialog box (shown as follows), give your new,
    empty map a title and click OK:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建打印布局标题对话框（如下所示）中，给你的新、空地图添加一个标题并点击确定：
- en: '![](img/1326570d-a2db-44b4-a270-a39cdb489ebf.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/e67a486e-4785-4ded-874f-8573e0c8daf9.png)'
- en: Creating a new print layout
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的打印布局
- en: 'You will now have an empty canvas on which we will build our map. Add your
    map to the layout canvas via the menu by going to Add Item | Add Map. Then, click
    and drag the mouse to draw on the canvas in the location you want to put your
    map. This will add an Item called Map 1; we will add more items later. This is
    shown in the following screenshot:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你将有一个空白的画布，我们将在其上构建我们的地图。通过菜单进入添加项目 | 添加地图，将你的地图添加到布局画布中。然后，点击并拖动鼠标在你想放置地图的位置绘制画布。这将添加一个名为“地图
    1”的项目；我们稍后会添加更多项目。这如图所示：
- en: '![](img/b3b79f56-e1b7-4234-8cb4-59ca56f33db3.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/b3b79f56-e1b7-4234-8cb4-59ca56f33db3.png)'
- en: Map layout
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 地图布局
- en: Please note that for ease of reading this book, the label size has been increased.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，为了便于阅读本书，标签大小已经增加。
- en: For this reason you will find that the screen shots are slightly different to
    your screen.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，你会发现屏幕截图与你的屏幕略有不同。
- en: 'With Map 1 selected, click on the Item Properties tab and set the scale to
    `12000000`, as this will display all our data on the page. Ensure that Toolbox
    Toolbar is enabled (View | Toolbars | Toolbox). This is a very useful toolbar
    as it allow us to design our page. Click on the Move Item Content button, highlighted
    as follows:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 选择“地图1”，点击“项目属性”选项卡，并将比例设置为`12000000`，这样就可以在页面上显示所有数据。确保工具箱工具栏已启用（视图 | 工具栏 |
    工具箱）。这是一个非常有用的工具栏，因为它允许我们设计我们的页面。点击“移动项目内容”按钮，如下所示：
- en: '![](img/9d962782-3226-4687-829e-0b4a72a8e638.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/9d962782-3226-4687-829e-0b4a72a8e638.png)'
- en: Move item button—used to move an item on the map
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 移动项目按钮——用于在地图上移动项目
- en: This tool allows us to move the data in the map around so it best fits the page.
    When you are happy it is in the right place, click on Pan Map (the hand icon).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 这个工具允许我们将地图中的数据移动到最佳位置以适应页面。当你满意它在正确的位置时，点击“平移地图”（手形图标）。
- en: To add a legend, click on the add legend button. Draw an area where the legend
    will appear on the map. The legend may appear messy at first, but we can adjust
    it in Item Properties. Make sure that the legend is selected in the Items panel,
    and then from the Item Properties tab add a title (Legend) and uncheck the auto
    update checkbox. We can remove any layers appearing in the legend that we don't
    want. In the map, the `Hillshade` and `landcover` rasters are still there. To
    remove these, click on the layer name and then click on the red minus button to
    remove it from the legend. If you wanted to add a layer back, then click on the
    green cross to bring up a list of layers to select. To finish the legend, scroll
    down Item Properties and expand Fonts.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加图例，点击添加图例按钮。绘制一个区域，图例将出现在地图上。图例最初可能看起来很杂乱，但我们可以通过“项目属性”进行调整。确保在“项目”面板中选择图例，然后在“项目属性”选项卡中添加一个标题（图例）并取消勾选自动更新复选框。我们可以移除图例中不需要的任何图层。在地图中，“阴影”和“土地覆盖”栅格仍然存在。要移除这些，点击图层名称，然后点击红色减号按钮将其从图例中移除。如果您想将图层添加回来，则点击绿色十字按钮以显示选择图层列表。完成图例后，在“项目属性”中向下滚动并展开字体。
- en: 'Here, set Title font to bold. The map now looks like this:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，将标题字体设置为粗体。现在的地图看起来是这样的：
- en: '![](img/ed16881b-5384-4040-be1f-4b31e9c30197.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ed16881b-5384-4040-be1f-4b31e9c30197.png)'
- en: Map layout with Legend added
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 添加图例的地图布局
- en: Next, add a scalebar. In Toolbox Toolbar, select the scalebar tool and click
    and drag a new scalebar to the lower-right corner of the map. In Item Properties
    for the scalebar, set Style as Double Box and the units to Miles. Change the Label
    for units value from mi to Miles.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，添加一个比例尺。在工具箱工具栏中，选择比例尺工具，并将新的比例尺拖动到地图的右下角。在比例尺的“项目属性”中，将样式设置为“双框”并将单位设置为英里。将单位值的标签从“mi”更改为“Miles”。
- en: Add a north arrow by clicking Add Item | Add Picture and draw a box to contain
    your north arrow. Use the item properties of the north arrow to point to the location
    on your computer where the QGIS SVG files are stored. In this example, I am using
    `C:\OSGeo4W64\apps\qgis\svg\arrows/NorthArrow_11.svg`.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 通过点击“添加项目”|“添加图片”，添加一个指向北方的箭头。使用北方的项目属性来指向计算机上存储QGIS SVG文件的地点。在这个例子中，我使用的是`C:\OSGeo4W64\apps\qgis\svg\arrows\NorthArrow_11.svg`。
- en: 'Now, we need to add a title and a description. To add text to this map, select
    Add Item | Add label. Draw a box in the lower-left corner, and in the Item Properties
    window, copy the following text:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们需要添加一个标题和描述。要将文本添加到这个地图中，选择“添加项目”|“添加标签”。在左下角绘制一个框，然后在“项目属性”窗口中，复制以下文本：
- en: '[PRE0]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Click on Render as HTML.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“渲染为HTML”。
- en: To finish, we can set a background color for the map. Select Map 1 in the Items
    panel and scroll to the background options in the Item Properties. Choose a neutral
    color; I have selected a light gray. Adjust the transparency to a suitable level
    so it doesn't distract the viewer. Select the legend in the Items panel and set
    the background to the same color as the map background.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成，我们可以为地图设置一个背景颜色。在“项目”面板中选择“地图1”，然后在“项目属性”中的背景选项中滚动。选择一个中性颜色；我选择了浅灰色。调整透明度到一个合适的水平，以免分散观众的注意力。在“项目”面板中选择图例，并将其背景设置为与地图背景相同的颜色。
- en: Finally, from the Toolbox Toolbar, click on the Add Shape icon. Choose a rectangle
    and draw around the title. Select it as the item and, in Item Properties, change
    the fill to no fill and the boarder to black (it will be black by default). Then,
    set Corner radius to 3.00, so the corners are rounded in the textbox.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，从工具箱工具栏中，点击添加形状图标。选择一个矩形并围绕标题绘制。选择该项目，然后在“项目属性”中，将填充更改为无填充并将边框设置为黑色（默认为黑色）。然后，将圆角半径设置为3.00，这样文本框的角落就是圆滑的。
- en: 'Your map will look similar to the following screenshot:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 您的地图将类似于以下截图：
- en: '![](img/e767821a-70ec-4858-a140-bc9fa3b80967.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e767821a-70ec-4858-a140-bc9fa3b80967.png)'
- en: Map layout updated in QGIS 3.4
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: QGIS 3.4中更新的地图布局
- en: 'Save your map via Layout | Save Project. To save it as `.pdf`, click Layout
    | Export as pdf. You may need to adjust the export settings, such as dpi values,
    to make the optimal map output. To do this, click on the Layout tab on the right
    of the screen (next to Item Properties). On this screen, you will have the option
    to change a variety of settings. The Layout tab is shown in the following screenshot:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 通过布局 | 保存项目来保存您的地图。要将它保存为`.pdf`格式，请点击布局 | 导出为PDF。您可能需要调整导出设置，例如dpi值，以获得最佳的地图输出。为此，请点击屏幕右侧的布局标签（在项目属性旁边）。在此屏幕上，您将有机会更改各种设置。布局标签如图所示：
- en: '![](img/720b12d4-9690-40ab-936c-0cdb2b447a04.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](img/720b12d4-9690-40ab-936c-0cdb2b447a04.png)'
- en: Layout settings
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 布局设置
- en: Creating an Atlas
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建图集
- en: 'Close the layout we have just created and return to the QGIS main project screen.
    In this example, we are going to create an Atlas of maps of the locations around
    civilian airports. To do this, use the NAME field, which contains only civilian
    airports. Let''s create a new basic layout to show this functionality. We can
    do this by selecting Project | New Print Layout, or via Layout Manager Project
    | Layout Manager. Let''s choose Layout Manager. This is a useful dialog box that
    lists all of our created layouts within a QGIS project. It is shown in the following
    screenshot:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 关闭我们刚刚创建的布局，并返回到QGIS主项目屏幕。在这个例子中，我们将创建一个关于民用机场周边地区的图集。为此，请使用只包含民用机场的NAME字段。让我们创建一个新的基本布局来展示这个功能。我们可以通过选择项目
    | 新打印布局，或者通过布局管理器项目 | 布局管理器来实现。让我们选择布局管理器。这是一个有用的对话框，列出了QGIS项目中的所有创建的布局。如图所示：
- en: '![](img/72d23729-e6ba-4b74-b7cc-b5d69a7e3a40.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](img/72d23729-e6ba-4b74-b7cc-b5d69a7e3a40.png)'
- en: QGIS Layout Manager
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: QGIS布局管理器
- en: 'Select Empty layout and click on Create to open a new blank template. I am
    going to call my new layout `Airport_Atlas`:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 选择空布局并点击创建以打开一个新的空白模板。我将把我的新布局命名为“Airport_Atlas”：
- en: '![](img/88fa9dff-c9d3-4e9b-92ce-f6f16258ca3f.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](img/88fa9dff-c9d3-4e9b-92ce-f6f16258ca3f.png)'
- en: Create a new print layout
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个新的打印布局
- en: 'As we did when creating the Alaska map, select the add new map to layout button,
    and click and drag to fill the map page with the data from the QGIS project. From
    the menu bar, select Atlas | Atlas settings and then check the box next to Generate
    an atlas. Now, select Coverage layer as `Airports` and Page name as NAME. This
    will tell the Atlas to create one page per airport name:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 就像我们在创建阿拉斯加地图时做的那样，选择将新地图添加到布局的按钮，然后点击并拖动以用QGIS项目的数据填充地图页面。从菜单栏中选择图集 | 图集设置，然后勾选“生成图集”旁边的框。现在，选择覆盖层为“机场”和页面名称为“NAME”。这将告诉图集为每个机场名称创建一页：
- en: '![](img/f083490d-550b-429f-a9df-ba064f5dcd96.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f083490d-550b-429f-a9df-ba064f5dcd96.png)'
- en: Options for generating an Atlas
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 生成图集的选项
- en: 'In the Item Properties tab, make sure that Controlled by atlas is checked;
    this will mean the scale/view will adjust to each feature. Next, ensure that the
    Atlas toolbar is turned on. The toolbar is shown in the following screenshot:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在项目属性标签页中，确保已勾选“由图集控制”；这意味着比例/视图将调整到每个要素。接下来，确保大纲工具栏已开启。工具栏如图所示：
- en: '![](img/e6203dc3-dfe5-404e-add3-e867d2ee96e4.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e6203dc3-dfe5-404e-add3-e867d2ee96e4.png)'
- en: Atlas toolbar
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 大纲工具栏
- en: 'Click on the preview button in the Atlas toolbar and use the arrows to scroll
    through the proposed Atlas. This is shown in the following screenshot:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 点击图集工具栏中的预览按钮，并使用箭头滚动查看建议的图集。如图所示：
- en: '![](img/df0c5b09-b483-4783-84c7-efcaef8ac76b.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](img/df0c5b09-b483-4783-84c7-efcaef8ac76b.png)'
- en: Map created in the Atlas function
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 在图集功能中创建的地图
- en: The scale may need adjusting to suit your needs. You can add a title, legend,
    scale bar, and north arrow as we did in the previous example. Once you have finished,
    select Atlas | Export Atlas from the menu as `.pdf` and save to disk. This is
    a simple example, but it shows the basics of creating an Atlas; you only need
    to build one layout to do it. Save and close your layout when finished.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 比例可能需要调整以适应您的需求。您可以添加标题、图例、比例尺和北箭头，就像我们在前面的例子中所做的那样。完成之后，从菜单中选择图集 | 导出图集为`.pdf`并保存到磁盘。这是一个简单的例子，但它展示了创建图集的基本方法；您只需构建一个布局即可完成。完成布局后，保存并关闭它。
- en: Finally, in this chapter, we will have a quick look at creating a map for the
    web.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在本章中，我们将快速浏览创建网络地图的过程。
- en: Creating a web map
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建网络地图
- en: We can do more than just create printed or static digital maps. By creating
    a web map, a user has the ability to have more interaction with a map online.
    QGIS has a plugin that will allow you to display your data as a web map. This
    provides another option for sharing your maps. In this brief example, we will
    introduce QGIS plugins and how the `qgis2web` plugin allows us to create web maps.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不仅可以创建打印或静态的数字地图。通过创建网络地图，用户可以在线与地图进行更多交互。QGIS 有一个插件可以让你将数据以网络地图的形式展示。这为共享地图提供了另一种选择。在这个简短的例子中，我们将介绍
    QGIS 插件以及 `qgis2web` 插件如何让我们创建网络地图。
- en: Plugins are a really powerful and collaborative feature of QGIS. Developers
    and companies have created many plugins that extend the core features of QGIS.
    Some have been so integral to workflows that they have been incorporated into
    the main software. From the Plugins menu, select Manage and Install Plugins.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 插件是 QGIS 中非常强大且具有协作性的功能。开发者和公司已经创建了众多插件，这些插件扩展了 QGIS 的核心功能。其中一些插件已经如此关键，以至于它们被整合到了主软件中。从插件菜单中选择“管理”和“安装插件”。
- en: We will look at plugins more in the following two chapters, [Chapter 6](6cd8f808-67bd-4788-8e7a-ccd3ce12a11d.xhtml),
    *Spatial Processing* and [Chapter 7](bab7139e-9f38-4dff-b1eb-c5056be9c960.xhtml),
    *Expanding QGIS 3*.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的两章中，我们将更详细地探讨插件，[第 6 章](6cd8f808-67bd-4788-8e7a-ccd3ce12a11d.xhtml) *空间处理*
    和 [第 7 章](bab7139e-9f38-4dff-b1eb-c5056be9c960.xhtml) *扩展 QGIS 3*。
- en: 'From the plugin manager, with the ALL tab selected, search for and install
    `qgis2web`. Once installed, close the plugin manager. In the menu, there should
    be an option called Web. From here, select qgis2web | create web map. Adjust Layers
    and Groups to match the map you wish to create. In this example, `Airports`, `majrivers`,
    and `alaska` layers are selected. This map will use the `Leaflet` JavaScript library;
    this is a library designed to create lightweight web maps. A screenshot of qgis2web
    follows:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在插件管理器中，选择“全部”标签，搜索并安装 `qgis2web`。安装完成后，关闭插件管理器。在菜单中，应该有一个名为“网络”的选项。从这里，选择 qgis2web
    | 创建网络地图。调整图层和组以匹配您希望创建的地图。在这个例子中，选择了 `Airports`、`majrivers` 和 `alaska` 图层。这张地图将使用
    `Leaflet` JavaScript 库；这是一个用于创建轻量级网络地图的库。以下是 qgis2web 的截图：
- en: '![](img/fd34e901-9826-482c-91bb-c86d57c32558.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/fd34e901-9826-482c-91bb-c86d57c32558.png)'
- en: The overview of qgis2web plugin for QGIS
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: QGIS qgis2web 插件概述
- en: When you are happy with the configuration, click on the Export button; this
    will save the web map at the location specified as the `Export` folder. Then,
    open the resulting web map in your web browser. You can copy the contents in the
    `Export` folder to a web server to publish the map. The `qgis2web` plugin is a
    very efficient way of creating web maps.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 当你对配置满意时，点击“导出”按钮；这将把网络地图保存到指定的“导出”文件夹中。然后，在您的网络浏览器中打开生成的网络地图。您可以将“导出”文件夹中的内容复制到网络服务器上以发布地图。`qgis2web`
    插件是创建网络地图的一种非常高效的方式。
- en: Summary
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we have built maps with QGIS. We first looked at labeling options,
    both with rules and then interactively changing individual labels. Then, we built
    a map using the data we styled in the previous chapter. We then looked at how
    to create an Atlas, before finally looking at options to export the map to the
    web using the `qgis2web` plugin.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们使用 QGIS 构建了地图。我们首先查看标签选项，包括使用规则和交互式更改单个标签。然后，我们使用上一章中设计的样式数据构建了一张地图。接着，我们探讨了如何创建图集，最后查看使用
    `qgis2web` 插件将地图导出到网络上的选项。
- en: In the next chapter, we will look at spatial analysis, helping to derive more
    detailed spatial information about data.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨空间分析，帮助从数据中提取更详细的空间信息。
