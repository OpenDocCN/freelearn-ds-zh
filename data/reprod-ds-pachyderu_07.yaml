- en: '*Chapter 5*: Installing Pachyderm on a Cloud Platform'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第 5 章*：在云平台上安装 Pachyderm'
- en: In the previous chapter, you learned the process for installing Pachyderm locally
    to get started quickly and test Pachyderm on your computer.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，你已经学习了在本地安装 Pachyderm 的过程，以便快速开始并在你的计算机上测试 Pachyderm。
- en: Production use cases require additional compute resources and scalability that
    can be efficiently achieved using cloud platforms and managed Kubernetes platform
    services provided by the popular cloud vendors. Pachyderm can run on a Kubernetes
    cluster, irrespective of whether it is deployed manually on cloud instances or
    as a managed Kubernetes service. We will discuss the most popular and easy-to-configure
    methods on cloud providers.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 生产环境用例需要额外的计算资源和可扩展性，可以通过云平台和流行云提供商提供的托管 Kubernetes 平台服务高效实现。Pachyderm 可以在 Kubernetes
    集群上运行，无论是手动部署在云实例上，还是作为托管的 Kubernetes 服务部署。我们将讨论在云提供商上配置最流行和易于配置的方法。
- en: 'This chapter walks you through the cloud-based installation of Pachyderm and
    explains the software requirements needed to run a Pachyderm cluster in production.
    This chapter will cover the installation on the following most popular cloud platforms:
    Amazon **Elastic Kubernetes Service** (**EKS**), **Google Kubernetes Engine**
    (**GKE**), and Microsoft **Azure Kubernetes Service** (**AKS**).'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将带你完成 Pachyderm 的云端安装，并解释运行 Pachyderm 集群所需的软件要求。本章将介绍在以下最流行的云平台上的安装：Amazon
    **Elastic Kubernetes Service** (**EKS**)，**Google Kubernetes Engine** (**GKE**)，以及
    Microsoft **Azure Kubernetes Service** (**AKS**)。
- en: 'In this chapter, we''re going to cover the following main topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主要主题：
- en: Installing the required tools
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装所需工具
- en: Deploying Pachyderm on Amazon EKS
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Amazon EKS 上部署 Pachyderm
- en: Deploying Pachyderm on GKE
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 GKE 上部署 Pachyderm
- en: Deploying Pachyderm on Microsoft AKS
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Microsoft AKS 上部署 Pachyderm
- en: Accessing the Pachyderm console
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问 Pachyderm 控制台
- en: Technical requirements
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'If you are on macOS, verify that you have an up-to-date version of macOS. If
    you are using Linux, you must be on 64-bit versions of recent distributions of
    CentOS, Fedora, or Ubuntu. If you are on Windows, run all the commands described
    in this section from **Windows Subsystem for Linux** (**WSL**). You should have
    the following tools installed from the previous chapters:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用 macOS，请验证你使用的是最新版本的 macOS。如果你使用 Linux，必须是 CentOS、Fedora 或 Ubuntu 的 64
    位版本。如果你使用 Windows，请从 **Windows 子系统 Linux** (**WSL**) 运行本节中描述的所有命令。你应该已经在前面的章节中安装了以下工具：
- en: Homebrew (macOS only)
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Homebrew（仅限 macOS）
- en: The Kubernetes `kubectl`
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kubernetes `kubectl`
- en: Helm
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Helm
- en: Pachyderm CLI – `pachctl`
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pachyderm CLI – `pachctl`
- en: WSL (Windows only)
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: WSL（仅限 Windows）
- en: 'We will need to install the following tools:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要安装以下工具：
- en: '`aws`'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`aws`'
- en: '**The Amazon Identity and Access Management** (**AWS IAM**) authenticator for
    Kubernetes'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Amazon 身份和访问管理** (**AWS IAM**) Kubernetes 身份验证器'
- en: The EKS command-line tool – `eksctl`
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: EKS 命令行工具 – `eksctl`
- en: The Google Cloud SDK – `gcloud`
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Google Cloud SDK – `gcloud`
- en: The Azure CLI – `az`
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Azure CLI – `az`
- en: A JSON processor – `jq`
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JSON 处理器 – `jq`
- en: We will go into the specifics regarding the installation and configuration of
    these tools as we go through this chapter. If you already know how to do this,
    you can go ahead and set them up now.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本章中详细讨论这些工具的安装和配置。如果你已经知道如何操作，可以现在就开始设置它们。
- en: Installing the required tools
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装所需工具
- en: In this section, we will cover the installation of the system tools that we
    will use to prepare our environment before deploying a Kubernetes cluster and
    installing Pachyderm on cloud platforms.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将讨论安装我们在部署 Kubernetes 集群和在云平台上安装 Pachyderm 前需要的系统工具。
- en: Installing the AWS Command Line Interface to manage AWS
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 AWS 命令行界面以管理 AWS
- en: 'The AWS Command Line Interface, `aws-cli`, is required to execute commands
    in your AWS account. For additional information, you can refer to the AWS Command
    Line Interface official documentation at [https://docs.aws.amazon.com/cli/latest/userguide/](https://docs.aws.amazon.com/cli/latest/userguide/).
    Let''s install `aws-cli` on your computer:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: AWS 命令行界面 `aws-cli` 是执行 AWS 账户命令所必需的。有关更多信息，你可以参考 AWS 命令行界面的官方文档：[https://docs.aws.amazon.com/cli/latest/userguide/](https://docs.aws.amazon.com/cli/latest/userguide/)。让我们在你的计算机上安装
    `aws-cli`：
- en: 'Execute the following commands to install `aws-cli` version 2 on your computer:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令，在你的计算机上安装 `aws-cli` 版本 2：
- en: 'If you are using macOS:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在使用 macOS：
- en: '[PRE0]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'If you are on Linux (x86) or WSL on Windows:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是 Linux（x86）或 Windows 上的 WSL：
- en: '[PRE1]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Execute the following command to verify the successful installation of the
    AWS CLI:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令验证 AWS CLI 安装是否成功：
- en: '[PRE2]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE3]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Execute the following command to configure the AWS CLI and enter your `~/.aws/credentials`
    to be used when you run the command later:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令配置 AWS CLI，并输入您的`~/.aws/credentials`，以便稍后运行命令时使用：
- en: '[PRE4]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE5]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'To use a different account than what you have configured in the credentials
    file, you can set the environment variable, which will be used until the end of
    your current shell session. Use the following variables temporarily to set a user
    configuration if needed:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果要使用与凭证文件中配置的不同帐户，可以设置环境变量，直到当前 shell 会话结束时该变量将生效。根据需要，临时使用以下变量设置用户配置：
- en: '[PRE6]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Now that you have installed the AWS Command Line Interface on your computer,
    let's install the AWS IAM authenticator for Kubernetes.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经在计算机上安装了 AWS 命令行接口，接下来让我们安装 Kubernetes 的 AWS IAM 认证器。
- en: Installing the AWS IAM authenticator for Kubernetes
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 Kubernetes 的 AWS IAM 认证器
- en: 'Amazon EKS leverages AWS IAM to provide access to the Kubernetes clusters created
    through EKS. To be able to make the `kubectl` command work with Amazon EKS IAM
    roles, the Amazon IAM authenticator for Kubernetes needs to be installed. Let''s
    install the IAM authenticator on your computer:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon EKS 利用 AWS IAM 为通过 EKS 创建的 Kubernetes 集群提供访问权限。为了让 `kubectl` 命令与 Amazon
    EKS IAM 角色一起工作，需要安装 Amazon IAM 认证器。让我们在您的计算机上安装 IAM 认证器：
- en: 'Execute the following commands to install `aws-iam-authenticator`:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令安装`aws-iam-authenticator`：
- en: 'If you are using macOS:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是 macOS：
- en: '[PRE7]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'If you are using Linux (x86) or WSL on Windows:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是 Linux（x86）或 Windows 上的 WSL：
- en: '[PRE8]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Verify its version and make sure that `aws-iam-authenticator` is installed:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证其版本并确保已安装`aws-iam-authenticator`：
- en: '[PRE9]'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The output of the preceding command should look as follows. To be able to perform
    the following recipes, the `aws-iam-authenticator` version should be `0.5.0` or
    later:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示。为了能够执行以下步骤，`aws-iam-authenticator`版本应为`0.5.0`或更高：
- en: '[PRE10]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Now you have installed `aws-iam-authenticator` on your computer.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您已经在计算机上安装了`aws-iam-authenticator`。
- en: Installing eksctl to manage Amazon EKS
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 eksctl 以管理 Amazon EKS
- en: 'Amazon EKS is a managed Kubernetes service on Amazon EC2\. To manage Amazon
    EKS over the terminal and execute commands, the official CLI for Amazon EKS, `eksctl`,
    is used. For additional information, you can refer to the AWS `eksctl` official
    documentation at [https://docs.aws.amazon.com/eks/latest/userguide/getting-started-eksctl.html](https://docs.aws.amazon.com/eks/latest/userguide/getting-started-eksctl.html).
    Let''s install `eksctl` on your computer:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: Amazon EKS 是 Amazon EC2 上的托管 Kubernetes 服务。要通过终端管理 Amazon EKS 并执行命令，需要使用 Amazon
    EKS 的官方 CLI——`eksctl`。有关更多信息，您可以参考 AWS `eksctl` 官方文档，网址为[https://docs.aws.amazon.com/eks/latest/userguide/getting-started-eksctl.html](https://docs.aws.amazon.com/eks/latest/userguide/getting-started-eksctl.html)。让我们在您的计算机上安装`eksctl`：
- en: 'Execute the following commands to install `eksctl` on your computer:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以在您的计算机上安装`eksctl`：
- en: 'If you are using macOS:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是 macOS：
- en: '[PRE11]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'If you are using Linux (x86) or WSL on Windows:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是 Linux（x86）或 Windows 上的 WSL：
- en: '[PRE12]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Verify its version and make sure that `eksctl` is installed:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证其版本并确保已安装`eksctl`：
- en: '[PRE13]'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE14]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: To be able to perform the following steps, the `eksctl` version should be `0.77.0`
    or later. Now you have installed `eksctl` to manage Amazon EKS on your computer.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 为了执行以下步骤，`eksctl`版本应为`0.77.0`或更高版本。现在您已经在计算机上安装了`eksctl`，以便管理 Amazon EKS。
- en: Installing the Google Cloud SDK to manage Google Cloud
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 Google Cloud SDK 以管理 Google Cloud
- en: 'The Google Cloud SDK, `gcloud`, is required to execute commands in your Google
    Cloud account. The following instructions assume that you have an active GCP account
    with billing enabled. If you don''t have an account already, go to [https://console.cloud.google.com](https://console.cloud.google.com)
    and create an account. Let''s install `gcloud` on your computer:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: Google Cloud SDK（`gcloud`）是执行 Google Cloud 帐户命令所需的工具。以下说明假设您已经拥有一个启用了计费的有效 GCP
    帐户。如果您还没有帐户，请访问[https://console.cloud.google.com](https://console.cloud.google.com)并创建一个帐户。让我们在您的计算机上安装`gcloud`：
- en: 'Execute the following commands to install `gcloud` on your computer:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以在您的计算机上安装`gcloud`：
- en: 'If you are using macOS:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是 macOS：
- en: '[PRE15]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'If you are using Linux (x86) or WSL on Windows:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在使用 Linux（x86）或 Windows 上的 WSL：
- en: '[PRE16]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Restart your shell by executing the following command:'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令重新启动你的 shell：
- en: '[PRE17]'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Verify its version and make sure `gcloud` is installed:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证其版本并确保 `gcloud` 已安装：
- en: '[PRE18]'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The output of the preceding command should look as follows. To be able to perform
    the following recipes, the Google Cloud SDK version should be `339.0.0` or later:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令输出应如下所示。为了能够执行以下操作，Google Cloud SDK 版本应为 `339.0.0` 或更高版本：
- en: '[PRE19]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Execute the following command to initialize the SDK and follow the instructions:'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令初始化 SDK，并按照指示操作：
- en: '[PRE20]'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Execute the following command to set a default zone for future deployments.
    In our example, the compute zone is set to `us-central1-a`:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令为未来的部署设置默认区域。在我们的示例中，计算区域设置为 `us-central1-a`：
- en: '[PRE21]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Now you have installed `gcloud` to manage GKE on your computer.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你已经在计算机上安装了 `gcloud` 来管理 GKE。
- en: Installing the Azure CLI to manage Microsoft Azure
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 Azure CLI 以管理 Microsoft Azure
- en: 'The Azure CLI, `az`, is required to execute commands in your Microsoft Azure
    account. The following instructions assume that you have an active Azure account
    with billing enabled. If you don''t have an account already, go to [https://portal.azure.com](https://portal.azure.com)
    and create an account. Let''s install the Azure CLI on your computer:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: Azure CLI（`az`）是执行 Microsoft Azure 账户中命令所必需的。以下说明假设你已有一个启用计费的有效 Azure 账户。如果你还没有账户，请访问
    [https://portal.azure.com](https://portal.azure.com) 创建一个账户。让我们在你的计算机上安装 Azure
    CLI：
- en: 'Execute the following commands to install `gcloud` on your computer:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令在你的计算机上安装 `gcloud`：
- en: 'If you are using macOS:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在使用 macOS：
- en: '[PRE22]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'If you are using Linux (x86) or WSL on Windows:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在使用 Linux（x86）或 Windows 上的 WSL：
- en: '[PRE23]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Verify its version and make sure the Azure CLI is installed:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证其版本并确保已安装 Azure CLI：
- en: '[PRE24]'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'The output of the preceding command should look as follows. To be able to perform
    the following steps, the Azure CLI version should be `2.0.1` or later:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令输出应如下所示。为了能够执行以下步骤，Azure CLI 版本应为`2.0.1`或更高版本：
- en: '[PRE25]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Execute the following command to initialize the Azure CLI and follow the instructions:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令初始化 Azure CLI，并按照指示操作：
- en: '[PRE26]'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Execute the following command to create a resource group with a unique name
    and set a default zone for future deployments. In our example, the compute zone
    is set to `centralus`:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令创建一个具有唯一名称的资源组，并为未来的部署设置默认区域。在我们的示例中，计算区域设置为 `centralus`：
- en: '[PRE27]'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Now you have installed the Azure CLI to manage AKS on your computer.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你已经在计算机上安装了 Azure CLI 来管理 AKS。
- en: Deploying Pachyderm on Amazon EKS
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Amazon EKS 上部署 Pachyderm
- en: Kubernetes is an open source container orchestration platform and, by itself,
    is a large topic to cover. In this section, we take the topic of containerization
    from a data scientist's perspective and will only focus on running our workload,
    Pachyderm, on the most common managed platforms available in the market. There
    are various ways and tools to provision and manage the life cycle of production-grade
    Kubernetes clusters on the AWS cloud platform, such as `kOps`, `kubespray`, `k3s`,
    Terraform, and others. For additional configuration details, you can refer to
    Kubernetes' official documentation at [https://kubernetes.io/docs/setup/production-environment/](https://kubernetes.io/docs/setup/production-environment/).
    Let's learn the simplest way to get the services required by Pachyderm up and
    running on AWS's managed Kubernetes service, Amazon EKS.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes 是一个开源的容器编排平台，本身是一个庞大的主题。在本节中，我们从数据科学家的角度探讨容器化，仅专注于在市场上最常见的托管平台上运行我们的工作负载
    Pachyderm。AWS 云平台上有多种方法和工具可以配置和管理生产级 Kubernetes 集群的生命周期，如 `kOps`、`kubespray`、`k3s`、Terraform
    等。欲了解更多配置细节，请参考 Kubernetes 官方文档 [https://kubernetes.io/docs/setup/production-environment/](https://kubernetes.io/docs/setup/production-environment/)。让我们学习在
    AWS 托管的 Kubernetes 服务 Amazon EKS 上启动和运行 Pachyderm 所需服务的最简单方法。
- en: Preparing an Amazon EKS cluster to run Pachyderm
  id: totrans-105
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备 Amazon EKS 集群以运行 Pachyderm
- en: 'Follow these steps to provision an Amazon EKS cluster using `eksctl`. Initially
    developed as a third-party open source tool, `eksctl` is now the official tool
    for deploying and managing EKS clusters via a CLI. You will need to have the AWS
    CLI and the AWS IAM authenticator for Kubernetes installed and their credentials
    configured. If you have a cluster, you can skip these instructions and jump to
    the *Deploying Pachyderm on Amazon EKS* section. Also, you can refer to the Amazon
    EKS official documentation at [https://eksctl.io/introduction/](https://eksctl.io/introduction/):'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤使用`eksctl`来配置一个 Amazon EKS 集群。`eksctl`最初作为一个第三方开源工具开发，现在是通过 CLI 部署和管理
    EKS 集群的官方工具。您需要安装 AWS CLI 和 AWS IAM Kubernetes 认证工具，并配置它们的凭证。如果您已经有一个集群，可以跳过这些步骤，直接跳到
    *在 Amazon EKS 上部署 Pachyderm* 部分。此外，您可以参考 Amazon EKS 的官方文档：[https://eksctl.io/introduction/](https://eksctl.io/introduction/)：
- en: 'Execute the following command to simply deploy an EKS cluster with default
    parameters. This command will generate a cluster with two `m5.large` worker nodes
    using the official AWS EKS **Amazon Machine Image** (**AMI**):'
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令，使用默认参数简单地部署 EKS 集群。此命令将生成一个包含两个`m5.large`工作节点的集群，使用官方 AWS EKS **亚马逊机器镜像**（**AMI**）：
- en: '[PRE28]'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The output of the preceding command should return output similar to this:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应返回类似于以下内容的输出：
- en: '[PRE29]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Important note
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: 'To customize the EKS cluster configuration, you can pass additional parameters
    to `eksctl` as follows:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 要自定义 EKS 集群配置，可以将附加参数传递给`eksctl`，如下所示：
- en: '`eksctl create cluster --name <name> --version <version> \`'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '`eksctl create cluster --name <name> --version <version> \`'
- en: '`--nodegroup-name <name> --node-type <vm-flavor> \`'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '`--nodegroup-name <name> --node-type <vm-flavor> \`'
- en: '`--nodes <number-of-nodes> --nodes-min <min-number-nodes> \`'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '`--nodes <number-of-nodes> --nodes-min <min-number-nodes> \`'
- en: '`--nodes-max <max-number-nodes> --node-ami auto`'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '`--nodes-max <max-number-nodes> --node-ami auto`'
- en: 'Verify the cluster deployment by executing the following command:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令验证集群部署：
- en: '[PRE30]'
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE31]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Now, your Amazon EKS cluster is provisioned and ready to deploy Pachyderm.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您的 Amazon EKS 集群已配置好，并准备好部署 Pachyderm。
- en: Creating an S3 object storage bucket
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建 S3 对象存储桶
- en: 'Pachyderm uses S3-compliant object storage to store data. Follow these steps
    to create an S3 object storage bucket:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: Pachyderm 使用符合 S3 标准的对象存储来存储数据。按照以下步骤创建一个 S3 对象存储桶：
- en: 'Generate variables that will be used to create your S3 bucket and pass it to
    `pachctl` to store your Pachyderm data later. Make sure to use a unique bucket
    name. In our example, we will use `s3.pachyderm` as our bucket name with a capacity
    of 200 GB and located in the same region as our EKS cluster, `us-east-1`:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成将用于创建 S3 存储桶的变量，并将其传递给`pachctl`，以便稍后存储 Pachyderm 数据。确保使用唯一的存储桶名称。在我们的示例中，我们将使用
    `s3.pachyderm` 作为存储桶名称，容量为 200 GB，并位于与 EKS 集群相同的区域`us-east-1`：
- en: '[PRE32]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'In order for Pachyderm to store pipeline data, a dedicated S3 bucket is required.
    Execute the following command to create an S3 bucket with the parameters defined
    by your variables:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了让 Pachyderm 存储管道数据，需要一个专用的 S3 存储桶。执行以下命令，根据您的变量定义创建一个 S3 存储桶：
- en: '[PRE33]'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Execute the following command to confirm the creation of the bucket:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令确认存储桶已创建：
- en: '[PRE34]'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE35]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: Now that we have an S3 bucket created, we are ready to deploy Pachyderm on Amazon
    EKS.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经创建了一个 S3 存储桶，可以准备在 Amazon EKS 上部署 Pachyderm。
- en: Deploying the cluster
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 部署集群
- en: When you start learning Pachyderm, it is recommended to run experiments in a
    small local cluster. We have previously covered the local deployment of Pachyderm
    in [*Chapter 4*](B17085_04_Final_SB_Epub.xhtml#_idTextAnchor096), *Installing
    Pachyderm Locally*. In this chapter, we focus on a scalable production-grade deployment
    of Pachyderm using IAM roles on Amazon EKS clusters.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始学习 Pachyderm 时，建议在一个小型本地集群中进行实验。我们在[*第 4 章*](B17085_04_Final_SB_Epub.xhtml#_idTextAnchor096)中已介绍了
    Pachyderm 的本地部署，*本地安装 Pachyderm*。在本章中，我们将重点介绍使用 IAM 角色在 Amazon EKS 集群上进行可扩展的生产级部署。
- en: 'Follow these steps to install Pachyderm on your Amazon EKS cluster:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤在您的 Amazon EKS 集群上安装 Pachyderm：
- en: 'The AWS IAM role assigned to your EKS cluster needs to have access to the S3
    bucket you created during the *Creating an S3 object storage bucket* section.
    As shown in the following screenshot, log in to your AWS Management Console and
    go to the EKS dashboard as follows:'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分配给 EKS 集群的 AWS IAM 角色需要有权访问你在*创建 S3 对象存储桶*部分中创建的 S3 存储桶。如以下截图所示，登录到你的 AWS 管理控制台并进入
    EKS 仪表板：
- en: '![Figure 5.1 – Amazon EKS Clusters dashboard'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.1 – 亚马逊 EKS 集群仪表板'
- en: '](img/B17085_05_001.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17085_05_001.jpg)'
- en: Figure 5.1 – Amazon EKS Clusters dashboard
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.1 – 亚马逊 EKS 集群仪表板
- en: 'Click on the cluster. Locate the EC2 instance in the cluster. Find the IAM
    role on the **Instance** description page. Click on **IAM Role**:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击集群。定位到集群中的 EC2 实例。找到 IAM 角色在**实例**描述页面。点击**IAM 角色**：
- en: '![Figure 5.2 – IAM role assigned to EC2 instances'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.2 – 分配给 EC2 实例的 IAM 角色'
- en: '](img/B17085_05_002.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17085_05_002.jpg)'
- en: Figure 5.2 – IAM role assigned to EC2 instances
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.2 – 分配给 EC2 实例的 IAM 角色
- en: 'Replace the `<s3-bucket>` placeholder below with your bucket name. Click on
    **Add inline policy** to create a new inline policy similar to the following code:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用你的存储桶名称替换下面的`<s3-bucket>`占位符。点击**添加内联策略**，创建一个类似如下代码的内联策略：
- en: '[PRE36]'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Switch to the **Trust relationships** tab and click on the **Edit trust relationship**
    button. Confirm that the trust relationship is similar to the following, otherwise,
    make the changes and click on the **Update Trust Policy** button to update:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 切换到**信任关系**标签页，并点击**编辑信任关系**按钮。确认信任关系类似于下述内容，否则，进行更改并点击**更新信任策略**按钮来更新：
- en: '[PRE37]'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Now, execute the following command to add the Pachyderm Helm Chart repos to
    your local repository:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，执行以下命令将 Pachyderm Helm Chart 仓库添加到你的本地仓库：
- en: '[PRE38]'
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Execute the following command to get the latest Chart information from the
    Chart repository:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令从 Chart 仓库获取最新的 Chart 信息：
- en: '[PRE39]'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'For a quick deployment, replace the Amazon S3 bucket name, access key ID, and
    secret key below and execute the command to deploy the latest version of Pachyderm
    on your cluster without the console:'
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了快速部署，替换下方的 Amazon S3 存储桶名称、访问密钥 ID 和密钥，执行命令在没有控制台的情况下将 Pachyderm 的最新版本部署到你的集群：
- en: '[PRE40]'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'If you have an enterprise key and would like to deploy it with Pachyderm''s
    console user interface, execute the following command:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有企业密钥并希望通过 Pachyderm 控制台用户界面部署它，执行以下命令：
- en: '[PRE41]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: Once the console is deployed successfully, follow the instructions under the
    *Accessing the Pachyderm console* section to access the console.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦控制台成功部署，按照*访问 Pachyderm 控制台*部分的说明访问控制台。
- en: 'The commands return the following output:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 命令返回以下输出：
- en: '![Figure 5.3 – Pachyderm Helm Chart getting deployed on Kubernetes'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.3 – Pachyderm Helm Chart 在 Kubernetes 上部署'
- en: '](img/B17085_05_003.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17085_05_003.jpg)'
- en: Figure 5.3 – Pachyderm Helm Chart getting deployed on Kubernetes
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.3 – Pachyderm Helm Chart 在 Kubernetes 上部署
- en: 'Optional: Customizing Installation Parameters'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 可选：自定义安装参数
- en: You can also download and customize the `values.yaml` file in the Helm Chart
    repository, [https://github.com/pachyderm/pachyderm/tree/master/etc/helm/pachyderm](https://github.com/pachyderm/pachyderm/tree/master/etc/helm/pachyderm),
    to further optimize the components needed to run Pachyderm.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以下载并自定义 Helm Chart 仓库中的`values.yaml`文件，[https://github.com/pachyderm/pachyderm/tree/master/etc/helm/pachyderm](https://github.com/pachyderm/pachyderm/tree/master/etc/helm/pachyderm)，进一步优化运行
    Pachyderm 所需的组件。
- en: 'Execute the following command to create a local copy of the `values.yaml` file:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下命令创建`values.yaml`文件的本地副本：
- en: '`$ wget https://raw.githubusercontent.com/pachyderm/pachyderm/master/etc/helm/pachyderm/values.yaml`'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '`$ wget https://raw.githubusercontent.com/pachyderm/pachyderm/master/etc/helm/pachyderm/values.yaml`'
- en: 'Once customized, you can use the same YAML file and install your Helm Chart
    by executing the following command instead:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦自定义完成，你可以使用相同的 YAML 文件，通过执行以下命令来安装你的 Helm Chart：
- en: '`$ helm install pachyderm -f values.yaml pach/pachyderm`'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '`$ helm install pachyderm -f values.yaml pach/pachyderm`'
- en: 'A Kubernetes Deployment is a controller that rolls out a ReplicaSet of Pods
    based on the requirements defined in your `manifest` file. A ReplicaSet is a group
    of instances of the same service. Execute the following command to verify the
    state of Deployments created during the installation:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Kubernetes 部署是一个控制器，根据你在 `manifest` 文件中定义的要求，推出一个 Pod 的副本集。副本集是一组相同服务的实例。执行以下命令验证在安装过程中创建的部署状态：
- en: '[PRE42]'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '![Figure 5.4 – List of Pachyderm Deployment objects'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.4 – Pachyderm部署对象列表](img/B17085_05_005.jpg)'
- en: '](img/B17085_05_004.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17085_05_004.jpg)'
- en: Figure 5.4 – List of Pachyderm Deployment objects
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.4 – Pachyderm部署对象列表
- en: 'Execute the following command to verify a successful installation and see the
    Pods created as part of the Deployments:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以验证安装是否成功，并查看作为部署一部分创建的Pods：
- en: '[PRE43]'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '![Figure 5.5 – List of Pachyderm Pods'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.5 – Pachyderm Pods列表](img/B17085_05_004.jpg)'
- en: '](img/B17085_05_005.jpg)'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B17085_05_005.jpg)'
- en: Figure 5.5 – List of Pachyderm Pods
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.5 – Pachyderm Pods列表
- en: 'Execute the following command to verify the persistent volumes created as part
    of the Deployment:'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以验证作为部署一部分创建的持久卷：
- en: '[PRE44]'
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE45]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: Important note
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: When Pachyderm is deployed using the `--dynamic-etcd-nodes` flag, it creates
    an `etcd` deployment to manage administrative metadata. Block storage used by
    `etcd` Pods is provisioned using the default AWS StorageClass, `gp2`. To use a
    different StorageClass during deployment, you will need to deploy an Amazon EBS
    CSI driver to your cluster and update the `etcd.storageclass` parameter to `gp3`
    during the Helm Chart deployment.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用`--dynamic-etcd-nodes`标志部署Pachyderm时，它会创建一个`etcd`部署来管理管理元数据。`etcd` Pods使用默认的AWS
    StorageClass，`gp2`来配置块存储。如果在部署过程中需要使用不同的StorageClass，则需要向集群部署Amazon EBS CSI驱动程序，并在Helm
    Chart部署过程中将`etcd.storageclass`参数更新为`gp3`。
- en: 'Execute the following command to verify the successful installation of Pachyderm:'
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以验证Pachyderm的成功安装：
- en: '[PRE46]'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE47]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: Now that we have installed Pachyderm on our AWS EKS cluster, we are ready to
    create our first pipeline.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经在AWS EKS集群上安装了Pachyderm，准备好创建我们的第一个管道了。
- en: Deleting a Pachyderm deployment on Amazon EKS
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在Amazon EKS上删除Pachyderm部署
- en: 'If you need to delete your Pachyderm deployment or start afresh, you can wipe
    out your environment and start over again from the *Preparing an EKS cluster to
    run Pachyderm* instructions. Let''s perform the following steps to delete your
    existing Pachyderm deployment:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要删除Pachyderm部署或重新开始，可以清除你的环境并按照*准备EKS集群以运行Pachyderm*的说明从头开始。让我们执行以下步骤来删除现有的Pachyderm部署：
- en: 'If you have used a different name for your Helm instance, execute the following
    command to find the Pachyderm instance name deployed using the Helm Chart:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你使用了不同的名称来命名你的Helm实例，请执行以下命令以查找通过Helm Chart部署的Pachyderm实例名称：
- en: '[PRE48]'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE49]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Execute the following command using your Pachyderm instance name to remove
    Pachyderm components from your cluster:'
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用你的Pachyderm实例名称执行以下命令，以从集群中移除Pachyderm组件：
- en: '[PRE50]'
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'Execute the following command to retrieve the list of EKS clusters deployed
    and identify the name of your cluster:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以获取已部署的EKS集群列表，并识别你的集群名称：
- en: '[PRE51]'
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE52]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'If you would like to remove the cluster completely, copy the name of your cluster
    from the preceding output and execute the following command after replacing the
    name to delete the Amazon EKS cluster. Note that all the other workloads on this
    cluster will also be destroyed:'
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你想完全移除集群，请从前面的输出中复制集群名称，并在替换名称后执行以下命令以删除Amazon EKS集群。请注意，集群上的所有其他工作负载也会被销毁：
- en: '[PRE53]'
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'The output of the preceding command should complete similar to the following:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应类似于以下内容：
- en: '[PRE54]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: Now you have completely removed Pachyderm and your EKS cluster from your AWS
    account.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经完全从AWS账户中移除了Pachyderm和EKS集群。
- en: Deploying Pachyderm on GKE
  id: totrans-207
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在GKE上部署Pachyderm
- en: If you use Google Cloud, a managed Kubernetes service can be deployed on `kOps`,
    `kubespray`, Terraform, and others. For additional configuration details, you
    can refer to Kubernetes' official documentation at [https://kubernetes.io/docs/setup/production-environment/](https://kubernetes.io/docs/setup/production-environment/).
    Let's learn the simplest way to get the services required by Pachyderm up and
    running on Google Cloud's managed Kubernetes service, GKE.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用Google Cloud，可以通过`kOps`、`kubespray`、Terraform等方式部署托管的Kubernetes服务。有关其他配置详情，你可以参考Kubernetes的官方文档：[https://kubernetes.io/docs/setup/production-environment/](https://kubernetes.io/docs/setup/production-environment/)。让我们学习如何在Google
    Cloud的托管Kubernetes服务GKE上以最简单的方式启动Pachyderm所需的服务。
- en: Preparing a GKE cluster to run Pachyderm
  id: totrans-209
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备 GKE 集群以运行 Pachyderm
- en: 'Follow these steps to provision a GKE cluster using the Google Cloud SDK. You
    will need to have the Google Cloud SDK installed and its credentials configured.
    If you have a cluster, you can skip these instructions and jump to the *Deploying
    the cluster section*. Also, you can refer to the Google Cloud SDK official documentation
    at [https://cloud.google.com/sdk/docs/install](https://cloud.google.com/sdk/docs/install):'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤使用 Google Cloud SDK 配置 GKE 集群。你需要安装 Google Cloud SDK 并配置其凭据。如果你已经有了集群，可以跳过这些说明并跳到
    *部署集群部分*。另外，你可以参考 Google Cloud SDK 官方文档 [https://cloud.google.com/sdk/docs/install](https://cloud.google.com/sdk/docs/install)：
- en: 'Execute the following command to deploy a GKE cluster with default parameters.
    This command will generate a three-node cluster with the recommended `n2-standard-4`
    instance type using a **Container-Optimized OS** (**COS**) with Docker in your
    default compute zone:'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以使用默认参数部署 GKE 集群。此命令将在默认计算区域内使用**容器优化操作系统**（**COS**）和 Docker 生成一个包含三节点的集群，推荐使用
    `n2-standard-4` 实例类型：
- en: '[PRE55]'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'The output of the preceding command should complete similar to the following:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令输出应类似于以下内容：
- en: '[PRE56]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: Important note
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: To simply customize the GKE cluster parameters, you can use the GCP console
    and the Kubernetes Engine creation wizard. After you configure the parameters
    on the wizard, click on the command-line button in the wizard to convert the configuration
    into a CLI command to use with the `gcloud` command.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 若要简单地自定义 GKE 集群参数，可以使用 GCP 控制台和 Kubernetes Engine 创建向导。在向导中配置参数后，单击向导中的命令行按钮，将配置转换为
    CLI 命令并使用 `gcloud` 命令。
- en: 'Verify deployment of the cluster by executing the following command:'
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以验证集群的部署：
- en: '[PRE57]'
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE57]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令输出应如下所示：
- en: '[PRE58]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: Now, your GKE cluster is provisioned and ready to deploy Pachyderm.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你的 GKE 集群已配置完毕，准备部署 Pachyderm。
- en: Creating a Google Cloud object storage bucket
  id: totrans-222
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建 Google Cloud 对象存储桶
- en: 'Pachyderm uses object storage to store data. Follow these steps to create a
    Google Cloud object storage bucket:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: Pachyderm 使用对象存储来存储数据。按照以下步骤创建 Google Cloud 对象存储桶：
- en: 'Generate variables that will be used to create your `pachctl` to store your
    Pachyderm data later. Make sure to use a unique bucket name. In our example, we
    will use `pachyderm-bucket` as our bucket name with a capacity of 200 GB and located
    in the same region as our GKE cluster, `us-central1`:'
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成用于创建 `pachctl` 的变量，这些变量将在稍后存储你的 Pachyderm 数据。确保使用唯一的存储桶名称。在我们的示例中，我们将使用 `pachyderm-bucket`
    作为存储桶名称，容量为 200 GB，并位于与 GKE 集群相同的区域 `us-central1`：
- en: '[PRE59]'
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'In order for Pachyderm to store pipeline data, a dedicated GCS bucket is required.
    Execute the following command to create a GCS bucket with the parameters defined
    by your variables:'
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了让 Pachyderm 存储管道数据，必须创建一个专用的 GCS 存储桶。执行以下命令以使用你的变量定义的参数创建一个 GCS 存储桶：
- en: '[PRE60]'
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'Execute the following command to confirm the creation of the bucket:'
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以确认存储桶已创建：
- en: '[PRE61]'
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令输出应如下所示：
- en: '[PRE62]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: Now, you have a GCS bucket created to store Pachyderm data. We are ready to
    deploy Pachyderm on GKE.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你已经创建了一个 GCS 存储桶来存储 Pachyderm 数据。我们已经准备好在 GKE 上部署 Pachyderm。
- en: Deploying the cluster
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 部署集群
- en: When you start learning Pachyderm, it is suggested to run experiments in a small
    local cluster. We have previously covered the local deployment of Pachyderm in
    [*Chapter 4*](B17085_04_Final_SB_Epub.xhtml#_idTextAnchor096), *Installing Pachyderm
    Locally*. In this chapter, we are going to focus on a scalable production-grade
    deployment of Pachyderm using IAM roles on GKE clusters.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始学习 Pachyderm 时，建议在小型本地集群中运行实验。我们之前已经在 [*第 4 章*](B17085_04_Final_SB_Epub.xhtml#_idTextAnchor096)中介绍了
    Pachyderm 的本地部署，*在本地安装 Pachyderm*。在本章中，我们将重点介绍使用 GKE 集群上的 IAM 角色部署可扩展的生产级 Pachyderm。
- en: 'Follow these steps to install Pachyderm on your GKE cluster:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤在 GKE 集群上安装 Pachyderm：
- en: 'If you don''t already have a service account, execute the following command
    to create a service account:'
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你尚未创建服务账户，执行以下命令来创建一个服务账户：
- en: '[PRE63]'
  id: totrans-237
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE63]'
- en: 'Replace the following `pachyderm-book` in both places with your project name
    and add a storage admin role that is binding to your service account:'
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将以下 `pachyderm-book` 替换为你的项目名称，并为你的服务账户添加一个绑定的存储管理员角色：
- en: '[PRE64]'
  id: totrans-239
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE64]'
- en: 'Now, execute the following command to add Pachyderm Helm Chart repos to your
    local repository:'
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，执行以下命令将 Pachyderm Helm Chart 仓库添加到本地仓库：
- en: '[PRE65]'
  id: totrans-241
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'Execute the following command to get the latest Chart information from the
    Chart repository:'
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令从 Chart 仓库获取最新的 Chart 信息：
- en: '[PRE66]'
  id: totrans-243
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE66]'
- en: 'For a quick deployment, replace the Google Cloud bucket name, and Google Cloud
    credentials, and execute the following command to deploy the latest version of
    Pachyderm on your cluster without the console:'
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于快速部署，替换 Google Cloud 存储桶名称和 Google Cloud 凭据，并执行以下命令，在不使用控制台的情况下，将 Pachyderm
    的最新版本部署到你的集群中：
- en: '[PRE67]'
  id: totrans-245
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'If you have an enterprise key and would like to deploy it with Pachyderm''s
    console user interface, execute the following command:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有企业密钥并希望通过 Pachyderm 的控制台用户界面部署，请执行以下命令：
- en: '[PRE68]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: Once the console is deployed successfully, follow the instructions under the
    *Accessing the Pachyderm console* section to access the console.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦控制台成功部署，按照*访问 Pachyderm 控制台*部分的说明访问控制台。
- en: 'A Kubernetes Deployment is a controller that rolls out a ReplicaSet of Pods
    based on the requirements defined in your manifest file. Execute the following
    command to verify the state of Deployments created during installation:'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Kubernetes 部署是一个控制器，它根据清单文件中定义的要求推出 Pods 的副本集。执行以下命令验证安装过程中创建的部署状态：
- en: '[PRE69]'
  id: totrans-250
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE70]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'Execute the following command to verify a successful installation and see the
    Pods created as part of the Deployments:'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令验证安装是否成功，并查看作为部署的一部分创建的 Pods：
- en: '[PRE71]'
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE71]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE72]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'Execute the following command to verify the persistent volumes created as part
    of the Deployment:'
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令验证作为部署一部分创建的持久卷：
- en: '[PRE73]'
  id: totrans-258
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE73]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE74]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: 'Execute the following command to verify the successful installation of Pachyderm:'
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令验证 Pachyderm 是否成功安装：
- en: '[PRE75]'
  id: totrans-262
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE75]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE76]'
  id: totrans-264
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: Now we have installed Pachyderm on your GKE cluster, you are ready to create
    your first pipeline.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经在你的 GKE 集群上安装了 Pachyderm，你可以开始创建你的第一个流水线。
- en: Deleting a Pachyderm deployment on GKE
  id: totrans-266
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 GKE 上删除 Pachyderm 部署
- en: 'If you need to delete your deployment and start afresh, you can wipe out your
    environment and start over again using the *Preparing a GKE cluster to run Pachyderm*
    instructions. Let''s perform the following steps to delete your existing Pachyderm
    deployment:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要删除现有的部署并重新开始，可以通过使用*准备 GKE 集群运行 Pachyderm*的说明清除你的环境并重新开始。接下来让我们执行以下步骤来删除现有的
    Pachyderm 部署：
- en: 'If you have used a different name for your Helm instance, execute the following
    command to find the Pachyderm instance name deployed using the Helm Chart:'
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你使用了不同的 Helm 实例名称，执行以下命令查找通过 Helm Chart 部署的 Pachyderm 实例名称：
- en: '[PRE77]'
  id: totrans-269
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE78]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: 'Execute the following command using your Pachyderm instance name to remove
    the Pachyderm components from your cluster:'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用你的 Pachyderm 实例名称执行以下命令，从集群中删除 Pachyderm 组件：
- en: '[PRE79]'
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'Execute the following command to retrieve the list of GKE clusters deployed
    and identify the name of your cluster:'
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以检索已部署的 GKE 集群列表，并识别你的集群名称：
- en: '[PRE80]'
  id: totrans-275
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE81]'
  id: totrans-277
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'If you would like to remove the cluster completely, copy the name of your cluster
    from the preceding output and execute the following command after replacing the
    name to delete the GKE cluster. Note that all the other workloads on this cluster
    will also be destroyed:'
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你希望完全删除集群，请从之前的输出中复制集群名称，并在替换名称后执行以下命令来删除 GKE 集群。请注意，集群上的所有其他工作负载也会被销毁：
- en: '[PRE82]'
  id: totrans-279
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'The output of the preceding command should complete similar to the following:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应类似于以下内容：
- en: '[PRE83]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: Now you have completely removed Pachyderm and your Kubernetes cluster from your
    GCP account.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经完全从 GCP 账户中移除了 Pachyderm 和你的 Kubernetes 集群。
- en: Deploying Pachyderm on Microsoft AKS
  id: totrans-283
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Microsoft AKS 上部署 Pachyderm
- en: If you use Microsoft Azure, a managed Kubernetes service can be deployed on
    the Azure platform using automation and command-line tools with the help of `kOps`,
    `kubespray`, Terraform, and others. For additional configuration details, you
    can refer to Kubernetes' official documentation at [https://kubernetes.io/docs/setup/production-environment/](https://kubernetes.io/docs/setup/production-environment/).
    Let's learn the simplest way to get the services required by Pachyderm up and
    running on AKS.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是 Microsoft Azure，可以通过自动化和命令行工具在 Azure 平台上部署托管的 Kubernetes 服务，借助 `kOps`、`kubespray`、Terraform
    等工具。有关更多配置细节，请参考 Kubernetes 的官方文档 [https://kubernetes.io/docs/setup/production-environment/](https://kubernetes.io/docs/setup/production-environment/)。让我们了解在
    AKS 上启动 Pachyderm 所需服务的最简单方法。
- en: Preparing an AKS cluster to run Pachyderm
  id: totrans-285
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备一个 AKS 集群以运行 Pachyderm
- en: 'Follow these steps to provision an AKS cluster using the Azure CLI. You will
    need to have the Azure CLI installed and its credentials configured. If you have
    a cluster, you can skip these instructions and jump to the *Deploying Pachyderm
    on Microsoft AKS* section. Also, you can refer to the Azure CLI official documentation
    at [https://docs.microsoft.com/en-us/cli/azure/](https://docs.microsoft.com/en-us/cli/azure/):'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤使用 Azure CLI 配置 AKS 集群。你需要安装 Azure CLI 并配置其凭据。如果你已有集群，可以跳过这些说明，直接跳到 *在
    Microsoft AKS 上部署 Pachyderm* 部分。此外，你还可以参考 Azure CLI 的官方文档 [https://docs.microsoft.com/en-us/cli/azure/](https://docs.microsoft.com/en-us/cli/azure/)：
- en: 'Execute the following command in your previously specified `resource-group`
    to deploy an AKS cluster with default parameters. This command will generate a
    three-node cluster with the recommended `Standard_DS4_v2` instance type in your
    default compute zone:'
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在之前指定的 `resource-group` 中执行以下命令，以使用默认参数部署 AKS 集群。此命令将在默认计算区中生成一个三节点集群，实例类型为推荐的
    `Standard_DS4_v2`：
- en: '[PRE84]'
  id: totrans-288
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE84]'
- en: 'The output of the preceding command should complete similar to the following:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令输出应与以下内容类似：
- en: '[PRE85]'
  id: totrans-290
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: Important note
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: If you don't remember your resource group name, you can use the `az group list`
    command to list the previously created resource groups.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不记得资源组名称，可以使用 `az group list` 命令列出之前创建的资源组。
- en: 'Execute the following command to connect to your cluster:'
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以连接到你的集群：
- en: '[PRE86]'
  id: totrans-294
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'Verify the cluster deployment by executing the following command:'
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以验证集群部署：
- en: '[PRE87]'
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE87]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令输出应如下所示：
- en: '[PRE88]'
  id: totrans-298
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: Now your AKS cluster is provisioned and ready to deploy Pachyderm.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你的 AKS 集群已配置完毕，可以部署 Pachyderm 了。
- en: Creating an Azure storage container
  id: totrans-300
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建 Azure 存储容器
- en: Pachyderm uses blob storage to store data and block storage for metadata. It
    is recommended to use SSDs rather than the Standard HDD-based slower storage option.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: Pachyderm 使用 blob 存储来存储数据，使用块存储来存储元数据。建议使用 SSD 而非标准的基于 HDD 的较慢存储选项。
- en: 'Follow these steps to create a Premium LRS Block blobs storage container:'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤创建一个 Premium LRS 块 blob 存储容器：
- en: 'Generate variables that will be used to create your Azure Block blobs storage
    and pass to `pachctl` to store your Pachyderm data later. Make sure to use a unique
    storage account and container name. In our example, we will use `pachydermstorageaccount`
    as our `STORAGE_ACCOUNT`, `pachydermblobcontainer` as our `CONTAINER_NAME`, and
    it will be located in the `centralus` region:'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成将用于创建 Azure 块 blob 存储的变量，并传递给 `pachctl` 以便稍后存储 Pachyderm 数据。确保使用唯一的存储帐户和容器名称。在我们的示例中，我们将使用
    `pachydermstorageaccount` 作为 `STORAGE_ACCOUNT`，`pachydermblobcontainer` 作为 `CONTAINER_NAME`，并将其定位在
    `centralus` 区域：
- en: '[PRE89]'
  id: totrans-304
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE89]'
- en: 'Execute the following command to your Azure storage account with the parameters
    defined by your variables:'
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令，将存储帐户与由变量定义的参数传递给 Azure 存储：
- en: '[PRE90]'
  id: totrans-306
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE90]'
- en: 'Execute the following command to confirm the creation of the bucket:'
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令确认存储桶已创建：
- en: '[PRE91]'
  id: totrans-308
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE91]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令输出应如下所示：
- en: '[PRE92]'
  id: totrans-310
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'The deployment of Pachyderm will require a storage account key. Execute the
    following command to store the storage keys in a variable:'
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 部署 Pachyderm 时需要一个存储帐户密钥。执行以下命令以将存储密钥存储在变量中：
- en: '[PRE93]'
  id: totrans-312
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'Execute the following command to create a data storage container in your storage
    account:'
  id: totrans-313
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令，在你的存储帐户中创建一个数据存储容器：
- en: '[PRE94]'
  id: totrans-314
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的命令输出应如下所示：
- en: '[PRE95]'
  id: totrans-316
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: Now, you have an Azure data storage container created in your Azure storage
    account to store Pachyderm data.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你在 Azure 存储帐户中已创建了一个 Azure 数据存储容器，用于存储 Pachyderm 数据。
- en: Deploying the cluster
  id: totrans-318
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 部署集群
- en: When you start learning Pachyderm, it is suggested to run experiments in a small
    local cluster. We have previously covered the local deployment of Pachyderm in
    [*Chapter 4*](B17085_04_Final_SB_Epub.xhtml#_idTextAnchor096), *Installing Pachyderm
    Locally*. In this chapter, we are going to focus on a scalable production-grade
    deployment of Pachyderm on an AKS cluster.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 当您开始学习 Pachyderm 时，建议在一个小型本地集群中进行实验。我们之前在 [*第 4 章*](B17085_04_Final_SB_Epub.xhtml#_idTextAnchor096)
    中介绍了 Pachyderm 的本地部署，*本地安装 Pachyderm*。在本章中，我们将重点介绍在 AKS 集群上进行可扩展的生产级部署。
- en: 'Follow these steps to install Pachyderm on your AKS cluster:'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤在您的 AKS 集群上安装 Pachyderm：
- en: 'If you have not connected to your Kubernetes cluster, execute the following
    command to connect to your cluster:'
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果尚未连接到 Kubernetes 集群，请执行以下命令连接到您的集群：
- en: '[PRE96]'
  id: totrans-322
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE96]'
- en: 'For a quick deployment, replace the Azure storage container name, Azure storage
    account name, and AKS account key, and execute the following command to deploy
    the latest version of Pachyderm on your cluster without the console:'
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 若要快速部署，替换 Azure 存储容器名称、Azure 存储帐户名称和 AKS 帐户密钥，然后执行以下命令，在您的集群上部署最新版本的 Pachyderm，而不使用控制台：
- en: '[PRE97]'
  id: totrans-324
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE97]'
- en: 'If you have an enterprise key and you would like to deploy it with Pachyderm''s
    console user interface, execute the following command:'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有企业密钥，并且希望通过 Pachyderm 的控制台用户界面进行部署，请执行以下命令：
- en: '[PRE98]'
  id: totrans-326
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: Once the console is deployed successfully, follow the instructions under the
    *Accessing the Pachyderm console* section to access the console.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦控制台成功部署，按照 *访问 Pachyderm 控制台* 部分的指示访问控制台。
- en: 'A Kubernetes Deployment is a controller that rolls out a ReplicaSet of Pods
    based on the requirements defined in your manifest file. Execute the following
    command to verify the state of Deployments created during the installation:'
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Kubernetes 部署是一个控制器，它基于清单文件中定义的要求，推出一个 Pod 的副本集。执行以下命令以验证安装过程中创建的部署状态：
- en: '[PRE99]'
  id: totrans-329
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE99]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 前面命令的输出应如下所示：
- en: '[PRE100]'
  id: totrans-331
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: 'Execute the following command to verify a successful installation and see the
    Pods created as part of the Deployments:'
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以验证成功安装并查看作为部署的一部分创建的 Pods：
- en: '[PRE101]'
  id: totrans-333
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE101]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 前面命令的输出应如下所示：
- en: '[PRE102]'
  id: totrans-335
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: 'Execute the following command to verify the persistent volumes created as part
    of the Deployment:'
  id: totrans-336
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以验证作为部署的一部分创建的持久卷：
- en: '[PRE103]'
  id: totrans-337
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE103]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 前面命令的输出应如下所示：
- en: '[PRE104]'
  id: totrans-339
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: Important note
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 重要说明
- en: When Pachyderm is deployed using the `--dynamic-etcd-nodes` flag, it creates
    an `etcd` deployment to manage administrative metadata. In Azure, block storage
    used by `etcd` Pods is provisioned using the `default` StorageClass. This Storage
    Class uses the `azure-disk` provisioner with `StandardSSD_LRS` volumes. To use
    a different StorageClass during the deployment, you can customize the `values.yaml`
    file and update the `etcd.storageClass` parameter prior to the deployment.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 当使用 `--dynamic-etcd-nodes` 标志部署 Pachyderm 时，它会创建一个 `etcd` 部署来管理管理元数据。在 Azure
    中，`etcd` Pods 使用 `default` StorageClass 提供的块存储。这种存储类使用 `azure-disk` 提供程序和 `StandardSSD_LRS`
    卷。如果在部署过程中想使用不同的 StorageClass，您可以自定义 `values.yaml` 文件，并在部署之前更新 `etcd.storageClass`
    参数。
- en: 'Execute the following command to verify the successful installation of Pachyderm:'
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以验证 Pachyderm 是否已成功安装：
- en: '[PRE105]'
  id: totrans-343
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE105]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 前面命令的输出应如下所示：
- en: '[PRE106]'
  id: totrans-345
  prefs: []
  type: TYPE_PRE
  zh: '[PRE106]'
- en: Now that we have installed Pachyderm on your AKS cluster, you are ready to create
    your first pipeline.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您已在 AKS 集群上安装了 Pachyderm，准备创建您的第一个管道。
- en: Deleting a Pachyderm deployment on AKS
  id: totrans-347
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 AKS 上删除 Pachyderm 部署
- en: If you need to delete your deployment or start afresh, you can wipe out your
    environment and start over again using the *Preparing an AKS cluster to run Pachyderm*
    instructions.
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要删除部署或重新开始，您可以使用 *准备 AKS 集群以运行 Pachyderm* 指令来清除环境并重新开始。
- en: 'Let''s perform the following steps to delete your existing Pachyderm deployment:'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们执行以下步骤以删除现有的 Pachyderm 部署：
- en: 'If you have used a different name for your Helm instance, execute the following
    command to find the Pachyderm instance name deployed using the Helm Chart:'
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您为 Helm 实例使用了不同的名称，请执行以下命令查找使用 Helm Chart 部署的 Pachyderm 实例名称：
- en: '[PRE107]'
  id: totrans-351
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE107]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 前面命令的输出应如下所示：
- en: '[PRE108]'
  id: totrans-353
  prefs: []
  type: TYPE_PRE
  zh: '[PRE108]'
- en: 'Execute the following command using your Pachyderm instance name to remove
    Pachyderm components from your cluster:'
  id: totrans-354
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用您的 Pachyderm 实例名称执行以下命令，以从集群中删除 Pachyderm 组件：
- en: '[PRE109]'
  id: totrans-355
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE109]'
- en: 'Execute the following command to retrieve the list of AKS clusters deployed
    and identify the name of your cluster:'
  id: totrans-356
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行以下命令以检索已部署的所有 AKS 集群列表，并识别您的集群名称：
- en: '[PRE110]'
  id: totrans-357
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE110]'
- en: 'The output of the preceding command should look as follows:'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应如下所示：
- en: '[PRE111]'
  id: totrans-359
  prefs: []
  type: TYPE_PRE
  zh: '[PRE111]'
- en: 'If you would like to remove the cluster completely, copy the name of your cluster
    from the preceding output and execute the following command after replacing the
    name to delete the AKS cluster. Note that all the other workloads on this cluster
    will also be destroyed:'
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您想完全删除集群，请从上述输出中复制您的集群名称，并在替换名称后执行以下命令以删除 AKS 集群。请注意，此集群上的所有其他工作负载也将被销毁：
- en: '[PRE112]'
  id: totrans-361
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE112]'
- en: 'The output of the preceding command should complete similar to the following:'
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 上述命令的输出应与以下内容类似：
- en: '[PRE113]'
  id: totrans-363
  prefs: []
  type: TYPE_PRE
  zh: '[PRE113]'
- en: Now you have completely removed Pachyderm and your Kubernetes cluster from your
    AKS account.
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您已从 AKS 帐户中完全删除了 Pachyderm 和您的 Kubernetes 集群。
- en: Accessing the Pachyderm console
  id: totrans-365
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 访问 Pachyderm 控制台
- en: Pachyderm Enterprise Edition offers a graphical user interface where you can
    see pipelines and repositories. Accessing the Pachyderm console using port forwarding
    was covered in [*Chapter 4*](B17085_04_Final_SB_Epub.xhtml#_idTextAnchor096),
    *Installing Pachyderm Locally*.
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: Pachyderm 企业版提供了一个图形用户界面，您可以在其中查看管道和代码库。使用端口转发访问 Pachyderm 控制台已在[*第 4 章*](B17085_04_Final_SB_Epub.xhtml#_idTextAnchor096)，*在本地安装
    Pachyderm*中进行了介绍。
- en: In addition, for cloud deployments, you can deploy a Kubernetes ingress to access
    the Pachyderm console securely. For more information, refer to the official Pachyderm
    documentation.
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，对于云部署，您可以部署 Kubernetes Ingress 来安全访问 Pachyderm 控制台。有关更多信息，请参阅官方 Pachyderm
    文档。
- en: Summary
  id: totrans-368
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 概述
- en: In this chapter, we learned the software prerequisites for getting Pachyderm
    up and running on managed Kubernetes services from major cloud providers including
    AWS, Google Cloud, and Microsoft Azure.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们了解了在主要云提供商的托管 Kubernetes 服务上运行 Pachyderm 所需的软件先决条件，包括 AWS、Google Cloud
    和 Microsoft Azure。
- en: We acquired basic knowledge of cloud providers' command-line tools and learned
    how to install and operate them on your local machine to provide production-grade
    Kubernetes clusters.
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 我们获取了有关云提供商命令行工具的基本知识，并学习了如何在本地机器上安装和操作这些工具，以提供生产级别的 Kubernetes 集群。
- en: We created an object storage bucket and also deployed highly available multi-node
    managed Kubernetes clusters using the most common configuration options. And finally,
    we deployed a Pachyderm instance.
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 我们创建了一个对象存储桶，并使用最常见的配置选项部署了高可用性多节点托管 Kubernetes 集群。最后，我们部署了一个 Pachyderm 实例。
- en: In the next chapter, we will learn in detail about creating your first pipeline.
    You will learn a simple data science example and a pipeline creation workflow.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将详细了解如何创建您的第一个管道。您将学习一个简单的数据科学示例和管道创建工作流程。
- en: Further reading
  id: totrans-373
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'You can refer to the following links for more information on the topics covered
    in this chapter:'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以参考本章涵盖的主题的以下链接获取更多信息：
- en: '*Using the AWS CLI official documentation*: [https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-using.html](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-using.html)'
  id: totrans-375
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用 AWS CLI 官方文档*: [https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-using.html](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-using.html)'
- en: '*Getting started with the Google Cloud SDK official documentation*: [https://cloud.google.com/sdk/docs/quickstart](https://cloud.google.com/sdk/docs/quickstart)'
  id: totrans-376
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*开始使用 Google Cloud SDK 官方文档*: [https://cloud.google.com/sdk/docs/quickstart](https://cloud.google.com/sdk/docs/quickstart)'
- en: '*Using the Azure CLI official documentation*: [https://docs.microsoft.com/en-us/cli/azure/](https://docs.microsoft.com/en-us/cli/azure/)'
  id: totrans-377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用 Azure CLI 官方文档*: [https://docs.microsoft.com/en-us/cli/azure/](https://docs.microsoft.com/en-us/cli/azure/)'
- en: '*eksctl documentation*: [https://eksctl.io/introduction/](https://eksctl.io/introduction/)'
  id: totrans-378
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*eksctl 文档*: [https://eksctl.io/introduction/](https://eksctl.io/introduction/)'
- en: '*eksctl advanced cluster deployment examples*: [https://github.com/weaveworks/eksctl/tree/main/examples](https://github.com/weaveworks/eksctl/tree/main/examples)'
  id: totrans-379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*eksctl 高级集群部署示例*: [https://github.com/weaveworks/eksctl/tree/main/examples](https://github.com/weaveworks/eksctl/tree/main/examples)'
- en: '*kOps documentation*: [https://kubernetes.io/docs/setup/production-environment/tools/kops/](https://kubernetes.io/docs/setup/production-environment/tools/kops/)'
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*kOps 文档*: [https://kubernetes.io/docs/setup/production-environment/tools/kops/](https://kubernetes.io/docs/setup/production-environment/tools/kops/)'
- en: '*Kubespray documentation*: [https://kubernetes.io/docs/setup/production-environment/tools/kubespray/](https://kubernetes.io/docs/setup/production-environment/tools/kubespray/)'
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Kubespray 文档*: [https://kubernetes.io/docs/setup/production-environment/tools/kubespray/](https://kubernetes.io/docs/setup/production-environment/tools/kubespray/)'
- en: '*Kubernetes in production best practices*: [https://www.packtpub.com/product/kubernetes-in-production-best-practices/9781800202450](https://www.packtpub.com/product/kubernetes-in-production-best-practices/9781800202450)'
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Kubernetes 生产环境最佳实践*: [https://www.packtpub.com/product/kubernetes-in-production-best-practices/9781800202450](https://www.packtpub.com/product/kubernetes-in-production-best-practices/9781800202450)'
- en: '*Mastering Kubernetes – Third Edition*: [https://www.packtpub.com/product/mastering-kubernetes-third-edition/9781839211256](https://www.packtpub.com/product/mastering-kubernetes-third-edition/9781839211256)'
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*掌握Kubernetes – 第三版*: [https://www.packtpub.com/product/mastering-kubernetes-third-edition/9781839211256](https://www.packtpub.com/product/mastering-kubernetes-third-edition/9781839211256)'
