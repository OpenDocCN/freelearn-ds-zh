- en: Chapter 10. Collaborative Filtering and Recommendation System
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章 协同过滤与推荐系统
- en: Every day, we are immersed with decisions and choices. These can range from
    our clothes to the movies we can watch or what to eat when we order online. We
    take decisions in business, too. For instance, which stock we should invest in.
    The set of choices that we have can vary depending on what we are actually doing
    and what we want. For example, when buying clothes online from Flipkart or Amazon
    we see hundreds or thousands of choices. Amazon's Kindle store is so huge that
    no one can read all the books in their lifetime. To make these decisions, we require
    some background information and maybe a little help in knowing what can be best
    for us.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 每天，我们都面临各种决策和选择。这些选择可以从我们的衣物，到我们能看的电影，甚至是我们在线订餐时的选择。我们在商业中也需要做决策。例如，选择我们应该投资哪只股票。我们所面临的选择集合会根据我们实际做什么以及我们想要什么而有所不同。例如，在
    Flipkart 或 Amazon 上购买衣物时，我们会看到成百上千的选择。Amazon 的 Kindle 商店如此庞大，以至于没有人能够在一生中读完所有书籍。为了做出这些决策，我们需要一些背景信息，也许还需要一点帮助，知道什么对我们最好。
- en: Generally, individuals depend on suggestions from their companions or the counsel
    of specialists to choose and make decisions. They may observe their friends or
    trusted people to make the same decisions as them. These include either paying
    a good amount on the ticket and go to watch a movie, or order a specific pizza
    that the individual has not tasted before, or start reading a book the individual
    knows nothing about.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，个人依赖于朋友的建议或专家的意见来做出选择和决策。他们可能会观察朋友或信任的人，做出与自己相同的决策。这些决策可能包括支付一笔较高的票价去看电影，或者点一份自己从未尝试过的披萨，或者开始阅读一本自己一无所知的书。
- en: The way these suggestions are made have limits. These are not dependent on the
    likings or the "taste" of the user. There might be many movies or pizzas or books
    that one may like and their friends or their company won't on whose his decisions
    are usually made. This specific taste of the user cannot be taken care of by the
    traditional way of suggestions or recommendations.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 这些建议的产生方式是有限制的。这些建议并不依赖于用户的喜好或“口味”。可能有许多电影、披萨或书籍是某人可能喜欢的，但他们的朋友或公司可能并不喜欢，而这些人的决定通常会影响他们的选择。传统的建议或推荐方式无法照顾到用户的特定口味。
- en: 'In this chapter, we will learn:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将学习：
- en: What are recommendation systems?
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是推荐系统？
- en: Association rule mining.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关联规则挖掘
- en: Content-based filtering.
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于内容的过滤
- en: What is collaborative filtering?
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是协同过滤？
- en: What is user-based and item-based collaborative filtering?
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是基于用户和基于项目的协同过滤？
- en: Building a recommendation engine.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建推荐引擎
- en: What is a recommendation system?
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是推荐系统？
- en: Recommendation frameworks use learning methods for making customized suggestions
    for data, items, or services. These recommendation systems generally have some
    level of interaction with the target individual. The amount of data that has been
    collected in recent years and the data that is being generated today proved a
    great boon for these recommendation systems.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐框架使用学习方法来为数据、物品或服务提供个性化的建议。这些推荐系统通常与目标用户有一定程度的互动。近年来收集到的数据以及今天产生的数据，为这些推荐系统提供了巨大的支持。
- en: 'Today, many recommendation systems are in operation and produce millions of
    recommendations per day:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 今天，许多推荐系统正在运行，并每天生成数百万条推荐：
- en: Recommendations on e-commerce websites regarding the books, clothes, or items
    to buy
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电子商务网站关于书籍、衣物或商品的推荐
- en: Advertisements suited to our tastes
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 适合我们口味的广告
- en: Type of properties that we may be interested in
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可能感兴趣的属性类型
- en: Travel packages suited to our tastes and budget
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 适合我们口味和预算的旅游套餐
- en: The current generation of recommender systems are able to make worthy recommendations
    and are scaled to millions of products and target users. It is required that even
    if the number of products or users increase, the recommender system should continue
    to work. But this becomes another challenge, as to get better recommendations
    the algorithm would process more data which would increase the time taken for
    recommendations. If we limit the data that is processed, the recommendations generated
    may not be that effective or have the quality that the user would trust.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 当前一代推荐系统能够提供有价值的推荐，并且可以扩展到数百万种产品和目标用户。即使产品或用户的数量增加，推荐系统也应该继续正常工作。但这也带来了另一个挑战，因为为了获得更好的推荐，算法将处理更多的数据，这将增加推荐所需的时间。如果限制处理的数据量，生成的推荐可能不那么有效，或者质量无法获得用户的信任。
- en: We need to create the balance and devise the mechanisms to process more data
    in a less amount of time.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要创建平衡，并设计机制以在更短的时间内处理更多数据。
- en: This is done by utilizing user-based collaborative filtering or item-based collaborative
    filtering. Before we go further in collaborative filtering, we will also go through
    association rule mining.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 这是通过使用基于用户的协同过滤或基于物品的协同过滤来实现的。在深入了解协同过滤之前，我们还将介绍关联规则挖掘。
- en: A recommender framework is an essential part of the data and e-business system.
    It is an effective technique for empowering clients to channel through vast data
    and item spaces. It also helps the user to find the product right at the front
    which the user might not have been able to search for or might not have bought
    if the recommendation system hadn't been there in place. This also helps in increasing
    the sales as more and more users find the correct item that they would be interested
    in buying.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐系统框架是数据和电子商务系统中的核心部分。它是一个有效的技术，帮助客户在海量数据和商品空间中筛选信息。它还帮助用户发现他们可能未曾搜索过或未曾购买的产品，如果没有推荐系统的存在，用户可能根本不会接触到这些产品。这也有助于提高销售，因为越来越多的用户会找到他们感兴趣的正确物品。
- en: A lot of research has been made to improve the recommender systems and it has
    been accepted that there is no recommender system that can fit to every kind of
    problem.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐系统的改进已经进行了大量研究，并且普遍认为没有一种推荐系统能够适应所有类型的问题。
- en: 'Algorithms cannot work without the user interaction or the data. Interaction
    with the user is needed to:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 算法无法在没有用户交互或数据的情况下工作。与用户的交互是必要的：
- en: Understand the user
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解用户
- en: Provide recommendations generated to the user
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向用户提供生成的推荐
- en: This is a big challenge to collect the "good" data from the user, that is, eliminating
    or removing the noisy data that can have an affect on the recommendations that
    will be generated.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 从用户那里收集“好”数据是一个巨大挑战，即消除或去除那些可能影响生成推荐结果的噪音数据。
- en: Some users generally traverse through various information on the Internet, while
    some are focused only on the data they are interested in. Also, some users are
    very concerned about their privacy and don't allow the data collection process
    to happen.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 一些用户通常会浏览互联网上的各种信息，而另一些用户则只关注他们感兴趣的数据。另外，一些用户非常关注隐私，不允许数据收集过程进行。
- en: Actually, the current recommender systems generally give good recommendations
    when fed with clean and useful data. A lot of effort is put into the data collection
    and cleaning phase where we understand which data is actually of use to the user.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，当前的推荐系统通常在提供干净且有用的数据时能够给出好的推荐。大量的工作被投入到数据收集和清洗阶段，在这个过程中我们了解哪些数据对用户实际上是有用的。
- en: The utility matrix
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 用户效用矩阵
- en: 'Generally, we encounter entities belonging to two classes in recommender systems:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 一般来说，在推荐系统中，我们会遇到属于两个类别的实体：
- en: Users
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户
- en: Items
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 物品
- en: Users may have a liking for specific items and we need to find this liking and
    show the items matching the criteria to them.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可能会对特定的物品有偏好，我们需要发现这种偏好，并向他们展示符合标准的物品。
- en: 'Let''s take an example of the matrix of user ratings for movies. We will make
    a user-movie matrix where the the ratings would be values in this matrix:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们以电影的用户评分矩阵为例。我们将构建一个用户-电影矩阵，其中评分将作为矩阵中的值：
- en: '|  | **Star Wars IV** | **The Godfather** | **LOTR 1** | **LOTR 2** | **LOTR
    3** | **The Notebook** | **Titanic** |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '|  | **星际大战 IV** | **教父** | **指环王 1** | **指环王 2** | **指环王 3** | **恋恋笔记本** |
    **泰坦尼克号** |'
- en: '| **User 1** |  | 4 |  |  | 3 | 3 |  |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| **用户 1** |  | 4 |  |  | 3 | 3 |  |'
- en: '| **User 2** | 5 |  |  | 3 |  |  | 2 |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| **用户 2** | 5 |  |  | 3 |  |  | 2 |'
- en: '| **User 3** | 5 |  | 5 |  | 4 |  |  |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| **用户 3** | 5 |  | 5 |  | 4 |  |  |'
- en: '| **User 4** |  | 4 |  |  |  | 3 |  |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| **用户 4** |  | 4 |  |  |  | 3 |  |'
- en: '| **User 5** | 2 |  |  |  | 3 | 4 | 5 |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| **用户 5** | 2 |  |  |  | 3 | 4 | 5 |'
- en: In this particular example, we can see that user 1 has given a rating of 4 to
    "The Godfather", a rating of 3 to "LOTR 3" (The Lord of the Rings 3), and a rating
    of 3 to "The Notebook", but the user has not given ratings to other movies, which
    is generally due to the reason that the user has not watched the movie. It is
    also a possibility that the user preferred not to share views regarding the movie.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个具体的例子中，我们可以看到用户 1 给《教父》打了 4 分，给《指环王 3》打了 3 分，给《恋恋笔记本》打了 3 分，但该用户没有给其他电影评分，这通常是因为用户没有观看这些电影。也有可能是用户选择不分享对这些电影的看法。
- en: The values range from 1 to 5, 1 being the lowest and 5 being the highest rating
    for a movie. It is evident that the matrix is sparse, which means that most of
    the entries are unknown. In the real world, the data that we encounter is more
    sparse and we are required to fill these blank spaces with the probable ratings
    from the user and thus give the recommendations.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 这些值的范围是从 1 到 5，1 为最低评分，5 为最高评分。这表明矩阵是稀疏的，意味着大多数条目是未知的。在现实世界中，我们遇到的数据通常更稀疏，我们需要用用户可能的评分来填充这些空白，从而提供推荐。
- en: Association rule mining
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关联规则挖掘
- en: Association rule mining is finding associations or patterns among a collection
    of items which occur frequently. It is also known as **Market basket analysis**.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 关联规则挖掘是寻找频繁出现的项目集合之间的关联或模式。这也被称为**市场篮分析**。
- en: Its main aim is to understand the buying habits of the customer, which is done
    by finding the correlations and patterns among the items that customers intended
    to buy or actually bought. For example, a customer who buys a computer keyboard
    is also likely to buy a computer mouse or a pen drive.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 它的主要目的是理解顾客的购买习惯，通过发现顾客打算购买或实际购买的商品之间的关联性和模式来实现。例如，购买计算机键盘的顾客也很可能购买计算机鼠标或优盘。
- en: 'The rule is given by:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 该规则由以下给出：
- en: Antecedent → Consequent [support, confidence]
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 前提 → 结果 [支持度，置信度]
- en: Measures of association rules
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关联规则的衡量标准
- en: Let *A*, *B*, *C*, *D*, and *E* .... represent different items.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 令* A *、* B *、* C *、* D * 和* E *……表示不同的商品。
- en: 'Then we need to generate association rules, for example:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们需要生成关联规则，例如：
- en: '*{A, J} → {C}*'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*{A, J} → {C}*'
- en: '*{M, D, J} → {X}*'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*{M, D, J} → {X}*'
- en: The first rule here means that when *A* and *J* are bought together then there
    is a high probability of the customer buying *C* too.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个规则表示，当* A *和* J *一起购买时，顾客购买* C *的概率很高。
- en: Similarly, the second rule means that when *M*, *D*, and *J* are bought together
    there is a high probability of the customer buying *X* too.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，第二个规则表示，当* M *、* D *和* J *一起购买时，顾客购买* X *的概率也很高。
- en: 'These rules are measured by:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 这些规则通过以下方式衡量：
- en: '**Support**: Support refers to the total coverage. It is the probability of
    items bought together over the total transactions:'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**支持度**：支持度指的是总覆盖率。它是一起购买商品的概率，占总交易的比例：'
- en: 'Support, X → Y: P(X,Y)'
  id: totrans-57
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '支持度, X → Y: P(X,Y)'
- en: (transactions containing both X and Y)/(total number of transactions)
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: （同时包含 X 和 Y 的交易）/（总交易数）
- en: '**Confidence**: Confidence refers to the accuracy. It is the probability of
    buying the second item if the first item is bought:'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**置信度**：置信度指的是准确性。它是购买第二件商品的概率，前提是第一件商品已经被购买：'
- en: 'Confidence, X → Y: P(Y|X)'
  id: totrans-60
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '置信度, X → Y: P(Y|X)'
- en: (transactions that contain both X and Y) / (transactions that contain only X)
  id: totrans-61
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: （包含 X 和 Y 的交易）/（仅包含 X 的交易）
- en: 'Some items are not bought that frequently and they may not be of that much
    importance to the algorithm. To generate these rules, these items need to to be
    dropped. These are defined by the two thresholds, which are called:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 有些商品购买得不够频繁，它们可能对算法没有那么重要。为了生成这些规则，需要丢弃这些商品。它们通过两个阈值来定义，称为：
- en: Minimum support
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最小支持度
- en: Minimum confidence
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最小置信度
- en: How to generate the item sets
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何生成项目集
- en: Item sets that have the required minimal support are chosen.
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 满足所需最小支持度的项目集被选中。
- en: If {X,Y} fulfills the criteria for the minimal support, then X and Y also fulfill
    that criteria. The vice-versa is not true.
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果 {X,Y} 满足最小支持度的标准，那么 X 和 Y 也满足该标准，反之则不成立。
- en: '**Apriori algorithm**:Subsets belonging to the frequent item sets are themselves
    frequent:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '**Apriori 算法**：属于频繁项目集的子集本身也是频繁的：'
- en: 'First, all the item sets are found based on the *n*:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，基于 *n* 查找所有项目集：
- en: For example, when *n=2*, *{{X,Y}, {Y,Z}, {X,S}, {S,Y}}*
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如，当 *n=2* 时，*{{X,Y}, {Y,Z}, {X,S}, {S,Y}}*
- en: 'Now we merge these sets to a higher level:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们将这些集合合并到更高的层次：
- en: '*{{X,Y,Z}, {X,Y,S}, {Y,Z,S}, {X,Z,S}}*'
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*{{X,Y,Z}, {X,Y,S}, {Y,Z,S}, {X,Z,S}}*'
- en: 'Out of these merged sets, we check how many of these have the required minimum
    support:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从这些合并的集合中，我们检查有多少个符合所需的最小支持度：
- en: We eliminate those sets whose minimum support couldn't be generated
  id: totrans-74
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们排除那些无法生成最小支持度的集合
- en: We keep on increasing the level to the point where no more sets can be generated
    that have the required minimal support
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们不断增加层级，直到无法生成具有所需最小支持度的集合为止
- en: How to generate the rules
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何生成规则
- en: 'When the number of item sets is small, the brute-force method is used:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 当项目集数量较小时，使用暴力破解方法：
- en: Subsets of all the item sets are generated. The empty set is not included.
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成所有项目集的子集。空集不包括在内。
- en: Confidence of these subsets is computed.
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算这些子集的置信度。
- en: Rules having higher confidence are selected.
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择具有较高置信度的规则。
- en: Content-based filtering
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于内容的过滤
- en: Content-based filtering creates a profile of the user and uses this profile
    to give relevant recommendations to the user. The profile of the user is created
    by the history of the user.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 基于内容的过滤创建用户的个人资料，并利用该个人资料向用户提供相关的推荐。用户个人资料是通过用户的历史记录创建的。
- en: 'For example, an e-commerce company can track the following details of the user
    to generate recommendations:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，电子商务公司可以跟踪以下用户详细信息，以生成推荐：
- en: Items ordered in the past
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 过去的订单项
- en: Items viewed or added to the cart but not purchased
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查看或加入购物车但未购买的项目
- en: User browsing history to identify what kinds of products the user may be interested
    in
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户浏览历史记录，用于识别用户可能感兴趣的产品类型
- en: The user may or may not have manually given ratings to these items, but various
    factors can be considered to evaluate their relevance to the user. Based on this,
    new items are recommended to the user that would be interesting to that user.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可能没有手动为这些项目评分，但可以考虑各种因素来评估它们与用户的相关性。基于此，向用户推荐那些可能感兴趣的新项目。
- en: '![Content-based filtering](img/B05321_10_01.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![基于内容的过滤](img/B05321_10_01.jpg)'
- en: The process as shown, takes the attributes from the user profile and matches
    them with the attributes of the items available. When there are relevant items
    available, these are considered to be of interest to the user and are recommended.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 如图所示的过程，从用户个人资料中获取属性，并将其与可用项目的属性进行匹配。当有相关项目时，这些项目被认为是用户感兴趣的，并进行推荐。
- en: Therefore, the recommendations are heavily dependent on the profile of the user.
    If the user profile correctly represents the user likings and interests then the
    recommendations produced would be accurate and if the profile is not the current
    representation of the user's preferences then the recommendations produced may
    not be accurate.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，推荐结果在很大程度上依赖于用户的个人资料。如果用户个人资料正确反映了用户的喜好和兴趣，那么生成的推荐将是准确的；如果个人资料没有反映用户当前的偏好，那么生成的推荐可能不准确。
- en: Steps involved in content-based filtering
  id: totrans-91
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基于内容的过滤的步骤
- en: 'There are multiple steps involved in generating recommendations using content-based
    filtering. These steps are as follows:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用基于内容的过滤生成推荐时涉及多个步骤。这些步骤如下：
- en: 'Analyzing attributes of the items. There is a possibility that the items that
    are the candidates for the recommendation don''t have the valid structure of the
    information. Therefore, the first step is to extract these attributes from the
    items in a structured way:'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析项目的属性。候选推荐项目可能没有有效的信息结构。因此，第一步是以结构化的方式从项目中提取这些属性：
- en: For instance, for an e-commerce company, these attributes are the properties
    or features of the products available in their catalog
  id: totrans-94
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如，对于一家电子商务公司，这些属性是他们目录中产品的属性或特征
- en: 'Generating the profile of the user. The user profile is created considering
    various factors. This is done using machine learning techniques. The various factors
    that can be considered are:'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成用户的个人资料。用户个人资料是通过考虑各种因素来创建的。这个过程是使用机器学习技术完成的。可以考虑的各种因素包括：
- en: Order history
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 订单历史
- en: Item view history
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 项目查看历史
- en: User browsing history to identify what kind of products the user may be interested
    in
  id: totrans-98
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户浏览历史记录，用于识别用户可能感兴趣的产品类型
- en: In addition to these, the feedback from the user is also taken into account.
    For example, if the user was satisfied after ordering a product, how many times
    the user viewed a product and how much time was spent on it.
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 除此之外，用户的反馈也会被考虑在内。例如，如果用户在订购产品后感到满意，用户查看了产品多少次，以及在产品上花了多少时间。
- en: The recommender using the preceding two generated components. The following
    generated user profile and the item attributes that are extracted are matched
    against each other using various techniques. Different weights are provided to
    the different attributes of both user and item. We then generate recommendations
    that can be ordered on the basis of relevance.
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 推荐系统使用前面两步生成的组件，接下来生成的用户资料和提取的商品属性通过各种技术进行匹配。用户和商品的不同属性会被赋予不同的权重。然后，我们生成的推荐内容可以根据相关性进行排序。
- en: Generating a user profile is a typical task and it needs to be exhaustive to
    generate a more accurate profile.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 生成用户资料是一个典型的任务，并且需要全面性，以便生成更准确的资料。
- en: 'Social networks help to build a user profile. That is a treasure trove of the
    information that is manually provided by the user. The user gives the details,
    such as:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 社交网络有助于建立用户资料。它是用户手动提供的信息宝库。用户提供了诸如以下内容的详细信息：
- en: Type of products interested in, such as which type of books, music, and so on
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户感兴趣的产品类型，例如哪些类型的书籍、音乐等
- en: Products disliked such as some particular cuisine, cosmetic brands, and so on
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户不喜欢的产品，例如某些特定的菜肴、化妆品牌等
- en: 'After we start giving user recommendations, we also have the capability to
    receive feedback, which helps the recommender to produce better recommendations:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们开始为用户提供推荐后，我们还可以收到反馈，这有助于推荐系统生成更好的推荐内容：
- en: '**Explicit feedback**: When we buy an item on an e-commerce website, we generally
    receive a feedback form after 2-3 days of initial use. The primary aim of this
    form is to help the company to know if we actually liked the product and if not,
    what could have been done to make it better. This is called explicit feedback.
    This enables the recommender system to know that the product was not completely
    suited for the user or a better product could have been recommended.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**显式反馈**：当我们在电商网站上购买商品时，通常会在初次使用后2-3天收到反馈表单。该表单的主要目的是帮助公司了解我们是否喜欢该产品，如果不喜欢，应该如何改进。这就是显式反馈。它使得推荐系统可以知道该产品不完全适合用户，或者可以推荐一个更合适的产品。'
- en: '**Implicit feedback**: The user may not be required to manually fill out the
    feedback or may choose not to do so. In such a scenario, the user''s activities
    are analyzed and monitored to know what the response was of the user towards the
    product.'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**隐式反馈**：用户可能不需要手动填写反馈表单，或者可能选择不填写。在这种情况下，用户的活动会被分析和监控，以了解用户对产品的反应。'
- en: Feedback may also be present as the comments on the product review section on
    these e-commerce sites. These comments can be mined, and sentiment of the user
    can be extracted.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 反馈也可能出现在这些电商网站的产品评论区。这些评论可以被挖掘，从中提取出用户的情感。
- en: Although having direct feedback from the user makes it easier for the system,
    most users choose to ignore this particular feedback.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管从用户那里获得直接反馈可以让系统更容易工作，但大多数用户选择忽略这种反馈。
- en: Advantages of content-based filtering
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基于内容的过滤的优点
- en: 'There are many advantages of using content-based filtering:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 使用基于内容的过滤方法有很多优点：
- en: Content-based filtering is dependent only on the user that we are generating
    recommendations for. These are not dependent on the other users' ratings or profiles.
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于内容的过滤仅依赖于我们为其生成推荐的用户。这些推荐不依赖于其他用户的评分或资料。
- en: The recommendations generated can be explained to the user as they are dependent
    on the user's profile and the attributes of the items present.
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生成的推荐内容可以向用户解释，因为它们是依赖于用户的个人资料和商品的属性。
- en: As the recommendations are not based on the ratings of the items, but on the
    attributes of these items and the profile of the users, the newer items that have
    not yet been bought or rated can be recommended too.
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于推荐不是基于商品的评分，而是基于这些商品的属性和用户的个人资料，因此尚未购买或评分的新商品也可以被推荐。
- en: Limitations of content-based filtering
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基于内容的过滤的局限性
- en: 'There are some limitations of content-based filtering too:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 基于内容的过滤方法也有一些局限性：
- en: As content-based filtering requires the user profile, for a new user it can
    be difficult to generate recommendations. To give good quality recommendations,
    we need to analyze the user's activity and still the recommendations generated
    may not be as per to the user's liking.
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于基于内容的过滤需要用户资料，对于新用户来说，生成推荐可能会很困难。为了提供高质量的推荐，我们需要分析用户的活动，但生成的推荐可能仍然不会符合用户的喜好。
- en: When the attributes or the features of the items are not readily available,
    the content-based filtering faces difficulty to give recommendations. Also, sufficient
    domain knowledge is also needed to understand these attributes.
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当项目的属性或特征不可用时，基于内容的过滤会面临提供推荐的困难。此外，还需要足够的领域知识来理解这些属性。
- en: Content-based filtering is also dependent on the feedback provided by the user.
    So, we need to analyze and monitor for the user feedback continuously. In the
    scenario where the system can't understand if it is positive or negative feedback,
    then it may not give such relevant recommendations.
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于内容的过滤还依赖于用户提供的反馈。因此，我们需要持续分析和监控用户的反馈。在系统无法判断反馈是正面还是负面时，它可能无法提供相关的推荐。
- en: CBF also has the tendency to limit the recommendations to a very specific set.
    It may not be able to recommend similar or related items that the user might be
    interested in.
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CBF（基于内容的过滤）也有将推荐限制在特定集合中的倾向。它可能无法推荐用户可能感兴趣的类似或相关项目。
- en: Collaborative filtering
  id: totrans-121
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 协同过滤
- en: Collaborative filtering is a famous algorithm that is based on the likings or
    the behavior of other users or peers unlike the content-based filtering that we
    studied in the previous section.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 协同过滤是一种著名的算法，它基于其他用户或同伴的喜好或行为，不同于我们在前一节中研究的基于内容的过滤。
- en: 'Collaborative filtering:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 协同过滤：
- en: If the user likes some of the things that other users or peers have shown an
    inclination to, then the preferences of these users can be recommended to the
    desired user
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果用户喜欢其他用户或同伴表现出兴趣的某些项目，那么这些用户的偏好可以推荐给目标用户。
- en: It is referred to as the "nearest neighbor recommendation"
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它被称为“最近邻推荐”
- en: 'To implement collaborative filtering, some assumptions are made:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 为了实现协同过滤，做出了一些假设：
- en: Likings or the behavior of peers or other users can be taken into consideration
    to understand and predict for the desired user. Therefore, an assumption is made
    that the desired user has similar tastes as the other users taken into consideration
    here.
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以考虑同伴或其他用户的喜好或行为，以了解并预测目标用户的兴趣。因此，假设目标用户与其他考虑的用户具有相似的兴趣。
- en: If the user got a recommendation in the past based on ratings of a group of
    users, then the user would have a similar taste with that group.
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果用户过去是根据一组用户的评分获得推荐的，那么该用户与该组具有相似的兴趣。
- en: 'There are different types of collaborative filtering:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 协同过滤有不同的类型：
- en: '**Memory-based collaborative filtering**: Memory-based collaborative filtering
    is based on the rating of the users to compute the similarity between the users
    or even the items. This is used to make the recommendations:'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基于记忆的协同过滤**：基于记忆的协同过滤通过用户的评分计算用户之间甚至是项目之间的相似性。这用于生成推荐：'
- en: It makes use of the rating matrix
  id: totrans-131
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它利用评分矩阵
- en: Recommendations are generated for the desired user using this rating matrix
    at any given time
  id: totrans-132
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用这个评分矩阵，可以在任何给定时刻为目标用户生成推荐。
- en: '**Model-based collaborative filtering**: Model-based collaborative filtering
    depends on the training data and the learning algorithm to create the model. This
    model is used to generate the recommendations using the actual data:'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基于模型的协同过滤**：基于模型的协同过滤依赖于训练数据和学习算法来创建模型。该模型用于利用实际数据生成推荐：'
- en: This method fits the model to the provided matrix to generate the recommendations
    on the basis of this model
  id: totrans-134
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这种方法将模型拟合到提供的矩阵，以便基于该模型生成推荐。
- en: 'The basic procedure for collaborative filtering includes:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 协同过滤的基本过程包括：
- en: As CF is highly based on the group whose preferences are considered, it is recommended
    to find the peer group with similar tastes
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于协同过滤高度依赖于考虑的群体的偏好，建议找到具有相似兴趣的同伴群体。
- en: The items that we will consider recommending should be there in the list of
    items from the group, but not of the user
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们考虑推荐的项目应该出现在该组的项目列表中，但不是用户的项目。
- en: After creating the matrix, the items are given a particular score depending
    on the various factors
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在创建矩阵后，根据各种因素为项目赋予特定的评分。
- en: The items that receive the highest scores are recommended
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 得分最高的项目将被推荐。
- en: To keep improving and adding the recommendations as new items are added to the
    list from the group, the preceding steps are performed again on a desired interval
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为了随着新项目的加入不断改进和添加推荐，前述步骤会在所需的时间间隔内重新执行。
- en: 'There are some advantages and disadvantages with collaborative filtering. Let''s
    go through the advantages:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 协同过滤有一些优点和缺点。让我们先来看看优点：
- en: It is easier to understand where attributes of the user are properly formed
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果用户的属性正确形成，那么就更容易理解。
- en: Users and products are simple systems and don't need specific understanding
    to build the recommender
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户和产品是简单的系统，不需要特定的理解即可构建推荐系统。
- en: The recommendations produced are generally good
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 产生的推荐通常很好
- en: 'There are some drawbacks to collaborative filtering, too:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 协同过滤也有一些缺点：
- en: As discussed earlier, collaborative filtering requires a lot of user feedback.
    Also, these users need to be reliable.
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正如前面所讨论的，协同过滤需要大量的用户反馈。此外，这些用户需要是可靠的。
- en: A standardization is also required for the attributes of the items.
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 还需要对项目的属性进行标准化。
- en: Assumption of past behavior will influence the present choices.
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 假设过去的行为会影响当前的选择。
- en: Baseline prediction methods
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基准预测方法
- en: 'A baseline is the simplest and easiest prediction that can be formed. It is
    important to calculate a baseline to know about the accuracy of the models we
    generate and validity of the results of the algorithms that we produce:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 基准预测方法是可以形成的最简单、最容易的预测。计算基准非常重要，因为它能帮助我们了解我们生成的模型的准确性以及我们产生的算法结果的有效性：
- en: '**Classification**: The baseline for classification problems can be formed
    by considering that most of the results of the predictions will be from the class
    with the most observations.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分类**：分类问题的基准可以通过考虑预测结果的大多数将来自观察量最多的类别来形成。'
- en: '**Regression**: The baseline for regression problems can be formed by considering
    that most of the results of the predictions will be a central tendency measure,
    such as mean or median.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**回归**：回归问题的基准可以通过考虑预测结果的大多数将是一个集中趋势度量（如均值或中位数）来形成。'
- en: '**Optimization**: Random samples in the domain are fixed when working on the
    optimization problem.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**优化**：在进行优化问题时，领域中的随机样本是固定的。'
- en: When we have chosen the baseline prediction methods and have the results we
    can compare them with the results of the models that we generated.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们选择了基准预测方法并得到结果后，可以将其与我们生成的模型结果进行比较。
- en: If the models that we generated are not able to out perform these baseline methods
    then most likely we need to work on the model to improve the accuracy.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们生成的模型无法超越这些基准方法，那么很可能我们需要在模型上进行改进，以提高准确性。
- en: User-based collaborative filtering
  id: totrans-156
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基于用户的协同过滤
- en: User-based collaborative filtering makes use of the main idea of collaborative
    filtering which is finding similar users that have past ratings or behavior somewhat
    similar to the target user.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 基于用户的协同过滤利用了协同过滤的核心思想，即找到与目标用户过去评分或行为相似的用户。
- en: This approach is also called k-Nearest Neighbour collaborative filtering.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法也被称为k-最近邻协同过滤。
- en: '![User-based collaborative filtering](img/B05321_10_02.jpg)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![基于用户的协同过滤](img/B05321_10_02.jpg)'
- en: If we have n number of users and x number of items, then we will have a matrix
    *R -> n*x*. In the preceding diagram, we can see that there is one target user
    and multiple other users. Out of these other users, two of them are similar to
    the target user. Therefore, the previous ratings or behavior can be utilized for
    generating the recommendations.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们有n个用户和x个项目，那么我们将得到一个矩阵 *R -> n*x*。在前面的图中，我们可以看到有一个目标用户和多个其他用户。在这些其他用户中，有两个与目标用户相似。因此，之前的评分或行为可以用于生成推荐。
- en: Other than the matrix mentioned above, we also need a function to compute the
    similarity between the users to calculate which users' ratings can be used to
    generate the recommendations.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 除了上述矩阵外，我们还需要一个函数来计算用户之间的相似度，以便计算哪些用户的评分可以用来生成推荐。
- en: 'To find the similarity between the users (u,v), we find the nearest neighbors
    using the Pearson Correlation coefficient (Pearson''s r):'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 为了找到用户（u，v）之间的相似度，我们使用Pearson相关系数（Pearson的r）来寻找最近邻：
- en: '![User-based collaborative filtering](img/B05321_10_03.jpg)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![基于用户的协同过滤](img/B05321_10_03.jpg)'
- en: 'This computes the neighborhood N ⊆ U of neighbors of *u*:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 这会计算邻居 *u* 的邻域 N ⊆ U：
- en: Perfectly positive correlation = 1
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完全正相关 = 1
- en: Perfectly negative correlation = -1
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完全负相关 = -1
- en: Pearson Correlation has a drawback in that it may show two users as similar
    even if they have very few ratings in common. To treat this, we can apply a threshold
    on the items that are rated by both the users.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: Pearson相关系数的缺点在于，即使两个用户之间有很少的共同评分，它也可能将他们显示为相似。为了解决这个问题，我们可以对两个用户都评分的项目应用一个阈值。
- en: 'Cosine similarity: This is another method to find similar users. This takes
    a different approach than Pearson Correlation.'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 余弦相似度：这是一种找到相似用户的另一种方法。它采用了不同于Pearson相关系数的方法。
- en: Unlike Pearson correlation, which uses statistical approach, cosine similarity
    uses the vector-space approach. In this method, users are not part of the matrix
    but are represented by |I|-dimensional vectors.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 与使用统计方法的Pearson相关系数不同，余弦相似度采用的是向量空间方法。在这种方法中，用户不是矩阵的一部分，而是由|I|维向量表示。
- en: To measure the similarity between two users (vectors), it computes the cosine
    distance. This is the dot product of the vectors and divides it by taking the
    product of their L2 (Euclidean) norms.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 为了衡量两个用户（向量）之间的相似度，它计算余弦距离。这是向量的点积，并将其除以它们的L2（欧几里得）范数的乘积。
- en: '![User-based collaborative filtering](img/B05321_10_04.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![基于用户的协同过滤](img/B05321_10_04.jpg)'
- en: When there is no rating for a particular item, the dot product becomes 0 and
    it drops out.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 当某个项目没有评分时，点积为0，并且它会被忽略。
- en: 'Now to generate the recommendation, we use:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，为了生成推荐，我们使用：
- en: '![User-based collaborative filtering](img/B05321_10_05.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![基于用户的协同过滤](img/B05321_10_05.jpg)'
- en: This computes the weighted average of the user's rating of the neighbors taking
    similarity as the weights. It is the most commonly used practice.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 它计算邻居的加权平均值，其中相似度作为权重。这是最常用的方法。
- en: 'Here are some drawbacks of user-based collaborative filtering:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是基于用户的协同过滤法的一些缺点：
- en: 'Sparsity: the matrix formed is usually very sparse and sparsity increases with
    the increase in number of users and items'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 稀疏性：所形成的矩阵通常非常稀疏，并且随着用户和项目数量的增加，稀疏性会增加。
- en: It is not always easy to effectively find nearest neighbors and make recommendations
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 找到最近邻并做出推荐并不总是那么容易。
- en: It is not very scalable and becomes computationally heavy with the increase
    in the number of users and items
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它的可扩展性较差，并且随着用户和项目数量的增加，计算负担加重。
- en: Sparse matrices may not be able to predict actual sets of like-minded people
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 稀疏矩阵可能无法预测实际的志同道合的人群集合。
- en: Item-item collaborative filtering
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 项目-项目协同过滤
- en: There are some drawbacks to the user-based collaborative filtering, one of them
    is scalability. To find the nearest neighbors, we find similarities between the
    neighbors, which involves a lot of computation. It may not be feasible to apply
    user-based collaborative filtering to systems having millions of users because
    of high computation power requirements.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 用户协同过滤法存在一些缺点，其中之一是可扩展性问题。为了找到最近邻，我们需要计算邻居之间的相似度，这涉及大量的计算。当用户数量达到数百万时，由于计算能力需求过高，用户协同过滤法可能无法应用。
- en: So, item-based collaborative filtering is used instead of user-based collaborative
    filtering to achieve the desired scalability. It looks for patterns such as a
    few items liked and an other few items disliked by the same set of users, then
    these are considered to be like-minded and items are recommended.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，为了实现所需的可扩展性，采用了项目-项目协同过滤，而不是用户协同过滤。它会寻找一些相似的模式，比如同一组用户喜欢某些项目而不喜欢其他项目，然后这些用户被视为志同道合，进而推荐项目。
- en: It is still required that we find the similar items in the item set by using
    k-Nearest Neighbor or a similar algorithm.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 仍然需要通过使用k-最近邻或类似算法，在项目集合中找到相似的项目。
- en: Let's consider a scenario where a user has rated a few items. After a few days,
    that particular user revisits those items and changes their rating. By changing
    their rating, the user is essentially going to another neighbor.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 假设有一个用户给了一些项目评分。几天后，该用户重新访问这些项目并修改他们的评分。通过修改评分，用户实际上是进入了另一个邻居。
- en: Therefore, it is not always recommended to pre-compute the matrix or find the
    nearest neighbors. This is generally done when the recommendations are actually
    needed.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，不建议始终预计算矩阵或寻找最近邻。这通常在实际需要推荐时完成。
- en: Algorithm of item-based collaborative filtering
  id: totrans-187
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 基于项目的协同过滤算法
- en: 'For (*i=1 to I*) where *I* refers to every item available:'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于(*i=1 到 I*)，其中*I*指所有可用项目：
- en: For each customer, *x* who rated *I*
  id: totrans-189
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于每个顾客*x*，他评分了*I*。
- en: For each item *K* purchased by the same customer, *x*
  id: totrans-190
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于同一顾客*x*购买的每个项目*K*
- en: Save that customer, *x* purchased both *I* and *K*
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保存顾客*x*购买了项目*I*和*K*
- en: For each item *K*
  id: totrans-192
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于每个项目*K*
- en: Find the similarity between *I* and *K*
  id: totrans-193
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算*i*和*K*之间的相似度。
- en: 'This particular similarity is found using the same methods as used in user-based
    collaborative filtering:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 这个特定的相似度是通过与用户协同过滤中使用的相同方法计算的：
- en: Cosine-based similarity
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于余弦的相似度
- en: Correlation-based similarity
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于相关性的相似度
- en: A weighted average is used to generate the recommendations.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 使用加权平均值来生成推荐。
- en: 'Let *S* be the set of items which is similar to *i*, then predictions can be
    made. The equation that defines the item-based collaborative filtering is as follows:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 让*S*表示与*i*相似的项目集合，那么可以做出预测。定义基于项目的协同过滤的公式如下：
- en: '![Algorithm of item-based collaborative filtering](img/B05321_10_06.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![基于项目的协同过滤算法](img/B05321_10_06.jpg)'
- en: For the number of neighbors *k*, u would have rated some items which are taken
    into consideration.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 对于邻居数*k*，你可能已经评分了一些被考虑在内的项目。
- en: Building a movie recommender system
  id: totrans-201
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建电影推荐系统
- en: The dataset is maintained by the "GroupLens research" and is available for free
    at [http://grouplens.org/datasets/movielens/](http://grouplens.org/datasets/movielens/).
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集由"GroupLens研究"维护，并且可以在[http://grouplens.org/datasets/movielens/](http://grouplens.org/datasets/movielens/)免费获取。
- en: 'We will be working on the dataset of 20 million ratings (`ml-20m.zip`). This
    contains:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将处理包含2000万个评分的数据库（`ml-20m.zip`）。该数据库包含：
- en: 20 million ratings
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 2000万个评分
- en: 465,000 tag applications applied to 27,000 movies by 138,000 users
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 465,000个标签应用被138,000个用户应用到27,000部电影。
- en: We will work on an ALS recommender, which is a matrix factorization algorithm
    that uses **Alternating Least Squares with Weighted-Lamda-Regularization** (**ALS-WR**).
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用ALS推荐器，它是一种矩阵分解算法，采用**加权λ正则化交替最小二乘法**（**ALS-WR**）。
- en: Let's consider that we have a matrix with users, *u*, and items, *i:*
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们有一个包含用户*u*和项目*i*的矩阵：
- en: '[PRE0]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Here, *r* represents the ratings submitted.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*r*表示提交的评分。
- en: Consider that we have *m* number of users and *n* number of movies.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们有*m*个用户和*n*个电影。
- en: '![Building a movie recommender system](img/B05321_07.jpg)'
  id: totrans-211
  prefs: []
  type: TYPE_IMG
  zh: '![构建电影推荐系统](img/B05321_07.jpg)'
- en: With *m* number of users and *n* number of movies, we create a matrix of users
    and movies (*m*n*).
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 对于*m*个用户和*n*个电影，我们创建一个用户与电影的矩阵（*m*n*）。
- en: 'The recommendations are generated for any user-movie pair as follows:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐是为任何用户-电影对生成的，如下所示：
- en: '*(i,j),rij=ui⋅mj,∀i,j*'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '*(i,j),rij=ui⋅mj,∀i,j*'
- en: Here, *(i,j)* is the user-movie pair.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*(i,j)*表示用户-电影对。
- en: 'Julia has a package, `RecSys.jl`, created by Abhijith Chandraprabhu ([https://github.com/abhijithch](https://github.com/abhijithch)).
    The package can be installed as follows:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: Julia有一个名为`RecSys.jl`的包，由Abhijith Chandraprabhu创建（[https://github.com/abhijithch](https://github.com/abhijithch)）。可以按如下方式安装此包：
- en: '[PRE1]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We will initiate Julia in parallel mode:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将以并行模式启动Julia：
- en: '[PRE2]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: As we will be working on a huge dataset it is recommended to initiate the Julia
    process in parallel.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们将处理一个庞大的数据集，建议并行启动Julia进程。
- en: There is `movielens.jl` in the examples section. We will be using this to generate
    recommendations for us.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 在示例部分有`movielens.jl`。我们将使用它为我们生成推荐。
- en: 'Keep it in the directory where it can be called and open it using any text
    editor, such as Atom (Juno), Sublime, Vim, and so on:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 将其保存在可以调用的目录中，并使用任何文本编辑器（如Atom（Juno）、Sublime、Vim等）打开：
- en: '[PRE3]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'This example will use the package `RecSys` and we are importing the methods
    `train`, `recommend`, and `rmse`:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 本示例将使用`RecSys`包，我们正在导入方法`train`、`recommend`和`rmse`：
- en: '[PRE4]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: This creates a composite type, which is a collection of named fields whose instances
    can be treated as a single value. This is a user-defined data type.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 这创建了一个复合类型，它是一个由命名字段组成的集合，可以将其实例视为单个值。这是一个用户定义的数据类型。
- en: This user-defined data type has three fields and three methods. The field `als` belongs
    to the type ALSWR, which is defined in RecSys.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 这个用户定义的数据类型有三个字段和三个方法。字段`als`属于类型ALSWR，该类型定义在RecSys中。
- en: 'The function uses multiple dispatches for the different types of inputs, which
    could be provided:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 该函数使用多重调度处理不同类型的输入，用户可以提供这些输入：
- en: '`trainingset` and `movie_names`'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`trainingset` 和 `movie_names`'
- en: '`trainingset`, `movie_names`, and `thread`'
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`trainingset`、`movie_names` 和 `thread`'
- en: '`user_item_ratings`, `item_user_ratings`, and `movie_names`'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`user_item_ratings`、`item_user_ratings` 和 `movie_names`'
- en: '[PRE5]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: This creates a function, `movie_names`, which is made to work with the `movielens`
    dataset to handle the data types and missing values in the CSV file, which we
    use as the input to the recommender system.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 这创建了一个名为 `movie_names` 的函数，它与 `movielens` 数据集协作，处理 CSV 文件中的数据类型和缺失值，我们使用该文件作为推荐系统的输入。
- en: 'Now, to train the system, we will use the train function:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，为了训练系统，我们将使用 train 函数：
- en: '[PRE6]'
  id: totrans-235
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'In this particular scenario, we will do as follows:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种特定情况下，我们将按如下操作：
- en: '[PRE7]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'This trains the model for the `movielens` dataset using ALS:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 这将使用 ALS 对 `movielens` 数据集进行模型训练：
- en: '[PRE8]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'We can also initiate the test for the recommendations that will be produced:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以启动对将产生的推荐进行测试：
- en: '[PRE9]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'To start the recommendations, do as follows:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始推荐，按如下步骤操作：
- en: '[PRE10]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: This will print the recommendations on screen.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 这将在屏幕上打印推荐结果。
- en: 'The recommendations that I received were:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 我收到的推荐是：
- en: '[PRE11]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'We will call the function test to generate the recommendations:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将调用 test 函数生成推荐：
- en: '[PRE12]'
  id: totrans-248
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: This function takes the dataset path as an argument. Here we will provide the
    path of the directory where we extracted the `ml-20m.zip`, which we downloaded
    from grouplens.
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个函数将数据集路径作为参数。在这里，我们将提供提取自 `ml-20m.zip` 的目录路径，该文件我们从 grouplens 下载。
- en: It takes the ratings file and the movies file and creates an object "rec" of
    type MovieRec, which we created earlier.
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它接受评分文件和电影文件，并创建一个类型为 MovieRec 的对象 "rec"，这是我们之前创建的。
- en: We pass the object to rmse to find out the error.
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们将对象传递给 rmse 以找出误差。
- en: It calls `print_recommendations`, which calls the recommend function to generate
    the recommendations for the existing user.
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它调用 `print_recommendations`，该函数会调用推荐函数为现有用户生成推荐。
- en: It saves the model for further use.
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它会保存模型以供以后使用。
- en: Summary
  id: totrans-254
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we learned what recommendation engines are and how they are
    important to businesses as well as what value they provide to the customer. We
    discussed association rule mining and market basket analysis and how this simple
    method is being used in the industry. Then we went through content-based filtering
    and its advantages and disadvantages. We then discussed collaborative filtering
    and different types of collaborative filtering, namely user-based and item-based
    collaborative filtering. The aim of user-based collaborative filtering is finding
    similar users that have past ratings or behavior somewhat similar to the target
    user, whereas item-based collaborative filtering looks for patterns in ratings
    of items to find like-minded users and to recommend items.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了什么是推荐引擎，以及它们对企业的重要性，此外，我们还了解了它们为客户提供的价值。我们讨论了关联规则挖掘和市场篮子分析，了解了这一简单方法在行业中的应用。接着，我们探讨了基于内容的过滤及其优缺点。随后，我们讨论了协同过滤以及协同过滤的不同类型，包括基于用户的协同过滤和基于项目的协同过滤。基于用户的协同过滤的目标是找到与目标用户过去的评分或行为相似的用户，而基于项目的协同过滤则通过分析项目评分中的模式来找到志同道合的用户并推荐项目。
