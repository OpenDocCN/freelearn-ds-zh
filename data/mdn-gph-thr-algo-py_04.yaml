- en: '2'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '2'
- en: Wrangling Data into Networks with NetworkX and igraph
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 NetworkX 和 igraph 将数据整理成网络
- en: In this chapter, we will introduce many types of data that are common in analytics
    projects, including `NetworkX` and `igraph` packages.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍在分析项目中常见的多种数据类型，包括 `NetworkX` 和 `igraph` 包。
- en: We’ll consider many real-world problems in this chapter and the remaining chapters
    to build intuition around data that can be reformatted and analyzed as a network
    science problem. Oftentimes, network-based algorithms have lower computational
    costs than algorithms designed for time series analytics or spatial data. By the
    end of this chapter, you’ll be able to recognize many types of problems that work
    well with network analytics, and you’ll walk away equipped to dive into the problems
    in later chapters.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章和接下来的章节中，我们将考虑许多现实世界的问题，以建立关于可以重新格式化和作为网络科学问题进行分析的数据的直觉。通常，基于网络的算法在计算成本上低于为时间序列分析或空间数据设计的算法。到本章结束时，你将能够识别许多适合网络分析的问题类型，并且你将准备好深入到后续章节中的问题。
- en: 'Specifically, we will cover the following topics in this chapter:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，本章将涵盖以下主题：
- en: Introduction to different data sources
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同数据源的介绍
- en: Wrangling data into networks with igraph
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 igraph 将数据整理成网络
- en: Social network examples with NetworkX
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 NetworkX 的社交网络示例
- en: Technical requirements
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: To run the practical examples in this chapter, you need to be familiar with
    Python programming and must install the `igraph` and `NetworkX` Python packages.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 要运行本章中的实际示例，你需要熟悉 Python 编程，并且必须安装 `igraph` 和 `NetworkX` Python 包。
- en: 'The code for this chapter is available here: [https://github.com/PacktPublishing/Modern-Graph-Theory-Algorithms-with-Python](https://github.com/PacktPublishing/Modern-Graph-Theory-Algorithms-with-Python)'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的代码可在以下链接找到：[https://github.com/PacktPublishing/Modern-Graph-Theory-Algorithms-with-Python](https://github.com/PacktPublishing/Modern-Graph-Theory-Algorithms-with-Python)
- en: Introduction to different data sources
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 不同数据源的介绍
- en: In practice, we’ll rarely create a network from scratch or come across a data
    source that naturally occurs as a network. We often must create a network from
    different data sources, including survey or sensor data, geographic data, time
    series data, demographic data, or even output data from machine learning models.
    In this section, we’ll overview some common data sources before diving into two
    practical examples of data wrangling with igraph and NetworkX. Let’s dive into
    our first data source, social interaction data.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在实践中，我们很少从头创建网络或遇到自然以网络形式出现的数据源。我们通常必须从不同的数据源创建网络，包括调查或传感器数据、地理数据、时间序列数据、人口数据，甚至机器学习模型的输出数据。在本节中，我们将在深入研究
    igraph 和 NetworkX 的数据整理两个实际示例之前，概述一些常见的数据源。让我们深入了解我们的第一个数据源，社交互动数据。
- en: Social interaction data
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 社交互动数据
- en: 'Much of network science originated with social networks, which capture relationships
    or interactions between individuals. Marketing campaigns often recruit individuals
    with many connections to others within a demographic group of interest, as well
    as those whose connections also have many connections within a demographic group.
    For instance, a toy manufacturer might have a new toy coming out for the Christmas
    season, perhaps a *steampunk nutcracker ballet mouse king doll* (shown in *Figure
    2**.1*), that they would like to market to European girls between the ages of
    5 and 11 based on market research about which age and gender groups are most likely
    to see the Nutcracker ballet:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 网络科学的大部分起源于社交网络，它捕捉了个人之间的关系或互动。营销活动通常会招募那些在感兴趣的人口群体中与其他人有很多联系的个人，以及那些他们的联系人也同样在人口群体中有许多联系的人。例如，一个玩具制造商可能会在圣诞节季节推出一款新玩具，可能是一款*蒸汽朋克坚果夹子芭蕾鼠王玩偶*（如图
    2**.1** 所示），他们希望通过市场研究来确定哪个年龄和性别群体最有可能看到《胡桃夹子》芭蕾舞剧：
- en: '![Figure 2.1 – Marketing advertisement for the new Mouse King doll debuting
    at Christmas](img/B21087_02_01.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.1 – 在圣诞节期间首次亮相的新鼠王玩偶的营销广告](img/B21087_02_01.jpg)'
- en: Figure 2.1 – Marketing advertisement for the new Mouse King doll debuting at
    Christmas
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.1 – 在圣诞节期间首次亮相的新鼠王玩偶的营销广告
- en: The toy manufacturer may look for social media influencers (individuals with
    many subscribers on YouTube or followers on TikTok) whose network of viewers includes
    mostly girls between 5 and 11 years old who are viewing the influencer’s content
    from Europe. Sometimes, this data is readily available by scraping influencers’
    content. Other times, this data needs to be collected in pieces and analyzed first
    to narrow down influencers among the demographic groups of interest through content
    curation and the scraping of related content metrics.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 玩具制造商可能会寻找社交媒体影响者（在YouTube上有许多订阅者或在TikTok上有许多追随者的人），他们的观众网络主要包括5至11岁的女孩，她们正在欧洲观看影响者的内容。有时，这些数据可以通过抓取影响者的内容轻松获得。在其他时候，需要收集这些数据的一部分并首先进行分析，通过内容策划和相关内容指标的抓取，来缩小目标受众群体中的影响者。
- en: Another common source of data for social network construction is **survey data**,
    in which individuals rank friendships or interaction patterns with others in a
    social group. For instance, students might indicate other students with whom they
    study, socialize, or attend classes. Students who interact with each other in
    many settings share stronger social interactions, while students who interact
    infrequently or only in certain settings share weaker social interactions. Weighted
    social networks can visualize not only interactions that exist but also their
    strengths. In social science settings, stronger ties often play an important role
    in the transmission of information or the adoption of products or behaviors. For
    instance, when an adolescent begins smoking or drinking alcohol, individuals with
    strong ties to that individual are at higher risk of starting those behaviors
    themselves. Within highly connected groups of adolescents, the risk of behavior
    spreading is high among the group when one individual adopts a risky behavior.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 社交网络构建的另一个常见数据来源是**调查数据**，其中个人对社交群体中的朋友关系或互动模式进行排名。例如，学生可能会指出他们一起学习、社交或上课的其他学生。在许多场合互动的学生之间有更强的社交互动，而在某些场合很少互动或只在特定场合互动的学生之间有较弱的社交互动。加权社交网络不仅可以可视化存在的互动，还可以可视化它们的强度。在社会科学环境中，较强的联系在信息传播或产品或行为的采用中通常扮演着重要角色。例如，当一个青少年开始吸烟或饮酒时，与该个体有强烈联系的人开始这些行为的风险更高。在高度连接的青少年群体中，当一个人采取风险行为时，该行为在群体中传播的风险很高。
- en: Weaker social ties can be just as important as strong social ties (or even more
    important!), and within the field of sociology, these ties form the basis of an
    individual’s social capital. Social capital measures the resources upon which
    an individual can draw when needed from those with whom the individual has connected
    or those connected to an individual’s connections. Within the context of job searches,
    a job seeker’s strongest and most-lasting ties may not be what is needed to find
    a new job. However, it is likely that friends-of-friends and acquaintances form
    a much larger social network, and these ties may present new employment opportunities
    to the job seeker. Larger networks of friends-of-friends and casual acquaintances
    often provide more opportunities to find that next job through word-of-mouth or
    job ad posts on social media.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 弱社交关系可能和强社交关系一样重要（甚至更重要！），在社会学领域，这些关系构成了个人社会资本的基础。社会资本衡量的是个人在需要时可以从与之联系或与个人联系的人那里获取的资源。在求职的背景下，求职者最强和最持久的联系可能不是找到新工作所需要的。然而，朋友的朋友和熟人可能形成一个更大的社交网络，这些联系可能为求职者提供新的就业机会。朋友的朋友和偶然熟人的更大网络通常提供了更多通过口头传播或社交媒体上的职位广告找到下一份工作的机会。
- en: We’ll return to survey-based social network data in this chapter’s *Wrangling
    data into networks with igraph* section where we construct a network of students
    based on endorsement interactions across social contexts.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本章的*使用igraph将数据整理成网络*部分回到基于调查的社交网络数据，在那里我们将根据社会背景中的推荐互动构建一个学生网络。
- en: Spatial data
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 空间数据
- en: Another common source of network data is data collected from geographic information
    systems or organized by geography. **Spatial data analytics** is a branch of data
    science that analyzes geography-based data; however, when data covers large geographic
    regions or involves complex statistical calculations, it can be easier to formulate
    the data and problem in terms of network science. Network algorithms are often
    faster than spatial data algorithms, and it is easy to store large networks in
    graph databases such as Neo4j.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 网络数据的另一个常见来源是从地理信息系统收集的数据或按地理组织的数据。**空间数据分析**是数据科学的一个分支，它分析基于地理的数据；然而，当数据覆盖较大的地理区域或涉及复杂的统计计算时，用网络科学的术语来表述数据和问题可能更容易。网络算法通常比空间数据算法更快，并且很容易在图数据库（如
    Neo4j）中存储大型网络。
- en: Consider the worldwide spread of COVID-19 through travel networks. The pandemic
    originated in China but quickly spread to other parts of Asia, as well as the
    rest of the world, through the travel of infected but not terribly sick individuals
    on airplanes, trains, and other means of transportation (such as flights from
    Beijing to Paris, as shown in *Figure 2**.2*). Air travel also allowed new variants
    to spread from one continent to another during the pandemic. Fortunately, COVID-19
    had a low case fatality rate and did not cause severe disease in most people who
    were infected. However, a highly infectious disease similar to COVID-19, but with
    a high fatality rate and a long incubation period from infection to the display
    of symptoms (such as a more infectious version of Ebola) spreading through the
    same travel networks would create a very severe global health crisis before it
    was detected. As we’ll see in later chapters, epidemic threats with spatial and
    social components can be modeled and simulated through network science.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑 COVID-19 通过旅行网络在全球范围内的传播。这场大流行起源于中国，但很快通过感染但病情并不严重的个体在飞机、火车和其他交通工具（如北京到巴黎的航班，如图
    *图 2**.2* 所示）上的旅行迅速传播到亚洲的其他部分以及世界的其他地方。航空旅行还允许在疫情期间将新的变异株从一个大陆传播到另一个大陆。幸运的是，COVID-19
    的死亡率较低，大多数感染者并未出现严重疾病。然而，一种与 COVID-19 类似但死亡率高且从感染到症状出现有较长的潜伏期的极高度传染性疾病（如更易传染的埃博拉病毒）通过相同的旅行网络传播，在被发现之前将造成非常严重的全球卫生危机。正如我们在后面的章节中将会看到的，具有空间和社会成分的流行病威胁可以通过网络科学进行建模和模拟。
- en: '![Figure 2.2 – A flight from Beijing to Paris during the initial transmission
    period of COVID-19](img/B21087_02_02.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.2 – COVID-19 初期从北京到巴黎的航班](img/B21087_02_02.jpg)'
- en: Figure 2.2 – A flight from Beijing to Paris during the initial transmission
    period of COVID-19
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.2 – COVID-19 初期从北京到巴黎的航班
- en: Health-related networks aren’t the only spatial data sources useful in data
    science. One common source of spatial data is retail data, where stores exist
    in different locations and may carry different products, sell products at different
    rates, and adjust prices to match regional norms. Customer demographics may also
    vary significantly across locations and produce very different buying patterns.
    For instance, consider customers‘ buying behavior at a store near a university
    versus customers’ buying behavior at a store in the suburbs. The store near a
    university may have more late-night purchases, sell a lot of snacks, and rarely
    need to stock diapers relative to the store in the suburbs. Analysis of customers’
    buying behavior, goods pricing, or out-of-stock frequency across products and
    geographies of stores can yield valuable strategic insight for individual stores
    and their parent chains interested in optimizing stocks, prices, and timing of
    promotions. We’ll wrangle data related to millet prices at local markets into
    a network later in this chapter.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 与健康相关的网络并不是数据科学中唯一有用的空间数据来源。空间数据的一个常见来源是零售数据，其中商店存在于不同的位置，可能携带不同的产品，以不同的速度销售产品，并调整价格以符合地区规范。顾客的人口统计特征也可能在不同地点有显著差异，并产生非常不同的购买模式。例如，考虑大学附近的商店与郊区商店的顾客购买行为。大学附近的商店可能有更多夜间购买，销售大量零食，并且相对于郊区的商店，很少需要库存尿布。分析顾客的购买行为、商品定价或产品库存频率，可以为客户提供宝贵的战略洞察，这些客户和他们的母公司对优化库存、价格和促销时间感兴趣。我们将在本章后面将有关当地市场小米价格的数据整理成网络。
- en: Temporal data
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 时间数据
- en: Networks are rarely static. Social networks evolve over time as connections
    forge and break. Sales patterns change as new items are added, needs for specific
    items change over seasons, or changes in the economy spur changes in consumer
    behavior. Stock market trading volumes and industry/regional correlations change
    over time as political and business climates change.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 网络很少是静态的。随着时间的推移，随着联系的形成和断裂，社交网络会发生变化。销售模式会随着新产品的添加而改变，对特定商品的需求会随着季节的变化而变化，或者经济的变化会促使消费者行为的变化。随着政治和商业气候的变化，股市交易量和行业/地区相关性也会随时间变化。
- en: All these changes involve a time component in the data. There are a few ways
    to model time trends in networks, and we’ll start with two use cases and build
    out more uses in *Part 3* of this book.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些变化都涉及数据中的时间成分。有几种方法可以模拟网络中的时间趋势，我们将从两个用例开始，并在本书的*第3部分*中构建更多用途。
- en: 'First, let’s return to our example of a job seeker leveraging his or her social
    network to find a new job. As this individual begins a job search, they may add
    suggested professional connections on LinkedIn, attend local networking events,
    or connect with a few recruiters looking to hire; all these actions add connections
    to their social network (and increase the likelihood of finding a new job). *Figure
    2**.3* shows women meeting at a networking event, forging new professional connections
    to leverage in their job searches:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们回到我们之前提到的例子，一个求职者利用他的社交网络来寻找新工作。当这个人开始找工作时，他们可能会在LinkedIn上添加建议的专业联系人，参加当地的社交活动，或者与一些正在招聘的招聘人员建立联系；所有这些行为都会增加他们的社交网络中的联系（并增加找到新工作的可能性）。*图2.3*展示了女性在社交活动中相遇，建立新的专业联系，以便在求职过程中利用：
- en: '![Figure 2.3 – A changing social network over 8 weeks](img/B21087_02_03.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![图2.3 – 8周内不断变化的社会网络](img/B21087_02_03.jpg)'
- en: Figure 2.3 – A changing social network over 8 weeks
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.3 – 8周内不断变化的社会网络
- en: We can represent changes over time as a series of networks, each denoting a
    specific time when we capture the job seeker’s social network. We may collect
    the data daily or weekly or even monthly for the period we are interested in analyzing.
    Let’s say we capture data weekly for two months. This will give us roughly eight
    social networks, which we can analyze and summarize to track changes in network
    size and density of connections over time. Perhaps we also have data related to
    interviews our job seeker obtained, which we can examine along with the changes
    in their social network to gain insight into how social network growth has helped
    our job seeker obtain a new job.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将时间上的变化表示为一系列网络，每个网络代表我们在特定时间捕捉到的求职者的社交网络。我们可能每天、每周甚至每月收集我们感兴趣分析期间的数据。假设我们每周收集两个月的数据。这将给我们大约八个社交网络，我们可以分析和总结这些网络，以跟踪网络大小和连接密度随时间的变化。也许我们还有与求职者获得的面试相关的数据，我们可以将这些数据与他们的社交网络变化一起检查，以了解社交网络的增长是如何帮助求职者获得新工作的。
- en: To study how social ties and specific activities increase the likelihood of
    job interviews and offers, we could recruit a few hundred job seekers, collect
    information on interviews/offers and their current social network each week for
    eight weeks, and build a regression model to predict job interviews or job offers
    based on prior weeks’ social network metrics. In a more sophisticated analysis,
    we could use a type of regression model that includes time series components to
    account for time effects, as well as social network metrics and initial data on
    job seekers (such as demographic data, career information, educational history…).
    We’ll consider this type of model in [*Chapter 13*](B21087_13.xhtml#_idTextAnchor167).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 为了研究社会联系和特定活动如何增加获得面试和工作的可能性，我们可以招募几百名求职者，每周收集关于面试/工作机会以及他们当前社交网络的信息，持续八周，并建立一个回归模型，根据前一周的社交网络指标来预测面试或工作机会。在更复杂的分析中，我们可以使用包含时间序列成分的回归模型来考虑时间效应，以及社交网络指标和求职者的初始数据（如人口统计数据、职业信息、教育背景等）。我们将在本书的*第13章*中考虑这种类型的模型。[第13章](B21087_13.xhtml#_idTextAnchor167)。
- en: Spatial data can also include time components, where new flights are added between
    countries or where stores’ management structure changes over time to create different
    connections between stores within a retail chain. We’ve already seen how we can
    wrangle spatial data into networks. For **spatiotemporal data**, we can build
    networks at an instant in time where we sample the data (as in our job networking
    example), or we can chunk our data into time periods, create networks for each
    time period, and then consider the full series of networks in our analysis. In
    the retail store example, we might have real-time purchase behavior to parse into
    weekly trend networks, where stores are connected based on the similarity of sales
    across the full inventory of store pairs. We might be interested in analyzing
    how buying trends change over the month of December, when people celebrate New
    Year’s, Christmas, Hanukkah, Kwanzaa, and end-of-year business deals. We’ll consider
    examples of this in the *Wrangling data into networks with* *igraph* section.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 空间数据也可以包括时间成分，例如在两国之间增加新的航班，或者商店的管理结构随时间变化，从而在零售连锁店内的商店之间创建不同的连接。我们已经看到我们如何将空间数据整理成网络。对于**时空数据**，我们可以在我们采样数据的某个时刻构建网络（如我们的工作网络示例），或者我们可以将我们的数据分成时间段，为每个时间段创建网络，然后在我们的分析中考虑完整的网络系列。在零售店例子中，我们可能会有实时购买行为，将其解析成每周趋势网络，其中商店根据销售相似性连接，基于整个库存的商店对的销售。我们可能对分析12月份的购买趋势变化感兴趣，当人们庆祝新年、圣诞节、光明节、库萨和年底的商业交易时。我们将在*使用*
    *igraph* *将数据整理成网络*的例子中考虑这一点。
- en: Biological networks
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 生物网络
- en: 'Network science plays a prominent role in modern genomics research. Environmental
    factors, such as stress or eating habits, can modify which genes are expressed
    within a cell or tissue by making transcription of **deoxyribonucleic acid** (**DNA**)
    more or less likely for a set of genes, leading to higher or lower levels of proteins
    produced by translating the genetic code to **ribonucleic acid** (**RNA**) and
    then to proteins (*Figure 2**.4*):'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 网络科学在现代基因组学研究中的作用突出。环境因素，如压力或饮食习惯，可以通过使一组基因的转录更有可能或不太可能来修改细胞或组织中表达的基因，导致通过将遗传密码翻译成**核糖核酸**（**RNA**）然后到蛋白质产生更高或更低的蛋白质水平（*图2**.4*）：
- en: '![Figure 2.4 – A diagram showing the processes by which genes are expressed,
    transcribed, and translated into proteins](img/B21087_02_04.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![图2.4 – 一个展示基因表达、转录和翻译成蛋白质的过程的图表](img/B21087_02_04.jpg)'
- en: Figure 2.4 – A diagram showing the processes by which genes are expressed, transcribed,
    and translated into proteins
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.4 – 一个展示基因表达、转录和翻译成蛋白质的过程的图表
- en: Let’s consider a concrete example. Cobras are venomous snakes, and their DNA
    encodes genes related to venom production. Transcription of these genes happens
    in the venom glands that produce venom and store it until the snake strikes a
    target. The DNA encoding these genes is transcribed into RNA, which is then translated
    into a protein.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们考虑一个具体的例子。眼镜蛇是有毒的蛇，它们的DNA编码与毒液生产相关的基因。这些基因的转录发生在产生并储存毒液的毒腺中，直到蛇攻击目标。这些基因的编码被转录成RNA，然后翻译成蛋白质。
- en: Gene sets transcribed together are said to be **coexpressed**; **coexpression
    networks** are useful in understanding the relationship between genetic factors
    and diseases or physical traits. In our snake venom example, genes encoding venom
    would be coexpressed in the venom gland, as all of the venom is produced in that
    part of the snake’s body. Environmental factors can indirectly influence the expression
    patterns of genes by modifying the DNA structures to upregulate or downregulate
    transcription. For instance, when our snake bites in self-defense, it may empty
    its venom gland completely with the bite. This will cause DNA related to venom
    genes to be upregulated, allowing for more venom production to replenish the snake’s
    supply so that it can eat and defend itself.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 一起转录的基因集被称为**共表达**；**共表达网络**有助于理解遗传因素与疾病或身体特征之间的关系。在我们的蛇毒例子中，编码毒液的基因会在毒腺中共同表达，因为所有的毒液都是在蛇身体的那一部分产生的。环境因素可以通过修改DNA结构来间接影响基因的表达模式，以上调或下调转录。例如，当我们的蛇为了自卫而咬人时，它可能会通过咬伤将毒腺中的毒液完全排空。这将导致与毒液基因相关的DNA被上调，从而允许产生更多的毒液来补充蛇的供应，以便它可以进食和自卫。
- en: The field of **epigenetics** studies these gene-environment interactions, particularly
    in the development of complex diseases such as cancer or mental health disorders.
    Typically, gene expression within or across tissues is measured through protein
    binding on genes of interest using some sort of microarray chip. Many human diseases
    involve a more complex interplay of environment and genes than the regulation
    of venom levels in a snake’s venom gland; some of these diseases involve many
    parts of the body.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**表观遗传学**领域研究这些基因-环境相互作用，尤其是在癌症或心理健康障碍等复杂疾病的发展中。通常，通过使用某种微阵列芯片测量感兴趣基因上的蛋白质结合来衡量组织内或组织间的基因表达。许多人类疾病涉及的环境和基因的相互作用比蛇毒腺中毒素水平调节更为复杂；其中一些疾病涉及身体许多部位。'
- en: For example, some people face higher risks of alcohol use disorders based on
    their aggregation of genetic risk factors; when a person at risk of alcohol use
    disorder begins drinking, alcohol crosses the blood-brain barrier and produces
    epigenetic changes in gene expression, including changes in expression of the
    genes that put the person at risk for the disorder. Microarrays measure the level
    of gene expression experimentally. Microarray studies of coexpression of genes
    in those with alcohol use disorders and those without alcohol use disorders provide
    insight into genetic risk and the epigenetic differences that occur because of
    alcohol consumption. Networks provide a convenient way to summarize expression
    similarity relationships and can be mined for subnetworks related to modules of
    related genes that perform a similar task (such as producing neurotransmitter
    binding sites related to serotonin or dopamine binding at synapses).
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，有些人基于他们的遗传风险因素聚集，面临更高的酒精使用障碍风险；当有酒精使用障碍风险的人开始饮酒时，酒精会穿过血脑屏障，并在基因表达上产生表观遗传变化，包括将个人置于疾病风险中的基因表达变化。微阵列通过实验测量基因表达水平。对有酒精使用障碍和无酒精使用障碍的人的基因共表达进行微阵列研究，可以深入了解遗传风险和由于酒精消费而发生的表观遗传差异。网络提供了一种方便的方法来总结表达相似性关系，并且可以挖掘与执行相似任务（如产生与血清素或多巴胺结合的突触结合位点）的相关基因模块的子网络。
- en: A related phenomenon in genetic studies is the regulation of gene expression,
    typically through epigenetic pathways, as well. As we’ve discussed, external environmental
    factors can influence gene expression; often, proteins created from gene transcription
    and translation regulate their own transcription, turning expression up or down
    based on the levels of proteins that exist. For instance, disruptions in gene
    regulation related to serotonin receptors in the frontal cortex are thought to
    underlie major depressive disorder, and disruptions to downregulation of cell
    growth genes are thought to underlie a lot of common cancer pathways, leading
    to uncontrolled growth and mitosis (tumors).
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在遗传研究中，一个相关的现象是通过表观遗传途径调节基因表达。正如我们讨论的，外部环境因素可以影响基因表达；通常，由基因转录和翻译产生的蛋白质调节其自身的转录，根据现有蛋白质的水平提高或降低表达。例如，与额叶皮层中的血清素受体相关的基因调节中断被认为是大抑郁症的基础，而细胞生长基因下调的中断被认为导致了许多常见的癌症途径，导致无控制的生长和有丝分裂（肿瘤）。
- en: Directed networks provide an ideal way to summarize gene regulation pathways.
    Different biological and environmental mechanisms upregulate or downregulate the
    genes of interest. Genes may cluster into similar regulatory patterns within the
    mechanisms of study (protein expression, external exposures in the environment…).
    This gives insight into specific pathologies of interest or the impacts of environmental
    factors like stress.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 定向网络提供了一种总结基因调节途径的理想方式。不同的生物学和环境机制上调或下调感兴趣的基因。基因可能在研究机制（蛋白质表达、环境中的外部暴露等）中聚集成相似的调节模式。这为特定感兴趣的病理学或环境因素（如压力）的影响提供了见解。
- en: Genomic studies sometimes leverage network science to map gene ontologies (networks
    that summarize hierarchical relationships of individual genes or genetic modules)
    to disease ontologies (networks that summarize categories of disorders). We’ll
    dive deeper into ontology research in [*Chapter 11*](B21087_11.xhtml#_idTextAnchor145),
    but let’s review some basics here. The mapping between ontologies allows researchers
    to formulate hypotheses regarding unknown genetic links to disorders based on
    known links between genes and similar diseases. Returning to substance abuse disorders,
    many genetic risk factors are known and shared across addictions; it is likely
    that newer behavioral addictions, such as video game addiction, share at least
    some of these genetic factors with other addictive disorders. Ontology mapping
    between genes and diseases provides a starting point for studying these new disorders.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 基因组学研究有时会利用网络科学将基因本体（总结单个基因或基因模块的层次关系的网络）映射到疾病本体（总结疾病类别的网络）。我们将在[*第 11 章*](B21087_11.xhtml#_idTextAnchor145)中深入探讨本体研究，但在此我们先回顾一些基础知识。本体之间的映射使得研究人员可以根据已知基因与类似疾病之间的联系，基于已知基因与疾病之间的联系来提出关于未知遗传与疾病之间联系的假设。回到物质滥用障碍，许多遗传风险因素是已知的，并且在各种成瘾中共享；新出现的行为成瘾，如游戏成瘾，很可能与其他成瘾障碍共享至少一些这些遗传因素。基因与疾病之间的本体映射为研究这些新障碍提供了一个起点。
- en: '**Genomics** is one of many types of data where network solutions aren’t an
    obvious toolset for solving data problems. Let’s look at some other examples where
    network science has provided insight not possible with other analytics tools.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '**基因组学**是许多类型的数据之一，在这些数据中，网络解决方案并不是解决数据问题的明显工具集。让我们看看一些其他例子，在这些例子中，网络科学提供了其他分析工具无法提供的见解。'
- en: Other types of data
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 其他类型的数据
- en: 'Many other sources of data exist, and most can be wrangled into network form.
    Let’s return to our discussion of **deep learning**. In the training process of
    deep learning, nodes in each layer of the neural network forge and break connections
    with nodes in other layers based on fit metrics in each iteration of the training.
    Let’s consider a training process with four training epochs of a very small feedforward
    neural network with an input layer of two nodes, a hidden layer of three nodes,
    and an output layer of two nodes that originates as a fully-connected network,
    undergoes two epochs of pruning, and then adds back one of the pruned connections
    between the hidden and output layers, shown in *Figure 2**.5*:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 存在许多其他数据来源，并且大多数都可以被整理成网络形式。让我们回到我们对**深度学习**的讨论。在深度学习的训练过程中，神经网络每一层的节点根据每次训练迭代的拟合度量与其他层的节点建立和断开连接。让我们考虑一个包含四个训练周期的非常小的前馈神经网络，该网络具有两个节点的输入层、三个节点的隐藏层和两个节点的输出层，最初是一个全连接网络，经过两个周期的剪枝，然后在隐藏层和输出层之间恢复一个剪枝的连接，如图
    *图 2*.5 所示：
- en: '![Figure 2.5 – The evolution of a simple deep learning model across training
    epochs](img/B21087_02_05.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.5 – 简单深度学习模型在训练周期中的演变](img/B21087_02_05.jpg)'
- en: Figure 2.5 – The evolution of a simple deep learning model across training epochs
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.5 – 简单深度学习模型在训练周期中的演变
- en: In *Figure 2**.5*, we can see how each epoch has a different network structure
    across the deep learning model. Typically, we calculate fit statistics for each
    epoch, and perhaps we are interested in how properties of the deep learning network
    structure influence training accuracy on training and test sets across epochs.
    While this model is quite simple, deep learning models in practice may have several
    layers, directed edges between vertices (nodes in deep learning parlance), and
    many epochs of training. This creates a rich set of networks and network metrics
    across training to relate to model accuracy, which may be of use when tuning the
    model or changing initial parameters (perhaps adjusting pruning parameters when
    fine-tuning a pre-trained transformer model).
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *图 2*.5 中，我们可以看到每个训练周期在深度学习模型中都有不同的网络结构。通常，我们会为每个周期计算拟合统计量，也许我们感兴趣的是深度学习网络结构的属性如何影响训练和测试集在各个周期中的训练精度。虽然这个模型相当简单，但在实践中，深度学习模型可能有多个层，顶点（在深度学习术语中称为节点）之间的有向边，以及许多个训练周期。这为训练过程中与模型精度相关的一系列网络和网络度量提供了丰富的数据，这可能有助于调整模型或更改初始参数（例如，在微调预训练的转换器模型时调整剪枝参数）。
- en: Fine-tuning pre-trained models is a common approach in *computer vision* and
    *large language modeling*. New training data to cover domain-specific use cases
    may be added, and model parameters need adjusting to incorporate the new training
    data into the full model. For instance, a large language model housed on HuggingFace
    might work well for embedding most scientific papers for cluster analysis but
    require fine-tuning to work well when plasma physics papers are included in the
    sample of scientific papers. Understanding the network structure of the original
    large language model and its training evolution can help researchers set optimal
    parameters in the fine-tuning process.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在**计算机视觉**和**大型语言建模**中，微调预训练模型是一种常见的方法。可能需要添加新的训练数据以覆盖特定领域的用例，并且需要调整模型参数以将新的训练数据纳入完整模型。例如，托管在
    HuggingFace 上的大型语言模型可能非常适合嵌入用于聚类分析的多数科学论文，但当等离子体物理论文包含在科学论文样本中时，可能需要微调才能良好工作。理解原始大型语言模型的网络结构和其训练演化可以帮助研究人员在微调过程中设置最佳参数。
- en: 'Another example of data that can be wrangled into network form to study is
    **linguistics data**. Many languages that exist today evolved from much older
    languages. For instance, the Semitic languages that exist today, including Hebrew
    and Arabic, originated from a Proto-Semitic language, which split into different
    regional branches as proto-Semitic speakers migrated and settled across the Middle
    East. One language, East Semitic (Akkadian) did not further branch to other languages;
    the other language, West Semitic, broke into South Semitic and Central South Semitic
    (which further broke into new languages over time). *Figure 2**.6* shows the initial
    evolution of Proto-Semitic into new language groups:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个可以将数据整理成网络形式以进行研究的数据示例是**语言学数据**。今天存在的许多语言都是从更古老的语言演变而来的。例如，今天存在的闪米特语言，包括希伯来语和阿拉伯语，起源于原始闪米特语，随着原始闪米特语使用者在中东地区迁移和定居，分化成了不同的地区分支。一种语言，东闪米特语（阿卡德语）没有进一步分化成其他语言；另一种语言，西闪米特语，分化成了南闪米特语和南中闪米特语（随着时间的推移进一步分化成新的语言）。*图2.6*展示了原始闪米特语向新的语言群体演化的初始过程：
- en: '![Figure 2.6 – A diagram of early language evolution from Proto-Semitic](img/B21087_02_06.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![图2.6 – 从原始闪米特语到早期语言演化的示意图](img/B21087_02_06.jpg)'
- en: Figure 2.6 – A diagram of early language evolution from Proto-Semitic
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.6 – 从原始闪米特语到早期语言演化的示意图
- en: Network science can help us compare language evolutions from original proto-languages
    to modern languages through the analysis of language family hierarchies. Comparing
    the structure of language evolution can illuminate ancient migration and trading
    patterns that can be difficult to discern from ancient records or archaeological
    sites. In addition, this comparison allows us to forecast future language splits
    based on the past behavior of the language family, similar evolution patterns
    seen in other language families, sociolinguistic data on language usage patterns,
    and the usage extent of current pidgins or dialects. We’ll return to linguistic
    applications in [*Chapter 11*](B21087_11.xhtml#_idTextAnchor145), where we consider
    language ontologies of languages spoken in Africa and their evolutions over time.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 网络科学可以帮助我们通过分析语言家族层次结构，比较从原始语言到现代语言的演变。比较语言演化的结构可以阐明古代迁移和贸易模式，这些模式可能难以从古代记录或考古遗址中辨别出来。此外，这种比较使我们能够根据语言家族的过去行为、在其他语言家族中观察到的类似演化模式、语言使用模式的社会语言学数据以及当前克里奥尔语或方言的使用范围，预测未来的语言分化。我们将在[*第11章*](B21087_11.xhtml#_idTextAnchor145)中回到语言学的应用，我们将考虑非洲使用的语言及其随时间的演变。
- en: 'For now, let’s turn our attention to network creation in igraph and NetworkX
    from raw data files. This will equip us to create networks to analyze with tools
    we’ll introduce in the coming chapters. First, we’ll consider an example involving
    spatiotemporal data: quarterly millet prices across provincial markets in Burkina
    Faso.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们将注意力转向从原始数据文件中创建网络，这是 igraph 和 NetworkX 的功能。这将使我们能够创建网络，以便在接下来的章节中介绍的工具中进行分析。首先，我们将考虑一个涉及时空数据的示例：布基纳法索省级市场的季度小米价格。
- en: Wrangling data into networks with igraph
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 igraph 将数据整理成网络
- en: Understanding trends in goods pricing is critical in many applications. For
    instance, a chain of gas stations may want to understand the differences in pricing
    across its locations. Often, local laws require gas stations within a certain
    distance of each other to be priced within a certain range of each other, creating
    local distributions of pricing across chains and within chains. Understanding
    this can help optimize prices regionally given constraints in each area or tie
    the data back to regional sales data to see how price distributions impact sales.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 理解商品定价的趋势在许多应用中至关重要。例如，一家加油站连锁店可能希望了解其各个地点之间的定价差异。通常，当地法律要求彼此相距一定距离的加油站定价在彼此的一定范围内，从而在连锁店和连锁店内部形成定价的本地分布。了解这一点可以帮助在各个地区的限制条件下优化价格，或者将数据回溯到区域销售数据，以查看价格分布如何影响销售。
- en: 'Consumers can also benefit from analyses of goods pricing across geographic
    areas. Consider local food markets in the developing world. Prices are rarely
    fixed within a country or region. They are dictated by supply, demand, and cost
    to the merchant selling the goods. Grains may need to be imported from other countries,
    whose prices will fluctuate with economic and climate conditions. Fruit prices
    may vary with season and local growing conditions. Clothing may increase in price
    as dyes become scarcer in the local area. For instance, consider a grocery store,
    shown in *Figure 2**.7*, with supplier contracts and the financial backing of
    a parent chain. It may experience fluctuations in goods availability or price
    but will likely have the same goods at prices that don’t fluctuate a lot:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 消费者还可以从不同地理区域的商品定价分析中受益。以发展中国家的地方食品市场为例。价格通常不会在一个国家或地区内固定。它们由商品的供应、需求和销售商的成本决定。谷物可能需要从其他国家进口，其价格会随着经济和气候条件的变化而波动。水果的价格可能会随着季节和当地生长条件的变化而变化。当当地地区的染料变得稀缺时，服装的价格可能会上涨。例如，考虑一家连锁超市，如*图2.7*所示，它有供应商合同和母公司的财务支持。它可能会经历商品可用性或价格的波动，但很可能会以价格波动不大的相同商品出售：
- en: "![Figure 2.7 – \uFEFFAn illustration of a grocery store, part of a larger chain](img/B21087_02_07.jpg)"
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![图2.7 – 一家连锁超市的插图，是该更大连锁店的一部分](img/B21087_02_07.jpg)'
- en: Figure 2.7 – An illustration of a grocery store, part of a larger chain
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.7 – 一家连锁超市的插图，是该更大连锁店的一部分
- en: Contrast this with a local market comprised of different vendors who may or
    may not be at the market on a given day and whose goods’ availability and prices
    might fluctuate on the days they sell at the market. Larger markets, such as the
    one shown in *Figure 2**.8*, with more established vendors and peak hours might
    show less variation than the more informal markets that line the streets throughout
    the day.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 与此相比，一个由不同供应商组成的本地市场，这些供应商可能或可能不在某一天的市场上，他们的商品可用性和价格可能在市场销售的那天波动。较大的市场，如*图2.8*所示，有更多经验丰富的供应商和高峰时段，可能比整天沿街排列的更非正式的市场显示出更少的波动。
- en: "![Figure 2.8 – \uFEFFAn illustration of a large, formal marketplace in Burkina\
    \ Faso, where there is some commonality from day to day in vendors and their goods](img/B21087_02_08.jpg)"
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![图2.8 – 一家位于布基纳法索的大型、正式市场的插图，其中供应商和他们的商品每天都有一些共同之处](img/B21087_02_08.jpg)'
- en: Figure 2.8 – An illustration of a large, formal marketplace in Burkina Faso,
    where there is some commonality from day to day in vendors and their goods
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.8 – 布基纳法索一家大型、正式市场的插图，其中供应商和他们的商品每天都有一些共同之处
- en: When considering geography, we often want to consider not only the variable(s)
    of interest but also how close together the locations are relative to each other.
    Prices, sales, and goods availability in regions near each other likely reflect
    local conditions that aren’t observed in the dataset, such as local weather, the
    local political context, and the number of competing local merchants. We’ll discuss
    this topic further in *Chapters 3*, *4*, and *5*, but for now, it suffices to
    know that we can assign weights to different locations according to their relative
    distances.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 当考虑地理因素时，我们通常不仅想要考虑感兴趣的变量，还要考虑这些位置相对于彼此的接近程度。邻近地区的价格、销售和商品可用性可能反映了数据集中未观察到的本地条件，例如当地天气、当地政治环境和竞争性本地商家的数量。我们将在第3章、第4章和第5章中进一步讨论这个话题，但到目前为止，了解我们可以根据它们相对距离为不同位置分配权重就足够了。
- en: Another factor to consider when wrangling spatial data is the metric of choice.
    Many spatial statistical metrics exist, and those of you familiar with spatial
    data analytics may want to use more sophisticated metrics than the ones we’ll
    consider in this text. The **local Moran statistic**, a common metric in spatial
    data analytics, sums the weights between spatial areas and a function defined
    on the data in a pairwise manner; here, we construct the statistic using weight
    matrices we define and the correlation function, which should be familiar to readers
    as a summary statistic of likeness between data points.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理空间数据时，还需要考虑的一个因素是选择的度量标准。存在许多空间统计度量，那些熟悉空间数据分析的读者可能希望使用比本文中考虑的更复杂的度量。**局部莫兰统计量**是空间数据分析中的一个常用指标，它以成对的方式汇总空间区域之间的权重和一个定义在数据上的函数；在这里，我们使用我们定义的权重矩阵和相关函数构建统计量，这些函数应该对读者来说作为数据点相似性的总结统计量是熟悉的。
- en: Let’s dive into our example dataset, derived from Humanitarian Data Exchange’s
    Burkina Faso – Food Prices dataset from the World Food Programme Price Database
    ([https://data.humdata.org/dataset/wfp-food-prices-for-burkina-faso](https://data.humdata.org/dataset/wfp-food-prices-for-burkina-faso);
    accessed July 15, 2022). In this dataset, we have pre-selected millet prices across
    45 Burkina Faso province markets and aggregated data by quarter, starting in Quarter
    2 of 2015 and ending in Quarter 2 of 2022\. This period covers the COVID-19 pandemic
    and the beginning of the Ukraine War, both of which influenced supply chains.
    Given that markets in neighboring provinces may be impacted by the same local
    factors and supply chains, we have created a spatial weight matrix of 1’s and
    0’s, representing adjacent provinces and non-adjacent provinces respectively.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入研究我们的示例数据集，该数据集来自世界粮食计划价格数据库中的人道数据交换的布基纳法索 – 食品价格数据集（[https://data.humdata.org/dataset/wfp-food-prices-for-burkina-faso](https://data.humdata.org/dataset/wfp-food-prices-for-burkina-faso);
    访问日期：2022年7月15日）。在这个数据集中，我们预先选择了45个布基纳法索省份市场的黍米价格，并按季度汇总数据，从2015年第二季度开始，到2022年第二季度结束。这个时期涵盖了COVID-19大流行和乌克兰战争的开始，这两者都影响了供应链。鉴于邻近省份的市场可能受到相同的地方因素和供应链的影响，我们创建了一个由1和0组成的空间权重矩阵，分别代表相邻省份和非相邻省份。
- en: To run all of the code, it may be necessary to install other packages that are
    dependencies of `igraph` or `NetworkX`, such as `pycairo` for visualizations.
    Each machine may function differently or have other packages already installed
    if you are using a cloud platform; if you run into any difficulties, please consult
    the igraph or NetworkX help guides’ suggestions for running the packages on your
    operating system.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 要运行所有代码，可能需要安装其他包，这些包是`igraph`或`NetworkX`的依赖项，例如用于可视化的`pycairo`。如果你在使用云平台，每台机器可能功能不同，或者已经安装了其他包；如果你遇到任何困难，请咨询igraph或NetworkX帮助指南中关于在您的操作系统上运行这些包的建议。
- en: 'Let’s first import the needed packages to construct our network in igraph with
    `Script 2.1`:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先通过`Script 2.1`导入构建我们网络所需的包：
- en: '[PRE0]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When importing data, you’ll need to specify your own file path after you download
    the dataset. We import both the pricing data and the weight matrix from a local
    machine by adding to `Script 2.1`:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 当导入数据时，你需要在下载数据集后指定自己的文件路径。我们通过向`Script 2.1`中添加来从本地机器导入定价数据和权重矩阵：
- en: '[PRE1]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Now that we have our data imported, we can construct our local Moran statistic
    by computing the correlation coefficient across markets (ignoring the time indicator
    column) and multiplying the result by the weight matrix:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经导入了数据，我们可以通过计算市场间的相关系数（忽略时间指示列）并将结果乘以权重矩阵来构建我们的局部莫兰统计量：
- en: '[PRE2]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Now that we have our local Moran statistic constructed as `cor_weighted`, we
    can turn our data into a network with igraph. Our graph does not have any directionality
    of relationship, so we can set the mode to `undirected`. However, because our
    correlations include autocorrelations within individual markets, we need to remove
    loops from our network. We’ll do this by defining possible self-loops and removing
    them from our edge list:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经构建了局部莫兰统计量作为`cor_weighted`，我们可以使用igraph将我们的数据转换成一个网络。我们的图没有关系方向性，因此我们可以将模式设置为`undirected`。然而，因为我们的相关性包括单个市场内的自相关，我们需要从我们的网络中移除循环。我们将通过定义可能的自循环并将其从边列表中删除来实现这一点：
- en: '[PRE3]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Now, we can visualize our network to see which markets are isolated by plotting
    our results:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以通过绘制我们的结果来可视化我们的网络，以查看哪些市场被隔离：
- en: '[PRE4]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'This should give you a plot that shows one isolated market and several regionally-connected
    markets:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 这应该会显示一个图表，展示一个孤立的市场和几个区域连接的市场：
- en: '![Figure 2.9 – A plot of Burkina Faso markets connected by local Moran statistics](img/B21087_02_09.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.9 – 布基纳法索市场通过局部莫兰统计连接的图表](img/B21087_02_09.jpg)'
- en: Figure 2.9 – A plot of Burkina Faso markets connected by local Moran statistics
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.9 – 布基纳法索市场通过局部莫兰统计连接的图表
- en: '*Figure 2**.9* shows that many markets form regional clusters, where prices
    are correlated within adjacent provinces. One market is isolated. Most markets
    connect into groups of three or four markets. One region contains six markets
    that are regionally connected and connected with pricing trends. Likely, this
    network visualizes regional connectivity rather than a mix of price correlation
    and region. We can visualize highly correlated regions by applying a threshold
    to the correlation calculations before computing the local Moran statistic.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 2.9* 显示许多市场形成了区域集群，其中相邻省份的价格相关。有一个市场是孤立的。大多数市场连接成三或四个市场的群体。一个地区包含六个区域连接且与定价趋势相连的市场。很可能，这个网络可视化的是区域连接性，而不是价格相关性和区域的混合。我们可以通过在计算局部莫兰统计之前应用阈值来可视化高度相关的区域。'
- en: 'Let’s set the correlation threshold to `0.9` (very high correlation of prices)
    by modifying `Script 2.1` to include thresholding in the local Moran statistic
    calculation piece:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将相关阈值设置为 `0.9`（价格高度相关）通过修改 `脚本 2.1` 以包括局部莫兰统计计算中的阈值：
- en: '[PRE5]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'This should yield many more isolated markets that are not highly correlated
    over our time period:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 这应该会产生更多孤立的市场，这些市场在我们的时间范围内相关性不高：
- en: '![Figure 2.10 – A plot of Burkina Faso markets connected by local Moran statistics
    over the selected threshold of 0.9](img/B21087_02_10.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.10 – 布基纳法索市场通过局部莫兰统计在选定的阈值 0.9 下的连接图表](img/B21087_02_10.jpg)'
- en: Figure 2.10 – A plot of Burkina Faso markets connected by local Moran statistics
    over the selected threshold of 0.9
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.10 – 布基纳法索市场通过局部莫兰统计在选定的阈值 0.9 下的连接图表
- en: '*Figure 2**.10* shows a much sparser network, where many markets are isolated.
    Some markets that were regionally connected still show connections among markets;
    however, many are not mutually connected anymore. Interestingly, our group of
    six regional markets is still connected with most connections intact after the
    thresholding. Indeed, only one market in that region shows a difference in connectivity
    relative to our non-thresholded version.'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 2.10* 显示了一个更稀疏的网络，其中许多市场是孤立的。一些原本区域连接的市场仍然显示出市场间的连接；然而，许多市场不再相互连接。有趣的是，我们的六个区域市场群在阈值化后仍然保持着大部分连接。实际上，该区域只有一个市场在连接性方面与我们的非阈值版本有所不同。'
- en: While this example considers correlations across the entire time period, it
    is possible to slice spatiotemporal data into overlapping time slices, create
    time-aware metrics like the local Moran statistic (with or without thresholding),
    and visualize the metrics’ changes over time by plotting a series of networks
    created from these time slices and their network-defining metrics. We’ll explore
    this notion further in [*Chapter 7*](B21087_07.xhtml#_idTextAnchor088) when we
    break our Burkina Faso millet dataset into time slices to analyze changing graph
    metrics over time and space.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这个示例考虑了整个时间跨度的相关性，但可以将时空数据切割成重叠的时间切片，创建时间感知的指标，如局部莫兰统计（带或不带阈值），并通过绘制一系列由这些时间切片及其网络定义指标创建的网络来可视化这些指标随时间的变化。我们将在
    [*第 7 章*](B21087_07.xhtml#_idTextAnchor088) 中进一步探讨这个概念，届时我们将布基纳法索的小米数据集切割成时间切片，以分析随时间和空间变化的图指标。
- en: Now that we know how to wrangle data into an igraph network, let’s see how this
    is done in NetworkX with another example.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道了如何将数据整理成 igraph 网络，让我们通过另一个示例来看看 NetworkX 是如何做到这一点的。
- en: Social network examples with NetworkX
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 NetworkX 的社交网络示例
- en: 'Here, we’ll consider a social network of **African Institute of Mathematical
    Sciences** (**AIMS**) students collected from a 2022 cohort in Cameroon. Students
    in this program live together in the same building, interact during class, eat
    meals together, and study together. However, students who share a country, come
    from the same undergraduate university, and speak the same language tend to interact
    more frequently than those who come from different backgrounds. Interactions such
    as those shown in *Figure 2**.11* thus happen either organically as a function
    of background or artificially through shared programs and living arrangements:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们将考虑从2022年在喀麦隆的一个班级收集的**非洲数学科学研究所**（**AIMS**）学生的社交网络。这个项目中的学生住在同一栋楼里，在课堂上互动，一起吃饭，一起学习。然而，来自同一国家、来自同一本科大学和说同一种语言的学生往往比来自不同背景的学生互动更频繁。如图
    *图 2.11* 所示的这种互动要么是作为背景的有机功能，要么是通过共享项目和住宿安排的人工方式发生的：
- en: "![Figure 2.11 – \uFEFFAn illustration of a classroom setting, where students\
    \ share courses within a program](img/B21087_02_11.jpg)"
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![图 2.11 – 一幅描绘课堂环境的插图，其中学生在项目内共享课程](img/B21087_02_11.jpg)'
- en: Figure 2.11 – An illustration of a classroom setting, where students share courses
    within a program
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.11 – 描绘课堂环境的插图，其中学生在项目内共享课程
- en: 'To understand these interactions within our cohort of students, we administered
    a questionnaire about interactions with other students in various settings. The
    data was collected between November and December of 2022\. The following are some
    example questions:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解我们学生群体中的这些互动，我们进行了一项关于在各种环境中与其他学生互动的调查问卷。数据收集于2022年11月至12月之间。以下是一些示例问题：
- en: Whom do you like to sit with during lunch or dinner?
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你午餐或晚餐时喜欢和谁坐在一起？
- en: Who do you like to ask questions when you are having difficulty with a subject
    or course?
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你在某个科目或课程中遇到困难时，你喜欢向谁提问？
- en: From these questions, students’ perceptions of their networks could be examined
    to see the degree to which they agree. Upon looking at the data, we realized most
    interactions were reciprocated. If *Student A* endorsed survey items of closeness
    to *Student B*, *Student B* was likely to endorse those items, as well. Thus,
    the data form an undirected network of mutual interactions.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 从这些问题中，我们可以检查学生对他们网络的看法，以了解他们同意的程度。在查看数据后，我们发现大多数互动都是相互的。如果 *学生A* 批准了与 *学生B*
    的亲近程度调查项，那么 *学生B* 很可能也会批准这些项。因此，这些数据形成了一个相互互动的无向网络。
- en: The dataset we’ll use includes several fields. In the first column, we have
    the name of the surveyed student. In the next four fields, we have demographic
    factors (to which we’ll return in later chapters), including country of origin,
    age, field of study, and undergraduate background. In the remaining five columns,
    we have five friends that the student most strongly endorsed.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用的数据集包括几个字段。在第一列中，我们有被调查学生的姓名。在接下来的四列中，我们有包括原籍国、年龄、研究领域和本科背景的人口统计因素（我们将在后面的章节中返回），在剩余的五列中，我们有五个学生最强烈推荐的朋友。
- en: 'Let’s start by importing the packages we’ll need to wrangle this dataset into
    a network with `Script 2.2`:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先导入我们将需要的包，以便使用 `Script 2.2` 将此数据集整理成网络：
- en: '[PRE6]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Now, let’s import the dataset:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们导入数据集：
- en: '[PRE7]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'To turn this data into a social network with NetworkX, we’ll need to populate
    our network with vertices and edges, which we can do through loops. We’ll first
    add vertices that include metadata including students’ names and demographic characteristics.
    Then, we’ll add edges that connect vertices based on the five closest relationships
    a particular student endorsed in our survey by adding to `Script 2.2`:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 要将此数据转换为使用 NetworkX 的社交网络，我们需要通过循环填充我们的网络，包括顶点和边。我们首先添加包含学生姓名和人口统计特征的顶点元数据。然后，我们将根据特定学生在调查中支持的五个最接近的关系添加边来连接顶点，具体操作如下
    `Script 2.2`：
- en: '[PRE8]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'This gives us our initial network of AIMS students and their closest friends
    within the program. Let’s plot this data to visualize our AIMS student social
    network. Because we want to show the names of students in our plot, we’ll first
    compute the degree of each vertex, a centrality metric that we’ll revisit in later
    chapters. Here, it suffices to show the importance of different students to the
    network and allow vertices to be large enough to visualize the names of students.
    Let’s do this by adding to `Script 2.2`:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 这为我们提供了AIMS学生及其在项目中的最亲近朋友的基本网络。让我们绘制这些数据来可视化AIMS学生的社交网络。因为我们想在图中显示学生的名字，所以我们首先计算每个顶点的度数，这是一个我们将在后面的章节中重新讨论的中心性度量。在这里，我们只需展示不同学生对网络的重要性，并允许顶点足够大，以便可视化学生的名字。我们可以通过向
    `Script 2.2` 添加以下内容来实现这一点：
- en: '[PRE9]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'This script should show an image similar to *Figure 2**.12*, which plots the
    social connections between AIMS students:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 此脚本应显示与 *图2.12* 类似的图像，该图像绘制了AIMS学生之间的社交联系：
- en: '![Figure 2.12 – Plot of AIMS Cameroon 2022 students’ social interaction network](img/B21087_02_12.jpg)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![图2.12 – AIMS喀麦隆2022年学生社交互动网络图](img/B21087_02_12.jpg)'
- en: Figure 2.12 – Plot of AIMS Cameroon 2022 students’ social interaction network
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.12 – AIMS喀麦隆2022年学生社交互动网络图
- en: '*Figure 2**.12* shows the network of AIMS students we created from our survey
    data. Note that some students only have the five closest friends as connections
    while others have many more close friends. This is typical of a social network,
    even one created from survey data. Some individuals have more connections than
    others. Some connect to different parts of a network, linking separated communities.
    Some highly connected individuals connect to other highly connected individuals,
    forming dense regions within the larger network. These properties play an important
    role in network analytics, and we’ll dive deeper into their meanings and computation
    in later chapters.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '*图2.12* 展示了我们根据调查数据创建的AIMS学生网络。请注意，一些学生只有五个最亲近的朋友作为连接，而其他人则有更多亲近的朋友。这在社交网络中很典型，即使是基于调查数据创建的。有些人比其他人有更多的连接。有些人连接到网络的各个部分，将分离的社区联系起来。一些高度连接的个人连接到其他高度连接的个人，在更大的网络中形成密集的区域。这些特性在网络分析中起着重要作用，我们将在后面的章节中深入探讨它们的含义和计算。'
- en: Summary
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we’ve explored use cases of networks in more depth, wrangled
    a spatial market dataset into a network based on regional connectivity and millet
    price correlation in igraph, and constructed a survey-based social network in
    NetworkX. Now that we have the basic tools needed to construct networks in Python
    from real data sources, in the next chapter, we can turn our attention to some
    real-world applications of network science, where we not only construct a network
    but analyze it for insights that solve important problems in science today.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们更深入地探讨了网络的应用案例，将空间市场数据集整理成基于区域连通性和高粱价格相关性的网络，并在NetworkX中构建了一个基于调查的社交网络。现在，我们已经拥有了从真实数据源构建网络所需的基本工具，在下一章中，我们可以将注意力转向网络科学的实际应用，在那里我们不仅构建网络，还分析它以获得解决当今科学中重要问题的见解。
- en: References
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: Berger, S. L., Kouzarides, T., Shiekhattar, R., & Shilatifard, A. (2009). An
    Operational Definition Of Epigenetics. *Genes & development,* *23*(7), 781-783.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: Berger, S. L., Kouzarides, T., Shiekhattar, R., & Shilatifard, A. (2009). 表观遗传学的操作定义.
    *基因与发育，* 23(7)，781-783.
- en: 'Caballero, J. (2015). Banking crises and financial integration: Insights from
    networks science. Journal of International Financial Markets, Institutions and
    Money, 34, 127-146.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: Caballero, J. (2015). 银行危机和金融一体化：网络科学视角的见解. 国际金融市场、机构和货币杂志，34，127-146.
- en: 'Christakis, N. A., & Fowler, J. H. (2013). Social contagion theory: examining
    dynamic social networks and human behavior. Statistics in medicine, 32(4), 556-577.'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: Christakis, N. A., & Fowler, J. H. (2013). 社会传染理论：动态社交网络和人类行为的考察. 统计医学，32(4)，556-577.
- en: 'Dubos, R. (2017). Social capital: Theory and research. Routledge.'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: Dubos, R. (2017). 社会资本：理论与研究. 路透社.
- en: 'Ducruet, C., & Beauguitte, L. (2014). Spatial science and network science:
    review and outcomes of a complex relationship. Networks and Spatial Economics,
    14(3-4), 297-316.'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: Ducruet, C., & Beauguitte, L. (2014). 空间科学和网络科学：复杂关系的回顾和结果. 网络与空间经济学，14(3-4)，297-316.
- en: 'Kiss, I. Z., Miller, J. C., & Simon, P. L. (2017). Mathematics of epidemics
    on networks. Cham: Springer, 598, 31.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: Kiss, I. Z., Miller, J. C., & Simon, P. L. (2017). 网络流行病的数学. 沙夫豪森：斯普林格，598，31.
- en: Krishnan, H. R., Sakharkar, A. J., Teppen, T. L., Berkel, T. D., & Pandey, S.
    C. (2014). The epigenetic landscape of alcoholism. International Review of Neurobiology,
    115, 75-116.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: Krishnan, H. R., Sakharkar, A. J., Teppen, T. L., Berkel, T. D., & Pandey, S.
    C. (2014). 酒精成瘾的表观遗传景观. 国际神经生物学评论, 115, 75-116.
- en: Moyano, L. G. (2017). Learning network representations. The European Physical
    Journal Special Topics, 226(3), 499-518.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: Moyano, L. G. (2017). 学习网络表示. 欧洲物理期刊特别专题, 226(3), 499-518.
- en: Sharma, S., Kelly, T. K., & Jones, P. A. (2010). Epigenetics in cancer. Carcinogenesis,
    31(1), 27-36.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: Sharma, S., Kelly, T. K., & Jones, P. A. (2010). 癌症中的表观遗传学. 癌变, 31(1), 27-36.
- en: Sorrells, T. R., & Johnson, A. D. (2015). Making sense of transcription networks.
    Cell, 161(4), 714-723.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: Sorrells, T. R., & Johnson, A. D. (2015). 理解转录网络. 细胞, 161(4), 714-723.
