- en: Proximity Analysis
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 邻近分析
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下食谱：
- en: Selecting features within a specific distance
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在特定距离内选择要素
- en: Creating Buffers
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建缓冲区
- en: Determining the nearest feature using the Near tool
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用邻近工具确定最近要素
- en: Calculating how far features are using the Generate Near Table tool
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用生成邻近表工具计算要素之间的距离
- en: Introduction
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: If you have been working through the previous chapters in this book, you have
    learned how to access, visualize, convert, and maintain data using ArcGIS Pro.
    While these capabilities alone would make ArcGIS Pro a very powerful tool, those
    are by no means the limits of what you can accomplish with ArcGIS Pro.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您一直在阅读本书的前几章，您已经学习了如何使用 ArcGIS Pro 访问、可视化、转换和维护数据。虽然这些功能本身会使 ArcGIS Pro 成为一个非常强大的工具，但这绝不是您可以使用
    ArcGIS Pro 完成的事情的极限。
- en: 'ArcGIS Pro is capable of performing some amazing analysis. These capabilities
    are generally broken down into four categories: overlay, proximity, network, and
    statistical. These can be further specialized as well. As was pointed out in [Chapter
    1](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml), *ArcGIS Pro Capabilities and Terminology*,
    there are two things that determine what tools are available to you, license level
    and extensions. The license level will determine what core tools are available
    to you. The extensions will determine what specialized tools you will be able
    to access. So, it is always important to know what license level you are using
    and what extensions you have access to. Review [Chapter 1](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml), *ArcGIS
    Pro Capabilities and Terminology*, for more information about license levels.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: ArcGIS Pro 能够执行一些令人惊叹的分析。这些功能通常分为四个类别：叠加、邻近、网络和统计。这些也可以进一步专业化。正如在[第1章](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml)“ArcGIS
    Pro 功能和术语”中指出的，有两个因素决定了您可以使用哪些工具，即许可证级别和扩展。许可证级别将决定您可以使用哪些核心工具。扩展将决定您可以访问哪些专业工具。因此，了解您正在使用哪种许可证级别以及可以访问哪些扩展始终很重要。请参阅[第1章](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml)“ArcGIS
    Pro 功能和术语”，以获取有关许可证级别的更多信息。
- en: Let’s now focus on proximity analysis in ArcGIS Pro. Proximity analysis is simply
    determining how far or close features are from one another. This could be as simple
    as selecting features that are within a specified distance from other features,
    or as complex as calculating the distances between features in one or more layers.
    Examples of proximity analysis include creating a buffer around selected features
    to show the area around those features at a set distance. It might be calculating
    how far features in one layer are from features in another layer and writing those
    values to a data table. It might be determining which feature in one layer is
    the closest to a feature in another layer.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们专注于 ArcGIS Pro 中的邻近分析。邻近分析简单地说就是确定要素彼此之间的距离或接近程度。这可能只是选择位于其他要素指定距离内的要素，或者可能非常复杂，如计算一个或多个图层中要素之间的距离。邻近分析的例子包括围绕所选要素创建缓冲区，以显示这些要素周围一定距离内的区域。这可能包括计算一个图层中的要素与另一个图层中的要素之间的距离，并将这些值写入数据表。也可能包括确定一个图层中的哪个要素与另一个图层中的要素最近。
- en: In this chapter, you will get some first-hand experience of performing various
    types of proximity analysis. This will include creating buffers, selecting features
    based on distance, determining the nearest feature, and calculating how far features
    are from other features. Some of these recipes will require you to have an Advanced
    license for ArcGIS Pro.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将获得一些实际操作各种类型邻近分析的第一手经验。这包括创建缓冲区、根据距离选择要素、确定最近要素以及计算要素之间的距离。其中一些食谱可能需要您拥有
    ArcGIS Pro 的高级许可证。
- en: Selecting features within a specific distance
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在特定距离内选择要素
- en: For this recipe, the roads superintendent has told you he will be starting a
    new project along Sloan St. and needs to notify those living and working near
    the street. He has asked you to generate a list of all the parcels located within
    500 feet of Sloan Street, so he can notify them of the upcoming work.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个食谱，道路管理员已经告诉您他将在 Sloan 街上启动一个新项目，并需要通知那些住在街道附近的人。他要求您生成一个位于 Sloan 街道500英尺范围内的所有地块的列表，以便他可以通知他们即将进行的工作。
- en: In this recipe, you will use the Select by Location tool to select all the parcels
    within 500 feet of Sloan Street, and then export the selected parcels to an Excel
    spreadsheet to give to the superintendent. Before you can use the Select by Location
    tool, you will need to select all the road centerline segments that make up Sloan
    Street. You will use the Select by Attribute tool to do that.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在本菜谱中，您将使用选择位置工具选择Sloan Street 500英尺范围内的所有地块，然后将选定的地块导出到Excel电子表格中，以供管理员使用。在使用选择位置工具之前，您需要选择构成Sloan
    Street的所有道路中心线段。您将使用选择属性工具来完成此操作。
- en: Getting ready
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: This recipe does require the sample data be installed on the computer. It is
    recommended that you complete the recipes in [Chapter 1](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml), *ArcGIS
    Pro Capabilities and Terminology*, or have some experience working with ArcGIS
    Pro before you start this recipe in order to ensure you have the required foundational
    skills and knowledge needed to successfully complete this recipe. You can complete
    this recipe with any ArcGIS Pro licensing level.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本菜谱确实需要将示例数据安装到计算机上。建议您在开始本菜谱之前完成[第1章](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml)，*ArcGIS
    Pro功能与术语*的菜谱，或者在工作之前有一些使用ArcGIS Pro的经验，以确保您具备成功完成本菜谱所需的基础技能和知识。您可以使用任何ArcGIS Pro许可级别完成此菜谱。
- en: How to do it...
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: The first step is to launch ArcGIS Pro. You can do this, several ways depending
    on how your computer is set up. You can go through the Start menu and All Programs.
    Then to ArcGIS and ArcGIS Pro.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是启动ArcGIS Pro。您可以通过多种方式完成此操作，具体取决于您的计算机设置。您可以通过开始菜单和所有程序进入ArcGIS，然后进入ArcGIS
    Pro。
- en: 'In the ArcGIS Pro start window, click on Open another project:'
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在ArcGIS Pro启动窗口中，单击打开另一个项目：
- en: '![](img/b7126901-cbc9-4d7a-b926-afeb34a10d96.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/b7126901-cbc9-4d7a-b926-afeb34a10d96.png)'
- en: Select Computer from the Open window and then click Browse in the area on the
    right.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从打开窗口中选择计算机，然后在右侧的区域单击浏览。
- en: Navigate to `C:\Student\ArcGISProCookbook\Chapter8\Proximity Analysis` by clicking
    on `C:\` in the area on the left of the Open Project window. Then double-click
    on Student, ArcGISProCookbook, Chapter8, and Proximity Analysis folders.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在打开项目窗口左侧的区域单击`C:\`，导航到`C:\Student\ArcGISProCookbook\Chapter8\Proximity Analysis`。然后双击Student、ArcGISProCookbook、Chapter8和Proximity
    Analysis文件夹。
- en: Select the Proximity Analysis.aprx project file and click OK.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择Proximity Analysis.aprx项目文件，然后单击确定。
- en: The project will open with the Select in a distance map. This is an existing
    map that already contains the layers you will need to work with in this recipe.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 项目将以选择距离地图打开。这是一个包含您在本菜谱中需要使用的层的现有地图。
- en: Click on the Bookmarks button in the Navigate group in the Map tab on the ribbon.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区地图标签页的导航组中单击书签按钮。
- en: 'Select the Sloan St bookmark, as illustrated in the following. This will zoom
    you to the work area for this recipe:'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择Sloan St书签，如图所示。这将使您缩放到本菜谱的工作区域：
- en: '![](img/cd087aa1-ded3-4f69-af74-b79338fb6cce.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/cd087aa1-ded3-4f69-af74-b79338fb6cce.png)'
- en: Now you need to select all the segments which form Sloan St. You will use the
    Select by Attribute tool to do this. Click on the Select by Attributes tool located
    in the Selection group on the Map toolbar. This will open the Select Layers by
    Attributes tool in the Geoprocessing pane.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您需要选择构成Sloan St的所有段。您将使用选择属性工具来完成此操作。单击位于地图工具栏选择组中的选择属性工具。这将打开地理处理面板中的选择图层属性工具。
- en: Click on the drop-down menu for the Layer Name or Table view. Select Street
    Centerlines from the list that appears.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击图层名称或表视图的下拉菜单。从出现的列表中选择街道中心线。
- en: Ensure the Selection type is set to New selection.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保选择类型设置为新选择。
- en: Click on the Add Clause button to start building your query.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击添加子句按钮开始构建查询。
- en: Set the Field to ST_NAME using the drop-down arrow.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将字段设置为ST_NAME。
- en: Ensure the operator is set to is Equal to.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保操作设置为等于。
- en: Type `SLOAN ST` into the values cell. It should start to auto-populate as you
    begin typing.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在值单元格中输入`SLOAN ST`。您开始输入时，它应该开始自动填充。
- en: 'Verify that your query looks like the following, and click the Add button:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认您的查询看起来如下，然后单击添加按钮：
- en: '![](img/5330ad2d-848b-470c-bfe8-23c0152fc2bd.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/5330ad2d-848b-470c-bfe8-23c0152fc2bd.png)'
- en: 'Verify your Select Layer by Attribute tool looks like the following image and
    click Run:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认您的选择图层属性工具看起来如下，然后单击运行：
- en: '![](img/4fad3013-4105-4e42-8706-90dbedca46df.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4fad3013-4105-4e42-8706-90dbedca46df.png)'
- en: If you look at the lower-right corner of the ArcGIS Pro interface, you should
    see that three features are selected. Close the Geoprocessing pane once you have
    verified that you have three features selected.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您查看ArcGIS Pro界面的右下角，您应该看到有三个要素被选中。一旦您确认已选中三个要素，请关闭地理处理面板。
- en: Since Sloan St. is such a short road, you could have simply selected them from
    the map using the Select tool.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 由于Sloan街如此短，您可以直接使用选择工具从地图中选择它们。
- en: You have just selected the road segments that make up Sloan Street within your
    GIS data. Now, you need to select the parcels that are within 500 feet, so you
    can create the notification list to give to the superintendent.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 您刚刚选择了构成Sloan街的GIS数据中的道路段。现在，您需要选择距离500英尺内的地块，以便您可以创建通知列表提供给主管。
- en: With the Sloan Street segments selected, click on the Select by Location tool
    in the Selection group on the Map tab in the ribbon. This will open the Select
    Layers by Location tool in the Geoprocessing pane.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择Sloan街段后，在功能区地图标签页的“选择”组中点击“按位置选择”工具。这将打开地理处理面板中的“按位置选择层”工具。
- en: Set the Input Feature Layer to Parcels by clicking on the drop-down arrow and
    selecting the layer from the list.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击下拉箭头并从列表中选择层，将输入特征层设置为地块。
- en: Set the Relationship to Within a distance using the drop-down arrow and selecting
    the option from the list.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头选择列表中的选项，将关系设置为“在一定距离内”。
- en: Set the Selecting Features to Street Centerlines from the list presented to
    you when you click on the drop-down arrow.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉箭头显示的列表中选择“从街道中心线选择要素”。
- en: Type `500` in the Search Distance cell and ensure the units are set to feet.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在搜索距离单元格中输入`500`，并确保单位设置为英尺。
- en: Verify that the Selection type is set to New selection.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认选择类型设置为“新选择”。
- en: 'Review whether your Select Layer by Location tool looks like the following
    screenshot, and click Run:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查您的“按位置选择层”工具是否如下截图所示，然后点击运行：
- en: '![](img/e9f73f25-06ee-47a8-b5dd-7f837ffd9fc0.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e9f73f25-06ee-47a8-b5dd-7f837ffd9fc0.png)'
- en: The Select Layer by Location tool automatically uses only selected features
    in the Selecting Features layer because it is a geoprocessing tool. Geoprocessing
    tools automatically run using selected features for any input layers or tables.
    So, unlike the Select by Location tool in ArcMap, you are not required to tell
    ArcGIS Pro to use selected features.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 由于“按位置选择层”工具是一个地理处理工具，它自动仅使用选择要素层中的选择要素。因此，地理处理工具自动使用任何输入层或表中的选择要素运行。所以，与ArcMap中的“按位置选择”工具不同，您不需要告诉ArcGIS
    Pro使用选择要素。
- en: The Select Layer by Location tool is not limited to only selecting features
    within a specified distance. It can be used to select features based on several
    types of spatial relationships, including intersect, are contained by, share a
    boundary, and more. This makes it a very powerful tool when you need to select
    features based on their spatial relationship.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: “按位置选择层”工具不仅限于仅选择指定距离内的要素。它可以用于根据多种空间关系选择要素，包括相交、包含、共享边界等。这使得它在需要根据空间关系选择要素时成为一个非常强大的工具。
- en: When the tool finishes, you should end up with 107 total selected features.
    That includes three selected Street Centerline segments and 104 parcels. Now,
    all that is left is to export the selected parcels to an Excel spreadsheet.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 工具完成后，您应该有107个总选择要素。这包括三个选择的道路中心线段和104个地块。现在，剩下的只是将选定的地块导出到Excel电子表格中。
- en: 'In the Geoprocessing pane, click on the Back button located in the upper-left
    corner of the pane, as indicated in the following image. This will take you back
    to the general Geoprocessing pane:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在地理处理面板中，点击面板左上角的位置按钮，如图所示。这将带您返回到一般的地理处理面板：
- en: '![](img/43e2c3e6-1fbc-4a29-aa33-3d36d3e4003e.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/43e2c3e6-1fbc-4a29-aa33-3d36d3e4003e.png)'
- en: Click on the Toolboxes tab at the top of the Geoprocessing pane.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击地理处理面板顶部的“工具箱”标签。
- en: Expand the Conversion Tools toolbox and the Excel toolset.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开转换工具箱和Excel工具集。
- en: Click on the Table to Excel tool. This will open the tool in the Geoprocessing
    pane.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“表到Excel”工具。这将打开工具在地理处理面板中。
- en: Set the Input table to Parcels using the drop-down arrow and selecting the layer
    from the list that appears.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头从列表中选择层，将输入表设置为地块。
- en: Click the Browse button for the Output Excel File.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击输出Excel文件的浏览按钮。
- en: In the Save As window that appears, click on This PC or My Computer in the panel
    on the left.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在出现的“另存为”窗口中，点击左侧面板上的“此电脑”或“我的电脑”。
- en: In the panel on the right, double-click on the C:\ drive located under Devices
    and drives. It should be labeled OS or Local Drive.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在右侧面板中，双击位于“设备和驱动器”下的C:\驱动器。它应标记为OS或本地驱动器。
- en: Scroll down in the right panel and double-click on the Student folder.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在右侧面板中向下滚动，然后双击“学生”文件夹。
- en: Continue this same process until you have navigated to `C:\Student\ArcGISProCookbook\MyProjects`.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 继续执行相同的操作，直到您导航到`C:\Student\ArcGISProCookbook\MyProjects`。
- en: Type `Parcels_near_SloanDr` in the File Name cell, then click Save.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件名单元格中键入`Parcels_near_SloanDr`，然后点击保存。
- en: 'Verify that your Table to Excel tool looks like the following, and click Run:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认您的“表格转Excel”工具看起来如下，然后点击运行：
- en: '![](img/01a2b5ca-1016-464e-b312-3330a5202299.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/01a2b5ca-1016-464e-b312-3330a5202299.png)'
- en: When the tool is complete it will have exported a copy of all the attribute
    information linked to the selected parcels to a Microsoft Excel spreadsheet.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 当工具完成时，它将把与所选地块相关联的所有属性信息导出到Microsoft Excel电子表格中。
- en: In the Selection group on the Map tab in the ribbon, click on the Clear button
    to deselect all selected features.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区地图选项卡上的“选择”组中，点击“清除”按钮取消选择所有选定的要素。
- en: Save your project.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目。
- en: If you are not continuing to the next recipe you can close ArcGIS Pro. If you
    are continuing, keep ArcGIS Pro open.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您不继续到下一个菜谱，您可以关闭ArcGIS Pro。如果您继续，请保持ArcGIS Pro打开。
- en: So, in this recipe, you needed to create a list that the roads superintendent
    could use to notify all those that live or work near Sloan Street of an upcoming
    project. To do this you first had to select all the segments that made up Sloan
    Street in the GIS database. You performed an attribute query using the Select
    by Attributes tool. You then used this selection in the Select by Location tool
    to select all parcels within 500 feet of the selected segments of Sloan Street.
    Lastly, you exported the selected parcels that were near Sloan Street to a spreadsheet.
    The roads superintendent will then be able to use it to notify all those near
    the upcoming road project.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在这个菜谱中，您需要创建一个列表，道路管理员可以使用它来通知所有住在或工作在斯隆街附近的人即将到来的项目。为此，您首先必须在GIS数据库中选择组成斯隆街的所有路段。您使用“属性查询”工具执行了属性查询。然后，您使用这个选择在“按位置选择”工具中选择所有距离所选斯隆街路段500英尺内的地块。最后，您将靠近斯隆街的地块导出到电子表格中。道路管理员将能够使用它来通知所有即将到来的道路项目附近的人。
- en: This recipe has not only shown you how to select features that are within a
    specified distance of other features, it has also illustrated that analysis is
    often a multiple step process. It requires you to use a range of tools and skills
    to arrive at an answer.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 这个菜谱不仅向您展示了如何选择位于其他要素指定距离内的要素，还说明了分析通常是一个多步骤的过程。它需要您使用一系列工具和技能来得出答案。
- en: Creating buffers
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建缓冲区
- en: Buffers allow you to see what features are within a specific distance of other
    features. It generates polygons around the buffered features that provide the
    visual reference of the specified distance. These polygons can then be used to
    perform additional analysis or select features that are within, or intersect,
    the buffers.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 缓冲区让您可以看到哪些要素位于其他要素的特定距离内。它围绕缓冲要素生成多边形，提供了指定距离的视觉参考。然后，可以使用这些多边形进行额外的分析或选择位于缓冲区内部或与缓冲区相交的要素。
- en: In this recipe, you will create a buffer around the creeks and streams in the
    City of Trippville that will represent a protective zone where special permits
    are required to perform work. This is due to a recent ordinance passed by the
    city council to protect water quality in and around the city.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，您将在特里普维尔市的溪流和溪流周围创建缓冲区，这代表需要特殊许可证才能进行工作的保护区。这是由于市政委员会最近通过的一项条例，旨在保护城市及其周边的水质。
- en: Getting ready
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: This recipe does require the sample data be installed on the computer. It is
    recommended that you complete the recipes in *[Chapter 1](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml)*,
    *ArcGIS Pro Capabilities and Terminology*, as well as the other recipes in this
    chapter before you start this recipe. This will ensure that you have the skills
    required to successfully complete the steps in this recipe. You can complete this
    recipe with any ArcGIS Pro licensing level.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 此配方确实需要将示例数据安装在计算机上。建议您在开始此配方之前完成*[第1章](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml)*、*ArcGIS
    Pro功能与术语*以及本章中的其他配方。这将确保您具备成功完成此配方中步骤所需的技能。您可以使用任何ArcGIS Pro许可级别完成此配方。
- en: How to do it...
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: If you closed ArcGIS Pro before starting this recipe, you will need to start
    ArcGIS Pro and open the `Proximity Analysis.aprx` project located in `C:\Student\ArcGISProCookbook\Chapter8\Proximity
    Analysis`, using the skills you have learned in past recipes.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您在开始此配方之前关闭了ArcGIS Pro，您需要启动ArcGIS Pro并打开位于`C:\Student\ArcGISProCookbook\Chapter8\Proximity
    Analysis`的`Proximity Analysis.aprx`项目，使用您在之前的配方中学到的技能。
- en: In the Catalog pane, expand the Maps folder. Then right-click on the Buffer
    map and select Open from the menu that appears. This will open a map that contains
    the layers you need to perform the work you will be doing in the remainder of
    the recipe.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录窗格中，展开地图文件夹。然后右键单击缓冲地图并从出现的菜单中选择“打开”。这将打开一个包含您在配方剩余部分要执行的工作所需的图层的地图。
- en: Click on the Analysis tab in the ribbon.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区中单击“分析”选项卡。
- en: Click on the Buffer tool in the Tool group. This will open the Buffer tool in
    the Geoprocessing pane.
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在工具组中单击“缓冲”工具。这将打开地理处理窗格中的缓冲工具。
- en: Set the Input Features to Creeks and Streams by clicking on the drop-down arrow
    and selecting the layer from the list.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过单击下拉箭头并从列表中选择图层，将输入要素设置为溪流和河流。
- en: Accept the default Output Feature Class.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受默认的输出要素类。
- en: While the input for the Buffer tool can be any feature type (point, line, or
    polygon), the output will always be a polygon.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然缓冲工具的输入可以是任何要素类型（点、线或多边形），但输出始终是多边形。
- en: Type `60` into the Distance value and select Feet from the units drop-down list.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在距离值中输入`60`并从单位下拉列表中选择英尺。
- en: You will also accept the defaults for the Side Type and End Type. The Side Type
    should be Full and the End Type should be Round.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您还将接受侧类型和端类型的默认设置。侧类型应该是全侧，端类型应该是圆形。
- en: You are only able to access and change these options if you have an Advanced
    license.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 只有在您拥有高级许可证的情况下，您才能访问和更改这些选项。
- en: Because the protective zone is consistent for all creeks and streams, you will
    set the Buffer tool to Dissolve all output features into a single feature class
    by clicking on the drop-down arrow for the Dissolve Type. This will create a single
    buffer that takes less space and is easier to manage.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于保护区对所有溪流和河流都是一致的，您将通过单击“溶解类型”下拉箭头将缓冲工具设置为将所有输出要素溶解为单个要素类。这将创建一个占用空间更少且更容易管理的单个缓冲区。
- en: 'Verify that your Buffer tool looks like the following, and click the Run button:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认您的缓冲工具看起来如下，然后单击“运行”按钮：
- en: '![](img/b484c9c6-2ca6-4caf-bd18-a967f1a7ff39.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/b484c9c6-2ca6-4caf-bd18-a967f1a7ff39.png)'
- en: When the Buffer tool completes, a new layer will appear in your Contents pane.
    This is the buffer feature class you just created. Close the Geoprocessing pane
    to free up screen space.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当缓冲工具完成后，您的内容窗格中会出现一个新图层。这就是您刚刚创建的缓冲要素类。关闭地理处理窗格以释放屏幕空间。
- en: Save your project.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目。
- en: You have just created a new feature class in the project geodatabase, that represents
    the protective area around the creeks and streams. You can easily see the areas
    that are impacted by this new protective zone. You could also use this layer to
    perform various analyses. For example, you could use the Select by Location tool
    to select all parcels that intersect the protective buffer. This will allow you
    to know exactly which parcels would need a permit for any work they do near one
    of the creeks or streams. You could use the Union geoprocessing tool to calculate
    how much of each parcel is within the protective zone and how much is outside.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 您刚刚在项目地理数据库中创建了一个新的要素类，它代表了溪流和河流周围的保护区。您可以轻松地看到受这个新保护区影响的区域。您还可以使用这个图层进行各种分析。例如，您可以使用“选择位置”工具选择所有与保护区缓冲区相交的地块。这将使您确切知道哪些地块在进行靠近溪流或河流的任何工作时需要许可证。
- en: 'Challenge:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 挑战：
- en: Using the skills you learned in this recipe and in the Selecting Features within
    a distance recipe, select all the parcels that are intersected by the new protective
    zone buffer you just created, then export the selected parcels to an Excel spreadsheet.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 使用你在本菜谱和选择距离内要素菜谱中学到的技能，选择所有与新创建的保护区域缓冲区相交的地块，然后将选定的地块导出到Excel电子表格中。
- en: There’s more…
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多...
- en: You have just learned how to create a single buffer around features using the
    Buffer tool. But what if you need to create several buffers at various distances
    around a set of features or a single layer? You could just use the buffer tool
    multiple times. However, there is an easier way.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 你刚刚学习了如何使用缓冲区工具创建围绕要素的单个缓冲区。但是，如果你需要围绕一组要素或单个图层创建多个不同距离的缓冲区怎么办？你可以多次使用缓冲区工具。然而，有一个更简单的方法。
- en: 'The fire chief for the city of Trippville is working on a fire protection study
    and needs your help to determine the level of protection provided by the fire
    hydrants within the city. He needs to know how much of each parcel is 100, 200,
    and 300 feet from each hydrant. You will use the Multiple Ring Buffer tool to
    accomplish this:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 三普维尔市的消防局长正在做一个防火保护研究，并需要你的帮助来确定城市内消防栓提供的保护水平。他需要知道每个地块距离每个消防栓100、200和300英尺的面积。你将使用多环缓冲区工具来完成这项工作：
- en: First we will clean up the Buffer map you have been using. Right-click on the
    Natwtr_Stream_Buffer layer and select Remove from the menu that appears.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们将清理你一直在使用的缓冲区地图。在Natwtr_Stream_Buffer图层上右键单击，并从出现的菜单中选择删除。
- en: Repeat this process for the Creeks, Streams, Lakes and Rivers layers.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对Creeks、Streams、Lakes和Rivers图层重复此过程。
- en: In the Catalog pane, expand the Databases folder so you can see its contents.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录面板中，展开数据库文件夹，以便可以看到其内容。
- en: Expand the Trippville_GIS.gdb geodatabase.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开Trippville_GIS.gdb地理数据库。
- en: Expand the Water feature dataset and right-click on the fire_hyd feature class.
    Select Add to Current Map from the menu that appears.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开水要素数据集，在fire_hyd要素类上右键单击。从出现的菜单中选择添加到当前地图。
- en: Save your project.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存你的项目。
- en: Click on the Analysis tab in the ribbon.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区中点击分析标签。
- en: Click on the Tools button in the Geoprocessing group to open the Geoprocessing
    pane.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击地理处理组中的工具按钮，打开地理处理面板。
- en: Click on the Toolboxes tab near the top of the Geoprocessing pane.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击地理处理面板顶部附近的工具箱标签。
- en: Expand the Analysis toolbox and the Proximity toolset.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开分析工具箱和邻近工具集。
- en: Click on the Multiple Ring Buffer tool to open it in the Geoprocessing pane.
    Notice that it has a different icon from all the other tools. That is because
    this tool is actually a Python script.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击多环缓冲区工具，在地理处理面板中打开它。注意，它有一个与其他所有工具不同的图标。这是因为这个工具实际上是一个Python脚本。
- en: Python is the primary scripting language for ArcGIS. It allows you to create
    custom tools that help automate tasks. These can then be scheduled to run automatically,
    at specified times, or run manually. To learn more about creating Python scripts
    for ArcGIS, you may want to check out Programming ArcGIS with Python by Eric Pimpler, at
    [https://www.packtpub.com/application-development/programming-arcgis-python-cookbook-second-edition](https://www.packtpub.com/application-development/programming-arcgis-python-cookbook-second-edition).
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: Python是ArcGIS的主要脚本语言。它允许你创建自定义工具来自动化任务。然后可以安排它们在指定的时间自动运行，或手动运行。要了解更多关于为ArcGIS创建Python脚本的信息，你可能想查看Eric
    Pimpler的《使用Python编程ArcGIS》一书，详情请见[https://www.packtpub.com/application-development/programming-arcgis-python-cookbook-second-edition](https://www.packtpub.com/application-development/programming-arcgis-python-cookbook-second-edition)。
- en: Set the Input Features to the fire_hyd layer you just added by clicking on the
    drop-down arrow and selecting it from the list.
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过单击下拉箭头并从列表中选择它，将输入要素设置为刚刚添加的fire_hyd图层。
- en: Accept the default value for the Output Feature Class.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受输出要素类的默认值。
- en: Type `100` in the cell under Distances and press the *Enter* key. Another cell
    should appear.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在距离下的单元格中输入`100`并按*Enter*键。应该会出现另一个单元格。
- en: Type `200` in the new cell that appears and press the *Enter* key. Again, another
    cell should appear.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新出现的单元格中输入`200`并按*Enter*键。再次，应该会出现另一个单元格。
- en: Type `300` in the new cell that appears and press the *Enter* key.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新出现的单元格中输入`300`并按*Enter*键。
- en: Set the Buffer Units to Feet using the drop-down arrow.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将缓冲区单位设置为英尺。
- en: Accept the provided default for the Field Name.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受提供的默认字段名称。
- en: Set the Dissolve Option to Non-overlapping (Rings) or All depending on your
    ArcGIS Pro version. This will allow the fire chief to know how much coverage he
    has at each distance.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据您的 ArcGIS Pro 版本，将溶解选项设置为非重叠（环形）或全部。这将使消防队长知道他在每个距离上的覆盖范围。
- en: The Dissolve Option determines whether you create rings/donuts or disks. The
    Non-overlapping or All options will generate rings that resemble donuts. The overlapping
    area from the other specified distances is cut out. So in this example, you will
    get a single ring that extends out to 100 feet. The next ring will cover from
    100 to 200 feet. The last ring will cover from 200 to 300 feet.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 溶解选项确定您是否创建环形/甜甜圈或圆盘。非重叠或全部选项将生成类似甜甜圈的环形。从其他指定距离的重叠区域将被裁剪。因此，在这个例子中，您将得到一个延伸到
    100 英尺的单个环形。下一个环形将覆盖从 100 到 200 英尺。最后一个环形将覆盖从 200 到 300 英尺。
- en: The Overlapping (disks) or None option creates solid disks that overlap. Using
    this recipe as an example, you will have one disk that extends out to 100 feet.
    You will have a second disk that extends out to 200 feet and overlaps the first
    disk. The last disk will extend out to 300 feet and overlap the other two disks.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 重叠（圆盘）或无选项创建重叠的实心圆盘。以这个配方为例，您将有一个延伸到 100 英尺的圆盘。您将有一个延伸到 200 英尺并重叠第一个圆盘的第二个圆盘。最后一个圆盘将延伸到
    300 英尺并重叠其他两个圆盘。
- en: You are not required to set your buffer distances to equal intervals. They can
    be any distance you wish. To learn more about the Multiple Ring Buffer tool, go
    to [http://pro.arcgis.com/en/pro-app/tool-reference/analysis/multiple-ring-buffer.htm](http://pro.arcgis.com/en/pro-app/tool-reference/analysis/multiple-ring-buffer.htm).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 您不需要将缓冲距离设置为相等间隔。它们可以是您想要的任何距离。要了解更多关于多个环形缓冲区工具的信息，请访问 [http://pro.arcgis.com/en/pro-app/tool-reference/analysis/multiple-ring-buffer.htm](http://pro.arcgis.com/en/pro-app/tool-reference/analysis/multiple-ring-buffer.htm)。
- en: 'Verify that your Multiple Ring Buffer tool looks like the following, and click
    Run:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证您的多个环形缓冲区工具看起来如下，然后点击运行：
- en: '![](img/2b20a900-9e85-4abe-807a-73fcc947f40e.png)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2b20a900-9e85-4abe-807a-73fcc947f40e.png)'
- en: The new layer should appear in the Content pane, which shows the results of
    the Multiple Ring Buffer tool. Now let’s verify the results.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 新图层应出现在内容面板中，显示多个环形缓冲区工具的结果。现在让我们验证结果。
- en: Select the fire_hyd_MultipleRingBuffer layer in the Contents pane.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容面板中选择 fire_hyd_MultipleRingBuffer 图层。
- en: Click on the Appearance tab in the Feature Layer contextual menu in the ribbon.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击功能区中的要素图层上下文菜单中的外观选项卡。
- en: Click on the Import button in the Drawing group.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击绘图组中的导入按钮。
- en: Verify that the Input Layer is set to fire_hyd_MultipleRingBuffer.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证输入图层设置为 fire_hyd_MultipleRingBuffer。
- en: Click on the Browse button for the Symbology Layer. Then select the Folders folder
    under Project in the left panel of the Symbology Layer window.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击符号图层中的浏览按钮。然后在符号图层窗口的左侧面板中选择项目下的文件夹。
- en: Double-click on the Proximity Analysis folder in the right panel.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击右侧面板中的邻近分析文件夹。
- en: Select the Distance_from_Hydrant.lyrx and click Ok.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 Distance_from_Hydrant.lyrx 并点击确定。
- en: 'Verify that your Apply Symbology from Layer looks like the following, and click
    Run:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证您的“从图层应用符号”看起来如下，然后点击运行：
- en: '![](img/ba8d6bbc-1512-4fc7-b47f-58a741513bc3.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ba8d6bbc-1512-4fc7-b47f-58a741513bc3.png)'
- en: The symbology should change for the multiple ring buffer layer you created.
    Now you can see each ring.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 对于您创建的多个环形缓冲区图层，符号应该会改变。现在您可以看到每个环形。
- en: Close the Geoprocessing pane.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭地理处理面板。
- en: Save your project.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目。
- en: Click on the Map tab and the Bookmarks button. Select the Hydrant bookmark to
    zoom in closer to the Hydrants.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击地图选项卡和书签按钮。选择消防栓书签以放大到消防栓附近。
- en: 'Ensure that the layer is still selected in the Contents pane, and click on
    the drop-down arrow below the Symbology button in the Drawing group on the Appearance
    tab in the ribbon. Select Unique Values from the menu that appears, as illustrated
    in the following screenshot:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保图层仍在内容面板中选中，然后在功能区外观选项卡中的绘图组下点击符号按钮下方的下拉箭头。从出现的菜单中选择唯一值，如图所示：
- en: '![](img/4bff80c6-9d3e-46ed-9106-94a131e6023f.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4bff80c6-9d3e-46ed-9106-94a131e6023f.png)'
- en: The Symbology pane should open.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 符号面板应该打开。
- en: In the grid that displays the three distances, right-click on the row for 200
    Feet and select Remove. This will remove the area from 100 to 200 feet from the
    map so you can see how the rings work.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在显示三个距离的网格中，右键单击 200 英尺的行并选择删除。这将从地图中移除 100 到 200 英尺的区域，以便您可以看到环形是如何工作的。
- en: Removing values from the symbology grid does not remove them from the actual
    data source. It just removes those features from the display. You can always add
    the removed value back.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 从符号系统网格中删除值不会从实际数据源中删除它们。它只是从显示中删除这些特征。您始终可以添加已删除的值。
- en: Click on the Undo button in the Quick Access toolbar located in the upper-left
    corner of the ArcGIS Pro interface. This will return the 200 value symbology.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击ArcGIS Pro界面左上角快速访问工具栏中的撤销按钮。这将恢复200值符号系统。
- en: Save your project and close ArcGIS Pro.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目并关闭ArcGIS Pro。
- en: So, you have just created a new layer that represents distances around the fire
    hydrants in the city. This will allow the fire chief to easily determine how much
    protection the fire hydrants provide the citizens and businesses. Using this data,
    he can determine if any new fire hydrants should be installed to improve the fire
    protection in the city.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，您刚刚创建了一个新图层，表示城市消防栓周围的距离。这将使消防队长能够轻松地确定消防栓为市民和企业提供的保护程度。使用这些数据，他可以确定是否应该安装新的消防栓以改善城市的防火保护。
- en: Determining the nearest feature using the Near tool
  id: totrans-146
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用近工具确定最近特征
- en: You have seen how we can use buffers to show areas that are within a specified
    distance from features. This allows us to see if other features are within that
    area. We can also use those areas to perform additional analysis. However, these
    are all general measurements. They do not tell us which feature is the closest
    to another feature. How do we determine which feature is closest to another feature?
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经看到我们可以如何使用缓冲区来显示位于特征指定距离内的区域。这使我们能够看到该区域是否还有其他特征。我们还可以使用这些区域进行其他分析。然而，这些都是一般性测量。它们不会告诉我们哪个特征离另一个特征最近。我们如何确定哪个特征离另一个特征最近？
- en: If you have an advanced license for ArcGIS Pro, this is pretty easy. The Near
    tool will determine the closest feature for you. Not only will it determine which
    feature is closest, but it also has options to calculate the distance, direction,
    coordinates, and more of the closest features. The Near tool works with points,
    lines, and polygons. You can also specify that it only searches for the closest
    feature within a specified distance. So lets put this tool into action.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您拥有ArcGIS Pro的高级许可证，这相当简单。近工具将为您确定最近的特征。它不仅会确定哪个特征最近，而且还有计算最近特征的距离、方向、坐标等选项。近工具适用于点、线和多边形。您还可以指定它只搜索指定距离内的最近特征。那么，让我们来实际应用这个工具。
- en: In this recipe, you will continue to assist the Fire Chief. He is still working
    on his fire protection study. He wants to know which fire hydrant is closest to
    each parcel, so the department will know exactly which hydrant they should connect
    to when responding to a given location. You will use the Near tool to calculate
    which hydrant is closest to each parcel.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，您将继续协助消防队长。他仍在进行他的防火研究。他想知道哪个消防栓离每个地块最近，以便部门在响应特定位置时确切知道应该连接哪个消防栓。您将使用近工具来计算哪个消防栓离每个地块最近。
- en: Getting ready
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: You will need to make sure you have an Advanced license for ArcGIS Pro to complete
    this recipe. You will not be able to do it with a Basic or Standard license. If
    you are not sure what license level you have or how to determine it, refer to
    [Chapter 1](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml), *ArcGIS Pro Capabilities
    and Terminology*, and the recipe entitled *Determining your ArcGIS Pro license
    level*.  That recipe outlines the steps required to determine your license level,
    if you do not remember.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要确保您拥有ArcGIS Pro的高级许可证才能完成本食谱。您将无法使用基本或标准许可证完成。如果您不确定您拥有哪种许可证级别或如何确定它，请参阅[第1章](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml)，*ArcGIS
    Pro功能与术语*，以及名为*确定您的ArcGIS Pro许可证级别*的食谱。该食谱概述了确定许可证级别的步骤，如果您不记得的话。
- en: If you are limited to a Basic or Standard license, then please read through
    this recipe and then proceed with the *There’s more...* section, which can be
    completed with a lower license level.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您仅限于基本或标准许可证，请阅读本食谱，然后继续阅读*更多内容...*部分，这部分可以使用较低级别的许可证完成。
- en: It is also recommended, you complete the other recipes in this chapter before
    starting this one. This will ensure that you have a good basic understanding of
    proximity analysis within ArcGIS Pro.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 还建议您在开始本食谱之前完成本章中的其他食谱。这将确保您对ArcGIS Pro中的邻近分析有一个良好的基本理解。
- en: You will also need to ensure the sample data is installed before you continue.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，你还需要确保样本数据已安装。
- en: How to do it...
  id: totrans-155
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: To begin, launch  ArcGIS Pro using the same method you have in previous recipes,
    and then launch the `Nearest Feature.aprx` project located in `C:\Student\ArcGISProCookbook\Chapter8\Proximity
    Analysis` using the skills you have learned in past recipes.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，使用与之前食谱中相同的方法启动 ArcGIS Pro，然后使用你在过去食谱中学到的技能，启动位于 `C:\Student\ArcGISProCookbook\Chapter8\Proximity
    Analysis` 的 `Nearest Feature.aprx` 项目。
- en: 'It should open with the Trippville Fire Protection Map. Verify that this map
    contains the Fire Hydrant and Parcels layers at a minimum. It should look like
    the following. Your scale may be different depending on the size of your monitor
    and what panes you have open:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它应该打开带有 Trippville 消防保护地图。请确认该地图至少包含消防栓和地块层。它应该看起来像以下这样。你的比例可能因你的显示器大小和打开的窗格而异：
- en: '![](img/e4d1c9e5-2078-421a-bfa8-db4873e37147.png)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e4d1c9e5-2078-421a-bfa8-db4873e37147.png)'
- en: Right-click on the Parcels layer in the Contents pane and select Attribute Table
    from the menu that appears.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容窗格中右键点击地块层，并从出现的菜单中选择属性表。
- en: 'Review the available fields and answer the following question:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看可用字段并回答以下问题：
- en: '**Question**: What fields are associated with the parcels in the attribute
    table?'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：属性表中与地块相关联的字段有哪些？'
- en: '**Answer**:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: As you can see, there are only a few fields associated with the parcels. The
    attribute table is currently storing the ObjectID, Shape, LOTNUM, STNUMBER, STNAME,
    STSUFFIX, Shape_Length, Shape_Area, and Acres. There is nothing here that tells
    you which fire hydrant is closest to each parcel. You are about to change that.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，只有少数几个字段与地块相关联。属性表当前存储 ObjectID、Shape、LOTNUM、STNUMBER、STNAME、STSUFFIX、Shape_Length、Shape_Area
    和 Acres。这里没有任何信息告诉你哪个消防栓离每个地块最近。你即将改变这一点。
- en: Close the Parcels attribute table by clicking the small X next to the table
    name in the tab at the top of the table view. This will free up more screen real
    estate.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击表格视图顶部标签页中表格名称旁边的小 X 关闭地块属性表。这将释放更多屏幕空间。
- en: If you have multiple monitors, or a really large one, you could also undock
    and drag the table pane to a different monitor or location as well. This would
    free up space for viewing the map, but also allow you to continue to view the
    table. Also, ArcGIS Pro lets you display each table in its own window if you desire,
    unlike ArcMap, which forces all tables into a single window.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有多台显示器，或者一台非常大的显示器，你也可以取消停靠并将表格窗格拖到不同的显示器或位置。这将释放空间以查看地图，同时也可以继续查看表格。此外，ArcGIS
    Pro 允许你根据需要将每个表格显示在其自己的窗口中，与 ArcMap 不同，ArcMap 强制所有表格都在一个窗口中。
- en: Click on the Analysis tab in the ribbon, then click on the Tools button in the
    Geoprocessing group. This opens the Geoprocessing pane.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在工具栏中点击分析选项卡，然后在地理处理组中点击工具按钮。这会打开地理处理窗格。
- en: Click on the Toolboxes tab at the top of the Geoprocessing pane.
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在地理处理窗格的顶部点击工具箱选项卡。
- en: Expand the Analysis Tools toolbox and the Proximity toolset.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开分析工具箱和邻近工具集。
- en: Click on the Near tool in the Proximity toolset.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在邻近工具集中点击邻近工具。
- en: Set the Input Features to Parcels by clicking on the drop-down arrow and selecting
    the layer from the list presented.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击下拉箭头并从显示的列表中选择层，将输入要素设置为地块。
- en: Set the Near Features to Fire Hydrants using the drop-down arrow and selecting
    it from the list.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头并从列表中选择，将邻近要素设置为消防栓。
- en: You can set more than one layer or feature class as the Near Features. Also,
    Input Features and Near Features can be the same if you are looking for the nearest
    feature in the same layer.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以设置多个图层或要素类作为邻近要素。如果是在同一层中查找最近要素，输入要素和邻近要素可以是相同的。
- en: Set the Search Radius to 300 feet by typing in `300` and ensuring the units
    are feet. The Fire Chief has indicated that any parcel over 300 feet from a hydrant
    is considered to not be adequately protected.
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入 `300` 并确保单位是英尺，将搜索半径设置为 300 英尺。消防队长指出，任何距离消防栓超过 300 英尺的地块被认为没有得到充分保护。
- en: Go ahead and click on the Location and Angle boxes. This will provide additional
    information for the closest Hydrant.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位置和角度框。这将提供关于最近消防栓的额外信息。
- en: The Location option will add the *x* and *y* coordinates for the nearest hydrant
    to the Parcel attribute table. The Angle option will add the angle to the nearest
    hydrant based on grid north.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 位置选项将添加最近的消防栓的*x*和*y*坐标到Parcel属性表中。角度选项将基于网格北方向添加到最近消防栓的角度。
- en: It should be noted that the Near tool is one of the few geoprocessing tools
    that actually edits existing data. In the case of the Near tool, it will add new
    fields to the Parcels attribute table since the Parcels layer is set as the Input
    Features. For more information on the Near tool, go to [http://pro.arcgis.com/en/pro-app/tool-reference/analysis/near.htm](http://pro.arcgis.com/en/pro-app/tool-reference/analysis/near.htm).
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 应该注意的是，Near工具是少数几个实际上编辑现有数据的地理处理工具之一。在Near工具的情况下，由于Parcels图层被设置为输入要素，它将向Parcels属性表添加新字段。有关Near工具的更多信息，请访问[http://pro.arcgis.com/en/pro-app/tool-reference/analysis/near.htm](http://pro.arcgis.com/en/pro-app/tool-reference/analysis/near.htm)。
- en: Ensure the Method is set to Planar.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保方法设置为平面。
- en: 'Verify that your Near tool looks like the following, and then click Run:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查你的Near工具看起来是否如下，然后点击运行：
- en: '![](img/dac83c96-aed8-4b14-a5b2-7fd211fe4c08.png)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/dac83c96-aed8-4b14-a5b2-7fd211fe4c08.png)'
- en: Notice, this time no new layers were added to your map unlike the Buffer and
    Multiple Ring Buffer. That is because the Near tool does not create a new feature
    class or table. Instead, it adds new fields to the Input Features attribute table.
    Lets see what fields were added by the Near tool to the Parcels layer.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，这次与Buffer和Multiple Ring Buffer不同，你的地图中没有添加新的图层。这是因为Near工具不会创建一个新的要素类或表。相反，它向输入要素属性表中添加了新的字段。让我们看看Near工具向Parcels图层添加了哪些字段。
- en: You must also have edit permissions to the Input Features layer in order to
    use this tool.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 你还必须具有对输入要素层的编辑权限才能使用此工具。
- en: Close the Geoprocessing pane to free up screen space.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭地理处理面板以释放屏幕空间。
- en: 'Open the Attribute table for the Parcel using the same method you did earlier
    in this recipe. Then answer the following question:'
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用与你在本食谱中之前相同的方法打开Parcel的属性表。然后回答以下问题：
- en: '**Question**: What fields have been added to the Parcels Attribute table by
    the Near tool?'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '**问题**：Near工具向Parcel属性表添加了哪些字段？'
- en: '**Answer**:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '**答案**：'
- en: 'As you can see, several new fields now appear in the Parcels attribute table.
    This includes the Near_FID, Near_Dist, Near_X, Near_Y, and Near_Angle, as shown
    in the following screenshot:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，现在在Parcel属性表中出现了几个新的字段。这包括Near_FID、Near_Dist、Near_X、Near_Y和Near_Angle，如下面的截图所示：
- en: '![](img/672c0873-60ba-44a6-bf6f-7da628b86d27.png)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/672c0873-60ba-44a6-bf6f-7da628b86d27.png)'
- en: Those parcels with a -1 value in the fields are not within the 300 foot search
    radius you specified when your ran the Near tool. So those are easily identified
    as not having adequate fire protection. Those parcels that were within 300 feet
    of a hydrant now have the hydrants' feature ID (Near_FID), distance to the hydrant
    (Near_Dist), angle to the hydrant (Near_Angle), and X,Y coordinates (Near_X and
    Near_Y) assigned to each parcel. This allows you to learn which hydrant is closest
    to each parcel.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 那些字段中值为-1的Parcel不在你运行Near工具时指定的300英尺搜索半径内。因此，这些很容易被识别为没有足够的消防保护。那些在消防栓300英尺范围内的Parcel现在被分配了消防栓的要素ID（Near_FID）、到消防栓的距离（Near_Dist）、到消防栓的角度（Near_Angle）以及X，Y坐标（Near_X和Near_Y）。这允许你了解哪个消防栓离每个Parcel最近。
- en: The Near_FID is the ObjectID for the nearest fire hydrant. You could use those
    two fields to join, relate, or create a relationship class between the two layers.
    This would allow you to access even more information.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: Near_FID是最近消防栓的对象ID。你可以使用这两个字段来连接、关联或创建两个图层之间的关系类。这将允许你访问更多信息。
- en: Close the Parcels attribute table when you are done reviewing it.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 审阅完毕后，关闭Parcel属性表。
- en: Save your project.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存你的项目。
- en: 'Challenge:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 挑战：
- en: 'Try linking the Parcels layer to the Fire Hydrants layer using a Join or Relate.
    Refer to [Chapter 3](cbca2a90-3539-4243-8ca3-0010b6f91584.xhtml), *Linking Data
    together*, using a Join or Relate. Determine which you should use, a Join or a
    Relate. (Hint: The cardinality between the tables is a many to one.) Then, link
    them using the best method. Verify your choice by opening the Parcels attribute
    table and seeing if you can see or access the linked information from the nearest
    Fire Hydrant. Remember, those with a -1 will not have linked information.'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试使用连接或关联将地块层链接到消防栓层。参考[第3章](cbca2a90-3539-4243-8ca3-0010b6f91584.xhtml)，*将数据链接在一起*，使用连接或关联。确定你应该使用哪个，连接或关联。（提示：表之间的基数是多对一。）然后，使用最佳方法将它们链接起来。通过打开地块属性表并查看是否可以查看或访问最近消防栓的链接信息来验证你的选择。记住，那些带有-1的将没有链接信息。
- en: There’s more…
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多……
- en: The Near tool requires you to have an advanced license to determine which feature
    is the closest. What happens if you only have a basic or standard license? Is
    it possible to determine the closest feature without an advanced license?
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 最近工具要求你必须拥有高级许可证才能确定哪个要素是最接近的。如果你只有基本或标准许可证会发生什么？是否可以在没有高级许可证的情况下确定最近要素？
- en: Yes, you can, although it is not as straightforward and does produce a new feature
    class. You can use the Spatial Join tool. Let’s see how it works. This will assume
    that you have not been able to complete the recipe up to this point because you
    did not have an advanced license.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 是的，你可以这样做，尽管它不是那么直接，并且会生成一个新的要素类。你可以使用空间连接工具。让我们看看它是如何工作的。这假设你还没有完成这个配方，因为你没有高级许可证。
- en: Click on the Analysis tab in the ribbon.
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区单击分析选项卡。
- en: Click on the Spatial Join tool in the Tools group on the Analysis tab. This
    will open the Spatial Join tool in the Geoprocessing pane.
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在分析选项卡的工具组中单击空间连接工具。这将打开地理处理面板中的空间连接工具。
- en: You can also find this tool in the Overlay analysis toolset in the Analysis
    Tools toolbox. The Spatial Join allows you to join layers or feature classes together
    based on many spatial relationships.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以在分析工具箱的叠加分析工具集中找到这个工具。空间连接允许你根据许多空间关系将图层或要素类连接在一起。
- en: Set the Target Features to the Parcels layer using the drop-down arrow and selecting
    it from the list.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将目标要素设置为地块层，并从列表中选择它。
- en: Set the Join Features to Fire Hydrants, also using the drop-down arrow.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将连接要素设置为消防栓，同样使用下拉箭头。
- en: Accept the default Output Feature Class, which should be something similar to
    Parcels_SpatialJoin.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受默认的输出要素类，它应该类似于Parcels_SpatialJoin。
- en: Unlike the Near tool, the Spatial Join tool creates a completely new feature
    class. It does not simply add new fields to an existing layer. This means that
    your original Parcels layer is left unchanged.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 与最近工具不同，空间连接工具创建了一个全新的要素类。它不会简单地向现有图层添加新字段。这意味着你的原始地块层保持不变。
- en: Set the Join Operation to Join one to one using the drop-down arrow. You are
    using the one to one option because only one hydrant should be the closest to
    each parcel.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将连接操作设置为“一对一”。你使用一对一选项是因为每个地块应该只有一个最近的消防栓。
- en: Ensure the Keep All Target Features checkbox is checked. This will ensure the
    resulting output feature class will contain all the parcels, even if they do not
    have a fire hydrant nearby.
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保选中了“保留所有目标要素”复选框。这将确保结果输出要素类将包含所有地块，即使它们附近没有消防栓。
- en: Scroll down to the Match Option and select Closest using the drop-down arrow.
    This is the spatial relationship that ArcGIS Pro will use to join the data. Closest
    is near the bottom of the list. Take the time to see what other options are available.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 滚动到匹配选项，并使用下拉箭头选择最近。这是ArcGIS Pro将用于连接数据的空间关系。最近选项位于列表底部附近。花点时间看看还有哪些其他选项可用。
- en: Set the Search Radius to 300 feet, as we did when using the Near tool. This
    limits the search for the closest fire hydrant to 300 feet.
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将搜索半径设置为300英尺，就像我们使用最近工具时做的那样。这限制了最近消防栓的搜索范围到300英尺。
- en: 'Verify that your Spatial Join tool looks like the following, then click Run:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保你的空间连接工具看起来如下，然后单击运行：
- en: '![](img/06495873-cf42-46ca-a0f8-df522f2b48a7.png)'
  id: totrans-209
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/06495873-cf42-46ca-a0f8-df522f2b48a7.png)'
- en: Depending on your computer, this tool may take a few minutes to run. So don’t
    be worried if it takes some time. This analysis requires a lot of processing to
    complete.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你的计算机，这个工具可能需要几分钟才能运行。所以如果它花了一些时间，请不要担心。这个分析需要大量的处理才能完成。
- en: A new layer should appear in your Contents pane. This new layer is the result
    of the Spatial Join tool. Close the Geoprocessing pane.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 应该会在您的内容面板中显示一个新层。这个新层是空间连接工具的结果。关闭地理处理面板。
- en: Right-click on the new layer that was just added. Select Attribute table from
    the menu that appears.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击刚刚添加的新层。从出现的菜单中选择属性表。
- en: The attribute table contains information from both the Parcels and Fire Hydrants
    layer. Take a moment to review the results.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 属性表包含来自地块和消防栓层的所有信息。花点时间查看结果。
- en: The Join_Count field tells you how many fire hydrants were joined to the parcels.
    Because you chose the Join one to one option, this number should either be a 1
    or a 0\. The Target_FID is the ObjectID for the closest fire hydrant to the parcel.
    The FireHyd_ID, X, Y, Picture, and Picture 2 fields all come from the closest
    fire hydrant to the parcel. The remaining fields all came from the parcels layer.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: Join_Count字段告诉您有多少消防栓被连接到地块上。因为您选择了“一对一”连接选项，这个数字应该是1或0。Target_FID是离地块最近的消防栓的ObjectID。FireHyd_ID、X、Y、Picture和Picture
    2字段都来自离地块最近的消防栓。其余字段都来自地块层。
- en: Close the attribute table when you are done.
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后关闭属性表。
- en: Save your project and close ArcGIS Pro.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的项目并关闭ArcGIS Pro。
- en: So, you now have two ways to calculate the nearest feature in ArcGIS Pro. If
    you have an advanced license you can use either method. If you only have a basic
    or standard, then you must use the Spatial Join. If you can use either, which
    is best? That depends on what you need to do with the resulting data. The Spatial
    Join is best when you are creating data that is intermediate to a large process
    and will not be needed later. Otherwise, it creates yet another layer you must
    maintain. The Near tool does not create more data for you to manage. It only adds
    to an existing layer of information that you are already maintaining.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，您现在有两种方法在ArcGIS Pro中计算最近要素。如果您有高级许可证，您可以使用任何一种方法。如果您只有基本或标准许可证，那么您必须使用空间连接。如果您可以使用任何一种，哪种最好？这取决于您需要用结果数据做什么。空间连接在您创建的数据是大型过程的中介且以后不再需要时最好。否则，它将创建另一个您必须维护的层。邻近工具不会为您创建更多需要管理的数据。它只添加到您已经维护的信息层中。
- en: Calculating how far features are using the Generate Near Table tool
  id: totrans-218
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用“生成邻近表”工具计算要素之间的距离
- en: You now know a couple of different ways to find the closest feature. What if
    you want to calculate the distance from one group of features to another group?
    Not just looking for the closest. The Generate Near Table tool can do this.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在知道了几种不同的方法来找到最近的要素。如果您想计算一组要素到另一组要素的距离怎么办？不仅仅是寻找最近的。生成邻近表工具可以做到这一点。
- en: The Generate Near Table tool will create a new database table that lists how
    far the features in the input are from those in the near feature layer.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: “生成邻近表”工具将创建一个新的数据库表，列出输入要素与邻近要素层中要素的距离。
- en: Like the Near tool, you have the option to include additional fields for location
    and angle as well. This tool also requires an advanced license.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 与邻近工具一样，您还有选择包括位置和角度等额外字段。此工具也需要高级许可证。
- en: The city of Trippville has several water quality monitoring stations that monitor
    the quality of the water in the creeks, streams, and rivers in the city. Recently,
    several of them have been reporting poor or bad water quality.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: Trippville市有几个水质监测站，监测城市溪流、河流中的水质。最近，它们中有几个报告水质差或很糟糕。
- en: It is believed that this might be due to run off from an industrial site in
    the city.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 人们认为这可能是由于城市中工业场所的径流造成的。
- en: In this recipe, you will use the Generate Near Table tool to identify all industrial
    parcels located near the stations reporting bad water quality. These will be the
    ones you need to inspect first to see if they are the cause of the bad water quality.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个菜谱中，您将使用“生成邻近表”工具来识别所有靠近报告水质差的监测站的工业地块。这些将是您首先需要检查以确定它们是否是水质差的原因的地块。
- en: Getting ready
  id: totrans-225
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: You will need to make sure you have an advanced license for ArcGIS Pro to complete
    this recipe. You will not be able to do it with a basic or standard license. If
    you are not sure what license level you have or how to determine it, refer to [Chapter
    1](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml), *ArcGIS Pro Capabilities and Terminology*, and
    the recipe entitled *Determining your ArcGIS Pro license level*. That recipe will
    tell you how to determine your license level.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要确保您拥有ArcGIS Pro的高级许可证才能完成本食谱。您将无法使用基本或标准许可证完成它。如果您不确定您拥有哪种许可证级别或如何确定它，请参阅[第1章](45fda239-2b00-4355-9553-6c6c2b69b0ab.xhtml)，*ArcGIS
    Pro功能与术语*，以及名为*确定您的ArcGIS Pro许可证级别*的食谱。该食谱将告诉您如何确定您的许可证级别。
- en: If you are limited to a basic or standard license, then please read through
    this recipe and then proceed with the *There’s more...* section, which can be
    completed with a lower license level.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您受限于基本或标准许可证，请仔细阅读本食谱，然后继续阅读*更多内容...*部分，这部分可以使用较低级别的许可证完成。
- en: It is also recommended that you complete the other recipes in this chapter before
    starting this one. This will ensure that you have a good basic understanding of
    proximity analysis within ArcGIS Pro.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 还建议您在开始本食谱之前完成本章中的其他食谱。这将确保您对ArcGIS Pro中的邻近分析有一个良好的基本理解。
- en: You will also need to ensure the sample data is installed before you continue.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，您还需要确保已安装样本数据。
- en: How to do it...
  id: totrans-230
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: You will start by launching ArcGIS Pro. Then open the `Near Table.aprx` project
    located in `C:\Student\ArcGISProCookbook\Chapter8\Proximity Analysis` using the
    skills you have learned in past recipes. The project should open with the Trippville
    map. You will start by selecting the industrial-zoned parcels.
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将首先启动ArcGIS Pro。然后使用您在之前的食谱中学到的技能打开位于`C:\Student\ArcGISProCookbook\Chapter8\Proximity
    Analysis`的`Near Table.aprx`项目。项目应使用Trippville地图打开。您将首先选择工业区域的地块。
- en: Activate the Map tab in the ribbon and select the Select by Attributes tool
    in the Selection group. The Select Layer by Attributes tool will open in the Geoprocessing
    pane.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区激活地图选项卡，并在选择组中选择按属性选择工具。按属性选择层工具将在地理处理面板中打开。
- en: Set the Layer Name or Table View to Zoning using the drop-down arrow and selecting
    it from the list.
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头并将层名称或表视图设置为区域，并从列表中选择它。
- en: Ensure the Selection Type is set to New selection.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保选择类型设置为新选择。
- en: Click on the Add Clause button to begin building your query.
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击添加条款按钮开始构建您的查询。
- en: Set the Field to ZONING using the drop-down arrow.
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将字段设置为区域。
- en: Make sure the operator is set to is Equal to.
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保运算符设置为等于。
- en: The value should be set to HI using the drop-down arrow.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将值设置为HI。
- en: 'Verify that your query looks like the following, and click the Add button:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认您的查询看起来像以下截图，然后单击添加按钮：
- en: '![](img/bd6aab47-bbe2-4adc-9f96-e0d0f35cf541.png)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/bd6aab47-bbe2-4adc-9f96-e0d0f35cf541.png)'
- en: Click the Add Clause button again. The clause you just added will only select
    those parcels that are in the **Heavy Industrial** (**HI**) zone. You also need
    to select those that are **Light Industrial** (**LI**).
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次单击添加条款按钮。您刚刚添加的条款将仅选择位于**重工业**（**HI**）区域的地块。您还需要选择那些位于**轻工业**（**LI**）区域的地块。
- en: Where it says And, click the drop-down arrow and select Or.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在说并且的地方，单击下拉箭头并选择或者。
- en: And and Or are clause connectors. They determine how clauses in a query work
    together. If you had left the query with And, then the selection would have to
    meet both clauses. Since a parcel cannot be zoned both heavy and light industrial,
    that means nothing would be selected. Or means it only has to meet the requirements
    of one of the two clauses. So in this case, the query will select all features
    that are zoned either light or heavy industrial.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 并且和或为条款连接词。它们决定了查询中条款如何一起工作。如果您在查询中使用了并且，那么选择必须满足两个条款。由于地块不能同时被划定为重工业和轻工业，这意味着将不会选择任何内容。或者意味着只需满足两个条款中的一个的要求。因此，在这种情况下，查询将选择所有被划定为轻工业或重工业的地块。
- en: 'Set the Field to ZONING, the operator to is Equal to, and the value to LI.
    Then, click Add once you verify it looks like the following screenshot:'
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将字段设置为区域，运算符设置为等于，并将值设置为LI。然后，在确认它看起来像以下截图后，单击添加：
- en: '![](img/beb19731-5e09-4113-aa09-7b55e68ae682.png)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/beb19731-5e09-4113-aa09-7b55e68ae682.png)'
- en: 'Your Select Layer by Attributes tool should now contain two SQL Where clauses.
    This will select all the parcels that are zoned either light or heavy industrial.
    Verify that your tool looks like the following, and click Run:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您的“按属性选择图层”工具现在应包含两个SQL Where子句。这将选择所有被划分为轻工业或重工业的土地地块。请验证您的工具看起来如下，然后点击运行：
- en: '![](img/85c8851b-a75f-428d-81a5-b5fb4f491e36.png)'
  id: totrans-247
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/85c8851b-a75f-428d-81a5-b5fb4f491e36.png)'
- en: When you run the query, approximately 152 parcels should be selected within
    the map. All of them should be zoned either light or heavy industrial. Next, you
    need to select the Water Quality Stations that are reporting bad water quality.
    You will do this with another Select by Attribute query.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 当您运行查询时，地图内应选择大约152个地块。所有这些地块都应被划分为轻工业或重工业。接下来，您需要选择报告水质不良的水质站。您将使用另一个按属性选择查询来完成此操作。
- en: If you closed the Geoprocessing pane with the Select Layer by Attribute tool,
    click on the Select by Attributes button in the Selection group on the Map tab.
    If it is still open, go to the next step.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您关闭了包含“按属性选择图层”工具的地理处理面板，请点击地图标签上的“按属性选择”按钮在“选择”组中。如果它仍然打开，请转到下一步。
- en: In the Geoprocessing pane, ensure the Select Layer by Attribute tool is still
    active.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在地理处理面板中，确保“按属性选择图层”工具仍然处于活动状态。
- en: Set the Layer Name or Table View to Water Quality Station using the drop-down
    arrow. If your old query is still present in the expression, an error may appear
    when you make this change. You can ignore it for now as you will be creating a
    new query soon.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头设置图层名称或表格视图为水质站。如果您的旧查询仍然存在于表达式中，在您进行此更改时可能会出现错误。现在您可以忽略它，因为您很快将创建一个新的查询。
- en: Ensure the Selection type is still set to New selection.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保选择类型仍然设置为“新选择”。
- en: 'Click on the Clear Expression button located below the query expression. It
    looks like a small eraser, as illustrated in the following screenshot:'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于查询表达式下方的“清除表达式”按钮。它看起来像一个小橡皮擦，如图所示：
- en: '![](img/64709735-ee36-438e-9ef9-a112eb6b93d6.png)'
  id: totrans-254
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/64709735-ee36-438e-9ef9-a112eb6b93d6.png)'
- en: 'If you do not see the Add Clause button, click on the Switch to Edit Clause
    Mode button near the top of the expression area and below the word Expression,
    as illustrated in the following:'
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您看不到“添加子句”按钮，请点击表达式区域顶部附近的表达式下方，如图所示，点击“切换到编辑子句模式”按钮：
- en: '![](img/ca458fc3-f987-435c-ba1a-d46b18168815.png)'
  id: totrans-256
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ca458fc3-f987-435c-ba1a-d46b18168815.png)'
- en: Click on the Add Clause button.
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“添加子句”按钮。
- en: Set the Field to Current Status, the operator to is Equal to, and the value
    to Bad, all using the drop-down arrows.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将字段设置为当前状态，运算符设置为等于，值设置为不良，所有这些均使用下拉箭头。
- en: 'Verify that your expression looks like the following, then click the Add button:'
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证您的表达式看起来如下，然后点击“添加”按钮：
- en: '![](img/58e8481d-5fb9-4ea7-a409-28d15e24373c.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/58e8481d-5fb9-4ea7-a409-28d15e24373c.png)'
- en: 'Verify that your Select Layer by Attribute tool looks like the following, and
    then click Run:'
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证您的“按属性选择图层”工具看起来如下，然后点击运行：
- en: '![](img/c92c7856-c4f1-4279-94b2-62924269ab34.png)'
  id: totrans-262
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c92c7856-c4f1-4279-94b2-62924269ab34.png)'
- en: In the Contents pane, click on the List by Selection button. It is the third
    one from the left. You should now have approximately two Water Quality Stations
    and 151 Zoning polygons selected.
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容面板中，点击“按选择列表”按钮。它是从左数第三个。现在您应该有大约两个水质站和151个分区多边形被选中。
- en: Now that you have selected the appropriately zoned parcels and water quality
    stations, you need to create the table that lists which of the selected parcels
    is near the selected water quality stations. You will limit your search to a 1,500
    feet radius around the water quality stations.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经选择了适当的分区地块和水质站，您需要创建一个表格，列出所选地块中哪些靠近所选的水质站。您将搜索范围限制在水质站周围1,500英尺的半径内。
- en: Click on the Analysis tab in the ribbon.
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击工具栏上的“分析”标签。
- en: Click on the Generate Near Table tool in the Tools group. If you don’t see the
    tool, click on the arrows located on the right side of the group to navigate up
    and down in the list of tools in the group.
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在工具组中点击“生成邻近表格”工具。如果您看不到该工具，请点击组右侧的箭头以在工具列表中上下导航。
- en: The Generate Near Table tool will appear in the Geoprocessing pane. Set the
    Input Features to Water Quality Station using the drop-down arrow.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: “生成邻近表格”工具将出现在地理处理面板中。使用下拉箭头将输入要素设置为水质站。
- en: Set the Near Features to Zoning using the drop-down arrow on the far-right side.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用最右侧的下拉箭头设置邻近要素为分区。
- en: Accept the default value ArcGIS Pro generates for the Output Table.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受ArcGIS Pro生成的默认输出表值。
- en: This tool is creating a new table. By default, the table is being stored in
    the Project Geodatabase. This happens to be the Proximity Analysis geodatabase.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 此工具正在创建一个新的表格。默认情况下，表格正在存储在项目地理数据库中。这恰好是邻近分析地理数据库。
- en: Set the Search Radius to 1,500 feet by typing `1500` and verifying the units.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将搜索半径设置为1,500英尺，通过输入`1500`并验证单位来实现。
- en: Uncheck the Find only closest feature if it is checked. You want to find all
    industrial zoned-parcels within 1500 feet of the water quality monitoring stations
    that are reporting bad quality, not just the closest one. Leave the maximum number
    of closest matches to 0\. This will ensure all matches within 1500 feet are returned.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果已勾选，取消勾选“仅查找最近特征”。你想要找到距离水质监测站1500英尺范围内的所有工业区域地块，而不仅仅是最近的那个。将最大最近匹配数保留为0。这将确保返回所有1500英尺范围内的匹配项。
- en: The Method should be set to Planar.
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 方法应设置为平面。
- en: 'Verify that your Generate Near Table tool looks like the following, and click
    Run:'
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认你的生成邻近表工具看起来如下，然后点击运行：
- en: '![](img/a3972452-82dd-40bf-b5f6-d26c8e5d8d71.png)'
  id: totrans-275
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/a3972452-82dd-40bf-b5f6-d26c8e5d8d71.png)'
- en: When the tool finishes, a new standalone table should appear in your Contents
    pane. This table is the results of the tool you just ran. Let’s take a look at
    the results.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 当工具完成时，你的内容面板中应该会出现一个新的独立表格。这个表格是你刚刚运行的工具的结果。让我们看看结果。
- en: Close the Geoprocessing pane.
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭地理处理面板。
- en: Right-click on the new table you just created, which was added to the Contents
    pane. Select Open from the menu that appears.
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击你刚刚创建的新表格，该表格已添加到内容面板中。从出现的菜单中选择打开。
- en: As we have mentioned before, geoprocessing tools, such as the Create Near Table
    tool, only use selected features automatically. Since you selected specific features
    in the Water Quality Stations and Zoning layers, this tool only used those selected
    features to run its analysis.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们之前提到的，地理处理工具，如创建邻近表工具，自动仅使用所选特征。由于你在水质站和分区图层中选择了特定特征，因此此工具仅使用那些选定的特征来运行其分析。
- en: Review the newly created table.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看新创建的表格。
- en: In the new table, you should see several fields. The IN_FID field contains the
    object id for the Water Quality Station. You should see a value of 3 or 4 which
    matches the object id for those stations in the attribute table for the Water
    Quality Stations that have a current status of Bad. The Near_FID field contains
    the object id of the nearby industrial-zoned parcel. Each water quality station
    should be paired with multiple parcels. The Near_Rank field identifies which is
    closest to each water quality station. This helps you prioritize which parcels
    you should begin with.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 在新表格中，你应该会看到几个字段。IN_FID字段包含水质站的对象ID。你应该看到一个值为3或4，这与水质站属性表中当前状态为“差”的站点的对象ID相匹配。Near_FID字段包含附近工业区域地块的对象ID。每个水质站应该与多个地块配对。Near_Rank字段标识哪个是每个水质站最近的。这有助于你确定应该从哪个地块开始优先处理。
- en: Close the table and save your project.
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭表格并保存你的项目。
- en: There’s more…
  id: totrans-283
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'So, can you do this without an advanced license of ArcGIS Pro? The answer is
    yes. You can use the Spatial Join tool to accomplish something very similar. However,
    the result is not a table. It is a new feature class that will contain many overlapping
    features. If you just want a table, you can then export the records from the results
    of the Spatial Join tool to a new table. Here is how all that works:'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，你可以在没有ArcGIS Pro高级许可证的情况下做到这一点吗？答案是肯定的。你可以使用空间连接工具来完成类似的事情。然而，结果不是一个表格。它是一个包含许多重叠特征的新要素类。如果你只需要一个表格，你可以将空间连接工具的结果导出到一个新的表格中。以下是所有这些工作的方法：
- en: If you still have the features selected from the Water Quality Station and Zoning
    layers, proceed to the next step. If you do not, repeat *steps 2-24* from the
    recipe. You should have two Water Quality Stations and 151 Zoning polygons selected.
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你仍然选择了水质站和分区图层中的特征，请继续下一步。如果没有，请从食谱中重复步骤2-24。你应该有两个水质站和151个分区多边形被选中。
- en: Click on the Analysis tab in the ribbon. Then select the Spatial Join tool in
    the Tools group. This will open the tool in the Geoprocessing window.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在功能区中点击分析选项卡。然后在工具组中选择空间连接工具。这将在地理处理窗口中打开工具。
- en: Set the Target Features to Water Quality Station using the drop-down arrow.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将目标要素设置为水质站。
- en: Set the Join Features to Zoning using the drop-down arrow.
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将连接要素设置为分区。
- en: Click the Browse button to set the Output Feature Class.
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击浏览按钮设置输出要素类。
- en: Select databases from the panel on the left. Then double-click on the Proximity
    Analysis.gdb geodatabase in the panel on the right.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧面板中选择数据库。然后在右侧面板中双击Proximity Analysis.gdb地理数据库。
- en: Type `WaterQual_IndustZoned_SpatialJoin` into the Name and click Save.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在名称中输入`WaterQual_IndustZoned_SpatialJoin`并点击保存。
- en: Set the Join Operation to Join one to many. This will ensure the result has
    all the industrial-zoned parcels within 1,500 feet of the water quality stations
    reporting bad quality.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将连接操作设置为“一对一连接”。这将确保结果包含在水质站1,500英尺范围内的所有工业区域地块。
- en: Set the Match Option to Within a distance using the drop-down arrow.
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉箭头将匹配选项设置为在距离内。
- en: Set the Search Radius to 1,500 feet.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将搜索半径设置为1,500英尺。
- en: 'Verify that your Spatial Join tool looks like the following, and click Run:'
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认您的空间连接工具看起来如下，然后点击运行：
- en: '![](img/ed89edfa-f094-4328-b51f-ae9ce3acb816.png)'
  id: totrans-296
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ed89edfa-f094-4328-b51f-ae9ce3acb816.png)'
- en: A new layer will appear in your Contents pane. This is the results of the Spatial
    Join tool. Close the Geoprocessing pane.
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的内容面板中会出现一个新的图层。这是空间连接工具的结果。关闭地理处理面板。
- en: Select the List by Draw Order in the Contents pane. It is the first button at
    the top-left of the pane.
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容面板中选择按绘制顺序选择的列表。这是面板左上角的第一个按钮。
- en: Click on the Map tab in the ribbon. Then click on the Clear button in the Selection
    group. You should now be able to see what looks like two new features that overlap
    the two Water Quality Stations that had bad water quality. Time to verify how
    many features are actually in those locations.
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击工具栏上的地图选项卡。然后点击选择组中的清除按钮。现在您应该能够看到看起来像两个新特征，它们重叠了水质较差的两个水质站。现在是时候验证这些位置实际有多少个特征了。
- en: Right-click on the new layer and select Zoom to Layer.
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击新图层并选择缩放到图层。
- en: Select the new layer in the Contents pane.
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在内容面板中选择新图层。
- en: Click on the drop-down arrow located below the Explore tool and select Selected
    in Contents. Now click on one of the two new features. The information popup should
    appear when you click on one of the features.
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于探索工具下方的下拉箭头并选择内容中的所选内容。现在点击两个新特征中的一个。当您点击一个特征时，应该会出现信息弹出窗口。
- en: 'Look at the lower-left corner of the information popup to see how many features
    are actually in the location you selected. If you clicked on the northernmost
    location, you should have about 30 features. If you clicked on the southernmost
    location, you should have about 14 features. This is illustrated in the following:'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看信息弹出窗口的左下角，以查看所选位置实际有多少个特征。如果您点击了最北端的位置，您应该有大约30个特征。如果您点击了最南端的位置，您应该有大约14个特征。以下是一个示例：
- en: '![](img/79e98985-70e3-4333-b411-4e8d7636d92f.png)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/79e98985-70e3-4333-b411-4e8d7636d92f.png)'
- en: Right-click on the new layer and select Attribute Table to look at the resulting
    attributes. Review the table and see if you can identify what the fields mean
    and where they came from.
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击新图层并选择属性表来查看结果属性。审查表格，看看您是否能识别字段的意义以及它们来自哪里。
- en: Close the attribute table and save your project.
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭属性表并保存您的项目。
- en: Close ArcGIS Pro.
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭ArcGIS Pro。
- en: As you can see, you have created another new feature class. If you wanted to
    export this as a standalone table, you could right-click on the layer and go to
    Data. Then select Export Table. If you wanted to export it to an Excel spreadsheet
    you could use the Table to Excel tool you have used in past recipes.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，您已创建了另一个新的要素类。如果您想将其导出为独立的表格，可以右键单击图层并转到数据。然后选择导出表格。如果您想将其导出到Excel电子表格，可以使用您在过去配方中使用的表格到Excel工具。
