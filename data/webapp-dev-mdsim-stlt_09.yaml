- en: '9'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '9'
- en: Optimizing Streamlit Web App UX with Customization and UI Features
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过自定义和UI功能优化Streamlit网页应用的用户体验
- en: 'In [*Chapter 8*](B21147_08.xhtml#_idTextAnchor091), we started the development
    of a new web application, *Covid-19 Detection Tool*. We have already created the
    virtual environment and the application skeleton, together with some basic decorations.
    It’s time now to focus on the three main sections of our new tool: **Image Enhancement**,
    **Diagnosis**, and **Disclaimer** **and Info**.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第8章*](B21147_08.xhtml#_idTextAnchor091)中，我们开始开发一个新的网页应用——*Covid-19 检测工具*。我们已经创建了虚拟环境和应用骨架，并做了一些基本的装饰。现在是时候集中精力于我们新工具的三个主要部分：**图像增强**、**诊断**和**免责声明**
    **及信息**。
- en: '**Contrast** and **Brightness** are UI elements that allow users to adjust
    the contrast and brightness of images. These features can help improve the visibility
    and clarity of the displayed image. Sliders and radio buttons are widgets that
    allow users to interact with and manipulate data within the web app. Sliders allow
    users to set a value within a range by dragging a slider button, while radio buttons
    allow users to select a single option from a group of options. Overall, contrast,
    brightness, sliders, and radio buttons are powerful UI features that enable us
    to create very engaging and interactive web applications for COVID-19 detection.
    In the case of applications that make predictions or forecasts, such as the one
    we are building together, it’s always very important to add a *Disclaimer* in
    order to not provide any kind of wrong message to the users.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '**对比度**和**亮度**是UI元素，允许用户调整图像的对比度和亮度。这些功能有助于改善显示图像的可见性和清晰度。滑块和单选按钮是小部件，允许用户与网页应用中的数据互动和操作。滑块允许用户通过拖动滑块按钮设置一个范围内的值，而单选按钮允许用户从一组选项中选择一个选项。总体而言，对比度、亮度、滑块和单选按钮是强大的UI功能，使我们能够创建非常吸引人和互动性强的网页应用，适用于COVID-19检测。在像我们正在一起构建的这种进行预测或预测的应用中，添加*免责声明*非常重要，以免向用户传达任何错误信息。'
- en: By developing these new features, we have the chance to learn how to use the
    more advanced techniques and skills of Streamlit.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 通过开发这些新功能，我们有机会学习如何使用Streamlit的更高级技巧和技能。
- en: 'In this chapter, we’re going to cover the following main topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们将涵盖以下主要内容：
- en: Dealing with more advanced web app features
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理更高级的网页应用功能
- en: Adding the **Image Enhancement** section using the Pillow library
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Pillow库添加**图像增强**部分
- en: Adding the **Disclaimer and** **Info** section
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加**免责声明**和**信息**部分
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'In this chapter, we’ll use the following libraries, packages, and tools:'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本章我们将使用以下库、包和工具：
- en: Sublime Text
  id: totrans-11
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Sublime Text
- en: Python 3
  id: totrans-12
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 3
- en: '`pipenv`'
  id: totrans-13
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pipenv`'
- en: Streamlit
  id: totrans-14
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Streamlit
- en: Pillow
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pillow
- en: '`numpy`'
  id: totrans-16
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`numpy`'
- en: 'The code in the chapter can be accessed through the following GitHub link:
    [https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/f1bd9c354072092c268f27621680c858ce93c823/Chapter09](https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/f1bd9c354072092c268f27621680c858ce93c823/Chapter09)'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本章的代码可以通过以下GitHub链接访问：[https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/f1bd9c354072092c268f27621680c858ce93c823/Chapter09](https://github.com/PacktPublishing/Web-App-Development-Made-Simple-with-Streamlit/tree/f1bd9c354072092c268f27621680c858ce93c823/Chapter09)
- en: Dealing with more advanced web app features
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 处理更高级的网页应用功能
- en: 'In [*Chapter 8*](B21147_08.xhtml#_idTextAnchor091), we stopped our development
    at the point shown in the following figure:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第8章*](B21147_08.xhtml#_idTextAnchor091)中，我们的开发停留在下图所示的位置：
- en: '![Figure 9.1: Chapter09 starting point](img/B21147_09_01.jpg)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.1：第9章起始点](img/B21147_09_01.jpg)'
- en: 'Figure 9.1: Chapter09 starting point'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.1：第9章起始点
- en: 'So, let’s start working on the menu’s three voices: **Image Enhancement**,
    **Diagnosis**, and **Disclaimer and Info**. Before that, since we are entering
    some advanced features of Streamlit and considering that new versions are released
    quite often, it’s very important to remember how Streamlit’s official documentation
    ([https://docs.streamlit.io/](https://docs.streamlit.io/)) is always the best
    place to get detailed info about all the available components and APIs; for example,
    in case you have any doubts about, let’s say, the **Image** widget, you can just
    search for it in the **API reference** menu on the left side of the official documentation
    page or directly in the search bar in the top-right corner and check out all the
    results.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，让我们开始处理菜单的三个选项：**图像增强**、**诊断**和**免责声明及信息**。在此之前，既然我们要进入一些 Streamlit 的高级功能，并且考虑到新版本更新频繁，非常重要的一点是记住，Streamlit
    的官方文档（[https://docs.streamlit.io/](https://docs.streamlit.io/)）永远是获取所有可用组件和 API
    详细信息的最佳地方；例如，如果你对 **图像** 小部件有任何疑问，你只需在官方文档页面左侧的 **API 参考** 菜单中搜索，或者直接在右上角的搜索框中搜索，查看所有相关结果。
- en: '![Figure 9.2: Streamlit’s official documentation](img/B21147_09_02.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.2：Streamlit 的官方文档](img/B21147_09_02.jpg)'
- en: 'Figure 9.2: Streamlit’s official documentation'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.2：Streamlit 的官方文档
- en: Let’s open our code in Sublime Text and let’s continue with our development
    since, at the moment, we have only an empty menu.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在 Sublime Text 中打开代码，继续我们的开发，因为此时我们只有一个空菜单。
- en: 'We have already defined a list of voices for our menu, which is called `activities`,
    and an `if` clause that checks which of these voices has been selected and put
    in a variable named `choice`; our job now is to write the business logic for each
    one of these three possibilities:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经定义了一个名为 `activities` 的菜单选项列表，并定义了一个 `if` 语句来检查这些选项中哪个被选中，并将其存入名为 `choice`
    的变量；现在我们的任务是为这三种可能性中的每一种编写业务逻辑：
- en: '![Figure 9.3: The points where the business logic has to be inserted](img/B21147_09_03.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.3：需要插入业务逻辑的点](img/B21147_09_03.jpg)'
- en: 'Figure 9.3: The points where the business logic has to be inserted'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.3：需要插入业务逻辑的点
- en: 'We know very well that `pass` is just a placeholder, so we can start our coding
    from the first one of the menu voices: **Image Enhancement**.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我们非常清楚 `pass` 只是一个占位符，因此我们可以从菜单选项中的第一个开始编码：**图像增强**。
- en: Images can be enhanced in many ways – for example, by changing their brightness
    or contrast. So we can use some radio buttons in the sidebar to give the user
    the faculty to choose what kind of enhancement they want to perform.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 图像可以通过多种方式增强——例如，通过调整亮度或对比度。所以我们可以在侧边栏使用一些单选按钮，让用户选择他们想要执行的增强类型。
- en: 'The radio buttons, as we should know, have a couple of mandatory arguments:
    a label (a title) and a list of all the items that can be selected:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们应该知道的，单选按钮有几个必填的参数：一个标签（标题）和一个可选择的项目列表：
- en: '![Figure 9.4: Radio button for Image Enhancement](img/B21147_09_04.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.4：图像增强的单选按钮](img/B21147_09_04.jpg)'
- en: 'Figure 9.4: Radio button for Image Enhancement'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.4：图像增强的单选按钮
- en: 'As usual, the list of items in the radio button contains all the features we
    want to show on the screen:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 像往常一样，单选按钮中的项目列表包含我们想在屏幕上展示的所有功能：
- en: '![Figure 9.5: Radio button in the browser](img/B21147_09_05.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.5：浏览器中的单选按钮](img/B21147_09_05.jpg)'
- en: 'Figure 9.5: Radio button in the browser'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.5：浏览器中的单选按钮
- en: 'It’s quite clear that now we need some `if` clauses. This is because if the
    `enhance_type` variable is `Original`, we need to do something; if it’s `Contrast`,
    we need to do something different, and if it’s `Brightness`, we need to do something
    else:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 很明显，现在我们需要一些 `if` 语句。因为如果 `enhance_type` 变量是 `原始`，我们需要做某些事情；如果是 `对比度`，我们需要做不同的事情；如果是
    `亮度`，我们还需要做其他事情：
- en: '![Figure 9.6: If clauses for “Image Enhancement”](img/B21147_09_06.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.6：“图像增强”的 if 语句](img/B21147_09_06.jpg)'
- en: 'Figure 9.6: If clauses for “Image Enhancement”'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.6：“图像增强”的 if 语句
- en: As already said, `pass` is just a placeholder, so let’s take care of these `if`
    clauses one by one. The first one is `Contrast`.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，`pass` 只是一个占位符，因此让我们逐个处理这些 `if` 语句。第一个是 `对比度`。
- en: Adding the Image Enhancement section using the Pillow library
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Pillow 库添加图像增强部分
- en: Among the libraries we imported at the beginning, there is `ImageEnhance` that
    can actually take care of all the features related to any kind of image enhancement
    for us. This means that we can use the `Contrast` and `Brightness` methods already
    included in Pillow’s `ImageEnhance` module because all the functions we need,
    and many others, have been already implemented for us.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们最初导入的库中，`ImageEnhance` 实际上负责所有与图像增强相关的功能。这意味着我们可以使用 Pillow 的 `ImageEnhance`
    模块中已包含的 `Contrast` 和 `Brightness` 方法，因为我们所需的所有功能以及许多其他功能都已经为我们实现了。
- en: Pillow, or **Python Imaging Library**, is a very powerful library and it can
    do more than the things we are showing in this book. For this reason, we suggest
    taking a look at its official page on PyPI ([https://pypi.org/project/Pillow/](https://pypi.org/project/Pillow/))
    and reading all the documentation contained there.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: Pillow，或称 **Python Imaging Library**，是一个非常强大的库，它能够做的不仅仅是本书中展示的这些功能。基于这个原因，我们建议你浏览其在
    PyPI 上的官方页面（[https://pypi.org/project/Pillow/](https://pypi.org/project/Pillow/)），并阅读那里包含的所有文档。
- en: '![Figure 9.7: The Pillow page on PyPI](img/B21147_09_07.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.7：PyPI 上的 Pillow 页面](img/B21147_09_07.jpg)'
- en: 'Figure 9.7: The Pillow page on PyPI'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.7：PyPI 上的 Pillow 页面
- en: Let’s start with `Contrast`.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从 `Contrast` 开始。
- en: Contrast
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对比度
- en: 'As shown in *Figure 9**.8*, managing `Contrast` with Pillow’s methods is really
    very simple:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如 *图 9.8* 所示，使用 Pillow 的方法管理 `Contrast` 实际上非常简单：
- en: '![Figure 9.8: The Contrast feature](img/B21147_09_08.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.8：对比度功能](img/B21147_09_08.jpg)'
- en: 'Figure 9.8: The Contrast feature'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.8：对比度功能
- en: In the `if` case immediately after the subheader, we start by adding a *slider*.
    The values on this slider go from `0.5` to `5.0`; you can play with this range
    to check the different behaviors.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在子标题后的 `if` 语句中，我们首先添加了一个 *滑块*。这个滑块的值范围从 `0.5` 到 `5.0`；你可以调整这个范围，观察不同的效果。
- en: After adding the slider, we need to instantiate an `ImageEnhance.Contrast` object
    using the image we opened previously (`our_image`) with `file_uploader`. Then,
    we apply the `enhance` method to this image with the value selected by using the
    slider.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 添加滑块后，我们需要使用之前通过 `file_uploader` 打开的图像（`our_image`）实例化一个 `ImageEnhance.Contrast`
    对象。然后，使用滑块选择的值应用 `enhance` 方法到这张图像上。
- en: Finally, the result is printed on the screen thanks to `st.image`, one of Streamlit’s
    classic widgets.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 最终，结果通过 `st.image` 打印到屏幕上，这是 Streamlit 的经典控件之一。
- en: 'This is the result from the browser’s perspective:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 这是从浏览器的角度看到的结果：
- en: '![Figure 9.9: The Contrast feature in action](img/B21147_09_09.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.9：对比度功能演示](img/B21147_09_09.jpg)'
- en: 'Figure 9.9: The Contrast feature in action'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.9：对比度功能演示
- en: It gives a very nice result, and managing this kind of image enhancement with
    Pillow is really very easy.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 结果非常好，并且使用 Pillow 管理这种图像增强非常简单。
- en: As we just saw, Pillow contains the `Contrast` function out of the box. So,
    it’s quite obvious to imagine that it contains a `Brightness` function as well.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们刚才看到的，Pillow 默认包含了 `Contrast` 功能。因此，可以想象它也包含了 `Brightness` 功能。
- en: Brightness
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 亮度
- en: 'In fact, the code we need to write for the `Brightness` feature is more or
    less the same as that for the `Contrast` feature. We can type the following:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 事实上，针对 `Brightness` 功能所需编写的代码与 `Contrast` 功能差不多。我们可以输入以下内容：
- en: '![Figure 9.10: The Brightness feature](img/B21147_09_10.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.10：亮度功能](img/B21147_09_10.jpg)'
- en: 'Figure 9.10: The Brightness feature'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.10：亮度功能
- en: The preceding code is exactly the same as the code we wrote for `Contrast`,
    but this time, we are using the `ImageEnhance.Brightness` method instead of the
    `ImageEnhance.Contrast` method.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的代码与我们为 `Contrast` 编写的代码完全相同，不过这次我们使用了 `ImageEnhance.Brightness` 方法，而不是 `ImageEnhance.Contrast`
    方法。
- en: So, once again, we set a value for the brightness using a slider, create an
    `enhancer` object from the image opened thanks to `file_uploader`, apply the brightness
    to this image, and print the result on the screen.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，再一次地，我们通过滑块设置亮度值，创建一个从 `file_uploader` 打开的图像中获取的 `enhancer` 对象，应用亮度到这张图像，并将结果打印到屏幕上。
- en: 'This is the result in our web application:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我们在网页应用中的结果：
- en: '![Figure 9.11: The Brightness feature in action](img/B21147_09_11.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.11：亮度功能演示](img/B21147_09_11.jpg)'
- en: 'Figure 9.11: The Brightness feature in action'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.11：亮度功能演示
- en: In both cases, `Brightness` and `Contrast`, you can change the strength of the
    effect by selecting different values using the slider, and if you don’t like the
    outcome, you can always change the range that we set as `0.5` to `5.0`.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 在`亮度`和`对比度`的两种情况下，你可以通过使用滑块选择不同的值来改变效果的强度，如果你不喜欢结果，也可以随时更改我们设置的范围，从`0.5`到`5.0`。
- en: The final option we can select using the radio button is `Original`.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过选择单选按钮来选择的最后一个选项是`Original`。
- en: Original
  id: totrans-70
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 原始
- en: 'In the case of the `file_uploader` and show it on the screen. The code is as
    follows:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在`file_uploader`的情况下并将其显示在屏幕上。代码如下：
- en: '![Figure 9.12: The Original Image feature](img/B21147_09_12.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.12：原始图像功能](img/B21147_09_12.jpg)'
- en: 'Figure 9.12: The Original Image feature'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.12：原始图像功能
- en: If you want, you can try to set the `use_column_width` argument in `st.image`
    to `False` and check the result, or, if you prefer, you can specify a width size
    different from `600`.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你愿意，你可以尝试将`st.image`中的`use_column_width`参数设置为`False`并查看结果，或者如果你更喜欢的话，可以指定一个不同于`600`的宽度。
- en: 'This is the effect in the browser:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 这是浏览器中的效果：
- en: '![Figure 9.13: The Original Image feature in action](img/B21147_09_13.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.13：原始图像功能的实际效果](img/B21147_09_13.jpg)'
- en: 'Figure 9.13: The Original Image feature in action'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.13：原始图像功能的实际效果
- en: With the **Original** image feature, we can consider the **Image Enhancement**
    voice of the menu completed. Thanks to the Pillow library, we could implement
    all features of this voice in a very smooth way. This is one of the best aspects
    of Python, and you can always find a nice package that already has all the features
    you need!
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 使用**原始**图像功能后，我们可以认为菜单中的**图像增强**选项已完成。感谢 Pillow 库，我们可以非常顺畅地实现该选项的所有功能。这是 Python
    最棒的地方之一，你总能找到一个已经具备所有所需功能的优秀库！
- en: Let’s move on to the **Disclaimer and Info** section. The **Diagnosis** section
    is a little bit more complex, so we will leave that for the next chapter.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们继续看**免责声明和信息**部分。**诊断**部分稍微复杂一些，我们将在下一章讨论它。
- en: Adding the Disclaimer and Info section
  id: totrans-80
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加免责声明和信息部分
- en: Dealing with applications that provide predictions, especially health predictions,
    can be a little bit dangerous, so a good practice is to write down a disclaimer
    to avoid any kind of misunderstanding.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 处理提供预测的应用程序，特别是健康预测，可能有些危险，因此一个好的做法是写下免责声明，以避免任何误解。
- en: The disclaimer of this web application, named **Disclaimer and Info**, also
    serves the function of providing some information about the model used to predict
    COVID-19 from images and about the dataset that was used to train that model.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 该网页应用的免责声明，名为**免责声明和信息**，还起到提供一些关于用于从图像预测 COVID-19 的模型以及训练该模型所用数据集的信息的作用。
- en: In short, the main purpose of the disclaimer is to clarify that the application
    is just a demo of Streamlit’s capabilities and doesn’t have any value from a medical
    point of view. Additionally, the disclaimer also contains some information about
    the AI model used to make the predictions.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 简而言之，免责声明的主要目的是澄清该应用程序只是 Streamlit 功能的一个示范，从医学角度来看没有任何价值。此外，免责声明还包含了一些关于用于进行预测的
    AI 模型的信息。
- en: In [*Chapter 10*](B21147_10.xhtml#_idTextAnchor109), we will see that every
    time we need to make predictions, a good strategy is to use a machine learning
    model.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第 10 章*](B21147_10.xhtml#_idTextAnchor109)中，我们将看到每当我们需要进行预测时，一个好的策略是使用机器学习模型。
- en: In particular, the model used in our web application is a so-called `tensorflow`
    and using a dataset comprising 206 images of affected people and 206 images of
    healthy individuals.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 特别地，我们的网页应用中使用的模型是所谓的`tensorflow`，并且使用了一个包含 206 张受影响人员和 206 张健康个体图像的数据集。
- en: Additional information
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 附加信息
- en: CNNs are particular neural network architectures that perform very well with
    problems related to images, such as image classification. What we want to do with
    this application is precisely the classification of images, specifically X-ray
    images of the chest, to discover whether or not they show cases of COVID-19\.
    Discovering whether or not a given image represents a COVID-19 case is a classic
    problem of binary classification, which means understanding whether something
    is true or false. CNNs are very good classifiers for this type of task. However,
    for better performance, they need a large number of images, so a big dataset is
    required to train these models.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: CNN是特别的神经网络架构，在图像相关问题（如图像分类）中表现非常好。我们在这个应用中要做的，正是图像分类，特别是胸部X光图像，来发现它们是否显示COVID-19病例。确定给定图像是否代表COVID-19病例是一个典型的二分类问题，这意味着判断某件事情是否为真或假。CNN在这种任务中是非常好的分类器。然而，为了更好的性能，它们需要大量的图像，因此需要一个大的数据集来训练这些模型。
- en: The CNN we used performs quite well, even if it was trained with a limited number
    of images. The model performs well when classifying images representing COVID-19
    cases and healthy individuals, but its predictive performance is poor for images
    representing SARS cases (SARS is rather close to Covid-19).
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用的CNN表现相当不错，即使它是用有限数量的图像训练的。该模型在分类COVID-19病例和健康个体的图像时表现良好，但在分类SARS病例的图像时预测性能较差（SARS与COVID-19相似）。
- en: 'The disclaimer has to be inserted in the `else` part of the `if` clause related
    to the menu, as shown in the following figure:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 免责声明必须插入到与菜单相关的`if`语句的`else`部分，如下图所示：
- en: '![Figure 9.14: The insertion point of the disclaimer](img/B21147_09_14.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.14：免责声明的插入点](img/B21147_09_14.jpg)'
- en: 'Figure 9.14: The insertion point of the disclaimer'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.14：免责声明的插入点
- en: We can decide to write this disclaimer in many ways, but a very easy one is
    just to use some `st.write` objects. In this way, we can have very clear, well-presented,
    formatted text, and we can add links to some websites that can be used as references.
    We are using the **Markdown** syntax, so it’s possible to use bold, italics, bullet
    points, lists, and so on.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以选择以多种方式编写这个免责声明，但最简单的一种方式就是使用一些`st.write`对象。通过这种方式，我们可以得到非常清晰、格式良好的文本，并且可以添加指向一些可以作为参考的网站链接。我们使用的是**Markdown**语法，因此可以使用粗体、斜体、项目符号、列表等。
- en: Note
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The websites linked in the text are real websites that inspired the author to
    create this tool during the first COVID-19 lockdown. If you want to check them
    out, they are quite interesting!
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 文本中链接的网站是真实的，它们启发作者在第一次COVID-19封锁期间创建了这个工具。如果你想了解它们，它们非常有趣！
- en: 'Here is the code we can use to add the disclaimer:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我们可以用来添加免责声明的代码：
- en: '![Figure 9.15: The code used for the Disclaimer section](img/B21147_09_15.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.15：免责声明部分使用的代码](img/B21147_09_15.jpg)'
- en: 'Figure 9.15: The code used for the Disclaimer section'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.15：免责声明部分使用的代码
- en: Actually, this code is just a proposal. You don’t need to copy it in your version
    of the *COVID-19 Detection Tool* web application. You can modify it as you like,
    and if you decide to use another model to make the predictions (nowadays, it’s
    quite easy to find several pretrained models online, for example, [https://ieeexplore.ieee.org/document/9340145](https://ieeexplore.ieee.org/document/9340145)
    or [https://www.nature.com/articles/s41598-023-33685-z](https://www.nature.com/articles/s41598-023-33685-z)),
    you can insert the information about your own version and your new model, together
    with an explanation about its performances and accuracy.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，这段代码只是一个提议。你不需要在你版本的*COVID-19检测工具*网页应用中复制它。你可以根据自己的需求进行修改，如果你决定使用其他模型进行预测（如今，在线可以轻松找到多个预训练的模型，例如，[https://ieeexplore.ieee.org/document/9340145](https://ieeexplore.ieee.org/document/9340145)
    或 [https://www.nature.com/articles/s41598-023-33685-z](https://www.nature.com/articles/s41598-023-33685-z)），你可以插入关于你自己版本和新模型的信息，并附上其性能和准确度的解释。
- en: 'Here’s the **Disclaimer** section for my version of the app:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我版本应用的**免责声明**部分：
- en: "![Figure 9.16: The \uFEFFdisclaimer in the browser](img/B21147_09_16.jpg)"
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.16：浏览器中的免责声明](img/B21147_09_16.jpg)'
- en: 'Figure 9.16: The disclaimer in the browser'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.16：浏览器中的免责声明
- en: The result is very clean and neat because we used headers, bold, lists with
    bullet points, and hyperlinks to external websites.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 结果非常干净整洁，因为我们使用了标题、粗体、带有项目符号的列表和指向外部网站的超链接。
- en: 'As usual, let’s print the code we have implemented up to now in order to be
    sure that everything for our web application is written correctly without mistakes:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 像往常一样，让我们打印出到目前为止我们实现的代码，以确保我们的 Web 应用程序的所有内容都已正确编写且没有错误：
- en: '![Figure 9.17: The first part of the code](img/B21147_09_17.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.17：代码的第一部分](img/B21147_09_17.jpg)'
- en: 'Figure 9.17: The first part of the code'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.17：代码的第一部分
- en: To recap, in *Figure 9**.17*, we have the first part of the code, where we import
    all the relevant libraries, set up the page title and icon, define the `main`
    function, and inside it, we put an image in the sidebar together with the menu
    of the app.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 回顾一下，在*图 9.17*中，我们有代码的第一部分，在这一部分中，我们导入了所有相关的库，设置了页面标题和图标，定义了`main`函数，并在其中将图像放入侧边栏，同时添加了应用程序的菜单。
- en: 'This menu contains three voices: **Image Enhancement**, **Diagnosis**, and
    **Disclaimer and Info**. Inside **Image Enhancement**, we can select between three
    options: **Original**, **Contrast**, and **Brightness**.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 这个菜单包含了三个功能：**图像增强**、**诊断**和**免责声明及信息**。在**图像增强**部分，我们可以选择三种选项：**原始**、**对比度**和**亮度**。
- en: '![Figure 9.18: The second part of the code](img/B21147_09_18.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.18：代码的第二部分](img/B21147_09_18.jpg)'
- en: 'Figure 9.18: The second part of the code'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.18：代码的第二部分
- en: In the second part of the code, shown in *Figure 9**.18*, we complete the **Disclaimer
    and Info** and **About the Author** sections, while we leave the **Diagnosis**
    part blank for now.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在代码的第二部分，如*图 9.18*所示，我们完成了**免责声明及信息**和**关于作者**部分，而将**诊断**部分暂时留空。
- en: Summary
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have completed two of the three voices composing the menu
    of our *COVID-19 Detection Tool* web application.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们完成了构成我们*COVID-19 检测工具* Web 应用程序菜单的三个功能中的两个。
- en: To deal with the **Image Enhancement** voice, we leveraged the Pillow library,
    which is a very powerful library that makes it possible to manage some quite powerful
    functions, such as image contrast and brightness, with very few lines of code.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 为了处理**图像增强**功能，我们利用了 Pillow 库，这是一个非常强大的库，使得通过很少的代码行就能管理一些非常强大的功能，例如图像对比度和亮度。
- en: We also created multiple selections for the user, adopting radio buttons and
    `if` clauses. Radio buttons are a very clean and powerful way to propose selections,
    and there is no way to put any kind of ambiguity in the process.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还为用户创建了多个选择，采用了单选按钮和`if`语句。单选按钮是一种非常简洁且强大的选择方式，确保了在整个过程中不会产生任何歧义。
- en: Using sliders in combination with image visualization is a powerful tool to
    adjust various parameters, such as contrast and brightness. Sliders provide the
    user with the ability to precisely and continuously select the desired value for
    any given parameter.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 将滑块与图像可视化结合使用，是调整各种参数（如对比度和亮度）的强大工具。滑块让用户能够精确且连续地选择任何给定参数的所需值。
- en: Another important trick to underline is that every time we modified images (for
    example, to perform brightness adjustments), we worked on their copies and not
    on the original image. In this way, it was quite simple to move back to the original
    situation just showing the image that was loaded thanks to `file_uploader`.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个需要强调的重要技巧是，每次我们修改图像（例如进行亮度调整）时，我们都在其副本上进行操作，而不是在原始图像上。通过这种方式，我们可以很简单地返回到原始状态，只需展示通过`file_uploader`加载的图像即可。
- en: We also learned how well-formatted text that leverages the Markdown syntax can
    be full of information to the user – for example, to show the technologies used
    and the sources and documents of inspiration. For sure, this clean and nicely
    formatted text is the perfect way to create disclaimers to avoid any future problems.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还了解到，利用 Markdown 语法格式良好的文本可以为用户提供丰富的信息——例如，展示使用的技术和灵感来源的文档。毫无疑问，这种简洁且格式规范的文本是创建免责声明的完美方式，有助于避免未来的任何问题。
- en: In the next chapter, we will learn how to integrate artificial intelligence
    and machine learning models into our web applications.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，我们将学习如何将人工智能和机器学习模型集成到我们的 Web 应用程序中。
