- en: '6\. Data Exploration: Exploring Geographical Data'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 6. 数据探索：探索地理数据
- en: Overview
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 概述
- en: This chapter reviews the geographic capabilities available within Tableau. Tableau
    provides an extensive set of options for working with location-based source data,
    which can help you design solutions using either point or polygon location data.
    By the end of this chapter, you will be able to effectively use geographic data
    in Tableau to perform sophisticated location-based analyses. You will gain a greater
    understanding of how to import multiple data formats and use your data to create
    polished, interactive maps. These skills will be developed through a series of
    exercises followed by an activity wherein you will create your own geographic
    workbook from start to finish.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章回顾了在 Tableau 中可用的地理功能。Tableau 提供了一套广泛的选项，用于处理基于位置的源数据，这可以帮助您使用点或多边形位置数据设计解决方案。到本章结束时，您将能够有效地在
    Tableau 中使用地理数据来执行复杂的位置分析。您将更深入地了解如何导入多种数据格式，并使用您的数据创建精致、交互式的地图。这些技能将通过一系列练习和活动来培养，在活动中您将从头到尾创建自己的地理工作簿。
- en: Introduction
  id: totrans-3
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 简介
- en: In the last chapter, you explored distributions and relationships in a dataset
    and learned how to identify patterns within a given dataset. This chapter will
    focus on the geographic aspect of data and how location affects those distributions
    and relationships.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，您探索了数据集中的分布和关系，并学习了如何识别给定数据集中的模式。本章将专注于数据的地理方面以及位置如何影响这些分布和关系。
- en: Understanding geographic patterns is critical for many datasets, whether they
    are revenue patterns around the world for a global corporation or local purchase
    patterns for a small business. This type of data is especially useful for explaining
    patterns to internal or external customers with maps, in which you can show patterns
    at the region or country level all the way down to postal code or even smaller
    geographic levels, depending on how the data is collected. This can be highly
    useful for visualizing purchase, voting, or demographic patterns, as just a few
    examples.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 理解地理模式对于许多数据集至关重要，无论是全球公司的全球收入模式，还是小企业的本地购买模式。这类数据特别适用于使用地图向内部或外部客户解释模式，在地图上您可以展示从地区或国家级别到邮政编码甚至更小的地理级别，具体取决于数据的收集方式。这可以非常有助于可视化购买、投票或人口统计模式，仅举几个例子。
- en: One of the most powerful aspects of using geographic data and maps lies in the
    intuitive understanding of location data many users are likely to have. This helps
    to put patterns in perspective, allowing you to more quickly derive critical insights
    about the locations and interactions of customers, clients, donors, or other stakeholders
    within your organization.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 使用地理数据和地图最强大的方面之一是许多用户可能对位置数据具有直观的理解。这有助于使模式更加清晰，让您能够更快地得出关于客户、客户、捐赠者或其他组织利益相关者位置和互动的关键见解。
- en: 'Geographic data can be as simple as basic street address information or as
    complex as custom location-based hierarchies created by an organization, where
    multiple geographic levels have been defined based on a set of custom boundaries.
    Ideally, your work starts with data that has already been geocoded, making it
    quite simple to read the data into Tableau without further steps. In some cases,
    you will need to do some additional work so that your location data is accurately
    defined. It is very important to understand the level of geographic granularity
    you are working with in your data, as well as the type of location information
    that is captured in the data: do you have latitude and longitude coordinates in
    your source data, or will you use Tableau to automatically perform this process?'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 地理数据可以像基本的街道地址信息那样简单，也可以像由组织创建的基于位置的复杂层次结构那样复杂，其中基于一组自定义边界定义了多个地理级别。理想情况下，您的工作从已经地理编码的数据开始，这使得将数据读入
    Tableau 而无需进一步步骤变得相当简单。在某些情况下，您可能需要做一些额外的工作，以确保您的位置数据被准确定义。了解您在数据中处理的地域粒度级别以及数据中捕获的位置信息类型非常重要：您的源数据中是否有经纬度坐标，还是您将使用
    Tableau 自动执行此过程？
- en: In this chapter, you will learn how to import geographic data and use it in
    your Tableau worksheets and dashboards. The chapter will also highlight when location
    data should be mapped and when it is best used within charts to tell the most
    effective story, as well as which level of geographic granularity (postal code,
    city, state, and so on) is appropriate for an analysis. By the end of the chapter,
    you will be proficient in using geographic data as a critical part of your Tableau
    toolkit.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将学习如何导入地理数据并在您的Tableau工作表和仪表板中使用它。本章还将强调何时应该将位置数据映射以及何时最好在图表中使用它来讲述最有效的故事，以及哪种地理粒度级别（邮政编码、城市、州等）适合分析。到本章结束时，您将熟练使用地理数据作为您Tableau工具包的关键部分。
- en: In this chapter, you will work with a Madrid Airbnb dataset for your point data
    and a shapefile with New York City boundaries for your polygon data.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将使用Madrid Airbnb数据集作为您的点数据，以及一个包含纽约市边界的shapefile作为您的多边形数据。
- en: Importing Spatial Data
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导入空间数据
- en: Before you can use the many capabilities Tableau provides for geographic datasets,
    it is important to understand the geographic data types that Tableau can utilize.
    Tableau can ingest geospatial data from many popular formats, including **shapefile**,
    **GeoJSON**, and **MapInfo** sources. The next section will cover some of the
    most common spatial formats and how to add them to your workbooks.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在您可以使用Tableau为地理数据集提供的众多功能之前，了解Tableau可以使用的地理数据类型非常重要。Tableau可以从许多流行的格式中获取地理空间数据，包括**shapefile**、**GeoJSON**和**MapInfo**源。下一节将介绍一些最常用的空间格式以及如何将它们添加到您的电子表格中。
- en: 'Spatial data is unique in how it defines geographic attributes. While typical
    spreadsheet or database data may contain geographic elements (city, state, country,
    postal code, and so on), it will not contain additional information about those
    entities. Most often, you will have a pair of geographic coordinates to work with:
    latitude and longitude. For common entities such as a country, state, or province,
    mapping software will recognize the codes and allow the use of choropleth (filled)
    maps.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 空间数据在定义地理属性方面具有独特性。虽然典型的电子表格或数据库数据可能包含地理元素（城市、州、国家、邮政编码等），但它不会包含有关这些实体的附加信息。通常，您将有一对地理坐标来处理：纬度和经度。对于像国家、州或省这样的常见实体，地图软件将识别代码并允许使用颜色渐变（填充）地图。
- en: Choropleth maps are shapefiles/**GeoJSON** data sources that not only contain
    simple latitude/longitude values corresponding to a postal code centroid, a store
    location, or even a city, but also include shape details as well as other geospatial
    details. You can create choropleth maps based on polygons in the data source.
    For anything more sophisticated or customized, you will typically rely on some
    type of spatial file that provides very detailed boundary information. Choropleth
    maps are synonymous with filled maps—the type often seen in displaying political
    or other preference data at a country, state, or county level. They differ from
    point-based maps, which are typically defined by a single latitude and longitude
    set of coordinates. In some cases, you can overlay points on a choropleth map
    to communicate a second layer of information to the viewer. Now that you have
    a basic understanding of what spatial, as well as choropleth, maps are, you can
    now proceed to learn about types of data files for these map types.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 颜色渐变地图是包含简单纬度/经度值的数据源，这些值对应于邮政编码中心点、商店位置，甚至城市，同时还包括形状细节以及其他地理空间细节。您可以根据数据源中的多边形创建颜色渐变地图。对于更复杂或定制化的内容，您通常会依赖于某种类型的空间文件，该文件提供非常详细的边界信息。颜色渐变地图与填充地图同义——通常在显示国家、州或县级别的政治或其他偏好数据时看到。它们与基于点的地图不同，后者通常由一组单一的纬度和经度坐标定义。在某些情况下，您可以在颜色渐变地图上叠加点，向观众传达第二层信息。现在您已经对空间以及颜色渐变地图有了基本的了解，您现在可以继续学习这些地图类型的数据文件类型。
- en: Data File Types
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据文件类型
- en: This section will briefly discuss several types of spatial files that can be
    easily used in Tableau. Each of these data types represents specific spatial (geographic)
    data formats that may contain additional values at specific geographic levels.
    As previously noted, these types differ from typical databases or spreadsheet
    data that may also contain geographic fields such as city, state, or postal code.
    Those data sources will be addressed in the following subsection; your current
    focus is on several very specific spatial sources. Let's take a brief tour of
    each type.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将简要讨论几种在 Tableau 中易于使用的空间文件类型。这些数据类型代表特定的空间（地理）数据格式，可能包含特定地理级别的附加值。如前所述，这些类型与典型的数据库或电子表格数据不同，后者也可能包含诸如城市、州或邮政编码之类的地理字段。这些数据源将在下一小节中讨论；你当前的关注点是几个非常具体的空间来源。让我们简要地浏览每种类型。
- en: ESRI Shapefiles
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ESRI Shapefiles
- en: Shapefiles are commonly encountered when users are looking for boundary files
    defining specific geographic levels. This type of data is frequently viewed as
    polygons (or areas corresponding to specific geographic definitions) but may also
    contain point or line data. Shapefile data is contained in a set of multiple file
    types, and must contain at a minimum the `.shp`, `.shx`, and `.dbf` file type
    extensions. There are many other optional extensions providing additional information
    about the underlying geographic data.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: Shapefiles 常在用户寻找定义特定地理级别的边界文件时遇到。这类数据通常以多边形（或对应特定地理定义的区域）的形式查看，但也可能包含点或线数据。Shapefile
    数据包含多个文件类型，至少必须包含 `.shp`、`.shx` 和 `.dbf` 文件类型扩展名。还有许多其他可选扩展名，提供了关于底层地理数据的额外信息。
- en: Shapefiles are quite popular and are used especially for choropleth maps showing
    specific attributes about defined geographic areas, often based on administrative
    boundaries such as country, state/province, or county, such as official zoning
    maps from the city government, which you will explore later in the chapter.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: Shapefiles 非常流行，特别用于显示特定地理区域的属性，如行政区划图，例如城市政府的官方分区地图，这些内容你将在本章后面进行探索。
- en: GeoJSON Files
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: GeoJSON 文件
- en: GeoJSON is a format dating from 2008 and may contain geographic details at the
    point, line string, and polygon levels, as well as combinations of these three
    types. Files in this format can be more flexible than shapefiles as they use the
    JSON structure to include multiple levels of detail. Not all geometries can be
    represented in GeoJSON, but it is now recommended as a preferred alternative to
    shapefiles in many instances.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: GeoJSON 是一种始于 2008 年的格式，可以在点、线字符串和多边形级别包含地理细节，以及这些三种类型的组合。这种格式的文件比 shapefiles
    更灵活，因为它们使用 JSON 结构来包含多个级别的细节。并非所有几何形状都可以在 GeoJSON 中表示，但现在它被推荐作为 shapefiles 在许多情况下的首选替代品。
- en: GeoJSON also enables geographic movement to be represented; for example, a driving
    route or a flight path can be tracked by a series of geographic coordinates in
    sequence, forming a `LineString`. Other geographic types include `Point`, `Polygon`,
    `MultiPoint`, `MultiLineString`, and `MultiPolygon`. These types may be used individually
    or in combination, making GeoJSON a flexible, powerful geospatial source.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: GeoJSON 还允许表示地理移动；例如，可以通过一系列按顺序排列的地理坐标来跟踪驾驶路线或飞行路径，形成一个 `LineString`。其他地理类型包括
    `Point`、`Polygon`、`MultiPoint`、`MultiLineString` 和 `MultiPolygon`。这些类型可以单独使用或组合使用，使
    GeoJSON 成为一个灵活、强大的地理空间来源。
- en: KML Files
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: KML 文件
- en: '**KML** is an acronym for **Keyhole Markup Language** and is in an XML type
    of format, always with latitude and longitude attributes as well as named geographic
    points (London, New York City, and so on). This has traditionally been the format
    used by Google Earth for plotting coordinates on a map.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '**KML** 是 **Keyhole Markup Language** 的缩写，它是一种 XML 类型的格式，总是包含纬度和经度属性以及命名的地理点（如伦敦、纽约市等）。这传统上一直是
    Google Earth 用于在地图上绘制坐标的格式。'
- en: MapInfo Interchange Format
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: MapInfo 交换格式
- en: '**MapInfo Interchange Format** (**MIF**) files contain database and map information
    originating in the MapInfo software program, one of the oldest and most popular
    dedicated **Geographic Information System** (**GIS**) platforms.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '**MapInfo 交换格式**（**MIF**）文件包含来自 MapInfo 软件程序的数据库和地图信息，MapInfo 是最古老和最受欢迎的专用
    **地理信息系统**（**GIS**）平台之一。'
- en: MapInfo Tables
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: MapInfo 表格
- en: MapInfo tables (the `.tab` file extension) contain vector data formats for use
    in GIS software. As with shapefiles, there are multiple files used to contain
    attribute data, location data, and other related information.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: MapInfo表（`.tab`文件扩展名）包含用于GIS软件的矢量数据格式。与shapefiles一样，有多个文件用于包含属性数据、位置数据和其他相关信息。
- en: TopoJSON Files
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: TopoJSON文件
- en: TopoJSON is an extension of GeoJSON that also includes topology information,
    which can be used to color maps based on topological features within an area.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: TopoJSON是GeoJSON的扩展，还包括拓扑信息，可以用于根据区域内拓扑特征对地图进行着色。
- en: Downloading the Data Source from GitHub
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从GitHub下载数据源
- en: As has been previously mentioned, to complete this or any other chapter in this
    book, it is highly recommended that you use the data source uploaded to the official
    GitHub repository. The reasoning for this is that, by the time you are reading
    this book, the official data source or the link to that data source might have
    been changed. In addition, most times, the data source that is part of the GitHub
    repository for the book is cleaned to aid understanding of the concepts. Therefore,
    wherever possible, utilize the data from the official GitHub link, rather than
    downloading the data from official data sources.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，为了完成本书的此章节或任何其他章节，强烈建议您使用官方GitHub仓库上传的数据源。这样做的原因是，到您阅读这本书的时候，官方数据源或该数据源的链接可能已经更改。此外，大多数时候，作为本书GitHub仓库一部分的数据源已经被清理，以帮助理解概念。因此，在可能的情况下，请利用官方GitHub链接的数据，而不是从官方数据源下载数据。
- en: 'The *Chapter 6: Data Exploration: Exploring Geographical Data* GitHub data
    source folder can be found at the following URL: [http://packt.link/6fzj9](http://packt.link/6fzj9).'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '*第6章：数据探索：地理数据探索* GitHub数据源文件夹可以在以下URL找到：[http://packt.link/6fzj9](http://packt.link/6fzj9)。'
- en: '**NYC Zoning Data**: ESRI which stands for Environmental Systems Research Institute,
    is an organization which has supported in design, development as well as implementation
    of geographic based information management systems since 1969\. In our data folder
    "New York City Zoning" folder, contains ESRI format spatial files which is a combination
    of .shp, .shx, .dbf, and .prj file formats. To connect to these spatial files,
    all the above files as well as .zip files should be included in the same folder.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**纽约市分区数据**：ESRI代表环境系统研究学院，自1969年以来一直支持基于地理的信息管理系统的设计、开发和实施。在我们的数据文件夹“纽约市分区”文件夹中，包含ESRI格式的空间文件，这是.shp、.shx、.dbf和.prj文件格式的组合。要连接到这些空间文件，所有上述文件以及.zip文件都应该包含在同一个文件夹中。'
- en: 'City of New York data source link: [https://data.cityofnewyork.us/City-Government/Zoning-GIS-Data-Shapefile/kdig-pewd](https://data.cityofnewyork.us/City-Government/Zoning-GIS-Data-Shapefile/kdig-pewd).'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 纽约市数据源链接：[https://data.cityofnewyork.us/City-Government/Zoning-GIS-Data-Shapefile/kdig-pewd](https://data.cityofnewyork.us/City-Government/Zoning-GIS-Data-Shapefile/kdig-pewd)。
- en: '**Madrid Airbnb data source**: InsideAirBnB.com was created by Murray Cox for
    his project on Airbnb and the dataset contains multiple files including listing
    details, reviews, as well as neighborhood details.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**马德里Airbnb数据源**：InsideAirBnB.com由Murray Cox为其Airbnb项目创建，数据集包含多个文件，包括列表详情、评论以及社区详情。'
- en: 'InsideAirBnB data source link: [http://insideairbnb.com/get-the-data.html](http://insideairbnb.com/get-the-data.html).'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: InsideAirBnB数据源链接：[http://insideairbnb.com/get-the-data.html](http://insideairbnb.com/get-the-data.html)。
- en: '**SF buyout data**: This file is obtained from the City of San Francisco''s
    public data repo, which contains a shapefile (.shp) of all the buyout agreements
    of the City of San Francisco from 2015\. You will use this data source in the
    activity section.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SF买出数据**：此文件来自旧金山市的公共数据仓库，其中包含2015年以来旧金山市所有买出协议的shapefile (.shp)文件。您将在活动部分使用此数据源。'
- en: 'SFGov.org data source link: [https://data.sfgov.org/Housing-and-Buildings/Buyout-Agreements/wmam-7g8d/data](https://data.sfgov.org/Housing-and-Buildings/Buyout-Agreements/wmam-7g8d/data).'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: SFGov.org数据源链接：[https://data.sfgov.org/Housing-and-Buildings/Buyout-Agreements/wmam-7g8d/data](https://data.sfgov.org/Housing-and-Buildings/Buyout-Agreements/wmam-7g8d/data)。
- en: 'Exercise 6.01: Downloading the Source Data'
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习6.01：下载源数据
- en: In this exercise, you will download and import a geospatial data source that
    can be used for filled (choropleth) maps.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将下载并导入一个可用于填充（渐变）地图的地理数据源。
- en: 'Perform the following steps to complete this exercise:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以完成此练习：
- en: 'Open a browser and navigate to the `Chapter06` GitHub repository: [http://packt.link/6fzj9](http://packt.link/6fzj9).'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开浏览器并导航到 `Chapter06` GitHub 仓库：[http://packt.link/6fzj9](http://packt.link/6fzj9)。
- en: '![Figure 6.1: New York City zoning shapefile'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.1：纽约市分区 shapefile'
- en: '](img/B16342_06_01.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_01.jpg)'
- en: 'Figure 6.1: New York City zoning shapefile'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.1：纽约市分区 shapefile
- en: 'Click on the `NYC Zoning Data` folder and download the ZIP file. Extract the
    ZIP file to the location of your choice:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 `NYC Zoning Data` 文件夹并下载 ZIP 文件。将 ZIP 文件解压到您选择的位置：
- en: '![Figure 6.2: New York City data download formats'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.2：纽约市数据下载格式'
- en: '](img/B16342_06_02.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_02.jpg)'
- en: 'Figure 6.2: New York City data download formats'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.2：纽约市数据下载格式
- en: Locate and extract the shapefile you just downloaded.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位并提取您刚刚下载的 shapefile。
- en: Open a new Tableau workbook.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个新的 Tableau 工作簿。
- en: 'Add a new data source by selecting `Data` | `New Data Source`:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择 `数据` | `新建数据源` 添加一个新的数据源：
- en: '![Figure 6.3: Adding New Data'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.3：添加新数据'
- en: '](img/B16342_06_03.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_03.jpg)'
- en: 'Figure 6.3: Adding New Data'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.3：添加新数据
- en: 'Select `Spatial file` from the `Connect` menu:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从“连接”菜单中选择 `空间文件`：
- en: '![Figure 6.4: Selecting the Spatial file option'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.4：选择空间文件选项'
- en: '](img/B16342_06_04.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_04.jpg)'
- en: 'Figure 6.4: Selecting the Spatial file option'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.4：选择空间文件选项
- en: 'Open the downloaded file and import the `.shp` file into Tableau. When you
    add the .shp(spatial) file from the `NYC Zoning Data` folder, Tableau processes
    all the files in that folder including rest of four file formats and creates a
    polygon map of the data. ESRI files in Tableau gets processed when all the files
    are combined into one shape file and loaded onto Tableau:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开下载的文件并将 `.shp` 文件导入到 Tableau。当您从 `NYC Zoning Data` 文件夹添加 .shp（空间）文件时，Tableau
    会处理该文件夹中的所有文件，包括其余四种文件格式，并创建数据的多边形地图。当所有文件合并成一个 shapefile 并加载到 Tableau 中时，Tableau
    会处理 ESRI 文件：
- en: '![Figure 6.5: Importing the data source'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.5：导入数据源'
- en: '](img/B16342_06_05.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_05.jpg)'
- en: 'Figure 6.5: Importing the data source'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.5：导入数据源
- en: Click on `Sheet 1` to create your first sheet.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 `Sheet 1` 创建您的第一个工作表。
- en: 'Find the `Geometry` measure and drag it to the `Detail` card:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到 `几何` 度量并将其拖到 `详细` 卡片：
- en: '![Figure 6.6: Adding the Geometry measure to the Detail card'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.6：将几何度量添加到详细卡片'
- en: '](img/B16342_06_06.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_06.jpg)'
- en: 'Figure 6.6: Adding the Geometry measure to the Detail card'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.6：将几何度量添加到详细卡片
- en: 'Tableau will automatically create a map using the shapefile information, as
    shown here:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau 将自动使用 shapefile 信息创建地图，如下所示：
- en: '![Figure 6.7: The default Tableau map output'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.7：默认的 Tableau 地图输出'
- en: '](img/B16342_06_07.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_07.jpg)'
- en: 'Figure 6.7: The default Tableau map output'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.7：默认的 Tableau 地图输出
- en: The preceding screenshot shows a shapefile version of New York City and completes
    the goal of loading spatial data files into Tableau.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 上述截图显示了纽约市的 shapefile 版本，并完成了将空间数据文件加载到 Tableau 中的目标。
- en: In this exercise, you downloaded the data source from [https://www1.nyc.gov/](https://www1.nyc.gov/)
    and imported a shapefile to display zoning districts for New York City. You can
    now view the information related to each of the polygon shapes in the file. In
    the next section, you will learn how to import non-spatial geographic data sources
    and join them for analysis later in the chapter.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您从 [https://www1.nyc.gov/](https://www1.nyc.gov/) 下载了数据源，并导入了一个 shapefile
    来显示纽约市的分区区域。现在您可以查看文件中每个多边形形状的相关信息。在下一节中，您将学习如何导入非空间地理数据源并将它们在章节的后续部分进行联合分析。
- en: Importing Non-Spatial Geographic Data Sources
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导入非空间地理数据源
- en: Many geographic data sources are not specifically spatial sources but are instead
    found in spreadsheet or database formats as part of a larger dataset. These datasets
    will typically contain non-geographic data, such as customer information, time-period
    details, and assorted metrics. Geographic features such as country, state, and
    city will often also be included, making it possible to create maps displaying
    many data attributes.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 许多地理数据源并非专门的空间数据源，而是作为更大数据集的一部分以电子表格或数据库格式存在。这些数据集通常包含非地理数据，例如客户信息、时间段细节和各类指标。国家、州和城市等地理特征也常常包含在内，这使得创建显示许多数据属性的地图成为可能。
- en: Tableau makes it easy to create maps from these sources, although you may need
    to assist in the process, as you'll see shortly. Since many Tableau data sources
    will not reside in spatial formats, it is essential to make sure you can use general
    data sources to display geographic information at the appropriate level of detail.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau 使从这些源创建地图变得容易，尽管您可能需要在此过程中提供帮助，正如您很快将看到的。由于许多 Tableau 数据源不会位于空间格式中，确保您可以使用通用数据源以适当的详细程度显示地理信息至关重要。
- en: Importing these sources is no different than the process for any general type
    of Tableau data. The only difference here is that you require one or more geographic
    fields to help you put your data in a map format. In the following section, you'll
    work through a quick exercise where you will import a non-spatial source.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 导入这些源与导入任何一般类型的 Tableau 数据的过程没有不同。这里唯一的区别是您需要一个或多个地理字段来帮助您将数据放入地图格式。在下一节中，您将进行一个快速练习，您将导入一个非空间源。
- en: Your first data source will be a detailed listing of Airbnb properties in Madrid.
    This file will contain information about the host, property location, ratings,
    reviews, and other property details.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 您的第一个数据源将是一个详细的 Airbnb 在马德里的房源列表。此文件将包含关于房东、房源位置、评分、评论和其他房源详细信息。
- en: 'Exercise 6.02: Importing a Non-Spatial Data Source'
  id: totrans-80
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 6.02：导入非空间数据源
- en: 'In this exercise, you will import the detailed listings text file, which has
    already been downloaded. By the end of this exercise, you will have a Tableau
    data source with several attributes that can be used for mapping properties in
    a Tableau worksheet. If you have not already downloaded the `listings_detailed.csv`
    file, you can find it here: [http://packt.link/Hh7ZL](http://packt.link/Hh7ZL).'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 在本练习中，您将导入已下载的详细列表文本文件。在本练习结束时，您将拥有一个 Tableau 数据源，其中包含多个属性，可用于在 Tableau 工作表中映射属性。如果您尚未下载
    `listings_detailed.csv` 文件，您可以在以下位置找到它：[http://packt.link/Hh7ZL](http://packt.link/Hh7ZL)。
- en: 'The steps to achieving this are as follows:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 实现这一目标的步骤如下：
- en: 'Select `Data` | `New Data Source` from the top menu:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从顶部菜单选择 `数据` | `新建数据源`：
- en: '![Figure 6.8: Creating a new data source'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.8：创建新的数据源]'
- en: '](img/B16342_06_08.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_08.jpg]'
- en: 'Figure 6.8: Creating a new data source'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.8：创建新的数据源]'
- en: 'Select the `Text file` option:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 `文本文件` 选项：
- en: '![Figure 6.9: Selecting the Text file option'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.9：选择文本文件选项]'
- en: '](img/B16342_06_09.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_09.jpg]'
- en: 'Figure 6.9: Selecting the Text file option'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.9：选择文本文件选项]'
- en: 'Locate your downloaded file. It will be a `.zip` file probably, so extract
    the file in a folder and that folder should contain multiple files. To import
    the file (`listings_detailed.csv`), locate `listings_detailed.csv` and click the
    `Open` button:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位您的下载文件。它可能是一个 `.zip` 文件，因此请在一个文件夹中提取文件，并且该文件夹应包含多个文件。要导入文件（`listings_detailed.csv`），定位
    `listings_detailed.csv` 并点击 `打开` 按钮：
- en: '![Figure 6.10: Adding the text file data source'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.10：添加文本文件数据源]'
- en: '](img/B16342_06_10.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_10.jpg]'
- en: 'Figure 6.10: Adding the text file data source'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.10：添加文本文件数据源]'
- en: 'For the purposes of efficient data performance, create an extract of this data
    instead of live data so that when you are developing your visualization, your
    data operations will be quick. Select the `Extract` radio button under `Connection`
    at the top right of the data pane and then click `Update Now`. This will populate
    your window with a subset of data:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了提高数据性能的效率，创建数据的提取而不是实时数据，这样当您开发可视化时，您的数据操作将会快速。在数据面板右上方的 `连接` 下选择 `提取` 单选按钮，然后点击
    `立即更新`。这将使您的窗口填充数据的一个子集：
- en: '![Figure 6.11: Selecting the Extract option'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.11：选择提取选项]'
- en: '](img/B16342_06_11.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_11.jpg]'
- en: 'Figure 6.11: Selecting the Extract option'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.11：选择提取选项]'
- en: 'Rename the data source `bnb listings` and save your extract when prompted:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重命名数据源 `bnb listings` 并在提示时保存您的提取：
- en: '![Figure 6.12: Renaming the data source'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.12：重命名数据源]'
- en: '](img/B16342_06_12.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_12.jpg]'
- en: 'Figure 6.12: Renaming the data source'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.12：重命名数据源]'
- en: 'Select a sheet and let the extract run. You will now see all your data dimensions
    and measures, along with a blank workspace:'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个工作表并运行提取。现在您将看到所有数据维度和度量，以及一个空白的工作区：
- en: '![Figure 6.13: Viewing the workspace after creating the extract'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.13：创建提取后查看工作区]'
- en: '](img/B16342_06_13.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_13.jpg]'
- en: 'Figure 6.13: Viewing the workspace after creating the extract'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.13：创建提取后查看工作区]'
- en: In the previous exercise, you imported spatial data, and in this exercise, you've
    imported a non-spatial data source containing several geographic fields that will
    help you to create informative maps using the location of thousands of Airbnb
    properties. Next up are relationships between spatial and non-spatial data.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一个练习中，你导入了空间数据，在这个练习中，你导入了包含几个地理字段的非空间数据源，这将帮助你使用成千上万的Airbnb属性的位置创建信息丰富的地图。接下来是空间数据和非空间数据之间的关系。
- en: Data Relationships
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据关系
- en: One Tableau feature you can use for geographic data (or indeed any data type)
    is joins, which allows you to create relationships at the data source level. Tableau
    has always permitted joins between multiple data sources added separately, but
    this was often useful only for smaller datasets where a simple join was sufficient.
    Using data relationships at the data source level takes a more robust approach,
    allowing multiple types of joins as well as unions of source datasets. This approach
    also leads to much better performance, especially when creating an extract.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用的一个Tableau功能是连接（joins），它允许你在数据源级别创建关系。Tableau始终允许在分别添加的多个数据源之间进行连接，但这通常仅对较小的数据集有用，其中简单的连接就足够了。在数据源级别使用数据关系采取了一种更稳健的方法，允许使用多种类型的连接以及源数据集的并集。这种方法还导致性能大幅提升，尤其是在创建数据提取时。
- en: Creating joins at the data source level allows connecting data from multiple
    sources (text, Excel, database, and so on), making it simple to combine data using
    a single key field within a join. This can be especially useful when different
    parts of an organization (that is, marketing versus finance) use different information
    systems, or when you require a simple lookup table to provide intuitive definitions
    that are not included in your source database information.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在数据源级别创建连接允许连接来自多个源（文本、Excel、数据库等）的数据，使得使用连接中的单个键字段合并数据变得简单。这在组织内部的不同部分（即营销与财务）使用不同的信息系统时，或者当你需要一个简单的查找表来提供源数据库信息中未包含的直观定义时，特别有用。
- en: 'Exercise 6.03: Joining Two Data Sources'
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习6.03：连接两个数据源
- en: In the following exercise, you will join two data sources to create additional
    possibilities for your analysis. The first (primary) source is the `listings_detailed.csv`
    file, and your secondary file is a simple neighborhoods file that will provide
    neighborhood names and was part of the data source you downloaded in the previous
    exercise. Keep in mind this exercise is for illustration purposes only. You can
    do much more with data joins, assuming your secondary file has additional fields.
    This topic will be covered in the subsequent chapters.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的练习中，你将连接两个数据源以创建分析的新可能性。第一个（主要）源是`listings_detailed.csv`文件，你的次要文件是一个简单的邻里文件，它将提供邻里名称，并且是你在上一个练习中下载的数据源的一部分。请记住，这个练习只是为了说明目的。如果你的次要文件有额外的字段，你可以用数据连接做更多的事情。这个主题将在随后的章节中介绍。
- en: 'Creating your data join consists of a few simple steps:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 创建你的数据连接包括几个简单的步骤：
- en: 'Add a new data source or edit the existing source to be the `listings_detailed.csv`
    file if it''s already been created:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果已经创建，请添加新的数据源或编辑现有源以使用`listings_detailed.csv`文件：
- en: '![Figure 6.14: Adding the listings file to the data window'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.14：将列表文件添加到数据窗口]'
- en: '](img/B16342_06_14.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_14.jpg]'
- en: 'Figure 6.14: Adding the listings file to the data window'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.14：将列表文件添加到数据窗口]'
- en: Add the primary data source to the window (if it's not already there) by dragging
    it from the `Connections` tab.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过从`连接`选项卡拖动，将主数据源添加到窗口中（如果它还没有在那里）。
- en: Drag the secondary source (the neighborhoods file) to the data source window
    from the `Connections` tab.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`连接`选项卡将次要源（邻里文件）拖动到数据源窗口中。
- en: 'Create a join between the two sources using the `Neighbourhood` field from
    each data source in the drop-down menu for each source. Then, select the `Inner`
    join option. Your window should look like this:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用每个数据源下拉菜单中的`Neighbourhood`字段在两个数据源之间创建连接。然后，选择`内部连接`选项。你的窗口应该看起来像这样：
- en: '![Figure 6.15: Creating a table join between two data sources'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.15：在两个数据源之间创建表连接]'
- en: '](img/B16342_06_15.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_15.jpg]'
- en: 'Figure 6.15: Creating a table join between two data sources'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.15：在两个数据源之间创建表连接]'
- en: Update the extract by selecting the `Update Now` button.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择`立即更新`按钮来更新提取。
- en: 'Your final output should be the following:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 你的最终输出应该是以下内容：
- en: '![Figure 6.16: Creating a table join between two data sources'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.16：在两个数据源之间创建表连接'
- en: '](img/B16342_06_16.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_16.jpg)'
- en: 'Figure 6.16: Creating a table join between two data sources'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.16：在两个数据源之间创建表连接
- en: You will now have the new field(s) available from the secondary source. As mentioned
    previously, this is a very simple example, but you could also use the secondary
    source as a reference table to provide additional information about a neighborhood,
    such as the number of bars, restaurants, or tourist attractions. There are many
    other possibilities; all that is needed is a common field to create a join. In
    the next section, you will explore how to edit locations and their aliases and
    create custom geographies.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在将可以从次要源中获得新的字段。如前所述，这是一个非常简单的例子，但您也可以使用次要源作为参考表，提供有关社区的其他信息，例如酒吧、餐厅或旅游景点的数量。有许多其他可能性；所需的一切只是一个公共字段来创建连接。在下一节中，您将了解如何编辑位置及其别名，以及创建自定义地理。
- en: Managing Location Data
  id: totrans-130
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理位置数据
- en: The key to producing maps and other meaningful geographic analyses is to have
    the necessary location elements (country, state, city, and so on) and to make
    sure they are classified correctly in Tableau. In many instances, Tableau will
    correctly identify these roles, making your job simple. In other cases, you will
    need to tell Tableau the correct role. This is often the case when your source
    field names do not correspond to the standard naming conventions used by Tableau.
    There may also be cases where Tableau incorrectly assumes that a non-geographic
    field represents location data based on the field name of the dimension, or where
    a value cannot be automatically identified.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 制作地图和其他有意义的地理分析的关键是拥有必要的地理位置元素（国家、州、城市等），并确保它们在 Tableau 中被正确分类。在许多情况下，Tableau
    将正确识别这些角色，使您的工作变得简单。在其他情况下，您需要告诉 Tableau 正确的角色。这通常发生在您的源字段名称与 Tableau 使用的标准命名约定不对应时。也可能存在
    Tableau 根据维度字段名称错误地假设非地理字段表示位置数据的情况，或者无法自动识别值。
- en: This section will explore the various ways in which geographic data can be created
    and maintained in Tableau using three primary approaches—assigning roles, editing
    locations, and building custom geographic levels.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将探讨在 Tableau 中使用三种主要方法创建和维护地理数据的方式——分配角色、编辑位置和构建自定义地理级别。
- en: Assigning Geographic Roles
  id: totrans-133
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分配地理角色
- en: Tableau is quite adept at interpreting geographic levels based on source data
    naming conventions. For example, if you have a source field named `city`, then
    Tableau will assume you want to use this field to identify cities on a map. This
    may not always be the case—a field named `city neighborhood` may identify a different
    geographic level. In these instances, Tableau will require your guidance to match
    source fields to the correct geographic levels. Being familiar with your data
    sources will make this task simple.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau 在根据源数据命名约定解释地理级别方面非常擅长。例如，如果您有一个名为 `city` 的源字段，那么 Tableau 将假设您想使用此字段在地图上标识城市。这并不总是这种情况——名为
    `city neighborhood` 的字段可能标识不同的地理级别。在这些情况下，Tableau 将需要您的指导来将源字段匹配到正确的地理级别。熟悉您的数据源将使这项任务变得简单。
- en: 'Have a look at the following imported listings data to see how Tableau handled
    the data, and whether you need to make any modifications. You can easily locate
    the fields Tableau has determined are geographic by looking for a globe icon.
    In this dataset, you can see dimensions for city, country, country code, state,
    and ZIP code—each with a globe icon. Check to make sure each has the correct geographic
    role, starting with `city`:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 查看以下导入的列表数据，以了解 Tableau 如何处理数据，以及您是否需要做出任何修改。您可以通过寻找地球图标轻松找到 Tableau 确定的地理字段。在此数据集中，您可以看到城市、国家、国家代码、州和
    ZIP 码维度——每个都有地球图标。请检查每个字段是否具有正确的地理角色，从 `city` 开始：
- en: '![Figure 6.17: Associating geographic roles to data source fields'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.17：将地理角色关联到数据源字段'
- en: '](img/B16342_06_17.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_17.jpg)'
- en: 'Figure 6.17: Associating geographic roles to data source fields'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.17：将地理角色关联到数据源字段
- en: The `city` dimension has been correctly associated with a city geographic level.
    This is expected based on the naming convention; it might have required a manual
    linkage if the dimension were named `host city` or some other variation. You can
    then go through the same process and note that each dimension has been correctly
    identified with its geographic role. Also note that both the country and country
    code are associated with the `Country/Region` role; either field can be used to
    identify the country level on a map.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '`城市` 维度已正确关联到城市地理级别。根据命名约定，这是预期的；如果维度被命名为 `host city` 或其他变体，可能需要手动链接。然后你可以通过相同的流程，并注意每个维度都已正确识别其地理角色。此外，请注意，国家和国家代码都与
    `国家/地区` 角色相关联；任一字段都可以用来在地图上识别国家级别。'
- en: In a case where the geographic association has not been made or is incorrectly
    associated, you will need to inform Tableau of the correct category. This will
    often occur when a field name is unclear—for example, if `country` had been named
    `CTRY` in your source data, it is quite likely you would need to tell Tableau
    that this field is in fact referring to one or more countries. To make this correction,
    you simply select the `Geographic Role` | `Country/Region` option for this dimension
    and assign the proper value.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在地理关联尚未建立或关联错误的情况下，你需要通知 Tableau 正确的分类。这通常发生在字段名称不明确的情况下——例如，如果你的源数据中将 `country`
    命名为 `CTRY`，那么你很可能需要告诉 Tableau 这个字段实际上指的是一个或多个国家。为了进行这项修正，你只需为这个维度选择 `地理角色` | `国家/地区`
    选项，并分配正确的值。
- en: Note
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: '*Figure 6.18* shows 13 unknown values below. Please note, however, that you
    may get different unknown values as the data gets updated constantly.'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 6.18* 显示了下方有 13 个未知值。请注意，然而，随着数据的不断更新，你可能会得到不同的未知值。'
- en: Editing Locations
  id: totrans-143
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 编辑位置
- en: 'There will be times when Tableau is unable to recognize geographic data, often
    due to misspellings in the source data. This will result in null values when you
    attempt to map your data, leaving users with an incomplete picture of the information.
    Fortunately, you can provide more information on these values to help get them
    mapped correctly. See what happens when you attempt to map the state dimension:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 有时会遇到 Tableau 无法识别地理数据的情况，这通常是由于源数据中的拼写错误造成的。当你尝试将数据映射到地图上时，这会导致出现空值，使用户无法获得完整的信息视图。幸运的是，你可以提供更多关于这些值的信息，以帮助它们正确映射。看看当你尝试映射州维度时会发生什么：
- en: '![Figure 6.18: Mapping the state dimension'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.18：映射州维度'
- en: '](img/B16342_06_18.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_18.jpg)'
- en: 'Figure 6.18: Mapping the state dimension'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.18：映射州维度
- en: 'Notice that in the bottom right of the preceding screenshot, there is a message
    that tells you that you have 13 unknown values. Tableau is not recognizing the
    states provided in your dataset. To find out what''s happening, click on the `13
    unknown` button, which opens a `Special Values` window:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 注意到在前一个屏幕截图的右下角，有一条消息告诉你你有 13 个未知值。Tableau 没有识别出你数据集中提供的州。要找出发生了什么，点击 `13 个未知`
    按钮，这将打开一个 `特殊值` 窗口：
- en: '![Figure 6.19: Editing locations to update unknown values'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.19：编辑位置以更新未知值'
- en: '](img/B16342_06_19.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_19.jpg)'
- en: 'Figure 6.19: Editing locations to update unknown values'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.19：编辑位置以更新未知值
- en: 'You then select the `Edit Locations...` option to open a window where you can
    begin the matching process. When this window opens, you quickly see the issue:
    your default `Country/Region` is set according to your location (the `United States`
    in this example), not `Spain`.'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 然后你选择 `编辑位置...` 选项来打开一个窗口，你可以在其中开始匹配过程。当这个窗口打开时，你很快就会看到问题：你的默认 `国家/地区` 是根据你的位置设置的（在这个例子中是
    `美国`），而不是 `西班牙`。
- en: '![Figure 6.20: Identifying unrecognized geographic values'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.20：识别未识别的地理值'
- en: '](img/B16342_06_20.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_20.jpg)'
- en: 'Figure 6.20: Identifying unrecognized geographic values'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.20：识别未识别的地理值
- en: This is easily rectified by finding `Spain` in the drop-down list and setting
    it as your default. When you apply this change, you see that many of the entries
    have been automatically updated, especially any with Madrid as part of their name
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以通过在下拉列表中找到 `西班牙` 并将其设置为默认值来轻松解决。当你应用这个更改时，你会看到许多条目已经自动更新，特别是任何包含马德里在内的名称的条目
- en: '![Figure 6.21: Updating unrecognized values using the Edit Locations window'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.21：使用“编辑位置”窗口更新未识别的值'
- en: '](img/B16342_06_21.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_21.jpg)'
- en: 'Figure 6.21: Updating unrecognized values using the Edit Locations window'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.21：使用“编辑位置”窗口更新未识别的值
- en: There are others that have not been automatically updated, perhaps as a result
    of dirty data. You can now investigate these entries to determine the extent of
    the issue. Since you know that your dataset is entirely composed of Madrid properties,
    it is probably safe to update the remaining entries to the same `Comunidad de
    Madrid` entry. For each `Unrecognized` state in the `Edit Locations` window, simply
    double-click `Unrecognized` and select the `Comunidad de Madrid` entry from the
    drop-down list to make the manual updates.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 有些其他条目尚未自动更新，这可能是由于数据不干净造成的。你现在可以调查这些条目以确定问题的范围。由于你知道你的数据集完全由马德里地区的房产组成，因此更新剩余条目到相同的`Comunidad
    de Madrid`条目可能是安全的。在`编辑位置`窗口中，对于每个`未识别`状态，只需双击`未识别`，然后从下拉列表中选择`Comunidad de Madrid`条目以进行手动更新。
- en: Building Custom Geographies
  id: totrans-161
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 构建自定义地理
- en: In many cases, you will want to create custom geographic levels that are not
    already defined in your data source. This can be done quite easily in Tableau
    by specifying how you want the new level to be created, using an existing geographic
    attribute. You can also create custom geographies using calculated fields. Let's
    look at a single example for each approach.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，你可能想要创建在数据源中尚未定义的自定义地理级别。在Tableau中，通过指定如何创建新级别以及使用现有的地理属性，可以非常容易地做到这一点。你还可以使用计算字段创建自定义地理。让我们分别看看每种方法的单个示例。
- en: Creating a New Geography Using an Existing Role
  id: totrans-163
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用现有角色创建新地理
- en: In some cases, you will create new geographic levels based on a level that already
    exists in the source data. This might be related to sales territories, neighborhoods,
    or some other aggregation where you don't have a formally defined geographic level
    in place. Let's look at an example using the Madrid dataset ZIP codes and neighborhoods.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，你将基于源数据中已经存在的级别创建新的地理级别。这可能与销售区域、邻里或其他没有正式定义地理级别的聚合有关。让我们通过使用马德里数据集的ZIP代码和邻里作为例子来看一下。
- en: 'You already have the ZIP code (postal code) data in the data source file, and
    you have neighborhood data as well, although only in text form. Your goal is to
    create geographic neighborhood definitions you can show on a map. To do this,
    right-click the `Neighbourhood` dimension and select `Geographic Role` | `Create
    from` | `zipcode`. This tells Tableau to build a geography at the neighborhood
    level using existing ZIP code data. Here is a view of the menu selections:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经在数据源文件中有了ZIP代码（邮政编码）数据，同时也有邻里数据，尽管只是以文本形式。你的目标是创建可以在地图上显示的地理邻里定义。为此，右键单击`邻里`维度，选择`地理角色`
    | `从...创建` | `zipcode`。这告诉Tableau使用现有的ZIP代码数据在邻里级别构建地理。以下是菜单选择的一个视图：
- en: '![Figure 6.22: Creating a geographic role'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.22：创建地理角色'
- en: '](img/B16342_06_22.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_22.jpg)'
- en: 'Figure 6.22: Creating a geographic role'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.22：创建地理角色
- en: 'You can see from the `Data` pane that Tableau does this by creating a hierarchy
    wherein `Neighbourhood` is the top level and `zipcode` is the lower level:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以从`数据`面板中看到，Tableau通过创建一个层次结构来完成这项工作，其中`邻里`是顶级，`zipcode`是次级：
- en: '![Figure 6.23: Building a custom geography level'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.23：构建自定义地理级别'
- en: '](img/B16342_06_23.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_23.jpg)'
- en: 'Figure 6.23: Building a custom geography level'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.23：构建自定义地理级别
- en: 'What will this look like on a map? To display your new level, drag the `Neighbourhood`
    field from the hierarchy to the `Detail` mark, drag `Neighbourhood` to the `Label`
    marks card, and add `SUM(Number of Records)` to the `Color` mark, and then select
    the `Map` option from the `Show Me` menu, yielding this display:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 这在地图上会是什么样子？要显示你的新级别，将`邻里`字段从层次结构拖到`详细`标记，将`邻里`拖到`标签`标记卡，并将`SUM(记录数)`添加到`颜色`标记，然后从`显示我`菜单中选择`地图`选项，得到以下显示：
- en: '![Figure 6.24: Mapping the newly created neighborhood polygons'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.24：映射新创建的邻里多边形'
- en: '](img/B16342_06_24.jpg)'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_24.jpg)'
- en: 'Figure 6.24: Mapping the newly created neighborhood polygons'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.24：映射新创建的邻里多边形
- en: You can see from the map that you again have an unknown issue with 66 values
    you were not able to associate with a neighborhood. This is most likely due to
    something in the source data—perhaps missing values in the `Neighbourhood` dimension
    or dirty ZIP code data. This sort of issue can frequently occur when there is
    not a strict standard for data entry; it is up to the Tableau designer to determine
    whether the issue is significant or minor and act accordingly.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 从地图上可以看出，你再次遇到了一个未知问题，有 66 个值你无法将其与邻里关联起来。这很可能是由于源数据中的某些问题——可能是 `Neighbourhood`
    维度中的缺失值或脏 ZIP 码数据。当数据录入没有严格的规范时，这类问题经常发生；Tableau 设计师需要确定问题的重要性，并相应地采取行动。
- en: Creating a New Geography Using Groups
  id: totrans-178
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用组创建新的地理
- en: A second method for building a new geographic level is to create a calculated
    field, again using an existing geographic level as the base. You could do this
    again with a calculation based on ZIP codes (perhaps the first three or four digits),
    yielding an aggregate level similar to the neighborhood example. This assumes
    that the ZIP codes are assigned in a manner where this method makes sense.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新的地理级别的第二种方法是创建一个计算字段，再次使用现有的地理级别作为基础。你可以再次使用基于 ZIP 码的计算（可能是前三位或四位数字），得到类似于邻里示例的聚合级别。这假设
    ZIP 码是以这种方式分配的，这种方法是有意义的。
- en: 'Another possibility is to create a group in which you assign a name to each
    of your aggregate clusters, which can then be mapped accordingly. In the following
    example, a set of neighborhood clusters using the `Group` function have been created:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种可能性是创建一个组，在这个组中，你可以为你的每个聚合簇分配一个名称，然后相应地进行映射。以下示例中，使用 `Group` 函数创建了一组基于邻里名称的聚类：
- en: '![Figure 6.25: Creating groups based on neighborhood names'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.25：基于邻里名称创建组]'
- en: '](img/B16342_06_25.jpg)'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_06_25.jpg]'
- en: 'Figure 6.25: Creating groups based on neighborhood names'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.25：基于邻里名称创建组
- en: 'To create groups, follow these simple steps:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建组，请按照以下简单步骤操作：
- en: Highlight one or more individual neighborhood values.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 突出显示一个或多个单个邻里值。
- en: Click on the `Group` button.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 `Group` 按钮。
- en: Name the group by editing the default Tableau group name.
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过编辑默认的 Tableau 组名称来命名组。
- en: Repeat *Step 1* to *Step 3* for each additional group.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对每个额外的组重复 *步骤 1* 到 *步骤 3*。
- en: Click the `OK` button to save all groups.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 `OK` 按钮保存所有组。
- en: 'Now you can add these clusters to a map by dragging the `Neighbourhood Clusters`
    dimension to the `Detail` mark; you can continue to use the `SUM(Number of Records)`
    measures for coloring purposes. Here''s the result:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可以通过将 `Neighbourhood Clusters` 维度拖到 `Detail` 标记来将这些聚类添加到地图上；你可以继续使用 `SUM(Number
    of Records)` 度量来用于着色。以下是结果：
- en: '![Figure 6.26: Mapping the neighborhood clusters'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.26：映射邻里聚类]'
- en: '](img/B16342_06_26.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_06_26.jpg]'
- en: 'Figure 6.26: Mapping the neighborhood clusters'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.26：映射邻里聚类
- en: Note that there are 12 unknown entries; these can be addressed as detailed previously
    by clicking on the message and using the `Edit Locations` screen to update the
    entries.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，有 12 个未知条目；可以通过点击消息并使用 `Edit Locations` 屏幕来更新条目，如前所述来解决这些问题。
- en: Grouping geographic areas in this manner can help aggregate your data to meaningful
    levels for analysis, especially if you are familiar with the geographic attributes
    in your source data. In the next exercise, you will practice these concepts using
    the Airbnb dataset that you have been using.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 以这种方式对地理区域进行分组可以帮助将你的数据聚合到有意义的分析水平，特别是如果你熟悉源数据中的地理属性。在下一个练习中，你将使用你一直在使用的 Airbnb
    数据集来练习这些概念。
- en: 'Exercise 6.04: Building Custom Geographies'
  id: totrans-196
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 6.04：构建自定义地理
- en: In this exercise, you will create custom geographies using both the existing
    role and group approaches. This will provide additional mapping options using
    these aggregate dimensions, starting with the role approach.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，你将使用现有的角色和组方法来创建自定义地理。这将提供使用这些聚合维度进行映射的额外选项，从角色方法开始。
- en: 'Perform the following steps to complete this exercise:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以完成此练习：
- en: Open a new or existing Tableau workbook.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个新的或现有的 Tableau 工作簿。
- en: Import the listings and neighborhood files if you have not already done so.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你还没有这样做，请导入 `listings` 和 `neighbourhood` 文件。
- en: Make sure you have a data source with the `listings_detailed` and `neighbourhoods`
    files joined. If not, create this relationship by joining them on the `Neighbourhood`
    field.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保你有包含 `listings_detailed` 和 `neighbourhoods` 文件的 `listings_detailed` 数据源。如果没有，通过在
    `Neighbourhood` 字段上连接它们来创建这种关系。
- en: '![Figure 6.27: Joining two files as a single data source'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.27：将两个文件作为一个单一数据源连接'
- en: '](img/B16342_06_27.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_27.jpg)'
- en: 'Figure 6.27: Joining two files as a single data source'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.27：将两个文件作为一个单一数据源连接
- en: Create an extract by selecting the `Extract` radio button. Save the extract
    and open a worksheet.
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择`提取`单选按钮创建一个提取。保存提取并打开工作表。
- en: Create a geographic role for `Neighbourhood` by selecting the dimension and
    creating a role based on `zipcode`.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择维度并基于`zipcode`创建角色来为`邻里`创建一个地理角色。
- en: '![Figure 6.28: Assigning a custom geographic role'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.28：分配自定义地理角色'
- en: '](img/B16342_06_28.jpg)'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_28.jpg)'
- en: 'Figure 6.28: Assigning a custom geographic role'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.28：分配自定义地理角色
- en: 'Right-click on the `Neighbourhood` dimension and select the `Create` | `Group...`
    menu item:'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击`邻里`维度并选择`创建` | `分组...`菜单项：
- en: '![Figure 6.29: Creating a group from an existing field'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.29：从现有字段创建一个组'
- en: '](img/B16342_06_29.jpg)'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_29.jpg)'
- en: 'Figure 6.29: Creating a group from an existing field'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.29：从现有字段创建一个组
- en: 'Select the entries from `Acacias` through `Atocha` and click the `Group` button.
    Name this `Cluster 1`. Then, select some more entries through `Gaztambide` and
    click the `Group` button. Check the `Include ''Other''` checkbox:'
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从`Acacias`到`Atocha`选择条目并点击`分组`按钮。将此命名为`集群1`。然后，通过`Gaztambide`选择更多条目并点击`分组`按钮。勾选`包含'其他'`复选框：
- en: '![Figure 6.30: Results after creating groups from the Neighbourhood dimension'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.30：从邻里维度创建分组后的结果'
- en: '](img/B16342_06_30.jpg)'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_30.jpg)'
- en: 'Figure 6.30: Results after creating groups from the Neighbourhood dimension'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.30：从邻里维度创建分组后的结果
- en: Click the `OK` button. You will now see a `[Neighbourhood Clusters] Group` dimension.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`确定`按钮。你现在将看到一个`[邻里集群]组`维度。
- en: '![Figure 6.31: The Neighbourhood Clusters group as a new dimension'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.31：邻里集群组作为一个新维度'
- en: '](img/B16342_06_31.jpg)'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_31.jpg)'
- en: 'Figure 6.31: The Neighbourhood Clusters group as a new dimension'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.31：邻里集群组作为一个新维度
- en: In this exercise, you created two new geographic fields using a pair of approaches.
    You can now use these dimensions to create filled maps, which is what you will
    be exploring in the next section, using a couple of options displayed in the `Show
    Me` menu.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: '在这个练习中，您使用两种方法创建了两新的地理字段。现在您可以使用这些维度来创建填充地图，您将在下一节中探讨，使用`Show Me`菜单中显示的几个选项。 '
- en: Creating Maps in Tableau
  id: totrans-223
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Tableau中创建地图
- en: 'Tableau provides two distinct map options in the `Show Me` menu—one for symbol
    maps and a second for choropleth maps. If your data has simple latitude/longitude
    values corresponding to a postal code centroid, such as a store location (or even
    a city), then your mapping will be focused on the symbol map option. If, however,
    your data has more detailed data based on a shapefile or GeoJSON data source,
    you can then use the choropleth option to create filled maps based on the polygons
    in the data source. In some cases, you will have access to both types of source
    data and will be able to create a dual-axis map, which will be explored later
    in this section. The following is a simple comparison of the two types, with choropleth
    (filled) on the left and symbol on the right:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau在`Show Me`菜单中提供两种不同的地图选项——一个用于符号地图，另一个用于渐变地图。如果您的数据有简单的经纬度值对应于邮政编码中心点，例如商店位置（甚至是一个城市），那么您的映射将集中在符号地图选项上。然而，如果您的数据基于shapefile或GeoJSON数据源具有更详细的数据，那么您可以使用渐变选项来创建基于数据源中多边形的填充地图。在某些情况下，您将能够访问这两种类型的数据源，并能够创建一个双轴地图，这将在本节的后面部分进行探讨。以下是对这两种类型的简单比较，渐变（填充）地图在左侧，符号地图在右侧：
- en: '![Figure 6.32: A choropleth (filled) map and a symbol map'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.32：一种渐变（填充）地图和一种符号地图'
- en: '](img/B16342_06_32.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_32.jpg)'
- en: 'Figure 6.32: A choropleth (filled) map and a symbol map'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.32：一种渐变（填充）地图和一种符号地图
- en: Geocoding
  id: totrans-228
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 地理编码
- en: Geocoding is the process of assigning geographic attributes to a data field
    that may not be automatically recognized as a traditional geospatial field. In
    these cases, you need to assign values that correspond to these dimensions so
    maps can be created. This section will examine how this can be handled in Tableau.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 地理编码是将地理属性分配给可能不会自动识别为传统地理空间字段的字段的过程。在这些情况下，您需要分配与这些维度相对应的值，以便创建地图。本节将探讨如何在Tableau中处理这种情况。
- en: In many cases, you will be presented with geographic attributes that Tableau
    will be unable to recognize without some guidance. Street addresses are a common
    example of this; unlike country, state, or even city, street addresses are too
    often duplicated across multiple geographies, making them very difficult to locate
    correctly on a map. Fortunately, Tableau enables custom geocoding, where you can
    use two distinct methods to provide more precise information. In both cases, you
    start with a `.csv` file.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，你将遇到 Tableau 在没有一些指导的情况下无法识别的地理属性。街道地址是这种情况的常见例子；与国家、州或甚至城市不同，街道地址在多个地理区域内经常重复，这使得它们在地图上正确定位变得非常困难。幸运的是，Tableau
    允许自定义地理编码，你可以使用两种不同的方法来提供更精确的信息。在两种情况下，你都是从 `.csv` 文件开始的。
- en: The first case is where you wish to use existing geographic definitions and
    simply extend them to include new members. For example, if you need to add a new
    country, state, or county to your maps that is not recognized by Tableau, you
    can provide this information using a `.csv` file. You simply select the `Map`
    | `Geocoding` | `Import Custom Geocoding` menu option and direct Tableau to your
    directory where the `.csv` file has been created. The data field names must match
    the existing Tableau field names (`Country`, `State`, and so on) and should include
    latitude and longitude information so Tableau knows where to locate the new entries
    on a map.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 第一种情况是，你希望使用现有的地理定义，并简单地扩展它们以包括新成员。例如，如果你需要向你的地图中添加一个 Tableau 无法识别的新国家、州或县，你可以使用
    `.csv` 文件提供此信息。你只需选择 `地图` | `地理编码` | `导入自定义地理编码` 菜单选项，并将 Tableau 指向你的目录，其中已创建
    `.csv` 文件。数据字段名称必须与现有的 Tableau 字段名称（如 `国家`、`州` 等）匹配，并且应包括纬度和经度信息，以便 Tableau 知道在地图上定位新条目。
- en: The second type of custom geocoding involves information that may be specific
    to an organization (such as a regional sales hierarchy), or that may reference
    non-traditional point data such as lightning strikes or volcanic eruptions. In
    these cases, you create specific names for the new items, and then add a new field
    name that can be used in Tableau. For example, the field name might be called
    `Lightning Strikes` if you are attempting to map those events. Once again, latitude
    and longitude data must be included, as well as other appropriate geographic levels,
    such as `Country` and `State`.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种自定义地理编码类型涉及可能特定于组织（如区域销售层次结构）的信息，或者可能引用非传统点数据，如闪电或火山爆发。在这些情况下，你为新项目创建特定的名称，然后添加一个可以在
    Tableau 中使用的新的字段名称。例如，如果尝试绘制这些事件，字段名称可能被称为 `闪电打击`。同样，必须包括纬度和经度数据，以及其他适当的地理级别，如
    `国家` 和 `州`。
- en: Adding this custom geocoded information extends the mapping capabilities of
    Tableau beyond traditional boundaries and definitions.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 添加此自定义地理编码信息扩展了 Tableau 的地图功能，超越了传统的边界和定义。
- en: Note
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The steps to create the map shown in *Figure 6.33* are explained in *Exercise 6.05*.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 创建图 6.33 所示地图的步骤在练习 6.05 中解释。
- en: Symbol Maps
  id: totrans-236
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 符号地图
- en: Symbol maps represent all maps where location data is provided in a point-based
    latitude and longitude format. Latitude represents the north-south location of
    a data point, while longitude provides the east-west location. Using these two
    measures in Tableau allows you to pinpoint the precise location of stores, offices,
    parks, museums, and many other entities with specific locations. These points
    may represent a central location within a large geographic entity (such as a park)
    or may have a higher precision level, depending on how detailed your source data
    is. For example, a latitude value of `45.37187` will be more precise than the
    same value rounded to `45.37`.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 符号地图表示所有以基于点的纬度和经度格式提供位置数据的地图。纬度表示数据点的南北位置，而经度提供东西位置。在 Tableau 中使用这两个度量标准可以帮助你精确地定位商店、办公室、公园、博物馆和其他具有特定位置的实体。这些点可能代表大型地理实体（如公园）内的中心位置，或者可能具有更高的精度水平，具体取决于你的源数据有多详细。例如，纬度值
    `45.37187` 将比四舍五入到 `45.37` 的相同值更精确。
- en: 'Symbol maps are quite simple yet very powerful in their ability to tell stories
    based on geographically positioned data. Let''s explore the process for building
    effective symbol maps in Tableau. Everything starts with latitude and longitude
    measures, which may be included in your source data or can be calculated by Tableau
    for recognized attributes such as country, state, and county. As an example, using
    your Madrid locations data, here is a simple view based on the latitude and longitude
    data in the source file. You can select any point to see the supporting geographic
    coordinates:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 符号图非常简单，但在基于地理位置数据讲故事的能力上却非常强大。让我们在Tableau中探索构建有效符号图的过程。一切从纬度和经度度量开始，这些度量可能包含在您的源数据中，或者可以由Tableau为已识别的属性（如国家、州和县）进行计算。例如，使用您的马德里位置数据，这里是基于源文件中纬度和经度数据的一个简单视图。您可以选择任何点来查看支持的地理坐标：
- en: '![Figure 6.33: Details of a data point in a symbol map'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.33：符号图中数据点的详细信息'
- en: '](img/B16342_06_33.jpg)'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_33.jpg)'
- en: 'Figure 6.33: Details of a data point in a symbol map'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.33：符号图中数据点的详细信息
- en: Each point in the map is positioned based on latitude and longitude, as seen
    in the tooltip for the map. You can use additional map layers to provide more
    context, but for now, this is a good starting point.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 地图中的每个点都是基于纬度和经度定位的，如地图的提示所示。您可以使用额外的地图层提供更多上下文，但就目前而言，这是一个良好的起点。
- en: Adding Data to Symbol Maps
  id: totrans-243
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 向符号图添加数据
- en: While placing location points on a map can be informative, more often you will
    also wish to add data measures to those points—perhaps revenue for a store location
    or the number of visitors to a tourist attraction as two simple examples. This
    is easily done in Tableau using colors, sizes, or shapes to identify one or more
    features of a geographic point. You first need to determine which data fields
    will be most meaningful to display; this will allow you to build logic to display
    specific information based on user interaction.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然在地图上放置位置点可以提供信息，但更常见的情况是您还希望向这些点添加数据度量——例如，商店位置的收益或旅游景点游客数量的两个简单例子。在Tableau中，使用颜色、大小或形状来识别地理点的特征，这可以轻松完成。首先，您需要确定哪些数据字段将最有意义地显示；这将允许您根据用户交互构建显示特定信息的逻辑。
- en: When you add a measure to a symbol map, there are two commonly used approaches
    to display this data; the first is the use of colors or shapes, and the second
    is the use of the sizing of symbols. If you are adding dimensional information
    to the display, you will usually opt for colors or shapes to represent these categories.
    In some cases, both shapes and colors can be used to provide additional detail
    to the map viewer. If you are adding measures to your symbol display, sizing will
    often be the preferred approach, since it will help in identifying numerical differences
    across locations. Using colors or shapes is not as effective with measures, although
    either one could be used in tandem with size. In the following sections, you will
    see examples for each of these options.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 当您向符号图添加度量时，有两种常用的方法来显示这些数据；第一种是使用颜色或形状，第二种是使用符号的大小。如果您正在向显示添加维度信息，您通常会选择颜色或形状来表示这些类别。在某些情况下，形状和颜色都可以用来向地图查看者提供更多细节。如果您正在向符号显示添加度量，大小通常将是首选的方法，因为它有助于识别不同地点之间的数值差异。使用颜色或形状与度量结合并不那么有效，尽管两者可以与大小一起使用。在接下来的部分中，您将看到每个选项的示例。
- en: Coloring a Symbol Map
  id: totrans-246
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为符号图着色
- en: Colors can be used to provide insight into both categorical dimensions and numeric
    measures. This will give users a nice visual cue to help them see geographic-related
    patterns in the information. When using colors, it is important to recall that
    the human visual system has a limited range with respect to viewing colors; you
    typically would like to keep this to less than 10 distinct colors or shades. The
    Color Brewer website at [https://colorbrewer2.org](https://colorbrewer2.org) provides
    color palettes ranging from 3 to 12 distinct shades for mapping. Some users will
    be able to distinguish additional distinct colors, but it is best to err on the
    low side and minimize the number of map colors. You can also decide on colors
    based on your data distributions and find that you may need as few as 3 or as
    many as 9 or 10 colors to tell the story correctly.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 颜色可以用来深入了解分类维度和数值度量。这将使用户获得一个良好的视觉提示，帮助他们看到信息中的地理相关模式。在使用颜色时，重要的是要记住，人类视觉系统在观察颜色方面有一个有限的范围；你通常希望将其保持在10种不同的颜色或色调以下。位于[https://colorbrewer2.org](https://colorbrewer2.org)的Color
    Brewer网站提供了从3到12种不同色调的调色板，用于地图绘制。一些用户可能能够区分更多的不同颜色，但最好还是保守一些，尽量减少地图颜色的数量。你也可以根据你的数据分布来决定颜色，可能会发现你需要3种或多达9种或10种颜色来正确地讲述故事。
- en: 'Here, you can see an example of coloring using neighborhood groups in which
    you have nine colors:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，你可以看到一个使用邻域组着色的例子，其中你有九种颜色：
- en: '![Figure 6.34: Coloring a symbol map using the Neighbourhood Group dimension'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.34：使用邻域组维度着色符号地图'
- en: '](img/B16342_06_34.jpg)'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_34.jpg)'
- en: 'Figure 6.34: Coloring a symbol map using the Neighbourhood Group dimension'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.34：使用邻域组维度着色符号地图
- en: Notice how easily each neighborhood group is seen when you use distinct colors.
    Using a color palette with distinctly different colors is very helpful in this
    case, whereas a single color with shaded gradations would be more difficult to
    interpret. This same approach can be applied when you have distinct categories
    such as political districts or postal codes. On the other hand, if you wanted
    to see the percentage of voters voting for a political party or candidate, the
    best approach is to use shades of a single color to reflect percentages ranging
    from the minimum to maximum levels (perhaps 10% to 70% as an example).
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，当你使用不同的颜色时，每个邻域组是如何容易地被看到的。在这种情况下，使用具有明显不同颜色的调色板非常有帮助，而使用单一颜色和渐变阴影则更难以解释。当你有如政治区域或邮政编码这样的不同类别时，可以应用相同的方法。另一方面，如果你想要看到为政治党派或候选人投票的选民百分比，最佳方法是使用单一颜色的阴影来反映从最小到最大水平的百分比（例如，可能是10%到70%）。
- en: 'To color the map, you perform the following steps:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 要给地图上色，请执行以下步骤：
- en: Drag the coloring field (`Neighbourhood Group` in this case) to the `Color` card.
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将着色字段（在这种情况下为`邻域组`）拖动到`颜色`卡片上。
- en: Select the `Color` card to edit colors if needed.
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，选择`颜色`卡片来编辑颜色。
- en: Choose an opacity level for optimal display; less than 100% opacity is recommended,
    especially when there are overlapping symbols on a map. This will improve data
    visibility.
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个最佳显示的透明度级别；建议使用小于100%的透明度，尤其是在地图上有重叠符号时。这将提高数据可见性。
- en: Sizing a Symbol Map
  id: totrans-257
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 调整符号地图的大小
- en: Individual points may also be sized based on values in the data, typically based
    on a single measure. For example, you may choose to display points sized based
    on revenue for each store location. Stores with higher revenue will have a larger
    dot (or another symbol) corresponding to their revenue relative to locations with
    lower values. This can be an effective approach, given that size differences are
    one of the more easily detected visual cues.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 单个点也可以根据数据中的值来调整大小，通常基于单一度量。例如，你可能选择根据每个门店位置的销售额来显示点的大小。收入较高的门店将有一个较大的点（或其他符号），与其相对较低值的地点的收入相对应。这种方法是有效的，因为大小差异是更容易检测到的视觉线索之一。
- en: In the Madrid example, the dots are sized based on the number of bedrooms for
    each lodging. You can keep the colors already created so that your map will become
    even more informative for the viewer.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 在马德里示例中，点的大小是根据每个住宿的卧室数量来确定的。你可以保留已经创建的颜色，这样你的地图对观众来说将变得更加信息丰富。
- en: 'To do this, follow these steps:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 要这样做，请遵循以下步骤：
- en: Drag the `Bedrooms` dimension to the `Size` card in the `Marks` area of your worksheet.
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`卧室`维度拖动到工作表中的`标记`区域的`大小`卡片上。
- en: Click on the `Size` card and adjust the symbol size using the slider tool.
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`大小`卡片，并使用滑块工具调整符号大小。
- en: 'Zoom in so you can see the effect more clearly:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 缩放以更清楚地看到效果：
- en: '![Figure 6.35: Sizing map symbols using the Bedrooms dimension'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.35：使用卧室维度来调整地图符号的大小'
- en: '](img/B16342_06_35.jpg)'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_06_35.jpg]'
- en: 'Figure 6.35: Sizing map symbols using the Bedrooms dimension'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.35：使用卧室维度来调整地图符号的大小
- en: You now have points with anywhere from `0` to `8` bedrooms, with the differences
    quite noticeable at this zoom level. It may take a bit of work to distinguish
    between `6` and `7` or `3` and `4`; this is where tooltips can provide further
    clarity. You can easily adjust the size of your marks by selecting the `Size`
    card and dragging the bar to the left or right.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在有从`0`到`8`个卧室的点，在这个缩放级别上差异相当明显。区分`6`和`7`或`3`和`4`可能需要一点工作；这就是提示信息可以提供更多清晰度的地方。你可以通过选择`Size`卡片并拖动条到左边或右边来轻松调整标记的大小。
- en: Using Shapes in a Symbol Map
  id: totrans-268
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在符号地图中使用形状
- en: Let's continue exploring using the Madrid data. You have already used color
    and size to make your map more informative; now you can add shapes to provide
    one more level of detail to the map. At this point, you may wish to be careful
    by not adding too many shapes to the display, so a simple category is in order.
    Use the `Instant Bookable` field since it contains just two values.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们继续使用马德里数据来探索。你已经使用了颜色和大小来使你的地图更具信息量；现在你可以添加形状，为地图提供更多一层细节。在这个阶段，你可能希望小心不要在显示中添加太多形状，因此一个简单的类别就足够了。使用`Instant
    Bookable`字段，因为它只包含两个值。
- en: 'To create this map, follow these steps:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建此地图，请按照以下步骤操作：
- en: Simply drag the `Instant Bookable` dimension to the `Shape` card.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 简单地将`Instant Bookable`维度拖到`Shape`卡片上。
- en: Select the shapes you wish to display for each value by clicking on the `Shape`
    card and assigning a shape value to each data category.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击`Shape`卡片并为每个数据类别分配一个形状值来选择你希望显示的形状。
- en: 'Here is the result:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 这是结果：
- en: '![Figure 6.36: Using shapes to show the Instant Bookable value'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.36：使用形状来展示即时可预订的价值'
- en: '](img/B16342_06_36.jpg)'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_06_36.jpg]'
- en: 'Figure 6.36: Using shapes to show the Instant Bookable value'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.36：使用形状来展示即时可预订的价值
- en: Now you have a map that provides a wealth of information to the user, including
    neighborhood group, number of bedrooms, and whether a property is instantly bookable.
    To provide even more insight, you can customize tooltips so that users learn more
    about a property as they hover over a point.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你有一个为用户提供丰富信息的地图，包括社区群体、卧室数量以及物业是否可以即时预订。为了提供更多见解，你可以自定义提示信息，以便用户在悬停于某个点时了解更多关于该物业的信息。
- en: Adding Map Tooltips
  id: totrans-278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加地图提示信息
- en: Providing informational tooltips is a great finishing touch that helps users
    navigate maps and the underlying information they contain. While map labels can
    be helpful, there is a point at which they become visual noise that obscures the
    meaningful information contained in the map. This is where tooltips become especially
    useful as they can hold a lot of information without getting in the way of the
    map display.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 提供信息提示是一个很好的收尾，有助于用户导航地图及其包含的底层信息。虽然地图标签可能很有帮助，但它们最终会变成视觉噪音，掩盖地图中包含的有意义信息。这就是提示信息变得特别有用的地方，因为它们可以包含大量信息，而不会妨碍地图显示。
- en: Let's walk through a quick example of building a simple yet informative tooltip
    in your map. You've already seen tooltips in their simplest version, but they
    are capable of so much more, as you're about to see.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速浏览一个在地图中构建简单但信息丰富的提示示例。你已经看到了提示的最简单版本，但它们的功能远不止于此，正如你即将看到的。
- en: To add additional fields to a tooltip, simply drag dimensions or measures to
    the `Tooltip` card in the `Marks` pane. This will make these fields accessible
    even if they don't wind up being used in your text. Tableau, by default, will
    provide a functional tooltip containing information associated with the map, as
    seen in Figure 6.37 With just a little effort and the use of contrasting font
    colors, tooltips can become much more powerful. You can drag the `Host Name`,
    `Host Response Rate`, `Zipcode`, and `Summary` dimensions to the `Tooltip` card
    and continue to use the existing `Neighbourhood Group` and `Bedrooms` dimensions
    to tell a small story about the property, as seen in *Figure 6.38*.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 要向工具提示添加更多字段，只需将维度或度量拖到“标记”面板中的“工具提示”卡片上。这将使这些字段即使在你的文本中没有被使用时也能被访问。默认情况下，Tableau
    将提供一个包含与地图相关的信息的功能工具提示，如图6.37所示。只需一点努力和对比字体颜色的使用，工具提示就可以变得更有力。你可以将“主机名”、“主机响应率”、“邮编”和“摘要”维度拖到“工具提示”卡片上，并继续使用现有的“邻里组”和“卧室”维度来讲述关于该物业的小故事，如图*图6.38*所示。
- en: '![Figure 6.37: Customizing tooltips to tell a detailed story'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.37：自定义工具提示以讲述详细的故事'
- en: '](img/B16342_06_37.jpg)'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_37.jpg)'
- en: 'Figure 6.37: Customizing tooltips to tell a detailed story'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.37：自定义工具提示以讲述详细的故事
- en: As you can see, tooltips are a great way to include helpful information without
    the need to clutter a map with too much detail.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，工具提示是一个很好的方式来包含有用的信息，而无需在地图上添加太多细节。
- en: Navigating Symbol Maps
  id: totrans-286
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 导航符号地图
- en: 'Tableau provides some simple tools for navigating maps. In the upper-left area
    of the `Map` window is a small toolbar with the following features:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau 提供了一些简单的工具来导航地图。在“地图”窗口的左上角有一个小工具栏，具有以下功能：
- en: Search creates the ability to locate elements in a map.
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 搜索功能可以定位地图中的元素。
- en: Zoom in is very useful for navigating a densely populated map.
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 放大对于导航人口密集的地图非常有用。
- en: Zoom out can be used to display an entire map and provide surrounding context.
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缩小可以用来显示整个地图并提供周围的环境。
- en: Reset map will set the map to a fixed display size.
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重置地图将地图设置为固定的显示大小。
- en: Zoom area is an extension of zoom in that allows you to select a specific part
    of the map to zoom in on.
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 区域放大是放大的一种扩展，允许你选择地图的特定部分进行放大。
- en: Pan provides the ability to move the map up and down or side to side.
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 平移功能允许你上下或左右移动地图。
- en: The three selection tools (rectangle, radius, and lasso) enable highlighting
    elements within a selected portion of the map.
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 三个选择工具（矩形、半径和套索）允许在选定的地图部分中突出显示元素。
- en: These tools make it easy to move the map within the map window, enlarge or shrink
    the data points, fix the display size (using reset map), and create custom selections
    using the three selection tools. Map data can also be filtered by using the map
    legends, as you'll see in the next section.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 这些工具使得在地图窗口内移动地图、放大或缩小数据点、固定显示大小（使用重置地图）以及使用三个选择工具创建自定义选择变得容易。地图数据也可以通过使用地图图例进行过滤，正如你将在下一节中看到的。
- en: Filtering Symbol Maps
  id: totrans-296
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 过滤符号地图
- en: In an earlier section, you learned about the challenge of differentiating between
    places with three or four bedrooms, since the symbols are nearly the same size.
    This presents an issue for a user who may require four bedrooms but cannot easily
    see the difference based on symbol size. To address this, the user can simply
    click on the `4` in the `Bedrooms` legend and select the `Keep Only` option. Tableau
    will automatically add a filter to the `Filters` pane reflecting this selection.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的部分，你学习了如何区分带有三四个卧室的地方的挑战，因为符号的大小几乎相同。这对可能需要四个卧室但无法通过符号大小轻松区分的用户来说是一个问题。为了解决这个问题，用户可以简单地点击“卧室”图例中的“4”，并选择“仅保留”选项。Tableau
    将自动在“过滤器”面板中添加一个过滤器，反映这个选择。
- en: 'The same can be done using the `Color` legend you have for `Neighbourhood Group`.
    With colors, you can click on one or more options and the data will be highlighted.
    In this case, both the `Centro` and `Chamberi` neighborhood groups have been selected,
    yielding this result:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，你可以使用为“邻里组”提供的“颜色”图例来做这件事。使用颜色，你可以点击一个或多个选项，数据将被突出显示。在这种情况下，已经选择了“Centro”和“Chamberi”两个邻里组，得到以下结果：
- en: '![Figure 6.38: Filtering a map by selecting legend values'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.38：通过选择图例值过滤地图'
- en: '](img/B16342_06_38.jpg)'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_38.jpg)'
- en: 'Figure 6.38: Filtering a map by selecting legend values'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.38：通过选择图例值过滤地图
- en: You could also select the `Keep Only` option and Tableau will add a filter reflecting
    your choice.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以选择“仅保留”选项，Tableau 将添加一个反映您选择的过滤器。
- en: The shapes filter works like the size filter, allowing users to select the `Keep
    Only` option to set up a filter. Alternatively, users can choose the `Exclude`
    option if they wish to remove some locations from the map.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 形状过滤器的工作方式与大小过滤器类似，允许用户选择“仅保留”选项来设置过滤器。或者，如果用户希望从地图中删除某些位置，可以选择“排除”选项。
- en: While these are very useful options, users can go one step further and build
    new groups and sets using map data. We'll visit those options in the next section.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这些选项非常有用，但用户可以更进一步，使用地图数据构建新的组和集合。我们将在下一节中访问这些选项。
- en: Creating Groups and Sets from Symbol Map Data
  id: totrans-305
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 从符号图数据创建组和集合
- en: One of the useful functions in Tableau mapping is the ability to create groups
    and sets based on a selection of points in a map. This is important because you
    won't always be aware of patterns until seeing them on a map. You can then grab
    a collection of data points using rectangular, radial, or lasso selections and
    create a group or set immediately. This is a powerful feature that allows users
    to take advantage of patterns revealed on a map to create meaningful aggregations
    of data.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau 地图中的一个有用功能是能够根据地图上点的选择创建组和集合。这很重要，因为您可能不会总是意识到模式，直到在地图上看到它们。然后，您可以使用矩形、环形或套索选择来选择一组数据点，并立即创建一个组或集合。这是一个强大的功能，允许用户利用地图上揭示的模式来创建有意义的聚合数据。
- en: Consider the following example using your previously created symbol map. Using
    the map toolbar, select the rectangular selection tool and highlight an area of
    points with it. (Notice the different colors for all the points in your selection
    area.)
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下使用您之前创建的符号图的示例。使用地图工具栏，选择矩形选择工具，并用它突出显示点的一个区域。（注意您选择区域中所有点的不同颜色。）
- en: '![Figure 6.39: Selected points are displayed in a different color'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.39：选中的点以不同的颜色显示'
- en: '](img/B16342_06_39.jpg)'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_39.jpg)'
- en: 'Figure 6.39: Selected points are displayed in a different color'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.39：选中的点以不同的颜色显示
- en: 'You then create a group for the selected points by using the `Group Members`
    icon:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 然后您通过使用“组成员”图标为选定的点创建一个组：
- en: '![Figure 6.40: Creating a group dimension using the Group Members icon'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.40：使用“组成员”图标创建组维度'
- en: '](img/B16342_06_40.jpg)'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_40.jpg)'
- en: 'Figure 6.40: Creating a group dimension using the Group Members icon'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.40：使用“组成员”图标创建组维度
- en: Tableau has now created a group in the `Dimensions` pane that can be used in
    your analysis. This is a more intuitive, faster means to create groups rather
    than doing it manually using the group function.
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau 现在在“维度”面板中创建了一个组，可以在分析中使用。这是一种比手动使用组功能创建组更直观、更快捷的方法。
- en: 'The steps to do this are as follows:'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来完成此操作：
- en: Select the rectangular selection tool from the map toolbar.
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从地图工具栏中选择矩形选择工具。
- en: '![Figure 6.41: Selecting the rectangular selection tool'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.41：选择矩形选择工具](img/B16342_06_42.jpg)'
- en: '](img/B16342_06_41.jpg)'
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_41.jpg)'
- en: 'Figure 6.41: Selecting the rectangular selection tool'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.41：选择矩形选择工具
- en: Highlight the area you wish to select within the map.
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在地图中突出显示您希望选择的区域。
- en: Hover over any of the selected data symbols.
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将鼠标悬停在所选的任何数据符号上。
- en: Select the `Group Members` icon, as shown previously.
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择之前显示的“组成员”图标。
- en: 'You can inspect your results to verify the group has been created:'
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以检查您的结果以验证组已创建：
- en: '![Figure 6.42: Viewing the values in the newly created group'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.42：查看新创建的组中的值'
- en: '](img/B16342_06_42.jpg)'
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_39.jpg)'
- en: 'Figure 6.42: Viewing the values in the newly created group'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.42：查看新创建的组中的值
- en: This example illustrates another way you can use geographic data and maps to
    expand your analysis capabilities. You will now practice these concepts around
    the symbol map, including grouping locations and coloring them according to their groups.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 这个例子说明了另一种您可以使用地理数据和地图来扩展分析能力的方法。您现在将围绕符号图练习这些概念，包括对位置进行分组并按其组进行着色。
- en: 'Exercise 6.05: Building a Symbol Map'
  id: totrans-329
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 6.05：构建符号图
- en: In this exercise, you will create a symbol map using data from the Madrid listings
    data. This will help provide insight into listing patterns across the city.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将使用马德里列表数据创建一个符号图。这将有助于了解整个城市的列表模式。
- en: 'Perform the following steps to complete this exercise:'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来完成此练习：
- en: Import the `Madrid listings` dataset if you have not already done so.
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你还没有这样做，请导入`Madrid listings`数据集。
- en: Create a data source by joining multiple files as shown in previous sections/exercises.
  id: totrans-333
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过像前几节/练习中所示的方式将多个文件连接起来创建数据源。
- en: Add a new Tableau worksheet.
  id: totrans-334
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个新的Tableau工作表。
- en: 'Drag the `Longitude` measure to the `Rows` shelf and the `Latitude` measure
    to the `Columns` shelf. (Use these rather than the generated values provided by
    Tableau.) Change both `Longitude` and `Latitude` to `Dimension`:'
  id: totrans-335
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`经度`度量拖到`行`架上，将`纬度`度量拖到`列`架上。（使用这些度量而不是Tableau提供的生成值。）将`经度`和`纬度`都改为`维度`：
- en: '![Figure 6.43: Setting Latitude values to Dimension'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.43：将纬度值设置为维度'
- en: '](img/B16342_06_43.jpg)'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片B16342_06_43.jpg]'
- en: 'Figure 6.43: Setting Latitude values to Dimension'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.43：将纬度值设置为维度
- en: Drag the `City` dimension to the `Detail` card and the `SUM(Number of Records)`
    measure to the `Size` card and adjust the symbol size to better display all points.
    If for some reason you don't get a Map, click on "Show Me" card and manually select
    `Symbol Maps` from.
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`城市`维度拖到`详细`卡上，将`SUM(记录数)`度量拖到`大小`卡上，并调整符号大小以更好地显示所有点。如果由于某种原因你没有得到地图，请点击“显示我”卡，并手动选择“符号地图”。
- en: '![Figure 6.44: Adjusting the Size card for displaying symbols on the map'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.44：调整大小卡以在地图上显示符号'
- en: '](img/B16342_06_44.jpg)'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片B16342_06_44.jpg]'
- en: 'Figure 6.44: Adjusting the Size card for displaying symbols on the map'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.44：调整大小卡以在地图上显示符号
- en: 'Replace `SUM(Number of Records)` with the `Accommodates` measure on the `Size`
    card:'
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`SUM(记录数)`替换为`Size`卡上的`Accommodates`度量：
- en: '![Figure 6.45: Using the Accommodates dimension to size points on the map'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.45：使用“容纳”维度来调整地图上的点的大小'
- en: '](img/B16342_06_45.jpg)'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片B16342_06_45.jpg]'
- en: 'Figure 6.45: Using the Accommodates dimension to size points on the map'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.45：使用“容纳”维度来调整地图上的点的大小
- en: 'Drag the `Neighbourhood Group` dimension to the `Color` card and call this
    worksheet `Madrid Accommodates Map`. You will be using the same worksheet later
    in the chapter in *Exercise 6.07: Creating a Dual-Axis Map*:'
  id: totrans-347
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`邻域组`维度拖到`颜色`卡上，并将此工作表命名为`Madrid Accommodates Map`。你将在本章后面的*练习6.07：创建双轴地图*中使用相同的工作表：
- en: '![Figure 6.46: Coloring the map using the Neighbourhood Group dimension'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.46：使用邻域组维度着色地图'
- en: '](img/B16342_06_46.jpg)'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片B16342_06_46.jpg]'
- en: 'Figure 6.46: Coloring the map using the Neighbourhood Group dimension'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.46：使用邻域组维度着色地图
- en: It is now easy to identify the density of listings in the Centro neighborhood
    (displayed as the orange cluster in the lower half of the screenshot). Each of
    the surrounding neighborhoods has fewer listings scattered across the map due
    to their greater distance from the primary tourist attractions found in Centro.
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 现在很容易识别Centro邻域（在截图下半部分显示为橙色簇）的列表密度。由于它们距离Centro的主要旅游景点较远，周围的每个邻域在地图上都有较少的列表分散。
- en: In this exercise, you created a symbol map that details listing patterns across
    the city of Madrid. This map can form the basis for additional insights using
    multiple measures, parameters, and filters. In the upcoming section, you will
    review the second type of map that Tableau supports, which is choropleth maps,
    which you briefly learned about at the start of the chapter.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，你创建了一个符号地图，详细展示了马德里市内的列表模式。这张地图可以作为使用多个度量、参数和筛选器进行额外洞察的基础。在接下来的部分中，你将回顾Tableau支持的地图的第二种类型，即颜色渐变地图，这是你在本章开头简要了解的。
- en: Choropleth (Filled) Maps
  id: totrans-353
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 颜色渐变（填充）地图
- en: 'Choropleth maps differ from symbol maps in one important respect: locations
    are now based on shapes (polygons, lines, or points) rather than on a single point
    using latitude/longitude coordinates. These maps will typically use officially
    defined geographic designations (country, state, city) as the basis for analysis,
    with colors as the primary method for displaying measures since size and shape
    are already defined. Filled maps may also be used with symbol maps to provide
    multiple levels of geographic analysis.'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 颜色渐变地图与符号地图在一点上有所不同：现在位置基于形状（多边形、线条或点）而不是基于经纬度坐标的单一点。这些地图通常使用官方定义的地理名称（国家、州、城市）作为分析的基础，颜色是显示度量的主要方法，因为大小和形状已经定义。填充地图也可以与符号地图一起使用，以提供多层次的地理分析。
- en: Note
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: 'For `Avg Area` measure creation mentioned in the topic below, if you are using
    any further version of Tableau than 2020.1, the field `Number of Records` does
    not exist. For creating `Avg Area` measure, you can explicitly create `Number
    of Records` on your own. Please refer to this link for more information: [https://tarsolutions.co.uk/blog/number-of-records-missing-in-tableau/](https://tarsolutions.co.uk/blog/number-of-records-missing-in-tableau/).'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 对于下面主题中提到的`平均面积`度量创建，如果你使用的是Tableau 2020.1之后的任何版本，则字段`记录数`不存在。为了创建`平均面积`度量，你可以明确地自己创建`记录数`。请参阅此链接获取更多信息：[https://tarsolutions.co.uk/blog/number-of-records-missing-in-tableau/](https://tarsolutions.co.uk/blog/number-of-records-missing-in-tableau/)。
- en: Coloring a Choropleth Map
  id: totrans-357
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 为 choropleth 地图着色
- en: As previously noted, colors will generally be the method used to display measure
    differences in a filled map. Distinct color sets are used when comparing dimension
    (categorical) values, while shaded palettes are the best approach for displaying measures.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，颜色通常用于在填充地图中显示度量差异。在比较维度（分类）值时使用不同的颜色集，而阴影调色板是显示度量的最佳方法。
- en: 'Let''s look at these two cases, first using a dimension, followed by a measure
    example. Both examples will use the previously downloaded `New York City zoning
    data`. For the dimension example, no new fields are needed; you simply drag the
    `Geometry` measure to the `Detail` card, allowing Tableau to use the shapefile
    polygon data, and then drag the `zonedist` dimension to the `Color` card. The
    result looks like this:'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看这两个案例，首先是一个维度示例，然后是一个度量示例。这两个示例都将使用之前下载的`纽约市分区数据`。对于维度示例，不需要新的字段；你只需将`几何`度量拖到`详细`卡片上，让Tableau使用shapefile多边形数据，然后将`zonedist`维度拖到`颜色`卡片上。结果看起来像这样：
- en: '![Figure 6.47: New York City zoning map colored by detailed zonedist values'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.47: New York City zoning map colored by detailed zonedist values'
- en: '](img/B16342_06_47.jpg)'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_06_47.jpg]'
- en: 'Figure 6.47: New York City zoning map colored by detailed zonedist values'
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.47：根据详细分区距离值着色的纽约市分区地图
- en: 'Note that you have many detailed zoning types. These could probably be aggregated
    to present a similar map without unnecessary detail. To do this, you''ll create
    a simple grouped field from the `zonedist` values, with very high-level groups
    in which zones starting with `C` are commercial zones, `M` are manufacturing zones,
    and `R` are residential zones; the others are self-explanatory. Let''s revisit
    the map and drag the `zonedist (group)` dimension to the `Color` card. Here''s
    your new map:'
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，你有许多详细的分区类型。这些可能需要聚合以呈现类似地图，而不需要不必要的细节。为此，你将创建一个简单的从`zonedist`值中分组的字段，其中非常高级的组包括以`C`开头的商业区域，`M`是制造区域，`R`是住宅区域；其他的是不言而喻的。让我们重新查看地图并将`zonedist
    (group)`维度拖到`颜色`卡片上。这是你的新地图：
- en: '![Figure 6.48: New York City zoning map colored by grouped zonedist values'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.48: New York City zoning map colored by grouped zonedist values'
- en: '](img/B16342_06_48.jpg)'
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: '![img/B16342_06_48.jpg]'
- en: 'Figure 6.48: New York City zoning map colored by grouped zonedist values'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: '![Figure 6.48: New York City zoning map colored by grouped zonedist values'
- en: Now you can see the more evident patterns between residential, commercial, and
    manufacturing areas, which were previously masked by the many subtypes within
    each designation.
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可以看到住宅、商业和制造区域之间更明显的模式，这些模式之前被每个指定内的许多子类型所掩盖。
- en: You can use the same data to create a filled map based on measures, although
    you'll need to do a little work to create some new measures. Some datasets may
    have useful measures included (income, population density, and so on) but that
    isn't the case here. You'll create two measures you can use on the map (`Avg Area`
    and `Zone Counts`) using the following formulas.
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用相同的数据创建基于度量的填充地图，尽管你需要做一些工作来创建一些新的度量。某些数据集可能包含有用的度量（如收入、人口密度等），但这里不是这种情况。你将创建两个可以在地图上使用的度量（`平均面积`和`区域计数`），使用以下公式。
- en: 'The `Avg Area` measure can be created using the following steps:'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用以下步骤创建`平均面积`度量：
- en: Right-click in the `Data` panel and select `Create Calculated Field`.
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`数据`面板中右键单击并选择`创建计算字段`。
- en: Enter the `SUM([Shape Area])/SUM([Number of Records])` formula.
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`SUM([Shape Area])/SUM([Number of Records])`公式。
- en: Name the calculation `Avg Area` and click the `OK` button to close the window.
  id: totrans-372
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将计算命名为`平均面积`并点击`确定`按钮关闭窗口。
- en: 'Zone Counts can be created in a similar manner:'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 可以以类似的方式创建`区域计数`：
- en: Right-click in the `Data` panel and select `Create Calculated Field`.
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`数据`面板中右键单击并选择`创建计算字段`。
- en: Enter the `COUNT([Zonedist])` formula.
  id: totrans-375
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`COUNT([Zonedist])`公式。
- en: Name the calculation `Zone Counts` and click the `OK` button to close the window.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将计算命名为“区域计数”并点击“确定”按钮关闭窗口。
- en: 'You can now create a filled map using either of these measures as the color.
    Drag `zonedist` on the `Detail` card and `Zone Counts` to the `Color` card to
    update the map, like this:'
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在可以使用这两个度量之一作为颜色创建填充地图。将`zonedist`拖到“详细”卡上，将`Zone Counts`拖到“颜色”卡上以更新地图，如下所示：
- en: '![Figure 6.49: New York City zoning map colored by zone counts'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.49：按区域计数着色的纽约市分区地图'
- en: '](img/B16342_06_49.jpg)'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_49.jpg)'
- en: 'Figure 6.49: New York City zoning map colored by zone counts'
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.49：按区域计数着色的纽约市分区地图
- en: You now see each zone colored by the frequency of occurrence (notice the highest
    count is represented by the darkest color). This is the type of color scheme to
    use when you have a continuous measure displayed on a map, as opposed to the dimension
    map where you used distinct colors. When numbers are below zero or an average
    value, a two-color scheme is useful to show low versus high values (red to blue,
    for example). Tableau has many native color palettes to choose from, making it
    easy to create compelling maps.
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在看到每个区域都按出现频率着色（注意最高计数用最深的颜色表示）。当您在地图上显示连续度量时，这种类型的颜色方案很有用，而不是您在维度地图上使用的不同颜色。当数字低于零或平均值时，双色方案很有用，可以显示低值与高值（例如，红色到蓝色）。Tableau有许多原生的颜色调色板可供选择，这使得创建引人入胜的地图变得容易。
- en: Navigating a Choropleth Map
  id: totrans-382
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在等值线地图中导航
- en: 'You can use the same map tools discussed in the symbol map section when navigating
    a map:'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 在导航地图时，您可以使用在符号图部分讨论的相同地图工具：
- en: Search creates the ability to locate elements in a map.
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 搜索创建在地图中定位元素的能力。
- en: Zoom in is very useful for navigating a densely populated map.
  id: totrans-385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用缩入对于在人口密集的地图中导航非常有用。
- en: Zoom out can be used to display an entire map and provide surrounding context.
  id: totrans-386
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用缩出可以显示整个地图并提供周围环境。
- en: Reset map will set the map to a fixed display size.
  id: totrans-387
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重置地图将地图设置为固定的显示大小。
- en: Zoom area is an extension of zoom in that allows you to select a specific part
    of the map to zoom in on.
  id: totrans-388
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缩放区域是缩放的一种扩展，允许您选择地图的特定部分进行缩放。
- en: Pan provides the ability to move the map up and down or side to side.
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 平移提供移动地图上下或左右的能力。
- en: Three selection tools (rectangle, radius, and lasso) enable highlighting elements
    within a selected portion of the map.
  id: totrans-390
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 三个选择工具（矩形、半径和套索）允许在选定的地图部分突出显示元素。
- en: Filtering a Choropleth Map
  id: totrans-391
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 过滤等值线地图
- en: You can also use the same filtering tools discussed in the section on filtering
    a symbol map, including the ability to create groups and sets using the selection
    tools. Note that when selecting areas on a filled map, you do not need to select
    an entire area to include it in your group or set. If you need more precision,
    then click on each desired area to build new groups or sets. Now, you will execute
    the following steps to build your own choropleth maps.
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用在符号图过滤部分讨论的相同过滤工具，包括使用选择工具创建组和集合的能力。请注意，在选择填充地图上的区域时，您不需要选择整个区域才能将其包含在您的组或集合中。如果您需要更高的精度，请点击每个所需的区域以构建新的组或集合。现在，您将执行以下步骤来构建自己的等值线地图。
- en: 'Exercise 6.06: Building a Choropleth Map'
  id: totrans-393
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习6.06：构建等值线地图
- en: 'In this exercise, you will create and populate a filled map using the New York
    City zoning shapefile you downloaded in *Exercise 6.01*:'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将使用在*练习6.01*中下载的纽约市分区shapefile创建并填充一个填充地图：
- en: Open your existing Tableau workbook or create a new workbook.
  id: totrans-395
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开您现有的Tableau工作簿或创建一个新的工作簿。
- en: If you have not already done so, import the data source from [https://data.cityofnewyork.us/City-Government/Zoning-GIS-Data-Shapefile/kdig-pewd](https://data.cityofnewyork.us/City-Government/Zoning-GIS-Data-Shapefile/kdig-pewd).
  id: totrans-396
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您还没有这样做，请从[https://data.cityofnewyork.us/City-Government/Zoning-GIS-Data-Shapefile/kdig-pewd](https://data.cityofnewyork.us/City-Government/Zoning-GIS-Data-Shapefile/kdig-pewd)导入数据源。
- en: 'Add the data source by navigating to the `Data` | `New Data Source` menu:'
  id: totrans-397
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过导航到“数据”|“新建数据源”菜单添加数据源：
- en: '![Figure 6.50: Adding a new data source'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.50：添加新的数据源'
- en: '](img/B16342_06_50.jpg)'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_50.jpg)'
- en: 'Figure 6.50: Adding a new data source'
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.50：添加新的数据源
- en: 'Select the `Spatial file` option:'
  id: totrans-401
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“空间文件”选项：
- en: '![Figure 6.51: Connecting to a spatial file'
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.51：连接到空间文件'
- en: '](img/B16342_06_51.jpg)'
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_51.jpg)'
- en: 'Figure 6.51: Connecting to a spatial file'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.51：连接到空间文件
- en: 'Locate your downloaded file and select it. A sample of the data will appear
    in the import window:'
  id: totrans-405
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位您的下载文件并选择它。数据样本将出现在导入窗口中：
- en: '![Figure 6.52: Viewing the spatial file attributes'
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.52：查看空间文件属性'
- en: '](img/B16342_06_52.jpg)'
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_52.jpg)'
- en: 'Figure 6.52: Viewing the spatial file attributes'
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.52：查看空间文件属性
- en: 'Add a new worksheet and make sure it uses the spatial data source:'
  id: totrans-409
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个新的工作表，并确保它使用空间数据源：
- en: '![Figure 6.53: A worksheet with dimensions and measures from the spatial file'
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.53：包含来自空间文件维度和度量的工作表'
- en: '](img/B16342_06_53.jpg)'
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_53.jpg)'
- en: 'Figure 6.53: A worksheet with dimensions and measures from the spatial file'
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.53：包含来自空间文件维度和度量的工作表
- en: 'Drag the `Geometry` measure to the `Detail` card. Tableau will add `Latitude`
    and `Longitude` fields and create a map:'
  id: totrans-413
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `Geometry` 度量拖到 `Detail` 卡片。Tableau 将添加 `Latitude` 和 `Longitude` 字段并创建一个地图：
- en: '![Figure 6.54: Adding the Geometry measure to the Detail card'
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.54：将几何度量添加到 Detail 卡片'
- en: '](img/B16342_06_54.jpg)'
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_54.jpg)'
- en: 'Figure 6.54: Adding the Geometry measure to the Detail card'
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.54：将几何度量添加到 Detail 卡片
- en: 'Drag the `zonedist` dimension to the `Color` card:'
  id: totrans-417
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `zonedist` 维度拖到 `Color` 卡片：
- en: '![Figure 6.55: Coloring the map using the zonedist dimension'
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.55：使用区域距离维度着色地图'
- en: '](img/B16342_06_55.jpg)'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_55.jpg)'
- en: 'Figure 6.55: Coloring the map using the zonedist dimension'
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.55：使用区域距离维度着色地图
- en: Create a `zonedist (group)` dimension by summarizing all R, C, and M zones into
    `RESIDENTIAL`, `COMMERCIAL`, and `MANUFACTURING` groups. Click `OK` to save the
    group as a dimension.
  id: totrans-421
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过将所有 R、C 和 M 区域汇总到 `RESIDENTIAL`、`COMMERCIAL` 和 `MANUFACTURING` 组中创建一个 `zonedist
    (group)` 维度。点击 `OK` 保存该组为维度。
- en: '![Figure 6.56: Creating a zonedist (group) dimension'
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.56：创建区域距离（组）维度'
- en: '](img/B16342_06_56.jpg)'
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_56.jpg)'
- en: 'Figure 6.56: Creating a zonedist (group) dimension'
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.56：创建区域距离（组）维度
- en: 'Drag the `zonedist (group)` dimension to the `Color` card:'
  id: totrans-425
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `zonedist (group)` 维度拖到 `Color` 卡片：
- en: '![Figure 6.57: Coloring the map using zonedist (group)'
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.57：使用区域距离（组）着色地图'
- en: '](img/B16342_06_48.jpg)'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_48.jpg)'
- en: 'Figure 6.57: Coloring the map using zonedist (group)'
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.57：使用区域距离（组）着色地图
- en: In this exercise, you added a spatial data source and used the `Geometry` field
    to populate a map. You also learned how to color the map using both an existing
    and a newly created dimension. In the following subsection, you will gain an understanding
    of how to use dual-axis maps and when are they used.
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，你添加了一个空间数据源，并使用 `Geometry` 字段填充地图。你还学习了如何使用现有和新建的维度来着色地图。在接下来的小节中，你将了解如何使用双轴地图以及它们何时被使用。
- en: Dual-Axis Maps
  id: totrans-430
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 双轴地图
- en: Tableau allows you to create dual-axis maps so that you can overlay point data
    on a polygon map or simply use the second axis to display the data in a new way.
    This type of map could be used when you wish to overlay two data variables with
    different purposes for each, or even from distinct data sources. For instance,
    you could overlay a dataset based on geographic boundaries (states) with one using
    symbol data (latitude/longitude addresses), or you can simply create additional
    information from a single set of data points, as the following example will illustrate.
    In this example, you will use the second axis to create a density map to show
    areas within Madrid with the highest concentrations of Airbnb properties.
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau 允许你创建双轴地图，这样你就可以在多边形地图上叠加点数据，或者简单地使用第二个轴以新的方式显示数据。这种类型的地图可以在你希望叠加两个具有不同目的的数据变量，或者甚至来自不同数据源时使用。例如，你可以叠加基于地理边界（州）的数据集与使用符号数据（纬度/经度地址）的数据集，或者你可以简单地从一组数据点创建附加信息，如下面的示例所示。在这个示例中，你将使用第二个轴创建一个密度地图，以显示马德里地区
    Airbnb 属性的最高浓度区域。
- en: To do this, you start with an existing symbol map like the one built earlier
    in this chapter. All you need to do to create a dual-axis map is to drag the `Latitude`
    measure to the `Columns` shelf, placing it to the right of the existing `Latitude` measure.
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 要做到这一点，你从一个现有的符号地图开始，就像本章前面构建的那样。创建双轴地图，你只需要将 `Latitude` 度量拖到 `Columns` 面板，将其放置在现有的
    `Latitude` 度量右侧。
- en: '![Figure 6.58: Adding a second Latitude dimension'
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.58：添加第二个纬度维度'
- en: '](img/B16342_06_58.jpg)'
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_58.jpg)'
- en: 'Figure 6.58: Adding a second Latitude dimension'
  id: totrans-435
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.58：添加第二个纬度维度
- en: Tableau will create a second map by default; you need to use the drop-down menu
    from the new `Latitude` measure and select the `Dual Axis` option. You also need
    to tell Tableau to treat your new measure as a dimension by selecting the `Dimension`
    option from the same menu.
  id: totrans-436
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau 默认创建第二个地图；您需要从新的 `纬度` 度量下拉菜单中选择 `双轴` 选项。您还需要告诉 Tableau 将您的新度量视为一个维度，通过从同一菜单中选择
    `维度` 选项。
- en: '![Figure 6.59: Setting up a Dual Axis map'
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.59：设置双轴地图'
- en: '](img/B16342_06_59.jpg)'
  id: totrans-438
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_59.jpg]'
- en: 'Figure 6.59: Setting up a Dual Axis map'
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.59：设置双轴地图
- en: Once you have the second axis specified, you can move to the `Marks` area, where
    a `Latitude (2)` entry has been added. In this case, you would choose the `Density`
    option for the display type and adjust the intensity and opacity levels to your
    preference. This will give you a map that retains the original elements from the
    map while adding the density markers.
  id: totrans-440
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦指定了第二个轴，您就可以移动到 `标记` 区域，其中已添加了一个 `纬度 (2)` 条目。在这种情况下，您会选择显示类型为 `密度` 的选项，并调整强度和透明度级别到您喜欢的程度。这将使地图保留地图的原始元素，同时添加密度标记。
- en: The `Density` option will now display areas with a higher concentration of properties
    as blurred colors. The Centro neighborhood in the middle of the map will be especially
    dense at this zoom level. As you zoom in, the individual properties will gradually
    be revealed. In this section, you revisited a dual-axis chart but in map form.
    Now you will grasp these concepts in a better way by executing the next exercise.
  id: totrans-441
  prefs: []
  type: TYPE_NORMAL
  zh: '`密度` 选项现在将以模糊的颜色显示属性浓度较高的区域。地图中间的Centro社区在此缩放级别将特别密集。当您放大时，单个属性将逐渐显示出来。在本节中，您回顾了双轴图表，但以地图的形式。现在，通过执行下一个练习，您将更好地掌握这些概念。'
- en: 'Exercise 6.07: Creating a Dual-Axis Map'
  id: totrans-442
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习6.07：创建双轴地图
- en: In this exercise, you will create a dual-axis map, using symbols for the base
    map and then adding a second axis that uses the density markers. You will use
    the Madrid Airbnb data source as you have in previous exercises.
  id: totrans-443
  prefs: []
  type: TYPE_NORMAL
  zh: 在此练习中，您将创建一个双轴地图，使用符号作为基础地图，然后添加一个使用密度标记的第二轴。您将使用与之前练习中相同的马德里Airbnb数据源。
- en: 'Perform the following steps to complete this exercise:'
  id: totrans-444
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以完成此练习：
- en: Open the `Madrid Accommodates Map` worksheet that you created in *Exercise 6.05*.
  id: totrans-445
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开您在 *练习6.05* 中创建的 `马德里住宿地图` 工作表。
- en: '![Figure 6.60: Symbol map colored by Neighbourhood Group'
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.60：按邻里组着色的符号地图'
- en: '](img/B16342_06_60.jpg)'
  id: totrans-447
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_60.jpg]'
- en: 'Figure 6.60: Symbol map colored by Neighbourhood Group'
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.60：按邻里组着色的符号地图
- en: 'Drag the `Latitude` measure to the `Rows` shelf, next to the existing `Latitude` measure:'
  id: totrans-449
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `纬度` 度量拖到 `行` 档案旁边现有的 `纬度` 度量旁边：
- en: '![Figure 6.61: Adding a dual axis using two Latitude measures'
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.61：使用两个纬度度量添加双轴'
- en: '](img/B16342_06_61.jpg)'
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_61.jpg]'
- en: 'Figure 6.61: Adding a dual axis using two Latitude measures'
  id: totrans-452
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.61：使用两个纬度度量添加双轴
- en: 'Set the new `Latitude` measure as a continuous dimension and check the `Dual
    Axis` item to combine the elements into a single map:'
  id: totrans-453
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将新的 `纬度` 度量设置为连续维度，并检查 `双轴` 项以将元素组合成单个地图：
- en: '![Figure 6.62: Selecting the Dual Axis option'
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.62：选择双轴选项'
- en: '](img/B16342_06_62.jpg)'
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_62.jpg]'
- en: 'Figure 6.62: Selecting the Dual Axis option'
  id: totrans-456
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.62：选择双轴选项
- en: 'In the `Latitude (2)` `Marks` area, choose the `Density` option:'
  id: totrans-457
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `纬度 (2)` `标记` 区域，选择 `密度` 选项：
- en: '![Figure 6.63: Selecting a Density symbol'
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.63：选择密度符号'
- en: '](img/B16342_06_63.jpg)'
  id: totrans-459
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_63.jpg]'
- en: 'Figure 6.63: Selecting a Density symbol'
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.63：选择密度符号
- en: 'Adjust the `Density` settings by clicking on the `Color` card:'
  id: totrans-461
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过单击 `颜色` 卡片调整 `密度` 设置：
- en: '![Figure 6.64: Adjusting the Density coloring'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.64：调整密度着色'
- en: '](img/B16342_06_64.jpg)'
  id: totrans-463
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_64.jpg]'
- en: 'Figure 6.64: Adjusting the Density coloring'
  id: totrans-464
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.64：调整密度着色
- en: 'View the map to see the impact of the `Density` symbols:'
  id: totrans-465
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看地图以查看 `密度` 符号的影响：
- en: '![Figure 6.65: The completed dual-axis map with symbols and density'
  id: totrans-466
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.65：带有符号和密度的完成双轴地图'
- en: '](img/B16342_06_65.jpg)'
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_65.jpg]'
- en: 'Figure 6.65: The completed dual-axis map with symbols and density'
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.65：带有符号和密度的完成双轴地图
- en: In this exercise, you created a dual-axis map using circle symbols on the first
    axis and density symbols on the second axis. You learned how to use them together
    to create a more complete map. The second level of density details that you added
    will now display areas with a higher concentration of properties as blurred colors.
    The Centro neighborhood in the middle of the map will be especially dense at this
    zoom level. These extra details on maps help end users/stakeholders to observe
    the map with extra context in one view instead of switching the view multiple
    times. In the next section, you will review what map enhancement options Tableau
    provides and how to best add/use them in your maps.
  id: totrans-469
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您创建了一个使用第一轴上的圆形符号和第二轴上的密度符号的双轴地图。您学习了如何将它们结合起来创建一个更完整的地图。您添加的第二个密度细节级别现在将以模糊的颜色显示属性浓度较高的区域。在地图中间的
    Centro 社区在这个缩放级别上将会特别密集。这些额外的地图细节有助于最终用户/利益相关者在一个视图中观察地图时获得额外的上下文，而不是多次切换视图。在下一节中，您将回顾
    Tableau 提供的地图增强选项，以及如何在您的地图中最佳地添加/使用它们。
- en: Map Enhancements
  id: totrans-470
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 地图增强
- en: Tableau has multiple features you can use to upgrade your maps and make them
    effective for users. Some of these are native while others can be added quite
    easily. In this section, you will cover some simple ways to improve on the base
    maps used in Tableau.
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau 提供了多个功能，您可以使用这些功能来升级您的地图，使其对用户更有效。其中一些是内置的，而其他则可以非常容易地添加。在本节中，您将了解一些简单的方法来改进
    Tableau 中使用的基线地图。
- en: Setting Map Options
  id: totrans-472
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置地图选项
- en: 'Map options are simple selections that can be chosen to determine how a user
    can interact with a map. To set these options, select the `Map` | `Map Options`
    menu item, which will open a small window:'
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: 地图选项是一些简单的选择，可以用来确定用户如何与地图交互。要设置这些选项，请选择“地图”|“地图选项”菜单项，这将打开一个小窗口：
- en: '![Figure 6.66: Map Options menu items'
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.66：地图选项菜单项]'
- en: '](img/B16342_06_66.jpg)'
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_66.jpg]'
- en: 'Figure 6.66: Map Options menu items'
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.66：地图选项菜单项
- en: These options allow users to navigate the map using pan (to shift your map from
    side to side or up and down) and zoom, allow users to perform searches, and allow
    the functionality provided by the toolbar (radial selections, and so on). If you
    want your map to remain fixed with a single size and location, disable these capabilities.
  id: totrans-477
  prefs: []
  type: TYPE_NORMAL
  zh: 这些选项允许用户使用平移（在地图的左右或上下移动）和缩放来导航地图，允许用户执行搜索，并允许工具栏提供的功能（径向选择等）。如果您希望地图保持固定大小和位置，请禁用这些功能。
- en: Using Existing Layers
  id: totrans-478
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用现有层
- en: 'Default Tableau background maps provide numerous map layers that can easily
    be selected and deselected by users depending on their preferences. Map layers
    help you to add extra details such as highways, borders, terrains, coastlines,
    and county borders where these layers add minute details to the maps. To change
    the default map layer, click on `Map` | `Map Layers` from the menu. Tableau offers
    the following layer options:'
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau 的默认背景地图提供了许多地图层，用户可以根据自己的喜好轻松选择和取消选择。地图层可以帮助您添加额外的细节，例如高速公路、边界、地形、海岸线和县边界，在这些层中添加的细节会使地图更加丰富。要更改默认地图层，请从菜单中选择“地图”|“地图层”。Tableau
    提供以下层选项：
- en: '![Figure 6.67: Map Layers menu options'
  id: totrans-480
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.67：地图层菜单选项]'
- en: '](img/B16342_06_67.jpg)'
  id: totrans-481
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_67.jpg]'
- en: 'Figure 6.67: Map Layers menu options'
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.67：地图层菜单选项
- en: 'These layers can be used to customize the appearance of a map. For example,
    in the Madrid listing example, if you select `Streets, Highways, Routes` as well
    as `Zip Code Labels`, you will notice how extra details are added to the map,
    as shown in the following screenshot:'
  id: totrans-483
  prefs: []
  type: TYPE_NORMAL
  zh: 这些层可以用来自定义地图的外观。例如，在 Madrid 列表示例中，如果您选择“街道、高速公路、路线”以及“邮编标签”，您将注意到地图上添加了额外的细节，如下面的截图所示：
- en: '![Figure 6.68: Map Layers menu options with added layers'
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.68：带有添加层的地图层菜单选项]'
- en: '](img/B16342_06_68.jpg)'
  id: totrans-485
  prefs: []
  type: TYPE_NORMAL
  zh: '![图片 B16342_06_68.jpg]'
- en: 'Figure 6.68: Map Layers menu options with added layers'
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.68：带有添加层的地图层菜单选项
- en: Although aligning with data visualization best practices, you would generally
    try to minimize the number and visibility of these layers to not distract users
    from the map data. Using just enough layers to provide context is a smart approach.
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然与数据可视化最佳实践保持一致，但您通常会尽量减少这些层的数量和可见性，以免分散用户对地图数据的注意力。只使用足够的层来提供上下文是一种明智的方法。
- en: In addition, more than 20 demographic layers are available as overlays for US-based
    data, which essentially allows you to add a data mask layer depending on the demographic
    you choose from the dropdown. But as mentioned previously, seldom do you have
    to use these extra layers in your maps because, more often than not, these layers
    confuse stakeholders rather than help them.
  id: totrans-488
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，还有20多个人口统计层作为基于美国数据的叠加层，这实际上允许您根据下拉菜单中选择的人口添加数据掩码层。但如前所述，在您的地图中很少需要使用这些额外层，因为这些层往往会让利益相关者感到困惑，而不是帮助他们。
- en: Layers are very easy to add or remove in Tableau, so it is wise to spend some
    time with the many options until your map is visually pleasing. As with most charts,
    less is often more on a map; make sure the focus is on the data and not on the
    map layers.
  id: totrans-489
  prefs: []
  type: TYPE_NORMAL
  zh: 在Tableau中添加或删除图层非常容易，因此明智的做法是在您的地图视觉上令人满意之前花些时间探索众多选项。与大多数图表一样，地图上通常“少即是多”；确保焦点在数据上，而不是地图层上。
- en: Adding Mapbox Background Maps
  id: totrans-490
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加Mapbox背景地图
- en: You do have options beyond the standard Tableau background maps. One of these
    is to embed Mapbox background maps in Tableau—an approach that enables the creation
    of uniquely styled maps. Mapbox is a popular map creation platform enabling users
    to customize maps for use in many applications. Tableau added Mapbox integration
    back in Tableau 9.2, so the ability to use Mapbox background maps is not new but
    should nonetheless be explored if you wish to feature maps beyond the native Tableau
    versions. You will need to create a free Mapbox account at [https://www.mapbox.com/](https://www.mapbox.com/)
    to build these maps.
  id: totrans-491
  prefs: []
  type: TYPE_NORMAL
  zh: 您确实有超越标准Tableau背景地图的选项。其中之一是将Mapbox背景地图嵌入到Tableau中——这种方法能够创建独特风格的地图。Mapbox是一个流行的地图创建平台，使用户能够为许多应用定制地图。Tableau在Tableau
    9.2中添加了Mapbox集成，因此使用Mapbox背景地图的能力并不是新的，但如果您希望展示超越原生Tableau版本的地图，则仍然应该探索。您需要创建一个免费的Mapbox账户，网址为[https://www.mapbox.com/](https://www.mapbox.com/)，以构建这些地图。
- en: 'To export a Mapbox map for use in Tableau, navigate to Mapbox Studio, [https://studio.mapbox.com/](https://studio.mapbox.com/),
    and then simply create your own style by clicking on `New Styles` and choosing
    an option under `Choose a template` as well as `Choose a variation` from the popup:'
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: '要导出Mapbox地图以在Tableau中使用，请导航到Mapbox Studio，[https://studio.mapbox.com/](https://studio.mapbox.com/)，然后只需点击`新建样式`并从`选择模板`以及从弹出菜单中选择`选择变体`来简单地创建自己的样式： '
- en: '![Figure 6.69: Choosing a template and variation for Mapbox'
  id: totrans-493
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.69：选择Mapbox的模板和变体'
- en: '](img/B16342_06_69.jpg)'
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_69.jpg)'
- en: 'Figure 6.69: Choosing a template and variation for Mapbox'
  id: totrans-495
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.69：选择Mapbox的模板和变体
- en: 'Then, select the `Share…` icon at the top right of the map and view the `Third
    party` options to find the `Tableau` dialog:'
  id: totrans-496
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，在地图右上角选择`Share…`图标，查看`第三方`选项以找到`Tableau`对话框：
- en: '![Figure 6.70: Exporting a Mapbox background map to Tableau'
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.70：将Mapbox背景地图导出到Tableau'
- en: '](img/B16342_06_70.jpg)'
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_70.jpg)'
- en: 'Figure 6.70: Exporting a Mapbox background map to Tableau'
  id: totrans-499
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.70：将Mapbox背景地图导出到Tableau
- en: 'This provides you with a link to be used in Tableau as a background map style
    to provide a customized background to set your maps apart from the standard Tableau
    options. The link can be copied to the clipboard and then added as a background
    map. In Tableau Desktop, create a new sheet and select the `Map` | `Background
    Maps` | `Manage Maps` menu item, which will open a `Map Services` window. Clicking
    the `Add` button gives you two options: `WMS Servers…` (Web Map Server, similar
    to Mapbox) and `Mapbox Maps…`. Click on the `Mapbox` option and you will see a
    dialog screen:'
  id: totrans-500
  prefs: []
  type: TYPE_NORMAL
  zh: 这为您提供了一个链接，可以在Tableau中用作背景地图样式，以提供定制的背景，使您的地图与标准的Tableau选项区分开来。该链接可以复制到剪贴板，然后添加为背景地图。在Tableau
    Desktop中，创建一个新的工作表，选择`地图` | `背景地图` | `管理地图`菜单项，这将打开`地图服务`窗口。点击`添加`按钮，您将有两个选项：`WMS服务器…`（Web地图服务器，类似于Mapbox）和`Mapbox地图…`。点击`Mapbox`选项，您将看到一个对话框屏幕：
- en: '![Figure 6.71: Adding a Mapbox map using the Mapbox URL'
  id: totrans-501
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.71：使用Mapbox URL添加Mapbox地图'
- en: '](img/B16342_06_71.jpg)'
  id: totrans-502
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_71.jpg)'
- en: 'Figure 6.71: Adding a Mapbox map using the Mapbox URL'
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.71：使用Mapbox URL添加Mapbox地图
- en: 'Here, you can add a style name of your choice, and then copy your Mapbox link
    to the URL text box. The remaining information will be automatically updated based
    on the URL link, and your background map will be ready to go. Multiple maps can
    be added using this same process, which will give you many options beyond the
    native Tableau map backgrounds. Now, use this Mapbox map style for your Madrid
    worksheet. Click on `Maps` | `Background Maps` | `Default Galaxy Style (or your
    style name)`. Here''s a look at your data with a new background map:'
  id: totrans-504
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，你可以添加一个你喜欢的样式名称，然后将你的 Mapbox 链接复制到 URL 文本框中。其余信息将根据 URL 链接自动更新，你的背景地图将准备就绪。可以使用相同的过程添加多个地图，这将为你提供超出
    Tableau 原生地图背景的许多选项。现在，使用这个 Mapbox 地图风格为你的马德里工作表。点击 `地图` | `背景地图` | `默认银河风格（或你的样式名称）`。以下是使用新背景地图查看你的数据：
- en: '![Figure 6.72: A custom Mapbox map of Madrid'
  id: totrans-505
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.72：马德里定制的 Mapbox 地图'
- en: '](img/B16342_06_72.jpg)'
  id: totrans-506
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_72.jpg)'
- en: 'Figure 6.72: A custom Mapbox map of Madrid'
  id: totrans-507
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.72：马德里定制的 Mapbox 地图
- en: 'If you open the `Map` | `Map Layers` card, you will see the available layers
    from the selected Mapbox map. Note that each map style will have its own set of
    options. Here is what you have with your style:'
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你打开 `地图` | `地图层` 卡，你将看到从所选 Mapbox 地图中可用的图层。请注意，每种地图风格都将有其自己的选项集。以下是你的样式所拥有的选项：
- en: '![Figure 6.73: Selecting Map Layers for the Mapbox map'
  id: totrans-509
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.73：为 Mapbox 地图选择地图层'
- en: '](img/B16342_06_73.jpg)'
  id: totrans-510
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_73.jpg)'
- en: 'Figure 6.73: Selecting Map Layers for the Mapbox map'
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.73：为 Mapbox 地图选择地图层
- en: Using these checkboxes makes it simple to customize a map to work best with
    your existing point data. You can also use the `Washout` slider to add some level
    of transparency to the display.
  id: totrans-512
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些复选框可以轻松地自定义地图，使其与现有的点数据配合得最好。你还可以使用“淡化”滑块为显示添加一定程度的透明度。
- en: As you have seen, Mapbox background maps can be used to add visual interest
    to your worksheets and dashboards and can be customized in Mapbox using an almost
    endless combination of colors and styling. To assimilate what you read in this
    section, you will now go through an exercise to add Mapbox and understand how
    to use it in Tableau.
  id: totrans-513
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所见，Mapbox 背景地图可以用来为你的工作表和仪表板增添视觉兴趣，并且可以在 Mapbox 中使用几乎无限的色彩和样式组合进行自定义。为了吸收本节所读内容，你现在将进行一个练习，添加
    Mapbox 并了解如何在 Tableau 中使用它。
- en: 'Exercise 6.08: Adding Mapbox Background Maps'
  id: totrans-514
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 6.08：添加 Mapbox 背景地图
- en: In this exercise, you will practice adding Mapbox data to the New York zoning
    data and apply a new Mapbox style for the GIS data that you have previously used.
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，你将练习将 Mapbox 数据添加到纽约分区数据中，并应用一个新 Mapbox 风格到之前使用的 GIS 数据。
- en: 'Perform the following steps to complete this exercise:'
  id: totrans-516
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以完成此练习：
- en: Load the `New York City zone shapefile` if you have not already loaded the data
    into Tableau Desktop.
  id: totrans-517
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你还没有将数据加载到 Tableau Desktop 中，请加载 `纽约市分区形状文件`。
- en: Drag `Geometry` to the `Detail` marks card and a `New York City map` will be
    created, which you have also seen previously.
  id: totrans-518
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `几何` 拖动到 `详细` 标记卡中，将创建一个 `纽约市地图`，你之前也见过。
- en: '![Figure 6.74: New York City zoning data map'
  id: totrans-519
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.74：纽约市分区数据地图'
- en: '](img/B16342_06_74.jpg)'
  id: totrans-520
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_74.jpg)'
- en: 'Figure 6.74: New York City zoning data map'
  id: totrans-521
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.74：纽约市分区数据地图
- en: Note
  id: totrans-522
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: You can create an account with [https://studio.mapbox.com/](https://studio.mapbox.com/)
    and can continue to work on the exercise for free. Please make sure that you fill
    in the necessary credentials.
  id: totrans-523
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在 [https://studio.mapbox.com/](https://studio.mapbox.com/) 上创建一个账户，并且可以免费继续练习。请确保你填写了必要的凭据。
- en: Now, go to [https://studio.mapbox.com/](https://studio.mapbox.com/ ) and sign
    in/sign up if you have previously not done so.
  id: totrans-524
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，前往 [https://studio.mapbox.com/](https://studio.mapbox.com/) 并登录/注册，如果你之前还没有这样做。
- en: Click on the `New style` button at [https://studio.mapbox.com/](https://studio.mapbox.com/).
  id: totrans-525
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 [https://studio.mapbox.com/](https://studio.mapbox.com/) 上的 `新建样式` 按钮。
- en: '![Figure 6.75: Creating a new style in Mapbox'
  id: totrans-526
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.75：在 Mapbox 中创建新风格'
- en: '](img/B16342_06_75.jpg)'
  id: totrans-527
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_75.jpg)'
- en: 'Figure 6.75: Creating a new style in Mapbox'
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.75：在 Mapbox 中创建新风格
- en: Next, select the style you want to use. For the purposes of this exercise, select
    the `Streets` template as the style. Click on the `Customize Streets` button to
    create your own Mapbox style.
  id: totrans-529
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择你想要使用的样式。为了本练习的目的，选择 `街道` 模板作为样式。点击 `自定义街道` 按钮来创建你自己的 Mapbox 风格。
- en: '![Figure 6.76: Choosing styles on Mapbox'
  id: totrans-530
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 6.76：在 Mapbox 中选择风格'
- en: '](img/B16342_06_76.jpg)'
  id: totrans-531
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_76.jpg)'
- en: 'Figure 6.76: Choosing styles on Mapbox'
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.76：在 Mapbox 中选择风格
- en: 'On the new page that was loaded, click on the `Share` button in the top right-hand
    corner, scroll down the popup and click on `Third party`, then select `Tableau`
    from the dropdown, as shown, and copy the integration URL:'
  id: totrans-533
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在加载的新页面上，点击右上角的`分享`按钮，向下滚动弹出窗口并点击`第三方`，然后从下拉菜单中选择`Tableau`，如图所示，并复制集成URL：
- en: '![Figure 6.77: Selecting Tableau as the third-party service in Mapbox'
  id: totrans-534
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.77：在Mapbox中选择Tableau作为第三方服务'
- en: '](img/B16342_06_77.jpg)'
  id: totrans-535
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_77.jpg)'
- en: 'Figure 6.77: Selecting Tableau as the third-party service in Mapbox'
  id: totrans-536
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.77：在Mapbox中选择Tableau作为第三方服务
- en: 'In your Tableau Desktop instance, click on `Map` | `Background Maps` | `Manage
    Maps`, and in the popup, click on `Add…` and select `Mapbox Maps…`, as shown in
    the following screenshot:'
  id: totrans-537
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的Tableau Desktop实例中，点击`地图` | `背景地图` | `管理地图`，在弹出窗口中点击`添加…`并选择`Mapbox Maps…`，如图所示：
- en: '![Figure 6.78: Adding new Mapbox maps to Tableau'
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.78：将新的Mapbox地图添加到Tableau'
- en: '](img/B16342_06_78.jpg)'
  id: totrans-539
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_78.jpg)'
- en: 'Figure 6.78: Adding new Mapbox maps to Tableau'
  id: totrans-540
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.78：将新的Mapbox地图添加到Tableau
- en: 'Name your map style appropriately and paste your integration URL in the `Url`
    field. Other fields should autoload, as shown in the following screenshot. Click OK:'
  id: totrans-541
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 适当地命名你的地图样式，并将集成URL粘贴到`Url`字段中。其他字段应自动加载，如图所示。点击 OK：
- en: '![Figure 6.79: Adding a new Mapbox style'
  id: totrans-542
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.79：添加新的Mapbox样式'
- en: '](img/B16342_06_79.jpg)'
  id: totrans-543
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_79.jpg)'
- en: 'Figure 6.79: Adding a new Mapbox style'
  id: totrans-544
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.79：添加新的Mapbox样式
- en: 'The New York City zoning map should have autoloaded the new Mapbox style with
    a lot more details than Tableau default map options, as shown in the following
    output:'
  id: totrans-545
  prefs: []
  type: TYPE_NORMAL
  zh: 纽约市分区地图应该自动加载新的Mapbox样式，比Tableau默认地图选项提供更多的细节，如图所示输出：
- en: '![Figure 6.80: NYC Mapbox loaded in the new Mapbox style'
  id: totrans-546
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.80：在新的Mapbox样式中加载的纽约市地图'
- en: '](img/B16342_06_80.jpg)'
  id: totrans-547
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16342_06_80.jpg)'
- en: 'Figure 6.80: NYC Mapbox loaded in the new Mapbox style'
  id: totrans-548
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.80：在新的Mapbox样式中加载的纽约市地图
- en: As you can see, the Mapbox background map, when zoomed in, provides a lot more
    extra detail, including the city line and street names.
  id: totrans-549
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，当放大时，Mapbox背景地图提供了更多的额外细节，包括城市线和街道名称。
- en: In this exercise, you practiced adding Mapbox to your Tableau maps with new
    styles with a shapefile, while previously, before the exercise, you only worked
    with ZIP code data. With Mapbox, you were able to add a lot more minute details
    to the maps, such as streets, neighborhoods, important attractions, coastlines,
    and highways. These newly added details have enhanced the map for end users.
  id: totrans-550
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，你练习了使用shapefile将Mapbox添加到你的Tableau地图中，并应用了新的样式，而在练习之前，你只处理ZIP代码数据。有了Mapbox，你能够为地图添加更多细节，例如街道、社区、重要景点、海岸线和高速公路。这些新增的细节增强了地图对最终用户的功能。
- en: This wraps up the theoretical aspects of this chapter. Next, you will go through
    a new set of data and a final activity to test the knowledge you have gained throughout
    the course of this lesson and the previous exercise by attempting to create useful
    and powerful maps.
  id: totrans-551
  prefs: []
  type: TYPE_NORMAL
  zh: 这总结了本章的理论部分。接下来，你将通过一组新的数据和最终活动来测试你在本课程和之前练习中学到的知识，尝试创建有用且强大的地图。
- en: 'Activity 6.01: Creating a Location Analysis Using Dual Axis and Background
    Maps'
  id: totrans-552
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 活动六.01：使用双轴和背景地图创建位置分析
- en: 'As a data developer for a San Francisco City Department, you are asked to create
    a report/visualization that will showcase the hotspots of house buyout agreements
    in the city from a high level and gather contextual information about the house,
    its neighborhood, its actual address, its buyout date, and its total number of
    tenants, as well as the buyout amounts for the houses. Stakeholders also want
    to be able to filter the map data points by buyout dates. You will be using the
    SF Buyout Agreement data provided in the GitHub link or by downloading the `.shp`
    file from the following link: [https://packt.link/ojAf3](https://packt.link/ojAf3).'
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
  zh: 作为旧金山城市部门的 数据开发者，你被要求创建一份报告/可视化，从高层次展示城市房屋收购协议的热点，并收集有关房屋、其社区、其实际地址、其收购日期、其承租人总数以及房屋收购金额的背景信息。利益相关者还希望能够通过收购日期过滤地图数据点。你将使用GitHub链接中提供的SF
    Buyout Agreement数据或通过以下链接下载`.shp`文件：[https://packt.link/ojAf3](https://packt.link/ojAf3)。
- en: 'Perform the following steps to complete this activity:'
  id: totrans-554
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来完成此活动：
- en: Locate the `SF Buyout Data.shp` file that you downloaded from GitHub and add
    that as a data source in Tableau.
  id: totrans-555
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位你从GitHub下载的`SF Buyout Data.shp`文件，并将其作为数据源添加到Tableau中。
- en: Create a new worksheet named `SF Buyout Map`.
  id: totrans-556
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的工作表，命名为`SF Buyout Map`。
- en: Add `Buyout Date` as a filter. Only include non-null values by selecting relative
    dates. Show the `Buyout Date` filter.
  id: totrans-557
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加`买断日期`作为过滤器。通过选择相对日期只包含非空值。显示`买断日期`过滤器。
- en: 'Before proceeding to the next steps, edit the title to `SF Buyout Map` and
    rename some of the column names for easier understanding. The mappings are as
    follows:'
  id: totrans-558
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在进行下一步之前，将标题编辑为`SF买断地图`，并重命名一些列名以便更容易理解。映射如下：
- en: '`Case Number` – `Case Number`'
  id: totrans-559
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`案例编号` – `案例编号`'
- en: '`Date Pre B` – `Pre Buyout Disclosure Date`'
  id: totrans-560
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`买断前日期` – `买断前披露日期`'
- en: '`Date Buyou` – `Buyout Date`'
  id: totrans-561
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`买断日期` – `买断日期`'
- en: '`Buyout Amo` – `Buyout Amount`'
  id: totrans-562
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`买断金额` – `买断金额`'
- en: '`Number of` – `Tenants`'
  id: totrans-563
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Number of` – `租户数量`'
- en: '`Analysis N` – `Neighbourhood`'
  id: totrans-564
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`分析N` – `邻里`'
- en: Drag `Geometry` onto the `Detail` card.
  id: totrans-565
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`几何形状`拖动到`详情`卡片上。
- en: Duplicate the `Latitude(generated)` column and create a dual axis.
  id: totrans-566
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制`纬度(生成)`列并创建一个双轴。
- en: Under the first `Latitude(generated)` marks card, change `Marks Type` to `Density`.
  id: totrans-567
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在第一个`纬度(生成)`标记卡下，将`标记类型`更改为`密度`。
- en: Add `SUM(Tenants)` to the `Color` marks card and add `Case Number` to the `Detail`
    marks card.
  id: totrans-568
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`SUM(Tenants)`添加到`颜色标记卡`，并将`案例编号`添加到`详情标记卡`。
- en: For the second `Latitude`, change `Marks type` to the `Circle` symbol.
  id: totrans-569
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于第二个`纬度`，将`标记类型`更改为`圆形`符号。
- en: Add `Neighbourhood` to the `Color` marks card and `Case Number` to the `Detail`
    marks card.
  id: totrans-570
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`邻里`添加到`颜色标记卡`，并将`案例编号`添加到`详情标记卡`。
- en: To add context to your map when you or a stakeholder hovers or clicks on the
    map, you will add `Address`, `Buyout Date`, `Buyout Amount`, and `Tenants` to
    a tooltip and edit the tooltip to look as in the following output.
  id: totrans-571
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当您或利益相关者悬停在地图上或点击地图时，为了为地图添加上下文，您将添加`地址`、`买断日期`、`买断金额`和`租户`到工具提示中，并编辑工具提示以看起来如下所示。
- en: 'The expected output is as follows:'
  id: totrans-572
  prefs: []
  type: TYPE_NORMAL
  zh: 预期输出如下：
- en: '![Figure 6.81: Activity 6.01 expected output'
  id: totrans-573
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.81：活动6.01预期输出'
- en: '](img/B16342_06_81.jpg)'
  id: totrans-574
  prefs: []
  type: TYPE_NORMAL
  zh: '![图6.81：活动6.01预期输出](img/B16342_06_81.jpg)'
- en: 'Figure 6.81: Activity 6.01 expected output'
  id: totrans-575
  prefs: []
  type: TYPE_NORMAL
  zh: 图6.81：活动6.01预期输出
- en: Note
  id: totrans-576
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: 'The solution to this activity can be found here: [https://packt.link/CTCxk](https://packt.link/CTCxk).'
  id: totrans-577
  prefs: []
  type: TYPE_NORMAL
  zh: 本活动的解决方案可在此处找到：[https://packt.link/CTCxk](https://packt.link/CTCxk)。
- en: Summary
  id: totrans-578
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: This chapter introduced you to many of the geographic capabilities and methods
    designers and users can employ in Tableau. The ability to take geographic data
    and create powerful, attractive maps that integrate with other displays is a critical
    skill in building visual insights. You learned how Tableau maps can incorporate
    size, color, shapes, and filtering so users can explore and understand geographic
    information more thoroughly.
  id: totrans-579
  prefs: []
  type: TYPE_NORMAL
  zh: 本章向您介绍了许多地理功能和方法，设计师和用户可以在Tableau中使用这些功能和方法。能够将地理数据转化为强大、吸引人的地图，并与其他显示集成，是构建视觉洞察力的一项关键技能。您学习了如何将大小、颜色、形状和筛选功能整合到Tableau地图中，以便用户可以更深入地探索和理解地理信息。
- en: You also learned that while Tableau is not a dedicated mapping platform, it
    can be used to replicate much of the functionality of traditional mapping and
    GIS software. Being able to map geographic data is an essential skill in developing
    complete Tableau solutions for users and can be incorporated into any analysis
    where geospatial data is available and interacting with external map files can
    add an additional layer of detail to maps.
  id: totrans-580
  prefs: []
  type: TYPE_NORMAL
  zh: 您还了解到，虽然Tableau不是一个专门的地图平台，但它可以用来复制许多传统地图和GIS软件的功能。能够绘制地理数据是开发针对用户完整的Tableau解决方案的一项基本技能，并且可以融入任何有地理空间数据可用且与外部地图文件交互的分析中，这可以为地图添加额外的细节层。
- en: 'In the next chapter, you will be moving into the analysis section of the course
    with *Chapter 7: Analysis : Creating and Using Calculations*. This next chapter
    will extend your ability to create many types of calculations that go beyond the
    few simple ones used in creating your maps.'
  id: totrans-581
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，您将进入课程的分析部分，即*第7章：分析：创建和使用计算*。下一章将扩展您创建多种类型计算的能力，这些计算超越了创建地图时使用的几个简单计算。
