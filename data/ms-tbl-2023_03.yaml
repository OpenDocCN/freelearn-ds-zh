- en: Using Tableau Prep Builder
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Tableau Prep Builder
- en: Tableau Prep Builder was introduced with version 2018.1 of Tableau Desktop,
    but what can we use Tableau Prep Builder (henceforth referred to in this chapter
    as *Prep*) for? The core purpose of the tool is data preparation. The good news
    is, Prep is fully compatible with Tableau Desktop, and also with Tableau Server.
    That means you can execute jobs in Prep to clean your data with the click of a
    button. Additionally, Prep is as visual as its big brother, Tableau Desktop, meaning
    that you can see every step of data preparation in a fully visual format.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau Prep Builder 随 Tableau Desktop 2018.1 版本推出，但我们可以用 Tableau Prep Builder（以下简称本章中的
    *Prep*）做些什么呢？该工具的核心目的是数据准备。好消息是，Prep 完全兼容 Tableau Desktop，也兼容 Tableau Server。这意味着你可以通过一键操作在
    Prep 中执行数据清理任务。此外，Prep 的可视化程度与其“大哥” Tableau Desktop 一样高，这意味着你可以在完全可视的格式中看到每一步的数据准备过程。
- en: Therefore, let’s dive into the **Graphical User Interface** (**GUI**) and be
    amazed by another high-end product, which will allow you to get initial data insights,
    enabling you to decide faster whether your dataset is worth analysis. Prep will
    pave the way for an even smoother Tableau Desktop experience.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，让我们深入了解 **图形用户界面**（**GUI**），并惊叹于这个高端产品，它能帮助你快速获得初步的数据洞察，让你能够更快地决定数据集是否值得分析。Prep
    将为更顺畅的 Tableau Desktop 使用体验铺平道路。
- en: 'In this chapter, the following topics will be discussed:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将讨论以下主题：
- en: Connecting to data
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接数据
- en: The Prep GUI
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Prep 图形用户界面
- en: Data quality
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据质量
- en: Additional options with Prep
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Prep 的其他选项
- en: Exporting data
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 导出数据
- en: In order to get started, we need to load data. How to do so in Prep will be
    described in the following section.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 为了开始，我们需要加载数据。如何在 Prep 中执行此操作，将在接下来的章节中描述。
- en: Connecting to data
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连接数据
- en: If you are familiar with Tableau Desktop, Prep will be an easy game for you.
    The handling and interfaces are very similar, and connecting to data, if the connector
    is available in Prep, works the same whether it’s a text file, a database, or
    an extract. At first sight, you might not even notice a difference between Prep
    and the Tableau Desktop GUIs, which provides the handy advantage that you can
    start prepping right away.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你熟悉 Tableau Desktop，那么 Prep 对你来说就是一个轻松的游戏。其操作和界面非常相似，连接数据时，如果 Prep 提供了连接器，无论是文本文件、数据库还是提取文件，都可以同样操作。乍一看，你可能甚至察觉不到
    Prep 和 Tableau Desktop 的界面有何不同，这为你提供了一个方便的优势，即可以立即开始数据准备工作。
- en: 'To get started, begin by opening Prep and click on **+** to open a file. The
    following screen will appear:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 开始时，首先打开 Prep，然后点击 **+** 打开一个文件。接下来会出现如下屏幕：
- en: '![](img/B18435_03_01.png)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_01.png)'
- en: 'Figure 3.1: Connecting to data'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.1：连接数据
- en: From the preceding screenshot, we can see that you can choose the type of data
    you want to connect to in the search bar. Just as in Tableau, the repertoire of
    Prep includes multiple databases.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 从之前的截图中，我们可以看到你可以在搜索栏中选择你想要连接的数据类型。就像在 Tableau 中一样，Prep 的功能包含了多个数据库。
- en: 'Now let’s connect to a dataset with a practical exercise. For this exercise,
    we need the following dataset: [https://www.kaggle.com/airbnb/boston](https://www.kaggle.com/airbnb/boston).
    Please download `calendar.csv`, `listings.csv`, and `reviews.csv`. Alternatively,
    download them from the repository associated with this chapter on Tableau Public:
    [https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter03](https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter03).'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们通过一个实际的练习来连接一个数据集。对于这个练习，我们需要以下数据集：[https://www.kaggle.com/airbnb/boston](https://www.kaggle.com/airbnb/boston)。请下载
    `calendar.csv`、`listings.csv` 和 `reviews.csv`。或者，你也可以从本章在 Tableau Public 上的相关仓库下载：[https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter03](https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter03)。
- en: 'First, we are going to start with the `calendar.csv` file. Add it to the empty
    Prep canvas by making a connection with a text file, followed by the selection
    of your `.csv` file. You will now see the following screen:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将从 `calendar.csv` 文件开始。通过与文本文件建立连接，并选择你的 `.csv` 文件，将其添加到空白的 Prep 画布中。你现在会看到如下屏幕：
- en: '![A screenshot of a cell phone  Description automatically generated](img/B18435_03_02.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![A screenshot of a cell phone  Description automatically generated](img/B18435_03_02.png)'
- en: 'Figure 3.2: Input data'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.2：输入数据
- en: Congratulations—you’ve just made your first Prep connection. Here, you can manipulate
    and visualize your connected dataset as required!
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜你——你刚刚完成了第一个 Prep 连接。在这里，你可以根据需要操作并可视化你的连接数据集！
- en: In the following section, I will describe the GUI in more detail.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分中，我将更详细地描述GUI。
- en: The Prep GUI
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Prep GUI
- en: User experience is an important topic, not only when you build a dashboard but
    also when you use other aspects of Tableau. One of the biggest selling points
    of Tableau is and has always been the ease of using the GUI, and it is only one
    of the reasons Tableau is a much-loved tool by its customers.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 用户体验是一个重要话题，不仅仅是在构建仪表板时，使用Tableau的其他方面时也很重要。Tableau的一大卖点一直是其易用的GUI，这也是Tableau成为其客户深受喜爱的工具之一的原因之一。
- en: 'The Prep GUI has two important canvases to look at. Right after you have connected
    data to Prep, the workspace will split into several parts:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: Prep GUI有两个重要的画布可以查看。数据连接到Prep后，工作区将被分成几个部分：
- en: '![Graphical user interface, text, application  Description automatically generated](img/B18435_03_03.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![图形用户界面，文本，应用程序描述自动生成](img/B18435_03_03.png)'
- en: 'Figure 3.3: Prep workspace sections'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.3：Prep工作区部分
- en: 'Let’s look at what we can see from the preceding screenshot:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看从上面的截图中可以看到什么：
- en: '**A**: The connection pane, showing you the input files available at the location
    selected.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '**A**：连接窗格，显示您在所选位置可用的输入文件。'
- en: '**B**: The flow pane, which shows your current Prep flow. This always starts
    with an input step.'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '**B**：流程窗格，显示您当前的Prep流程。这个流程始终从输入步骤开始。'
- en: '**C**: The input pane settings, which give you several options to configure
    your input.'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**C**：输入窗格的设置，提供多个选项以配置您的输入。'
- en: '**D**: The input pane samples, showing the fields you moved to the connection
    pane, including sample values.'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '**D**：输入窗格的示例，显示您移动到连接窗格的字段，包括示例值。'
- en: In the input pane (**C**), you can use the wildcard union (multiple files) function
    to add multiple files from the same directory. Also, you can limit the sample
    set that Prep will print in order to increase performance. In the input pane samples
    (**D**), you can select and deselect the fields you want to import and change
    their data types. The data type options are, for example, strings, dates, or numbers.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在输入窗格（**C**）中，您可以使用通配符联合（多个文件）功能，从同一目录添加多个文件。同时，您还可以限制Prep打印的示例集，以提高性能。在输入窗格示例（**D**）中，您可以选择和取消选择要导入的字段，并更改它们的数据类型。数据类型选项例如字符串、日期或数字。
- en: 'The second GUI is the profile pane. Once you’ve selected the input data needed,
    click on the **+** in the flow pane and select **Add: Clean Step**. Now the profile
    pane will appear with the data grid:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个GUI是配置窗格。一旦选择了所需的输入数据，点击流程窗格中的**+**并选择**添加：清理步骤**。此时，配置窗格将显示数据网格：
- en: '![](img/B18435_03_04.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_04.png)'
- en: 'Figure 3.4: Cleaning data'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.4：清理数据
- en: 'In the preceding screenshot, the profile pane shows every column from the data
    source in two sections. The upper sections show aggregates. For example, column
    2, **date**, shows the number of rows per date in a small histogram. The columns
    can all be sorted by clicking on the sort icon (a mini bar chart that appears
    when your mouse is hovering over a column) next to the column name and by selecting
    one item. Let’s take, for example, **True**, in **available** (column 3). All
    related features will be highlighted:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的截图中，配置窗格将数据源中的每一列显示在两个部分中。上部分显示聚合信息。例如，**日期**（列2）显示每个日期的行数，以小直方图的形式显示。列可以通过点击列名旁边的排序图标（鼠标悬停在列上时会出现的迷你条形图）来排序，并选择一个项目。例如，选择**True**，在**available**（列3）中。所有相关特性将被高亮显示：
- en: '![](img/B18435_03_05.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_05.png)'
- en: 'Figure 3.5: Visual filtering'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.5：可视化筛选
- en: 'This gives you the chance to get some insights into the data before we even
    start to clean it up. In the following screenshot, each row is shown as it is
    in the data source in the lower part of the profile pane:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 这使您在开始清理数据之前，就能对数据有一些初步的了解。在以下截图中，每一行的数据都以源数据的形式显示在配置窗格的下部：
- en: '![](img/B18435_03_06.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_06.png)'
- en: 'Figure 3.6: Data overview'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.6：数据概览
- en: So far we have seen that, after loading data in Prep, visual filters can be
    applied by clicking on a field or bar in one of the columns. The lower pane will
    always show the data source of the selection made at the row level. Next, we will
    continue by adding more data sources.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经看到，在Prep中加载数据后，可以通过点击字段或列中的条形图来应用可视化筛选。下方窗格将始终显示所做选择在行级别的数据源。接下来，我们将继续添加更多数据源。
- en: Getting to know Prep
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 了解Prep
- en: 'Let’s start with a practical example:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从一个实际的例子开始：
- en: 'Next to the `calendar.csv` file, connect to the following files:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `calendar.csv` 文件旁边，连接以下文件：
- en: '`listings.csv`'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`listings.csv`'
- en: '`reviews.csv`'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`reviews.csv`'
- en: 'Now, drag them onto the flow pane:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，将它们拖到流程面板上：
- en: '![](img/B18435_03_07.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_07.png)'
- en: 'Figure 3.7: Multiple tables input'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.7：多个表格输入
- en: Can you answer the following questions?
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 你能回答以下问题吗？
- en: How many listings use the word “beach” in their description?
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有多少房源在描述中使用了“海滩”这个词？
- en: What is the percentage of condominiums that are marked with “exact location”?
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标记为“确切位置”的公寓百分比是多少？
- en: On which day were the most reviews entered?
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哪一天输入了最多的评论？
- en: Without a tool like Prep, it is much more difficult to find the solution to
    these types of questions. Prep makes our data analytics journey much faster and
    easier and that is exactly the reason why I encourage you to spend the additional
    time and learn Prep as well as Tableau Desktop!
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 没有像 Prep 这样的工具，解决这些类型的问题要困难得多。Prep 使我们的数据分析过程更加快速和轻松，这也是我鼓励您花更多时间学习 Prep 和 Tableau
    Desktop 的原因！
- en: 'Solutions can be found in the workbook associated with this chapter at the
    following link: [https://public.tableau.com/profile/marleen.meier](https://public.tableau.com/profile/marleen.meier).'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 解决方案可以在与本章相关的工作簿中找到，网址如下：[https://public.tableau.com/profile/marleen.meier](https://public.tableau.com/profile/marleen.meier)。
- en: 'Here you see, as an example, I used the **sort** function on **date** in order
    to answer the third question: *On which day were the most reviews entered?*'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，作为一个例子，我对**日期**使用了**排序**功能，以回答第三个问题：*在哪一天输入了最多的评论？*
- en: '![](img/B18435_03_08.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_08.png)'
- en: 'Figure 3.8: Sorting by date'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.8：按日期排序
- en: As you can see, sorting this field ordered the dates by the number of entries,
    thus making it very simple to answer the question, *on which day were the most
    reviews entered?* After the first few clicks, it already starts to feel natural,
    doesn’t it?
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，排序这个字段后，日期按照输入数量排列，从而使得回答问题变得非常简单：*在哪一天输入了最多的评论？* 在经过几次点击后，你会发现这一切开始变得很自然，是吗？
- en: 'All the changes you made to the dataset can be traced back on the left side
    of the profile pane. But don’t forget to add a proper name to each step: this
    will make it much easier for others, and yourself, to understand your process.'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 你对数据集所做的所有更改都可以在配置文件面板的左侧追溯。但不要忘记为每一步添加一个合适的名称：这将使其他人和你自己更容易理解你的过程。
- en: So, let’s continue on to the data quality features of Prep.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，接下来我们来看看 Prep 的数据质量功能。
- en: Data quality
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据质量
- en: Prep comes with lots of different features. Sometimes, you might use many different
    tools to prepare your dataset in order to get it in the shape you desire. Other
    times, you might just run an aggregation (one feature) and be done. It really
    depends on the dataset itself and the expected output. The fact is, the closer
    your Prep output data is to what you need for your Tableau Desktop visualization,
    the more efficiently VizQL will run on Tableau Desktop. Fewer queries in Tableau
    Desktop means faster generation of dashboards.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: Prep 提供了许多不同的功能。有时，您可能需要使用多个工具来准备数据集，以便将其调整到所需的形状。其他时候，您可能只需运行一个聚合（一个功能）就可以完成。这真的取决于数据集本身和预期的输出。事实上，Prep
    输出数据与您在 Tableau Desktop 可视化中所需数据的相似度越高，VizQL 在 Tableau Desktop 上运行的效率就越高。在 Tableau
    Desktop 中查询越少，仪表板生成就越快。
- en: 'To me, the best part about Prep is that it can handle a huge amount of data.
    Sometimes, I even use it for datasets I don’t want to visualize in Tableau Desktop,
    just to get a quick overview of, for example, how many rows contain a specific
    word, how many columns are needed, what happens to the date range if I filter
    a particular value, and so on! Within a few minutes, I have insights that would
    have taken me much more time to get with database queries or Excel functions.
    I hope that by the end of this chapter, you will be able to cut your time spent
    data prepping in half (at least). We will divide the prepping features into five
    subcategories: cleaning, unions and joins, aggregating, pivoting, and scripting.
    Let’s start with cleaning data!'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 对我来说，Prep 最棒的地方在于它能够处理海量数据。有时，我甚至会将它用于那些我不想在 Tableau Desktop 中可视化的数据集，只是为了快速查看，比如包含特定词语的行数、需要的列数、如果我筛选某个特定值，日期范围会发生什么变化等等！在几分钟内，我就能得到一些通过数据库查询或
    Excel 函数可能需要更长时间才能获得的见解。我希望到本章结束时，您能将数据准备的时间减少一半（至少）。我们将数据准备的功能分为五个子类别：清洗、合并与连接、聚合、透视和脚本。让我们从清洗数据开始！
- en: Cleaning data
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 清洗数据
- en: 'We have seen the following canvas before in the *The Prep GUI* section. To
    create the cleaning step, the user can simply click on **+** next to the input
    and select **Add: Clean Step**. During the cleaning step, multiple operations
    can be performed, such as filtering or creating a calculated field. Also note
    the recommendations Prep gives you:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在*Prep GUI*部分已经看到过以下画布。要创建清理步骤，用户只需点击输入旁边的**+**并选择**添加：清理步骤**。在清理步骤中，可以执行多个操作，例如筛选或创建计算字段。还要注意Prep给出的推荐：
- en: '![](img/B18435_03_09.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_09.png)'
- en: 'Figure 3.9: Recommendations'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.9：推荐
- en: Prep analyzes the column content and proposes changes that might fit the data.
    The column **listing_url**, for example, is being recognized as a web page and
    therefore Prep recommends you change it to the data role URL. The second, third,
    and several more recommendations after **listing_url** are to remove certain columns.
    This is probably the case because the column does not contain any data or contains
    only a small amount of data. The list goes on.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: Prep分析列内容并提出可能适合该数据的更改。例如，**listing_url**列被识别为网页，因此Prep建议将其更改为数据角色URL。第二个、第三个以及更多在**listing_url**之后的推荐是删除某些列。这可能是因为这些列没有数据或数据量很少。推荐列表继续。
- en: This feature can be very useful, especially for unfamiliar datasets. My way
    of working would be to look at the recommendations, check whether they make sense,
    and execute the change—or not. Don’t blindly trust these recommendations, but
    they can point out data flaws you might have missed otherwise.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 这个功能非常有用，特别是对于不熟悉的数据集。我的工作方式是查看推荐，检查它们是否有意义，然后执行更改——或者不执行。不要盲目相信这些推荐，但它们能指出你可能忽视的数据问题。
- en: Data is often messy, involving null values, typos from manual entries, different
    formatting, changes in another system, and so on. As a consequence, you will have
    to sort out the mess before you can get reliable results from an analysis or a
    dashboard. This section will show you how to clean data at the column level.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 数据通常比较杂乱，包括空值、手动输入的拼写错误、不一致的格式、来自其他系统的变动等等。因此，在进行分析或创建仪表板之前，必须先清理这些数据。此部分将向你展示如何在列级别清理数据。
- en: 'Once a value is selected within your clean step, you have the option to **Keep
    Only**, **Exclude**, **Edit Value**, or **Replace with Null**:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦在清理步骤中选择了某个值，你可以选择**仅保留**、**排除**、**编辑值**或**替换为空值**：
- en: '![](img/B18435_03_10.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_10.png)'
- en: 'Figure 3.10: Quick access'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.10：快速访问
- en: None of these changes will change the data source itself. Prep is like an in-between
    step, or a filter between the original data source and your Tableau Desktop. Excluding
    a value, using the option you can see in Figure 3.10, will only remove it from
    Prep. However, if used later on as input for Tableau Desktop, there won’t be an
    option to add that specific value back in. This option will remain in Prep only.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 这些更改不会改变数据源本身。Prep像是一个中间步骤，或者是原始数据源和你的Tableau Desktop之间的一个过滤器。排除某个值，使用图3.10中看到的选项，只会将其从Prep中移除。但是，如果稍后作为Tableau
    Desktop的输入使用，将无法再将该特定值添加回来。这个选项只会保留在Prep中。
- en: 'Another slightly hidden option is to click on the ellipses (**...**) next to
    the column headers (as shown in *Figure 3.11*) and select **Clean**:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个稍微隐藏的选项是点击列标题旁的省略号（**...**）（如*图 3.11*所示），然后选择**清理**：
- en: '![](img/B18435_03_11.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_11.png)'
- en: 'Figure 3.11: More options'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.11：更多选项
- en: 'This **Clean** functionality operates based on the data type of the column.
    In the preceding screenshot, the data type is a string (indicated by the **Abc**
    icon). For other data types, the option will be grayed out since **Clean** is
    only available for strings. The option allows you to make use of eight more cleaning
    features:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 这个**清理**功能是基于列的数据类型运作的。在前面的截图中，数据类型是字符串（由**Abc**图标表示）。对于其他数据类型，该选项将变灰，因为**清理**仅适用于字符串类型。该选项使你能够使用八种更多的清理功能：
- en: Make Uppercase
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 转换为大写
- en: Make Lowercase
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 转换为小写
- en: Remove Letters
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除字母
- en: Remove Numbers
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除数字
- en: Remove Punctuation
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除标点符号
- en: Trim Spaces
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 去除空格
- en: Remove Extra Spaces
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除多余空格
- en: Remove All Spaces
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除所有空格
- en: 'The data type can be changed just above each column header; you will find a
    symbol above the column name, which can be changed by clicking on it, just like
    in Tableau Desktop:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 数据类型可以在每个列标题的上方更改；你会在列名上方找到一个符号，可以通过点击它进行更改，就像在Tableau Desktop中一样：
- en: '![](img/B18435_03_12.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_12.png)'
- en: 'Figure 3.12: Changing Data Type'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.12：更改数据类型
- en: This comes in handy in case Prep misinterprets the data type of a column. A
    wrongly assigned data type can have an effect on the calculation you perform on
    it and how Tableau Desktop would visualize the column.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 这在 Prep 错误解释某一列的数据类型时非常有用。错误的数据类型分配会影响您在该列上执行的计算，以及 Tableau Desktop 如何可视化该列。
- en: In the upcoming section, we will practice combining multiple datasets. You might
    want to combine, for example, order data with shipment data (using a join) or
    append 2020 sales data to your 2019 sales dataset (using a union). To find out
    how, read on!
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分中，我们将练习合并多个数据集。您可能想要合并订单数据与运输数据（使用联接），或者将 2020 年的销售数据附加到 2019 年的销售数据集中（使用合并）。要了解如何操作，请继续阅读！
- en: Unions and joins
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 合并与联接
- en: We will now join the three datasets, so that we may analyze and visualize them
    together. The nature of the three datasets (`listings.csv`, `reviews.csv`, and
    `calendar.csv`) requires a join but not a union. However, I will still walk you
    through the steps of a union in order for you to know when you need it!
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将联接这三个数据集，以便我们可以一起分析和可视化它们。三个数据集（`listings.csv`、`reviews.csv` 和 `calendar.csv`）的特性要求进行联接而非合并。不过，我仍会向您展示合并的步骤，以便您了解何时需要使用它！
- en: Adding unions
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加合并
- en: 'A union in Tableau is the appending of data to an existing dataset. Imagine
    you have two Excel files. Both have the exact same header, but one contains data
    from 2019, and the other data from 2020\. If you union the 2020 data to the 2019
    data, you append the rows of the 2020 files to add them underneath the rows of
    the 2019 files. To perform a union, both datasets need to have almost the same
    layout/header. Why almost? You will see in the following exercise:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Tableau 中，合并是将数据附加到现有数据集中的操作。想象一下，您有两个 Excel 文件。它们都有完全相同的表头，但一个包含 2019 年的数据，另一个包含
    2020 年的数据。如果将 2020 年的数据合并到 2019 年的数据中，您会将 2020 年文件的行附加到 2019 年文件的行下方。执行合并时，两个数据集需要几乎相同的布局/表头。为什么是“几乎”？您将在接下来的练习中看到：
- en: 'To begin this exercise, your Prep flow pane should look like this:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 开始此练习时，您的 Prep 流程面板应该如下所示：
- en: '![](img/B18435_03_13.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_13.png)'
- en: 'Figure 3.13: Flow pane'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.13：流程面板
- en: Add a clean step by clicking **+** next to the **listings** dataset.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击 **+** 按钮旁边的 **listings** 数据集来添加清洗步骤。
- en: You can change the color of each step according to your preferences by right-clicking
    on a step and selecting **Edit Color**.
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您可以通过右键点击某个步骤并选择 **编辑颜色** 来根据您的喜好更改每个步骤的颜色。
- en: 'Select the column **host_identity_verified** and filter on **True**:'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **host_identity_verified** 列并过滤 **True**：
- en: '![](img/B18435_03_14.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_14.png)'
- en: 'Figure 3.14: Filtering on True'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.14：按 True 进行过滤
- en: 'Now, create a calculated field, called `DatasetA_ID`, containing just a string,
    `''A''`:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，创建一个计算字段，称为 `DatasetA_ID`，其中只包含字符串 `'A'`：
- en: '![](img/B18435_03_15.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_15.png)'
- en: 'Figure 3.15: Creating a calculated field'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.15：创建计算字段
- en: 'Create a second cleaning step from the same listings data and filter this time
    on **True** in the **host_identity_verified** column:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从相同的 listings 数据中创建第二个清洗步骤，这次在 **host_identity_verified** 列中过滤 **True**：
- en: '![](img/B18435_03_16.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_16.png)'
- en: 'Figure 3.16: Filtering on True'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.16：按 True 进行过滤
- en: 'Create a calculated field, `DatasetB_ID`, containing just a string, `''B''`,
    using the same process shown in *Figure 3.15*. Renaming the steps by right-clicking
    and hitting **Rename** helps to keep track of the applied changes. Your flow should
    look like the following:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个计算字段 `DatasetB_ID`，其中只包含字符串 `'B'`，使用在 *图 3.15* 中显示的相同过程。右键单击并点击 **重命名**
    来重命名步骤，有助于跟踪所应用的更改。您的流程应该如下所示：
- en: '![](img/B18435_03_17.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_17.png)'
- en: 'Figure 3.17: Visual flow'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.17：视觉流程
- en: 'You have now created two datasets that can be combined using a union, without
    changing the original data. Union the two by either selecting **Union** after
    clicking on **+** next to **Dataset A** or by dragging one step over the other
    (**Dataset B** over **Dataset A** or vice versa):'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在已经创建了两个可以通过合并结合的数据集，而不需要更改原始数据。通过选择 **Union**（在点击 **Dataset A** 旁边的 **+**
    后）或者将一个步骤拖到另一个步骤上（**Dataset B** 在 **Dataset A** 上方，或反之）来合并这两个数据集：
- en: '![](img/B18435_03_18.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_18.png)'
- en: 'Figure 3.18: Union'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.18：合并
- en: 'Check whether all fields match by clicking on **Union 1** and looking at the
    input details at the bottom left of the screen:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击 **Union 1** 并查看屏幕左下角的输入详情来检查所有字段是否匹配：
- en: '![](img/B18435_03_19.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_19.png)'
- en: 'Figure 3.19: Visual check'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.19：视觉检查
- en: 'In the preceding screenshot, you can see that on the left, you have information
    about the union. From top to bottom: the **Inputs** and their respective colors
    (these are the same as in the flow pane), the **Resulting Fields**, showing 2
    mismatching fields, and finally, the **Mismatched Fields** themselves: **DatasetA_ID**
    and **DatasetB_ID**. The colors next to each mismatched field show that our **DatasetB_ID**
    field does not exist in **DatasetA**, and the **DatasetA_ID** field does not exist
    in **DatasetB**.'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在前面的截图中，你可以看到左侧是关于联合的信息。自上而下依次是：**Inputs**及其各自的颜色（这些颜色与流程面板中的颜色相同），**Resulting
    Fields**，显示有2个不匹配的字段，最后是**Mismatched Fields**本身：**DatasetA_ID**和**DatasetB_ID**。每个不匹配字段旁边的颜色表示我们的**DatasetB_ID**字段在**DatasetA**中不存在，而**DatasetA_ID**字段在**DatasetB**中不存在。
- en: 'In this case, we know that those columns can be appended even despite the different
    naming conventions. A better name for both fields would have been **Dataset_ID**
    (you can go a few steps back and try this out). Prep will not show any mismatches
    then. But for us here, we can go ahead and drag and drop one field on top of the
    other to merge them and thereby give Prep the permission to view them as one column:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这种情况下，我们知道即使命名约定不同，这些列也可以被追加。两个字段的更好命名应该是**Dataset_ID**（你可以回到之前的步骤试试看）。这样，Prep就不会显示任何不匹配的情况。对于我们这里的操作，我们可以直接将一个字段拖动到另一个字段上方进行合并，从而允许Prep将它们视为一个列：
- en: '![](img/B18435_03_20.png)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_20.png)'
- en: 'Figure 3.20: Merge'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.20：合并
- en: 'See how the **Resulting Fields** now show 0 mismatches, and how both dataset
    colors are now represented in the bar underneath the column header:'
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以看到**Resulting Fields**现在显示0个不匹配项，且两个数据集的颜色已在列标题下方的条形图中显示：
- en: '![](img/B18435_03_21.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_21.png)'
- en: 'Figure 3.21: Color coding'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.21：颜色编码
- en: Rename by selecting and right-clicking the union step from **Union 1** to **listings2**,
    and add a description by selecting and right-clicking the union step and hitting
    **Add Description** if you like—all the extra effort you make now will help you
    later with replication, documentation, and explanation.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择并右键点击联合步骤，将**Union 1**重命名为**listings2**，并在你需要时，通过选择并右键点击联合步骤，点击**Add Description**来添加描述—现在所做的额外工作将有助于你以后进行复制、文档编写和解释。
- en: Congratulations; your first union was a success. We first split the original
    listings dataset in to two and then combined them again into one. Stacking data
    with the same layout on top of each other, as we’ve done here, is a typical task
    for unions.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜，你的第一个联合成功了。我们首先将原始的列表数据集拆分成两个，然后再合并成一个。像我们这样将具有相同布局的数据堆叠在一起，是联合的典型任务。
- en: Wildcard unions
  id: totrans-130
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 通配符联合
- en: 'Instead of dragging one data input on top of another, as we did in the previous
    section, you can also tell Prep which files to union from a pre-defined directory.
    Oftentimes, departments have a shared location in which they store, for example,
    Excel files that are named something such as **Jan2023Revenue**, **Feb2023Revenue**,
    **Mar2023Revenue**, and so on. If you come across such a scenario, you can do
    the following:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以选择告诉Prep哪些文件需要联合，而不是像我们在前一部分那样将一个数据输入拖动到另一个数据输入上方。通常，部门会有一个共享的位置，用来存储例如名为**Jan2023Revenue**、**Feb2023Revenue**、**Mar2023Revenue**等的Excel文件。如果你遇到这种情况，你可以执行以下操作：
- en: Connect Prep to any one file that you want to use.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Prep连接到你想使用的任何一个文件。
- en: 'Click on the input data icon and select the **Tables** tab. You can now see
    that you can create a union given a certain condition:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击输入数据图标，并选择**Tables**标签。现在你可以看到，在某些条件下，你可以创建一个联合：
- en: '![](img/B18435_03_22.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_22.png)'
- en: 'Figure 3.22: The Tables menu view'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.22：Tables 菜单视图
- en: 'I will select all matching filenames in that same directory that start with
    something (*****) and end with **2023Revenue.xlsx**, and as you can see, Jan,
    Feb, and March will all be included, and you can even filter the input by using
    the **File** and **Worksheet** filter, and clicking **Apply** when you are done::'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我将在同一目录中选择所有匹配的文件名，这些文件名以（*****）开头，并以**2023Revenue.xlsx**结尾。如你所见，1月、2月和3月的文件都会被包含在内，你甚至可以通过使用**File**和**Worksheet**筛选器来过滤输入，并在完成时点击**Apply**：
- en: '![](img/B18435_03_23.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_23.png)'
- en: 'Figure 3.23: Filtering the unions'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.23：过滤联合
- en: This is the wildcard union feature. It is really powerful! Try it out and see
    for yourself.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是通配符联合功能。它真的很强大！试试看，亲自体验一下。
- en: Adding joins
  id: totrans-140
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加连接
- en: 'Now, we will continue to work in the same flow pane and focus on a join. As
    a quick refresher, a join appends data horizontally. As a rule of thumb, unions
    increase the number of rows and joins change the number of columns:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将继续在相同的流程面板中工作，并重点关注连接。简要回顾一下，连接是横向追加数据。一般来说，联合会增加行数，而连接会改变列数：
- en: Drag **listings2** onto **reviews** until the **Join** option appears.
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**listings2**拖动到**reviews**上，直到出现**连接**选项。
- en: '![](img/B18435_03_24.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_24.png)'
- en: 'Figure 3.24: Join'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.24：连接
- en: Select **listing_id** from **reviews** and **id** from **listings2** for your
    join. Please note that you can change the join type by clicking on the Venn diagram
    under **Join Type**:![](img/B18435_03_25.png)
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**reviews**中的**listing_id**和**listings2**中的**id**作为连接字段。请注意，你可以通过点击**连接类型**下的维恩图标来更改连接类型：![](img/B18435_03_25.png)
- en: 'Figure 3.25: Visual check join'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 3.25：视觉检查连接
- en: What the preceding overview tells us is that all `68,275` rows of the **reviews**
    dataset were matched to a row in the **listing2** dataset. However, we do have
    `756` mismatches from the **listing2** dataset. Our total **Join Result** is therefore
    `68,275` rows. But it is likely that not all listings have reviews and therefore
    we can safely assume that our join worked as expected.
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上面的概述告诉我们，所有`68,275`行**评论**数据集中的数据都与**listing2**数据集中的一行匹配。然而，我们的**listing2**数据集中有`756`行不匹配。我们的**连接结果**因此为`68,275`行。但很可能并非所有的房源都有评论，因此我们可以合理地假设我们的连接按预期工作。
- en: 'Another check could be to change the join to a full outer join and dive deeper
    into the data later in Tableau Desktop. In order to get to a full outer join,
    simply click on the outer edge of the two circles:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 另一个检查方法是将连接更改为完全外连接，然后稍后在 Tableau Desktop 中深入分析数据。要进行完全外连接，只需点击两个圆的外边缘：
- en: '![](img/B18435_03_26.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_26.png)'
- en: 'Figure 3.26: Full join'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.26：全连接
- en: 'If you want to check immediate results, simply right-click on, for example,
    the join symbol (represented by the Venn diagram icon, as shown in the following
    screenshot), and you’ll be able to check the data in Tableau Desktop by selecting
    **Preview in Tableau Desktop**:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你想查看即时结果，只需右键点击，例如，连接符号（由维恩图标表示，如下截图所示），然后选择**在 Tableau Desktop 中预览**，即可在
    Tableau Desktop 中查看数据：
- en: '![](img/B18435_03_27.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_27.png)'
- en: 'Figure 3.27: Preview'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.27：预览
- en: We can also rename the step; let’s change our join’s name to `lis&rev`.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以重新命名这一步骤；让我们将连接的名称改为`lis&rev`。
- en: By now, we’ve seen how to clean data, and how to use unions and joins. The union
    part taught us how to append data vertically or underneath each other. The join
    part allowed us to combine data horizontally or next to each other. More specifically,
    we were able to combine the listings with their respective reviews. Instead of
    having two datasets, we have created one that allows us to look up a listing review,
    and in the same row, view all the data regarding the listing itself, like the
    type of listing, number of bedrooms, whether it has an ocean view, and so on.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 到现在为止，我们已经了解了如何清洗数据，以及如何使用联合和连接。联合部分教会我们如何将数据垂直追加或一个接一个地放在一起。连接部分让我们能够将数据横向合并或并排显示。更具体地说，我们能够将房源信息与其对应的评论结合起来。这样一来，我们不再有两个数据集，而是创建了一个数据集，让我们可以查找某个房源的评论，并在同一行中查看与房源本身相关的所有数据，例如房源类型、卧室数量、是否有海景等等。
- en: Let’s continue next with the aggregation step.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们继续进行聚合步骤。
- en: Aggregating
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 聚合
- en: An aggregation is used when you want to change the granularity of your data.
    In our dataset, we have one row per review. However, we want to see if hosts that
    have been in the Airbnb business in Boston longer have more reviews compared to
    hosts that started more recently. In order to do so, we need to get an aggregated
    number of reviews per year that the host started offering listings. The **host_since**
    field will give us helpful information as well as the **reviewer_id** field. For
    the latter, we will count the distinct reviewers that left reviews. Let’s do it!
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 聚合用于当你想改变数据粒度时。在我们的数据集中，每一行对应一条评论。然而，我们想看看在波士顿做 Airbnb 的房东，如果在这个行业的时间更长，他们的评论是否更多，而那些新近开始的房东评论较少。为了实现这一目标，我们需要按房东开始提供房源的年份来聚合评论数量。**host_since**字段将为我们提供有用信息，**reviewer_id**字段也会提供帮助。对于后者，我们将计算留下评论的不同评论者。让我们开始吧！
- en: 'Our current flow pane looks like this:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 我们当前的流程面板看起来是这样的：
- en: '![](img/B18435_03_28.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_28.png)'
- en: 'Figure 3.28: Flow pane'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.28：流程面板
- en: 'To aggregate the number of reviews, please take the following steps:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 要对评论数量进行聚合，请执行以下步骤：
- en: 'First, click on the **+** sign next to **lis&rev** and choose **Aggregate**:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，点击**lis&rev**旁边的**+**号，选择**聚合**：
- en: '![](img/B18435_03_29.png)Figure 3.29: Aggregate'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/B18435_03_29.png)图 3.29：聚合'
- en: This will open a window entitled **Aggregate 1**. Our goal is to see how many
    people reviewed accommodation per year from when the host started offering listings;
    therefore, take the following actions.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将打开一个名为**聚合 1**的窗口。我们的目标是查看每年有多少人对住宿进行了评论，从主持人开始提供房源的年份算起；因此，请执行以下操作。
- en: Using the search field in the **Additional Fields** pane, as can be seen on
    the left in *Figure 3.30*, add the **host_since** field to **Grouped Fields**
    by dragging and dropping.
  id: totrans-166
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用**附加字段**窗格中的搜索字段，如*图 3.30*左侧所示，通过拖放将**host_since**字段添加到**分组字段**中。
- en: Add the **reviewer_id** to **Aggregated Fields**, also by dragging and dropping.
    Note that the default aggregation is **SUM**, as indicated by the arrow on the
    right:![](img/B18435_03_30.png)
  id: totrans-167
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**reviewer_id**添加到**聚合字段**，同样通过拖放的方式。请注意，默认的聚合方式是**SUM**，如右侧箭头所示：![](img/B18435_03_30.png)
- en: 'Figure 3.30: Aggregated fields'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 3.30：聚合字段
- en: 'Change the **reviewer_id** aggregation by clicking on **SUM** under **Aggregated
    Fields**, and change it to **Count Distinct**:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**聚合字段**下的**SUM**，然后将其更改为**计数去重**，以改变**reviewer_id**的聚合方式：
- en: '![](img/B18435_03_31.png)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_31.png)'
- en: 'Figure 3.31: Count Distinct'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.31：计数去重
- en: This will change the default aggregation, **Sum** (where every review is counted),
    to **Count Distinct**, which counts the distinct reviewer ID aggregation. This
    will allow us to focus on how many different reviewers left reviews. This is just
    an arbitrary choice; feel free to try out the other aggregations and see how the
    data changes.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将把默认的聚合方式**总和**（即每条评论都会被计算）更改为**计数去重**，即计算去重后的评论者 ID 聚合。这将帮助我们专注于有多少不同的评论者留下了评论。这只是一个任意的选择，欢迎尝试其他聚合方式，看看数据如何变化。
- en: 'Let’s have a look at the Tableau Desktop preview by right-clicking on the **Aggregate**
    step on our flow pane and selecting **Preview in Tableau Desktop**:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 通过右键点击流程面板中的**聚合**步骤，并选择**在 Tableau Desktop 中预览**，我们来看看 Tableau Desktop 预览：
- en: '![](img/B18435_03_32.png)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_32.png)'
- en: 'Figure 3.32: Host chart'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.32：主机图表
- en: 'In the preceding screenshot, we can see the distinct count of reviews per **host_since**
    date. Of course, in this specific example, Tableau Desktop could also count the
    reviews per **host_since** date if those were the only fields dragged onto the
    view without the help of Prep. But a benefit of aggregating prior to importing
    the data into Tableau Desktop is that you have less data to import; hence, it’s
    possible to achieve better performance. If you want to continue analyzing the
    dataset in either Prep or Tableau Desktop, you can now ask further questions,
    such as the following:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的截图中，我们可以看到每个**host_since**日期的评论去重计数。当然，在这个特定示例中，如果没有 Prep 的帮助，Tableau Desktop
    也可以按**host_since**日期计算评论数，前提是这些字段是唯一拖入视图中的。但在将数据导入 Tableau Desktop 之前进行聚合的好处是，你需要导入的数据量更少，因此可能会实现更好的性能。如果你想继续在
    Prep 或 Tableau Desktop 中分析数据集，现在你可以提出进一步的问题，例如：
- en: Which type of accommodation has the highest discount for staying a week rather
    than a day?
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哪种类型的住宿在住一周而不是住一天时享有最高折扣？
- en: Is there a correlation between the size of the accommodation and the monthly
    price?
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 住宿大小与月租价格之间有相关性吗？
- en: How many hosts (as a percentage) have more than one listing?
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有多少比例的房东有多个房源？
- en: Good luck and happy dashboard building!
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 祝你好运，快乐地构建仪表板！
- en: 'We’ll finish this section here and look back at a graph consisting of only
    9 datapoints, which we created by aggregating the almost 64,000 rows of **reviewer_id**
    data by the year that the host started offering the listing. The graph tells a
    story; 64,000 individual rows of data don’t. That is why it is so important to
    always reduce your data, and aggregate it if possible. In the next section, we
    will talk about another important feature: pivoting.'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在这里结束这一部分，并回顾一个由仅 9 个数据点组成的图表，这是我们通过按房东开始提供房源的年份聚合了近 64,000 行**reviewer_id**数据后创建的。图表讲述了一个故事；而
    64,000 行单独的数据并没有。这就是为什么始终减少数据量，并尽可能进行聚合是如此重要的原因。在下一部分，我们将讨论另一个重要的功能：透视。
- en: Pivoting
  id: totrans-182
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 透视
- en: Do you recognize a situation where you drag and drop your fields onto your Tableau
    Desktop row and column shelves but somehow the visualization doesn’t do what you
    want? Chances are that you have to turn your data, or better, pivot it. If data
    that you expect to be in one column, spread over multiple rows, appears in multiple
    columns instead, it’s a case for pivoting. The following example will showcase
    a need for pivoting.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 你是否遇到过将字段拖到 Tableau Desktop 行和列架上，但可视化效果并不如预期的情况？很可能是你需要“旋转”数据，或者更准确地说，需要对数据进行
    pivot。如果你期望在一个列中出现的数据分布在多行中，而实际数据却出现在多个列中，那就是需要 pivot 的情况。以下例子将展示一个需要 pivot 的场景。
- en: 'For our pivot example, we will make use of another dataset. You can find it
    at [https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/blob/main/Chapter03/Excel_Pivot.xlsx](https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/blob/main/Chapter03/Excel_Pivot.xlsx).
    The dataset is very simple and looks like this:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的 pivot 示例中，我们将使用另一个数据集。你可以在 [https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/blob/main/Chapter03/Excel_Pivot.xlsx](https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/blob/main/Chapter03/Excel_Pivot.xlsx)
    找到它。这个数据集非常简单，内容如下：
- en: '![](img/B18435_03_33.png)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_33.png)'
- en: 'Figure 3.33: Excel input'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.33：Excel 输入
- en: 'It has three different colors that were observed on five different days, *x*
    amount of times. This data is a typical example of when pivoting is helpful to
    tidy up the data because multiple columns have the same purpose—**B**, **C**,
    and **D** are all observations. If you wanted to visualize this table, it could
    look like the following:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 它包含了在五个不同的日子里观察到的三种不同颜色，每种颜色被观察了 *x* 次。这些数据是一个典型的例子，展示了在数据整理时，pivot 操作的作用，因为有多个列具有相同的用途——**B**、**C**
    和 **D** 都是观察值。如果你想要可视化这个表格，它可能看起来如下：
- en: '![Chart, line chart  Description automatically generated](img/B18435_03_34.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![图表，折线图 自动生成的描述](img/B18435_03_34.png)'
- en: 'Figure 3.34: Pivot I'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.34：Pivot I
- en: But you might be wondering, since the color scheme already indicates which color
    has been observed, wouldn’t it be better to put all three lines in one graph?
    With separate lines per color, within one line chart? Let’s accomplish this!
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 但你可能会想，既然颜色方案已经表明了哪种颜色被观察过，是否最好把三条线放在一个图表里？在同一个折线图中为每种颜色绘制一条独立的线？我们来实现这一目标！
- en: 'Begin by connecting the `PivotDataSet` to Prep, then follow these steps to
    pivot the data:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 首先将 `PivotDataSet` 连接到 Prep，然后按照以下步骤对数据进行 pivot：
- en: 'From Prep, connect to the Excel file we just created and add **PivotDataSet**
    to the flow pane, click on the **+** next to the input data step, and select **Pivot**.
    A new step called **Pivot 1** will appear:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Prep 中连接到我们刚创建的 Excel 文件，并将 **PivotDataSet** 添加到流程窗格中，点击输入数据步骤旁边的 **+**，选择
    **Pivot**。这时会出现一个名为 **Pivot 1** 的新步骤：
- en: '![](img/B18435_03_35.png)'
  id: totrans-193
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_35.png)'
- en: 'Figure 3.35: Adding a Pivot step'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.35：添加 Pivot 步骤
- en: 'Click on the **Pivot 1** step in the flow pane, and *Figure 3.36* will appear
    at the bottom of your Prep window. Select all three colors from the **Fields**
    pane shown in **Step I**, and drag them onto the **Pivoted Fields** pane, as shown
    in **Step II**:'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在流程窗格中点击 **Pivot 1** 步骤，*图 3.36* 会出现在 Prep 窗口的底部。从 **步骤 I** 显示的 **字段** 窗格中选择所有三种颜色，并将它们拖到
    **Pivoted Fields** 窗格中，如 **步骤 II** 所示：
- en: '![](img/B18435_03_36.png)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_36.png)'
- en: 'Figure 3.36: Pivot steps'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.36：Pivot 步骤
- en: 'Now, have a look at the **Pivot Results** pane, as shown in **Step III** of
    the preceding screenshot, and rename **Pivot1 Names** to **Colors** and **Pivot1
    Values** to **Observations** by right-clicking and selecting **Rename**. Now click
    the **+** next to **Pivot 1**, and voilà, we now have a clean table, called **Clean
    1**:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，查看 **Pivot Results** 窗格，如前面的截图中 **步骤 III** 所示，右键点击并选择 **重命名**，将 **Pivot1
    Names** 重命名为 **Colors**，将 **Pivot1 Values** 重命名为 **Observations**。然后点击 **Pivot
    1** 旁边的 **+**，嘿，我们现在有了一个干净的表格，名为 **Clean 1**：
- en: '![](img/B18435_03_37.png)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_37.png)'
- en: 'Figure 3.37: Pivot results'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.37：Pivot 结果
- en: 'Remember our problem from the beginning? Our line chart can now be created
    in a different way, as shown in *Figure 3.38*. Note that **Colors** is a dimension
    now and the **Observations** are their own field, compared to before when they
    were located under the column header of each color:'
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 还记得我们一开始的问题吗？现在我们可以用不同的方式创建折线图，如 *图 3.38* 所示。请注意，**Colors** 现在是一个维度，而 **Observations**
    是它自己的字段，之前它们位于每种颜色的列标题下：
- en: '![Chart, line chart  Description automatically generated](img/B18435_03_38.png)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![图表，折线图 自动生成的描述](img/B18435_03_38.png)'
- en: 'Figure 3.38: Pivoted line chart'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.38：Pivot 后的折线图
- en: This is a simple use case for pivoting, but the technique here can be transferred
    to any other dataset. Prep has a built-in recommendation feature. Whenever you
    see a light bulb in the upper-right corner of a column, check it out and see if
    the recommendation applies to your needs.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个简单的透视应用案例，但这里的技巧可以转移到任何其他数据集。Prep 有内置的推荐功能。每当你在某列的右上角看到一个灯泡图标时，检查一下，看看这个推荐是否适合你的需求。
- en: '![](img/B18435_03_39.png)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_39.png)'
- en: 'Figure 3.39: Trim spaces'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.39：修剪空格
- en: In this case, Tableau recommends we remove all leading and trailing spaces,
    which is exactly what we need! As demonstrated here, it’s always worth checking
    the recommendations.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，Tableau 建议我们移除所有的前导和尾随空格，这正是我们需要的！正如这里所示，检查推荐功能总是值得的。
- en: Perfect; you are all set with the main Prep functionality. However, you might
    be wondering what you are supposed to do if you require any further preparation.
    No problem; Prep has you covered. Scripting is the newest addition to Prep and
    the most powerful of all; it is virtually limitless! Continue reading to explore
    Prep’s scripting feature.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 完美；你已经完成了主要的 Prep 功能设置。然而，你可能会想，如果需要进一步的准备该怎么办。没问题，Prep 会帮你解决。脚本功能是 Prep 中最新的添加，也是最强大的功能之一；它几乎是无限制的！继续阅读，探索
    Prep 的脚本功能。
- en: Scripting
  id: totrans-209
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 脚本
- en: The script functionality that we will discuss next is one of the features more
    recently added to Tableau. We will discuss it next because a programming language
    like `Python` or `R` gives you endless flexibility. If you ever reach the boundaries
    of Prep’s offerings, you can fall back on scripting and write your own code to
    do exactly what you want.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来我们将讨论的脚本功能是 Tableau 最近添加的功能之一。我们将接着讨论它，因为像 `Python` 或 `R` 这样的编程语言为你提供了无限的灵活性。如果你遇到
    Prep 功能的局限，可以使用脚本并编写你自己的代码来实现你想要的功能。
- en: In order to make use of it, you have to connect to Python (or R), outside of
    Tableau first. The following steps are based on the instructions from [https://help.tableau.com/current/prep/en-us/prep_scripts_TabPy.htm](https://help.tableau.com/current/prep/en-us/prep_scripts_TabPy.htm)
    for Python or [https://help.tableau.com/current/prep/en-us/prep_scripts._R.htm](https://help.tableau.com/current/prep/en-us/prep_scripts._R.htm)
    for R.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使用它，你必须先在 Tableau 外部连接 Python（或 R）。以下步骤基于[https://help.tableau.com/current/prep/en-us/prep_scripts_TabPy.htm](https://help.tableau.com/current/prep/en-us/prep_scripts_TabPy.htm)
    中 Python 的说明，或者[https://help.tableau.com/current/prep/en-us/prep_scripts._R.htm](https://help.tableau.com/current/prep/en-us/prep_scripts._R.htm)
    中 R 的说明。
- en: 'For this exercise, we will be using the Boston Airbnb dataset, more specifically
    the `calendar` table. Download this dataset from [https://www.kaggle.com/airbnb/boston](https://www.kaggle.com/airbnb/boston)
    and connect to the `calendar` table in Prep:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个练习，我们将使用 Boston Airbnb 数据集，具体来说是 `calendar` 表格。从 [https://www.kaggle.com/airbnb/boston](https://www.kaggle.com/airbnb/boston)
    下载这个数据集，并连接到 Prep 中的 `calendar` 表格：
- en: '![A screenshot of a cell phone  Description automatically generated](img/B18435_03_40.png)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
  zh: '![A screenshot of a cell phone  Description automatically generated](img/B18435_03_40.png)'
- en: 'Figure 3.40: Calendar dataset'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.40：日历数据集
- en: 'Now, let’s take a step back and connect Python to Prep:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们退后一步，将 Python 连接到 Prep：
- en: Download and install `Python` from [python.org](http://python.org) (or download
    and install `R` from [https://www.r-project.org/](https://www.r-project.org/)).
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 [python.org](http://python.org) 下载并安装 `Python`（或从 [https://www.r-project.org/](https://www.r-project.org/)
    下载并安装 `R`）。
- en: 'Download and install `TabPy` by executing the following command in your terminal
    or on the command line:'
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在终端或命令行中执行以下命令，下载并安装 `TabPy`：
- en: '[PRE0]'
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Alternatively, if using `R`, open `R` and execute:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果使用 `R`，可以打开 `R` 并执行：
- en: '[PRE1]'
  id: totrans-220
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Open `TabPy` on the command line/terminal by entering the following command:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入以下命令，在命令行/终端中打开 `TabPy`：
- en: '[PRE2]'
  id: totrans-222
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Or, in the R GUI, type:'
  id: totrans-223
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 或者，在 R GUI 中，输入：
- en: '[PRE3]'
  id: totrans-224
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Back in Prep, click on **+** on the right-hand side of the calendar table and
    add a **Clean Step**.
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 回到 Prep，点击日历表右侧的 **+**，并添加一个 **Clean Step**。
- en: 'Add a calculated field called **PythonTest** (use **RTest**instead if you’ve
    chosen to experiment with `R`) with a string value, `"Test"`:'
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加一个名为 **PythonTest** 的计算字段（如果你选择使用 `R` 进行实验，请改用 **RTest**），并赋值为字符串 `"Test"`：
- en: '![](img/B18435_03_41.png)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_41.png)'
- en: 'Figure 3.41: PythonTest'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.41：PythonTest
- en: Now, click on **+** on the right-hand side of the **Clean 1** step and add **Script**.
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，点击 **Clean 1** 步骤右侧的 **+**，并添加 **Script**。
- en: By selecting the **Script** step, the **Settings** pane at the bottom (see *Figure
    3.42*) will give you an option to connect to **Rserve** or **TabPy****. Rserve**
    is the Tableau server for `R` and `TabPy` is the Tableau server for Python.
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择**脚本**步骤，底部的**设置**面板（见*图3.42*）将为你提供连接**Rserve**或**TabPy**的选项。**Rserve**是`R`的Tableau服务器，而**TabPy**是Python的Tableau服务器。
- en: 'Choose your connection type by selecting **Rserve** or **Tableau Python (TabPy)
    Server**. Then open **Help** | **Settings and Performance** | **Manage Analytics
    Extension Connection**. In the upcoming window, connect Prep to `TabPy` by using
    **localhost** and **Port 9004** (if using R, connect to Rserve by selecting it
    under **Connection type** and using **localhost** and **Port 6311** in the same
    popup), and click **Sign In**:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你的连接类型，选择**Rserve**或**Tableau Python (TabPy) 服务器**。然后打开**帮助** | **设置和性能**
    | **管理分析扩展连接**。在弹出的窗口中，通过使用**localhost**和**4912端口**（如果使用R，请选择Rserve并使用**localhost**和**6311端口**）将Prep连接到`TabPy`，然后点击**登录**：
- en: If using an SSL-encrypted Rserve server, **Port 4912** is the default port.![](img/B18435_03_42.png)
  id: totrans-232
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果使用SSL加密的Rserve服务器，**4912端口**是默认端口。![](img/B18435_03_42.png)
- en: 'Figure 3.42: TabPy Server'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图3.42：TabPy服务器
- en: Next, if experimenting with Python, create a `.py` file containing the following
    code and make sure the indentation is exactly the same:![](img/B18435_03_43.png)
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，如果进行Python实验，创建一个包含以下代码的`.py`文件，并确保缩进完全一致：![](img/B18435_03_43.png)
- en: 'Figure 3.43: The .py file'
  id: totrans-235
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图3.43：.py文件
- en: 'Alternatively, create a `.R` file containing the following code:'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 或者，创建一个包含以下代码的`.R`文件：
- en: '[PRE4]'
  id: totrans-237
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The script we just created is written to change an existing column in Prep and
    rename every row from `Test` to `Python` or `R`, depending on which language you’ve
    chosen.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们刚才创建的脚本是用来更改Prep中现有列并将每一行从`Test`重命名为`Python`或`R`，取决于你选择的语言。
- en: 'We’ll continue with the Python script. Back in Prep, browse for the `.py` file
    we just created and add the function name to the Prep interface. I called the
    file `PrepTableau.py` and the function name is `ChangeString`, as defined in the
    preceding step:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将继续使用Python脚本。回到Prep，浏览我们刚刚创建的`.py`文件，并将函数名添加到Prep界面。我将文件命名为`PrepTableau.py`，函数名是`ChangeString`，如前一步所定义：
- en: '![](img/B18435_03_44.png)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_44.png)'
- en: 'Figure 3.44: Adding a function'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.44：添加一个函数
- en: 'Observe that the **PythonTest** column has changed from **Test** to **Python**:'
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注意到**PythonTest**列已从**Test**更改为**Python**：
- en: '![](img/B18435_03_45.png)'
  id: totrans-243
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_45.png)'
- en: 'Figure 3.45: PythonTest'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.45：PythonTest
- en: Our little experiment worked! And even though we used a very simplistic example,
    it shows that the scripting feature works, and you can just follow your creativity
    with what else you might be able to do by using scripting. Examples include everything
    from calculating an inverse normal distribution to machine learning with sentiment
    analysis or clustering.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的小实验成功了！尽管我们使用了一个非常简单的例子，但它证明了脚本功能是有效的，你可以尽情发挥创意，探索脚本可能做的其他事情。示例包括从计算逆正态分布到进行情感分析或聚类的机器学习。
- en: 'You might have noticed that we did not import `pandas` in the script itself,
    but still used a `pandas` DataFrame. This is due to the fact that the `pandas`
    import comes with `TabPy`. You can see this in your command line/terminal after
    opening `TabPy`:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能已经注意到，我们在脚本中没有直接导入`pandas`，但仍然使用了`pandas`的DataFrame。这是因为`pandas`的导入是随`TabPy`一起提供的。你可以在打开`TabPy`后，在命令行/终端中看到这一点：
- en: '![](img/B18435_03_46.png)'
  id: totrans-247
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_46.png)'
- en: 'Figure 3.46: Importing pandas on the command line'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.46：在命令行中导入pandas
- en: If you want to use other libraries in your script, you can install them by using
    `pip` `install` on your command line/terminal. You only have to restart `TabPy`
    afterward and you will be able to use them too. Remember, always open `TabPy`
    on the terminal/command line first, or else Prep can’t execute the script.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想在脚本中使用其他库，可以通过在命令行/终端使用`pip install`来安装它们。安装完成后，你只需重新启动`TabPy`，就能使用它们。记住，始终先在终端/命令行中打开`TabPy`，否则Prep无法执行脚本。
- en: At the time of writing, Prep does not support a script as input yet—you could,
    however, use a dummy `.csv` file as a workaround and add a script to the flow
    immediately after it.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 在写作时，Prep尚不支持将脚本作为输入—不过，你可以使用一个虚拟的`.csv`文件作为解决方法，并在流程中紧接其后添加脚本。
- en: Additional options with Prep
  id: totrans-251
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Prep的附加选项
- en: This section will discuss some smaller standalone, very powerful, and new Prep
    features. Some of you might have been using Prep since the very first release.
    With each release and each additional user and feedback given, Tableau was able
    to create a priority list of features that stakeholders—like you and I—really
    wished to see. The upcoming topics are some of the best examples. None of these
    features were present in the initial release but have made the product so much
    better, more valuable, and more complete. You are able now to save part of your
    flow and reuse it, write back your data to an external database, refresh parts
    of your dataset, and schedule flows with the Tableau Data Management add-on. Let’s
    take a closer look and start with the “insert flow” function.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将讨论一些较小的独立功能，这些功能非常强大且全新。你们中的一些人可能自从Prep首次发布以来就已经在使用它。随着每次发布和每个新增用户及反馈的收集，Tableau能够创建一个功能优先级列表，列出利益相关者——像你我这样的人——真正希望看到的功能。接下来的主题就是其中一些最好的例子。这些功能在初始版本中并不存在，但它们使得产品变得更加优秀、更加有价值、更加完整。现在，你可以保存部分流程并重用它，向外部数据库写回数据，刷新数据集的部分内容，并使用Tableau数据管理附加组件安排流程。让我们仔细看看，首先从“插入流程”功能开始。
- en: Insert Flow
  id: totrans-253
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 插入流程
- en: 'An option in Prep is to add an existing flow to your own flow. For example,
    say someone already worked on the Boston Airbnb dataset and created a flow of
    the highlighted steps only:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: Prep中的一个选项是将现有的流程添加到你自己的流程中。例如，假设某人已经在Boston Airbnb数据集上工作，并且只创建了突出显示步骤的流程：
- en: '![](img/B18435_03_47.png)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_47.png)'
- en: 'Figure 3.47: Save to File'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: '图 3.47: 保存到文件'
- en: 'You could save the steps you wish to insert into your flow by right-clicking
    and selecting **Save to File**, as shown in *Figure 3.47*. These steps could be
    inserted back into your flow by right-clicking on the canvas, selecting **Insert
    Flow**, and browsing your `.tfl` files for the previously downloaded file:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过右键点击并选择**保存到文件**，如*图 3.47*所示，保存你希望插入到流程中的步骤。这些步骤可以通过右键点击画布，选择**插入流程**，然后浏览你的
    `.tfl` 文件来将之前下载的文件插入到流程中：
- en: '![](img/B18435_03_48.png)'
  id: totrans-258
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_48.png)'
- en: 'Figure 3.48: Insert Flow'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '图 3.48: 插入流程'
- en: 'This functionality is very convenient to share work and reuse already created
    steps. Next, we will look into another functionality that will allow you to refresh
    the data used in your Prep flow: incremental refresh.'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 这个功能非常方便，可以共享工作并重用已经创建的步骤。接下来，我们将探讨另一个功能，它将允许你刷新在Prep流程中使用的数据：增量刷新。
- en: Incremental refresh
  id: totrans-261
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 增量刷新
- en: Prep 2020.2 saw the introduction of the incremental refresh feature. After completing
    a flow and adding an output, you can decide whether you want a full or incremental
    refresh, and which field you want to use as an indicator. Imagine you have a dataset
    of infections per day of a particular disease. By the end of every day, you want
    to add the new data, which comes from a health ministry database, to your dataset.
    So, what are you going to do?
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: Prep 2020.2引入了增量刷新功能。在完成一个流程并添加输出后，你可以决定是否选择全量刷新或增量刷新，并选择作为指示器的字段。假设你有一个特定疾病每天感染人数的数据集。每天结束时，你希望将来自卫生部门数据库的新数据添加到数据集中。那么，你该怎么办？
- en: Typically, you would load the whole dataset, all of it, after the newest datapoints
    were added. But nothing changes about the datapoints older than that day; they
    will remain the same and you loaded them before already. Therefore, it is a waste
    of resources to reload the whole dataset. An incremental refresh will only load
    new datapoints and add them to the existing data, which has been built up over
    many days. You can imagine how much time and effort this will save. It is a much
    more sustainable way to keep your data up to date than a full refresh.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，你会在添加最新数据点后加载整个数据集，所有数据都会加载。但对于比当天数据点更早的数据，数据不会改变；你之前已经加载过它们。因此，重新加载整个数据集是一种资源浪费。增量刷新只会加载新的数据点，并将其添加到已经建立了多日的数据中。你可以想象这将节省多少时间和精力。相比完全刷新，这是一个更可持续的方式来保持数据的更新。
- en: 'We are going to look at an example in the following workflow. It is important
    that an **Output** step is part of the flow:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将查看以下工作流中的一个示例。重要的是，**输出**步骤必须是流程的一部分：
- en: '![](img/B18435_03_49.png)'
  id: totrans-265
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_49.png)'
- en: 'Figure 3.49: Incremental refresh'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: '图 3.49: 增量刷新'
- en: 'To add the incremental refresh, take the following steps:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加增量刷新，请按照以下步骤操作：
- en: 'Click on the data input step and scroll down the **Settings** tab until you
    see the **Incremental Refresh** option. Then, check the **Enable incremental refresh**
    box:'
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击数据输入步骤，向下滚动到**设置**标签，直到看到**增量刷新**选项。然后，勾选**启用增量刷新**框：
- en: '![](img/B18435_03_50.png)'
  id: totrans-269
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_50.png)'
- en: 'Figure 3.50: Set up Incremental Refresh'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.50：设置增量刷新
- en: After you click on the **Enable incremental refresh** box, a dropdown will appear.
    This dropdown contains all fields that Prep finds useful as an indicator for a
    data refresh. Select, for example, the **date**field**.** It is the perfect field
    to use since as soon as a new date is added to the original data source, the refresh
    will start.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你点击**启用增量刷新**框后，会出现一个下拉菜单。该下拉菜单包含Prep认为在数据刷新时作为指标有用的所有字段。例如，选择**日期**字段。它是一个完美的字段，因为一旦原始数据源中添加了新的日期，刷新就会开始。
- en: 'Prep will also ask you for the output field that will represent the **date**
    column in the output. In our case, it is still **date**:'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Prep还会要求你选择一个输出字段，该字段将代表输出中的**日期**列。在我们的例子中，它仍然是**日期**：
- en: '![](img/B18435_03_51.png)'
  id: totrans-273
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_51.png)'
- en: 'Figure 3.51: Select an output field'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.51：选择输出字段
- en: 'After everything is set up, click on the **Output** step again and note how
    you can now select the type of refresh, full or incremental, you prefer for this
    flow by clicking on the drop-down menu on the **Run Flow** option:'
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置完成后，再次点击**输出**步骤，注意现在你可以通过点击**运行流**选项旁边的下拉菜单来选择你偏好的刷新类型（全量或增量）：
- en: '![](img/B18435_03_52.png)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_52.png)'
- en: 'Figure 3.52: Refresh options'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.52：刷新选项
- en: You just learned how to set up your data refresh—full as well as incremental.
    This will help you with the sustainable usage of compute resources and to always
    have your data up to date. Next, we will introduce another Tableau feature worth
    investigating—Bulk rename.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 你刚刚学会了如何设置数据刷新——全量刷新和增量刷新。这将帮助你在可持续使用计算资源的同时，确保数据始终是最新的。接下来，我们将介绍另一个值得调查的Tableau功能——批量重命名。
- en: Bulk rename
  id: totrans-279
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 批量重命名
- en: 'This feature is a real time-saver! Simply select as many columns as you want
    to rename, right-click, and select **Rename Fields**. A new view will open that
    allows you to add a prefix or suffix to every selected column or you can replace
    specific text in each of them:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 这个功能确实节省时间！只需选择你希望重命名的列，右键单击并选择**重命名字段**。会打开一个新视图，允许你为每个选定的列添加前缀或后缀，或者替换它们中的特定文本：
- en: '![](img/B18435_03_53.png)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_53.png)'
- en: 'Figure 3.53: Bulk rename in action'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.53：批量重命名操作
- en: You could then also leverage the **Find Text** function or automatically rename
    all new fields that might come in at a later stage, e.g., because IT added an
    additional column to your dataset.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以利用**查找文本**功能，或自动重命名所有可能在后期阶段加入的新字段，例如，因为IT部门向数据集中添加了额外的列。
- en: Tableau Prep Conductor
  id: totrans-284
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Tableau Prep Conductor
- en: With **Tableau Prep Conductor**, you can publish your Prep flows to Tableau
    Server, schedule them to run at a certain time, and always have refreshed data.
    The conductor is available in the Tableau Data Management add-on and doesn’t ship
    with Tableau Desktop or Prep.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 使用**Tableau Prep Conductor**，你可以将Prep流发布到Tableau Server，安排它们在特定时间运行，并始终保持数据刷新。该工具包含在Tableau数据管理附加组件中，并不随Tableau
    Desktop或Prep一起提供。
- en: For more information, please check [https://www.tableau.com/products/add-ons/data-management](https://www.tableau.com/products/add-ons/data-management).
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 更多信息，请访问[https://www.tableau.com/products/add-ons/data-management](https://www.tableau.com/products/add-ons/data-management)。
- en: Exporting data
  id: totrans-287
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导出数据
- en: 'Last, but not least, we may want to export our data. We have seen before that
    a right-click on a symbol in the flow pane offers the possibility to preview the
    data in Tableau Desktop:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 最后但同样重要的是，我们可能希望导出数据。我们之前看到，在流面板中右击符号会提供在Tableau Desktop中预览数据的选项：
- en: If you want a flow to run according to a schedule or save it to a location,
    it’s best to use **Add** | **Output****.**
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你希望流按照计划运行或保存到某个位置，最好使用**添加** | **输出**。
- en: 'After you do this, the following screen will appear:'
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成此操作后，将出现以下屏幕：
- en: '![](img/B18435_03_54.png)'
  id: totrans-291
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_54.png)'
- en: 'Figure 3.54: Save to file'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.54：保存到文件
- en: The user now has the option to save the data to a file, and also to save it
    in Hyper file format as `.hyper`, as `.xlsx` (new in Tableau 2021.1), or as a
    `.csv` file.
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户现在可以选择将数据保存到文件中，还可以将其保存为`.hyper`的Hyper文件格式，或`.xlsx`（Tableau 2021.1的新功能）格式，或者保存为`.csv`文件。
- en: Another option is to publish the newly generated data source directly to Tableau
    Server and make it available to other users. For this option, select **Publish
    as a data source** instead of **Save to File** from the dropdown.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 另一种选择是将新生成的数据源直接发布到 Tableau Server，并使其他用户可以使用它。选择**发布为数据源**而不是下拉菜单中的**保存为文件**。
- en: 'A third option to save Prep output has been added to Tableau 2020.3: writing
    the resulting data to an external database. If you want to do so, select the **Database**
    table option from the dropdown. At the time of writing, seven databases are compatible
    with the write-back functionality, but more will be added based on user demand:'
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Tableau 2020.3 添加了一个第三个保存 Prep 输出的选项：将结果数据写入外部数据库。如果你想这么做，从下拉菜单中选择**数据库**表选项。撰写本文时，七个数据库与写回功能兼容，但将根据用户需求添加更多数据库：
- en: '![](img/B18435_03_55.png)'
  id: totrans-296
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_03_55.png)'
- en: 'Figure 3.55: Save to external database'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.55：保存到外部数据库
- en: Since the Tableau release 2022.3, you can write back to CRM Analytics too. To
    do this, you need a Salesforce account and the according license. Therefore, we
    will not discuss this option further, but if you are a Salesforce Analytics user,
    check this out!
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 自 Tableau 2022.3 版本以来，你还可以将数据写回到 CRM Analytics。为此，你需要一个 Salesforce 账户和相应的许可证。因此，我们不会进一步讨论这个选项，但如果你是
    Salesforce Analytics 用户，可以查看这个功能！
- en: This section has shown us how to save our work and, even more so, the output
    of our Prep flows. To me, the ability to save output to an external database is
    the best new feature, because it is the easiest way to share my output in a structured
    and organized way with others. So not only I but also other users can work with
    the prepped data, saving additional work. The flow can then be reused not only
    by me but by anyone.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 本节展示了如何保存我们的工作，尤其是如何保存我们的 Prep 流程输出。对我来说，能够将输出保存到外部数据库是最好的新功能，因为它是将我的输出以结构化和组织化的方式与他人共享的最简单方法。因此，不仅我自己，其他用户也可以使用已准备好的数据，避免了额外的工作。然后，这个流程不仅我可以重复使用，任何人都可以使用。
- en: Summary
  id: totrans-300
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'We started this chapter with an introduction to Prep. We looked at the GUI
    and how we can connect data to it. After that, we did some exercises regarding
    data preparation. This can be divided into five parts: data cleaning, unions and
    joins, aggregating, pivoting, and scripting. We also considered several additional
    options to improve the usefulness of your data, including inserting steps from
    other flows, and incremental refreshes. To round out this chapter on Prep, we
    looked at exporting data. Here, we saw that the new dataset can be saved as a
    file or data extract, written back to an external database, or pushed directly
    to Tableau Server.'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从介绍 Prep 开始了本章内容。我们查看了 GUI 以及如何将数据连接到其中。之后，我们做了一些关于数据准备的练习。这些可以分为五个部分：数据清洗、联合与连接、聚合、透视和脚本。我们还考虑了一些额外的选项，以提高数据的实用性，包括插入其他流程的步骤和增量刷新。为了总结本章的
    Prep 内容，我们查看了数据导出。在这里，我们看到新数据集可以保存为文件或数据提取，可以写回到外部数据库，或者直接推送到 Tableau Server。
- en: Just like Tableau Desktop, Prep is very much self-explanatory and highly visual.
    Colors, symbols, and highlights make it easy to get used to this extract, transform,
    and load tool, which is invaluable for preparing your data before manipulating
    it on the main Tableau interface!
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 就像 Tableau Desktop 一样，Prep 非常易于理解且高度视觉化。颜色、符号和高亮使得我们能够轻松上手这个提取、转换和加载工具，它在操作
    Tableau 主界面之前，准备数据时是不可或缺的！
- en: In the next chapter, we’ll continue our exploration of data in Tableau. We’ll
    explore how to prepare data for Tableau by looking at joins, blends, and data
    structures.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将继续探索 Tableau 中的数据。我们将通过查看连接、混合和数据结构来探索如何为 Tableau 准备数据。
- en: Learn more on Discord
  id: totrans-304
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 Discord 上了解更多
- en: 'To join the Discord community for this book – where you can share feedback,
    ask questions to the author, and learn about new releases – follow the QR code
    below:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 要加入本书的 Discord 社区——在这里你可以分享反馈、向作者提问，并了解新版本发布——请扫描下面的二维码：
- en: '[https://packt.link/tableau](https://packt.link/tableau)'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://packt.link/tableau](https://packt.link/tableau)'
- en: '![](img/QR_Code2044012316175764640.png)'
  id: totrans-307
  prefs: []
  type: TYPE_IMG
  zh: '![](img/QR_Code2044012316175764640.png)'
