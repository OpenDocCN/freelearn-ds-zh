- en: A Brief Tour of Bayesian Statistics and Maximum Likelihood Estimates
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 贝叶斯统计与最大似然估计简述
- en: 'In this chapter, we take a brief tour of an alternative approach to statistical
    inference called **Bayesian statistics**. It is not intended to be a full primer,
    but will simply serve as an introduction to the Bayesian approach. We will also
    explore the associated Python-related libraries and learn how to use `pandas`
    and `matplotlib` to help with the data analysis. The various topics that will
    be discussed are as follows:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将简要介绍一种替代性的统计推断方法，称为**贝叶斯统计**。这并不是一本完整的入门书籍，而是作为贝叶斯方法的简介。我们还将探讨相关的Python库，并学习如何使用`pandas`和`matplotlib`来辅助数据分析。以下是将要讨论的各种主题：
- en: Introduction to Bayesian statistics
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 贝叶斯统计简介
- en: The mathematical framework for Bayesian statistics
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 贝叶斯统计的数学框架
- en: Probability distributions
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 概率分布
- en: Bayesian versus frequentist statistics
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 贝叶斯统计与频率统计
- en: Introduction to PyMC and Monte Carlo simulations
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PyMC 和蒙特卡洛模拟简介
- en: Bayesian analysis example – switchpoint detection
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 贝叶斯分析示例 – 转折点检测
- en: Introduction to Bayesian statistics
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 贝叶斯统计简介
- en: The field of Bayesian statistics is built on the work of Reverend Thomas Bayes,
    an 18th-century statistician, philosopher, and Presbyterian minister. His famous
    Bayes' theorem, which forms the theoretical underpinnings of Bayesian statistics,
    was published posthumously in 1763 as a solution to the problem of *inverse probability*.
    For more details on this topic, refer to [http://en.wikipedia.org/wiki/Thomas_Bayes](http://en.wikipedia.org/wiki/Thomas_Bayes).
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯统计学的领域建立在18世纪统计学家、哲学家和长老会牧师**托马斯·贝叶斯**的工作基础上。他著名的贝叶斯定理，构成了贝叶斯统计学的理论基础，并在1763年死后发表，作为*逆向概率*问题的解决方案。更多详细信息请参见[http://en.wikipedia.org/wiki/Thomas_Bayes](http://en.wikipedia.org/wiki/Thomas_Bayes)。
- en: Inverse probability problems were all the rage in the early 18th century, and
    were often formulated as follows.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 逆向概率问题在18世纪初非常流行，通常以以下形式提出。
- en: Suppose you play a game with a friend. There are 10 green balls and 7 red balls
    in bag 1 and 4 green balls and 7 red balls in bag 2\. Your friend tosses a coin
    (without telling you the result), picks a ball from one of the bags at random,
    and shows it to you. The ball is red. What is the probability that the ball was
    drawn from bag 1?
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你和朋友玩一个游戏。袋子1里有10个绿色球和7个红色球，袋子2里有4个绿色球和7个红色球。你的朋友抛硬币（没有告诉你结果），随机从一个袋子里抽出一个球，并展示给你。球是红色的。那么，球是从袋子1里抽出来的概率是多少？
- en: 'These problems were called inverse probability problems because we are trying
    to estimate the probability of an event that has already occurred (which bag the
    ball was drawn from) in light of the subsequent result (the ball is red):'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 这些问题被称为逆向概率问题，因为我们试图根据随后的结果（球是红色的）来估计一个已经发生的事件的概率（球是从哪个袋子里抽出来的）：
- en: '![](img/41d6fc3b-2cd9-4dc9-b7e7-6404259f6133.png)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![](img/41d6fc3b-2cd9-4dc9-b7e7-6404259f6133.png)'
- en: Bayesian balls illustration
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯球示意图
- en: Let's quickly illustrate how one would go about solving the inverse probability
    problem illustrated earlier. We want to calculate the probability that the ball
    was drawn from bag 1, given that it is red. This can be denoted as *P(Bag 1 |
    Red Ball)*.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速说明如何解决之前提到的逆向概率问题。我们想计算在知道球是红色的情况下，球是从袋子1里抽出来的概率。这可以表示为*P(袋子1 | 红球)*。
- en: 'Let''s start by calculating the probability of selecting a red ball. This can
    be calculated by following the two paths in red, as shown in the preceding figure.
    Therefore, we have the following:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从计算选择红球的概率开始。这个概率可以通过按照前述图中的两条红色路径来计算。因此，我们有以下结果：
- en: '![](img/b27f4fd8-be83-4294-9c5d-a0e227ded600.png)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b27f4fd8-be83-4294-9c5d-a0e227ded600.png)'
- en: 'Now, the probability of choosing a red ball from bag 1 is shown by only taking
    the upper path and is calculated as follows:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，选择袋子1中的红球的概率只通过走上面这条路径来展示，计算方法如下：
- en: '![](img/f0e3c44d-5792-43db-aaca-6bd6712e2b0c.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f0e3c44d-5792-43db-aaca-6bd6712e2b0c.png)'
- en: 'The probability of choosing a red ball from bag 2 is calculated as follows:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 从袋子2中选择红球的概率计算如下：
- en: '![](img/d0bcf020-58a3-4253-96ae-9201e437e95d.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d0bcf020-58a3-4253-96ae-9201e437e95d.png)'
- en: 'Note that this probability can also be written as follows:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，这个概率也可以写成如下形式：
- en: '![](img/7bd4d489-3825-4d8d-9693-5f63c39ab262.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7bd4d489-3825-4d8d-9693-5f63c39ab262.png)'
- en: 'We can see that *P(Bag 1)=1/2*, and the final branch of the tree is only traversed
    if the ball is firstly in bag 1 and is a red ball. Therefore, we''ll get the following
    outcome:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，*P(袋子1) = 1/2*，树的最后一个分支仅在球首先在袋子1中并且是红球时才会被遍历。因此，我们将得到以下结果：
- en: '![](img/2f911fb7-4eb6-43bb-a4ce-0c96cdcff090.png)![](img/e3efe7e1-3a87-4354-b21e-ac7937c9f667.png)![](img/e66819cb-c421-45ce-8648-29f5ad15af27.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2f911fb7-4eb6-43bb-a4ce-0c96cdcff090.png)![](img/e3efe7e1-3a87-4354-b21e-ac7937c9f667.png)![](img/e66819cb-c421-45ce-8648-29f5ad15af27.png)'
- en: The mathematical framework for Bayesian statistics
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 贝叶斯统计的数学框架
- en: Bayesian methods are an alternative way of making a statistical inference. We
    will first look at Bayes' theorem, the fundamental equation from which all Bayesian
    inference is derived.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯方法是一种替代的统计推断方法。我们将首先介绍贝叶斯定理，这是所有贝叶斯推断的基本方程。
- en: 'A few definitions regarding probability are in order before we begin:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们开始之前，需要做一些关于概率的定义：
- en: '***A***,***B***: These are events that can occur with a certain probability.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***A***，***B***：这些是可以以某种概率发生的事件。'
- en: '***P*(*A*)** and ***P*(*B*)**: This is the probability of the occurrence of
    a particular event.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***P*(*A*)** 和 ***P*(*B*)**：这是某一特定事件发生的概率。'
- en: '***P*(*A*|*B*)**: This is the probability of A happening, given that B has
    occurred. This is known as a **conditional probability**.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***P*(*A*|*B*)**：这是在给定B发生的情况下，A发生的概率。这称为**条件概率**。'
- en: '***P*(*AB*) = *P*(*A* and *B*)**: This is the probability of A and B occurring
    together.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***P*(*AB*) = *P*(*A* 和 *B*)**：这是A和B同时发生的概率。'
- en: 'We begin with the following basic assumption:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从以下基本假设开始：
- en: '*P(AB) = P(B) * P(A|B)*'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '*P(AB) = P(B) * P(A|B)*'
- en: 'The preceding equation shows the relation of the joint probability of *P*(*AB*)
    to the conditional probability *P*(*A*|*B*) and what is known as the marginal
    probability, *P*(*B*). If we rewrite the equation, we have the following expression
    for conditional probability:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 上述方程显示了*P*(*AB*)的联合概率与条件概率*P*(*A*|*B*)以及所谓的边际概率*P*(*B*)之间的关系。如果我们重写方程，就得到了条件概率的如下表达式：
- en: '*P(A|B) = P(AB)/P(B)*'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '*P(A|B) = P(AB)/P(B)*'
- en: 'This is somewhat intuitive—the probability of *A* given *B* is obtained by
    dividing the probability of both *A* and *B* occurring by the probability that
    *B* occurred. The idea is that *B* is given, so we divide by its probability.
    A more rigorous treatment of this equation can be found at [http://bit.ly/1bCYXRd](http://bit.ly/1bCYXRd),
    which is titled *Probability: Joint, Marginal and Conditional Probabilities*.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 这在某种程度上是直观的——给定B的情况下，*A*的概率是通过将*A*和*B*同时发生的概率除以B发生的概率得到的。其思想是，已知B发生，因此我们除以其概率。有关该方程更严格的处理，可以参考[http://bit.ly/1bCYXRd](http://bit.ly/1bCYXRd)，标题为*概率：联合、边际和条件概率*。
- en: 'Similarly, by symmetry we have *P(AB) = P(BA) = P(A) * P(B|A*). Thus, we have
    *P(A) * P(B|A) = P(B) * P(A|B)*. By dividing the expression by *P(B)* on both
    sides and assuming *P(B)!=0*, we obtain the following:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，由于对称性，我们有*P(AB) = P(BA) = P(A) * P(B|A*)。因此，我们有*P(A) * P(B|A) = P(B) * P(A|B)*。通过在两边同时除以*P(B)*并假设*P(B)
    != 0*，我们得到如下结果：
- en: '![](img/eb804081-dd3b-48b3-b61f-00b5b173de93.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eb804081-dd3b-48b3-b61f-00b5b173de93.png)'
- en: 'The preceding equation is referred to as **Bayes'' theorem**, the bedrock of
    all Bayesian statistical inference. In order to link Bayes'' theorem to inferential
    statistics, we will recast the equation as what is called the **diachronic** **interpretation**,
    as follows:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 上述公式被称为**贝叶斯定理**，它是所有贝叶斯统计推断的基石。为了将贝叶斯定理与推理统计联系起来，我们将该方程改写为所谓的**历时性** **解释**，如下所示：
- en: '![](img/940489d3-fe93-4be2-977a-4deeff0004a3.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](img/940489d3-fe93-4be2-977a-4deeff0004a3.png)'
- en: Here, ***H*** represents a hypothesis and ***D*** represents an event that has
    already occurred that we are using in our statistical study, and is also referred
    to as data.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，***H***代表假设，***D***代表已经发生的事件，我们在统计研究中使用它，也称为数据。
- en: The expression **(*H*)** is the probability of our hypothesis before we observe
    the data. This is known as the **prior probability**. The use of prior probability
    is often touted as an advantage by Bayesian statisticians since prior knowledge
    of previous results can be used as input for the current model, resulting in increased
    accuracy. For more information on this, refer to [http://www.bayesian-inference.com/advantagesbayesian](http://www.bayesian-inference.com/advantagesbayesian).
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 表达式 **(*H*)** 是我们在观察数据之前对假设的概率。这被称为 **先验概率**。贝叶斯统计学家常常将先验概率作为一个优势来宣传，因为先前结果的先验知识可以作为当前模型的输入，从而提高准确性。有关更多信息，请参考
    [http://www.bayesian-inference.com/advantagesbayesian](http://www.bayesian-inference.com/advantagesbayesian)。
- en: '***P*(*D*)** is the probability of obtaining the data that we observe regardless
    of the hypothesis. This is called the **normalizing constant**. The normalizing
    constant doesn''t always need to be calculated, especially in many popular algorithms,
    such as **Markov Chain Monte Carlo** (**MCMC**), which we will examine later in
    this chapter.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '***P*(*D*)** 是无论假设如何，观察到的数据的概率。这被称为 **归一化常数**。归一化常数并不总是需要计算，特别是在许多流行的算法中，如
    **马尔科夫链蒙特卡洛**（**MCMC**），我们将在本章稍后讨论。'
- en: '***P*(*H*|*D*)** is the probability that the hypothesis is true, given the
    data that we observe. This is called the **posterior**.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '***P*(*H*|*D*)** 是给定我们观察到的数据后，假设成立的概率。这被称为 **后验**。'
- en: '***P*(*D*|*H*)**is the probability of obtaining the data, considering our hypothesis.
    This is called the **likelihood**.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '***P*(*D*|*H*)** 是考虑我们的假设后，获得数据的概率。这被称为 **似然性**。'
- en: Thus, Bayesian statistics amounts to applying Bayes' rule to solve problems
    in inferential statistics with ***H*** representing our hypothesis and ***D***
    the data.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，贝叶斯统计就是应用贝叶斯定理来解决推理统计问题，***H*** 代表我们的假设，***D*** 代表数据。
- en: 'A Bayesian statistical model is cast in terms of parameters, and the uncertainty
    in these parameters is represented by probability distributions. This is different
    from the frequentist approach where the values are regarded as deterministic.
    An alternative representation is as follows:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯统计模型是以参数为基础的，这些参数的不确定性通过概率分布来表示。这与频率主义方法不同，后者将值视为确定性的。另一种表示方式如下：
- en: '![](img/31826c2d-6a8a-4fe8-8aed-8d5e58794e57.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](img/31826c2d-6a8a-4fe8-8aed-8d5e58794e57.png)'
- en: Here, ***Θ*** is our unknown data and ***x*** is our observed data.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，***Θ*** 代表我们的未知数据，***x*** 代表我们的观察数据。
- en: 'In Bayesian statistics, we make assumptions about the prior data and use the
    likelihood to update the posterior probability using Bayes'' rule. As an illustration,
    let''s consider the following problem. Here is a classic case of what is commonly
    known as the **urn problem**:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在贝叶斯统计中，我们对先验数据做出假设，并利用似然性通过贝叶斯定理更新后验概率。作为说明，下面是一个经典问题，也被称为 **urn 问题**：
- en: Two urns contain colored balls
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个 urn 中包含有色球
- en: Urn 1 contains 50 red and 50 blue balls
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: urn 1 包含 50 颗红球和 50 颗蓝球
- en: Urn 2 contains 30 red and 70 blue balls
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: urn 2 包含 30 颗红球和 70 颗蓝球
- en: One of the two urns is randomly chosen (50 percent probability) and then a ball
    is drawn at random from one of the two urns
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从两个 urn 中随机选择一个（50% 的概率），然后从其中一个 urn 中随机抽取一颗球
- en: If a red ball is drawn, what is the probability that it came from urn 1? We
    want *P(H|D)*—that is *P(ball came from Urn 1 | Red ball is drawn)*.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如果抽到一颗红球，那么它来自 urn 1 的概率是多少？我们想要的是 *P(H|D)* —— 即 *P(球来自 urn 1 | 抽到红球)*。
- en: 'Here, *H* denotes that the ball is drawn from urn 1, and *D *denotes that the
    drawn ball is red:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*H* 表示球是从 urn 1 中抽出的，*D* 表示抽到的球是红色的：
- en: '*![](img/5f51ffcc-a0b4-4d21-9d20-49ffa0df0aed.png)*'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '*![](img/5f51ffcc-a0b4-4d21-9d20-49ffa0df0aed.png)*'
- en: 'We know that *P(H|D) = P(H) * P(D|H)/P(D), P(D|H) = 0.5, P(D) = (50 + 30)/(100
    + 100) = 0.4*. This can also be phrased as follows:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道 *P(H|D) = P(H) * P(D|H)/P(D), P(D|H) = 0.5, P(D) = (50 + 30)/(100 + 100)
    = 0.4*。这也可以表述为：
- en: '![](img/34d84e7c-fa89-49c5-beb1-a2a842d7dba6.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](img/34d84e7c-fa89-49c5-beb1-a2a842d7dba6.png)'
- en: Therefore, we conclude that *P(H|D) = 0.5 * 0.5/0.4 = 0.25/0.4 = 0.625*.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们得出结论 *P(H|D) = 0.5 * 0.5/0.4 = 0.25/0.4 = 0.625*。
- en: Bayes' theory and odds
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 贝叶斯理论和赔率
- en: Bayes' theorem can sometimes be represented in a more natural and convenient
    form by using an alternative formulation of probability called *odds*. Odds are
    generally expressed in terms of ratios and are commonly used. A 3-to-1 odds (written
    often as 3:1) of a horse winning a race represents the fact that there is a 75
    percent probability that the horse will win.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯定理有时可以通过使用一种称为*赔率*的替代概率公式来以更自然和方便的形式表示。赔率通常以比率的形式表示，并且被广泛使用。马匹赢得比赛的3比1赔率（通常写作3:1）表示马匹有75%的概率会获胜。
- en: Given a probability *p*, the odds can be calculated as odds = *p:(1 - p)*, which
    in the case of *p=0.75* becomes 0.75:0.25, which is 3:1.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 给定一个概率*p*，赔率可以计算为odds = *p:(1 - p)*，当*p=0.75*时，结果为0.75:0.25，即3:1。
- en: 'Using odds, we can rewrite Bayes'' theorem as follows:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 使用赔率，我们可以将贝叶斯定理重写如下：
- en: '![](img/18ea1ab8-a709-4713-a7ca-807d79b3cbb3.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](img/18ea1ab8-a709-4713-a7ca-807d79b3cbb3.png)'
- en: Applications of Bayesian statistics
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 贝叶斯统计的应用
- en: 'Bayesian statistics can be applied to many problems that we encounter in classical
    statistics, such as the following:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯统计可以应用于我们在经典统计学中遇到的许多问题，如下所示：
- en: Parameter estimation
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参数估计
- en: Prediction
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预测
- en: Hypothesis testing
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 假设检验
- en: Linear regression
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 线性回归
- en: There are many compelling reasons for studying Bayesian statistics, such as
    using prior information to better inform a current model. The Bayesian approach
    works with probability distributions rather than point estimates, thus producing
    more realistic predictions. Bayesian inference bases a hypothesis on the available
    data—*P(hypothesis|data)*. The frequentist approach tries to fit the data based
    on a hypothesis. It can be argued that the Bayesian approach is the more logical
    and empirical one as it tries to base its belief on the facts rather than the
    other way round. For more information on this, refer to [http://www.bayesian-inference.com/advantagesbayesian](http://www.bayesian-inference.com/advantagesbayesian).
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 学习贝叶斯统计学有许多令人信服的理由，比如使用先验信息来更好地优化当前模型。贝叶斯方法基于概率分布而非点估计，因此能够提供更现实的预测。贝叶斯推断基于现有数据对假设进行推理——*P(假设|数据)*。而频率主义方法则尝试根据假设拟合数据。可以说，贝叶斯方法更具逻辑性和实证性，因为它试图基于事实而非假设来建立信念。有关更多信息，请参见[http://www.bayesian-inference.com/advantagesbayesian](http://www.bayesian-inference.com/advantagesbayesian)。
- en: Probability distributions
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 概率分布
- en: 'In this section, we will briefly examine the properties of various probability
    distributions. Many of these distributions are used for Bayesian analysis, and
    so a brief synopsis is needed before we can proceed. We will also illustrate how
    to generate and display these distributions using `matplotlib`. In order to avoid
    repeating the `import` statements for every code snippet in each section, we will
    be presenting the following standard set of Python code imports that need to be
    run before any of the code snippets mentioned in the following command. You only
    need to run these imports once per session. The imports are as follows:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将简要介绍各种概率分布的特性。许多这些分布用于贝叶斯分析，因此在我们继续之前，需要简要概述它们。我们还将演示如何使用`matplotlib`生成和显示这些分布。为了避免在每个代码片段中重复`import`语句，我们将在以下命令中展示一组标准的Python代码导入，在任何后续代码片段中都需要先运行这些导入。每个会话只需运行一次这些导入。导入语句如下：
- en: '[PRE0]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Fitting a distribution
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 拟合分布
- en: 'One of the steps that we have to take in a Bayesian analysis is to fit our
    data to a probability distribution. Selecting the correct distribution can be
    something of an art, and often requires statistical knowledge and experience,
    but we can follow a few guidelines to help us along the way. These guidelines
    are as follows:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在贝叶斯分析中，我们必须进行的一个步骤是将我们的数据拟合到一个概率分布中。选择正确的分布有时需要一些技巧，通常需要统计知识和经验，但我们可以遵循一些指导原则来帮助我们。以下是这些指导原则：
- en: Determine whether the data is discrete or continuous
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定数据是离散的还是连续的
- en: Examine the skewness/symmetry of the data, and if skewed, determine the direction
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查数据的偏斜/对称性，如果有偏斜，确定其方向
- en: Determine the lower and upper limits, if there are any
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定是否存在上下限
- en: Determine the likelihood of observing extreme values in the distribution
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定在分布中观察到极端值的可能性
- en: A statistical trial is a repeatable experiment with a set of well-defined outcomes
    that is known as the sample space. A Bernoulli trial is a yes/no experiment where
    the random *X* variable is assigned the value of 1 in the case of a yes and 0
    in the case of a no. The event of tossing a coin and seeing whether it lands heads
    up is an example of a Bernoulli trial.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 统计试验是一个可重复的实验，具有一组已定义的结果，这些结果组成了样本空间。伯努利试验是一个“是/否”实验，其中随机*X*变量在“是”的情况下赋值为1，在“否”的情况下赋值为0。抛硬币并查看是否正面朝上的实验就是一个伯努利试验的例子。
- en: 'There are two classes of probability distributions: discrete and continuous.
    In the following sections, we will discuss the differences between these two classes
    of distributions and learn about the main distributions.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 概率分布有两种类型：离散分布和连续分布。在接下来的部分中，我们将讨论这两类分布的区别，并了解主要的分布。
- en: Discrete probability distributions
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 离散概率分布
- en: 'In this scenario, the variable can take only certain distinct values, such
    as integers. An example of a discrete random variable is the number of heads obtained
    when we flip a coin five times: the possible values are {0,1,2,3,4,5}—we cannot
    obtain 3.82 heads, for example. The range of values that the random variable can
    take is specified by what is known as a **probability mass function** (**PMF**).'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，变量只能取特定的离散值，如整数。一个离散随机变量的例子是，当我们抛掷硬币五次时获得的正面次数：可能的值为{0,1,2,3,4,5}——例如，不能获得3.82次正面。随机变量可以取的值的范围由被称为**概率质量函数**（**PMF**）的函数来指定。
- en: Discrete uniform distribution
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 离散均匀分布
- en: The discrete uniform distribution is a distribution that models an event with
    a finite set of possible outcomes where each outcome is equally likely to be observed.
    For *n* outcomes, each has a probability of occurrence of *1/n*.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 离散均匀分布是一种分布，用于模拟具有有限可能结果的事件，其中每个结果的出现概率相等。对于 *n*个结果，每个结果的发生概率为*1/n*。
- en: 'An example of this is throwing a fair die. The probability of any of the six
    outcomes is *1**/6*. The PMF is given by *1/n*, and the expected value and variance
    are given by *(max + min)/2* and *(n^(2 )-1)/12 *respectively:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 这方面的一个例子是投掷一个公平的骰子。六个结果中任何一个的概率都是*1**/6*。概率质量函数（PMF）由*1/n*给出，期望值和方差分别由 *(max
    + min)/2* 和 *(n^(2)-1)/12* 给出：
- en: '[PRE1]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The following is the output:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出：
- en: '![](img/196aa30a-0528-4fda-bad5-776bb8d864aa.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](img/196aa30a-0528-4fda-bad5-776bb8d864aa.png)'
- en: Discrete uniform distribution
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 离散均匀分布
- en: The Bernoulli distribution
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 伯努利分布
- en: The Bernoulli distribution measures the probability of success in a trial, for
    example, the probability that a coin toss turns up a head or a tail. This can
    be represented by a random *X* variable that takes a value of 1 if the coin turns
    up as heads and 0 if it is tails. The probability of it turning up heads or tails
    is denoted by *p* and *q=1-p* respectively.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 伯努利分布用于衡量试验中的成功概率，例如，抛硬币正面或反面朝上的概率。它可以通过一个随机*X*变量来表示，如果硬币是正面朝上，则取值为1；如果是反面朝上，则取值为0。正面朝上的概率用*p*表示，反面朝上的概率用*q=1-p*表示。
- en: 'This can be represented by the following PMF:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以通过以下概率质量函数（PMF）表示：
- en: '![](img/b0cd5693-c6e5-413f-b4cf-e32f8c6c49e9.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b0cd5693-c6e5-413f-b4cf-e32f8c6c49e9.png)'
- en: 'The expected value and variance are given by the following formula:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 期望值和方差由以下公式给出：
- en: '![](img/6b5c6df3-d4ad-4b41-a70d-eab3c0e750af.png)![](img/6a5f86c1-346d-4596-a895-87c509126ba3.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6b5c6df3-d4ad-4b41-a70d-eab3c0e750af.png)![](img/6a5f86c1-346d-4596-a895-87c509126ba3.png)'
- en: For more information, go to [http://en.wikipedia.org/wiki/Bernoulli_distribution](http://en.wikipedia.org/wiki/Bernoulli_distribution).
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 如需更多信息，请访问 [http://en.wikipedia.org/wiki/Bernoulli_distribution](http://en.wikipedia.org/wiki/Bernoulli_distribution)。
- en: 'We will now plot the Bernoulli distribution using `matplotlib` and `scipy.stats`
    as follows:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将使用`matplotlib`和`scipy.stats`绘制伯努利分布，如下所示：
- en: '[PRE2]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The following is the output:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出：
- en: '![](img/a4098dfe-edfe-4110-9326-c6d2ca5cc42a.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a4098dfe-edfe-4110-9326-c6d2ca5cc42a.png)'
- en: Bernoulli distribution output
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 伯努利分布输出
- en: The binomial distribution
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 二项分布
- en: 'The binomial distribution is used to represent the number of successes in *n*-independent
    Bernoulli trials, which can be expressed as the following:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 二项分布用于表示在*n*次独立伯努利试验中成功的次数，表达式如下：
- en: '*Y = X[1] + X[2] + ..**. + X[n]*'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '*Y = X[1] + X[2] + ..**. + X[n]*'
- en: 'Using the coin toss example, this distribution models the chance of getting
    *X* heads over *n* trials. For 100 tosses, the binomial distribution models the
    likelihood of getting 0 heads (extremely unlikely) to 50 heads (highest likelihood)
    to 100 heads (also extremely unlikely). This ends up making the binomial distribution
    symmetrical when the odds are perfectly even and skewed when the odds are far
    less even. The PMF is given by the following expression:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 使用抛硬币的例子，这个分布描述了在*n*次试验中获得*X*个正面的概率。对于100次抛掷，二项分布模型描述了获得0个正面（极不可能）到50个正面（最有可能）再到100个正面（也极不可能）的几率。这导致当概率完全均等时，二项分布是对称的，而当概率不均等时，则呈偏斜分布。PMF由以下表达式给出：
- en: '![](img/8e13d328-8677-46e3-b3a9-ed0b87abaaf7.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8e13d328-8677-46e3-b3a9-ed0b87abaaf7.png)'
- en: 'The expectation and variance are given respectively by the following expressions:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 期望和方差分别由以下表达式给出：
- en: '![](img/639a8dc3-b41c-4c7b-b121-237eb9450624.png)![](img/7d232401-9732-454a-984d-462be5c08854.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![](img/639a8dc3-b41c-4c7b-b121-237eb9450624.png)![](img/7d232401-9732-454a-984d-462be5c08854.png)'
- en: 'This is shown using the following code block:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 这通过以下代码块显示：
- en: '[PRE3]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The following is the output:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/37442818-7135-48bc-94ff-1bc568e34525.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](img/37442818-7135-48bc-94ff-1bc568e34525.png)'
- en: Binomial distribution
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 二项分布
- en: The Poisson distribution
  id: totrans-118
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 泊松分布
- en: The Poisson distribution models the probability of a number of events within
    a given time interval, assuming that these events occur with a known average rate
    and successive events occur independently of the time that has passed since the
    previous event.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 泊松分布模型描述了在给定时间间隔内事件发生的概率，假设这些事件以已知的平均速率发生，并且每次事件发生与上次事件发生后的时间间隔无关。
- en: A concrete example of a process that can be modeled by a Poisson distribution
    would be if an individual received an average of, say, 23 emails per day. If we
    assume that the arrival times for the emails are independent of each other, then
    the total number of emails an individual receives each day can be modeled by a
    Poisson distribution.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 一个可以通过泊松分布建模的具体过程的例子是，如果一个人每天平均收到23封电子邮件。假设这些邮件的到达时间是相互独立的，那么一个人每天收到的邮件总数就可以用泊松分布来建模。
- en: 'Another example could be the number of trains that stop at a particular station
    each hour. The PMF for a Poisson distribution is given by the following expression:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个例子可以是每小时在特定车站停靠的火车数量。泊松分布的概率质量函数（PMF）由以下表达式给出：
- en: '![](img/12e39851-b53f-4f77-8290-d223a896ceea.png)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](img/12e39851-b53f-4f77-8290-d223a896ceea.png)'
- en: Here, **λ** is the rate parameter, which, represents the expected number of
    events/arrivals that occur per unit time, and ***k*** is the random variable that
    represents the number of events/arrivals.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 其中，**λ**是速率参数，表示单位时间内期望的事件/到达次数，而***k***是表示事件/到达次数的随机变量。
- en: 'The expectation and variance are given respectively by the following expressions:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 期望和方差分别由以下表达式给出：
- en: '![](img/17e854ab-f1df-4d2f-9048-055fe6cd38e1.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![](img/17e854ab-f1df-4d2f-9048-055fe6cd38e1.png)'
- en: '![](img/bf6fc199-c828-43c3-bbbe-a40943d3655f.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bf6fc199-c828-43c3-bbbe-a40943d3655f.png)'
- en: For more information, refer to [http://en.wikipedia.org/wiki/Poisson_process](http://en.wikipedia.org/wiki/Poisson_process).
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 更多信息请参考[http://en.wikipedia.org/wiki/Poisson_process](http://en.wikipedia.org/wiki/Poisson_process)。
- en: 'The PMF is plotted using `matplotlib` for various values as follows:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`matplotlib`绘制不同值的PMF，如下所示：
- en: '[PRE4]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The following is the output:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/d76cc92f-0a38-40f2-9b7a-5d4ac0835b5d.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d76cc92f-0a38-40f2-9b7a-5d4ac0835b5d.png)'
- en: Poisson distribution
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 泊松分布
- en: The geometric distribution
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 几何分布
- en: The geometric distribution is used for independent Bernoulli trials and measures the
    number of trials (*X*) that are needed to get one success. It can also represent
    the number of failures (*Y = X-1*) before the first success.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 几何分布用于独立的伯努利试验，并衡量获得一次成功所需的试验次数（*X*）。它也可以表示第一次成功之前的失败次数（*Y = X-1*）。
- en: 'The PMF is expressed as follows:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: PMF表示为以下形式：
- en: '![](img/0bb196e0-45af-40d2-9840-129a97a651d6.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0bb196e0-45af-40d2-9840-129a97a651d6.png)'
- en: The preceding expression makes sense because *f(k) = P(X =k)*, and if it takes
    *k* trials to get one success (*p*), then this means that we must have had *k-1 *failures,
    which are equal to *(1-p)*.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 上述表达式是有道理的，因为*f(k) = P(X =k)*，如果成功需要进行*k*次试验（*p*），那么这意味着我们必须有*k-1*次失败，失败的概率是*(1-p)*。
- en: 'The expectation and variance are given as follows:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 期望和方差分别给出如下：
- en: '![](img/edd2251a-db95-48b2-931d-bb8ec4f49ef6.png)![](img/ea239973-c582-4e22-9605-66a7ff59a7a7.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![](img/edd2251a-db95-48b2-931d-bb8ec4f49ef6.png)![](img/ea239973-c582-4e22-9605-66a7ff59a7a7.png)'
- en: 'The following command explains the preceding formula clearly:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令清晰地解释了前面的公式：
- en: '[PRE5]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The following is the output:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/9da8cd2c-f58f-4eae-aeac-222598dc2050.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9da8cd2c-f58f-4eae-aeac-222598dc2050.png)'
- en: Geometric distribution
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 几何分布
- en: The negative binomial distribution
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 负二项分布
- en: 'The negative binomial distribution is used for independent Bernoulli trials
    and measures the number of tries (*X=k*) that are needed before a specified number
    of successes (*r*) occur. An example would be the number of coin tosses it would
    take to obtain five heads. The PMF is given as follows:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 负二项分布用于独立的伯努利试验，衡量在发生指定次数的成功（*r*）之前所需的试验次数（*X=k*）。一个例子是，投掷硬币直到得到五次正面所需的次数。其概率质量函数（PMF）如下所示：
- en: '![](img/30d65342-aed7-42aa-8d37-4a612d9eafca.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](img/30d65342-aed7-42aa-8d37-4a612d9eafca.png)'
- en: 'The expectation and variance are given respectively by the following expressions:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 期望值和方差分别由以下公式给出：
- en: '![](img/d92080e8-a583-4b9f-8aca-c84c0625d789.png)![](img/88bb3682-ee52-4bd6-b669-5d9471efc8ed.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d92080e8-a583-4b9f-8aca-c84c0625d789.png)![](img/88bb3682-ee52-4bd6-b669-5d9471efc8ed.png)'
- en: We can see that the negative binomial is a generalization of the geometric distribution,
    with the geometric distribution being a special case of the negative binomial,
    where *r=1*.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，负二项分布是几何分布的推广，几何分布是负二项分布的一个特例，其中*r=1*。
- en: 'The code and plot are shown as follows:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 代码和图表如下所示：
- en: '[PRE6]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The following is the output:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/c38c6b79-474d-4e5a-80b8-7db8bf94687f.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c38c6b79-474d-4e5a-80b8-7db8bf94687f.png)'
- en: Negative binomial distribution
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 负二项分布
- en: Continuous probability distributions
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连续概率分布
- en: In a continuous probability distribution, the variable can take on any real
    number. It is not limited to a finite set of values, as it is in a discrete probability
    distribution; for example, the average weight of a healthy newborn baby can range
    from approximately 6–9 lbs (its weight can be 7.3 lbs, for example). A continuous
    probability distribution is characterized by a **probability density function**
    (**PDF**).
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在连续概率分布中，变量可以取任何实数值。它不像离散概率分布那样被限制为有限的取值集合；例如，健康新生儿的平均体重大约在6到9磅之间（例如，其体重可以是7.3磅）。连续概率分布的特点是**概率密度函数**（**PDF**）。
- en: The sum of all the probabilities that the random variable can assume is 1\.
    Thus, the area under the graph of the probability density function adds up to
    1.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 随机变量可能取的所有概率之和为1。因此，概率密度函数图形下的面积加起来为1。
- en: The continuous uniform distribution
  id: totrans-159
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连续均匀分布
- en: The uniform distribution models a random variable, *X,* that can take any value
    within the range *[a, b] *with equal probability.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 均匀分布模型表示一个随机变量*X*，其值可以在区间*[a, b]*内均匀分布。
- en: The PDF is given by ![](img/9f0003f2-af42-4de4-9b82-37aeab3a755f.png) for *a ≤
    x ≤ b*, and 0 otherwise.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 概率密度函数由以下公式给出：![](img/9f0003f2-af42-4de4-9b82-37aeab3a755f.png)，当*a ≤ x ≤ b*时为非零值，否则为零。
- en: 'The expectation and variance are given respectively by the following expressions:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 期望值和方差分别由以下公式给出：
- en: '![](img/177876da-7f87-4816-9d9f-8a3c150d43ab.png)![](img/470ae43e-1c0e-4d2d-a58c-4ceb432e1707.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![](img/177876da-7f87-4816-9d9f-8a3c150d43ab.png)![](img/470ae43e-1c0e-4d2d-a58c-4ceb432e1707.png)'
- en: 'A continuous uniform probability distribution is generated and plotted for
    various sample sizes in the following code:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码生成并绘制了不同样本大小的连续均匀概率分布：
- en: '[PRE7]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The following is the output:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/c5d15705-521e-4d31-be41-fdadad5af9f6.png)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c5d15705-521e-4d31-be41-fdadad5af9f6.png)'
- en: Continuous uniform distribution
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 连续均匀分布
- en: The exponential distribution
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 指数分布
- en: The exponential distribution models the waiting time between two events in a
    Poisson process. A Poisson process is a process that follows a Poisson distribution
    in which events occur unpredictably with a known average rate. The exponential
    distribution can be described as the *continuous limit* of the geometric distribution,
    and is also Markovian (memoryless).
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 指数分布描述了在泊松过程中两个事件之间的等待时间。泊松过程是一个符合泊松分布的过程，事件以已知的平均速率不可预测地发生。指数分布可以视为几何分布的*连续极限*，并且也是马尔科夫过程（无记忆过程）。
- en: A memoryless random variable exhibits the property that its future state depends
    only on relevant information about the current time and not the information from
    further in the past. An example of modeling a Markovian/memoryless random variable
    is modeling short-term stock price behavior based on the idea that it follows
    a random walk. This leads to what is called the efficient market hypothesis in
    finance. For more information, refer to [http://en.wikipedia.org/wiki/Random_walk_hypothesis](http://en.wikipedia.org/wiki/Random_walk_hypothesis).
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 一个无记忆随机变量具有以下特性：它的未来状态仅依赖于当前时刻的相关信息，而不依赖于更久远过去的信息。对马尔科夫/无记忆随机变量建模的一个例子是基于随机游走理论对短期股价行为的建模。这引出了金融学中的有效市场假说。更多信息，请参阅[http://en.wikipedia.org/wiki/Random_walk_hypothesis](http://en.wikipedia.org/wiki/Random_walk_hypothesis)。
- en: 'The PDF of the exponential distribution is given by *f(x)= λe^(-λx)*. The expectation
    and variance are given respectively by the following expressions:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 指数分布的概率密度函数（PDF）为 *f(x) = λe^(-λx)*。期望值和方差分别由以下公式给出：
- en: '*E(X) = 1/λ**Var(X) = 1/λ²*'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '*E(X) = 1/λ**Var(X) = 1/λ²*'
- en: For reference, refer to the link at [http://en.wikipedia.org/wiki/Exponential_distribution](http://en.wikipedia.org/wiki/Exponential_distribution).
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 参考资料，请参阅[http://en.wikipedia.org/wiki/Exponential_distribution](http://en.wikipedia.org/wiki/Exponential_distribution)。
- en: 'The plot of the distribution and code is given as follows:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 分布图和代码如下所示：
- en: '[PRE8]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The following is the output:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/827f7798-a218-482a-bd30-480b22484ccd.png)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![](img/827f7798-a218-482a-bd30-480b22484ccd.png)'
- en: Exponential distribution
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 指数分布
- en: The normal distribution
  id: totrans-180
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 正态分布
- en: 'The most important distribution in statistics is arguably the normal/Gaussian
    distribution. It models the probability distribution around a central value with
    no left or right bias. There are many examples of phenomena that follow the normal
    distribution, such as the following:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在统计学中，最重要的分布可能就是正态/高斯分布。它模拟了围绕一个中心值的概率分布，且没有左右偏差。有许多现象符合正态分布，例如以下这些：
- en: The birth weights of babies
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 婴儿的出生体重
- en: Measurement errors
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测量误差
- en: Blood pressure
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 血压
- en: Test scores
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试分数
- en: 'The normal distribution''s importance is underlined by the central limit theorem,
    which states that the mean of many random variables drawn independently from the
    same distribution is approximately normal, regardless of the form of the original
    distribution. Its expected value and variance are given as follows:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 正态分布的重要性通过中心极限定理得到了强调，该定理指出，从同一分布中独立抽取的许多随机变量的均值大致呈正态分布，无论原始分布的形态如何。其期望值和方差分别如下：
- en: '*E(X) = μ**Var(X) = σ²*'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '*E(X) = μ**Var(X) = σ²*'
- en: 'The PDF of the normal distribution is given by the following expression:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 正态分布的概率密度函数（PDF）由以下公式给出：
- en: '![](img/c9b5cd60-9150-4c82-a3c7-130e320c1deb.png)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c9b5cd60-9150-4c82-a3c7-130e320c1deb.png)'
- en: 'The following code and plot explain the formula:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码和图解释了这个公式：
- en: '[PRE9]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The following is the output:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/016bcf9c-4410-447c-8170-ca277b48cf20.png)'
  id: totrans-193
  prefs: []
  type: TYPE_IMG
  zh: '![](img/016bcf9c-4410-447c-8170-ca277b48cf20.png)'
- en: Normal distribution
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 正态分布
- en: A reference for the Python code to the plot the distributions can be found at [http://bit.ly/1E17nYx](http://bit.ly/1E17nYx).
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 用于绘制分布的Python代码参考可以在 [http://bit.ly/1E17nYx](http://bit.ly/1E17nYx) 找到。
- en: 'The normal distribution can also be regarded as the continuous limit of the
    binomial distribution, and other distributions as ![](img/17367aee-d5be-4fec-9960-9563349eaa5c.png).
    We can see this in the following code and plot:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 正态分布也可以看作是二项分布的连续极限，以及其他分布，如 ![](img/17367aee-d5be-4fec-9960-9563349eaa5c.png)。我们可以在以下代码和图中看到这一点：
- en: '[PRE10]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The following is the output:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/02ca92ac-5aec-421d-8aa9-19baf2f6669a.png)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![](img/02ca92ac-5aec-421d-8aa9-19baf2f6669a.png)'
- en: As *n* increases, the binomial distribution approaches the normal distribution.
    In fact, this is clearly seen in the preceding plots for *n>=30*.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 随着 *n* 增加，二项分布趋近于正态分布。事实上，这在前面的 *n>=30* 的图中可以清楚地看到。
- en: Bayesian statistics versus frequentist statistics
  id: totrans-201
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 贝叶斯统计与频率派统计
- en: In statistics today, there are two schools of thought as to how we interpret
    data and make statistical inferences. The classical and more dominant approach
    to date has been what is termed the frequentist approach (refer to [Chapter 7](4ff075ff-5491-4503-a1ca-eb62f1704cf4.xhtml), *A
    Tour of Statistics – The Classical Approach*). We are looking at the Bayesian
    approach in this chapter.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 在当今的统计学中，对于如何解释数据并进行统计推断，有两种学派。迄今为止，经典且占主导地位的方法是所谓的频率学派方法（参见[第7章](4ff075ff-5491-4503-a1ca-eb62f1704cf4.xhtml)，*统计学概览
    – 经典方法*）。我们在这一章中探讨的是贝叶斯方法。
- en: What is probability?
  id: totrans-203
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是概率？
- en: At the heart of the debate between the Bayesian and frequentist worldview is
    the question of how we define probability.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯学派与频率学派世界观之间争论的核心问题是如何定义概率。
- en: In the frequentist worldview, probability is a notion that is derived from the
    frequencies of repeated events—for example, when we define the probability of
    getting heads when a fair coin is tossed as being equal to half. This is because
    when we repeatedly toss a fair coin, the number of heads divided by the total
    number of coin tosses approaches 0.5 when the number of coin tosses is sufficiently
    large.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 在频率学派的世界观中，概率是通过重复事件的频率推导出来的概念——例如，我们将公平硬币投掷时出现正面的概率定义为一半。这是因为当我们反复投掷公平硬币时，正面朝上的次数与总投掷次数的比值会随着投掷次数的增加接近
    0.5。
- en: The Bayesian worldview is different, and the notion of probability is that it
    is related to one's degree of belief in the event happening. Thus, for a Bayesian
    statistician, having a belief that the probability of a fair die turning up five
    is *1/6* relates to our belief in the chances of that event occurring.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯的世界观不同，概率的概念是与一个人对事件发生的信念程度相关。因此，对于贝叶斯统计学家来说，相信公平骰子出现五点的概率是*1/6*，这与我们对该事件发生的概率信念有关。
- en: How the model is defined
  id: totrans-207
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模型如何定义
- en: 'From the model definition point of view, frequentists analyze how data and
    calculated metrics vary by making use of repeated experiments while keeping the
    model parameters fixed. Bayesians, on the other hand, utilize fixed experimental
    data, but vary their degrees of belief in the model parameters. This is explained
    as follows:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 从模型定义的角度来看，频率学派通过反复实验来分析数据和计算指标如何变化，同时保持模型参数不变。贝叶斯学派则利用固定的实验数据，但在模型参数上变化他们的信念程度。具体解释如下：
- en: '**Frequentists**: If the models are fixed, data varies.'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**频率学派**：如果模型是固定的，数据是变化的。'
- en: '**Bayesians**: If the data is fixed, models vary.'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**贝叶斯学派**：如果数据是固定的，模型是变化的。'
- en: The frequentist approach is to use what is known as the maximum likelihood method
    to estimate model parameters. It involves generating data from a set of independent
    and identically distributed observations and fitting the observed data to the
    model. The value of the model parameter that best fits the data is the **maximum
    likelihood estimator** (**MLE**), which can sometimes be a function of the observed
    data.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 频率学派的方法是使用最大似然法来估计模型参数。它涉及从一组独立同分布的观测数据中生成数据，并将观察到的数据拟合到模型中。最能拟合数据的模型参数值就是**最大似然估计器**（**MLE**），它有时可以是观测数据的一个函数。
- en: Bayesianism approaches the problem differently from a probabilistic framework.
    A probability distribution is used to describe the uncertainty in the values.
    Bayesian practitioners estimate probabilities using observed data. In order to
    compute these probabilities, they make use of a single estimator, which is the
    Bayes formula. This produces a distribution rather than just a point estimate,
    as in the case of the frequentist approach.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯主义从概率框架的角度以不同的方式处理问题。它使用概率分布来描述值的不确定性。贝叶斯实践者通过观察数据来估计概率。为了计算这些概率，他们使用一个单一的估计器，即贝叶斯公式。这产生了一个分布，而不仅仅是像频率学派方法那样的点估计。
- en: Confidence (frequentist) versus credible (Bayesian) intervals
  id: totrans-213
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 置信区间（频率学派）与可信区间（贝叶斯学派）
- en: Let's compare what is meant by a 95 percent confidence interval (a term used
    by frequentists) with a 95 percent credible interval (a term used by Bayesian
    practitioners).
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们比较一下 95% 置信区间（频率学派使用的术语）和 95% 可信区间（贝叶斯实践者使用的术语）的含义。
- en: In a frequentist framework, a 95 percent confidence interval means that if you
    repeat your experiment an infinite number of times, generating intervals in the
    process, 95 percent of these intervals would contain the parameter we're trying
    to estimate, which is often referred to as θ. In this case, the interval is the
    random variable and not the parameter estimate, θ, which is fixed in the frequentist
    worldview.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 在频率主义框架中，95%的置信区间意味着，如果你将实验重复无限次，每次生成区间，95%的这些区间将包含我们试图估计的参数，通常称为θ。在这种情况下，区间是随机变量，而不是参数估计值θ，后者在频率主义视角中是固定的。
- en: In the case of the Bayesian credible interval, we have an interpretation that
    is more in line with the conventional interpretation ascribed to that of a frequentist
    confidence interval. Thus, we conclude that *Pr(a(Y) < θ < b(Y)|θ) = 0.95*. In
    this case, we can properly conclude that there is a 95 percent chance that θ lies
    within the interval.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 在贝叶斯可信区间的情况下，我们有一个与频率主义置信区间的传统解释更一致的解释。因此，我们可以得出结论，*Pr(a(Y) < θ < b(Y)|θ) =
    0.95*。在这种情况下，我们可以合理地得出结论，θ有95%的概率位于该区间内。
- en: 'For more information, refer to *Frequentism and Bayesianism: What''s the Big
    Deal?* (Jake VanderPlas*, **SciPy, 2014**)* at [https://www.youtube.com/watch?v=KhAUfqhLakw](https://www.youtube.com/watch?v=KhAUfqhLakw).'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 欲了解更多信息，请参考*《频率主义与贝叶斯主义：有什么大不了的？》*（Jake VanderPlas，**SciPy，2014**）在[https://www.youtube.com/watch?v=KhAUfqhLakw](https://www.youtube.com/watch?v=KhAUfqhLakw)。
- en: Conducting Bayesian statistical analysis
  id: totrans-218
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进行贝叶斯统计分析
- en: 'Conducting a Bayesian statistical analysis involves the following steps:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 进行贝叶斯统计分析包括以下步骤：
- en: '**Specifying a probability model**: In this step, we fully describe the model
    using a probability distribution. Based on the distribution of a sample that we
    have taken, we try to fit a model to it and attempt to assign probabilities to
    unknown parameters.'
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**指定概率模型**：在这一步中，我们使用概率分布完全描述模型。基于我们所取样本的分布，我们尝试拟合一个模型并为未知参数分配概率。'
- en: '**Calculating a posterior distribution**: The posterior distribution is a distribution
    that we calculate in light of observed data. In this case, we will directly apply
    Bayes'' formula. It will be specified as a function of the probability model that
    we specified in the previous step.'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**计算后验分布**：后验分布是我们基于观测数据计算出的分布。在这种情况下，我们将直接应用贝叶斯公式。它将作为我们在前一步中指定的概率模型的函数进行指定。'
- en: '**Checking our model**: This is a necessary step where we review our model
    and its outputs before we make inferences. Bayesian inference methods use probability
    distributions to assign probabilities to possible outcomes.'
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**检查我们的模型**：这是一个必要的步骤，我们在做出推断之前，检查我们的模型及其输出。贝叶斯推断方法使用概率分布为可能的结果分配概率。'
- en: Monte Carlo estimation of the likelihood function and PyMC
  id: totrans-223
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 似然函数的蒙特卡洛估计与PyMC
- en: Bayesian statistics isn't just another method. It is an entirely different paradigm
    for practicing statistics. It uses probability models for making inferences, given
    the data that has been collected. This can be expressed in a fundamental expression
    as *P*(*H*|*D*).
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯统计不仅仅是另一种方法。它是一个完全不同的统计学实践范式。它使用概率模型来进行推断，基于收集到的数据。这可以通过一个基本的表达式来表示，即*P*(*H*|*D*)。
- en: Here, *H* is our hypothesis, that is, the thing we're trying to prove, and *D*
    is our data or observations.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*H*是我们的假设，即我们试图证明的内容，*D*是我们的数据或观察结果。
- en: 'As a reminder of our previous discussion, the diachronic form of Bayes'' theorem
    is as follows:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 为了提醒我们之前的讨论，贝叶斯定理的历时形式如下：
- en: '![](img/f977f4b1-d41e-4066-8fb5-68df68f63ef2.png)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f977f4b1-d41e-4066-8fb5-68df68f63ef2.png)'
- en: Here, *P(H)* is an unconditional prior probability that represents what we know
    before we conduct our trial. *P(D|H)* is our likelihood function, or probability
    of obtaining the data we observe, given that our hypothesis is true.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*P(H)*是无条件的先验概率，表示我们在进行实验之前所知道的内容。*P(D|H)*是我们的似然函数，即在假设为真时，获得我们观察到的数据的概率。
- en: '*P(D)* is the probability of the data, also known as the normalizing constant.
    This can be obtained by integrating the numerator over *H*.'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: '*P(D)*是数据的概率，也称为归一化常数。它可以通过对*H*上的分子进行积分得到。'
- en: The likelihood function is the most important piece of our Bayesian calculation
    and encapsulates all the information about the unknowns in the data. It has some
    semblance to a reverse probability mass function.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 似然函数是我们贝叶斯计算中最重要的部分，它封装了关于数据中未知信息的所有信息。它与反向概率质量函数有一些相似之处。
- en: One argument against adopting a Bayesian approach is that the calculation of
    the prior can be subjective. There are many arguments in favor of this approach,
    one being that external prior information can be included, as mentioned previously.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 反对采用贝叶斯方法的一个论点是先验的计算可能具有主观性。支持这种方法的有许多论点，其中之一是可以加入外部先验信息，如前所述。
- en: The likelihood value represents an unknown integral, which in simple cases can
    be obtained by analytic integration.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 似然值表示一个未知的积分，在简单的情况下可以通过解析积分获得。
- en: '**Monte Carlo** (**MC**) integration is needed for more complicated use cases
    involving higher-dimensional integrals and can be used to compute the likelihood
    function.'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: '**蒙特卡洛** (**MC**) 积分在涉及更复杂的高维积分的使用案例中是必需的，并且可以用于计算似然函数。'
- en: 'MC integration can be computed through a variety of sampling methods, such
    as uniform sampling, stratified sampling, and importance sampling. In Monte Carlo
    integration, we can approximate the integral as follows:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: MC 积分可以通过多种抽样方法计算，例如均匀抽样、分层抽样和重要性抽样。在蒙特卡洛积分中，我们可以如下近似积分：
- en: '![](img/5f0e1ceb-ffad-4e02-afdb-f9cdaff9f523.png)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5f0e1ceb-ffad-4e02-afdb-f9cdaff9f523.png)'
- en: 'The following is the finite sum:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是有限和：
- en: '![](img/e024771a-b52d-449d-ab59-4f62abef098c.png)'
  id: totrans-237
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e024771a-b52d-449d-ab59-4f62abef098c.png)'
- en: Here, *x* is a sample vector from *g*. The proof that this estimate is a good
    one can be obtained from the law of large numbers and by making sure that the
    simulation error is small.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*x* 是来自 *g* 的样本向量。可以通过大数法则并确保仿真误差较小来证明这个估计是有效的。
- en: 'When conducting Bayesian analysis in Python, we will need a module that will
    enable us to calculate the likelihood function using the Monte Carlo method. The
    `PyMC` library fulfills that need. It provides a Monte Carlo method known commonly
    as MCMC. We will not delve further into the technical details of MCMC, but the
    interested reader can find out more about MCMC implementation in `PyMC` from the
    following sources:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Python 中进行贝叶斯分析时，我们需要一个模块来帮助我们使用蒙特卡洛方法计算似然函数。`PyMC` 库满足了这个需求。它提供了一种常用的蒙特卡洛方法，称为
    MCMC。我们不会进一步探讨 MCMC 的技术细节，但有兴趣的读者可以通过以下来源了解有关 `PyMC` 中 MCMC 实现的更多信息：
- en: '*Monte Carlo Integration in Bayesian Estimation*:[http://bit.ly/1bMALeu](http://bit.ly/1bMALeu)'
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*贝叶斯估计中的蒙特卡洛积分*：[http://bit.ly/1bMALeu](http://bit.ly/1bMALeu)'
- en: '*Markov Chain Monte Carlo Maximum Likelihood*: [http://bit.ly/1KBP8hH](http://bit.ly/1KBP8hH)'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*马尔科夫链蒙特卡洛最大似然*：[http://bit.ly/1KBP8hH](http://bit.ly/1KBP8hH)'
- en: '*Bayesian Statistical Analysis Using Python–Part 1*, *SciPy 2014*, *Chris Fonnesbeck*:
    [http://www.youtube.com/watch?v=vOBB_ycQ0RA](http://www.youtube.com/watch?v=vOBB_ycQ0RA)'
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用 Python 进行贝叶斯统计分析–第一部分*，*SciPy 2014*，*Chris Fonnesbeck*：[http://www.youtube.com/watch?v=vOBB_ycQ0RA](http://www.youtube.com/watch?v=vOBB_ycQ0RA)'
- en: MCMC is not a universal panacea; there are some drawbacks to the approach, and
    one of them is the slow convergence of the algorithm.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: MCMC 并非万能的灵丹妙药；这种方法存在一些缺点，其中之一就是算法收敛较慢。
- en: Bayesian analysis example – switchpoint detection
  id: totrans-244
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 贝叶斯分析示例 – 转折点检测
- en: 'Here, we will try to use Bayesian inference and model an interesting dataset.
    The dataset in question consists of the author''s **Facebook** (**FB**) post history
    over time. We have scrubbed the FB history data and saved the dates in the `fb_post_dates.txt`
    file. Here is what the data in the file looks like:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们将尝试使用贝叶斯推理并对一个有趣的数据集进行建模。该数据集由作者的**Facebook** (**FB**) 发帖历史构成。我们已经清洗了
    FB 历史数据并将日期保存在 `fb_post_dates.txt` 文件中。文件中的数据如下所示：
- en: '[PRE11]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Thus, we see a datetime series, representing the date and time at which the
    author posted on FB. First, we read the file into DataFrame, separating the timestamp
    into `Date` and `Time` columns:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们看到一个日期时间序列，表示作者在 Facebook 上发帖的日期和时间。首先，我们将文件读取到 DataFrame 中，并将时间戳拆分成 `Date`
    和 `Time` 两列：
- en: '[PRE12]'
  id: totrans-248
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Next, we inspect the data as follows:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们按如下方式检查数据：
- en: '[PRE13]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Now, we index the data by `Date`, creating a `DatetimeIndex` so that we can
    run resample on it to count by month, as follows:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们按 `Date` 索引数据，创建一个 `DatetimeIndex`，以便我们可以对其进行重采样并按月计数，如下所示：
- en: '[PRE14]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'We then display information about the index as follows:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们按如下方式显示关于索引的信息：
- en: '[PRE15]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Next, we obtain a count of posts by month using resample:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们使用重采样来按月获取帖子数量：
- en: '[PRE16]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The `Date` format is shown as the last day of the month. Now, we create a scatter
    plot of FB post counts from 2007–2015, and we make the size of the dots proportional
    to the values in `matplotlib`:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: '`Date` 格式显示的是每月的最后一天。现在，我们创建一个从 2007 年到 2015 年的 FB 帖子数量散点图，并使点的大小与 `matplotlib`
    中的值成正比：'
- en: '[PRE17]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The following is the output:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/f8f54069-a899-4d51-b70c-973445ee602d.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f8f54069-a899-4d51-b70c-973445ee602d.png)'
- en: The question we would like to investigate is whether there was a change in behavior
    at some point over the time period. Specifically, we want to identify whether
    there was a specific period at which the mean number of FB posts changed. This
    is often referred to as the switchpoint or changepoint in a time series.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望调查的问题是，是否在某个时刻行为发生了变化。具体来说，我们想要识别是否存在一个特定时期，FB 帖子的平均数量发生了变化。这通常被称为时间序列中的切换点或变化点。
- en: We can make use of the Poisson distribution to model this. You might recall
    that the Poisson distribution can be used to model time series count data. (Refer
    to [http://bit.ly/1JniIqy](http://bit.ly/1JniIqy) for more about this.)
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以利用泊松分布来建模这个。你可能记得，泊松分布可以用来建模时间序列的计数数据。（更多信息请参考 [http://bit.ly/1JniIqy](http://bit.ly/1JniIqy)。）
- en: 'If we represent our monthly FB post count by *C[i]*, we can represent our model
    as follows:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们用 *C[i]* 表示每月的 FB 帖子数，我们可以将我们的模型表示如下：
- en: '![](img/8e251d82-2dfc-4635-b9d2-7e9283ff1894.png)'
  id: totrans-264
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8e251d82-2dfc-4635-b9d2-7e9283ff1894.png)'
- en: The *r[i]* parameter is the rate parameter of the Poisson distribution, but
    we don't know what its value is. If we examine the scatter plot of the FB time
    series count data, we can see that there was a jump in the number of posts sometime
    around mid to late 2010, perhaps coinciding with the start of the 2010 World Cup
    in South Africa, which the author attended.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: '*r[i]* 参数是泊松分布的速率参数，但我们不知道它的值。如果我们查看 FB 时间序列的散点图，可以看到 2010 年中到晚些时候，帖子数量出现了跳跃，可能与
    2010 年南非世界杯的开始时间重合，而作者也参加了这场世界杯。'
- en: 'The *s* parameter is the switchpoint, which is when the rate parameter changes,
    while *e* and *l* are the values of the *r[i]* parameter before and after the
    switchpoint respectively. This can be represented as follows:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: '*s* 参数是切换点，即速率参数发生变化的时刻，而 *e* 和 *l* 分别是切换点前后 *r[i]* 参数的值。可以表示如下：'
- en: '![](img/361ba479-3bcd-49ed-bd8c-a0ec8ca56a8f.png)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![](img/361ba479-3bcd-49ed-bd8c-a0ec8ca56a8f.png)'
- en: 'Note that the variables specified here—*C, s, e, r* and *l—*are all Bayesian
    random variables. For Bayesian random variables that represent one''s beliefs
    about their values, we need to model them using a probability distribution. We
    would like to infer the values of *e* and *l*, which are unknown. In `PyMC`, we
    can represent random variables using the stochastic and deterministic classes.
    We note that the exponential distribution is the amount of time between Poisson
    events. Therefore, in the case of *e* and *l*, we choose the exponential distribution
    to model them since they can be any positive number:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，这里指定的变量—*C, s, e, r* 和 *l*—都是贝叶斯随机变量。对于表示某人对其值的信念的贝叶斯随机变量，我们需要使用概率分布来建模它们。我们希望推断
    *e* 和 *l* 的值，这些值是未知的。在 `PyMC` 中，我们可以使用随机和确定性类来表示随机变量。我们注意到，指数分布表示的是泊松事件之间的时间。因此，对于
    *e* 和 *l*，我们选择使用指数分布来建模它们，因为它们可以是任何正数：
- en: '![](img/7756ac98-afa8-4b65-8691-33945a71f9e7.png)![](img/df4d13c3-7654-43ff-a018-4deed64fff6a.png)'
  id: totrans-269
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7756ac98-afa8-4b65-8691-33945a71f9e7.png)![](img/df4d13c3-7654-43ff-a018-4deed64fff6a.png)'
- en: 'In the case of *s*, we will choose to model it using the uniform distribution,
    which reflects our belief that it is equally likely that the switchpoint can occur
    on any day within the entire time period. This means that we have the following:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 *s*，我们选择使用均匀分布来建模它，这反映了我们认为切换点可能在整个时间段内的任何一天发生的概率是相等的。这意味着我们有如下假设：
- en: '![](img/f1e4231b-aff6-4f0c-a7e3-9b297f2c112d.png)'
  id: totrans-271
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f1e4231b-aff6-4f0c-a7e3-9b297f2c112d.png)'
- en: 'Here, *t[0] , t[f]* corresponds to the lower and upper boundaries of the year, *i*.
    Let''s now use `PyMC` to represent the model that we developed earlier. We will
    now use `PyMC` to see whether we can detect a switchpoint in the FB post data.
    In addition to the scatter plot, we can also display the data in a bar chart.
    To do that, we first need to obtain a count of FB posts ordered by month in a
    list:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*t[0], t[f]*分别对应年份的下限和上限，*i*。现在让我们使用`PyMC`来表示我们之前开发的模型。我们将使用`PyMC`来看看是否能在FB发布数据中检测到转折点。除了散点图，我们还可以在条形图中显示数据。为此，我们首先需要获取按月份排序的FB发布计数列表：
- en: '[PRE18]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'We render the bar plot using `matplotlib`:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`matplotlib`来渲染条形图：
- en: '[PRE19]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The following is the output:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/55734643-b76f-4798-972c-d844d30bbd60.png)'
  id: totrans-277
  prefs: []
  type: TYPE_IMG
  zh: '![](img/55734643-b76f-4798-972c-d844d30bbd60.png)'
- en: 'Looking at the preceding bar chart, can we conclude that there was a change
    in FB frequency posting behavior over time? We can use `PyMC` on the model that
    we have developed to help us find out the change as follows:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的条形图来看，我们能否得出结论认为FB频率发布行为在一段时间内发生了变化？我们可以在已开发的模型上使用`PyMC`来帮助我们找出变化，方法如下：
- en: '[PRE20]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Here, we define a method for the rate parameter, *r*, and we model the count
    data using a Poisson distribution as discussed previously:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们为速率参数*r*定义了一个方法，并使用之前讨论的泊松分布来建模计数数据：
- en: '[PRE21]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: In the preceding code snippet, `@pm.deterministic` is a decorator that denotes
    that the rate function is deterministic, meaning that its values are entirely
    determined by other variables—in this case, *e*, *s*, and *l*. The decorator is
    necessary to tell `PyMC` to convert the rate function into a deterministic object.
    If we do not specify the decorator, an error occurs. For more information about Python
    decorators, refer to [http://bit.ly/1zj8U0o](http://bit.ly/1zj8U0o).
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的代码片段中，`@pm.deterministic`是一个装饰器，表示速率函数是确定性的，即其值完全由其他变量（在本例中为*e*、*s*和*l*）决定。该装饰器是必要的，它告诉`PyMC`将速率函数转换为确定性对象。如果我们不指定装饰器，将会发生错误。有关Python装饰器的更多信息，请参考[http://bit.ly/1zj8U0o](http://bit.ly/1zj8U0o)。
- en: 'For more information, refer to the following web pages:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 更多信息，请参考以下网页：
- en: '[http://en.wikipedia.org/wiki/Poisson_process](http://en.wikipedia.org/wiki/Poisson_process)'
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://en.wikipedia.org/wiki/Poisson_process](http://en.wikipedia.org/wiki/Poisson_process)'
- en: '[http://pymc-devs.github.io/pymc/tutorial.html](http://pymc-devs.github.io/pymc/tutorial.html)'
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://pymc-devs.github.io/pymc/tutorial.html](http://pymc-devs.github.io/pymc/tutorial.html)'
- en: '[https://github.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers](https://github.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers)'
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://github.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers](https://github.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers)'
- en: We will now create a model with the FB count data (`fb_activity`) and the *e,
    s, l* (`early_mean`, `late_mean`, and `rate` respectively) parameters.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将使用FB计数数据（`fb_activity`）和*e, s, l*（分别为`early_mean`、`late_mean`和`rate`）参数来创建模型。
- en: 'Next, using `PyMC`, we create an `MCMC` object that enables us to fit our data
    using MCMC methods. We then call sample on the resulting `MCMC` object to do the
    fitting:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，使用`PyMC`，我们创建一个`MCMC`对象，使我们能够使用MCMC方法来拟合数据。然后，我们调用该`MCMC`对象上的sample函数进行拟合：
- en: '[PRE22]'
  id: totrans-289
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Fitting the model using MCMC involves using Markov Chain Monte Carlo methods
    to generate a probability distribution for the posterior, *P(s,e,l | D)*. It uses
    the Monte Carlo process to repeatedly simulate sampling of the data and does this
    until the algorithm seems to converge to a steady state, based on multiple criteria.
    This is a Markov process because successive samples are dependent only on the
    previous sample. For further information on Markov chain convergence, refer to
    [http://bit.ly/1IETkhC](http://bit.ly/1IETkhC).
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 使用MCMC拟合模型涉及利用马尔可夫链蒙特卡洛方法生成后验的概率分布，*P(s,e,l | D)*。它使用蒙特卡洛过程反复模拟数据采样，并在算法似乎收敛到稳定状态时停止，收敛依据多个标准。这是一个马尔可夫过程，因为连续的样本仅依赖于前一个样本。有关马尔可夫链收敛的更多信息，请参考[http://bit.ly/1IETkhC](http://bit.ly/1IETkhC)。
- en: 'The generated samples are referred to as **traces**. We can view what the marginal
    posterior distribution of the parameters looks like by looking at a histogram
    of its trace:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 生成的样本被称为**轨迹**。我们可以通过查看其轨迹的直方图来观察参数的边际后验分布的形态：
- en: '[PRE23]'
  id: totrans-292
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The following is the output:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/1491b72e-3d78-41fe-91be-3f54de7b51fa.png)'
  id: totrans-294
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1491b72e-3d78-41fe-91be-3f54de7b51fa.png)'
- en: 'Next, we find the early mean:'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们计算早期的均值：
- en: '[PRE24]'
  id: totrans-296
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'The following is the output:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/29eaa6b2-eb05-44a5-bb86-c1bd8bf65222.png)'
  id: totrans-298
  prefs: []
  type: TYPE_IMG
  zh: '![](img/29eaa6b2-eb05-44a5-bb86-c1bd8bf65222.png)'
- en: 'Here, we see what the switchpoint looks like in terms of the number of months:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们看到切换点在月份数上的表现：
- en: '[PRE25]'
  id: totrans-300
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The following is the output:'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/be583c20-b4c2-4dcd-ad02-1153c778bdf7.png)'
  id: totrans-302
  prefs: []
  type: TYPE_IMG
  zh: '![](img/be583c20-b4c2-4dcd-ad02-1153c778bdf7.png)'
- en: Histogram of the switchpoint for the number of months
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 切换点的月份数直方图
- en: 'We can see that the switchpoint is in the neighborhood of the months 35–38\.
    Here, we use `matplotlib` to display the marginal posterior distributions of *e*,
    *s*, and *l* in a single diagram:'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，切换点大致位于35到38个月之间。这里，我们使用`matplotlib`来展示*e*、*s*和*l*的边际后验分布，并将它们绘制在一张图中：
- en: '[PRE26]'
  id: totrans-305
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The following is the output:'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是输出结果：
- en: '![](img/2b3b9538-cad8-46fb-b4b0-6e5a0ef48b40.png)'
  id: totrans-307
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2b3b9538-cad8-46fb-b4b0-6e5a0ef48b40.png)'
- en: Marginal posterior distributions
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 边际后验分布
- en: '`PyMC` also has plotting functionality as it uses `matplotlib`. In the following
    plots, we display a time series plot, an **autocorrelation plot** (**acorr**),
    and a histogram of the samples drawn for the early mean, late mean, and switchpoint.
    The histogram is useful for visualizing the posterior distribution. The autocorrelation
    plot shows whether values in the previous period are strongly related to values
    in the current period:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: '`PyMC`还具有绘图功能，因为它使用了`matplotlib`。在以下图表中，我们展示了时间序列图、**自相关图**（**acorr**）和为早期均值、晚期均值以及切换点所绘制的样本的直方图。直方图有助于可视化后验分布。自相关图显示了前一时期的值是否与当前时期的值有较强的关系：'
- en: '[PRE27]'
  id: totrans-310
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The following is the late mean plot:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是晚期均值图：
- en: '![](img/bfa3afc4-e774-4ae0-918a-c51fd38c37d5.png)'
  id: totrans-312
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bfa3afc4-e774-4ae0-918a-c51fd38c37d5.png)'
- en: Graph for pymc_comprehensive_late_mean
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: pymc_comprehensive_late_mean的图表
- en: 'Here, we display the switchpoint plot:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们展示了切换点图：
- en: '![](img/d093d961-60f7-4e48-aebd-1c755d1fc781.png)'
  id: totrans-315
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d093d961-60f7-4e48-aebd-1c755d1fc781.png)'
- en: PyMC comprehensive switchpoint
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: PyMC综合切换点
- en: 'Here, we display the early mean plot:'
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们展示了早期均值图：
- en: '![](img/027d6b82-1340-4f1f-bec2-929cba701772.png)'
  id: totrans-318
  prefs: []
  type: TYPE_IMG
  zh: '![](img/027d6b82-1340-4f1f-bec2-929cba701772.png)'
- en: PyMC comprehensive early mean
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: PyMC综合早期均值
- en: From the output of `PyMC`, we can conclude that the switchpoint is around 35–38
    months from the start of the time series. This corresponds to some time between
    March and July 2010\. The author can testify that this was a banner year for him
    with respect to the use of FB since it was the year of the FIFA World Cup finals
    that were held in South Africa, which he attended.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 从`PyMC`的输出结果中，我们可以得出结论，切换点大约在时间序列开始后的35到38个月之间。这个时间段大致对应于2010年3月到7月之间。作者可以证实，这是他使用Facebook的一个标志性年份，因为那年是南非举办FIFA世界杯决赛的年份，而他也亲自参加了。
- en: Maximum likelihood estimate
  id: totrans-321
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 最大似然估计
- en: '**Maximum likelihood estimate** (**MLE**) is a method that is used to estimate
    the probability distribution parameters of a population from the available sample
    data. MLE methods can also be considered as a Bayesian alternative.'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: '**最大似然估计**（**MLE**）是一种用于从现有样本数据中估计总体分布参数的方法。MLE方法也可以被视为贝叶斯的替代方法。'
- en: Probability distribution gives the probability of observing a data point given
    distribution parameters such as mean, standard deviation, and degree of freedom.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 概率分布给出了在给定分布参数（如均值、标准差和自由度）下观察到数据点的概率。
- en: The probability of data point given distribution parameters is expressed as
    Prob(*X*|µ,α) -------1.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 给定分布参数下数据点的概率表示为Prob(*X*|µ,α) -------1。
- en: MLE deals with the inverse problem. It is used to find the most likely values
    of distribution parameters given the set of data points. For that purpose, another
    statistic called likelihood is defined. The likelihood is defined as the probability
    of observing the distribution parameters given the data points.
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: MLE处理的是逆问题。它用于在给定数据点的情况下，找到最可能的分布参数值。为此，定义了一个称为似然度的统计量。似然度被定义为在给定数据点的情况下观察到分布参数的概率。
- en: The probability of observing the distribution parameters given the data point
    is expressed as L(µ,α|X)----2.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 给定数据点的分布参数的概率表示为L(µ,α|X)----2。
- en: 'The quantities in equations 1 and 2 are the same probabilities, just stated
    differently. Therefore, we can write the following:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 方程1和2中的量是相同的概率，只是表述方式不同。因此，我们可以写出以下公式：
- en: '![](img/4bb4acad-a045-490d-9c6a-feb61b320ef3.png)'
  id: totrans-328
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4bb4acad-a045-490d-9c6a-feb61b320ef3.png)'
- en: 'To understand this concept better, have a look at the following graph:'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解这个概念，请看以下图表：
- en: '![](img/9637d944-50f0-4d7e-a0e2-5bcc15c752be.png)'
  id: totrans-330
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9637d944-50f0-4d7e-a0e2-5bcc15c752be.png)'
- en: MLE estimation illustration for normal distribution with two data points
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 正态分布MLE估计示例，包含两个数据点
- en: The graph shows three normal distributions with different means and standard
    deviations. The two vertical lines represent values V[1]=-2.5 and V[2]=2.5.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 该图展示了三个具有不同均值和标准差的正态分布。两条竖直线分别表示值V[1]=-2.5和V[2]=2.5。
- en: Suppose that we represent the probability that a data point V[1]=-2.5 belongs
    to the red (mean=0, std dev=1.5) distribution by *P*(red|*V*[1]=-2.5). Similarly,
    the probability that a data point V[1]=-2.5 belongs to the blue (mean=0, std dev=4)
    distribution is *P*(blue|*V*[1]=-2.5).
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们表示数据点V[1]=-2.5属于红色分布（均值=0，标准差=1.5）的概率为*P*(red|*V*[1]=-2.5)。类似地，数据点V[1]=-2.5属于蓝色分布（均值=0，标准差=4）的概率为*P*(blue|*V*[1]=-2.5)。
- en: 'Now, looking at the graph shown here, we can state the following:'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，查看这里展示的图表，我们可以得出以下结论：
- en: '![](img/fae0992a-f40e-494e-b8c4-b12c1e0a001a.png)'
  id: totrans-335
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fae0992a-f40e-494e-b8c4-b12c1e0a001a.png)'
- en: '![](img/249c806c-3a4a-46bb-bea2-5876169e662e.png)'
  id: totrans-336
  prefs: []
  type: TYPE_IMG
  zh: '![](img/249c806c-3a4a-46bb-bea2-5876169e662e.png)'
- en: '![](img/561cc532-0621-47b9-9bd8-f9fe21a0b783.png)'
  id: totrans-337
  prefs: []
  type: TYPE_IMG
  zh: '![](img/561cc532-0621-47b9-9bd8-f9fe21a0b783.png)'
- en: If we had to make a decision based on only available datapoints, then we would
    decide that *V*[1]=2.5 belongs to the blue distribution as *V*[1]*B*[1] > *V*[1]*R*[1]
    > *V*[1]*G*[1], and we choose the distribution with the largest probability of
    that data point belonging to that distribution.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们必须仅根据现有数据点做出决策，那么我们会决定*V*[1]=2.5属于蓝色分布，因为*V*[1]*B*[1] > *V*[1]*R*[1] > *V*[1]*G*[1]，我们选择具有该数据点属于该分布最大概率的分布。
- en: 'But what if we have one more data point, or many more? For this situation,
    let''s add another data point called *V*[2] to our dataset. The individual probabilities
    for *V*[2] are as follows:'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 但是如果我们有一个或更多的数据点呢？对于这种情况，让我们向数据集中添加另一个数据点，称为*V*[2]。*V*[2]的单个概率如下：
- en: '![](img/5dc480e2-4bdc-460c-8411-8333f2c3f09d.png)'
  id: totrans-340
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5dc480e2-4bdc-460c-8411-8333f2c3f09d.png)'
- en: '![](img/8875ef97-7d76-42d3-aa77-4ce4aa42b299.png)'
  id: totrans-341
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8875ef97-7d76-42d3-aa77-4ce4aa42b299.png)'
- en: '![](img/893ba73f-a3e6-4723-8fb3-909a56cd3be9.png)'
  id: totrans-342
  prefs: []
  type: TYPE_IMG
  zh: '![](img/893ba73f-a3e6-4723-8fb3-909a56cd3be9.png)'
- en: Since there are two points now, we can't base our decisions on individual probabilities
    and would have to calculate joint probabilities. If we assume that the event of
    one data point occurring is independent of the event of another data point occurring,
    then the joint probabilities are given by the individual probabilities.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 由于现在有两个数据点，我们不能仅凭单个概率做出决策，而必须计算联合概率。如果我们假设一个数据点的发生事件与另一个数据点的发生事件是独立的，那么联合概率将等于单个概率。
- en: 'Suppose the joint probability that the two points belong to the red distribution
    given the two data points is denoted by *P(red|V[1]=-2.5, V[2]=2.5)*. Then the
    following will be true:'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 假设给定两个数据点时，这两个点属于红色分布的联合概率表示为*P(red|V[1]=-2.5, V[2]=2.5)*。那么以下等式成立：
- en: '![](img/72265fda-4817-48b5-a819-5ce4803a8558.png)'
  id: totrans-345
  prefs: []
  type: TYPE_IMG
  zh: '![](img/72265fda-4817-48b5-a819-5ce4803a8558.png)'
- en: '![](img/90249c71-fee9-45da-9088-adf998f56c71.png)'
  id: totrans-346
  prefs: []
  type: TYPE_IMG
  zh: '![](img/90249c71-fee9-45da-9088-adf998f56c71.png)'
- en: '![](img/8b8bd5ac-db67-4b7d-a29d-60f40025f122.png)'
  id: totrans-347
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8b8bd5ac-db67-4b7d-a29d-60f40025f122.png)'
- en: We should choose the distribution that has the maximum joint probability. In
    this case, the blue would have the highest joint probability, as we can conclude
    by looking at the graph.
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 我们应该选择具有最大联合概率的分布。在这种情况下，蓝色的分布具有最高的联合概率，我们可以从图表中得出这一结论。
- en: As the number of points in the dataset increase, it no longer remains feasible
    to draw inferences about the maximum joint probability by looking at charts like
    the preceding charts. We need to resort to algebraic and calculus methods to find
    the parameters (defining the distribution) to find the distribution that maximises
    the joint probability of the dataset to belong to that distribution.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 随着数据集中的点数增加，单凭观察前面的图表已经无法再有效地推断最大联合概率。我们需要求助于代数和微积分方法，找出能够最大化数据集属于某个分布的联合概率的分布参数。
- en: 'If we assume that the individual data points are independent of each other,
    then the likelihood or probability of observing distribution parameters given
    all the data points is given by the following formula:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们假设单个数据点之间是独立的，那么在给定所有数据点的情况下观察分布参数的似然性或概率可以通过以下公式表示：
- en: '![](img/1a60f846-d1f4-405a-87ac-5d0921e1f3c8.png)'
  id: totrans-351
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1a60f846-d1f4-405a-87ac-5d0921e1f3c8.png)'
- en: 'In the MLE calculations, we try to find the values of µ, α that maximize *L*(µ,α|*X*[1],
    *X*[2], *X*[3], ...., *X[n]*). In that endeavor, taking the log of both sides
    helps a lot. It doesn''t change the objective function as the log is a monotonically
    increasing function that makes the calculations a lot easier. The log of the likelihood
    is often called the log-likelihood and is calculated as follows:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 在最大似然估计（MLE）计算中，我们尝试找到能够最大化 *L*(µ,α|*X*[1], *X*[2], *X*[3], ...., *X[n]*) 的
    µ 和 α 的值。在这个过程中，对两边取对数非常有帮助。因为对数是单调递增的函数，它不会改变目标函数，但能使计算变得更加简单。似然函数的对数通常被称为对数似然函数，计算方式如下：
- en: '![](img/09f0ced7-26d1-453c-926d-edb3a6f70f50.png)'
  id: totrans-353
  prefs: []
  type: TYPE_IMG
  zh: '![](img/09f0ced7-26d1-453c-926d-edb3a6f70f50.png)'
- en: 'To find the maxima of the log-likelihood function, log(*L*(µ,α|*X*[1], *X*[2],
    *X*[3], ...., *X[n]*)), we can do the following:'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 为了找到对数似然函数的最大值，log(*L*(µ,α|*X*[1], *X*[2], *X*[3], ...., *X[n]*))，我们可以执行以下操作：
- en: Take the first derivative of *log(L(µ,α|X[1], X[2], X[3], ...., X[n]))*, function
    w.r.t µ,α and equate it to 0
  id: totrans-355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对 *log(L(µ,α|X[1], X[2], X[3], ...., X[n]))* 函数关于 µ 和 α 求一阶导数，并令其等于零
- en: Take the second derivative of *log(L(µ,α|X[1], X[2], X[3], ...., X[n]))*, function
    w.r.t µ,α and confirm that it is negative
  id: totrans-356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对 *log(L(µ,α|X[1], X[2], X[3], ...., X[n]))* 函数关于 µ 和 α 求二阶导数，并确认其为负值
- en: MLE calculation examples
  id: totrans-357
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: MLE 计算示例
- en: We will now look at two MLE calculation examples.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看两个最大似然估计（MLE）计算的例子。
- en: Uniform distribution
  id: totrans-359
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 均匀分布
- en: 'Suppose we have a probability distribution of *X* that means the following
    is true:'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们有一个 *X* 的概率分布，这意味着以下内容成立：
- en: '*Pr(X=x) = 1/b-a for all a<X<b*'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: '*Pr(X=x) = 1/b-a* 对于所有 *a* < *X* < *b*'
- en: '*Pr(X=x) = 0 for all other X*'
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: '*Pr(X=x) = 0* 对于所有其他 *X*'
- en: Here, *a* and *b* are parameters of uniform distribution.
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*a* 和 *b* 是均匀分布的参数。
- en: Since the probability is the same (or uniform) for all the values, it is called
    a uniform distribution.
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 由于所有值的概率相同（或均匀分布），因此它被称为均匀分布。
- en: 'Suppose there are *n* data points in a dataset that is hypothesized to follow
    a uniform distribution. Based on these points, we aim to find the values of *a*
    and *b* to define the distribution to which these data points most likely belong.
    For this, we can use the maximum likelihood estimate method:'
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: 假设数据集中有 *n* 个数据点，并假设这些数据点符合均匀分布。基于这些数据点，我们的目标是找到 *a* 和 *b* 的值，以定义这些数据点最有可能属于的分布。为此，我们可以使用最大似然估计方法：
- en: '![](img/e7fcec66-609f-4180-903d-8e1f4231b71c.png)'
  id: totrans-366
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e7fcec66-609f-4180-903d-8e1f4231b71c.png)'
- en: '![](img/6f4b8981-5693-494e-a6ec-3c9f19c7f053.png)'
  id: totrans-367
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6f4b8981-5693-494e-a6ec-3c9f19c7f053.png)'
- en: '![](img/04d35de8-0bd9-40d2-9839-9d5c023f042f.png)'
  id: totrans-368
  prefs: []
  type: TYPE_IMG
  zh: '![](img/04d35de8-0bd9-40d2-9839-9d5c023f042f.png)'
- en: We have to find the *a*, *b* that maximises *log*(*L*(*a*,*b*|*x*[1],*x*[2],*x*[3],.....,*x[n]*).
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要找到能最大化 *log*(*L*(*a*,*b*|*x*[1],*x*[2],*x*[3],.....,*x[n]*) 的 *a* 和 *b*。
- en: For this, we would differentiate *log*(*L*(*a*,*b*|*x*[1],*x*[2],*x*[3],.....,*x[n]*)
    with respect to *b*-*a*.
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，我们将对 *log*(*L*(*a*,*b*|*x*[1],*x*[2],*x*[3],.....,*x[n]*) 关于 *b*-*a* 进行求导。
- en: This gives -*n*/(*b*-*a*), which is always less than zero, indicating that *log*(*L*(*a*,*b*|*x*[1],*x*[2],*x*[3],.....,*x[n]*)
    is a monotonically decreasing function and its value would decrease as (*b*-*a*)
    increased. Therefore, a large *b*-*a* would maximize the probability.
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 这给出了 -*n*/(*b*-*a*)，它始终小于零，表明 *log*(*L*(*a*,*b*|*x*[1],*x*[2],*x*[3],.....,*x[n]*)
    是一个单调递减的函数，且其值随着 (*b*-*a*) 的增加而减少。因此，较大的 *b*-*a* 会最大化概率。
- en: Keeping that in mind, we get *b*=*max*(*X*), *a* = *min*(*X*).
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到这一点，我们得到 *b* = *max*(*X*), *a* = *min*(*X*)。
- en: Poisson distribution
  id: totrans-373
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 泊松分布
- en: The Poisson distribution has been explained in an earlier section of this chapter.
    In a nutshell, the Poisson distribution is a binomial distribution with an infinitely
    large number of samples, so large that the discrete nature of the binomial distribution
    gives way to the Poisson distribution. The Poisson distribution also deals with
    the probability of the occurrence of events. But rather than thinking in terms
    of the probability of the occurrence of the event in each trial, we think in terms
    of time intervals and ask ourselves how many times the event of interest would
    occur in that time interval. The parameter also moves from the probability of
    success for each trial to the number of successes in a given time interval.
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 泊松分布在本章的前面部分已有解释。简而言之，泊松分布是一个具有无限大样本数的二项分布，这么大以至于二项分布的离散性转变为了泊松分布。泊松分布也处理事件发生的概率。但不同于考虑每次试验中事件发生的概率，我们更多的是从时间间隔的角度来思考，问自己在这个时间间隔内，事件发生的次数是多少。参数也从每次试验成功的概率转变为在给定时间间隔内的成功次数。
- en: 'Here''s a summary:'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 这是总结：
- en: '**Binomial**: Probability of a number of successes in a given number of trials
    given a probability of success for each trial'
  id: totrans-376
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**二项分布**：给定每次试验的成功概率，在给定次数的试验中取得一定次数成功的概率。'
- en: '**Poisson**: Probability of a number of successes in a given interval of time
    given the arrival or success rate—that is, the average number of successes in
    a given time interval'
  id: totrans-377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**泊松**：给定到达率或成功率的情况下，在特定时间间隔内取得一定次数成功的概率——也就是给定时间间隔内的成功平均次数。'
- en: 'The Poisson probability distribution is expressed by the following:'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 泊松概率分布可以用以下公式表示：
- en: '![](img/2343d4cc-4b5a-4091-b203-3af20735921a.png)'
  id: totrans-379
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2343d4cc-4b5a-4091-b203-3af20735921a.png)'
- en: Here, **λ** is the arrival or success rate.
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，**λ**是到达率或成功率。
- en: This expression gives the probability of observing *x* successes in the given
    time interval (the same interval in which the arrival rate is defined).
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 这个表达式给出了在给定时间间隔内观察到*x*次成功的概率（即到达率定义的相同时间间隔）。
- en: 'We are interested in the MLE estimation of λ given a set of datasets that are
    supposed to be following a Poisson distribution:'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 我们关注的是给定一组数据集，估计符合泊松分布的λ的最大似然估计：
- en: '![](img/8d678950-6278-43a9-b0b0-952420fcad0c.png)'
  id: totrans-383
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8d678950-6278-43a9-b0b0-952420fcad0c.png)'
- en: '![](img/014a90e3-7e2c-4b2b-a30c-b7b3cf5da8e8.png)'
  id: totrans-384
  prefs: []
  type: TYPE_IMG
  zh: '![](img/014a90e3-7e2c-4b2b-a30c-b7b3cf5da8e8.png)'
- en: Maths of the MLE calculation for a Poisson distribution
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 泊松分布的最大似然估计（MLE）计算的数学公式
- en: Note how taking the log eases the calculation algebraically. It introduces some
    numerical challenges though—for example, making sure that the likelihood is never
    0, as log cannot be defined as 0\. Numerical methods also result in an invalid
    value if the log-likelihood is infinitely small.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，取对数可以在代数计算上简化计算。然而，这也引入了一些数值上的挑战——例如，确保似然值永远不为0，因为对数不能对0求值。如果对数似然值无限小，数值方法也会导致无效值。
- en: The MLE finds that the estimate of the arrival rate is equal to the mean of
    the dataset—that is, the number of observed arrivals in the given time interval
    in the past. The preceding calculation can be done using NumPy and other supporting
    packages in Python.
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: MLE发现到达率的估计值等于数据集的均值——也就是说，过去给定时间间隔内观测到的到达次数。前面的计算可以使用Python中的NumPy和其他支持包来完成。
- en: 'There are several steps that we need to take to perform this calculation in
    Python:'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 为了在Python中执行此计算，我们需要进行几个步骤：
- en: 'Write a function to calculate the Poisson probability for each point:'
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个函数，计算每个点的泊松概率：
- en: '[PRE28]'
  id: totrans-390
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Write a function to calculate the log-likelihood over the data given a value
    for the arrival rate:'
  id: totrans-391
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个函数，根据给定的到达率计算数据的对数似然：
- en: '[PRE29]'
  id: totrans-392
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Write a function to calculate the derivative of the log-likelihood for the
    arrival rate λ:'
  id: totrans-393
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个函数，计算到达率λ的对数似然的导数：
- en: '[PRE30]'
  id: totrans-394
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Generate test data with 100 data points—a random number of arrivals/unit time
    between 3 and 12:'
  id: totrans-395
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 生成100个数据点的测试数据——单位时间内的到达次数为3到12之间的随机数：
- en: '[PRE31]'
  id: totrans-396
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Calculate the log-likelihood for different values of arrival rates (1 to 9)
    and plot them to find the arrival rate that maximizes:'
  id: totrans-397
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算不同到达率（1到9）下的对数似然，并绘制图形以找到最大化的到达率：
- en: '[PRE32]'
  id: totrans-398
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'From this, we get the following plot, which shows that the maximum value of
    the log-likelihood on the test data is obtained when the arrival rate is 6/unit
    time:'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 由此我们得到以下图形，显示当到达率为6/单位时间时，测试数据上对数似然的最大值：
- en: '![](img/f4734d99-d1b2-4af6-9f62-ce306d04020b.png)'
  id: totrans-400
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f4734d99-d1b2-4af6-9f62-ce306d04020b.png)'
- en: Log-likelihood values at different values of lambda (that is, arrival rate)
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 在不同的λ值（即到达率）下的对数似然值
- en: 'Use the Newton–Raphson method to find the global maximum of the log-likelihood:'
  id: totrans-402
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用牛顿-拉夫森方法求解对数似然的全局最大值：
- en: '[PRE33]'
  id: totrans-403
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: '**Note**: The `lbd` parameter in the function definition is the initial value
    to start the search with.'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**：函数定义中的`lbd`参数是开始搜索的初始值。'
- en: The Newton–Raphson method is a popular computation method used to find the roots
    of complex equations. It is an iterative process that finds different values of
    independent variables until the dependent variable reaches 0\. More information
    can be found at [http://www.math.ubc.ca/~anstee/math104/newtonmethod.pdf](http://www.math.ubc.ca/~anstee/math104/newtonmethod.pdf).
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 牛顿-拉夫森方法是一种常用的计算方法，用于求解复杂方程的根。它是一个迭代过程，通过不断地求出自变量的不同值，直到因变量达到0。更多信息可以参考[http://www.math.ubc.ca/~anstee/math104/newtonmethod.pdf](http://www.math.ubc.ca/~anstee/math104/newtonmethod.pdf)。
- en: The results are greatly affected by the initial value of the parameter that
    is provided to start the search. The iterative search can go in very different
    directions if the start values are different, so be careful while using it.
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 结果受初始参数值的影响很大，搜索的方向可能会因起始值的不同而大相径庭，因此在使用时要小心。
- en: 'The concept of MLE can be extended to perform distribution-based regression.
    Suppose that we hypothesize that the arrival rate is a function of one or several
    parameters. Then the lambda would be defined by a function of the parameters:'
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 最大似然估计（MLE）概念可以扩展到执行基于分布的回归。假设我们假设到达率是一个或多个参数的函数，那么lambda将由这些参数的函数定义：
- en: '![](img/06c870f1-c4fe-4900-afcf-02c8044f7b36.png)'
  id: totrans-408
  prefs: []
  type: TYPE_IMG
  zh: '![](img/06c870f1-c4fe-4900-afcf-02c8044f7b36.png)'
- en: 'In this case, the arrival rate would be calculated as follows:'
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，到达率的计算方法如下：
- en: Use the value of the arrival rate from the previous equation in the log-likelihood
    calculation.
  id: totrans-410
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在对数似然计算中使用之前方程中得到的到达率值。
- en: Find the partial derivative of the log-likelihood with regard to *w*[0], *w*[1],
    and *w*[2].
  id: totrans-411
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到对* w *[0]、* w *[1]和* w *[2]的对数似然的偏导数。
- en: Equate all the partial derivates to 0 and find the optimum values of *w*[0],
    *w*[1], and *w*[2].
  id: totrans-412
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将所有偏导数等于0，找到* w *[0]、* w *[1]和* w *[2]的最优值。
- en: Find the optimum value of the arrival rate based on these parameters.
  id: totrans-413
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据这些参数找到到达率的最优值。
- en: 'To use the MLE calculations, do the following:'
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用MLE计算，请执行以下步骤：
- en: Find population parameters, such as the mean, std dev, arrival rate, and density,
    from the sample parameters.
  id: totrans-415
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从样本参数中找到总体参数，如均值、标准差、到达率和密度。
- en: Fit the distribution-based regression on data where simple linear regression
    wouldn't work, such as the parameter-based arrival rate example discussed previously,
    or logistic regression weights.
  id: totrans-416
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于简单线性回归无法有效拟合的数据，可以使用基于分布的回归模型，例如之前讨论的基于参数的到达率示例，或逻辑回归权重。
- en: Its usage in fitting the regression model brings it into the same league of
    optimization methods such as OLS, gradient descent, Adam optimization, RMSprop,
    and other methods.
  id: totrans-417
  prefs: []
  type: TYPE_NORMAL
  zh: 它在拟合回归模型中的应用使其与OLS、梯度下降、Adam优化、RMSprop等优化方法处于同一类别。
- en: References
  id: totrans-418
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: 'For a more in-depth look at other Bayesian statistics topics that we touched
    upon, please take a look at the following references:'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: 如果想更深入了解我们涉及的其他贝叶斯统计主题，请查阅以下参考文献：
- en: '*Probabilistic Programming and Bayesian Methods for Hackers:* [https://github.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers](https://github.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers)'
  id: totrans-420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*《黑客的概率编程与贝叶斯方法》*：[https://github.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers](https://github.com/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers)'
- en: '*Bayesian Data Analysis*, *Third Edition*, *Andrew Gelman*: [http://www.amazon.com/Bayesian-Analysis-Chapman-Statistical-Science/dp/1439840954](http://www.amazon.com/Bayesian-Analysis-Chapman-Statistical-Science/dp/1439840954)'
  id: totrans-421
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*《贝叶斯数据分析》*，*第三版*，*Andrew Gelman*：[http://www.amazon.com/Bayesian-Analysis-Chapman-Statistical-Science/dp/1439840954](http://www.amazon.com/Bayesian-Analysis-Chapman-Statistical-Science/dp/1439840954)'
- en: '*The Bayesian Choice*, *Christian P Robert* (this is more theoretical): [http://www.springer.com/us/book/9780387952314](http://www.springer.com/us/book/9780387952314)'
  id: totrans-422
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*《贝叶斯选择》*，*Christian P Robert*（这本书更偏理论）：[http://www.springer.com/us/book/9780387952314](http://www.springer.com/us/book/9780387952314)'
- en: '*PyMC documentation*: [http://pymc-devs.github.io/pymc/index.html](http://pymc-devs.github.io/pymc/index.html)'
  id: totrans-423
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*PyMC文档*：[http://pymc-devs.github.io/pymc/index.html](http://pymc-devs.github.io/pymc/index.html)'
- en: Summary
  id: totrans-424
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we undertook a whirlwind tour of one of the hottest trends
    in statistics and data analysis in the past few years—the Bayesian approach to
    statistical inference. We covered a lot of ground here.
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中，我们对过去几年统计学和数据分析中最热门的趋势之一——贝叶斯统计推断方法进行了快速浏览。我们覆盖了许多内容。
- en: We examined what the Bayesian approach to statistics entails and discussed the
    various reasons why the Bayesian view is a compelling one, such as the fact that
    it values facts over belief. We explained the key statistical distributions and
    showed how we can use the various statistical packages to generate and plot them
    in `matplotlib`.
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: 我们讨论了贝叶斯统计方法的核心内容，并讨论了贝叶斯观点的多种吸引人的原因，比如它重视事实而非信仰。我们解释了关键的统计分布，并展示了如何使用各种统计包生成并在`matplotlib`中绘制它们。
- en: We tackled a rather difficult topic without too much oversimplification and
    demonstrated how we can use the `PyMC` package and Monte Carlo simulation methods
    to showcase the power of Bayesian statistics to formulate models, perform trend
    analysis, and make inferences on a real-world dataset (Facebook user posts). The
    concept of maximum likelihood estimation was also introduced and explained with
    several examples. It is a popular method for estimating distribution parameters
    and fitting a probability distribution to a given dataset.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在没有过度简化的情况下处理了一个相当复杂的话题，并展示了如何使用`PyMC`包和蒙特卡罗模拟方法，展示贝叶斯统计的强大功能，来制定模型、执行趋势分析并对真实世界数据集（Facebook用户帖子）进行推断。最大似然估计的概念也被介绍并通过多个示例进行了说明。它是一种用于估计分布参数并将概率分布拟合到给定数据集的流行方法。
- en: In the next chapter, we will discuss how we can solve real-life data case studies
    using pandas.
  id: totrans-428
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，我们将讨论如何使用pandas解决现实生活中的数据案例研究。
