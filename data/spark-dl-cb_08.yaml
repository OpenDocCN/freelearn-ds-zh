- en: Real Estate Value Prediction Using XGBoost
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用XGBoost进行房地产价值预测
- en: The real estate market is one of the most competitive markets when it comes
    to pricing. This tends to vary significantly based on a number of factors such
    as the location, age of the property, size, and so on. Therefore, it has become
    a modern-day challenge to accurately predict the prices of properties (especially
    those in the housing market) in order to make better investment decisions. This
    chapter will deal with precisely that.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 房地产市场是定价最具竞争力的市场之一。这往往会根据诸多因素而显著变化，如位置、物业年龄、大小等。因此，准确预测房地产价格（特别是房地产市场中的价格）已成为一个现代挑战，以便做出更好的投资决策。本章将处理这个问题。
- en: 'After going through this chapter, you will be able to:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 阅读完本章后，您将能够：
- en: Downloading the King County Housing sales dataset
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载金县房屋销售数据集
- en: Performing exploratory analysis and visualization
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进行探索性分析和可视化
- en: Plotting correlation between price and other features
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绘制价格与其他特征之间的相关性
- en: Predicting the price of a house
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预测房屋价格
- en: Downloading the King County House sales dataset
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载金县房屋销售数据集
- en: We can't build a model without a dataset.  We will download our data in this
    section.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在没有数据集的情况下，我们无法构建模型。我们将在本节中下载我们的数据。
- en: Getting ready
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Kaggle ([https://www.kaggle.com/](https://www.kaggle.com/)) is a platform for
    predictive modeling and analytics competitions in which statisticians and data
    miners compete to produce the best models for predicting and describing the datasets
    uploaded by companies and users. The King County House Sales dataset contains
    records of 21,613 houses sold in King County, New York between 1900 and 2015\.
    The dataset also contains 21 different variables such as location, zip code, number
    of bedrooms, area of the living space, and so on, for each house.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: Kaggle ([https://www.kaggle.com/](https://www.kaggle.com/))是一个用于预测建模和分析竞赛的平台，统计学家和数据挖掘者在这里竞争，以产生最佳的模型来预测和描述由公司和用户上传的数据集。金县房屋销售数据集包含了在1900年至2015年间在纽约金县出售的21,613套房屋的记录。数据集还包含了每套房屋的21个不同变量，如位置、邮政编码、卧室数量、生活空间面积等。
- en: How to do it...
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: The dataset can be accessed from the following website: [https://www.kaggle.com/harlfoxem/housesalesprediction](https://www.kaggle.com/harlfoxem/housesalesprediction). The
    dataset is from the public records of King County and is freely available to download
    and use in any analysis.
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以从以下网站访问数据集：[https://www.kaggle.com/harlfoxem/housesalesprediction](https://www.kaggle.com/harlfoxem/housesalesprediction)。数据集来自金县的公共记录，可以免费下载和在任何分析中使用。
- en: 'Once you arrive at the website, you can click on the Download button, as shown
    in the following screenshot:'
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您到达网站，您可以点击下载按钮，如下图所示：
- en: '![](img/00217.jpeg)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00217.jpeg)'
- en: King County House Sales Dataset
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 金县房屋销售数据集
- en: One file named `kc_house_data.csv` appears from the zipped, downloaded file,
    `housesalesprediction.zip`.
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从压缩下载的文件`housesalesprediction.zip`中出现一个名为`kc_house_data.csv`的文件。
- en: Save the file named `kc_house_data.csv` in the current working directory as
    this will be our dataset. This will be loaded into the IPython notebook for analysis
    and predictions.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将名为`kc_house_data.csv`的文件保存在当前工作目录中，因为这将是我们的数据集。这将被加载到IPython笔记本中进行分析和预测。
- en: How it works...
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'Install the necessary libraries for this chapter using the following code:'
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下代码安装本章所需的必要库：
- en: '[PRE0]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The preceding step should result in an output, as shown in the following screenshot:'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前面的步骤应该会产生一个输出，如下面的屏幕截图所示：
- en: '![](img/00218.jpeg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00218.jpeg)'
- en: 'It is always a good idea to check the current working directory and set it
    to the directory in which the dataset is stored. This is shown in the following
    screenshot:'
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查当前工作目录并将其设置为存储数据集的目录是一个好主意。如下图所示：
- en: '![](img/00219.jpeg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00219.jpeg)'
- en: In our case, the folder named `Chapter 10` is set as the current working directory.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的案例中，名为`Chapter 10`的文件夹被设置为当前工作目录。
- en: 'The data in the file is read into a Pandas dataframe named `dataframe` using
    the `read_csv()` function and the features/headers are listed out using the `list(dataframe)`
    command, as shown in the following screenshot:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`read_csv()`函数将文件中的数据读入名为`dataframe`的Pandas数据框中，并使用`list(dataframe)`命令列出特征/标题，如下图所示：
- en: '![](img/00220.jpeg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00220.jpeg)'
- en: As you may have noticed, the dataset contains 21 different variables such as
    id, date, price, bedrooms, bathrooms, and so on.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能已经注意到，数据集包含21个不同的变量，如id、日期、价格、卧室、浴室等。
- en: There's more...
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'The libraries used as well as their functions in this chapter are as follows:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中使用的库及其函数如下：
- en: '`Numpy`, which is used to wrangle data in the form of arrays as well as store
    lists of names in the form of arrays'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Numpy`，用于整理数组形式的数据以及以数组形式存储名称列表'
- en: '`Pandas`, which is used for all data wrangling and managing data in the form
    of dataframes'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Pandas`，用于所有数据整理和数据框形式的数据管理'
- en: '`Seaborn`, which is a visualization library required for exploratory analysis
    and plots'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Seaborn`，这是一种用于探索性分析和绘图的可视化库'
- en: '`MPL_Toolkits`, which contains a number of functions and dependencies required
    by `Matplotlib`'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MPL_Toolkits`，其中包含`Matplotlib`所需的许多函数和依赖项'
- en: Functions from the `Scikit Learn` library, which is the primary scientific and
    statistical library required in this chapter
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本章所需的主要科学和统计库`Scikit Learn`库中的函数
- en: We will also require some other libraries such as `XGBoost`, but those will
    be imported as required while building the model
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们还需要一些其他库，如`XGBoost`，但这些将在构建模型时根据需要导入。
- en: See also
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另请参阅
- en: 'Further documentation about the different libraries can be found by visiting
    the following links:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 有关不同库的更多文档可以通过访问以下链接找到：
- en: '[http://scikit-learn.org/stable/modules/preprocessing.html](http://scikit-learn.org/stable/modules/preprocessing.html)'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://scikit-learn.org/stable/modules/preprocessing.html](http://scikit-learn.org/stable/modules/preprocessing.html)'
- en: '[http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html](http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html)'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html](http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.RFE.html)'
- en: '[https://seaborn.pydata.org/](https://seaborn.pydata.org/)'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://seaborn.pydata.org/](https://seaborn.pydata.org/)'
- en: '[https://matplotlib.org/mpl_toolkits/index.html](https://matplotlib.org/mpl_toolkits/index.html)'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://matplotlib.org/mpl_toolkits/index.html](https://matplotlib.org/mpl_toolkits/index.html)'
- en: Performing exploratory analysis and visualization
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进行探索性分析和可视化
- en: In situations where the goal is to predict a variable such as `price`, it helps
    to visualize the data and figure out how the dependent variable is being influenced
    by other variables. The exploratory analysis gives a lot of insight which is not
    readily available by looking at the data. This section of the chapter will describe
    how to visualize and draw insights from big data.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在预测`price`等变量时，可视化数据并了解因变量受其他变量影响的方式有助于预测。探索性分析提供了许多数据中不容易获得的见解。本章的这一部分将描述如何从大数据中可视化并得出见解。
- en: Getting ready
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The head of the `dataframe` can be printed using the `dataframe.head()` function
    which produces an output, as shown in the following screenshot:'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以使用`dataframe.head()`函数打印`dataframe`的头部，产生如下屏幕截图所示的输出：
- en: '![](img/00221.jpeg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00221.jpeg)'
- en: 'Similarly, the tail of the `dataframe` can be printed using the `dataframe.tail()`
    function, which produces an output, as shown in the following screenshot:'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 同样，可以使用`dataframe.tail()`函数打印`dataframe`的尾部，产生如下屏幕截图所示的输出：
- en: '![](img/00222.jpeg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00222.jpeg)'
- en: 'The `dataframe.describe()` function is used to obtain some basic statistics
    such as the maximum, minimum, and mean values under each column. This is illustrated
    in the following screenshot:'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dataframe.describe()`函数用于获得一些基本统计数据，如每列的最大值、最小值和平均值。如下屏幕截图所示：'
- en: '![](img/00223.jpeg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00223.jpeg)'
- en: dataframe.describe() function output
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: dataframe.describe()函数输出
- en: As you can observe, the dataset has 21,613 records of houses sold between 1900
    and 2015.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正如您所看到的，数据集中有21,613条记录，记录了1900年至2015年间售出的房屋。
- en: On taking a closer look at the statistics, we realize that most houses sold
    have about three bedrooms on average. We can also see that the minimum number
    of bedrooms in a house is 0 and the largest house has 33 bedrooms and a living
    area of 13,540 square feet.
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仔细观察统计数据，我们意识到大多数售出的房屋平均有大约三间卧室。我们还可以看到房屋中卧室数量的最小值为0，最大的房屋有33间卧室，占地面积为13,540平方英尺。
- en: How to do it...
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做到...
- en: 'Let''s plot the count of bedrooms in the whole dataset to see how three bedroom
    houses stand compared to houses with two or one bedrooms. This is done using the
    following code:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们绘制整个数据集中卧室数量的计数，以了解三居室房屋与两居室或一居室房屋的情况。使用以下代码完成：
- en: '[PRE1]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We can also plot a pie chart of the same data using the following commands:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们也可以使用以下命令绘制相同数据的饼图：
- en: '[PRE2]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Next, let''s try to see the number of floors in houses that are sold most frequently
    in King County. This may be done by plotting a bar graph using the following commands:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，让我们尝试看看金县最常售出的房屋有多少层。这可以通过使用以下命令绘制条形图来完成：
- en: '[PRE3]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Next, we need to have an idea of what locations have the highest number of
    houses sold. We can do this by using the `latitude` and `longitude` variables
    from the dataset, as shown in the following code:'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要了解哪些地点售出的房屋数量最多。我们可以使用数据集中的`latitude`和`longitude`变量来做到这一点，如下代码所示：
- en: '[PRE4]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Let''s also take a look at how the prices compare for houses with different
    numbers of bedrooms by executing the following commands:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们也看看不同卧室数量的房屋价格如何相比，执行以下命令：
- en: '[PRE5]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'A plot of the price of houses versus the number of bedrooms is obtained using
    the following commands:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令获得房屋价格与卧室数量的图：
- en: '[PRE6]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Similarly, let''s see how the price compares to the living area of all the
    houses sold. This may be done by using the following commands:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 同样，让我们看看价格与所有售出房屋的居住面积的比较。这可以通过使用以下命令来完成：
- en: '[PRE7]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The condition of houses sold gives us some important information as well. Let''s
    plot this against the prices to get a better idea of the general trends. This
    is done using the following commands:'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 售出的房屋的条件也给了我们一些重要的信息。让我们将其与价格绘制在一起，以更好地了解一般趋势。使用以下命令完成：
- en: '[PRE8]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'We can see which zip codes have the most house sales in King County by using
    the following commands:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以使用以下命令查看哪些邮政编码在金县有最多的房屋销售：
- en: '[PRE9]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Finally, plot the grade of each house versus the price to figure out the trends
    in house sales based on the grade given to each house using the following commands:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，绘制每个房屋的等级与价格的关系，以了解基于每个房屋的等级的房屋销售趋势，使用以下命令：
- en: '[PRE10]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: How it works...
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工作原理...
- en: 'The plot of bedroom counts must give an output, as shown in the following screenshot:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 卧室数量的图必须给出输出，如下屏幕截图所示：
- en: '![](img/00224.jpeg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00224.jpeg)'
- en: It is evident that three bedroom houses are sold the most, followed by four
    bedroom houses, then by two bedroom houses, and then surprisingly by five bedroom
    and six bedroom houses.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 很明显，三居室的房屋销售最多，其次是四居室，然后是两居室，然后是令人惊讶的五居室和六居室。
- en: 'The pie chart of the number of bedrooms gives an output that looks like the
    following screenshot:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 卧室数量的饼图输出如下屏幕截图所示：
- en: '![](img/00225.jpeg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00225.jpeg)'
- en: You will notice that three bedroom houses account for roughly 50% of all houses
    sold in King County. It looks like about 25% are four bedroom houses and the remaining
    25% is made up of houses with two, five, six bedrooms, and so on.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您会注意到，三居室房屋大约占金县所有售出房屋的50%。大约25%是四居室房屋，其余25%由两居室、五居室、六居室等房屋组成。
- en: 'On running the script for most houses sold categorized by the number of floors,
    we notice the following output:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行脚本以查看按楼层分类的最常售出的房屋时，我们注意到以下输出：
- en: '![](img/00226.jpeg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00226.jpeg)'
- en: It is quite clear that single floor houses sell the most, followed by two-story
    houses. The count of houses with more than two stories is rather low, which is
    perhaps an indication of family sizes and the income of residents living in King
    County.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 很明显，单层房屋销售量最大，其次是两层房屋。超过两层的房屋数量相当少，这可能是家庭规模和居住在金县的居民收入的指示。
- en: 'On inspecting the density of houses sold at different locations, we obtain
    an output, as shown in the following screenshots. It is pretty clear that some
    locations see a higher density of house sales compared to others:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查不同位置出售房屋的密度后，我们得到了一个输出，如下面的屏幕截图所示。很明显，一些地方的房屋销售密度比其他地方要高：
- en: '![](img/00227.jpeg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00227.jpeg)'
- en: '![](img/00228.jpeg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00228.jpeg)'
- en: From the trends observed in the preceding figure, it is easy to notice how a
    greater number of houses are sold between latitudes -122.2 and -122.4\. Similarly,
    the density of houses sold between longitudes 47.5 and 47.8 is higher compared
    to other longitudes. This could perhaps be an indication of safer and better-living
    communities compared to the other communities.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从前述图表中观察到的趋势，很容易注意到在纬度-122.2和-122.4之间销售的房屋数量更多。同样，在经度47.5和47.8之间销售的房屋密度比其他经度更高。这可能是其他社区相比，更安全、更宜居社区的指示。
- en: 'On plotting the prices of houses versus the number of bedrooms in the house,
    we realize that the trends regarding the number of bedrooms in a house are directly
    proportional to the price up to six bedrooms, and then it becomes inversely proportional,
    as shown in the following screenshot:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在绘制房屋价格与房屋卧室数量的关系时，我们意识到房屋卧室数量与价格之间的趋势与价格成正比，直到六个卧室，然后变为反比，如下面的屏幕截图所示：
- en: '![](img/00229.jpeg)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00229.jpeg)'
- en: 'Plotting the living area of each house against the price gives us an expected
    trend of increasing prices with the increasing size of the house. The most expensive
    house seems to have a living area of 12,000 square feet, as shown in the following
    screenshot:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将每个房屋的居住面积与价格进行对比，我们发现价格随着房屋面积的增加而增加的趋势。最昂贵的房屋似乎有12000平方英尺的居住面积，如下面的屏幕截图所示：
- en: '![](img/00230.jpeg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00230.jpeg)'
- en: There's more...
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'On plotting the condition of houses versus price, we again notice an expected
    trend of increasing prices with higher condition ratings, as shown in the following
    screenshot. Interestingly, five bedroom prices have a lower mean price compared
    to four bedroom houses, which is possibly due to lesser buyers for such a big
    house:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在绘制房屋状况与价格的关系时，我们再次注意到了一个预期的趋势，即随着房屋状况评分的提高，价格也在增加，如下面的屏幕截图所示。有趣的是，五卧室房屋的平均价格比四卧室房屋要低，这可能是因为对这么大的房子的购买者较少：
- en: '![](img/00231.jpeg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00231.jpeg)'
- en: 'A plot of the Zipcode of the house versus price shows trends in the prices
    of houses in different zip codes. You may have noticed that certain zip codes,
    like the ones between 98100 and 98125, have a higher density of houses sold compared
    to other areas, while the prices of houses in zip codes like 98040 are higher
    than the average price, perhaps indicating a richer neighborhood, as shown in
    the following screenshot:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 房屋邮政编码与价格的图表显示了不同邮政编码地区房屋价格的趋势。您可能已经注意到，某些邮政编码，如98100至98125之间的邮政编码，比其他地区有更多的房屋销售密度，而98040邮政编码地区的房屋价格高于平均价格，可能表明这是一个更富裕的社区，如下面的屏幕截图所示：
- en: '![](img/00232.jpeg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00232.jpeg)'
- en: 'A plot of the grade of the house versus price shows a consistent increase in
    price with increasing grade. There seems to be a clear linear relationship between
    the two, as observed in the output of the following screenshots:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 房屋等级与价格的图表显示，随着等级的提高，价格呈一致增长的趋势。两者之间似乎存在明显的线性关系，如下面的屏幕截图所示：
- en: '![](img/00233.jpeg)![](img/00234.jpeg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00233.jpeg)![](img/00234.jpeg)'
- en: See also
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另请参阅
- en: 'The following links give a good explanation of why data visualization is so
    important before running any model on the data:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在对数据进行任何模型运行之前，以下链接很好地解释了为什么数据可视化如此重要：
- en: '[https://www.slideshare.net/Centerline_Digital/the-importance-of-data-visualization](https://www.slideshare.net/Centerline_Digital/the-importance-of-data-visualization)'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.slideshare.net/Centerline_Digital/the-importance-of-data-visualization](https://www.slideshare.net/Centerline_Digital/the-importance-of-data-visualization)'
- en: '[https://data-visualization.cioreview.com/cxoinsight/what-is-data-visualization-and-why-is-it-important-nid-11806-cid-163.html](https://data-visualization.cioreview.com/cxoinsight/what-is-data-visualization-and-why-is-it-important-nid-11806-cid-163.html)'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://data-visualization.cioreview.com/cxoinsight/what-is-data-visualization-and-why-is-it-important-nid-11806-cid-163.html](https://data-visualization.cioreview.com/cxoinsight/what-is-data-visualization-and-why-is-it-important-nid-11806-cid-163.html)'
- en: '[https://www.techchange.org/2015/05/19/data-visualization-analysis-international-development/](https://www.techchange.org/2015/05/19/data-visualization-analysis-international-development/)'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.techchange.org/2015/05/19/data-visualization-analysis-international-development/](https://www.techchange.org/2015/05/19/data-visualization-analysis-international-development/)'
- en: Plotting correlation between price and other features
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 绘制价格与其他特征之间的相关性
- en: Now that the initial exploratory analysis is done, we have a better idea of
    how the different variables are contributing to the price of each house. However,
    we have no idea of the importance of each variable when it comes to predicting
    prices. Since we have 21 variables, it becomes difficult to build models by incorporating
    all variables in one single model. Therefore, some variables may need to be discarded
    or neglected if they have lesser significance than other variables.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 现在初步的探索性分析已经完成，我们对不同变量如何影响每个房屋的价格有了更好的了解。然而，我们不知道每个变量在预测价格时的重要性。由于我们有21个变量，如果将所有变量合并到一个模型中，建模就会变得困难。因此，一些变量可能需要被丢弃或忽略，如果它们的重要性不如其他变量。
- en: Getting ready
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Correlation coefficients are used in statistics to measure how strong the relationship
    is between two variables. In particular, Pearson''s correlation coefficient is
    the most commonly used coefficient while performing linear regression. The correlation
    coefficient usually takes on a value between -1 and +1:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 相关系数在统计学中用于衡量两个变量之间的关系强度。特别是，在进行线性回归时，皮尔逊相关系数是最常用的系数。相关系数通常取-1到+1之间的值：
- en: A correlation coefficient of 1 means that for every positive increase in one
    variable, there is a positive increase of a fixed proportion in the other. For
    example, shoe sizes go up in (almost) perfect correlation with foot length.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相关系数为1意味着对于一个变量的正增加，另一个变量也会以固定比例正增加。例如，鞋子尺寸几乎与脚长完美相关。
- en: A correlation coefficient of -1 means that for every positive increase in one
    variable, there is a negative decrease of a fixed proportion in the other. For
    example, the amount of gas in a tank decreases in (almost) perfect correlation
    with acceleration or the gear mechanism (more gas is used up by traveling for
    longer periods in first gear compared to fourth gear).
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相关系数为-1意味着对于一个变量的正增加，另一个变量会以固定比例负减少。例如，油箱中的汽油量几乎与加速度或齿轮机构完美相关（在一档行驶的时间较长时，与四档相比，汽油的使用量减少）。
- en: Zero means that for every increase, there isn't a positive or negative increase.
    The two just aren't related.
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 零意味着对于每次增加，没有正面或负面的增加。两者之间没有关系。
- en: How to do it...
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Begin by dropping the `id` and `date` features from the dataset using the following
    commands. We will not be using them in our predictions as the ID variables are
    all unique and have no values in our analysis while the dates require a different
    function to handle them correctly. This is left as an exercise for the reader
    to do:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过使用以下命令从数据集中删除`id`和`date`特征开始。在我们的预测中，我们不会使用它们，因为ID变量都是唯一的，在我们的分析中没有价值，而日期需要使用不同的函数来正确处理它们。这留给读者自己练习：
- en: '[PRE11]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Copy the dependent variable (house prices, in this case) into a new `dataframe`
    using the following commands:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令将因变量（在本例中为房价）复制到新的`dataframe`中：
- en: '[PRE12]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The correlation between price and every other variable can be manually found
    using the following script:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 价格和其他每个变量之间的相关性可以通过以下脚本手动找到：
- en: '[PRE13]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Besides the preceding method, an easier way to find the correlation between
    one variable and all other variables (or columns) in a `dataframe` is done by
    using just one line in the following manner:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 除了前面的方法，还可以通过以下方式使用一个命令在一个`dataframe`中找到一个变量与所有其他变量（或列）之间的相关性：
- en: '`x_df.corr().iloc[:,-19]`'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '`x_df.corr().iloc[:,-19]`'
- en: 'The correlated variables may be plotted using the `seaborn` library and the
    following script:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 相关变量可以使用`seaborn`库和以下脚本绘制：
- en: '[PRE14]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: How it works...
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'After dropping the `id` and `date` variables, the new `dataframe`, which is
    named `x_df`, contains 19 variables or columns, as shown in the following screenshots.
    For the purposes of this book, only the first ten entries are printed out:'
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除`id`和`date`变量后，新的名为`x_df`的`dataframe`包含19个变量或列，如以下截图所示。对于本书的目的，只打印出前十个条目：
- en: '![](img/00235.jpeg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00235.jpeg)'
- en: First 10 entries of output
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 输出的前10个条目
- en: '![](img/00236.jpeg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00236.jpeg)'
- en: 'On creating a new `dataframe` with only the dependent variable (price), you
    will see an output as follows. This new `dataframe` is named `y_df`. Again, only
    the first ten entries of the price column are printed for illustration purposes:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个只包含因变量（价格）的新`dataframe`，您将看到以下输出。这个新的`dataframe`名为`y_df`。同样，为了说明，只打印价格列的前十个条目：
- en: '![](img/00237.jpeg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00237.jpeg)'
- en: 'The correlation between price and other variables is shown in the following
    screenshot:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 价格和其他变量之间的相关性显示在以下截图中：
- en: '![](img/00238.jpeg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00238.jpeg)'
- en: You may have noticed that the `sqft_living` variable is most highly correlated
    with the price and has a correlation coefficient of 0.702035\. The next most highly
    correlated variable is `grade`, with a correlation coefficient of 0.667434 followed
    by `sqft_above`, which has a correlation coefficient of 0.605567\. `Zipcode` is
    the least correlated variable with price and has a correlation coefficient of
    -0.053202.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可能已经注意到，`sqft_living`变量与价格的相关性最高，相关系数为0.702035。其次是`grade`，相关系数为0.667434，其次是`sqft_above`，相关系数为0.605567。`Zipcode`与价格的相关性最低，相关系数为-0.053202。
- en: There's more...
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'The correlation coefficients found using the simplified code gives the exact
    same values but also gives the correlation of price with itself, which turns out
    to be a value of 1.0000, as expected. This is illustrated in the following screenshot:'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用简化代码找到的相关系数给出了完全相同的值，但也给出了价格与自身的相关性，结果是1.0000，这是预期的。如以下截图所示：
- en: '![](img/00239.jpeg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00239.jpeg)'
- en: 'The coefficients of correlation plotted using the `seaborn` library are presented
    in the following screenshots. Note that price is on the x-axis for each plot:'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`seaborn`库绘制的相关系数在以下截图中呈现。请注意，每个图中价格都在x轴上：
- en: '![](img/00240.jpeg)![](img/00241.jpeg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00240.jpeg)![](img/00241.jpeg)'
- en: Plotting of coefficients of correlation
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 相关系数的绘制
- en: '![](img/00242.jpeg)![](img/00243.jpeg)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00242.jpeg)![](img/00243.jpeg)'
- en: '![](img/00244.jpeg)![](img/00245.jpeg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00244.jpeg)![](img/00245.jpeg)'
- en: '![](img/00246.jpeg)![](img/00247.jpeg)![](img/00248.jpeg)![](img/00249.jpeg)![](img/00250.jpeg)![](img/00251.jpeg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00246.jpeg)![](img/00247.jpeg)![](img/00248.jpeg)![](img/00249.jpeg)![](img/00250.jpeg)![](img/00251.jpeg)'
- en: '![](img/00252.jpeg)![](img/00253.jpeg)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00252.jpeg)![](img/00253.jpeg)'
- en: '![](img/00254.jpeg)![](img/00255.jpeg)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00254.jpeg)![](img/00255.jpeg)'
- en: '![](img/00256.jpeg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00256.jpeg)'
- en: See also
  id: totrans-146
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另请参阅
- en: 'The following links give an excellent explanation of Pearson''s correlation
    coefficient and how it is manually calculated:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 以下链接提供了对皮尔逊相关系数的出色解释以及如何手动计算它：
- en: '[https://en.wikipedia.org/wiki/Pearson_correlation_coefficient](https://en.wikipedia.org/wiki/Pearson_correlation_coefficient)'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://en.wikipedia.org/wiki/Pearson_correlation_coefficient](https://en.wikipedia.org/wiki/Pearson_correlation_coefficient)'
- en: '[http://www.statisticshowto.com/probability-and-statistics/correlation-coefficient-formula/](http://www.statisticshowto.com/probability-and-statistics/correlation-coefficient-formula/)'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.statisticshowto.com/probability-and-statistics/correlation-coefficient-formula/](http://www.statisticshowto.com/probability-and-statistics/correlation-coefficient-formula/)'
- en: Predicting the price of a house
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 预测房价
- en: This section will deal with building a simple linear model to predict house
    prices using all the features in the current `dataframe`. We will then evaluate
    the model and try to improve the accuracy by using a more complex model in the
    latter half of the section.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将使用当前`数据框`中的所有特征构建一个简单的线性模型来预测房价。然后，我们将评估模型，并尝试在本节的后半部分使用更复杂的模型来提高准确性。
- en: Getting ready
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Visit the following links to understand how linear regression works and how
    to use the linear regression model in the Scikit Learn library:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 访问以下链接以了解线性回归的工作原理以及如何在Scikit Learn库中使用线性回归模型：
- en: '[https://en.wikipedia.org/wiki/Linear_regression](https://en.wikipedia.org/wiki/Linear_regression)'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://en.wikipedia.org/wiki/Linear_regression](https://en.wikipedia.org/wiki/Linear_regression)'
- en: '[http://www.stat.yale.edu/Courses/1997-98/101/linreg.htm](http://www.stat.yale.edu/Courses/1997-98/101/linreg.htm)'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.stat.yale.edu/Courses/1997-98/101/linreg.htm](http://www.stat.yale.edu/Courses/1997-98/101/linreg.htm)'
- en: '[https://newonlinecourses.science.psu.edu/stat501/node/251/](https://newonlinecourses.science.psu.edu/stat501/node/251/)'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://newonlinecourses.science.psu.edu/stat501/node/251/](https://newonlinecourses.science.psu.edu/stat501/node/251/)'
- en: '[http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html)'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html)'
- en: '[http://scikit-learn.org/stable/modules/linear_model.html](http://scikit-learn.org/stable/modules/linear_model.html)'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://scikit-learn.org/stable/modules/linear_model.html](http://scikit-learn.org/stable/modules/linear_model.html)'
- en: How to do it...
  id: totrans-159
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Drop the `Price` column from the `x_df` dataframe and save it into a new `dataframe`
    named `x_df2` using the following script:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下脚本从`x_df`数据框中删除`Price`列，并将其保存到名为`x_df2`的新`数据框`中：
- en: '[PRE15]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Declare a variable named `reg` and equate it to the `LinearRegression()` function
    from the Scikit Learn library using the following script:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 声明一个名为`reg`的变量，并使用以下脚本将其等于Scikit Learn库中的`LinearRegression()`函数：
- en: '[PRE16]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Split the dataset into test and train using the following script:'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下脚本将数据集分割为测试集和训练集：
- en: '[PRE17]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Fit the model over the training set using the following script:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下脚本在训练集上拟合模型：
- en: '[PRE18]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Print the coefficients generated from applying linear regression to the training
    and test sets by using the `reg.coef_` command.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过使用`reg.coef_`命令打印应用线性回归到训练集和测试集生成的系数。
- en: 'Take a look at the column of predictions generated by the model using the following
    script:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下脚本生成的模型预测列进行查看：
- en: '[PRE19]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Print the accuracy of the model using the following command:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令打印模型的准确性：
- en: '[PRE20]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: How it works...
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'The output after fitting the regression model to the training sets must look
    like the following screenshot:'
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将回归模型拟合到训练集后的输出必须如下截屏所示：
- en: '![](img/00257.jpeg)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00257.jpeg)'
- en: 'The `reg.coeff_` command generates 18 coefficients, one for each variable in
    the dataset, as shown in the following screenshot:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`reg.coeff_`命令生成了18个系数，每个系数对应数据集中的一个变量，如下截屏所示：'
- en: '![](img/00258.jpeg)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00258.jpeg)'
- en: The coefficients of features/variables with the most positive values have a
    higher significance on price predictions when compared to the coefficients of
    features/variables which have negative values. This is the main importance of
    the regression coefficients.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 具有最正值的特征/变量的系数在价格预测中具有更高的重要性，与具有负值的特征/变量的系数相比。这是回归系数的主要重要性。
- en: 'On printing the predictions, you must see an output which is an array of values
    from 1 to 21,612, one value for each row in the dataset, as shown in the following
    screenshot:'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打印预测时，您必须看到一个输出，其中包含从1到21,612的值数组，数据集中的每一行都有一个值，如下截屏所示：
- en: '![](img/00259.jpeg)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00259.jpeg)'
- en: 'Finally, on printing the accuracy of the model, we obtained an accuracy of
    70.37%, which is not bad for a linear model. This is illustrated in the following
    screenshot:'
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，打印模型的准确性，我们获得了70.37%的准确性，对于线性模型来说并不差。如下截屏所示：
- en: '![](img/00260.jpeg)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00260.jpeg)'
- en: There's more...
  id: totrans-183
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'The linear model does alright at its first attempt, but if we want our model
    to be more accurate, we will have to use a more complex model with some non-linearities
    in order to fit well to all the data points. XGBoost is the model we will be using
    in this section in order to try and improve the accuracy obtained through linear
    regression. This is done in the following manner:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 线性模型在第一次尝试时表现不错，但如果我们希望模型更准确，我们将不得不使用一个带有一些非线性的更复杂模型，以便很好地拟合所有数据点。XGBoost是我们将在本节中使用的模型，以尝试通过线性回归提高准确性。这是以下方式完成的：
- en: Import the `XGBoost` library using the `import xgboost` command.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`import xgboost`命令导入`XGBoost`库。
- en: 'In case this produces an error, you will have to do a pip install of the library
    through the terminal. This can be done by opening up a new terminal window and
    issuing the following command:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果出现错误，您将不得不通过终端进行库的pip安装。这可以通过打开一个新的终端窗口并发出以下命令来完成：
- en: '[PRE21]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'At this stage, you must see an output which looks like the one shown in the
    following screenshot:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个阶段，您必须看到一个输出，其外观如下截屏所示：
- en: '![](img/00261.jpeg)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00261.jpeg)'
- en: 'At this stage, you will be prompted to enter your password. After homebrew
    is installed, you will see an output like the one shown in the following screenshot:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个阶段，您将被提示输入密码。安装Homebrew后，您将看到如下截屏所示的输出：
- en: '![](img/00262.jpeg)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00262.jpeg)'
- en: 'Next, install Python using the following command:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令安装Python：
- en: '`brew install python`'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '`brew install python`'
- en: Check your installation using the `brew doctor` command and follow homebrew's
    suggestions.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`brew doctor`命令检查您的安装并遵循homebrew的建议。
- en: 'Once `Homebrew` is installed, do a pip install of XGBoost using the following
    command:'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦安装了`Homebrew`，请使用以下命令pip安装XGBoost：
- en: '`pip install xgboost`'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '`pip install xgboost`'
- en: Once it finishes installing, you should be able to import XGBoost into the IPython
    environment.
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，您应该能够将XGBoost导入到IPython环境中。
- en: 'Once XGBoost is imported successfully into the Jupyter environment, you will
    be able to use the functions within the library to declare and store the model.
    This can be done in the following steps:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦XGBoost成功导入到Jupyter环境中，您就可以使用库中的函数声明和存储模型。可以按以下步骤完成：
- en: 'Declare a variable named `new_model` to store the model and declare all its
    hyperparameters using the following command:'
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 声明一个名为`new_model`的变量来存储模型，并使用以下命令声明所有超参数：
- en: '[PRE22]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The output of the preceding command must look like the one in the following
    screenshot:'
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 上述命令的输出必须看起来像以下截图中显示的那样：
- en: '![](img/00263.jpeg)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00263.jpeg)'
- en: 'Split the data into test and training sets and fit the new model to the split
    data using the following commands:'
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数据分割为测试集和训练集，并使用以下命令将新模型拟合到拆分数据中：
- en: '[PRE23]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'At this point, you will see an output like the one shown in the following screenshot:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这一点上，您将看到类似以下截图中显示的输出：
- en: '![](img/00264.jpeg)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00264.jpeg)'
- en: 'Finally, use the newly fitted model to predict the house prices and evaluate
    the new model using the following commands:'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，使用新拟合的模型预测房屋价格，并使用以下命令评估新模型：
- en: '[PRE24]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'On executing the preceding commands, you must see an output like the one shown
    in the following screenshot:'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行上述命令时，您必须看到类似以下截图中显示的输出：
- en: '![](img/00265.jpeg)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![](img/00265.jpeg)'
- en: Notice that the new model's accuracy is now 87.79 %, which is approximately
    88%. This is considered optimal.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请注意，新模型的准确性现在为87.79%，约为88%。这被认为是最佳的。
- en: In this case, the `number of estimators` is set to 750\. After experimenting
    between 100 to 1,000, it was determined that 750 estimators gave the most optimal
    accuracy. The `learning rate` is set to 0.09\. `Subsample rate` is set at 65%.
    `Max_depth` is set at 7\. There didn't seem to be too much influence of `max_depth`
    over the model's accuracy. However, the accuracy did show improvement in using
    slower learning rates. By experimenting with various hyperparameters, we were
    able to further improve accuracy to 89%.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这种情况下，`估计器数量`设置为750。在100到1,000之间进行实验后，确定750个估计器给出了最佳准确性。`学习率`设置为0.09。`子采样率`设置为65%。`最大深度`设置为7。`max_depth`对模型准确性似乎没有太大影响。然而，使用较慢的学习率确实提高了准确性。通过尝试各种超参数，我们能够进一步将准确性提高到89%。
- en: Future steps involve one hot encoding variables such as bedrooms, bathrooms,
    floors, zipcodes, and so on, and normalizing all the variables before model fitting.
    Try to tune the hyperparameters such as learning rate, number of estimators in
    the XGBoost model, subsampling rates, and so on to see how they influence model
    accuracy. This is left as an exercise for the reader.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 未来的步骤涉及对诸如卧室、浴室、楼层、邮政编码等变量进行独热编码，并在模型拟合之前对所有变量进行归一化。尝试调整超参数，如学习率、XGBoost模型中的估计器数量、子采样率等，以查看它们如何影响模型准确性。这留给读者作为练习。
- en: Also, you may want to try and use cross-validation along with XGBoost in order
    to figure out the optimal number of trees in the model, which would further improve
    accuracy.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，您可能希望尝试结合XGBoost和交叉验证，以找出模型中树的最佳数量，从而进一步提高准确性。
- en: Another exercise that can be done is using different sizes of test and train
    datasets as well as incorporating the `date` variable during training. In our
    case, we have split it into a ratio of 80% training data and 20% test data. Try
    to increase the test set to 40% and see how the model accuracy changes.
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以进行的另一个练习是使用不同大小的测试和训练数据集，以及在训练过程中合并`date`变量。在我们的情况下，我们将其分割为80%的训练数据和20%的测试数据。尝试将测试集增加到40%，看看模型准确性如何变化。
- en: See also
  id: totrans-216
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另请参阅
- en: 'Visit the following links to understand how to tune the hyperparameters in
    the XGBoost model as well as how to implement cross-validation with XGBoost:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 访问以下链接以了解如何调整XGBoost模型中的超参数以及如何在XGBoost中实现交叉验证：
- en: '[https://xgboost.readthedocs.io/en/latest/python/index.html](https://xgboost.readthedocs.io/en/latest/python/index.html)'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://xgboost.readthedocs.io/en/latest/python/index.html](https://xgboost.readthedocs.io/en/latest/python/index.html)'
- en: '[http://xgboost.readthedocs.io/en/latest/get_started/](http://xgboost.readthedocs.io/en/latest/get_started/)'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://xgboost.readthedocs.io/en/latest/get_started/](http://xgboost.readthedocs.io/en/latest/get_started/)'
- en: '[https://www.kaggle.com/cast42/xg-cv](https://www.kaggle.com/cast42/xg-cv)'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.kaggle.com/cast42/xg-cv](https://www.kaggle.com/cast42/xg-cv)'
