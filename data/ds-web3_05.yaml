- en: '5'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '5'
- en: Exploring Analytics on DeFi
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索DeFi分析
- en: 'There are two groups of products that drive the most transactions in the current
    state of Web3: NFTs, as we discussed in [*Chapter 4*](B19446_04.xhtml#_idTextAnchor145),
    and **decentralized finance** (**DeFi**), which we will explore in this chapter.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 当前Web3领域中，推动交易最多的有两类产品：我们在[*第四章*](B19446_04.xhtml#_idTextAnchor145)中讨论过的NFT，以及在本章中将深入探讨的**去中心化金融**（**DeFi**）。
- en: 'DeFi takes its name in opposition to the centralized characteristic of the
    current financial system. According to the book *How to DeFi: Beginner*, by CoinGecko,
    “*Decentralized Finance or DeFi is a movement that allows users to utilize financial
    services such as borrowing, lending, and trading without the need to rely on centralized
    entities.*” DeFi is not a single product but a series of projects trying to address
    financial demand in the Web3 space.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: DeFi这个名字来源于与当前金融系统的中心化特征相对立。根据CoinGecko的书籍《如何参与DeFi：初学者指南》，"*去中心化金融（DeFi）是一项允许用户利用金融服务，如借贷、借款和交易，而不依赖中心化实体的运动*。"
    DeFi并非单一的产品，而是一系列旨在满足Web3领域金融需求的项目。
- en: These projects make use of the concept of **composability**, which involves
    building upon parts created by other parties. It is often illustrated as building
    with Lego blocks, where developers combine various components to construct new
    infrastructures.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 这些项目利用了**可组合性**的概念，即在其他方创建的部分基础上进行构建。这个概念通常被形象地比喻为用乐高积木搭建，在这里开发者将不同的组件组合起来，构建新的基础设施。
- en: DeFi has introduced products that were once exclusive to central banks, such
    as the minting of new coins. Currently, some protocols enable the lending and
    borrowing of funds for a fee purely dependent on the liquidity of the pool and
    not external factors. These projects offer varying degrees of decentralization.
    For example, in the minting offer explained previously, we can encounter a stablecoin
    issued by a centralized entity named Tether or a decentralized option such as
    DAI, a protocol composed of a set of smart contracts with no central authority.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: DeFi引入了曾经是中央银行专属的产品，例如新币的铸造。目前，一些协议通过收取费用使资金的借贷和借款成为可能，这些费用完全依赖于池子的流动性，而非外部因素。这些项目提供不同程度的去中心化。例如，在之前提到的铸币服务中，我们可以遇到由一个名为Tether的中心化实体发行的稳定币，或一个去中心化的选项，如DAI，这是一个由一组智能合约组成、没有中央权威的协议。
- en: 'DeFi has also expanded its offerings to other native Web3 businesses, such
    as bridges between chains and flash loans. We will explain these in more detail
    in the subsequent sections:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: DeFi还扩展了它的产品范围，涵盖了其他原生Web3业务，如链间桥接和闪电贷款。我们将在后续部分详细解释这些内容：
- en: '![Figure 5.1 – Bank services and blockchain services](img/B19446_05_01.jpg)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.1 – 银行服务与区块链服务](img/B19446_05_01.jpg)'
- en: Figure 5.1 – Bank services and blockchain services
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.1 – 银行服务与区块链服务
- en: The disparities in financial services across the population are nothing new,
    and many of these DeFi projects aim to expand the reach of financial services
    wherever there is internet access. As Web3 analysts, we can leverage one of the
    main characteristics of Web3 – **transparency** – to unlock more value and help
    make these projects sustainable. Financial data that was traditionally limited
    to VIP analysts or released to the market at different times is now open for us
    to read, combine, and extract valuable insights to work on. Blockchain has democratized
    access; it is on us to learn how to read it and extract actionable insights.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 金融服务在不同人群中的差异并不新鲜，许多DeFi项目旨在扩大金融服务的覆盖面，凡是有互联网接入的地方，就可以实现这些服务。作为Web3分析师，我们可以利用Web3的主要特点之一——**透明性**——来解锁更多的价值，并帮助这些项目实现可持续发展。传统上只有VIP分析师能够接触到的金融数据，或者那些在不同时间释放到市场的数据，现在可以公开供我们阅读、结合并提取出有价值的洞察，供我们使用。区块链已经使信息获取变得民主化；剩下的任务是我们学习如何解读这些信息并提取出可操作的洞察。
- en: To generate value with our work, it is essential to understand not only the
    data generated but also the DeFi business flow. As we did in [*Chapter 4*](B19446_04.xhtml#_idTextAnchor145),
    we will delve into fundamental protocol metrics, offering quick insights into
    each protocol’s structure and user composition, but also those metrics that explain
    how a project generates revenue, reaches customers, deals with potential threats,
    and other relevant aspects.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 要通过我们的工作创造价值，理解不仅仅是生成的数据，还有DeFi的业务流程至关重要。就像我们在[*第四章*](B19446_04.xhtml#_idTextAnchor145)中做的那样，我们将深入探讨基础协议的指标，提供关于每个协议结构和用户组成的快速见解，同时还会讲解那些解释一个项目如何产生收入、吸引客户、应对潜在威胁以及其他相关方面的指标。
- en: 'In this chapter, we will explore the data structure and the business rationale
    of the following:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将探讨以下内容的数据结构和业务逻辑：
- en: ERC-20 tokens and stablecoins
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ERC-20 代币和稳定币
- en: DEXs and aggregators
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 去中心化交易所（DEX）和聚合器
- en: Lending and borrowing (with a comment on flash loans)
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 借贷（并附有关于闪电贷的评论）
- en: Bridges
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 桥接
- en: This list of products is not exhaustive of the DeFi space. There are many other
    offers, such as decentralized derivatives, insurance, governance, lotteries, and
    more.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 这份产品清单并未涵盖所有的去中心化金融（DeFi）领域。还有许多其他的产品，如去中心化衍生品、保险、治理、彩票等。
- en: Technical requirements
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: The technical requirements listed in [*Chapter 4*](B19446_04.xhtml#_idTextAnchor145)
    also apply to this chapter. We will be using indexed data available in SQL table
    services like **Dune Analytics**, **Increment**, and **Flipside**. To follow along,
    please open an account on any of these platforms by following the links provided
    in [*Chapter 2*](B19446_02.xhtml#_idTextAnchor073). Transactional data is queried
    with SQL services, and the syntax varies, depending on the query engines.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第 4 章*](B19446_04.xhtml#_idTextAnchor145)中列出的技术要求同样适用于本章。我们将使用 SQL 表格服务中的索引数据，如**Dune
    Analytics**、**Increment**和**Flipside**。为了跟进，请通过 [*第 2 章*](B19446_02.xhtml#_idTextAnchor073)中的链接，在这些平台中开设账户。交易数据通过
    SQL 服务查询，具体语法取决于查询引擎。'
- en: You can find Jupyter notebooks containing the examples discussed in this chapter
    in this book’s GitHub repository at [https://github.com/PacktPublishing/Data-Science-for-Web3/tree/main/Chapter05](https://github.com/PacktPublishing/Data-Science-for-Web3/tree/main/Chapter05).
    We recommend reading through the code files in the `Chapter05` folder to follow
    along.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在本书的 GitHub 仓库中找到包含本章讨论示例的 Jupyter 笔记本，地址为 [https://github.com/PacktPublishing/Data-Science-for-Web3/tree/main/Chapter05](https://github.com/PacktPublishing/Data-Science-for-Web3/tree/main/Chapter05)。我们建议阅读
    `Chapter05` 文件夹中的代码文件以跟进学习。
- en: Stablecoins and other tokens
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 稳定币和其他代币
- en: 'According to Coinbase, “*A stablecoin is a digital currency that is pegged
    to a “stable” reserve asset such as the US dollar or gold.*” Given that unpegged
    cryptocurrencies such as Bitcoin or Ethereum are so volatile, stablecoins have
    become a reliable medium of exchange. The main stablecoins, according to their
    market cap at the time of writing, are listed in *Figure 5**.2*:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 根据 Coinbase 的说法，“*稳定币是一种与‘稳定’储备资产（如美元或黄金）挂钩的数字货币*。” 由于比特币或以太坊等未挂钩的加密货币波动性较大，稳定币已成为可靠的交换媒介。根据撰写时的市值，主要的稳定币列在*图
    5.2*中：
- en: '![Figure 5.2 – Crypto panic stablecoins ranking](img/B19446_05_02.jpg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.2 – 加密货币恐慌稳定币排名](img/B19446_05_02.jpg)'
- en: Figure 5.2 – Crypto panic stablecoins ranking
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.2 – 加密货币恐慌稳定币排名
- en: Stablecoins are a specific category of tokens that are linked to the value of
    external assets, providing price stability. There are various types of stablecoins,
    including those whose value follows the value of a government-issued currency
    such as the US dollar (named fiat currencies), cryptocurrencies, and commodities
    such as gold. To maintain the “peg,” stablecoin teams have explored many paths.
    This can be seen in the “Mechanism” column in *Figure 5**.2*.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 稳定币是与外部资产的价值挂钩的特定类别代币，提供价格稳定性。稳定币有多种类型，包括那些价值与政府发行的货币（如美元，称为法定货币）、加密货币和商品（如黄金）挂钩的稳定币。为了保持“挂钩”，稳定币团队探索了多种路径。可以在*图
    5.2*中的“机制”一栏看到这一点。
- en: The main stablecoins are pegged to fiat (“fiat-backed”), meaning that the companies
    issuing such tokens only do so if they have the backup money deposited in financial
    institutions. Examples of such stablecoins are USDT and USDC.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 主要的稳定币是与法定货币挂钩（“法定支持”），意味着发行此类代币的公司只有在其存有备用资金的金融机构中时，才会发行这些代币。USDT 和 USDC 就是这样的稳定币的例子。
- en: Crypto-backed stablecoins rely on smart contract protocols that issue stablecoins
    backed by a basket of other cryptocurrencies. These protocols balance offer and
    demand to ensure price stability by controlling interest loan rates to influence
    buyers’ and borrowers’ behavior. The system is overcollateralized to ensure price
    stability when there is high volatility and mainly works as a lender system. The
    main example of this mechanism is the token named DAI. It is issued by MakerDAO
    and is currently backed by a mixture of centralized and decentralized assets,
    such as USDC, Ethereum, Wrapped Bitcoin, and others.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 加密货币支持的稳定币依赖于智能合约协议，这些协议发行由一篮子其他加密货币支持的稳定币。这些协议通过控制利率来平衡供需，从而确保价格稳定，并影响买卖双方的行为。系统通常是过度抵押的，以确保在高波动时价格稳定，主要作为借贷系统运作。此机制的主要例子是名为DAI的代币，它由MakerDAO发行，目前由一系列中心化和去中心化资产支持，如USDC、以太坊、包装比特币等。
- en: Stablecoins can be created to mirror the value of the cryptocurrencies supporting
    them or to mimic the value of a fiat currency. An example of the former is the
    **wrapped** version of an asset, often referred to as a “wrapped token,” which
    is a representation of an underlying asset, typically a cryptocurrency or digital
    asset, that has been tokenized and made compatible with a specific blockchain
    or network. The process of “wrapping” involves locking the original asset (for
    example, Bitcoin) on its native blockchain and then issuing the corresponding
    equivalent token on another blockchain, such as Ethereum. This is what happens
    with **Wrapped Bitcoin** (**WBTC**), which represents Bitcoin on the Ethereum
    blockchain, allowing Bitcoin to be used within the Ethereum ecosystem for decentralized
    applications, DeFi platforms, and other purposes.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 稳定币可以被创建以反映支持它们的加密货币的价值，或模仿法定货币的价值。前者的一个例子是**包装**版本的资产，通常称为“包装代币”，它是基础资产的表示，通常是加密货币或数字资产，已被代币化并使其与特定区块链或网络兼容。“包装”过程涉及将原始资产（例如，比特币）锁定在其原生区块链上，然后在另一个区块链上发行相应的等值代币，如以太坊。这就是**Wrapped
    Bitcoin**（**WBTC**）的运作方式，它在以太坊区块链上代表比特币，使得比特币能够在以太坊生态系统内用于去中心化应用、DeFi平台和其他目的。
- en: Even though non-stable tokens emerged historically before stablecoins, it is
    easier to understand the concept of a token by learning about stablecoins. A **token**
    is simply a representation of value on the blockchain and such value can be derived
    from any rationale. For instance, some tokens represent ownership in a particular
    project, access to services, or even serve as part of a meme or cultural movement.
    Notably, some tokens, such as Dogecoin, which started as a meme, have achieved
    significant market capitalization, demonstrating the diversity of tokens in the
    cryptocurrency space. Today, such a meme coin is the eighth cryptocurrency in
    the market cap.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管非稳定代币在历史上早于稳定币出现，但通过学习稳定币，更容易理解代币的概念。**代币**仅仅是区块链上的一种价值表示，这种价值可以来源于任何理由。例如，有些代币代表着对特定项目的所有权、服务的访问权限，甚至作为一种迷因或文化运动的一部分。值得注意的是，一些代币，如始于迷因的狗狗币，已经取得了显著的市值，展示了加密货币领域代币的多样性。如今，这种迷因币已经是市值排名第八的加密货币。
- en: Now that we know the business case, let's delve into the data structure.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解了业务案例，让我们深入探讨数据结构。
- en: Understanding tokens, native assets, and the ERC-20 data structure
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 了解代币、原生资产以及ERC-20数据结构
- en: Cryptocurrency serves as the native asset of a blockchain, such as BTC in the
    Bitcoin chain, ETH in the Ethereum chain, and RBTC on the Rootstock chain. Its
    primary function is often to pay transaction fees on the network (gas fees) and
    incentivize validators/nodes to maintain the security of the cryptocurrency’s
    network.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 加密货币作为区块链的原生资产，如比特币链中的BTC、以太坊链中的ETH和Rootstock链中的RBTC。其主要功能通常是支付网络上的交易费用（gas费用），并激励验证者/节点维持加密货币网络的安全性。
- en: In contrast, tokens are created over an existing blockchain and are not native
    to the blockchain itself. Stablecoins, pool tokens, and all ERC-20 tokens in the
    Ethereum ecosystem are examples of tokens.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 相比之下，代币是在现有区块链上创建的，并不是区块链本身的原生资产。稳定币、池代币以及以太坊生态系统中的所有ERC-20代币都是代币的例子。
- en: To build tokens, developers utilize the ERC-20 standard and its subsequent evolutions,
    which introduces a standard for functional tokens and ensures their fungibility.
    Recall that fungible refers to assets or tokens that are identical in value and
    can be exchanged on a one-to-one basis, with no distinction between individual
    units of the same type. The ERC-20 standard was initially introduced in 2015 and
    gained official recognition through an **Ethereum Improvement Proposal** (**EIP**)
    authored by Ethereum founder Vitalik Buterin and Ethereum developer Fabian Vogelsteller
    in 2017.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 开发者利用ERC-20标准及其后续演进来构建代币，该标准为功能性代币提供了标准化框架，并确保它们的可替代性。回顾一下，可替代性是指资产或代币在价值上相同，可以一对一交换，且同类型的代币单位之间没有区别。ERC-20标准最初于2015年推出，并在2017年通过以太坊创始人Vitalik
    Buterin和以太坊开发者Fabian Vogelsteller撰写的**以太坊改进提案**（**EIP**）获得官方认可。
- en: The smart contract that follows those methods and events is called ERC-20-compliant
    and is the contract that will maintain the registry of the tokens emitted, which
    is why it is very relevant for the analyst to learn about its basic characteristics.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 跟随这些方法和事件的智能合约被称为ERC-20兼容合约，它将维护已发出代币的注册信息，因此分析师了解其基本特征非常重要。
- en: 'The function methods we will encounter are as follows:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将遇到的函数方法如下：
- en: '`totalSupply()`: To return the total supply of tokens in the contract.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`totalSupply()`: 返回合约中的代币总供应量。'
- en: '`balanceOf()`: To read the address balance.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`balanceOf()`: 用于读取地址余额。'
- en: '`transfer()`: To transfer tokens from the sender’s account to another.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transfer()`: 将代币从发送者的账户转移到另一个账户。'
- en: '`transferFrom()`: To spend an allowance. This is a function that’s called by
    the spender that implies two operations – that is, transferring the amount being
    spent and reducing the allowance by such an amount.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transferFrom()`: 用于消耗授权额度。该函数由支出者调用，意味着进行两个操作——即转账支出的金额并减少相应的授权额度。'
- en: '`approve()`: To allow the spender to withdraw from the token owner''s account
    multiple times, up to the approved value amount.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`approve()`: 允许支出者从代币持有者账户中多次提取资金，最多为授权的金额。'
- en: '`allowance()`: To return the amount allowed for withdrawal from the token owner’s
    account.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`allowance()`: 返回代币持有者账户中允许提取的金额。'
- en: 'It is possible to find the `mint` and `burn` functions, which modify the total
    supply of tokens according to a specific business logic. Here are some optional
    functions:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 可以找到`mint`和`burn`函数，它们根据特定的业务逻辑修改代币的总供应量。以下是一些可选的函数：
- en: '`name()`: Returns the name of the token'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name()`: 返回代币的名称'
- en: '`symbol()`: Returns the symbol of the token'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`symbol()`: 返回代币的符号。'
- en: '`decimals()`: Returns the number of decimals the token uses'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`decimals()`: 返回代币使用的十进制位数。'
- en: 'Here are some important events:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一些重要的事件：
- en: '`transfer`: This event is triggered by the `transfer()`function. The same considerations
    explained in [*Chapter 4*](B19446_04.xhtml#_idTextAnchor145) regarding minting
    and burning apply, if a transfer originates “from” an address such as `0x0000,`
    we can interpret this as a minting event. If this address or `0x000dEad` is found
    in the `to` part of the transaction, it can be considered a burning transfer.
    Minting signifies their creation while burning means they are sent to an unrecoverable
    address, removing them from circulation. The function’s hash is `0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df5``23b3ef`.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transfer`: 该事件由`transfer()`函数触发。关于铸造和销毁的相同考虑适用于[*第4章*](B19446_04.xhtml#_idTextAnchor145)，如果转账来源地址为`0x0000,`，我们可以将其解释为铸造事件。如果该地址或`0x000dEad`出现在交易的`to`部分，则可以视为销毁转账。铸造意味着代币的创建，而销毁则意味着将代币发送到不可恢复的地址，将其从流通中移除。该函数的哈希值为`0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df5``23b3ef`。'
- en: '`approval`: This event is triggered by the `approve()` function with the allowance
    value and the spender address.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`approval`: 该事件由`approve()`函数触发，包含授权值和支出者地址。'
- en: Hands-on example
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实际操作示例
- en: Now that we know the basics, let’s go to the Jupyter notebook (`Chapter05/Stablecoins.ipynb`)
    where we will connect to the DAI contract (`0x6B175474E89094C44Da98b954EedeAC495271d0F`)
    and extract the public view information.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们了解了基础知识，接下来进入Jupyter notebook（`Chapter05/Stablecoins.ipynb`），在其中我们将连接到DAI合约（`0x6B175474E89094C44Da98b954EedeAC495271d0F`）并提取公共视图信息。
- en: A **view** function means that it does not change the state data, so it can
    be executed on a single node instead of having every node in the blockchain run
    it. This kind of function does not generate a transaction and does not cost gas.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '**视图**函数意味着它不会改变状态数据，因此可以在单个节点上执行，而不需要每个区块链节点都运行它。这种函数不会生成交易，也不会消耗 Gas。'
- en: 'To inspect the DAI contract, we will use DAI’s ABI, which can be found in this
    book’s repository. Let’s start by extracting the balance of a certain address
    with the following code snippet:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 要检查 DAI 合约，我们将使用 DAI 的 ABI，它可以在本书的仓库中找到。首先，使用以下代码片段提取某个地址的余额：
- en: '[PRE0]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The relevant ERC-20 events are stored in the transaction logs. Let’s analyze
    the `0x2a9317882853dc5e0193a76dab76b29e4dc8045718af7925d8d166cdb0eec637` transaction,
    which involves a transfer of 120 DAIs between two addresses:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 相关的 ERC-20 事件存储在交易日志中。让我们分析 `0x2a9317882853dc5e0193a76dab76b29e4dc8045718af7925d8d166cdb0eec637`
    交易，该交易涉及两地址之间转账 120 DAI：
- en: '![Figure 5.3 – DAI transfer transaction (source: https://etherscan.io/tx/0x2a9317882853dc5e0193a76dab76b29e4dc8045718af7925d8d166cdb0eec637)](img/B19446_05_03.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.3 – DAI 转账交易（来源：https://etherscan.io/tx/0x2a9317882853dc5e0193a76dab76b29e4dc8045718af7925d8d166cdb0eec637）](img/B19446_05_03.jpg)'
- en: 'Figure 5.3 – DAI transfer transaction (source: https://etherscan.io/tx/0x2a9317882853dc5e0193a76dab76b29e4dc8045718af7925d8d166cdb0eec637)'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.3 – DAI 转账交易（来源：https://etherscan.io/tx/0x2a9317882853dc5e0193a76dab76b29e4dc8045718af7925d8d166cdb0eec637）
- en: 'If we search for the transaction logs, we’ll receive the following information:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们搜索交易日志，我们将获得以下信息：
- en: '![Figure 5.4 – DAI transfer transaction logs (source: https://etherscan.io/tx/0x2a9317882853dc5e0193a76dab76b29e4dc8045718af7925d8d166cdb0eec637)](img/B19446_05_04.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.4 – DAI 转账交易日志（来源：https://etherscan.io/tx/0x2a9317882853dc5e0193a76dab76b29e4dc8045718af7925d8d166cdb0eec637）](img/B19446_05_04.jpg)'
- en: 'Figure 5.4 – DAI transfer transaction logs (source: https://etherscan.io/tx/0x2a9317882853dc5e0193a76dab76b29e4dc8045718af7925d8d166cdb0eec637)'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.4 – DAI 转账交易日志（来源：https://etherscan.io/tx/0x2a9317882853dc5e0193a76dab76b29e4dc8045718af7925d8d166cdb0eec637）
- en: The data we can see here is within the Ethereum `0x6b175474e89094c44da98b954eedeac495271d0f`.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里看到的数据属于以太坊`0x6b175474e89094c44da98b954eedeac495271d0f`。
- en: 'The raw log structure looks like this:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 原始日志结构如下所示：
- en: '| Event name or Topic [0] | Transfer (or `0xddf252ad1be2c89b69c2b068fc 378daa952ba7f163c4a11628f55a``4df523b3ef`)
    |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| 事件名称或主题 [0] | 转账（或`0xddf252ad1be2c89b69c2b068fc 378daa952ba7f163c4a11628f55a``4df523b3ef`）|'
- en: '| From - Topic [1] | `0xc6DA6f76a389Df871fffad8bb5049cbcF6b7015F` |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| 来源 - 主题 [1] | `0xc6DA6f76a389Df871fffad8bb5049cbcF6b7015F` |'
- en: '| To - Topic [2] | `0x762EcaaF67097b3eb66a9a6904f42b835b52DC15` |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| 目标 - 主题 [2] | `0x762EcaaF67097b3eb66a9a6904f42b835b52DC15` |'
- en: '| wad - Topic [3] | `0x0000000000000000000000000000000000000000000000068155a43676e00000`
    (or `120000000000000000000`) |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| wad - 主题 [3] | `0x0000000000000000000000000000000000000000000000068155a43676e00000`（或
    `120000000000000000000`）|'
- en: Table 5.1 – The raw log structure
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 表 5.1 – 原始日志结构
- en: A **wad** is a decimal number with 18 digits of precision that is represented
    as an integer. In this transaction, it represents the number of tokens transacted,
    which is 120\. If we paste the wad value in a hexadecimal-to-decimal converter
    such as the one at [https://www.rapidtables.com/convert/number/hex-to-decimal.xhtml](https://www.rapidtables.com/convert/number/hex-to-decimal.xhtml),
    it will show the decimal representation with 18 digits.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '**wad** 是一个具有 18 位精度的十进制数字，它被表示为整数。在此交易中，它表示转账的代币数量，即 120。如果我们将 wad 值粘贴到一个十六进制到十进制的转换器中，如
    [https://www.rapidtables.com/convert/number/hex-to-decimal.xhtml](https://www.rapidtables.com/convert/number/hex-to-decimal.xhtml)，它将显示带有
    18 位数字的十进制表示。'
- en: All the data suppliers we studied in [*Chapter 2*](B19446_02.xhtml#_idTextAnchor073)
    have special tables that store transaction logs with varying levels of preprocessing.
    The most basic versions are the raw logs to more filtered versions, which display
    only ERC 20 token transfers and the prices of the tokens at the time of the transfer.
    One example is Flipside, which has a specific table named `core__fact_token_transfers`
    that contains all the events on the Ethereum blockchain with the name `'Transfer'`;
    that refers to a token address. Similarly, Dune Analytics spells enable a similar
    table named `erc20_ethereum.evt_Transfer`, and Increment has a model named `token
    balance`.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 我们研究的所有数据供应商在 [*第二章*](B19446_02.xhtml#_idTextAnchor073) 中都有特殊的表格，用于存储具有不同预处理级别的交易日志。最基本的版本是原始日志，经过更多筛选的版本只显示
    ERC 20 代币转账和转账时代币的价格。其中一个例子是 Flipside，它有一个名为 `core__fact_token_transfers` 的特定表格，包含以
    `'Transfer'` 为名称的所有以太坊区块链事件；这指代代币地址。类似地，Dune Analytics 也提供了一个类似的表格，名为 `erc20_ethereum.evt_Transfer`，Increment
    有一个名为 `token balance` 的模型。
- en: 'By aggregating this data, we can derive a wide variety of metrics. Let’s see
    the calculation of the DAI current supply by leveraging the `erc20_ethereum.evt_Transfer`
    table:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 通过聚合这些数据，我们可以得出各种各样的指标。让我们通过利用 `erc20_ethereum.evt_Transfer` 表格来看一下 DAI 当前供应量的计算：
- en: '[PRE1]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'In this query, we calculate the DAI current supply by aggregating the transfers
    within the DAI contract address. Here, we do the following:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个查询中，我们通过聚合 DAI 合约地址内的转账来计算 DAI 当前的供应量。这里，我们执行以下操作：
- en: The query uses a `current_supply` to structure the data.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查询使用 `current_supply` 来构建数据。
- en: The first part of the CTE calculates the total supply increase by summing the
    transferred amounts (converted from wei to DAI), where DAI is transferred *from*
    the zero address (`0x0000000000000000000000000000000000000000`). This represents
    the creation of new DAI tokens.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CTE 的第一部分通过将转移的金额（从 wei 转换为 DAI）相加来计算总供应量的增加，其中 DAI 被转移 *从* 零地址（`0x0000000000000000000000000000000000000000`）。这代表了新
    DAI 代币的创建。
- en: The second part of the CTE calculates the total supply decrease by summing the
    transferred amounts (also converted from wei to DAI), where DAI is transferred
    *to* the zero address. This represents the burning or removal of DAI tokens from
    circulation.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CTE 的第二部分通过将转移的金额（也从 wei 转换为 DAI）相加来计算总供应量的减少，其中 DAI 被转移 *到* 零地址。这代表了 DAI 代币的销毁或从流通中移除。
- en: The main query then calculates the final total supply by subtracting the total
    supply decrease from the total supply increase (that is, supply increase – supply
    decrease).
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主查询通过将总供应量的减少从总供应量的增加中减去（即供应增加 - 供应减少）来计算最终的总供应量。
- en: The result is divided by 1,000,000,000 to convert it into a billion DAI.
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 结果除以 1,000,000,000 以将其转换为十亿 DAI。
- en: In summary, this query finds the net change in the total supply of DAI tokens
    by taking into account both minting and burning transactions and then converting
    the result to a billion DAI.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，这个查询通过考虑铸造和销毁交易，计算 DAI 代币总供应量的净变化，然后将结果转换为十亿 DAI。
- en: 'We propose an additional metrics logic in the following dashboard: [https://dune.com/gabriela/dai-cockpit](https://dune.com/gabriela/dai-cockpit).
    Additionally, there is a great open source stablecoin dashboard available at https://dune.com/hagaetc/stablecoins.'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在以下仪表盘中提出了额外的指标逻辑：[https://dune.com/gabriela/dai-cockpit](https://dune.com/gabriela/dai-cockpit)。此外，还有一个很棒的开源稳定币仪表盘，网址是
    https://dune.com/hagaetc/stablecoins。
- en: This same analysis can be applied to any ERC-20 token; it’s not necessarily
    limited to stablecoins. For instance, if we take the MKR token as an example,
    an excellent open source dashboard can be found at [https://dune.com/livethelife/mkr](https://dune.com/livethelife/mkr).
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 这个相同的分析可以应用于任何 ERC-20 代币；它不仅限于稳定币。例如，如果我们以 MKR 代币为例，可以在 [https://dune.com/livethelife/mkr](https://dune.com/livethelife/mkr)
    找到一个出色的开源仪表盘。
- en: A pivotal aspect of ERC-20 tokens is their seamless interchangeability within
    the Ethereum network. This characteristic of ERC-20 tokens plays a crucial role
    in the operation of **decentralized exchanges** (**DEXs**). DEXs leverage the
    ERC-20 standard to provide users with the ability to trade a myriad of tokens
    directly from their wallets, without the need for intermediaries. This connection
    between ERC-20 tokens and DEXs forms the cornerstone of the DeFi space, empowering
    users to trade, invest, and participate in financial activities.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: ERC-20代币的一个关键特点是它们在以太坊网络中可以无缝互换。这一特点在**去中心化交易所**（**DEX**）的运行中发挥着重要作用。DEX利用ERC-20标准，允许用户直接从他们的钱包中交易各种代币，无需中介。ERC-20代币与DEX之间的联系构成了去中心化金融（DeFi）空间的基石，使用户能够进行交易、投资并参与金融活动。
- en: Understanding DEX
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解DEX
- en: 'Cryptocurrencies can be exchanged through various methods, including **peer-to-peer**
    (**P2P**) trading, **centralized exchanges** (**CEXs**), and DEXs. Each method
    has its advantages and characteristics:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 加密货币可以通过多种方式进行交换，包括**点对点**（**P2P**）交易、**中心化交易所**（**CEX**）和DEX。每种方式都有其优势和特点：
- en: '**P2P**: In this method, two parties directly buy and sell cryptocurrencies
    among themselves without intermediaries. It prioritizes privacy and enables a
    wide range of payment options, making it accessible to users worldwide. However,
    to ensure the completion of the transfer, certain players have appeared that may
    act as intermediaries for a small fee, such as escrow services, rating platforms,
    or dispute resolution services.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**P2P**：在这种方式中，双方直接在彼此之间买卖加密货币，不涉及中介。它优先考虑隐私，并且提供多种支付选项，使全球用户都能使用。然而，为了确保交易的完成，出现了一些角色，他们可能作为中介收取少量费用，例如托管服务、评价平台或争议解决服务。'
- en: '**CEX**: This method offers cryptocurrency exchange services to users who have
    an account on their platform. It primarily matches buyers with sellers using an
    order book, where market makers and takers place their orders. The CEX’s revenue
    is generated through transaction fees on each facilitated trade. Major CEXs include
    Binance, OKX, Coinbase, and Crypto.com. The CEX also verifies the identity of
    each person opening an account, following the regulations of the relevant country.
    These exchanges are user-friendly and offer liquidity and a wide range of trading
    pairs. They generally act as the entry point for many users starting in crypto.
    The term “centralized” refers to the exchange’s control over the funds exchanged
    within it. This has several implications: as users are not in custody of their
    assets, if the CEX is attacked or becomes insolvent for any reason (such as a
    bank run), there is a risk of losing funds.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**CEX**：该方式为在其平台上拥有账户的用户提供加密货币交换服务。它主要通过订单簿匹配买家和卖家，市场做市商和交易者在其中下单。CEX通过每笔交易收取交易费用来获得收入。主要的CEX包括Binance、OKX、Coinbase和Crypto.com。CEX还会验证每个开户人的身份，遵循相关国家的法规。这些交易所用户友好，提供流动性和丰富的交易对。它们通常是许多进入加密市场用户的起点。“中心化”一词指的是交易所对其中交换的资金的控制。这有几个含义：由于用户并不掌管自己的资产，如果CEX遭到攻击或因任何原因（如银行挤兑）破产，就有资金丧失的风险。'
- en: '**DEX**: A DEX operates through smart contracts without the involvement of
    third-party entities and prioritizes user control, privacy, and security. It allows
    users to exchange assets while keeping control of their funds in their wallets
    until the trade is completed. DEXs have gained popularity and, during the 2021
    bull run, surpassed the amount of money traded in CEXs. However, liquidity on
    DEXs is often lower compared to CEXs.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DEX**：DEX通过智能合约运行，不涉及第三方实体，优先考虑用户控制、隐私和安全性。它允许用户在交易完成之前，保持对钱包中资金的控制，从而进行资产交换。DEX在加密市场中越来越受欢迎，在2021年牛市中，其交易量甚至超过了CEX。然而，相比CEX，DEX的流动性通常较低。'
- en: 'Now, let’s analyze some characteristics of DEXs further:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们进一步分析一下DEX的一些特点：
- en: '**Custody of funds**: Users do not delegate the custody of their funds to a
    third party.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**资产托管**：用户不将资产托管给第三方。'
- en: '**No identification required**: Users can freely interact with a DEX without
    the need for any form of identification. All that is required is an address to
    connect to the DEX.'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无需身份验证**：用户可以自由地与去中心化交易所（DEX）互动，无需任何形式的身份验证。所需的仅仅是一个地址来连接到DEX。'
- en: '**High gas fees**: DEX transactions often incur higher gas fees on the blockchain
    compared to CEX trades.'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高额的矿工费**：与CEX交易相比，DEX交易通常会产生更高的区块链矿工费。'
- en: '**Liquidity problems and slippage**: Slippage refers to the difference between
    the expected price of an asset and the actual price at which the trade is executed.
    As liquidity is provided by users rather than a centralized entity, the size of
    a trade can impact the asset’s price. When a large trade is executed, it may cause
    the price to move unfavorably, resulting in slippage. This means the trader ends
    up paying a slightly higher price when buying or receiving a slightly lower price
    when selling than what they anticipated. Slippage is a reality in DeFi trading,
    especially in less liquid markets.'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**流动性问题与滑点**：滑点是指资产的预期价格与交易执行时实际价格之间的差异。由于流动性由用户提供而非集中式实体，交易的大小可能会影响资产的价格。当大宗交易执行时，它可能导致价格朝不利方向波动，从而导致滑点。这意味着交易者在购买时支付的价格稍微高于预期，或在卖出时收到的价格稍微低于预期。滑点是去中心化金融（DeFi）交易中的现实，尤其是在流动性较差的市场中。'
- en: '**Impermanent loss**: This is a potential risk that’s faced by liquidity providers
    in **automated market maker** (**AMM**) platforms. When a liquidity provider adds
    funds to a liquidity pool, they contribute assets to be traded on the platform.
    As trades occur, the relative value of the assets in the pool can change due to
    market fluctuations. If the price of one asset in the pool moves significantly
    compared to the other asset, the liquidity provider may experience an impermanent
    loss. This loss is “impermanent” because it only materializes if the liquidity
    provider decides to withdraw their funds from the pool.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无常损失**：这是流动性提供者在**自动化市场制造商**（**AMM**）平台中面临的潜在风险。当流动性提供者向流动性池中添加资金时，他们贡献了用于在平台上交易的资产。随着交易的进行，池中资产的相对价值可能会因市场波动而变化。如果池中某一资产的价格相对于另一资产发生显著变化，流动性提供者可能会经历无常损失。这种损失是“无常的”，因为只有当流动性提供者决定从池中提取资金时，它才会真正体现。'
- en: '**Complex user experience and learning curve**: Interacting with DEX protocols
    can still be challenging for DeFi users, and the overall user experience may require
    improvement. Concepts such as slippage or impermanent loss still affect the trading
    experience.'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**复杂的用户体验与学习曲线**：与 DEX 协议的交互对于 DeFi 用户来说仍然具有挑战性，整体用户体验可能需要改进。诸如滑点或无常损失等概念仍然会影响交易体验。'
- en: '**Bugs and exploits**: Like any smart contract-based system, DEXs may be susceptible
    to bugs and security exploits.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**漏洞与利用**：与任何基于智能合约的系统一样，DEX 也可能容易受到漏洞和安全利用的影响。'
- en: To analyze the analytics of a DEX, we need to understand where the liquidity
    is locked, how trading pairs are organized, and how the smart contract generates
    revenue. This way, we will be able to approach the relevant smart contract swiftly.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 要分析一个 DEX 的分析数据，我们需要理解流动性锁定的位置、交易对是如何组织的，以及智能合约是如何生成收益的。这样，我们就能迅速接近相关的智能合约。
- en: Hands-on example – pools and AMM
  id: totrans-95
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实际操作示例 – 流动性池与AMM
- en: 'To understand DEXs, two important concepts need to be introduced: liquidity
    pools and AMM. DEXs use liquidity pools and AMM to facilitate trading activity,
    also known as **swaps**.'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解去中心化交易所（DEX），需要引入两个重要概念：流动性池和AMM。DEX 使用流动性池和AMM来促进交易活动，也称为**交换**。
- en: '**Liquidity pools** are token reserves that enable the user to exchange tokens
    with it. Anyone can open a pool by providing the necessary funds and without the
    need to seek permission from any central authority. The liquidity is allocated
    within a curve price and an algorithm places the bids and asks to execute the
    swaps. Chainlink defines **AMMs** as “*algorithmic “money robots” to make it easy
    for individual traders to buy and sell crypto assets. Instead of trading directly
    with other people as with a traditional order book, users trade directly through*
    *the AMM.*”'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '**流动性池**是允许用户与其交换代币的代币储备。任何人都可以通过提供必要的资金来开设一个池，而无需寻求任何中央权威的许可。流动性在曲线价格中进行分配，算法根据该曲线放置买单和卖单以执行交换。Chainlink
    将**AMM**定义为“*算法化的‘货币机器人’，让个人交易者轻松买卖加密资产。与传统订单簿直接与其他人交易不同，用户通过* *AMM*直接进行交易*。”'
- en: 'One prominent DEX is **Uniswap**, which uses liquidity pools and AMM. The landing
    page looks as follows:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 一个突出的去中心化交易所（DEX）是**Uniswap**，它使用流动性池和AMM。其登录页面如下所示：
- en: '![Figure 5.5 – The home page of Uniswap (source: https://app.uniswap.org/#/swap)](img/B19446_05_05.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.5 – Uniswap 的首页（来源：https://app.uniswap.org/#/swap）](img/B19446_05_05.jpg)'
- en: 'Figure 5.5 – The home page of Uniswap (source: https://app.uniswap.org/#/swap)'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.5 – Uniswap 的首页（来源：https://app.uniswap.org/#/swap）
- en: 'Uniswap has a pool dashboard at [https://info.uniswap.org/#/pools](https://info.uniswap.org/#/pools)
    that contains some basic analytics of the active liquidity pools. At the time
    of writing, the first pool in **TVL** and **Volume** is the USDC/ETH pair (https://info.uniswap.org/#/pools/0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640):'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: Uniswap有一个池仪表盘，网址为[https://info.uniswap.org/#/pools](https://info.uniswap.org/#/pools)，其中包含一些关于活跃流动性池的基本分析。在撰写时，**TVL**和**交易量**排名第一的池是USDC/ETH交易对（https://info.uniswap.org/#/pools/0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640）：
- en: '![Figure 5.6 – The All Pools dashboard](img/B19446_05_06.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![图5.6 – 所有池仪表盘](img/B19446_05_06.jpg)'
- en: Figure 5.6 – The All Pools dashboard
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.6 – 所有池仪表盘
- en: The smart contract address of the pool is [https://etherscan.io/address/0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640](https://etherscan.io/address/0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640).
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 该池的智能合约地址是[https://etherscan.io/address/0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640](https://etherscan.io/address/0x88e6a0c2ddd26feeb64f039a2c41296fcb3f5640)。
- en: 'By programmatically exploring the pool’s state data on `Chapter05/Liquidity_pool.ipynb`,
    we can identify the tokens that compose the pool by using the Pool ABI and reading
    the smart contract data with the following code snippet:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在`Chapter05/Liquidity_pool.ipynb`中以编程方式探索池的状态数据，我们可以使用池的ABI并通过以下代码片段读取智能合约数据，从而识别出构成该池的代币：
- en: '[PRE2]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The result is as follows:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下：
- en: 'Token 0: `0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48` or USDC'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代币0：`0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48`，即USDC
- en: 'Token 1: `0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2` or wETH'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代币1：`0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2`，即wETH
- en: Both are stablecoins, with one following the US dollar and the other representing
    the native Ethereum asset in wrapped form.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 这两者都是稳定币，其中一个与美元挂钩，另一个则是以包装形式存在的原生以太坊资产。
- en: 'To obtain the balance locked of each token, we can use `erc_20.abi`, which
    is available in this book’s GitHub repository, and query the pool with the following
    code snippet:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取每个代币的锁仓余额，我们可以使用`erc_20.abi`，它可以在本书的GitHub仓库中找到，并使用以下代码片段查询池：
- en: '[PRE3]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'More on the available view functions can be found in the documentation: [https://docs.uniswap.org/contracts/v3/reference/core/interfaces/pool/IUniswapV3PoolState](https://docs.uniswap.org/contracts/v3/reference/core/interfaces/pool/IUniswapV3PoolState).'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 更多关于可用视图函数的信息可以在文档中找到：[https://docs.uniswap.org/contracts/v3/reference/core/interfaces/pool/IUniswapV3PoolState](https://docs.uniswap.org/contracts/v3/reference/core/interfaces/pool/IUniswapV3PoolState)。
- en: To extract information from transactional data, we need to dig deeper into logs.
    Let’s review a swap transaction and try to understand how the information we need
    is logged. The swap transaction to analyze is `0x78490143b8a80b23752bd305b51c7796add5373af089059beb3920c8e431ae78`
    and is executed in the `0x3041cbd36888becc7bbcbc0045e3b1f144466f5f` pool, which
    swaps between USDC and USDT.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 为了从交易数据中提取信息，我们需要深入分析日志。让我们回顾一次交换交易，尝试理解我们需要的信息是如何记录的。要分析的交换交易是`0x78490143b8a80b23752bd305b51c7796add5373af089059beb3920c8e431ae78`，它在`0x3041cbd36888becc7bbcbc0045e3b1f144466f5f`池中执行，池内的交换是USDC和USDT之间的兑换。
- en: 'On Etherscan (https://etherscan.io/tx/0x78490143b8a80b23752bd305b51c7796add5373af089059beb3920c8e431ae78/),
    we can see the following:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在Etherscan（https://etherscan.io/tx/0x78490143b8a80b23752bd305b51c7796add5373af089059beb3920c8e431ae78/）上，我们可以看到以下内容：
- en: 'From or sender: `0xaDAf0dA2F42bf54E2Ccf455F795A04ECD744138B`'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来源或发送方：`0xaDAf0dA2F42bf54E2Ccf455F795A04ECD744138B`
- en: 'To: `0x3fC91A3afd70395Cd496C647d5a6CC9D4B2b7FAD` (Uniswap: Universal Router)'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '目标地址：`0x3fC91A3afd70395Cd496C647d5a6CC9D4B2b7FAD`（Uniswap: Universal Router）'
- en: Nowadays, most swaps do not directly impact the pool smart contract. Instead,
    they interact with a Router smart contract, such as a Uniswap Universal smart
    contract. The router’s mission is to take user-defined parameters (such as maximum
    slippage or swap recipient) and execute the necessary swaps to reach the trader’s
    goal. The router can combine multiple pools and even NFT marketplaces and is optimized
    to find the lowest prices and lowest gas cost.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 如今，大多数交换并不会直接影响池智能合约，而是与路由器智能合约交互，例如Uniswap的Universal智能合约。路由器的任务是接收用户定义的参数（如最大滑点或交换接收方），并执行必要的交换以达成交易者的目标。路由器可以组合多个池，甚至包括NFT市场，并且经过优化，能找到最低价格和最低的燃气费。
- en: 'The transaction summary is as follows:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 交易摘要如下：
- en: '![Figure 5.7 – Transaction swaps](img/B19446_05_07.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![图5.7 – 交易交换](img/B19446_05_07.jpg)'
- en: Figure 5.7 – Transaction swaps
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.7 – 交易交换
- en: From *Figure 5**.7*, we can interpret that the user, in one transaction, carried
    out a swap of XPR for USDT and later interacted with the pool under analysis to
    swap USDT for USDC.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 从*图5.7*中，我们可以解读出用户在一次交易中进行了XPR换USDT的操作，并随后与正在分析的池交互，将USDT换成USDC。
- en: '*Figure 5**.8* shows a partial snapshot of the transaction logs page. The last
    log in particular contains valuable information:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 5.8* 显示了交易日志页面的部分快照。特别是最后一条日志包含了宝贵的信息：'
- en: '![Figure 5.8 – Swap log](img/B19446_05_08.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.8 – 交换日志](img/B19446_05_08.jpg)'
- en: Figure 5.8 – Swap log
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.8 – 交换日志
- en: '*Figure 5**.8* shows that the relevant information for the swap is located
    in the logs of the pool address. As you may recall from [*Chapter 2*](B19446_02.xhtml#_idTextAnchor073),
    `topic_0` is the function signature. In this case, `0xd78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822`
    is the **swap** function.'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '*图 5.8* 显示了与交换相关的信息位于池子地址的日志中。正如你在[*第2章*](B19446_02.xhtml#_idTextAnchor073)中回忆的那样，`topic_0`是函数签名。在这种情况下，`0xd78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822`
    是**交换**函数。'
- en: Additional relevant functions are the mint or add liquidity function, which
    has a signature of `0x4c209b5fc8ad50758f13e2e1088ba56a560dff690a1c6fef26394f4c03821c4f`,
    and the burn or remove liquidity function, which has a signature of `0xdccd412f0b1252819cb1fd330b93224ca42612892bb3f4f789976e6d81936496`.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 其他相关函数包括铸造或添加流动性功能，它的签名为`0x4c209b5fc8ad50758f13e2e1088ba56a560dff690a1c6fef26394f4c03821c4f`，以及销毁或移除流动性功能，它的签名为`0xdccd412f0b1252819cb1fd330b93224ca42612892bb3f4f789976e6d81936496`。
- en: When liquidity is added or removed, the **liquidity providers** (**LPs**) receive
    LP tokens that represent their stake in the pool. These LP tokens can be traded
    in a secondary market, accrue interest, and sent to the pool when you’re looking
    to extract the liquidity back to the LP.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 当流动性被添加或移除时，**流动性提供者**（**LPs**）会收到代表其在池子中份额的LP代币。这些LP代币可以在二级市场上进行交易，产生利息，并在你希望将流动性提取回LP时再次发送到池子中。
- en: 'If we interact with the `ethereum.logs` table in Dune, we can extract the number
    of swaps carried out by the pool, as follows:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们在Dune中与`ethereum.logs`表进行交互，就可以提取池子执行的交换次数，如下所示：
- en: '[PRE4]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Another important piece of information to compare a pool with another that
    may offer the same token exchange is the strength of the pool for high liquidity
    trades. When large trades impact the reserves of the pool, there is a problem
    of slippage that, as we saw, can impact the final paid price. Here, it is important
    to study metrics related to the TVL, the liquidity of the pool, and so on. These
    metrics are typically calculated from aggregated transaction data. We propose
    some metrics logic in the following dashboard: [https://dune.com/gabriela/pool-basic-metrics](https://dune.com/gabriela/pool-basic-metrics).'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个重要的信息是，比较一个池子与另一个可能提供相同代币交换的池子时，要考虑池子的流动性强度，特别是在进行大额交易时。当大宗交易影响到池子的储备时，就会出现滑点问题，正如我们所看到的，这会影响最终支付的价格。在这里，研究与TVL、池子流动性等相关的指标非常重要。这些指标通常是从聚合的交易数据中计算出来的。我们在以下仪表盘中提出了一些指标逻辑：[https://dune.com/gabriela/pool-basic-metrics](https://dune.com/gabriela/pool-basic-metrics)。
- en: As we have been mentioning, in [*Chapter 2*](B19446_02.xhtml#_idTextAnchor073),
    we studied special tables that store transaction logs, with varying levels of
    preprocessing that adapt to the needs of the analyst. Some on-chain data providers
    even offer models that allow us to query the blockchain without writing code.
    Examples of such decoding services include the `dex.trades` tables on Dune or
    the Increment platform on Covalent, which has a drag-and-drop analytics service.
    Both Dune and Footprint are developing natural language queries to simplify the
    basic analysis of transaction data.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在[*第2章*](B19446_02.xhtml#_idTextAnchor073)中提到的，我们研究了存储交易日志的特殊表格，这些表格有不同程度的预处理，能够满足分析师的需求。一些链上数据提供者甚至提供了可以让我们在不编写代码的情况下查询区块链的模型。此类解码服务的例子包括Dune上的`dex.trades`表或Covalent上的Increment平台，它提供了一个拖拽式分析服务。Dune和Footprint都在开发自然语言查询，以简化交易数据的基本分析。
- en: These tables and decoded data can vary between providers but what matters most
    is understanding the logic behind each query and familiarizing ourselves with
    the structure of log data. This will allow us to extract information or adapt
    queries to different table formats if needed, even controlling that the results
    returned by an NLP model are correct no matter the platform with which we are
    working. If we know the logic of the business and how the data is logged on the
    blockchain, we can solve the data questions using every platform.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 这些表格和解码数据在不同的提供商之间可能有所不同，但最重要的是理解每个查询背后的逻辑，并熟悉日志数据的结构。这将帮助我们提取信息或根据需要将查询适应不同的表格格式，甚至在使用不同平台时，也能确保NLP模型返回的结果是正确的。如果我们了解业务逻辑以及数据如何在区块链上记录，我们就能够使用每个平台解决数据问题。
- en: 'Leveraging what we’ve already learned and the Dune Analytics tables listed
    here, we can create metrics that track the activity and revenue of the USDC/USDT
    pool under analysis. The tables are as follows:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 利用我们已经学到的知识和此处列出的 Dune Analytics 表格，我们可以创建用于跟踪所分析的 USDC/USDT 池的活动和收入的指标。表格如下：
- en: A raw data table named `ethereum.logs`
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个名为 `ethereum.logs` 的原始数据表格
- en: An intermediate processed table named `erc20_ethereum.evt_Transfer` that includes
    logs signed as transfers
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个名为 `erc20_ethereum.evt_Transfer` 的中级处理表格，其中包含被签名为转账的日志
- en: An advanced decoded table named `dex.trades`
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个名为 `dex.trades` 的高级解码表格
- en: 'Here is a brief explanation of the logic behind the metrics displayed in the
    dashboard at https://dune.com/gabriela/pool-basic-metrics:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是位于 https://dune.com/gabriela/pool-basic-metrics 仪表盘上展示的指标背后的逻辑简要说明：
- en: '| **Name in** **the Dashboard** | **Logic** |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '| **仪表盘中的名称** | **逻辑** |'
- en: '| Number of trades | Count the number of swaps with the specified signature
    within the pool smart contract logs. |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| 交易数量 | 统计池智能合约日志中具有指定签名的交换数量。 |'
- en: '| Traders logs 24 hs | Count the distinct addresses that appear in topic 2
    of the Pool smart contract log with a “swap” as topic 0. |'
  id: totrans-141
  prefs: []
  type: TYPE_TB
  zh: '| 交易者日志 24 小时 | 统计在池智能合约日志中，主题 0 为“swap”的主题 2 中出现的不同地址数量。 |'
- en: '| Average swap volume 24 hs | Using the `dex.trades` table, sum the amount
    in USD within the Pool smart contract and divide it by the number of transactions
    executed within 24 hours. |'
  id: totrans-142
  prefs: []
  type: TYPE_TB
  zh: '| 平均交换量 24 小时 | 使用 `dex.trades` 表格，求出池智能合约中以美元计的总量，并将其除以 24 小时内执行的交易数量。 |'
- en: '| Pool TVL | Sum all the transfers where the pool was the recipient of the
    deposit and subtract all the transfers where funds left the pool. |'
  id: totrans-143
  prefs: []
  type: TYPE_TB
  zh: '| 池 TVL | 将所有池作为接收方的存款转账相加，并减去所有资金离开池的转账。 |'
- en: '| Pool revenue | The revenue of a pool is generated by fees. The fee is deducted
    from the volume of the pair swap. |'
  id: totrans-144
  prefs: []
  type: TYPE_TB
  zh: '| 池收入 | 池的收入由手续费产生。手续费从交易对的交换量中扣除。 |'
- en: Table 5.2 – Dune dashboard query logic
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 表 5.2 – Dune 仪表盘查询逻辑
- en: Historically, DEXs incentivized the inflow of funds with higher yields, which
    led to the creation of professional funds that look for those advantages. Additionally,
    to avoid high slippage, big trades may need to be routed through different pools
    to be more cost-efficient. Routing multiple liquidity pools in a single transaction
    enables gas savings and minimizes slippage. In conclusion, aggregators were built
    as routers for liquidity and swappers.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 历史上，DEX 通过更高的收益来激励资金流入，这导致了寻找这些优势的专业基金的出现。此外，为了避免高滑点，大额交易可能需要通过不同的池进行路由，以实现更具成本效益的交易。在单个交易中路由多个流动性池可以节省
    gas 并最小化滑点。总之，聚合器作为流动性路由器和交换器而建立。
- en: DEX aggregators
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DEX 聚合器
- en: DEX aggregators source liquidity from different DEXs, providing users with better
    token swap rates compared to any single DEX. These aggregators can optimize costs
    derived from slippage, swap fees, and token prices, resulting in more favorable
    rates for users when executed effectively. DEXs are generally interested in integrating
    with DEX aggregators as it helps attract more users and volume. One prominent
    example of a DEX aggregator is **1Inch**.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: DEX 聚合器从不同的 DEX 获取流动性，为用户提供比单一 DEX 更好的代币交换汇率。这些聚合器可以优化由滑点、交换费用和代币价格产生的成本，从而为用户提供更有利的汇率，前提是能够有效执行。DEX
    通常希望与 DEX 聚合器进行集成，因为这有助于吸引更多用户和交易量。**1Inch** 是一个著名的 DEX 聚合器例子。
- en: A map of the smart contracts that constitute the protocol and are maintained
    by the 1Inch team is available at [https://dune.com/queries/2238512](https://dune.com/queries/2238512).
    There is a great dashboard that contains aggregated metrics at [https://dune.com/1inch/token](https://dune.com/1inch/token).
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 由 1Inch 团队维护的构成协议的智能合约地图可以在 [https://dune.com/queries/2238512](https://dune.com/queries/2238512)
    查看。一个包含聚合指标的优秀仪表盘可以在 [https://dune.com/1inch/token](https://dune.com/1inch/token)
    查看。
- en: Additionally, **Increment**, a no-code product built by Covalent, has a model
    named Dex, which includes all 1Inch smart contracts across different chains, making
    the analysis easier. One valuable feature of this product is the “normalization”
    event, which consists of translating event signatures into human-readable words
    and their standardization. Each smart contract may have different names for similar
    events, and knowing the exact name is necessary for querying them. However, Increment
    standardizes the names, making querying more straightforward and cross-platform.
    Another noteworthy feature is that it opens up the query generated by the models,
    allowing customization and easier explanation to third parties of the logic taking
    place in the model.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，**Increment** 是由 Covalent 构建的无代码产品，拥有一个名为 Dex 的模型，其中包含跨不同链的所有 1Inch 智能合约，使分析变得更加容易。该产品的一个有价值的特点是“规范化”事件，它包括将事件签名转换为人类可读的词汇并进行标准化。每个智能合约可能会为类似的事件使用不同的名称，知道准确的名称对于查询它们是必要的。然而，Increment
    对这些名称进行了标准化，从而使查询变得更加简便且具有跨平台性。另一个值得注意的特点是，它公开了由模型生成的查询，允许定制化并且便于向第三方解释模型中的逻辑。
- en: In traditional finance, access to credit, loans, and collateral-based financial
    services has long been a cornerstone of the industry. DeFi also has a chapter
    on credit and collateralization that now offers users the ability to access credit
    without the need for intermediaries such as banks. We will analyze this in the
    next section.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 在传统金融中，信贷、贷款和基于担保的金融服务长期以来一直是该行业的基石。去中心化金融（DeFi）也有一个关于信用和担保化的章节，现在用户可以在无需银行等中介的情况下获取信贷。我们将在下一节中进行分析。
- en: Lending and borrowing services on Web3
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Web3 上的借贷服务
- en: The bank receives deposits, saves part of them to be able to repay in case the
    owner wants the cash back, and offers the other part as a loan in the market at
    a certain interest rate. The loan can be collateralized or non-collateralized,
    depending on the risk of the loan taker. The interest rate is set high enough
    to generate revenue for the bank and the depositor. Certain protocols on-chain
    reproduce a similar mechanism, as we will describe in this section.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 银行接收存款，将其中一部分存储以便在所有者需要取回现金时能够偿还，另一部分则以一定的利率作为贷款提供给市场。贷款可以是有担保的或无担保的，这取决于借款人的风险。利率设置得足够高，以便为银行和存款人产生收益。某些链上协议复现了类似的机制，正如我们将在本节中描述的那样。
- en: At the time of writing, the main lending and borrowing protocols only work with
    collateralized loans. The process resembles a mortgage where the user provides
    the house as collateral as insurance for the loan payment. If the loan is not
    repaid in full, the bank keeps the house. In this case, if the collateral ratio
    of the loan is not maintained, the protocol liquidates the collateral.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 截至目前，主要的借贷协议仅支持有担保的贷款。这个过程类似于抵押贷款，用户提供房屋作为贷款偿还的担保。如果贷款未能全部偿还，银行将保留房屋。在这种情况下，如果贷款的担保比例未得到维持，协议将会清算担保物。
- en: Let’s imagine that Alice wants to invest in a project in USD stablecoin but
    her collateral is in ETH. She is confident that ETH will increase in price, so
    she would rather not sell it for stablecoin. The solution is a protocol that takes
    Alice’s ETH and lends her a USD-pegged stablecoin such as DAI. A protocol that
    does exactly that is Maker, which we have already mentioned previously. For the
    protocol to issue DAI, it requires 1.5 times the value of the issued DAI in collateral
    (ETH); this is called over-collateralization. The ratio between the collateral
    and the loaned asset is the collateral ratio. Usually, these protocols have a
    liquidation fee to disincentivize getting liquidated.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 假设 Alice 想要投资一个以 USD 稳定币为基础的项目，但她的担保物是 ETH。她确信 ETH 会增值，因此宁愿不将其出售为稳定币。解决方案是一个协议，它接受
    Alice 的 ETH 并借给她一个与美元挂钩的稳定币，如 DAI。一个正是如此运作的协议是 Maker，我们之前已经提到过。为了发行 DAI，协议需要提供
    1.5 倍于所发行 DAI 的担保物（ETH）；这就是所谓的超额担保。担保物与借出资产之间的比例被称为担保比例。通常，这些协议会收取清算费，以减少被清算的可能性。
- en: Another well-established protocol is **Compound**, which operates like a liquidity
    pool where liquidity providers supply funds to the pool in exchange for interest
    and borrowers take a loan against interest on the debt. The interest rate is known
    as **Annual Percentage Yield** (**APY**) and varies from pool to pool, depending
    on the liquidity and demand within the pool.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个成熟的协议是**Compound**，它类似于一个流动性池，流动性提供者将资金供给池中以换取利息，而借款人则以债务的利息为代价借款。利率被称为**年化收益率**（**APY**），并且根据池中的流动性和需求在不同池之间有所变化。
- en: When funds are deposited in Compound, the market maker receives cTokens, which
    represent the percentage of the funds in the pool and accrue interest. A cToken
    is a type of cryptocurrency token that’s used within the ecosystem. They are interest-bearing
    tokens that represent the amount of cryptocurrency a user has deposited into the
    Compound platform. The list of cTokens contracts can be found at [https://docs.compound.finance/#developer-resources](https://docs.compound.finance/#developer-resources).
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 当资金存入Compound时，市场制造商会收到cTokens，这些cTokens代表了资金池中资金的比例，并会累积利息。cToken是一种在生态系统内使用的加密货币代币。它们是带有利息的代币，代表用户存入Compound平台的加密货币金额。cToken合约列表可以在[https://docs.compound.finance/#developer-resources](https://docs.compound.finance/#developer-resources)找到。
- en: Let’s explore the protocol in `0xF25212E676D1F7F89Cd72fFEe66158f541246445` and
    is called `cUSDCv3`.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们探索协议`0xF25212E676D1F7F89Cd72fFEe66158f541246445`，它被称为`cUSDCv3`。
- en: The contract has many view functions, all of which are explored in the `Lending_borrowing.ipynb`
    notebook.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 该合约有许多视图函数，所有这些函数在`Lending_borrowing.ipynb`笔记本中都有探讨。
- en: 'Some of the main functions are as follows:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 一些主要函数如下：
- en: '`numAssets()`: The number of assets that can be used as collateral. In the
    case under analysis, there are three assets, namely, ETH, wBTC, and Matic.'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`numAssets()`: 可用于作为抵押品的资产数量。在当前分析的情况下，有三种资产，即ETH、wBTC和Matic。'
- en: '`baseToken()`: The token that can be borrowed against the collateral – in our
    case, USDC.'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`baseToken()`: 可以以抵押品为担保借贷的代币——在我们这个例子中是USDC。'
- en: '`getAssetInfo()`: This returns the collateral asset information, such as the
    collateral address or the price feed address on Chainlink.'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`getAssetInfo()`: 返回抵押资产的信息，例如抵押地址或Chainlink上的价格源地址。'
- en: '`Totalsupply()`: The total supply of base tokens plus interest accrued to suppliers.'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Totalsupply()`: 基础代币的总供应量加上已积累的利息。'
- en: '`getReserves()`: The balance of the base or collateral asset, which protects
    users from bad debt. We will analyze bad debt shortly.'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`getReserves()`: 基础或抵押资产的余额，保护用户免受坏账的影响。我们稍后将分析坏账。'
- en: '`getUtilization()`: Protocol utilization of the base asset – that is, USDC.
    The function for such a calculation is `TotalBorrows` / `TotalSupply.`'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`getUtilization()`: 基础资产（即USDC）的协议利用率。此计算的函数为`TotalBorrows` / `TotalSupply`。'
- en: More functions to query state data are available; please refer to the documentation
    for more details.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 还可以查询更多用于状态数据的函数；更多详细信息请参阅文档。
- en: Transaction data is also very useful for extracting insights. For example, it
    is possible to calculate the TVL and further collateral information by querying
    the logs of the collateral assets. The syntax follows the one we reviewed in the
    *Understanding DEX* section. A dashboard example can be found at [https://dune.com/datanut/Compound-Finance-Deposits-and-Loans](https://dune.com/datanut/Compound-Finance-Deposits-and-Loans).
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 交易数据也非常有用，可以用来提取洞察。例如，可以通过查询抵押资产的日志来计算TVL和进一步的抵押信息。语法与我们在*理解DEX*部分回顾过的一致。仪表板示例如下：[https://dune.com/datanut/Compound-Finance-Deposits-and-Loans](https://dune.com/datanut/Compound-Finance-Deposits-and-Loans)。
- en: Lending and borrowing protocols make revenue out of the interest rate paid by
    the borrower. An important metric to measure revenue generated is the utilization
    ratio of a protocol, which is the result of the Borrowing Volume / TVL. This ratio
    tells us how efficient a protocol is to put the value that’s been locked to work.
    The higher the utilization ratio, the better.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 借贷协议通过借款人支付的利息产生收入。衡量收入生成的重要指标是协议的利用率，该指标是借款量/总价值（TVL）的结果。该比例告诉我们协议在将锁定的价值投入使用时的效率。利用率越高，效果越好。
- en: Specifically, in Compound, part of said interest goes to its reserves, which
    act as insurance, but such revenue distribution can be modified by the governance
    of the protocol, who are the COMP holders. COMP is an ERC-20 token that enables
    the community governance of the Compound protocol. A COMP token holder may participate
    and debate, propose, and vote on the changes to the protocol.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，在Compound协议中，部分利息会进入其储备金，作为保险，但这种收入分配可以由协议的治理方修改，治理方是COMP代币的持有者。COMP是一个ERC-20代币，使社区能够治理Compound协议。COMP代币持有者可以参与讨论、提案并投票决定协议的变更。
- en: 'Within this industry, there is a crypto-native product that came to life to
    enable fast loans with zero collateralization: the flash loan.'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个行业中，有一种加密原生产品应运而生，它使得零抵押的快速贷款成为可能：闪电贷。
- en: Flash loans
  id: totrans-172
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 闪电贷
- en: '**Flash loans** are crypto-native products, with **AAVE** being one of the
    most famous protocols in this category. A flash loan allows the borrower to take
    a loan with zero collateral, on the condition that the loan and any additional
    interest are repaid within the same transaction. If the borrower fails to repay
    the loan within the transaction, the entire transaction is reverted. Flash loans
    serve two main use cases: arbitrage and liquidations.'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '**闪电贷**是加密原生产品，**AAVE**是这一领域中最著名的协议之一。闪电贷允许借款人以零抵押的方式获得贷款，前提是贷款及其利息必须在同一笔交易中偿还。如果借款人在交易中未能按时偿还贷款，整个交易将被撤销。闪电贷主要有两种用途：套利和清算。'
- en: '**Arbitrage** involves the simultaneous purchase and sale of the same or different
    assets in different markets, where the prices vary. The arbitrageur profits from
    the small price differences, but it usually requires a substantial amount to make
    a noticeable difference. This practice helps bring the market back to equilibrium,
    ensuring that the prices of the same asset remain stable across multiple markets.'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: '**套利**涉及在不同市场中同时购买和出售相同或不同的资产，在这些市场中价格存在差异。套利者从小的价格差异中获利，但通常需要相当大的资金量才能产生显著的差异。这种做法有助于将市场恢复到平衡状态，确保相同资产的价格在多个市场中保持稳定。'
- en: In situations where a collateralization ratio is lost and the loan defaults,
    a third-party liquidator gains access to the collateral for liquidation purposes.
    The liquidator sells the collateral in the market on behalf of the borrower, pays
    back the debt, and receives a liquidation bonus for the job. All these steps can
    be executed in one transaction with flash loans and without requiring any collateral.
    These complex transactions are typically carried out by bots, which contribute
    to maintaining liquidity in the DeFi ecosystem and keeping prices stable across
    markets.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在抵押品比率丧失并且贷款违约的情况下，第三方清算者可以获取抵押品进行清算。清算者代表借款人将抵押品出售给市场，偿还债务，并因完成清算工作获得清算奖金。所有这些步骤可以通过闪电贷在一笔交易中执行，并且无需任何抵押品。这些复杂的交易通常由机器人执行，机器人有助于维持DeFi生态系统中的流动性，并保持市场价格的稳定。
- en: 'For further insights on flash loan transaction data, open the queries in the
    following dashboard: https://dune.com/hildobby/flashloans.'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 如需进一步了解闪电贷交易数据，请查看以下仪表板中的查询：https://dune.com/hildobby/flashloans。
- en: A note on protocol bad debt
  id: totrans-177
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关于协议坏账的说明
- en: 'Flash loans have been used to carry out attacks on DeFi protocols that resulted
    in these protocols having bad debt. Bad debt arises when users who provide liquidity
    to a pair are unable to withdraw their funds upon deciding to leave the pool.
    Let’s consider an example:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 闪电贷曾被用于攻击DeFi协议，导致这些协议出现坏账。坏账发生在向某个交易对提供流动性的用户决定退出池时，无法取回其资金。我们来看一个例子：
- en: The attacker obtains a flash loan for token A.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 攻击者获取了代币A的闪电贷。
- en: The attacker deposits token A into a DEX or CEX and swaps it for token B, leading
    to an increased supply of token A and decreased liquidity of token B, causing
    token B’s price to rise.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 攻击者将代币A存入去中心化交易所（DEX）或中心化交易所（CEX），并将其兑换为代币B，这导致代币A的供应增加，代币B的流动性下降，进而推动代币B的价格上涨。
- en: The revalued token B is later used as collateral in a lending protocol to borrow
    token A. Due to the inflated collateral B price, the protocol lends more of token
    A than it would if the collateral were at its equilibrium price.
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新估值后的代币B随后作为抵押品用于借贷协议，以借入代币A。由于抵押品B的价格被人为抬高，协议借出的代币A数量超过了抵押品处于均衡价格时的借贷额度。
- en: The attacker repays the loan in the form of A tokens, keeping the surplus of
    token A. When prices return to normal, liquidators try to liquidate token B at
    market price, but it is insufficient to cover the loan of token A. As a result,
    bad debt is incurred, leaving the last supplier of A tokens to bear the loss.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 攻击者以 A 代币的形式偿还贷款，保留 A 代币的盈余。当价格回归正常时，清算人试图以市场价格清算 B 代币，但这不足以覆盖 A 代币的贷款。因此，产生了坏账，最后的
    A 代币供应商承担了损失。
- en: These attacks are facilitated when the price is sourced from a single oracle,
    making it susceptible to manipulation. Additionally, the lower cost associated
    with flash loans, which do not require collateral, makes such attacks more feasible.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 当价格来源于单一预言机时，攻击容易得手，因为它容易受到操控。此外，闪电贷的低成本特性（不需要抵押品）使得此类攻击更加可行。
- en: 'An interesting dashboard created by the Risk DAO tracks the bad debt of protocols
    using on-chain data. You can explore it here: [https://bad-debt.riskdao.org/](https://bad-debt.riskdao.org/).'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: Risk DAO 创建了一个有趣的仪表盘，跟踪协议的坏账情况，使用链上数据进行监控。你可以在这里探索：[https://bad-debt.riskdao.org/](https://bad-debt.riskdao.org/)。
- en: The world is moving toward a multi-chain environment, where successful chains
    offer differentiated products and attract distinct ideas that become **dApps**.
    For example, Near, with its low fees, has developed the Sweat economy, while Avalanche
    subnets enable games to build their on-chain ecosystem without competing for gas
    slots on the main chain. As more protocols open up their services on multiple
    chains, they aim to leverage the benefits of each chain and reach a diverse range
    of users.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 世界正在朝着多链环境发展，成功的链条提供差异化的产品，吸引不同的创意，这些创意最终形成了 **去中心化应用（dApps）**。例如，Near 以低手续费发展了
    Sweat 经济，而 Avalanche 的子网使游戏能够构建自己的链上生态系统，而不需要与主链争夺 gas 插槽。随着更多协议在多个链上开放其服务，它们旨在利用每个链的优势，覆盖更广泛的用户群体。
- en: The increasing demand for transferring funds between different chains has led
    to the emergence of crypto-native products called bridges, which we will explore
    in the next section.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 随着不同区块链之间资金转移需求的增加，出现了被称为桥接的加密原生产品，我们将在下一节中进行探讨。
- en: Multichain protocols and cross-chain bridges
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 多链协议和跨链桥接
- en: 'A bridge is a structure that facilitates the transfer of funds and information
    between different chains. The market recognizes three groups of chains:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 桥接是一个结构，它促进了不同区块链之间的资金和信息转移。市场将区块链分为三类：
- en: '**L1 chains** are the well-known blockchains, such as Bitcoin and Ethereum.
    It is called Layer 1 as the core team generates a layer of solutions over the
    foundation layer to increase scalability. An example of the evolution of L1 is
    the Ethereum merge, which occurred in September 2022.'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**L1 链**是广为人知的区块链，例如比特币和以太坊。之所以被称为 Layer 1，是因为核心团队在基础层上生成了一层解决方案，以增加可扩展性。L1
    的演变例子是以太坊的合并，这一事件发生在 2022 年 9 月。'
- en: '**L2 chains** are integrations that run on top of a blockchain to improve specific
    aspects, often focusing on scalability. These scaling solutions allow the main
    chain to offload data to a parallel architecture, processing it there and saving
    only the results on the main chain. Successful L2 chains include Optimism, Arbitrum,
    and Polygon zkEVM.'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**L2 链**是运行在区块链上的集成系统，旨在改善特定方面，通常专注于可扩展性。这些扩展解决方案允许主链将数据卸载到并行架构上，在那里进行处理，并将结果保存到主链上。成功的
    L2 链包括 Optimism、Arbitrum 和 Polygon zkEVM。'
- en: '**Sidechains** are new blockchains that are connected to a major blockchain.
    For instance, **Rootstock** is linked to Bitcoin, enabling EVM smart contract
    programming with the decentralization and security of Bitcoin. Sidechains are
    separate chains, meaning that consensus methods, gas rules, and other aspects
    may vary.'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**侧链**是连接到主区块链的新区块链。例如，**Rootstock**与比特币相连，允许使用以太坊虚拟机（EVM）智能合约编程，同时保持比特币的去中心化和安全性。侧链是独立的链，意味着共识方法、燃料规则和其他方面可能有所不同。'
- en: Given the ongoing availability of diverse blockchain offerings and the absence
    of any apparent halt to this trend, users will continue to explore transitioning
    from one blockchain to another to capitalize on the unique advantages offered
    by each. This underscores the persistent demand for bridge connections between
    these blockchains, which is expected to remain robust.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于各类区块链产品的持续涌现以及这一趋势看似没有停止的迹象，用户将继续探索从一个区块链过渡到另一个区块链，以利用每个区块链所提供的独特优势。这也凸显了区块链之间桥接连接的持续需求，预计这一需求将继续保持强劲。
- en: 'Depending on how a bridge operates, the transaction structure and the data
    points required for analysis may vary. Generally, there are two main types of
    bridges: centralized bridges and trustless bridges. **Centralized bridges** have
    a central entity responsible for bridge security. Examples include the Ronin bridge
    and the Multichain bridge. On the other hand, **trustless bridges** rely solely
    on smart contracts, such as the Near bridge and the Hop bridge.'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 根据桥接的运作方式，交易结构和需要分析的数据点可能会有所不同。通常，桥接主要分为两种类型：中心化桥和无信任桥。**中心化桥**由一个中心实体负责桥接安全性。例如，Ronin桥和Multichain桥。另一方面，**无信任桥**完全依赖智能合约，比如Near桥和Hop桥。
- en: Hands-on example – Hop bridge
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实操示例 – Hop桥
- en: Let’s delve into how a Multichain bridge such as Hop works. Hop describes itself
    in [https://hop.exchange/](https://hop.exchange/) as a “*scalable rollup-to-rollup
    general token bridge.*” It enables bridging between ETH and its L2 solutions,
    such as Polygon, Gnosis, Optimism, and Arbitrum.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解像Hop这样的多链桥是如何工作的。Hop在[https://hop.exchange/](https://hop.exchange/)中自我描述为“*可扩展的rollup到rollup的通用代币桥*”。它支持ETH与其L2解决方案之间的桥接，比如Polygon、Gnosis、Optimism和Arbitrum。
- en: 'The Hop bridge operates with three core products:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: Hop桥有三个核心产品：
- en: A Hop token, which is pegged to the value of the underlying asset that’s minted
    in each of the chains, where Hop is active and redeemable in the L1 chain
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Hop代币与在每个链中铸造的底层资产的价值挂钩，其中Hop在L1链中处于活跃状态并可以兑换。
- en: A bonder or liquidity provider
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个bonder或流动性提供者
- en: Automatic market makers, which allow us to swap between the Hop token and the
    native token in the destination chain
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动化做市商使我们能够在Hop代币和目标链中的本地代币之间进行交换。
- en: 'Let’s consider an example transaction:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们考虑一个示例交易：
- en: Alice wants to use a dApp active on Optimism but her funds are in ETH. So, to
    be able to interact with the dApp, she needs **oETH**, which is wrapped ETH on
    Optimism.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Alice希望使用在Optimism上活跃的dApp，但她的资金是ETH。所以，为了与dApp互动，她需要**oETH**，即Optimism上的封装ETH。
- en: 'Alice bridges her ETH to Optimism by doing the following:'
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Alice通过以下方式将她的ETH桥接到Optimism：
- en: A bridge transaction is issued on ETH and will be executed on the native bridge
    after the waiting time and exit time have passed.
  id: totrans-203
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 桥接交易在ETH上发起，并将在等待时间和退出时间过后在本地桥上执行。
- en: The bonder deposits hop-ETH or **hETH** in Alice’s address on Optimism for the
    bridged amount minus fees and gas costs.
  id: totrans-204
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 作为桥接操作的一部分，bonder将hop-ETH或**hETH**存入Alice在Optimism上的地址，金额为桥接金额减去费用和油费。
- en: Alice can swap hETH for oETH and interact with the dApp.
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Alice可以将hETH兑换为oETH，并与dApp进行交互。
- en: After the exit time has passed, the bonder receives the funds previously provided
    to Alice along with a small fee.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在退出时间过去后，bonder将收回之前提供给Alice的资金，并附加一小部分费用。
- en: This is a bridge transaction where the user can transfer funds between chains
    swiftly, sending an asset in one chain and receiving the equivalent (minus a fee)
    in another chain. In this example, we mentioned tokens such as oETH and hETH,
    which are minted and burned in each chain to represent the flow of funds between
    chains. This is known as a Lock and Mint type of bridge.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一笔桥接交易，用户可以在链之间迅速转移资金，发送一种资产到一个链中，并在另一个链中收到等价物（减去费用）。在这个示例中，我们提到了像oETH和hETH这样的代币，这些代币在每条链上被铸造和销毁，用于表示链之间的资金流动。这被称为锁定和铸造类型的桥接。
- en: To analyze bridge contracts, refer to the complete list available at [https://github.com/hop-protocol/hop/blob/develop/packages/core/src/addresses/mainnet.ts](https://github.com/hop-protocol/hop/blob/develop/packages/core/src/addresses/mainnet.ts).
    There are a few `view` functions in it.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 要分析桥接合约，请参考[https://github.com/hop-protocol/hop/blob/develop/packages/core/src/addresses/mainnet.ts](https://github.com/hop-protocol/hop/blob/develop/packages/core/src/addresses/mainnet.ts)中提供的完整列表。该列表中包含了一些`view`函数。
- en: A useful view function is `l1CanonicalToken()` that provides information about
    the locked token in the bridge. Knowing this information, we can calculate the
    TVL, as explained in the `Bridges.ipynb` notebook.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 一个有用的视图函数是`l1CanonicalToken()`，它提供有关桥接中锁定代币的信息。通过了解这些信息，我们可以计算TVL，正如`Bridges.ipynb`笔记本中所解释的。
- en: 'For aggregated transactional data analysis, understanding the transaction’s
    structure is essential. For instance, let’s analyze the transaction under the
    `0xaf6089e3d7377b5b0c4ad86e486406a19e29280410402aab71195b0995608e81` hash, which
    involves transferring 0.4378 ETHs to the same address on Optimism:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 对于汇总的交易数据分析，了解交易结构至关重要。例如，分析`0xaf6089e3d7377b5b0c4ad86e486406a19e29280410402aab71195b0995608e81`哈希下的交易，涉及将0.4378
    ETH转账到Optimism上的相同地址：
- en: '![Figure 5.9 – Transaction details (source: https://etherscan.io/tx/0xaf6089e3d7377b5b0c4ad86e486406a19e29280410402aab71195b0995608e81)](img/B19446_05_09.jpg)'
  id: totrans-211
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.9 – 交易详情（来源：[https://etherscan.io/tx/0xaf6089e3d7377b5b0c4ad86e486406a19e29280410402aab71195b0995608e81](https://etherscan.io/tx/0xaf6089e3d7377b5b0c4ad86e486406a19e29280410402aab71195b0995608e81)）](img/B19446_05_09.jpg)'
- en: 'Figure 5.9 – Transaction details (source: https://etherscan.io/tx/0xaf6089e3d7377b5b0c4ad86e486406a19e29280410402aab71195b0995608e81)'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.9 – 交易详情（来源：[https://etherscan.io/tx/0xaf6089e3d7377b5b0c4ad86e486406a19e29280410402aab71195b0995608e81](https://etherscan.io/tx/0xaf6089e3d7377b5b0c4ad86e486406a19e29280410402aab71195b0995608e81)）
- en: 'To locate this data in the `raw_transactions` table of any data provider of
    those listed in [*Chapter 2*](B19446_02.xhtml#_idTextAnchor073), look for the
    signature or `TransferSentToL2` event, which includes the amount transferred,
    the bonder, and the user:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 若要在任何数据提供商的 `raw_transactions` 表中找到此数据，请参考 [*第 2 章*](B19446_02.xhtml#_idTextAnchor073)，查找签名或
    `TransferSentToL2` 事件，该事件包括转账金额、担保人和用户：
- en: '![Figure 5.10 – Bridge cross transaction logs – ETH side](img/B19446_05_10.jpg)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.10 – 桥接跨链交易日志 – ETH 侧](img/B19446_05_10.jpg)'
- en: Figure 5.10 – Bridge cross transaction logs – ETH side
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.10 – 桥接跨链交易日志 – ETH 侧
- en: 'The transaction has its correlation in the Optimism chain. The relevant information
    is on the logs of the `l2canonical` token, as per the documentation. For wETH,
    this is `''0x4200000000000000000000000000000000000006''`. The transaction in Optimism
    is [https://optimistic.etherscan.io/tx/0x4e76ee9b997868ba894ea9362347bfa9ed64c
    2aaf5b4482d6482940efbe3e738](https://optimistic.etherscan.io/tx/0x4e76ee9b997868ba894ea9362347bfa9ed64c2aaf5b4482d6482940efbe3e738),
    and the relevant log looks like this:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 该交易与 Optimism 链有关。相关信息位于 `l2canonical` 代币的日志中，按照文档，wETH 的地址是 `'0x4200000000000000000000000000000000000006'`。在
    Optimism 上的交易是：[https://optimistic.etherscan.io/tx/0x4e76ee9b997868ba894ea9362347bfa9ed64c2aaf5b4482d6482940efbe3e738](https://optimistic.etherscan.io/tx/0x4e76ee9b997868ba894ea9362347bfa9ed64c2aaf5b4482d6482940efbe3e738)，相关日志如下所示：
- en: '![Figure 5.11 – Bridge cross transaction logs – OPT side](img/B19446_05_11.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.11 – 桥接跨链交易日志 – OPT 侧](img/B19446_05_11.jpg)'
- en: Figure 5.11 – Bridge cross transaction logs – OPT side
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.11 – 桥接跨链交易日志 – OPT 侧
- en: Most of these main protocols are already indexed and translated by major data
    providers, making analysis more accessible. For example, explore the very interesting
    dashboard at [https://dune.com/rchen8/Hop-Exchange](https://dune.com/rchen8/Hop-Exchange),
    which leverages events from the reviewed smart contracts.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 这些主要协议中的大多数已经被主要数据提供商索引并翻译，使得分析变得更加容易。例如，可以探索一个非常有趣的仪表板，[https://dune.com/rchen8/Hop-Exchange](https://dune.com/rchen8/Hop-Exchange)，该仪表板利用了经过审查的智能合约中的事件。
- en: 'Hop also offers a subgraph, and examples of queries can be found in the documentation:
    https://docs.hop.exchange/v/developer-docs/subgraphs/queries.'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: Hop 还提供了一个子图，查询示例可以在文档中找到：[https://docs.hop.exchange/v/developer-docs/subgraphs/queries](https://docs.hop.exchange/v/developer-docs/subgraphs/queries)。
- en: A note on DeFi risks and challenges
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 关于 DeFi 风险和挑战的说明
- en: DeFi is a young, growing business with multiple challenges ahead. Data practitioners
    play a crucial role in preventing hacks, identifying unusual activities, measuring
    the risks associated with certain decisions, and handling damage control.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: DeFi 是一个年轻且不断发展的行业，面临许多挑战。数据从业者在防止黑客攻击、识别异常活动、衡量与某些决策相关的风险以及处理损失控制方面发挥着关键作用。
- en: There may be instances where we find ourselves supporting governmental efforts
    to establish a regulatory framework for the activity, paving the way for a more
    substantial flow of funds into this ecosystem. As of today, regulatory uncertainty
    and diverse rules prevail. Although there are multiple initiatives aiming to create
    uniformity in legislation, it remains a work in progress. This situation directly
    impacts the industry, where concepts such as deposit guarantees are not applied,
    resulting in many users irrecoverably losing their funds after a hack.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 可能会有一些情况，我们发现自己支持政府的努力，以建立一个监管框架，为资金向该生态系统的流入铺平道路。到目前为止，监管不确定性和多样的规则仍然占主导地位。尽管有多个倡议旨在创造立法的一致性，但这仍然是一个进行中的工作。这种情况直接影响着行业，其中像存款担保这样的概念并未得到应用，导致许多用户在遭遇黑客攻击后不可恢复地失去了他们的资金。
- en: The DeFi experience is still in its early stages, and data practitioners may
    also find themselves studying product experiences to enhance user interactions
    or educate users on better interacting with these products. Initiatives such as
    the SAFE wallet aim to bridge the gap between Web2 and Web3 experiences. This
    company leads in expanding what a wallet can do to match the experience of our
    traditional home banking.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: DeFi 体验仍处于初期阶段，数据从业者可能会发现自己也在研究产品体验，以增强用户互动或教育用户如何更好地与这些产品互动。诸如 SAFE 钱包等举措旨在弥合
    Web2 和 Web3 体验之间的差距。这家公司在扩展钱包功能以匹配传统家庭银行体验方面处于领先地位。
- en: The opportunities for creation in this space are vast, and data-driven decisions
    are imperative.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 这个领域的创造机会非常广阔，数据驱动的决策至关重要。
- en: Summary
  id: totrans-226
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we delved into the world of DeFi, exploring its core components
    and the primary products offered in the sector. Our analysis covered a wide array
    of areas, including tokens, stablecoins, and DEXs with a focus on pools and DEX
    aggregation, lending and borrowing protocols, and the significance of bridges
    in facilitating cross-chain transactions.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们深入探讨了 DeFi 的世界，探索了该领域的核心组件和主要产品。我们的分析涵盖了多个领域，包括代币、稳定币、以及以池和 DEX 聚合为重点的去中心化交易所（DEX）、借贷协议和桥梁在促进跨链交易中的重要性。
- en: In each case, we analyzed the business flow and how it generates revenue, and
    leveraged some of the data providers to generate aggregated metrics.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 在每种情况下，我们分析了业务流程及其如何产生收入，并利用一些数据提供者生成汇总指标。
- en: While the landscape of DeFi is ever-evolving, with new players emerging and
    innovative services being introduced, our focus remains on comprehending the underlying
    business models and mechanisms. Understanding the essence of these protocols enables
    us to effectively trace transactional details to construct informative metrics
    for further analysis.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 DeFi 领域不断发展，新的参与者不断涌现并推出创新服务，但我们的重点依然是理解其基本的商业模型和机制。了解这些协议的本质使我们能够有效地追踪交易细节，并构建有用的指标以供进一步分析。
- en: Analytics companies play a vital role in simplifying this domain. Leveraging
    both on-chain and off-chain data and collaborating with protocol developers, these
    companies provide invaluable insights. By starting our analysis with well-established
    analytics firms, we can expedite our understanding of the DeFi landscape. However,
    the knowledge we’ve acquired in this chapter empowers us to establish our own
    criteria, delve into the code and the mathematical rationale, and tailor metrics
    to suit our unique requirements. This flexibility allows us to gain deeper insights
    into the DeFi space and make informed decisions based on our specific needs.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 分析公司在简化这一领域中发挥着至关重要的作用。通过利用链上和链下数据，并与协议开发者合作，这些公司提供了宝贵的洞察力。通过从一些成熟的分析公司开始我们的分析，我们可以加速理解
    DeFi 领域。然而，我们在本章获得的知识使我们能够建立自己的标准，深入研究代码和数学原理，并根据我们独特的需求定制指标。这种灵活性使我们能够深入了解 DeFi
    领域，并根据特定需求做出明智决策。
- en: In the next chapter, we'll dive into the details of data preparation.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将深入探讨数据准备的细节。
- en: Further reading
  id: totrans-232
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'To complement this chapter, the following sources may help:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 为了补充本章，以下资源可能对您有所帮助：
- en: Lau, D., Lau, D., Jin, T. S., Kho, K., Azmi, E., Fang, L., Hor, B., & Win, K.
    W. (2021). *How to DeFi:* *Beginner*. CoinGecko.
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Lau, D., Lau, D., Jin, T. S., Kho, K., Azmi, E., Fang, L., Hor, B., & Win, K.
    W. (2021). *如何进行 DeFi:* *初学者指南*。CoinGecko。
- en: Fang, L., Hor, B., Azmi, E., Khor, W. W., & Gecko, C. (2021). *How to DeFi:*
    *Advanced*. CoinGecko.
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Fang, L., Hor, B., Azmi, E., Khor, W. W., & Gecko, C. (2021). *如何进行 DeFi:* *进阶篇*。CoinGecko。
- en: '*A deep dive into automated market maker decentralized exchanges* (Uniswap
    v1). (n.d.). LearnWeb3: [https://learnWeb3.io/degrees/ethereum-developer-degree/sophomore/a-deep-dive-into-automated-market-maker-decentralized-exchanges-uniswap-v1/](https://learnWeb3.io/degrees/ethereum-developer-degree/sophomore/a-deep-dive-into-automated-market-maker-decentralized-exchanges-uniswap-v1/).'
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*深入探讨自动化市场制造商去中心化交易所*（Uniswap v1）。(n.d.)。LearnWeb3：[https://learnWeb3.io/degrees/ethereum-developer-degree/sophomore/a-deep-dive-into-automated-market-maker-decentralized-exchanges-uniswap-v1/](https://learnWeb3.io/degrees/ethereum-developer-degree/sophomore/a-deep-dive-into-automated-market-maker-decentralized-exchanges-uniswap-v1/)。'
- en: '*The maker protocol white paper* | Feb 2020\. (n.d.). MakerDAO | An Unbiased
    Global Financial System: [https://makerdao.com/en/whitepaper#abstract](https://makerdao.com/en/whitepaper#abstract).'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Maker 协议白皮书* | 2020年2月。 (n.d.)。MakerDAO | 一个无偏的全球金融系统：[https://makerdao.com/en/whitepaper#abstract](https://makerdao.com/en/whitepaper#abstract)。'
- en: 'Fabian Vogelsteller <fabian@ethereum.org>, Vitalik Buterin <vitalik.buterin@ethereum.org>,
    *ERC-20: Token Standard*, Ethereum Improvement Proposals, no. 20, November 2015\.
    [Online serial]. Available at [https://eips.ethereum.org/EIPS/eip-20](https://eips.ethereum.org/EIPS/eip-20).'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Fabian Vogelsteller <fabian@ethereum.org>, Vitalik Buterin <vitalik.buterin@ethereum.org>,
    *ERC-20: 代币标准*, 以太坊改进提案，第20号，2015年11月。[在线系列]. 可在 [https://eips.ethereum.org/EIPS/eip-20](https://eips.ethereum.org/EIPS/eip-20)
    查看。'
- en: 'Ori Pomerantz. (n.d.). *ERC-20 contract walk-through*. ethereum.org: [https://ethereum.org/developers/tutorials/erc20-annotated-code/#the-actual-contract](https://ethereum.org/es/developers/tutorials/erc20-annotated-code/#the-actual-contract).'
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Ori Pomerantz. (n.d.). *ERC-20 合约讲解*. ethereum.org: [https://ethereum.org/developers/tutorials/erc20-annotated-code/#the-actual-contract](https://ethereum.org/es/developers/tutorials/erc20-annotated-code/#the-actual-contract).'
- en: '*Introducing Permit2 & universal router*. (2022, November 17). Uniswap Protocol:
    [https://blog.uniswap.org/permit2-and-universal-router#universal-router-unified-token-and-nft-swaps](https://blog.uniswap.org/permit2-and-universal-router#universal-router-unified-token-and-nft-swaps).'
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*介绍 Permit2 和通用路由器*. (2022年11月17日). Uniswap 协议: [https://blog.uniswap.org/permit2-and-universal-router#universal-router-unified-token-and-nft-swaps](https://blog.uniswap.org/permit2-and-universal-router#universal-router-unified-token-and-nft-swaps).'
- en: 'Finematics. (n.d.). *What is DeFi? Decentralized Finance Explained* (Ethereum,
    MakerDAO, Compound, Uniswap, Kyber) [Video]. YouTube: [https://www.youtube.com/watch?v=k9HYC0EJU6E](https://www.youtube.com/watch?v=k9HYC0EJU6E).'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Finematics. (n.d.). *什么是 DeFi？去中心化金融解释*（以太坊，MakerDAO，Compound，Uniswap，Kyber）[视频].
    YouTube: [https://www.youtube.com/watch?v=k9HYC0EJU6E](https://www.youtube.com/watch?v=k9HYC0EJU6E).'
- en: '*Helper functions*. (n.d.). Compound III Documentation: [https://docs.compound.finance/helper-functions/](https://docs.compound.finance/helper-functions/).'
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*助手函数*. (n.d.). Compound III 文档: [https://docs.compound.finance/helper-functions/](https://docs.compound.finance/helper-functions/).'
- en: '*Dune Analytics*. (n.d.). How to Write SQL to Get TVL & Diversification Metrics
    such as HHI and Weighted Volatility [Part 4] [Video]. YouTube: [https://www.youtube.com/watch?v=UiETadtYaLY](https://www.youtube.com/watch?v=UiETadtYaLY).'
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Dune Analytics*. (n.d.). 如何编写 SQL 获取 TVL 和多样化指标，如 HHI 和加权波动率 [第4部分] [视频].
    YouTube: [https://www.youtube.com/watch?v=UiETadtYaLY](https://www.youtube.com/watch?v=UiETadtYaLY).'
- en: '*Flash* *loans*: https://docs.aave.com/faq/flash-loans.'
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*闪电* *贷款*: https://docs.aave.com/faq/flash-loans.'
- en: 'Jp12\. (2022, June 17). *Optimism bridge comparison*. Medium: [https://jp12.medium.com/optimism-bridge-comparison-453fa1f476f6](https://jp12.medium.com/optimism-bridge-comparison-453fa1f476f6).'
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Jp12\. (2022年6月17日). *Optimism 桥接比较*. Medium: [https://jp12.medium.com/optimism-bridge-comparison-453fa1f476f6](https://jp12.medium.com/optimism-bridge-comparison-453fa1f476f6).'
- en: 'Dogecoin. (n.d.). *Do only good everyday*. Dogecoin – An open-source peer-to-peer
    digital currency: [https://dogecoin.com/#what-is-dogecoin](https://dogecoin.com/#what-is-dogecoin).'
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Dogecoin. (n.d.). *每天只做好的事*. Dogecoin – 一个开源的点对点数字货币: [https://dogecoin.com/#what-is-dogecoin](https://dogecoin.com/#what-is-dogecoin).'
- en: 'More Hop stats:'
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更多 Hop 统计数据：
- en: '[https://dune.com/eliasimos/Bridge-Away-(from-Ethereum)](https://dune.com/eliasimos/Bridge-Away-(from-Ethereum))'
  id: totrans-248
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://dune.com/eliasimos/Bridge-Away-(from-Ethereum)](https://dune.com/eliasimos/Bridge-Away-(from-Ethereum))'
- en: '[https://dune.com/queries/417810](https://dune.com/queries/417810)'
  id: totrans-249
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://dune.com/queries/417810](https://dune.com/queries/417810)'
- en: '[https://dune.xyz/rchen8/Hop-Exchange](https://dune.xyz/rchen8/Hop-Exchange)'
  id: totrans-250
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://dune.xyz/rchen8/Hop-Exchange](https://dune.xyz/rchen8/Hop-Exchange)'
- en: '[https://DeFillama.com/protocol/hop-protocol](https://DeFillama.com/protocol/hop-protocol)'
  id: totrans-251
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://DeFillama.com/protocol/hop-protocol](https://DeFillama.com/protocol/hop-protocol)'
- en: '[https://cryptofees.info/](https://cryptofees.info/)'
  id: totrans-252
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://cryptofees.info/](https://cryptofees.info/)'
- en: '[https://vfat.tools/polygon/hop/](https://vfat.tools/polygon/hop/)'
  id: totrans-253
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://vfat.tools/polygon/hop/](https://vfat.tools/polygon/hop/)'
- en: '[https://explorer.hop.exchange/](https://explorer.hop.exchange/)'
  id: totrans-254
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://explorer.hop.exchange/](https://explorer.hop.exchange/)'
- en: '[https://app.hop.exchange/stats](https://app.hop.exchange/stats)'
  id: totrans-255
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://app.hop.exchange/stats](https://app.hop.exchange/stats)'
- en: '[https://volume.hop.exchange/](https://volume.hop.exchange/)'
  id: totrans-256
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://volume.hop.exchange/](https://volume.hop.exchange/)'
- en: 'Hop Bridge. (n.d.). *Hop transfer diagram*. GitHub: [https://github.com/hop-exchange/contracts/blob/master/assets/Hop_Transfer_Diagrams.jpg](https://github.com/hop-exchange/contracts/blob/master/assets/Hop_Transfer_Diagrams.jpg).'
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Hop Bridge. (n.d.). *Hop 转移示意图*. GitHub: [https://github.com/hop-exchange/contracts/blob/master/assets/Hop_Transfer_Diagrams.jpg](https://github.com/hop-exchange/contracts/blob/master/assets/Hop_Transfer_Diagrams.jpg).'
- en: 'The following is a list of very valuable dashboards and analytical resources:'
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以下是一些非常有价值的仪表盘和分析资源列表：
- en: '| **CoinStats** | [https://coinstats.app/](https://coinstats.app/es/) |'
  id: totrans-259
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **CoinStats** | [https://coinstats.app/](https://coinstats.app/es/) |'
- en: '| **DeFillama** | [https://DeFillama.com/](https://DeFillama.com/) |'
  id: totrans-260
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **DeFillama** | [https://DeFillama.com/](https://DeFillama.com/) |'
- en: '| **Debank** | [https://debank.com/](https://debank.com/) |'
  id: totrans-261
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **Debank** | [https://debank.com/](https://debank.com/) |'
- en: '| **DeFiPulse** | [https://www.DeFipulse.com/](https://www.DeFipulse.com/)
    |'
  id: totrans-262
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **DeFiPulse** | [https://www.DeFipulse.com/](https://www.DeFipulse.com/)
    |'
- en: '| **LoanScan** | [https://linen.app/interest-rates/](https://linen.app/interest-rates/)
    |'
  id: totrans-263
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **LoanScan** | [https://linen.app/interest-rates/](https://linen.app/interest-rates/)
    |'
- en: '| **Nansen** | [https://www.nansen.ai/](https://www.nansen.ai/) |'
  id: totrans-264
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **Nansen** | [https://www.nansen.ai/](https://www.nansen.ai/) |'
- en: '| **Token Terminal** | [https://tokenterminal.com/terminal/markets/lending](https://tokenterminal.com/terminal/markets/lending)
    |'
  id: totrans-265
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **Token Terminal** | [https://tokenterminal.com/terminal/markets/lending](https://tokenterminal.com/terminal/markets/lending)
    |'
- en: '| **Zapper** | [https://zapper.xyz/dashboard](https://zapper.xyz/dashboard)
    |'
  id: totrans-266
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **Zapper** | [https://zapper.xyz/dashboard](https://zapper.xyz/dashboard)
    |'
- en: '| **Zerion** | [https://zerion.io/](https://zerion.io/) |'
  id: totrans-267
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **Zerion** | [https://zerion.io/](https://zerion.io/) |'
- en: '| **DEXTools** | [https://www.dextools.io/app/en](https://www.dextools.io/app/en)
    |'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **DEXTools** | [https://www.dextools.io/app/en](https://www.dextools.io/app/en)
    |'
- en: '| **GeckoTerminal** | [https://www.geckoterminal.com/](https://www.geckoterminal.com/)
    |'
  id: totrans-269
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **GeckoTerminal** | [https://www.geckoterminal.com/](https://www.geckoterminal.com/)
    |'
- en: '| **Into** **the Block** | [https://www.intotheblock.com/](https://www.intotheblock.com/)
    |'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **Into** **the Block** | [https://www.intotheblock.com/](https://www.intotheblock.com/)
    |'
- en: '| **Messari** | [https://messari.io/](https://messari.io/) |'
  id: totrans-271
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **Messari** | [https://messari.io/](https://messari.io/) |'
- en: '| **Stablecoin dashboard** | [https://stablecoins.wtf/](https://stablecoins.wtf/)
    |'
  id: totrans-272
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **稳定币仪表板** | [https://stablecoins.wtf/](https://stablecoins.wtf/) |'
- en: Table 5.3 – A list of valuable dashboards
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 表5.3 – 有价值的仪表板列表
- en: Part 2 Web3 Machine Learning Cases
  id: totrans-274
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第二部分 Web3 机器学习案例
- en: In this part of the book, we will apply common artificial intelligence tasks
    to Web3-related data. This approach offers us an overview of the tools commonly
    used in the Web3 space, building upon the data and sources explored in *Part 1*
    of the book.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的这一部分，我们将应用常见的人工智能任务于Web3相关数据。这一方法为我们提供了Web3领域常用工具的概述，并基于书中*第一部分*探索的数据和来源进行扩展。
- en: 'This part comprises the following chapters:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 本部分包括以下章节：
- en: '[*Chapter 6*](B19446_06.xhtml#_idTextAnchor210), *Preparing and Exploring Our
    Data*'
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第六章*](B19446_06.xhtml#_idTextAnchor210), *数据准备与探索*'
- en: '[*Chapter 7*](B19446_07.xhtml#_idTextAnchor228), *A Primer on Machine Learning
    and Deep Learning*'
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第七章*](B19446_07.xhtml#_idTextAnchor228), *机器学习与深度学习概论*'
- en: '[*Chapter 8*](B19446_08.xhtml#_idTextAnchor250), *Sentiment Analysis – NLP
    and Crypto-News*'
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第八章*](B19446_08.xhtml#_idTextAnchor250), *情感分析——自然语言处理与加密新闻*'
- en: '[*Chapter 9*](B19446_09.xhtml#_idTextAnchor269), *Generative Art for NFTs*'
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第九章*](B19446_09.xhtml#_idTextAnchor269), *NFT的生成艺术*'
- en: '[*Chapter 10*](B19446_10.xhtml#_idTextAnchor294), *A Primer on Security and
    Fraud Detection*'
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第十章*](B19446_10.xhtml#_idTextAnchor294), *安全性与欺诈检测概论*'
- en: '[*Chapter 11*](B19446_11.xhtml#_idTextAnchor307), *Price Prediction with Time
    Series*'
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第十一章*](B19446_11.xhtml#_idTextAnchor307), *时间序列预测价格*'
- en: '[*Chapter 12*](B19446_12.xhtml#_idTextAnchor327), *Marketing Discovery with
    Graphs*'
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*第十二章*](B19446_12.xhtml#_idTextAnchor327), *利用图表进行市场营销发现*'
