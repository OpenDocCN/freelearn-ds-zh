- en: '8'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '8'
- en: Grouping Users with Customer Segmentation
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用客户细分对用户进行分组
- en: 'To better understand consumer needs, we need to understand that our customers
    have distinct consumer patterns. Each mass of consumers of a given product or
    service can be divided into segments, described in terms of age, marital status,
    purchasing power, and so on. In this chapter, we will be performing an exploratory
    analysis of consumer data from a grocery store and then applying clustering techniques
    to separate them into segments with homogenous consumer patterns. This knowledge
    will enable us to better understand their needs, create unique offers, and target
    them more effectively. In this chapter, we will learn about the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解消费者需求，我们需要了解我们的客户具有不同的消费模式。每一类特定产品或服务的消费者群体可以根据年龄、婚姻状况、购买力等因素划分为不同的细分群体。在本章中，我们将对来自一家超市的消费者数据进行探索性分析，然后应用聚类技术将其分成具有相似消费模式的群体。这些知识将帮助我们更好地理解他们的需求，创造独特的优惠，并更有效地进行精准营销。在本章中，我们将学习以下内容：
- en: Understanding customer segmentation
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解客户细分
- en: Exploring data about a customer’s database
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索有关客户数据库的数据
- en: Applying feature engineering to standardize variables
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用特征工程来标准化变量
- en: Creating users’ segments with K-means clustering
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用K-means聚类创建用户细分
- en: Describing the common characteristics of these clusters
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 描述这些群体的共同特征
- en: Let us see the requirements to understand the steps and follow the chapter.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看理解步骤并跟随本章的要求。
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To be able to follow the steps in this chapter, you will need to meet the following
    requirements:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 为了能够跟随本章的步骤，您需要满足以下要求：
- en: A Jupyter notebook instance running Python 3.7 and above. You can also use the
    Google Colab notebook to run the steps if you have a Google Drive account.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行Python 3.7及以上版本的Jupyter Notebook实例。如果您有Google Drive账户，也可以使用Google Colab notebook运行步骤。
- en: An understanding of basic math and statistical concepts.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解基本的数学和统计学概念。
- en: 'A Kaggle account—you must agree to the terms and conditions of the competition
    from where we will get the data, which you can find here: [https://www.kaggle.com/datasets/imakash3011/customer-personality-analysis](https://www.kaggle.com/datasets/imakash3011/customer-personality-analysis).'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个Kaggle账户—您必须同意我们将获取数据的比赛条款和条件，您可以在此处找到：[https://www.kaggle.com/datasets/imakash3011/customer-personality-analysis](https://www.kaggle.com/datasets/imakash3011/customer-personality-analysis)。
- en: Understanding customer segmentation
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解客户细分
- en: Customer segmentation is the practice of classifying customers into groups based
    on shared traits so that businesses may effectively and appropriately market to
    each group. In **business-to-business** (**B2B**) marketing, a firm may divide
    its clientele into several groups based on a variety of criteria, such as location,
    industry, the number of employees, and previous purchases of the company’s goods.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 客户细分是将客户根据共同特征分类的实践，以便企业能够有效且恰当地向每个群体进行市场营销。在**企业对企业**（**B2B**）市场营销中，一家公司可能会根据多种标准将其客户群划分为几个组别，如地理位置、行业、员工人数以及公司商品的历史购买记录。
- en: Businesses frequently divide their clientele into segments based on demographics
    such as age, gender, marital status, location (urban, suburban, or rural), and
    life stage (single, married, divorced, empty nester, retired). Customer segmentation
    calls for a business to collect data about its customers, evaluate it, and look
    for trends that may be utilized to establish segments.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 企业通常根据人口统计学特征（如年龄、性别、婚姻状况、地理位置（城市、郊区或农村）和生活阶段（单身、已婚、离婚、空巢、退休））将客户群体划分为不同的细分市场。客户细分要求企业收集关于其客户的数据，评估这些数据，并寻找可用来建立细分市场的趋势。
- en: Job title, location, and products purchased—for example—are some of the details
    that can be learned from purchasing data to help businesses to learn about their
    customers. Some of this information might be discovered by looking at the customer’s
    system entry. An online marketer using an opt-in email list may divide marketing
    communications into various categories based on the opt-in offer that drew the
    client, for instance. However, other data—for example, consumer demographics such
    as age and marital status—will have to be gathered through different methods.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 职位名称、地点和购买的产品——例如——是从购买数据中可以获取的帮助企业了解其客户的一些细节。这些信息可能通过查看客户的系统记录发现。使用选择加入邮件列表的在线营销人员可能会根据吸引客户的选择加入优惠将营销通讯划分为不同类别。例如，其他数据——例如消费者的人口统计信息，如年龄和婚姻状况——则需要通过不同的方法收集。
- en: 'Other typical information-gathering methods in consumer goods include:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在消费品领域，其他典型的信息收集方法包括：
- en: Face-to-face interviews with customers
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与客户的面对面访谈
- en: Online surveys
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在线调查
- en: Online marketing and web traffic information
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在线营销和网站流量信息
- en: Focus groups
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 焦点小组
- en: All organizations, regardless of size, industry, and whether they sell online
    or in person, can use customer segmentation. It starts with obtaining and evaluating
    data and concludes with taking suitable and efficient action on the information
    acquired.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 所有组织，无论大小、行业，还是在线销售或面对面销售，都可以使用客户细分。这一过程从获取和评估数据开始，最终通过采取适当有效的行动来利用所获得的信息。
- en: We will execute an unsupervised clustering of data on the customer records from
    a grocery store’s database in this chapter. To maximize the value of each customer
    to the firm, we will segment our customer base to alter products in response to
    specific needs and consumer behavior. The ability to address the needs of various
    clientele also benefits the firm.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将对一家杂货店数据库中的客户记录执行无监督的聚类分析。为了最大化每位客户对公司的价值，我们将细分客户群体，根据特定需求和消费者行为调整产品。满足不同客户需求的能力也会使公司受益。
- en: Exploring the data
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 探索数据
- en: The first stage to understanding customer segments is to understand the data
    that we will be using. The first stage is, then, an exploration of the data to
    check the variables we must work with, handle non-structured data, and adjust
    data types. We will be structuring the data for the clustering analysis and gaining
    knowledge about the data distribution.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 理解客户细分的第一步是了解我们将使用的数据。第一阶段是探索数据，检查我们必须处理的变量，处理非结构化数据并调整数据类型。我们将为聚类分析构建数据，并了解数据的分布情况。
- en: 'For the analysis we will use in the next example, the following Python modules
    are used:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个示例中我们将使用以下 Python 模块进行分析：
- en: '**Pandas**: Python package for data analysis and data manipulation.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Pandas**：用于数据分析和数据处理的 Python 包。'
- en: '**NumPy**: This is a library that adds support for large, multi-dimensional
    arrays and matrices, along with an ample collection of high-level mathematical
    functions to operate on these arrays.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**NumPy**：这是一个为大规模、多维数组和矩阵提供支持的库，并附带大量的高阶数学函数，用于操作这些数组。'
- en: '`scipy` for statistical computations, including descriptive statistics and
    estimation and inference for statistical models. It provides classes and functions
    for the estimation of many different statistical models.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`scipy` 用于统计计算，包括描述性统计和统计模型的估算与推断。它提供用于估算多种统计模型的类和函数。'
- en: '**Yellowbrick**: A Python package of visual analysis and diagnostic tools designed
    to facilitate **machine learning** (**ML**) with scikit-learn.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Yellowbrick**：一个用于视觉分析和诊断工具的 Python 包，旨在通过 scikit-learn 促进 **机器学习**（**ML**）。'
- en: '**Seaborn, mpl_toolkits, and Matplotlib**: Python packages for effective data
    visualization.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Seaborn, mpl_toolkits 和 Matplotlib**：用于有效数据可视化的 Python 包。'
- en: 'We’ll now get started with the analysis, using the following steps:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将开始分析，采用以下步骤：
- en: 'The following block of code will load all the required packages mentioned earlier,
    including the functions that we will be using, such as `LabelEncoder`, `StandardScaler`,
    and `Kmeans`:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下代码块将加载之前提到的所有必要包，包括我们将使用的函数，例如 `LabelEncoder`、`StandardScaler` 和 `Kmeans`：
- en: '[PRE0]'
  id: totrans-35
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[PRE2]'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'For readability purposes, we will limit the maximum rows to be shown to 20,
    set the limit of maximum columns to 50, and show the floats with 2 digits of precision:'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了提高可读性，我们将限制显示的最大行数为 20，设置最大列数为 50，并将浮动数值显示为保留两位小数：
- en: '[PRE14]'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Next, we will load the data, which is stored in the local data folder. The
    file is in CSV format with a tab delimiter. We will read the data into a Pandas
    DataFrame and print the data shape as well as show the first rows:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将加载数据，这些数据存储在本地数据文件夹中。文件采用CSV格式，使用制表符作为分隔符。我们将数据读取到一个Pandas DataFrame中，并打印数据的形状，以及显示前几行：
- en: '[PRE17]'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '[PRE18]'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[PRE19]'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'This results in the following output:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这会生成以下输出：
- en: '![Figure 8.1: User data ](img/B19026_08_1.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.1：用户数据](img/B19026_08_1.jpg)'
- en: 'Figure 8.1: User data'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.1：用户数据
- en: 'In order to get a full picture of the steps that we will be taking to clean
    the dataset, let us have a look at the statistical summary of the data with the
    `describe` method:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了全面了解我们将采取的清洗数据集的步骤，让我们查看使用`describe`方法生成的数据的统计摘要：
- en: '[PRE21]'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'This results in the following output:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 这会生成以下输出：
- en: '![Figure 8.2: Descriptive statistical summary ](img/B19026_08_2.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.2：描述性统计摘要](img/B19026_08_2.jpg)'
- en: 'Figure 8.2: Descriptive statistical summary'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.2：描述性统计摘要
- en: 'To get more information on features, we can use the `info` method to display
    the number of `null` values and data types:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了获取更多关于特征的信息，我们可以使用`info`方法显示`null`值的数量和数据类型：
- en: '[PRE22]'
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'This results in the following output:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 这会生成以下输出：
- en: '![Figure 8.3: Column data types and null values ](img/B19026_08_3.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.3：列数据类型和缺失值](img/B19026_08_3.jpg)'
- en: 'Figure 8.3: Column data types and null values'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.3：列数据类型和缺失值
- en: 'From the preceding output shown with the `describe` and `info` methods of Pandas
    DataFrames, we can see the following:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 从之前使用Pandas DataFrame的`describe`和`info`方法显示的输出中，我们可以看到以下内容：
- en: There are 26 missing values in the `Income` column
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Income`列中有26个缺失值'
- en: The date variable named `Dt_Customer`, indicating the date a customer joined
    the database, is not parsed as `DateTime`
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 名为`Dt_Customer`的日期变量，表示客户加入数据库的日期，并未被解析为`DateTime`
- en: There are categorical features in our DataFrame of the `dtype` object that we
    will need to encode into numerical features later to be able to apply the clustering
    method
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们的DataFrame中有一些类别特征，其`dtype`为对象类型，我们稍后需要将它们编码为数值特征，以便能够应用聚类方法。
- en: 'To address the missing values, we will drop the rows that have missing income
    values, as it is an important variable to describe to customers:'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了处理缺失值，我们将删除缺失收入值的行，因为收入是描述客户的重要变量：
- en: '[PRE23]'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '[PRE24]'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'We will parse the date column using the `pd.to_datetime` Pandas method. Take
    into account that the method will infer the format of the date, but we can otherwise
    specify it if it is necessary:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将使用`pd.to_datetime` Pandas方法解析日期列。需要注意的是，该方法会自动推断日期格式，但如果需要，我们也可以指定格式：
- en: '[PRE25]'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'After parsing the dates, we can look at the values of the newest and oldest
    recorded customer:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在解析日期之后，我们可以查看最新和最早注册客户的值：
- en: '[PRE26]'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '[PRE27]'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'In the next step, we will create a feature out of `Dt_Customer` that indicates
    the number of days a customer is registered in the firm’s database, relative to
    the first user that was registered in the database, although we could use today’s
    date. We do this because we are analyzing historical records and not up-to-date
    data. The `Customer_For` feature is, then, the date of when the customer was registered
    minus the minimum value in the date column and can be interpreted as the number
    of days since customers started to shop in the store relative to the last recorded
    date:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一步中，我们将创建一个基于`Dt_Customer`的特征，表示客户注册公司数据库的天数，相对于数据库中第一个注册的用户，尽管我们也可以使用今天的日期。我们这样做是因为我们分析的是历史记录，而不是最新数据。`Customer_For`特征是客户注册日期减去日期列中的最小值，可以解释为客户开始在商店购物以来的天数，相对于最后记录的日期：
- en: '[PRE28]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '[PRE29]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Now, we will explore the unique values in the categorical features to get a
    clear idea of the data:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将探索类别特征中的唯一值，以更清楚地了解数据：
- en: '[PRE30]'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '![Figure 8.4: Marital status ](img/B19026_08_4.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.4：婚姻状况](img/B19026_08_4.jpg)'
- en: 'Figure 8.4: Marital status'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.4：婚姻状况
- en: Here, we can see that there are several types of marital status, which may have
    been caused by free text entry during the data capturing. We will have to standardize
    these values.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们可以看到有几种婚姻状况，这可能是由于数据采集时自由文本输入造成的。我们将需要标准化这些值。
- en: 'Next, we will look at the values in the `Education` feature using the `value_counts`
    method to create a bar chart using the Pandas `plot` method:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将使用`value_counts`方法查看`Education`特征中的值，并使用Pandas的`plot`方法绘制条形图：
- en: '[PRE31]'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '![Figure 8.5: Education values ](img/B19026_08_5.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.5：教育水平值](img/B19026_08_5.jpg)'
- en: 'Figure 8.5: Education values'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.5：教育水平值
- en: Again, we can see the effects of free text entry as there are several values
    that have the same underlying meaning; thus, we will need to standardize them
    as well.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，我们可以看到自由文本输入的影响，因为有几个值具有相同的基本含义；因此，我们也需要对它们进行标准化处理。
- en: In the next section, we will apply feature engineering to structure the data
    for better understanding and treatment of the data.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分，我们将应用特征工程来结构化数据，以便更好地理解和处理数据。
- en: Feature engineering
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 特征工程
- en: To be able to properly analyze the data as well as to model the clusters, we
    will need to clean and structure the data—a step that is commonly referred to
    as feature engineering—as we need to restructure some of the variables according
    to our plan of analysis.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 为了能够正确分析数据以及建模集群，我们需要清理和结构化数据——这个步骤通常被称为特征工程——因为我们需要根据分析计划重新结构化一些变量。
- en: 'In this section, we will be performing the next steps to clean and structure
    some of the dataset features, with the goal of simplifying the existing variables
    and creating features that are easier to understand and describe the data properly:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我们将执行下一步操作，清理和结构化一些数据集特征，目标是简化现有变量，并创建更易于理解的特征，以正确描述数据：
- en: Create an `Age` variable for a customer by using the `Year_Birth` feature, indicating
    the birth year of the respective person.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`Year_Birth`特征创建一个`Age`变量，表示每位客户的出生年份。
- en: Create a `Living_With` feature to simplify the marital status, to describe the
    living situation of couples.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个`Living_With`特征，以简化婚姻状况，描述夫妻的居住情况。
- en: Create a `Children` feature to indicate the total number of children in a household—that
    is, kids and teenagers.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个`Children`特征，表示家庭中孩子的总数——即儿童和青少年。
- en: Aggregate spending by product type to better capture consumer behaviors.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照产品类型汇总支出，以更好地捕捉消费者行为。
- en: Indicate parenthood status with a feature named `Is_Parent`.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用一个名为`Is_Parent`的特征表示父母身份。
- en: 'So, let’s apply the steps mentioned here to structure the data:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，让我们应用这里提到的步骤来结构化数据：
- en: 'First, let us start with the age of the customer as of today, using the `pd.to_datetime`
    method to get the current year and the year of birth of the customers:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，让我们从客户当前的年龄开始，使用`pd.to_datetime`方法获取当前年份和客户的出生年份：
- en: '[PRE32]'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '[PRE33]'
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Now, we will model the spending on distinct items by using the `sum` method
    on selected columns and summing along the column axis:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将使用`sum`方法对选定列进行求和，并沿列轴汇总支出数据：
- en: '[PRE34]'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '[PRE35]'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: '[PRE36]'
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'As the next step, we will map the marital status values into a different encoding
    to simplify terms with close meaning. For this, we define a mapping dictionary
    and use it to replace the values in the `marital_status` column to create a new
    feature:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 作为下一步，我们将婚姻状况的值映射到不同的编码中，以简化含义相近的术语。为此，我们定义一个映射字典，并用它来替换`marital_status`列中的值，创建一个新特征：
- en: '[PRE37]'
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: '[PRE38]'
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: '[PRE39]'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '[PRE40]'
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: '[PRE41]'
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '[PRE42]'
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '[PRE43]'
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: '[PRE44]'
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Next, we create a `Children` feature by summing up the total number of children
    living in the household plus teens living at home:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们通过将家庭中孩子和青少年的总数相加，创建一个`Children`特征：
- en: '[PRE45]'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Now, we model the total members in the household using the relationship and
    children data:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们使用关系和儿童数据建模家庭成员总数：
- en: '[PRE46]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'Finally, we capture the parenthood status in a new variable:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们在一个新变量中捕捉父母身份：
- en: '[PRE47]'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Now, we will segment education levels into three groups for simplification:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将教育水平分为三个组以便简化：
- en: '[PRE48]'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '[PRE49]'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Now, to simplify, we rename columns into more understandable terms using a
    mapping dictionary:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，为了简化，我们使用映射字典将列重命名为更易于理解的术语：
- en: '[PRE50]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE50]'
- en: '[PRE51]'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE51]'
- en: '[PRE52]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE52]'
- en: '[PRE53]'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE53]'
- en: '[PRE54]'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE54]'
- en: '[PRE55]'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE55]'
- en: '[PRE56]'
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'Now, we will drop some of the redundant features to focus on the clearest features,
    including the ones we just created. Finally, we will look at the statistical descriptive
    analysis using the `describe` method:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将删除一些冗余特征，专注于最清晰的特征，包括我们刚刚创建的特征。最后，我们将使用`describe`方法查看统计描述分析：
- en: '[PRE57]'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '[PRE58]'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE58]'
- en: '[PRE59]'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE59]'
- en: '[PRE60]'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'The stats show us that there are some discrepancies in the `Income` and `Age`
    features, which we will visualize to better understand these inconsistencies.
    We will start with a histogram of `Age`:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 统计数据显示，`Income`和`Age`特征中存在一些不一致的情况，我们将通过可视化来更好地理解这些不一致之处。我们从`Age`的直方图开始：
- en: '[PRE61]'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE61]'
- en: '![Figure 8.6: Age data ](img/B19026_08_6.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![Figure 8.6: Age data ](img/B19026_08_6.jpg)'
- en: 'Figure 8.6: Age data'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 'Figure 8.6: Age data'
- en: We can see that there are some outliers, more than 120 years old, so we will
    be removing those.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到有一些异常值，年龄超过120岁，因此我们将移除这些异常值。
- en: 'Next, we look at the income distribution:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们来看一下收入分布：
- en: '[PRE62]'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE62]'
- en: '![Figure 8.7: Income data ](img/B19026_08_7.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![图8.7：收入数据](img/B19026_08_7.jpg)'
- en: 'Figure 8.7: Income data'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.7：收入数据
- en: Again, we can see that most incomes are below 20,000, so we will be limiting
    the spending level.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，我们可以看到大多数收入低于20,000，因此我们将限制消费水平。
- en: 'Next, we drop the outliers by setting a cap on `Age` to avoid data that doesn’t
    reflect reality, and the income to include 99% of the cases:'
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们通过设置`年龄`的上限来剔除异常值，以避免数据不真实，并将收入限定为包含99%的案例：
- en: '[PRE63]'
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE63]'
- en: '[PRE64]'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE64]'
- en: '[PRE65]'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE65]'
- en: '[PRE66]'
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE66]'
- en: '[PRE67]'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'The preceding code prints the next output:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码将输出以下内容：
- en: '[PRE68]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: 'Now, we can look back at the `Age` and `Spend` data distribution to better
    understand our customers. We start by creating a histogram plot of the `Age` feature:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以回过头来查看`年龄`和`消费`数据分布，以更好地了解我们的客户。我们首先通过创建`年龄`特征的直方图来开始：
- en: '[PRE69]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE69]'
- en: '![Figure 8.8: Age with no outliers ](img/B19026_08_8.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![图8.8：无异常值的年龄分布](img/B19026_08_8.jpg)'
- en: 'Figure 8.8: Age with no outliers'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.8：无异常值的年龄分布
- en: The age is centered on the 50s, with a skew to the right, meaning that the average
    age of our customers is above 45 years.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 年龄集中在50岁左右，右偏，意味着我们的客户的平均年龄超过45岁。
- en: '[PRE70]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: '![Figure 8.9: Income with no outliers ](img/B19026_08_9.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![图8.9：无异常值的收入分布](img/B19026_08_9.jpg)'
- en: 'Figure 8.9: Income with no outliers'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.9：无异常值的收入分布
- en: Looking at the spend distribution, it has a normal distribution, centered on
    4,000 and slightly skewed to the left.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 查看消费分布，它呈正态分布，集中在4,000左右，略微向左偏斜。
- en: 'Up next, we will create a Seaborn pair plot to show the relationships between
    the different variables, with color labeling according to the parental status:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将创建一个Seaborn成对图，以根据父母身份的颜色标签显示不同变量之间的关系：
- en: '[PRE71]'
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE71]'
- en: '![Figure 8.10: Relationship plot ](img/B19026_08_10.jpg)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![图8.10：关系图](img/B19026_08_10.jpg)'
- en: 'Figure 8.10: Relationship plot'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.10：关系图
- en: These graphics allow us to quickly observe relationships between the different
    variables, as well as their distribution. One of the clearest is the relationship
    between spend and income, in which we can see that the higher the income, the
    higher the expenditure, as well as observing that single parents spend more than
    people who are not. We can also see that the consumers with higher recency are
    parents, while single consumers have lower recency values. Next, let us look at
    the correlation among the features (excluding the categorical attributes at this
    point).
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 这些图形使我们能够快速观察不同变量之间的关系以及它们的分布。最明显的关系之一是消费与收入之间的关系，我们可以看到收入越高，支出越高，同时还观察到单亲家庭的支出大于非单亲家庭。我们还可以看到，最近一次消费行为较频繁的是父母，而单身消费者的消费频率较低。接下来，让我们来看一下特征之间的相关性（此时排除类别属性）。
- en: 'We will create a correlation matrix using the `corr` method, and show only
    the lower triangle of data using a `numpy` mask. Finally, we will use a Seaborn
    method to display the values:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将使用`corr`方法创建相关矩阵，并通过`numpy`掩码仅显示数据的下三角部分。最后，我们将使用Seaborn方法来显示这些值：
- en: '[PRE72]'
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE72]'
- en: '[PRE73]'
  id: totrans-178
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE73]'
- en: '[PRE74]'
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE74]'
- en: '[PRE75]'
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE75]'
- en: '[PRE76]'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE76]'
- en: '[PRE77]'
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE77]'
- en: '![Figure 8.11: Variable correlation ](img/B19026_08_11.jpg)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![图8.11：变量相关性](img/B19026_08_11.jpg)'
- en: 'Figure 8.11: Variable correlation'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.11：变量相关性
- en: The correlations allow us to explore the variable relationships in more detail.
    We can see negative correlations between children and expenditure in the mean,
    while there are positive relationships between children and recency. These correlations
    allow us to better understand consumption patterns.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 这些相关性使我们能够更详细地探索变量之间的关系。我们可以看到，在平均值上，子女数量与消费支出呈负相关，而子女数量与最近消费行为呈正相关。这些相关性有助于我们更好地理解消费模式。
- en: In the next section, we will use the concept of clustering to segment the clients
    into groups that share common characteristics.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将使用聚类概念将客户分成具有共同特征的群体。
- en: Creating client segments
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建客户细分
- en: 'Marketers can better target different audience subgroups with their marketing
    efforts by segmenting their audiences. Both product development and communications
    might be a part of those efforts. Segmentation benefits a business by allowing
    the following:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 市场营销人员可以通过细分目标受众，更好地针对不同的受众子群体进行营销。产品开发和传播可能是这些努力的一部分。细分为企业带来如下好处：
- en: Creating targeted marketing communication on the right communication channel
    for each client or user segment
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为每个客户或用户群体在合适的沟通渠道上创建有针对性的营销传播
- en: Applying the right pricing options to the right clients
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对正确的客户应用正确的定价选项
- en: Concentrating on the most lucrative clients
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集中精力在最有利可图的客户身上
- en: Providing better client service
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供更好的客户服务
- en: Promoting and cross-promoting other goods and services
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 推广和交叉推广其他商品和服务
- en: 'In this section, we will be preprocessing the data to be able to apply clustering
    methods for customer segmentation. The steps that we will apply to preprocess
    the data are set out here:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将对数据进行预处理，以便应用聚类方法进行客户细分。我们将在这里列出用于预处理数据的步骤：
- en: Encoding the categorical variables using a label encoder, which will transform
    them into numerical columns
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用标签编码器对分类变量进行编码，将它们转换为数值列
- en: Scaling features using the standard scaler to normalize the values
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用标准缩放器对特征进行缩放，以规范化值
- en: Applying **principal component analysis** (**PCA**) for dimensionality reduction
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用**主成分分析**（**PCA**）进行降维
- en: 'So, let’s follow the steps here:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，让我们按照这里的步骤进行操作：
- en: 'First, we need to list the categorical variables. Here, we will use the column
    names and check the column `dtype` to get only the object columns:'
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们需要列出分类变量。在这里，我们将使用列名并检查列的`dtype`，以仅获取对象列：
- en: '[PRE78]'
  id: totrans-200
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE78]'
- en: '[PRE79]'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE79]'
- en: 'Next, we will encode the `dtypes` object using the `sklearn` `LabelEncoder`
    function:'
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将使用`sklearn`的`LabelEncoder`函数对`dtypes`对象进行编码：
- en: '[PRE80]'
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE80]'
- en: '[PRE81]'
  id: totrans-204
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE81]'
- en: '[PRE82]'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE82]'
- en: 'We subset the data and apply scaling to the numerical variables by dropping
    the features on deals accepted and promotions:'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们对数据进行子集选择，并通过删除“已接受交易”和“促销”特征，对数值变量进行缩放：
- en: '[PRE83]'
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE83]'
- en: '[PRE84]'
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE84]'
- en: '[PRE85]'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE85]'
- en: 'Finally, we can apply the scaling:'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们可以应用缩放：
- en: '[PRE86]'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE86]'
- en: '[PRE87]'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE87]'
- en: '[PRE88]'
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE88]'
- en: '[PRE89]'
  id: totrans-214
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE89]'
- en: There are numerous attributes in this dataset that describe the data. The more
    features there are, the more difficult it is to correctly analyze them in a business
    environment. Many of these characteristics are redundant since they are connected.
    Therefore, before running the features through a classifier, we will conduct dimensionality
    reduction on the chosen features.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 这个数据集中有许多属性描述了数据。特征越多，在商业环境中正确分析它们就越困难。这些特征中的许多是冗余的，因为它们是相互关联的。因此，在将特征输入分类器之前，我们将对选定的特征进行降维处理。
- en: Dimensionality reduction is the process of reducing the number of random variables
    considered. To reduce the dimensionality of huge datasets, a technique known as
    PCA is frequently utilized. PCA works by condensing an ample collection of variables
    into a smaller set that still retains much of the data in the larger set.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 降维是减少考虑的随机变量数量的过程。为了降低大型数据集的维度，通常使用一种名为PCA的技术。PCA通过将大量变量压缩成一个较小的集合，同时保留较大集合中的大部分数据来工作。
- en: Accuracy naturally suffers as a dataset’s variables are reduced, but the answer
    to dimensionality reduction is to trade a little accuracy for simplicity since
    ML algorithms can analyze data much more quickly and easily with smaller datasets
    because there are fewer unnecessary factors to process. In conclusion, the basic
    principle of PCA is to keep as much information as possible while reducing the
    number of variables in the data collected.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 随着数据集变量的减少，准确性自然会下降，但降维的答案是牺牲一些准确性换取简单性，因为机器学习算法可以通过更小的数据集更快速、更容易地分析数据，因为需要处理的无关因素更少。总之，PCA的基本原则是尽可能保留信息，同时减少所收集数据中的变量数量。
- en: 'The steps that we will be applying in this section are the following:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 本节中我们将应用的步骤如下：
- en: Dimensionality reduction with PCA
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用PCA进行降维
- en: Plotting the reduced DataFrame in a 3D plot
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在三维图中绘制降维后的DataFrame
- en: Dimensionality reduction with PCA, again
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用PCA进行降维，再一次
- en: 'This will allow us to have a way to visualize the segments projected into three
    dimensions. In an ideal setup, we will use the weights of each component to understand
    what each component represents and make sense of the information we are visualizing
    in a better way. For reasons of simplicity, we will focus on the visualization
    of the components. Here are the steps:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 这将使我们能够以三维的方式可视化投影的细分。在理想的设置中，我们将使用每个成分的权重来理解每个成分所代表的意义，并更好地理解我们正在可视化的信息。为了简化起见，我们将专注于成分的可视化。以下是步骤：
- en: 'First, we will initiate PCA to reduce dimensions or features to three in order
    to reduce complexity:'
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们将启动PCA，将维度或特征减少到三个，以简化复杂性：
- en: '[PRE90]'
  id: totrans-224
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE90]'
- en: '[PRE91]'
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE91]'
- en: '[PRE92]'
  id: totrans-226
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE92]'
- en: '[PRE93]'
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE93]'
- en: The amount of variation in a dataset that can be attributed to each of the main
    components (eigenvectors) produced by a PCA is measured statistically as “explained
    variance”. This simply refers to how much of a dataset’s variability may be attributed
    to each unique primary component.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 数据集中每个主成分（特征向量）所解释的变异度被统计为“解释的方差”。这只是指数据集中每个唯一主成分可以解释的数据变异度。
- en: '[PRE94]'
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE94]'
- en: '[PRE95]'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE95]'
- en: 'For this project, we will reduce the dimensions to three, which manages to
    explain the 54% total variance in the observed variables:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个项目，我们将把维度减少到三维，这能够解释观察变量的54%的总方差：
- en: '[PRE96]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: 'Now we can project the data into a 3D plot to see the points’ distribution:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们可以将数据投影到3D图中，以查看点的分布：
- en: '[PRE97]'
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE97]'
- en: '[PRE98]'
  id: totrans-235
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE98]'
- en: '[PRE99]'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE99]'
- en: '[PRE100]'
  id: totrans-237
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE100]'
- en: '[PRE101]'
  id: totrans-238
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE101]'
- en: '[PRE102]'
  id: totrans-239
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE102]'
- en: '[PRE103]'
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE103]'
- en: 'The preceding code will show us the dimensions projected in three dimensions:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码将展示我们在三维中投影的维度：
- en: '![Figure 8.12: PCA variables in 3D ](img/B19026_08_12.jpg)'
  id: totrans-242
  prefs: []
  type: TYPE_IMG
  zh: '![图8.12：PCA变量的三维表现](img/B19026_08_12.jpg)'
- en: 'Figure 8.12: PCA variables in 3D'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.12：PCA变量的三维表现
- en: Since the attributes are now only three dimensions, agglomerative clustering
    will be used to perform the clustering. A hierarchical clustering technique is
    agglomerative clustering. Up until the appropriate number of clusters is reached,
    examples are merged.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 由于现在的属性仅有三维，聚合聚类将用于执行聚类。凝聚聚类是一种层次聚类技术。在达到适当数量的簇之前，样本将会被合并。
- en: The process of clustering involves grouping the population or data points into
    a number of groups so that the data points within each group are more like one
    another than the data points within other groups. Simply put, the goal is to sort
    into clusters any groups of people who share similar characteristics. Finding
    unique groups, or “clusters”, within a data collection is the aim of clustering.
    The tool uses an ML algorithm to construct groups, where members of a group would
    typically share similar traits.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 聚类的过程涉及将数据点分组，使得每个组内的数据点比其他组中的数据点更相似。简而言之，目标是将具有相似特征的任何组分成簇。聚类的目标是在数据集中找到独特的组，或称为“簇”。该工具使用机器学习算法来构建组，组内的成员通常会共享相似的特征。
- en: Two methods of pattern recognition used in ML are classification and clustering.
    Although there are some parallels between the two processes, clustering discovers
    similarities between things and groups them according to those features that set
    them apart from other groups of objects, whereas classification employs predetermined
    classes to which objects are assigned. “Clusters” is the name for these collections.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 机器学习中使用的两种模式识别方法是分类和聚类。虽然这两个过程之间有一些相似之处，但聚类发现事物之间的相似性，并根据那些将它们与其他对象组区分开来的特征将其分组，而分类则使用预定的类别将对象分配到这些类别中。“簇”是这些集合的名称。
- en: 'The steps involved in clustering are set out here:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 聚类涉及的步骤如下：
- en: Elbow method to determine the number of clusters to be formed
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 肘部法用于确定要形成的簇的数量
- en: Clustering via agglomerative clustering
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过凝聚聚类进行聚类
- en: Examining the clusters formed via a scatter plot
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过散点图检查形成的簇
- en: In K-means clustering, the ideal number of clusters is established using the
    elbow approach. The number of clusters, or K, formed by various values of the
    cost function are plotted using the elbow approac:.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 在K均值聚类中，理想的簇数是通过肘部法来确定的。通过肘部法绘制不同成本函数值下形成的簇的数量或K：
- en: 'The elbow approach is a heuristic used in cluster analysis to estimate the
    number of clusters present in a dataset. Plotting the explained variation as a
    function of the number of clusters, the procedure entails choosing the elbow of
    the curve as the appropriate number of clusters, as illustrated in the following
    code snippet:'
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 肘部法是一种启发式方法，用于聚类分析，以估计数据集中存在的簇的数量。将解释的变异度作为簇的数量的函数进行绘图，该过程包括选择曲线的肘部作为适当的簇数，如以下代码片段所示：
- en: '[PRE104]'
  id: totrans-253
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE104]'
- en: '[PRE105]'
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE105]'
- en: '[PRE106]'
  id: totrans-255
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE106]'
- en: '[PRE107]'
  id: totrans-256
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE107]'
- en: 'This code will plot an elbow plot, which will be a good estimation of the required
    number of clusters:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 这段代码将绘制肘部图，这是对所需簇数的一个良好估算：
- en: '![Figure 8.13: Elbow method ](img/B19026_08_13.jpg)'
  id: totrans-258
  prefs: []
  type: TYPE_IMG
  zh: '![图8.13：肘部法](img/B19026_08_13.jpg)'
- en: 'Figure 8.13: Elbow method'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.13：肘部法
- en: 'According to the preceding cell, four clusters will be the best choice for
    this set of data. To obtain the final clusters, we will then fit the agglomerative
    clustering model, like so:'
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据前面的单元，四个簇将是这个数据集的最佳选择。为了获得最终的簇，我们将拟合凝聚聚类模型，如下所示：
- en: '[PRE108]'
  id: totrans-261
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE108]'
- en: '[PRE109]'
  id: totrans-262
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE109]'
- en: '[PRE110]'
  id: totrans-263
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE110]'
- en: '[PRE111]'
  id: totrans-264
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE111]'
- en: 'Finally, we will add a `Clusters` feature to the original DataFrame for visualization:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们将向原始 DataFrame 中添加一个 `Clusters` 特征，以便进行可视化：
- en: '[PRE112]'
  id: totrans-266
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE112]'
- en: 'Now, we can visualize the clusters in three dimensions using the color codes
    of each cluster:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以使用每个集群的颜色代码，在三维空间中可视化集群：
- en: '[PRE113]'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE113]'
- en: '[PRE114]'
  id: totrans-269
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE114]'
- en: '[PRE115]'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE115]'
- en: '[PRE116]'
  id: totrans-271
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE116]'
- en: '[PRE117]'
  id: totrans-272
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE117]'
- en: '[PRE118]'
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE118]'
- en: '[PRE119]'
  id: totrans-274
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE119]'
- en: 'The preceding code will show a three-dimensional visualization of the PCA components
    colored according to the clusters:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码将显示一个三维可视化的 PCA 组件，颜色根据集群进行区分：
- en: '![Figure 8.14: PCA variables with cluster labeling ](img/B19026_08_14.jpg)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.14：PCA 变量与集群标注](img/B19026_08_14.jpg)'
- en: 'Figure 8.14: PCA variables with cluster labeling'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.14：PCA 变量与集群标注
- en: From this, we can see that each cluster occupies a specific space in the visualization.
    We will now dive into a description of each cluster to better understand these
    segments.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 从中我们可以看到，每个集群在可视化中占据了一个特定的空间。现在我们将深入描述每个集群，以便更好地理解这些群体。
- en: Understanding clusters as customer segments
  id: totrans-279
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将集群理解为客户群体
- en: To rigorously evaluate the output obtained, we need to evaluate the depicted
    clusters. This is because clustering is an unsupervised method and the patterns
    extracted should always reflect reality, otherwise; we might just as well be analyzing
    noise.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 为了严格评估获得的输出结果，我们需要评估所描述的集群。这是因为集群分析是一种无监督的方法，提取的模式应该始终反映现实，否则，我们可能只是在分析噪声。
- en: Common traits among consumer groups can help a business choose which items or
    services to advertise to which segments and how to market to each one.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 消费者群体之间的共同特征可以帮助企业选择哪些商品或服务应该向哪些群体广告宣传，以及如何向每个群体进行市场营销。
- en: 'To do that, we will use **exploratory data analysis** (**EDA**) to look at
    the data in the context of clusters and make judgments. Here are the steps:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 为了做到这一点，我们将使用**探索性数据分析**（**EDA**）在集群的上下文中查看数据并做出判断。以下是步骤：
- en: 'Let us first examine the clustering group distribution:'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们首先检查集群组分布：
- en: '[PRE120]'
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE120]'
- en: '[PRE121]'
  id: totrans-285
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE121]'
- en: '[PRE122]'
  id: totrans-286
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE122]'
- en: '[PRE123]'
  id: totrans-287
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE123]'
- en: '![Figure 8.15: Cluster count ](img/B19026_08_15.jpg)'
  id: totrans-288
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.15：集群数量](img/B19026_08_15.jpg)'
- en: 'Figure 8.15: Cluster count'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.15：集群数量
- en: The clusters are fairly distributed with a predominance of cluster 0\. It can
    be clearly seen that cluster 1 is our biggest set of customers, closely followed
    by cluster 0.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 各集群分布相对均衡，集群 0 占主导地位。可以清晰地看到，集群 1 是我们最大的客户群体，其次是集群 0。
- en: 'We can explore what each cluster is spending on for the targeted marketing
    strategies using the following code:'
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以使用以下代码来探索每个集群在目标营销策略上的消费：
- en: '[PRE124]'
  id: totrans-292
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE124]'
- en: '[PRE125]'
  id: totrans-293
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE125]'
- en: '[PRE126]'
  id: totrans-294
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE126]'
- en: '[PRE127]'
  id: totrans-295
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE127]'
- en: '[PRE128]'
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE128]'
- en: '![Figure 8.16: Income versus spending ](img/B19026_08_16.jpg)'
  id: totrans-297
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.16：收入与消费关系](img/B19026_08_16.jpg)'
- en: 'Figure 8.16: Income versus spending'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.16：收入与消费关系
- en: 'In the income versus spending plot, we can see the next cluster patterns:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 在收入与消费关系图中，我们可以看到下一个集群的模式：
- en: Cluster 0 is of high spending and average income
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群 0 是高消费和中等收入的群体
- en: Cluster 1 is of high spending and high income
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群 1 是高消费和高收入的群体
- en: Cluster 2 is of low spending and low income
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群 2 是低消费和低收入的群体
- en: Cluster 3 is of high spending and low income
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集群 3 是高消费和低收入的群体
- en: 'Next, we will see the detailed distribution of clusters of the expenditure
    per product in the data. Namely, we will explore expenditure patterns. The code
    is illustrated here:'
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将查看数据中每个产品的消费集群的详细分布。即，我们将探索消费模式。以下是代码：
- en: '[PRE129]'
  id: totrans-305
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE129]'
- en: '[PRE130]'
  id: totrans-306
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE130]'
- en: '[PRE131]'
  id: totrans-307
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE131]'
- en: '![Figure 8.17: Spend distribution per cluster ](img/B19026_08_17.jpg)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.17：每个集群的消费分布](img/B19026_08_17.jpg)'
- en: 'Figure 8.17: Spend distribution per cluster'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.17：每个集群的消费分布
- en: From *Figure 8**.17*, it can be seen how the spend is evenly distributed in
    cluster 0, cluster 1 is centered on high expenditure, and clusters 2 and 3 center
    on low expenditure.
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 从*图 8.17*中可以看到，集群 0 的消费分布较为均匀，集群 1 的消费集中在高消费上，而集群 2 和 3 则集中在低消费上。
- en: 'Next, we will use Seaborn to create Boxen plots of the clusters to find the
    spend distribution per cluster:'
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将使用 Seaborn 创建集群的 Boxen 图，以找出每个集群的消费分布：
- en: '[PRE132]'
  id: totrans-312
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE132]'
- en: '[PRE133]'
  id: totrans-313
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE133]'
- en: '![Figure 8.18:  Spend distribution per cluster (Boxen plot) ](img/B19026_08_18.jpg)'
  id: totrans-314
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.18：每个集群的消费分布（Boxen 图）](img/B19026_08_18.jpg)'
- en: 'Figure 8.18: Spend distribution per cluster (Boxen plot)'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.18：每个集群的消费分布（Boxen 图）
- en: We can visualize the patterns in a different way using a Boxen plot.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用不同的方式来可视化这些模式，使用 Boxen 图。
- en: 'Next, we will create a feature to get a sum of accepted promotions so that
    we can model their relationships with the different clusters:'
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将创建一个特征来获取接受的促销活动总和，以便我们能够建模它们与不同集群之间的关系：
- en: '[PRE134]'
  id: totrans-318
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE134]'
- en: 'Now, we will plot the count of total campaigns accepted in relation to the
    clusters:'
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们将绘制接受的总营销活动数量与集群之间的关系图：
- en: '[PRE135]'
  id: totrans-320
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE135]'
- en: '[PRE136]'
  id: totrans-321
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE136]'
- en: '[PRE137]'
  id: totrans-322
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE137]'
- en: '[PRE138]'
  id: totrans-323
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE138]'
- en: '[PRE139]'
  id: totrans-324
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE139]'
- en: '![Figure 8.19: Promotions applied per cluster ](img/B19026_08_19.jpg)'
  id: totrans-325
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.19：每个群体应用的促销活动](img/B19026_08_19.jpg)'
- en: 'Figure 8.19: Promotions applied per cluster'
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.19：每个群体应用的促销活动
- en: We can see that although there is no characteristic pattern in the promotions
    per cluster, we can see that cluster 0 and cluster 2 are the ones with the highest
    number of applied promotions.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，尽管每个群体的促销活动没有显著的特征模式，但我们可以看到群体 0 和群体 2 是应用促销活动数量最多的两个群体。
- en: 'Now, we can visualize the number of deals purchased per type of cluster:'
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们可以将每种群体类型的购买交易数量可视化：
- en: '[PRE140]'
  id: totrans-329
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE140]'
- en: '[PRE141]'
  id: totrans-330
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE141]'
- en: '[PRE142]'
  id: totrans-331
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE142]'
- en: '![Figure 8.20: Purchased deals per cluster ](img/B19026_08_20.jpg)'
  id: totrans-332
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.20：每个群体购买的交易数量](img/B19026_08_20.jpg)'
- en: 'Figure 8.20: Purchased deals per cluster'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.20：每个群体购买的交易数量
- en: Promotional campaigns failed to be widespread, but the transactions were successful.
    The results from clusters 0 and 2 are the best. Cluster 1, one of our top clients,
    is not interested in the promotions, though. Nothing draws cluster 1 in a strong
    way.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 促销活动未能广泛传播，但交易却非常成功。群体 0 和群体 2 的结果是最好的。群体 1 是我们的顶级客户之一，但他们对促销活动不感兴趣。没有什么能强烈吸引群体
    1。
- en: Now that the clusters have been created and their purchasing patterns have been
    examined, let us look at everyone in these clusters. To determine who is our star
    customer and who requires further attention from the retail store’s marketing
    team, we will profile the clusters that have been developed.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，群体已经创建并且其购买模式已经被分析，我们来看看这些群体中的每个成员。为了确定谁是我们的明星客户，谁需要零售店的营销团队进一步关注，我们将对已开发的群体进行分析。
- en: Considering the cluster characterization, we will graph some of the elements
    that are indicative of the customer’s personal traits. We will draw conclusions
    based on the results.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到群体特征，我们将绘制一些代表客户个人特征的元素。我们将根据结果得出结论。
- en: 'We will use a Seaborn joint plot to visualize both the relationships and distributions
    of different variables:'
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将使用 Seaborn 联合图来可视化不同变量之间的关系和分布：
- en: '[PRE143]'
  id: totrans-338
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE143]'
- en: '![Figure 8.21: Spend versus education distribution per cluster ](img/B19026_08_21.jpg)'
  id: totrans-339
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.21：每个群体的消费与教育水平分布](img/B19026_08_21.jpg)'
- en: 'Figure 8.21: Spend versus education distribution per cluster'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.21：每个群体的消费与教育水平分布
- en: Cluster 0 is centered on medium education but with a peak in high education.
    Cluster 2 is the lowest in terms of education.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 群体 0 主要集中在中等教育水平，但在高学历方面也有一个峰值。群体 2 在教育方面是最低的。
- en: 'Next, we will look at family size:'
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将看看家庭规模：
- en: '[PRE144]'
  id: totrans-343
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE144]'
- en: '![Figure 8.22: Spend versus family size distribution per cluster ](img/B19026_08_22.jpg)'
  id: totrans-344
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.22：每个群体的消费与家庭规模分布](img/B19026_08_22.jpg)'
- en: 'Figure 8.22: Spend versus family size distribution per cluster'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.22：每个群体的消费与家庭规模分布
- en: Cluster 1 represents small family sizes, and cluster 0 represents couples and
    families. Clusters 2 and 3 are evenly distributed.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 群体 1 代表小家庭规模，群体 0 代表夫妻和家庭。群体 2 和群体 3 的分布较为均匀。
- en: 'We’ll now look at the spend versus customer cluster:'
  id: totrans-347
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们来看看消费与客户群体的关系：
- en: '[PRE145]'
  id: totrans-348
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE145]'
- en: '![Figure 8.23: Spend versus customer distribution per cluster ](img/B19026_08_23.jpg)'
  id: totrans-349
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.23：每个群体的消费与客户分布](img/B19026_08_23.jpg)'
- en: 'Figure 8.23: Spend versus customer distribution per cluster'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.23：每个群体的消费与客户分布
- en: Cluster 3 is the group with older clients. While it is interesting to see that
    although cluster 0 is the one with the highest spending, it is skewed to the left
    in terms of days since the user has been a customer.
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 群体 3 是由年长客户组成的群体。尽管群体 0 的消费最高，但值得注意的是，它在“自客户成为用户以来的天数”这一维度上有一个向左偏移的趋势。
- en: '[PRE146]'
  id: totrans-352
  prefs: []
  type: TYPE_PRE
  zh: '[PRE146]'
- en: '![Figure 8.24: Spend versus age distribution per cluster ](img/B19026_08_24.jpg)'
  id: totrans-353
  prefs: []
  type: TYPE_IMG
  zh: '![图 8.24：每个群体的消费与年龄分布](img/B19026_08_24.jpg)'
- en: 'Figure 8.24: Spend versus age distribution per cluster'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.24：每个群体的消费与年龄分布
- en: Cluster 0 is the one with older customers, and the one with the youngest clients
    is cluster 2.
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 群体 0 是拥有较年长客户的群体，而拥有最年轻客户的是群体 2。
- en: Summary
  id: totrans-356
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have performed unsupervised clustering. After dimensionality
    reduction, agglomerative clustering was used. To better profile customers in clusters
    based on their family structures, income, and spending habits, we divided users
    into four clusters. This can be applied while creating more effective marketing
    plans.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们进行了无监督聚类。经过降维后，使用了凝聚层次聚类方法。为了更好地基于客户的家庭结构、收入和消费习惯对群体进行分析，我们将用户分为四个群体。这一方法可用于制定更有效的营销计划。
- en: In the next chapter, we will dive into the prediction of sales using time-series
    data to be able to determine revenue expectations given a set of historical sales,
    as well as understand their relationship with other variables.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将深入研究使用时间序列数据预测销售，以便能够根据一组历史销售确定收入预期，并理解它们与其他变量的关系。
