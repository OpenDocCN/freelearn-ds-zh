- en: Visualizing Geographic Data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可视化地理数据
- en: 'For centuries, maps have been used to convey meaningful data. We are used to
    seeing maps representing data commonly around us, be it with Google Maps calculating
    distances, Uber tracking the cost and distance of locations, or weather forecasts
    looking at each region, and so on. In the last chapter, we learned a bit about
    the two standard map charts available in the **Show Me** menu, and how we can
    use these to visualize geographic data. In this chapter, we will dive deeper into
    the various mapping capabilities of Tableau and cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 几个世纪以来，地图一直被用来传达有意义的数据。我们习惯于看到地图表示我们周围常见的数据，无论是Google Maps计算距离，Uber跟踪地点的成本和距离，还是天气预报查看每个地区，等等。在上一个章节中，我们了解了一些**显示我**菜单中可用的标准地图图表，以及我们如何使用这些图表来可视化地理数据。在本章中，我们将更深入地探讨Tableau的各种映射功能，并涵盖以下主题：
- en: Mapping basics
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 映射基础
- en: Map navigation – geographic search, pan and zoom, mark selection, and scaling
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 地图导航 – 地理搜索、平移和缩放、标记选择和缩放
- en: Map features – layering and custom territories
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 地图功能 – 分层和自定义区域
- en: Modifying locations
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改位置
- en: Importing and managing custom geocoding
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 导入和管理自定义地理编码
- en: Connecting to spatial data
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 连接到空间数据
- en: Using the background screenshot map
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用背景截图地图
- en: Creating density maps
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建密度地图
- en: Technical requirements
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'This chapter uses the following datasets:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本章使用以下数据集：
- en: Global Superstore dataset, which can be found at [http://www.tableau.com/sites/default/files/training/global_superstore.zip](http://www.tableau.com/sites/default/files/training/global_superstore.zip).
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 全球超级商店数据集，可在[http://www.tableau.com/sites/default/files/training/global_superstore.zip](http://www.tableau.com/sites/default/files/training/global_superstore.zip)找到。
- en: The London Wards dataset, which can be found at [https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip](https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip).
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 伦敦地区数据集，可在[https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip](https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip)找到。
- en: The 311 calls dataset, which can be found at [https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx](https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx).
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 311求助数据集，可在[https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx](https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx)找到。
- en: Mapping basics
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 映射基础
- en: 'Mapping in Tableau is very simple and based on geographic data fields that
    can be identified by the globe symbol next to them. To create a map, select the
    geographic fields and any measure, and then click on the **Show Me** Window. As
    you can see in the following screenshot, Tableau automatically highlights the
    symbol map as the preferred visual:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Tableau中的映射非常简单，基于可以由它们旁边的地球符号识别的地理数据字段。要创建地图，选择地理字段和任何度量，然后点击**显示我**窗口。如图所示，Tableau自动突出显示符号地图作为首选的可视化：
- en: '![](img/87913c65-614f-4736-a18b-86833697ebc2.png)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/87913c65-614f-4736-a18b-86833697ebc2.png)'
- en: 'Once you click it, it will create the following screenshot. As you can see,
    for each country, the symbol marks a point at the geographic center of the location:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦点击，它将创建以下截图。如图所示，对于每个国家，符号标记位于位置的地理中心：
- en: '![](img/157a6486-5527-49f3-a835-54abe1de6342.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/157a6486-5527-49f3-a835-54abe1de6342.png)'
- en: 'Symbol maps always plot marks at the geographic centers and can plot two measures
    at a time. Filled maps, on the other hand, use geographic locations to define
    the boundaries within which to fill and can only plot one measure at a time. Using
    the **Show Me** menu, if we now switch to filled maps, we can see the following
    screenshot:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 符号地图始终在地理中心绘制标记，并且可以同时绘制两个度量。另一方面，填充地图使用地理位置来定义填充的边界，并且一次只能绘制一个度量。使用**显示我**菜单，如果我们现在切换到填充地图，我们可以看到以下截图：
- en: '![](img/c8cb6d08-faf4-4cab-810b-ddf3997822f6.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c8cb6d08-faf4-4cab-810b-ddf3997822f6.png)'
- en: 'If there are no geographic fields automatically detected by your data, right-click
    the field you want to display. Click **Geographic Role | Appropriate Level.**
    For example, in the following screenshot, if `Country` is not automatically detected
    as a geographic field, we can right-click and select **Geographic Role |** **Country/Region**:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的数据中没有自动检测到地理字段，请右键单击您想要显示的字段。点击**地理角色 | 适当级别**。例如，在下面的截图中，如果`国家`没有自动检测为地理字段，我们可以右键单击并选择**地理角色
    |** **国家/地区**：
- en: '![](img/d60151dc-9a8e-431f-bd11-150816b3547b.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/d60151dc-9a8e-431f-bd11-150816b3547b.png)'
- en: This will now turn the `Country` field into a **Geographic field**, which can
    be used in both **symbol maps** and **filled maps**. Both **symbol maps** and
    **filled maps** only differ in the number of measures they can show and how they
    visualize data. Other than that, both maps have the same shared common features
    and properties. From this section onward, we will use the common term **map**
    to refer to them, instead of differentiating between them. All of the properties
    discussed from here on apply to both map visuals. Now that we have clarified this,
    let's dive into the various **map navigation** features.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这会将`国家`字段转换为**地理字段**，可以在**符号地图**和**填充地图**中使用。**符号地图**和**填充地图**的不同之处在于它们可以显示的度量数和它们如何可视化数据。除此之外，两种地图都有相同的共享常见功能和属性。从本节开始，我们将使用通用术语**地图**来指代它们，而不是区分它们。此处之后讨论的所有属性都适用于这两种地图视觉。现在我们已经澄清了这一点，让我们深入了解各种**地图导航**功能。
- en: Map navigation
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 地图导航
- en: 'When the mouse is anywhere on the map, you will see the **Map Options** menu appear
    by default, as shown in the following screenshot:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 当鼠标在任何地图位置上时，默认情况下会显示**地图选项**菜单，如下面的截图所示：
- en: '![](img/f16c41b1-3d7a-44ac-bd58-be0482519f1b.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f16c41b1-3d7a-44ac-bd58-be0482519f1b.png)'
- en: 'If you do not see these options, don''t worry. On the **Menu Bar**, click on
    **Map | Map Options** and it will show the options to add to the screen. You can
    see in the following screenshot that we had only the option for **Show Map Scale** unchecked.
    Go ahead and check that:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您没有看到这些选项，请不要担心。在**菜单栏**上，点击**地图 | 地图选项**，它将显示添加到屏幕上的选项。您可以在下面的截图中看到我们只有**显示地图比例尺**选项未被勾选。请继续勾选它：
- en: '![](img/765643b9-5607-4e52-8203-7e1f533c5f70.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/765643b9-5607-4e52-8203-7e1f533c5f70.png)'
- en: 'You will notice at the bottom-right of the screen that, the map scale accuracy
    has appeared. The more you zoom into the map, the more your accuracy will increase.
    Having the distances scale easily allows us to look at distances in miles, kilometers,
    or any of your preferred units:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 您会注意到屏幕右下角，地图比例尺的准确性已经出现。您缩放得越近，准确性就越高。拥有易于查看的距离比例尺使我们能够查看英里、千米或您偏好的任何单位：
- en: '![](img/15aef036-976e-423d-acde-4232a499ff3d.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/15aef036-976e-423d-acde-4232a499ff3d.png)'
- en: Now, let's look at each of the features in detail.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们详细看看每个功能。
- en: Pan and zoom
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 平移和缩放
- en: The pan and zoom features allow us to interact and inspect data on the map.
    We can focus on specific locations and move the map around to focus on key information.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 平移和缩放功能使我们能够与地图上的数据进行交互和检查。我们可以聚焦于特定位置，并移动地图以聚焦于关键信息。
- en: Zoom in/out
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 缩放
- en: The **Zoom In (+)** or **Zoom Out (-)** buttons can be used to zoom into the
    map. You can also use your mouse to zoom in/out as you would usually do. Alternatively,
    you can **double-click** to **Zoom In** and press *Shift* and **double-click**
    to **Zoom Out**.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用**放大 (+)**或**缩小 (-)**按钮来缩放地图。您也可以像通常那样使用鼠标进行缩放。或者，您可以**双击**来**放大**，按住*Shift*并**双击**来**缩小**。
- en: 'Once you zoom in/out, the map gets fixed to that area in the view. To quickly
    go back to the default view, click on the **Reset Map** pin. For example, in the
    following map, we are zoomed in on Europe, and the moment we click on Reset Map,
    it will take us back to the wider world view:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦缩放，地图就会固定在视图中的该区域。要快速返回默认视图，点击**重置地图**图钉。例如，在下面的地图中，我们已缩放到欧洲，当我们点击重置地图时，它会带我们回到更宽的世界视图：
- en: '![](img/7c05204d-54f9-4d81-874c-778aa520b4c2.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/7c05204d-54f9-4d81-874c-778aa520b4c2.png)'
- en: Zoom area
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 缩放区域
- en: 'To zoom in to a particular area on the graph, the Zoom Area option is also
    available. Simply select the **Zoom Area** button ![](img/77a4211f-823c-482c-a7ce-f51f36dca049.png) from
    the toolbar and highlight the area you want to zoom into. In the following example,
    we are using the **Zoom Area** button to zoom into Canada and Alaska:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 要放大到图上的特定区域，还可以使用缩放区域选项。只需从工具栏中选择**缩放区域**按钮 ![](img/77a4211f-823c-482c-a7ce-f51f36dca049.png)，然后突出显示你想要缩放到的区域。在以下示例中，我们使用**缩放区域**按钮来放大加拿大和阿拉斯加：
- en: '![](img/6fb9eea1-d52e-4a33-9c5d-644fb78b1010.png)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6fb9eea1-d52e-4a33-9c5d-644fb78b1010.png)'
- en: Pan
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 平移
- en: 'The **Pan** option can be found right next to the Zoom Area options. **Pan**
    allows us to move the map to focus on it or show the regions the way we want.
    To pan, just select the **Pan Option** and then move the map around to suit your
    needs. Alternatively, you can hold down the *Shift* key and move the map. For
    example, in the following map, the position has been moved from the default display
    to show—to start with—Asia in the left and moving up to Europe and Africa on the
    right:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '**平移**选项位于**缩放区域**选项旁边。**平移**允许我们将地图移动到焦点或以我们想要的方式显示区域。要平移，只需选择**平移选项**，然后根据需要移动地图。或者，你可以按住*Shift*键并移动地图。例如，在以下地图中，位置已从默认显示移动到显示——首先显示亚洲在左侧，然后向上移动到右侧的欧洲和非洲：'
- en: '![](img/4e88feb2-e5b7-4c4b-98a3-95292303ef5b.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4e88feb2-e5b7-4c4b-98a3-95292303ef5b.png)'
- en: For pan/zoom, use the shortcuts to navigate faster. Double-click to zoom in,
    press *Shift* and double-click to zoom out (alternatively, use default mouse zooming),
    and press *Shift* and move the map to pan.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 对于平移/缩放，使用快捷键可以更快地导航。双击以放大，按住*Shift*键并双击以缩小（或者使用默认的鼠标缩放），按住*Shift*键并移动地图以平移。
- en: Geographic Search
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 地理搜索
- en: '**Geographic Search** allows us to quickly search locations on the maps. For
    example, in our map of the countries, if we wanted to quickly look for Nigeria,
    we could simply use the search box and type `Nigeria` in it. As you type, a list
    of all relevant locations appears in the suggestions for you:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '**地理搜索**功能使我们能够快速在地图上搜索位置。例如，在我们的国家地图上，如果我们想快速查找尼日利亚，我们只需简单地使用搜索框并输入`尼日利亚`。当你输入时，所有相关位置的建议列表都会显示出来：'
- en: '![](img/3693ef90-4f4f-46d5-a111-dc4f099e20bc.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3693ef90-4f4f-46d5-a111-dc4f099e20bc.png)'
- en: 'You can search for the following on the maps:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在地图上搜索以下内容：
- en: Continent
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大洲
- en: Country
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 国家
- en: State or province
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 州或省
- en: County
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 县
- en: City
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 城市
- en: Postcode
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 邮编
- en: 'Once you type/select **Nigeria**, and press *Enter*, the map will zoom in to
    focus on it. You may notice that the map again gets pinned. Whenever you search/zoom/pan,
    the map will get pinned to that location. Just click on the reset button to reset
    to the default view. The following screenshot shows the result we obtain after
    searching for **Nigeria**:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你输入/选择**尼日利亚**并按*Enter*键，地图将放大以聚焦于它。你可能注意到地图再次被固定。每次你搜索/缩放/平移时，地图都会固定在那个位置。只需点击重置按钮即可重置到默认视图。以下截图显示了搜索**尼日利亚**后获得的结果：
- en: '![](img/e483abda-d0d6-47c3-9f95-69995e318378.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e483abda-d0d6-47c3-9f95-69995e318378.png)'
- en: Marks selection
  id: totrans-58
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 标记选择
- en: 'As with all graphs, you can select marks on the maps, and perform activities
    such as grouping/sets creation. Beyond the usual rectangular selections, maps
    have two other selection features, Radial Selection and Lasso Selection, respectively:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 与所有图表一样，你可以在地图上选择标记，并执行分组/集合创建等活动。除了常规的矩形选择外，地图还有两个其他选择功能，分别是**径向选择**和**套索选择**：
- en: '![](img/ee458f44-b926-40b2-b419-619df0f1ef89.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ee458f44-b926-40b2-b419-619df0f1ef89.png)'
- en: Rectangular Selection
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 矩形选择
- en: 'Rectangular Selection is the default selection option available. Just drag
    the mouse on the screen to make a selection:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 矩形选择是默认的选择选项。只需在屏幕上拖动鼠标进行选择：
- en: '![](img/802ed054-43a8-4ee2-9f70-25245b71b503.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](img/802ed054-43a8-4ee2-9f70-25245b71b503.png)'
- en: Radial Selection
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 径向选择
- en: Radial Selection is a super useful feature of maps. It allows us to select locations
    in terms of a circular radius, which, in turn, allows us to look at the location
    in a radial distance of a point or to calculate distances between locations.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 径向选择是地图的一个超级有用的功能。它允许我们根据圆形半径选择位置，这反过来又允许我们查看点或计算位置之间的距离：
- en: 'For example, we want to find the combined profit for all of the cities within
    a 50-mile radius of New York City, USA. We first search and zoom into New York
    City, USA. Then, we select **Radial Search**. Now, keeping New York City in the
    center, we zoom out 50 miles from the USA. The following screenshot shows a radial
    search:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们想要找到美国纽约市50英里半径内所有城市的总利润。我们首先搜索并放大到美国纽约市。然后，我们选择**径向搜索**。现在，保持纽约市为中心，我们将半径从美国向外扩展50英里。下面的屏幕截图显示了径向搜索：
- en: '![](img/24550e08-5181-43ce-ad53-9a183492962d.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](img/24550e08-5181-43ce-ad53-9a183492962d.png)'
- en: 'In case you do not see any distance marks, zoom into the location a bit more
    until they become visible. Once you have selected the locations, as shown in the
    preceding screenshot, you can see the summary for the locations selected as you
    would with a rectangular selection. Here, we can see the sum of profit is 79,534:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您看不到任何距离标记，请将位置放大一些，直到它们变得可见。一旦您选择了位置，就像前面的屏幕截图所示，您可以看到所选位置的摘要，就像使用矩形选择一样。在这里，我们可以看到利润总和为79,534：
- en: '![](img/4fb21a6c-f767-45d3-a2fb-90b9586f134a.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4fb21a6c-f767-45d3-a2fb-90b9586f134a.png)'
- en: 'In this example, we used the radial select tool to define the locations which
    fall within a certain radius. Using the same principle, we can use this to find
    the radial distance between two locations. For example, if we had to search for
    the radial distance between San Diego and Los Angeles, we first filter on the
    two locations and then create a radial distance search between the two points.
    Choose any city as the center and extend the radius till you reach the other city.
    In the following screenshot, we kept Los Angeles as the center and extended the
    radius for 110 miles, until we reached San Diego. Hence, the radial distance between
    the two locations is 110 miles:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们使用了径向选择工具来定义位于一定半径内的位置。使用相同的原理，我们可以用它来找到两个位置之间的径向距离。例如，如果我们必须搜索圣地亚哥和洛杉矶之间的径向距离，我们首先对这两个位置进行筛选，然后在两点之间创建一个径向距离搜索。选择任何城市作为中心，并将半径扩展到达到另一个城市。在下面的屏幕截图中，我们保持了洛杉矶作为中心，并将半径扩展了110英里，直到我们到达圣地亚哥。因此，两个位置之间的径向距离是110英里：
- en: '![](img/c758bac0-7c4a-46a0-9253-270862fcae3b.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c758bac0-7c4a-46a0-9253-270862fcae3b.png)'
- en: Lasso Selection
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 套索选择
- en: 'Sometimes, bounded ways of selection are not enough and we may need to select
    certain locations in an area but exclude others. In this case, **Lasso** (a freehand
    shape selection) is the best way to go. An example of this kind of selection can
    be seen in the following screenshot. Here, all western states that we want except
    Georgia are selected:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 有时候，边界选择方式不足以选择区域内的某些位置但排除其他位置。在这种情况下，**套索**（一种自由形状选择）是最好的选择。以下屏幕截图显示了这种选择的一个例子。在这里，我们选择了除了乔治亚州之外的所有我们想要的西部各州：
- en: '![](img/d1194ad7-8f2b-483b-a5a1-357e9b36255d.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d1194ad7-8f2b-483b-a5a1-357e9b36255d.png)'
- en: Scaling
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 比例尺
- en: To change the scale of the map, go to Map | Map Options and select the **Show
    Map Scale** option. Here, you can switch the scales between the automatic, metric
    system, or US system. Once you set the scales, they become visible on the lower-right
    side of the map.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 要更改地图的比例尺，请转到**地图 | 地图选项**并选择**显示地图比例尺**选项。在这里，您可以在自动、公制系统或美国系统之间切换比例尺。一旦设置好比例尺，它们就会在地图的右下角显示出来。
- en: Read the units specified in any question related to mapping very carefully.
    You may need to change the scale of the map before performing the next steps.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 仔细阅读与地图相关的任何问题中指定的单位。在执行下一步之前，您可能需要更改地图的比例尺。
- en: Map features – layering and custom territories
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 地图功能 – 分层和自定义领土
- en: Now that we have learned how to create maps, let's look at how we can customize
    certain map details, such as the color of the map, what level of details it will
    display, and the territories shown within it.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经学会了如何创建地图，让我们看看我们如何可以自定义某些地图细节，例如地图的颜色、它将显示的详细程度以及其中显示的领土。
- en: Map Layers
  id: totrans-80
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 地图图层
- en: 'To view the layers that can be added or removed from the map or how it will
    look in the background, select **Map | Map Layers**. In previous versions of Tableau,
    you would select **Map | Map Options. **You will get the following screen:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看可以添加或从地图中删除的图层或它在背景中的外观，请选择**地图 | 地图图层**。在 Tableau 的早期版本中，您会选择**地图 | 地图选项**。您将看到以下屏幕：
- en: '![](img/bb1500ee-680c-4d46-8edc-f3010169d757.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bb1500ee-680c-4d46-8edc-f3010169d757.png)'
- en: 'Here, you can select and change between the different backgrounds: **Normal**,
    **Light**, and **Dark**. Depending on the Tableau version, you may also have **Street**,
    **Outdoors**, and **Satellite Backgrounds** available:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，你可以选择和切换不同的背景：**正常**、**浅色**和**深色**。根据 Tableau 版本，你可能还有**街道**、**户外**和**卫星背景**可用：
- en: '![](img/e7ab0db4-a7b0-48da-ae2f-d0a06924cc6b.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/e7ab0db4-a7b0-48da-ae2f-d0a06924cc6b.png)'
- en: 'As shown in the following screenshot, in **Map Layers**, you can add the details
    you want to see on the map. For example, after focusing on New Jersey, the map
    now shows Zip Code, Metro Code, and Metro Boundaries as can be seen in the following
    screenshot:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 如以下截图所示，在**地图层**中，你可以添加你希望在地图上看到的详细信息。例如，在关注新泽西州后，地图现在显示了邮政编码、都市代码和都市边界，如以下截图所示：
- en: '![](img/8ede3123-d4ba-4cf9-a9da-ee5067d81309.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/8ede3123-d4ba-4cf9-a9da-ee5067d81309.png)'
- en: These layers help to add a deeper level of detail to the maps and allow you
    to customize what to view as per your needs. There are many map layers available
    for various regions. Explore each of them to see what you can add.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 这些图层有助于为地图添加更深的细节层次，并允许你根据需要自定义要查看的内容。有许多地图层可用于不同地区。探索每个图层以查看你可以添加的内容。
- en: Certain map layers are only available at certain zoom levels and will appear
    grayed out if you are not at that level. Zoom in to reveal further layers.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 某些地图层仅在特定缩放级别可用，如果你不在该级别，它们将显示为灰色。放大以显示更多图层。
- en: Beyond changing the map background and layers, Tableau also has many data layers
    available that can be used to overlay data on the map. To add a data layer, select
    a layer from the **Data Layers** menu. For example, to understand whether `Profit`
    in `State` of the US is linked to the median age of the people, we can overlay
    **Median Age** on the graphs.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 除了更改地图背景和图层之外，Tableau 还提供了许多数据层，可用于在地图上叠加数据。要添加数据层，从**数据层**菜单中选择一个层。例如，为了了解美国`州`的`利润`是否与人们的平均年龄相关联，我们可以在图表上叠加**平均年龄**。
- en: 'Create a symbol graph showing `Profit` by each `State`, and zoom in on the
    USA. Under **Data Layers**, select the following:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个显示每个`州`的`利润`的符号图表，并放大查看美国。在**数据层**下，选择以下内容：
- en: 'Layer: Median Age'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 层：平均年龄
- en: 'By: State'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 按州
- en: '**Using: Blue Green Sequence**'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用：蓝绿色序列**'
- en: 'You will see the following graph:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到以下图表：
- en: '![](img/c9acd823-ef1d-4d1f-8da0-0648d2d9ef44.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c9acd823-ef1d-4d1f-8da0-0648d2d9ef44.png)'
- en: As an exercise, add a few data layers and change the level to view them. This
    will familiarize you more with the data layer options you have available.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 作为练习，添加几个数据层并更改级别以查看它们。这将使你更熟悉可用的数据层选项。
- en: Custom territories
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自定义领土
- en: 'Beyond defining what the map layers display, we can also create and show your
    own custom territory. There are two ways in which we can create our own territories:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 除了定义地图层显示的内容之外，我们还可以创建并显示你自己的自定义领土。我们可以以两种方式创建自己的领土：
- en: Grouping locations
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分组位置
- en: Geocoding a field using other geographic fields
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用其他地理字段对字段进行地理编码
- en: Grouping locations
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分组位置
- en: 'Assume you are looking at data at the country level and focusing on Europe
    as a continent. Instead of looking at each country individually, you want to look
    at the data in two sections, Eastern Europe and Western Europe. To achieve this,
    look at the locations on the map, and use the selection tool to select the territories.
    Once you have them selected, click on the grouping icon, as shown in the following
    screenshot:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你正在查看国家层面的数据，并且将欧洲大陆作为关注点。你不想逐个查看每个国家，而是希望将数据分为两个部分，即东欧和西欧。为了实现这一点，查看地图上的位置，并使用选择工具选择领土。一旦选中，点击以下截图所示的分组图标：
- en: '![](img/144f6c4f-19c5-48b1-ab90-81cd7b324b90.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/144f6c4f-19c5-48b1-ab90-81cd7b324b90.png)'
- en: 'Selecting the groups will create a combined group for these locations. It will
    also add a `Country & State` grouping to the marks shelf. All of your selected
    locations are now grouped and will be colored the same:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 选择组将创建这些位置的组合组。它还会在标记面板上添加一个`国家 & 州`分组。你现在选中的所有位置都已分组，并将以相同的颜色显示：
- en: '![](img/9bfa89c5-d432-4c84-9f5e-b299064accf5.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/9bfa89c5-d432-4c84-9f5e-b299064accf5.png)'
- en: 'Continue and group locations as you want. Once you are done grouping, remove
    the field from the Colors shelf. From Dimensions, bring `Country (group)1` to
    the Marks detail shelf, and move `Profit` back to colors. For example, in the
    following screenshot, based on Countries, two groups called Group 1 and Group
    2 were created:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 继续按照您想要的分组方式分组地点。一旦完成分组，从颜色架上移除该字段。从维度中，将`国家（分组）1`拖到标记详细架上，并将`利润`移回颜色。例如，在下面的截图中，基于国家，创建了两个名为组1和组2的组：
- en: '![](img/41fac3cd-a81c-423d-8972-b070a87bfe0f.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/41fac3cd-a81c-423d-8972-b070a87bfe0f.png)'
- en: Another way to create similar groups would be to right-click on the geographic
    field and select **Create Group**. Once the group is created, bring it to the
    details shelf and use it as you would use any other geographic field.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 创建类似组的另一方法是右键点击地理字段并选择**创建组**。一旦创建组，将其拖到详细架上，并像使用任何其他地理字段一样使用它。
- en: Geocoding using other geographic fields
  id: totrans-109
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用其他地理字段进行地理编码
- en: Another way to create custom territories is to geocode a custom location field
    present in the data based on other fields.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 创建自定义区域的另一种方法是，根据其他字段对数据中的自定义位置字段进行地理编码。
- en: 'For example, we want to add the `Region` field to `Location Hierarchy`. To
    achieve this, right-click on the `Region` field. Select **Geographic Role | Create
    From | Country.** This adds the field to the location hierarchy and the globe
    shape denoting a geographic field appears next to it:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们想要将`区域`字段添加到`位置层级`中。为了实现这一点，右键点击`区域`字段。选择**地理角色 | 从 | 国家**。这样就将字段添加到了位置层级，并且旁边会出现表示地理字段的地球形状：
- en: '![](img/c86f4f69-87f3-44c7-a437-02af38953c62.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/c86f4f69-87f3-44c7-a437-02af38953c62.png)'
- en: 'Bring the `Region` field onto the **Labels** shelf. You can see the custom
    location on the map now appear as shown in the following screenshot:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 将`区域`字段拖到**标签**架上。你现在可以看到地图上显示的定制位置，如下面的截图所示：
- en: '![](img/253cfaed-9c21-48ca-a84b-12c940f616cb.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![截图](img/253cfaed-9c21-48ca-a84b-12c940f616cb.png)'
- en: Using this method, you can view any custom territory that you have in your dataset.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这种方法，您可以查看数据集中您拥有的任何自定义区域。
- en: Now that we have learned how to create maps and add geographic fields, we will
    move on to the next section where we will learn about modifying locations to help
    deal with erroneous or ambiguous location data.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经学习了如何创建地图和添加地理字段，我们将继续到下一节，在那里我们将学习如何修改地点以帮助处理错误或不明确的地点数据。
- en: Modifying locations
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 修改地点
- en: Once you define a field as a geographic field, Tableau automatically detects
    the locations of the places. Sometimes, however, Tableau will show x Unknowns
    in the right-hand corner of the screen. This could be because the location can
    be ambiguous, that is, multiple places having the same name, or the spelling could
    differ from what Tableau recognizes, for example.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦将字段定义为地理字段，Tableau会自动检测地点的位置。有时，Tableau会在屏幕右下角显示“x未知”。这可能是因为位置可能不明确，即多个地点有相同的名称，或者拼写可能与Tableau识别的不符，例如。
- en: The easiest way to fix most errors is to bring other data fields into the map
    details as well. For example, if you are only plotting cities, many countries
    can have the same city names. Adding a country and state can help to rectify such
    errors. If there is a hierarchy of locations, then Tableau automatically uses
    it to remove ambiguities. If, after doing this, there are still errors remaining,
    you can custom edit the locations to make them match.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 修复大多数错误的最简单方法是也将其他数据字段带入地图细节中。例如，如果您只绘制城市，许多国家可能有相同的城市名称。添加国家和州可以帮助纠正此类错误。如果有地点的层次结构，Tableau会自动使用它来消除歧义。如果在这样做之后仍然存在错误，您可以自定义编辑地点以使它们匹配。
- en: Editing locations
  id: totrans-120
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 编辑地点
- en: To edit locations, either click on the right-hand corner on the x Unknowns value
    and it will open the **Edit Locations** window, or go to **Maps |** **Edit Locations.**
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要编辑地点，要么点击“x未知”值的右下角，它将打开**编辑地点**窗口，要么转到**地图 |** **编辑地点**。
- en: 'Click on **Country/Region.** This will show how the country or region is getting
    detected. Many times, this field is set to fixed for a particular country. So,
    if you are in the UK, your map could be set at the fixed field for the United
    Kingdom. Now, if you had a dataset with states from the USA, it would not match
    any location. To fix it, you would need to edit the location and set either the
    fixed **field **to be the **United States**, or if your dataset contains a `Country`
    field, then set it to be matched from that field. In the following example, you
    can see that the **Country/Region **field is mapped to the `Country` geographic
    field, which is good:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**国家/地区**。这将显示国家或地区是如何被检测到的。很多时候，这个字段被设置为特定国家的固定值。所以，如果你在英国，你的地图可能被设置为英国的固定字段。现在，如果你有一个包含美国各州的数据集，它将不会匹配任何位置。为了修复它，你需要编辑位置并设置固定的**字段**为**美国**，或者如果你的数据集包含一个`国家`字段，那么将其设置为从该字段匹配。在以下示例中，你可以看到**国家/地区**字段映射到`国家`地理字段，这是好的：
- en: '![](img/799e9fe9-f324-4859-9f0c-86a0ab1343d1.png)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/799e9fe9-f324-4859-9f0c-86a0ab1343d1.png)'
- en: 'Close that dialog box and look at the ambiguous values to edit. You will notice
    that the unmatched locations are highlighted. For example, for **Lower Normandy**,
    we know this is the state of **Normandy**. Search for *Normandy* in the **Unrecognized**
    box. Once you search and find it, select it. This will now match the location,
    as can be seen in the following screenshot:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 关闭该对话框，查看需要编辑的模糊值。你会注意到不匹配的位置被突出显示。例如，对于**下诺曼底**，我们知道这是**诺曼底**州。在**未识别**框中搜索*诺曼底*。一旦搜索并找到它，选择它。现在这将匹配位置，如下面的截图所示：
- en: '![](img/d7c00439-99b4-4c21-9029-9228098b6661.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/d7c00439-99b4-4c21-9029-9228098b6661.png)'
- en: If you can't find matching names, but know the latitude and longitude of the
    location and when you are typing, you will see a message in the dialog box saying
    `Enter a Latitude and Longitude value`. If you don't see this, just type any number.
    Once you click on it, it will open a box where you can enter the **Latitude**
    and **Longitude** values alternatively, and click **OK**.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你找不到匹配的名称，但知道位置的纬度和经度，当你输入时，你将在对话框中看到一条消息说“输入纬度和经度值”。如果你看不到这个，只需输入任何数字。一旦点击它，它将打开一个框，你可以交替输入**纬度**和**经度**值，然后点击**确定**。
- en: Once you are have mapped all of the locations you can, click OK. Now if you
    look at the lower-right corner, the number of **Unknowns** decreases. In this
    way, even if you have custom locations or different spellings, you can custom
    match them to appropriate locations to appear in the maps. So far, we have learned
    how to modify and match locations, and create custom geolocations. In the next
    section, we will go one step further and learn how to import custom geocoding
    into Tableau.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你映射了所有可以映射的位置，点击确定。现在如果你查看右下角，**未知**的数量会减少。通过这种方式，即使你有自定义位置或不同的拼写，你也可以将它们自定义匹配到适当的位置以显示在地图上。到目前为止，我们已经学习了如何修改和匹配位置，以及创建自定义地理位置。在下一节中，我们将进一步学习如何将自定义地理编码导入到Tableau中。
- en: Importing and managing custom geocoding
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导入和管理自定义地理编码
- en: Beyond providing standard geocoding for geolocations such as City, State, Country,
    Country/Region, Zip Code, Postal Code, and County, Tableau also allows us to custom
    import their own geocoded files. Custom geocoded files are useful if we have locations
    that Tableau can't map, for example, a street address, or if there is a custom
    geographic field that we want to define, and so on.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 除了为城市、州、国家、国家/地区、邮政编码、邮政编码和县等地理位置提供标准地理编码之外，Tableau还允许我们自定义导入自己的地理编码文件。如果Tableau无法映射的位置，例如街道地址，或者如果我们想定义自定义地理字段等，自定义地理编码文件非常有用。
- en: To create a custom geocoding, we need a `.csv` file to import into Tableau.
    This file must contain `Latitude` and `Longitude` columns as real numbers, with
    at least one decimal point in them. Other than these two columns, the other columns
    will depend on whether we are extending an existing role or adding a new role.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建自定义地理编码，我们需要一个`.csv`文件导入到Tableau中。此文件必须包含作为实数的`纬度`和`经度`列，其中至少有一个小数点。除了这两列之外，其他列将取决于我们是在扩展现有角色还是添加新角色。
- en: Extending an existing role
  id: totrans-131
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 扩展现有角色
- en: 'If your data contains many locations that do not get mapped easily using Tableau
    default hierarchies, instead of trying to correct every error manually, you can
    just extend the locations to include these missing values. The import file should
    contain the names matching the hierarchy you are extending and data for all levels
    above the location you are extending. For example, if you wanted to extend the
    `States` mapping to improve it, you will need to include the columns for `State/Province`
    and `Country` along with `Latitude` and `Longitude`. For example, if we want to
    add the following location to our data, we will first create a `.csv`, as follows:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的数据包含许多难以使用 Tableau 默认层次结构映射的位置，而不是尝试手动纠正每个错误，你只需扩展位置以包含这些缺失值即可。导入文件应包含与你要扩展的层次结构匹配的名称以及所有高于你要扩展的位置的数据。例如，如果你想扩展
    `州` 映射以改进它，你需要包括 `州/省` 和 `国家` 的列，以及 `纬度` 和 `经度`。例如，如果我们想将以下位置添加到我们的数据中，我们首先创建一个
    `.csv` 文件，如下所示：
- en: '![](img/ee613ebe-bb4d-4906-9441-f8e29541808c.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ee613ebe-bb4d-4906-9441-f8e29541808c.png)'
- en: 'To import data, select **Map | Geocoding** | **Import Custom Geocoding**:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 要导入数据，选择 **地图 | 地理编码 | **导入自定义地理编码**：
- en: '![](img/518e2501-e7c4-4ac3-956f-9fedd970ae3a.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![](img/518e2501-e7c4-4ac3-956f-9fedd970ae3a.png)'
- en: Select the folder where your `.csv` file is saved and click **Import**. Depending
    on the size of the default file and the geocoding to be imported, it will take
    a couple of minutes and then get imported.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 选择保存您的 `.csv` 文件所在的文件夹并点击 **导入**。根据默认文件的大小和要导入的地理编码，这可能需要几分钟，然后文件将被导入。
- en: Remember that, the highest level when extending geocoding is Country. There
    is no continent level. However, we can add new roles if we want to add geocoding
    up to the continent level.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，在扩展地理编码时，最高级别是 **国家**。没有大陆级别。然而，如果我们想将地理编码扩展到大陆级别，我们可以添加新的角色。
- en: Adding new roles
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加新角色
- en: 'If, for example, we wanted to create a hierarchy for locations including a
    **Continent** as a geographic field, we can create a simple dataset as follows:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果我们想创建一个包含 **大陆** 作为地理字段的地理位置层次结构，我们可以创建一个简单的数据集，如下所示：
- en: '![](img/96fe5416-f30a-4454-af03-8b73ab1a4590.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](img/96fe5416-f30a-4454-af03-8b73ab1a4590.png)'
- en: Now, click on **Map | Import Custom Geocoding** and find the location of the
    folder. Click on **Import**. Depending on your files for geocoding, it will take
    a couple of minutes for the file to be imported.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，点击 **地图 | 导入自定义地理编码** 并找到文件夹的位置。点击 **导入**。根据你的地理编码文件，导入文件可能需要几分钟。
- en: 'Now, right-click on **Continent | Geographic Role**:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，右键点击 **大陆 | 地理角色**：
- en: '![](img/32178944-86c3-42b4-9086-0edcff2a61d9.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![](img/32178944-86c3-42b4-9086-0edcff2a61d9.png)'
- en: 'You will see that Continent appears as a role. You can select that to be the
    geographic type for `Continent`. To create a map from the custom mapping, select
    the `Latitude` and `Longitude` fields (not the generated ones) and the continent
    field, and create a map using the **Show Me** menu. Now, move the `Continent`
    field to **Labels **so you can see the labels on the `Continent` field. You should
    get a map like the following:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到大陆作为一个角色出现。您可以选择将其作为 `大陆` 的地理类型。要创建自定义映射的地图，选择 `纬度` 和 `经度` 字段（不是生成的字段）以及大陆字段，并使用
    **显示我** 菜单创建地图。现在，将 `大陆` 字段移动到 **标签**，这样您就可以看到 `大陆` 字段上的标签。您应该得到以下地图：
- en: '![](img/b20857f9-7307-4040-86ef-29cbbf07091a.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b20857f9-7307-4040-86ef-29cbbf07091a.png)'
- en: As you can see, all of the continents are plotted where we want them to be.
    Beyond adding geocoding, you can also import your own spatial files to plot maps.
    Let's look into them in the next section.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，所有的大陆都绘制在我们想要的位置。除了添加地理编码外，您还可以导入自己的空间文件来绘制地图。让我们在下一节中探讨它们。
- en: Connecting to spatial data
  id: totrans-147
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连接到空间数据
- en: We can connect to, and import spatial data from, TopoJSON files, Shapefiles,
    MapInfo tables, GeoJSON files, KML files, and Esri File Geodatabases. Using these
    files, we can connect to point, linear, and polygon geometries. Currently, mixed
    geometries are not allowed in Tableau.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以从 TopoJSON 文件、Shapefiles、MapInfo 表、GeoJSON 文件、KML 文件和 Esri 文件地理数据库连接并导入空间数据。使用这些文件，我们可以连接到点、线和多边形几何形状。目前，Tableau
    不允许混合几何形状。
- en: 'Each of the file sources listed earlier has certain restrictions on what the
    folder containing these files must include. These are listed in the following
    table:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 之前列出的每个文件来源都对包含这些文件的文件夹包含某些限制。这些限制在以下表中列出：
- en: '| **File Source** | **Files Required in Folder** |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| **文件来源** | **文件夹中必需的文件** |'
- en: '| Esri Shapefiles | `.shp`, `.shx`, `.dbf` , `.prj`, and `.zip` |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| Esri Shapefiles | `.shp`、`.shx`、`.dbf`、`.prj` 和 `.zip` |'
- en: '| Esri Geodatabases | Either `.zip` containing `.gdb` or a `.gdb` file |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| Esri 地理数据库 | 包含 `.gdb` 的 `.zip` 文件或 `.gdb` 文件 |'
- en: '| KML files | `.kml` |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| KML 文件 | `.kml` |'
- en: '| TopoJSON | `.topojson` or `.json` |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| TopoJSON | `.topojson` 或 `.json` |'
- en: '| GeoJSON | `.geojson` |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| GeoJSON | `.geojson` |'
- en: '| MapInfo | `.MAP`, `.DAT`, `.TAB`, and `.MID`, or a `.MIF`, or `.ID` file
    |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| MapInfo | `.MAP`、`.DAT`、`.TAB` 和 `.MID`，或 `.MIF` 或 `.ID` 文件 |'
- en: For an example of how to create maps using shapefiles, we will use the file
    downloaded for London Wards as an example. If you haven't already done so, download
    the `London-wards-2018.zip` file ([https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip](https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip))
    and extract it.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 为了说明如何使用 shapefiles 创建地图的示例，我们将使用为伦敦区域下载的文件作为示例。如果你还没有这样做，请下载 `London-wards-2018.zip`
    文件 ([https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip](https://data.london.gov.uk/download/statistical-gis-boundary-files-london/08d31995-dd27-423c-a987-57fe8e952990/London-wards-2018.zip))
    并将其解压。
- en: To connect the file in Tableau, go to **Data | New Data Source | Spatial File**.
    Locate the extracted folder for the London Wards Zip. Select either the Esri folder
    or the `Mapinfo` folder. For this example, we are loading the ESRI folder. It
    will ask you to select the shapefile. Select the `london_ward.shp` file.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Tableau 中连接文件，请转到 **数据 | 新数据源 | 空间文件**。定位伦敦区域 Zip 文件的提取文件夹。选择 Esri 文件夹或“Mapinfo”文件夹。对于本例，我们正在加载
    ESRI 文件夹。它将要求你选择 shapefile。选择 `london_ward.shp` 文件。
- en: 'Once you have imported the file, you are now ready to create maps. To create
    a map with all of the details for London Wards, click on the `Geometry` field.
    You will notice that, Tableau has automatically detected it as a Geographic field.
    Bring this field to the Detail Marks tab. As soon as you do this, the autogenerated
    `Latitude` and `Longitude` marks appear and a graph is created. Zoom out and you
    will see the same as the following screenshot. As you can see in the following
    screenshot, all of the wards for London in the UK have been plotted:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你导入了文件，你现在就可以创建地图了。要创建包含伦敦区域所有详细信息的地图，请点击“几何”字段。你会注意到 Tableau 已经自动将其检测为地理字段。将此字段拖到详细标记选项卡。一旦这样做，自动生成的“纬度”和“经度”标记就会出现，并创建一个图表。放大查看，你会看到以下截图中的内容。正如你在以下截图中看到的，英国伦敦的所有区域都已绘制出来：
- en: '![](img/1aa7b044-33ae-4e1e-b11b-c0011b3b7a01.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1aa7b044-33ae-4e1e-b11b-c0011b3b7a01.png)'
- en: 'Now, to see the hectares per ward, bring the `Name` field in the details Marks,
    add the hectares field to the color, and your graph is created:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，要查看每个区域的公顷数，请在详细标记中的“名称”字段中添加“公顷”字段到颜色，然后你的图表就创建完成了：
- en: '![](img/8ecab1d3-69d1-4da3-b25d-dfc7fa35082e.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8ecab1d3-69d1-4da3-b25d-dfc7fa35082e.png)'
- en: 'If you instead want to view the data at the district level, remove `Name` from
    detail and add `District` to the graph. In this way, you can see data at the district
    level. You can also make the map cleaner by removing any borders. Click on **Color
    | Border | None.** This will make the map cleaner, as shown in the following screenshot:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要在区域级别查看数据，请从详细标记中移除“名称”，并将“区域”添加到图表中。这样，你就可以看到区域级别的数据。你还可以通过删除任何边框来使地图更干净。点击
    **颜色 | 边框 | 无**。这将使地图更干净，如下面的截图所示：
- en: '![](img/88a272f5-c78a-4cc1-af11-342dc876eebc.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](img/88a272f5-c78a-4cc1-af11-342dc876eebc.png)'
- en: Sometimes, shapefiles only contain geometric details but not the measures you
    want to see; for example, if you wanted to inspect a dataset about the population
    of each ward. Not to worry. Shapefiles function as normal files and can be joined
    to any other files, even other shapefiles. As an exercise, join two shapefiles
    and use them to create a dual-axis map.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，shapefiles 只包含几何细节，但不包含你想要看到的度量；例如，如果你想检查每个区域的关于人口的数据集。不必担心。Shapefiles 作为普通文件使用，可以与任何其他文件连接，甚至是其他
    shapefiles。作为一个练习，连接两个 shapefiles 并使用它们创建一个双轴地图。
- en: In this section, we learned how to import custom geocoding to enhance mapping
    capabilities. For some use cases, even custom geocoding may not meet our needs.
    For such cases, we can use background images to plot our data. Let's learn how
    to do this in the next section.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们学习了如何导入自定义地理编码以增强地图功能。对于某些用例，即使是自定义地理编码也可能无法满足我们的需求。对于这种情况，我们可以使用背景图像来绘制我们的数据。让我们在下一节中学习如何做到这一点。
- en: Using background images to plot spatial data
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用背景图像绘制空间数据
- en: There may be situations when spatial data is not enough to accurately plot data
    on the map. In such cases, we can also use background images as a background.
    While this option allows for the most flexibility in how to plot, it also requires
    the most effort in defining the boundary and point coordinates.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 可能存在这样的情况，空间数据不足以在地图上准确绘制数据。在这种情况下，我们还可以使用背景图像作为背景。虽然这个选项提供了最大的灵活性来绘制，但也需要最多的努力来定义边界和点坐标。
- en: 'For example, say you wanted to plot the house plan of your house and have the
    following data:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设你想绘制你房子的平面图，并拥有以下数据：
- en: '| Location | Location ID | X | Y | Size |'
  id: totrans-170
  prefs: []
  type: TYPE_TB
  zh: '| 位置 | 位置 ID | X | Y | 大小 |'
- en: '| Room 3 | 1 | 15 | 20 | 100 |'
  id: totrans-171
  prefs: []
  type: TYPE_TB
  zh: '| 房间 3 | 1 | 15 | 20 | 100 |'
- en: '| Room 1 | 2 | 15 | 50 | 100 |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '| 房间 1 | 2 | 15 | 50 | 100 |'
- en: '| Room 4 | 3 | 40 | 20 | 125 |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| 房间 4 | 3 | 40 | 20 | 125 |'
- en: '| Room 5 | 4 | 40 | 50 | 125 |'
  id: totrans-174
  prefs: []
  type: TYPE_TB
  zh: '| 房间 5 | 4 | 40 | 50 | 125 |'
- en: '| Porch | 5 | 60 | 40 | 60 |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '| 门廊 | 5 | 60 | 40 | 60 |'
- en: 'You also have this screenshot:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 你还有这个截图：
- en: '![](img/6e97fed6-ca57-48ec-a34a-8c1135eb1490.png)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6e97fed6-ca57-48ec-a34a-8c1135eb1490.png)'
- en: 'We add the screenshot data as the data source. To test how the appropriate
    positions would look, create a scatter plot with unaggregated measures. For the
    preceding example, plotting the `X` and `Y` values, we get the following:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将截图数据作为数据源。为了测试适当的点的位置，创建一个未聚合的度量值的散点图。对于前面的例子，绘制“X”和“Y”值，我们得到以下结果：
- en: '![](img/9b99ccdb-65d0-4116-af2e-7ed8b9b9ce43.png)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9b99ccdb-65d0-4116-af2e-7ed8b9b9ce43.png)'
- en: 'Once happy with where the `X` and `Y` points appear, click on **Map | Background
    Image | Dataset**. Select **Add Image**. Browse to where you saved the floor plan
    screenshot and click **OK**. Add in the details shown in the following screenshot:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你对“X”和“Y”点的位置满意，点击**地图 | 背景图像 | 数据集**。选择**添加图像**。浏览到你保存的平面图截图的位置，然后点击**确定**。添加以下截图中的详细信息：
- en: '![](img/2ef7edb7-d370-4067-a6f4-6c0036d36c24.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2ef7edb7-d370-4067-a6f4-6c0036d36c24.png)'
- en: 'Once you have entered the limits for **X** and **Y** and which fields denote
    **X** and **Y**, go to **Options** and select **Always Show Entire Image**. Click
    **OK**. You will get the points plotted on the screenshot. Now, you can see where
    each of the points is plotted. Change the marks type to Map and then add in the
    measures you want to plot. This now behaves like a map:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你为**X**和**Y**输入了限制条件，并确定了哪些字段代表**X**和**Y**，请转到**选项**并选择**始终显示整个图像**。点击**确定**。你将得到截图上的点。现在，你可以看到每个点被绘制在哪里。将标记类型更改为地图，然后添加你想要绘制的度量。现在它就像一个地图：
- en: '![](img/586b0a8b-2b20-44a4-b22c-3d580cc156d6.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](img/586b0a8b-2b20-44a4-b22c-3d580cc156d6.png)'
- en: This technique can be used to plot static images from any map and plot measures
    on them.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术可以用来绘制来自任何地图的静态图像，并在其上绘制度量。
- en: Creating density maps
  id: totrans-185
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建密度图
- en: Density marks were added to Tableau in version 2018.3\. These marks add another
    way of finding patterns in areas where there is a lot of overlapping data or the
    concentration of data is very high. Density marks find their best use in creating
    density maps, making it super easy to find trends in spatial data. Density maps
    work best with custom geocoded files, as they allow for detailed granular data
    to be added. Granular and precise data in a small range, along with smooth changes
    in measure values is the ideal use case for using density maps.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 密度标记在 Tableau 的 2018.3 版本中被添加。这些标记为在数据重叠很多或数据浓度很高的区域寻找模式提供了另一种方式。密度标记在创建密度图中找到了它们最好的用途，这使得在空间数据中找到趋势变得超级简单。密度图与自定义地理编码文件配合使用效果最佳，因为它们允许添加详细粒度数据。在小范围内具有粒度和精确的数据，以及度量值变化的平滑性，是使用密度图的理想用例。
- en: 'For this example, we will be using the 311 calls dataset. In case you have
    not yet downloaded it, download it here in a `.csv` format: [https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx](https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx).'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个例子，我们将使用 311 联系电话数据集。如果你还没有下载，请在此以 `.csv` 格式下载：[https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx](https://data.nola.gov/City-Administration/311-Calls-Historic-Data-2012-2018-/3iz8-nghx)。
- en: 'Now, if we want to understand the distribution of calls by `Zip Code` for `LA`,
    and decide to plot a **Symbol Map**, after much zooming in, the following screenshot
    shows what it would look like:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果我们想了解洛杉矶地区的“邮编”分布情况，并决定绘制一个**符号地图**，经过多次放大后，以下截图显示了它可能的样子：
- en: '![](img/2e805c81-20dd-4782-a203-adfaae082101.png)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2e805c81-20dd-4782-a203-adfaae082101.png)'
- en: 'This doesn''t give us much information. Looking at the map, it looks like all
    locations have almost equal calls, which isn''t true. In cases like this, density
    maps become super useful. To convert this screenshot into a density map, in the **Marks**
    menu, change the mark type from Automatic to Density. You will see a certain pattern
    emerging, but it isn''t very clear. To enhance it, it becomes important to have
    a proper color scheme. Click on the **Color** mark, and change the color to Density
    Multi-Color Light. Once the color is changed, we can see the pattern more easily
    as in the following screenshot. You can further change the intensity and opacity
    of the colors in the **Color** menu:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 这并没有给我们提供太多信息。查看地图，看起来所有地点的呼叫几乎相等，这并不真实。在这种情况下，密度图变得非常有用。要将此截图转换为密度图，在**标记**菜单中，将标记类型从自动更改为密度。你会看到某些模式出现，但不是很清晰。为了增强它，拥有合适的配色方案变得很重要。点击**颜色**标记，并将颜色更改为密度多色浅色。一旦颜色更改，我们就可以更容易地看到模式，如下面的截图所示。你还可以在**颜色**菜单中进一步更改颜色的强度和透明度：
- en: '![](img/a25cccf2-d05f-4ff4-8ee3-82caabdb8979.png)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/a25cccf2-d05f-4ff4-8ee3-82caabdb8979.png)'
- en: You can quickly see that the calls are concentrated in the center of the city
    and less toward the lakeshore. You can further filter and compare the different
    issue types and see how they differ in their concentration. You can further use
    the Pages shelf to see the trends across time for the issues. The density when
    using the pages shelf is calculated for the entire dataset, so the patterns can
    quickly be seen relative to time or other factors.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以快速看到呼叫集中在城市中心，而较少在湖岸附近。你可以进一步过滤和比较不同问题类型，并查看它们在集中度上的差异。你还可以进一步使用页面面板来查看问题的趋势。使用页面面板时，密度是针对整个数据集计算的，因此模式可以快速相对于时间或其他因素看到。
- en: Summary
  id: totrans-193
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we detailed how to create, navigate, and customize maps. We
    learned how to identify the correct locations for mapping, enhance geocoding,
    and create our own custom geocoding and geographic fields. Furthermore, we covered
    spatial files, and how they can be leveraged to create nuanced maps for specific
    purposes. We also looked at adding background images to maps, creating custom
    maps, and creating density maps.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们详细介绍了如何创建、导航和自定义地图。我们学习了如何确定地图的正确位置，增强地理编码，并创建我们自己的自定义地理编码和地理字段。此外，我们还涵盖了空间文件，以及它们如何被利用来为特定目的创建细微的地图。我们还探讨了向地图添加背景图像、创建自定义地图和创建密度图。
- en: All of this will give you a firm understanding of the extent of customization
    you can achieve with maps and how they can be a powerful analysis tool. In the
    next chapter, we will start by creating simple calculations that can be leveraged
    across the various visuals we have learned about in this chapter and the last.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些都将帮助你深入了解你可以通过地图实现的定制程度以及它们如何成为一个强大的分析工具。在下一章中，我们将从创建简单的计算开始，这些计算可以跨本章和上一章中我们学习过的各种视觉元素进行利用。
