- en: Automating Processes with ModelBuilder and Python
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: 使用ModelBuilder和Python自动化流程
- en: As you have now learned, performing analysis or editing a feature requires many
    steps. The more you use ArcGIS Pro, the more you will find yourself doing the
    same process again and again. You may also realize that some of the processes
    that you do repeatedly really require very little interaction on your part beyond
    selecting a feature and then telling ArcGIS Pro where to save the outputs.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所学的，执行分析或编辑要素需要许多步骤。你使用ArcGIS Pro越多，就越会发现自己在重复同样的过程。你也可能意识到，你反复执行的一些过程实际上只需要你进行很少的交互，比如选择一个要素，然后告诉ArcGIS
    Pro输出保存的位置。
- en: '*Wouldn''t it be beneficial if you could automate processes that you perform
    repeatedly?* You can create the proverbial **Easy** button where you simply click
    on a single tool, fill in a few parameters, and the tool goes off, providing you
    with the results after it is done executing. This would certainly make your job
    easier.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果你能自动化你反复执行的过程，那岂不是很有益？* 你可以创建一个传说中的**简易**按钮，只需点击一个工具，填写一些参数，然后工具就会执行，完成后提供结果。这无疑会使你的工作变得更简单。'
- en: In this chapter, with ArcGIS Pro, you will learn how to create **Easy** buttons
    or tools using **ModelBuilder** and **Python scripts**. This will provide you
    with the skills to create automated processes that can run multiple tools together
    in sequence or at the same time to complete an operation. ModelBuilder uses a
    visual interface to create automation models without the need to be a programmer.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，使用ArcGIS Pro，你将学习如何使用**ModelBuilder**和**Python脚本**创建**简易**按钮或工具。这将为你提供创建自动化流程的技能，这些流程可以按顺序或同时运行多个工具以完成操作。ModelBuilder使用可视化界面创建自动化模型，无需成为程序员。
- en: Python is the primary scripting language for the ArcGIS platform. With it, you
    can create very powerful scripts that can be used within ArcGIS Pro, but also
    that can also integrate processes across all components of ArcGIS, including**Enterprise**,**Online**,**Extensions**,**Portal**,
    and more. However, creating Python scripts does require writing code.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Python是ArcGIS平台的主要脚本语言。使用它，你可以创建非常强大的脚本，这些脚本可以在ArcGIS Pro中使用，也可以集成ArcGIS的所有组件中的过程，包括**企业**、**在线**、**扩展**、**门户**等。然而，创建Python脚本确实需要编写代码。
- en: 'In this chapter, you will learn the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将学习以下主题：
- en: Differentiating between tasks, geoprocessing models, and Python scripts
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 区分任务、地理处理模型和Python脚本
- en: Creating geoprocessing models
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建地理处理模型
- en: Running a geoprocessing model
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行地理处理模型
- en: Making a model interactive
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使模型交互式
- en: Learning about Python
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习Python
- en: Technical requirements
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: As with other chapters in this book, you will need to have **ArcGIS Pro 2.5**
    or later. Any license level of ArcGIS Pro will work for the exercises in this
    chapter.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 与本书中的其他章节一样，你需要拥有**ArcGIS Pro 2.5**或更高版本。本章的练习可以使用ArcGIS Pro的任何许可级别。
- en: Differentiating between tasks, geoprocessing models, and Python scripts
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 区分任务、地理处理模型和Python脚本
- en: You learned about tasks in the last chapter and have read the introduction for
    this chapter; now you may be wondering what the difference is between a task,
    geoprocessing model, and Python script. That is a great question.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 你在上一个章节中学习了任务，并阅读了本章的介绍；现在你可能想知道任务、地理处理模型和Python脚本之间的区别是什么。这是一个很好的问题。
- en: You will find the answer to this question in this section, but to understand
    it, you must first understand what each of these things is. You already know what
    a task is, so we will now focus on gaining a better understanding of what models
    and Python scripts are. Once you understand that, you can then understand the
    differences between the three.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 你将在本节中找到这个问题的答案，但要理解它，你必须首先了解这些事物中的每一个是什么。你已经知道什么是任务，所以我们现在将专注于更好地理解模型和Python脚本是什么。一旦你理解了这一点，你就可以理解这三个之间的区别。
- en: Learning about geoprocessing models
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 了解地理处理模型
- en: 'A **geoprocessing model** is a custom tool created within the ModelBuilder
    window, which contains multiple geoprocessing tools along with their various parameters
    (including inputs, outputs, options, and other values) that work together as part
    of an integrated process that will run as if it was a single tool. The following
    diagram shows a sample of a very simple model:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '**地理处理模型** 是在 ModelBuilder 窗口中创建的自定义工具，其中包含多个地理处理工具及其各种参数（包括输入、输出、选项和其他值），它们作为集成过程的一部分协同工作，就像是一个单独的工具一样运行。以下图表显示了一个非常简单的模型示例：'
- en: '![](img/2a7e96a8-9f5f-42cd-848e-05a67ecba16a.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/2a7e96a8-9f5f-42cd-848e-05a67ecba16a.png)'
- en: From the preceding diagram, you can see that it contains two geoprocessing tools
    that you learned about in [Chapter 10](3da9832a-f595-47f3-bd8a-2b7c40455667.xhtml),
    *Performing Analysis with Geoprocessing Tools*, the Buffer and Clip tools. In
    the model, the Buffer tool creates buffer polygons around the input, Streets.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的图表中，您可以看到它包含两个您在 [第 10 章](3da9832a-f595-47f3-bd8a-2b7c40455667.xhtml) 中学习到的地理处理工具，即
    *使用地理处理工具进行分析* 的缓冲区和剪辑工具。在模型中，缓冲区工具在输入 Streets 的周围创建缓冲多边形。
- en: The resulting buffer polygons are then used to clip out the features in Parcels,
    which is the Clip features input that is located inside the buffer polygons. Since
    both geoprocessing tools reside inside the model, the user only has to run the
    model instead of having to run each tool individually. The model automatically
    runs the tools based on the parameters specified within it. You will learn more
    about the components of a model and how to create one later in this chapter.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 生成的缓冲多边形随后被用来剪辑出 Parcels 中的要素，这是位于缓冲多边形内部的剪辑要素输入。由于这两个地理处理工具都位于模型内部，用户只需运行模型而不是必须单独运行每个工具。模型会根据其中指定的参数自动运行工具。您将在本章后面学习更多关于模型组件以及如何创建模型的内容。
- en: Geoprocessing models can include geoprocessing tools, Python scripts, iterators,
    model-only tools, and other models. This allows them to be as simple or complex
    as you need them to be to accomplish the process that you have designed them to
    complete. The ModelBuilder window allows users to create geoprocessing models
    in a visual environment. No coding is required to build a model.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 地理处理模型可以包括地理处理工具、Python 脚本、迭代器、仅模型工具和其他模型。这使得它们可以简单或复杂到您需要它们完成您设计的流程的程度。ModelBuilder
    窗口允许用户在可视化环境中创建地理处理模型。构建模型不需要编写代码。
- en: '**Esri** actually refers to ModelBuilder as a visual programming language.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '**Esri** 实际上把 ModelBuilder 称为一种可视化编程语言。'
- en: Geoprocessing models can be created using **ArcGIS Desktop** (**ArcMap** or
    **ArcCatalog**) or ArcGIS Pro. However, models created in one software do not
    always run successfully in the other. The simpler a model is, the more likely
    it will be cross-application compatible. Another downside to a geoprocessing model
    is that it can only be run from ArcGIS Pro or ArcGIS Desktop. You cannot schedule
    them to run automatically at a specific date and time. At least not by themselves.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 地理处理模型可以使用 **ArcGIS Desktop** （**ArcMap** 或 **ArcCatalog**）或 ArcGIS Pro 创建。然而，在一个软件中创建的模型并不总是能在另一个软件中成功运行。模型越简单，越有可能实现跨应用程序兼容。地理处理模型的另一个缺点是它只能从
    ArcGIS Pro 或 ArcGIS Desktop 运行。您无法安排它们在特定日期和时间自动运行。至少不是通过它们自己。
- en: Let's now learn about Python scripts.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来学习 Python 脚本。
- en: Understanding Python scripts
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解 Python 脚本
- en: 'A **Python script** is also a custom tool that can run multiple geoprocessing
    tools along with their various parameters as part of an integrated process. However,
    unlike a model that does not require you to write programming code, Python scripts
    do. You must know the Python scripting language in order to create Python scripts.
    The following code is a small snippet of a Python script created for ArcGIS:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**Python 脚本** 也是一个自定义工具，可以在集成过程中运行多个地理处理工具及其各种参数。然而，与不需要您编写编程代码的模型不同，Python
    脚本则需要。您必须了解 Python 脚本语言才能创建 Python 脚本。以下代码是 ArcGIS 为 Python 创建的一个 Python 脚本的小片段：'
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The preceding code starts with several comment lines that provide a general
    description of the purpose of the script and who created it. The next line after
    the commented description is an `import` command that loads the `arcpy` model
    so that the script can access ArcGIS functionality. This is followed by some more
    descriptive comments, and then a variable is defined to set the workspace where
    data used in the script will be accessed or saved to. Lastly, the script runs
    the `Union` tool, which you learned about in [Chapter 10](3da9832a-f595-47f3-bd8a-2b7c40455667.xhtml),
    *Performing Analysis with Geoprocessing Tools*.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的代码以几行注释开始，提供了脚本目的的一般描述以及谁创建了它。在注释描述之后是下一行的`import`命令，它加载`arcpy`模型，以便脚本可以访问ArcGIS功能。这之后是一些更多的描述性注释，然后定义了一个变量来设置脚本中使用的数据将被访问或保存的工作空间。最后，脚本运行了你在[第10章](3da9832a-f595-47f3-bd8a-2b7c40455667.xhtml)中学习的`Union`工具，*使用地理处理工具进行分析*。
- en: 'Python scripts have several advantages over a geoprocessing model:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: Python脚本相对于地理处理模型有几个优点：
- en: First, Python is not limited to ArcGIS. Python can actually be used to create
    scripts for many other applications, such as **Excel**, **SharePoint**, **AutoCAD**,
    **Photoshop**, **SQL Server**, and more. This means that you can use a Python
    script to run tools across multiple platforms to create a truly integrated process.
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，Python不仅限于ArcGIS。实际上，Python可以用来为许多其他应用程序创建脚本，例如**Excel**、**SharePoint**、**AutoCAD**、**Photoshop**、**SQL
    Server**等。这意味着你可以使用Python脚本来在多个平台上运行工具，以创建一个真正集成的流程。
- en: Second, Python scripts can be run from outside of ArcGIS. This means you can
    schedule them to run at specific times and days using your operating system's
    scheduler application. If your script does include ArcGIS geoprocessing tools,
    the script will require access to an ArcGIS license to run successfully, but ArcGIS
    does not need to be open and active at the time when the script is scheduled to
    run.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二，Python脚本可以从ArcGIS外部运行。这意味着你可以使用操作系统的调度应用程序安排它们在特定的时间和日期运行。如果你的脚本包含ArcGIS地理处理工具，脚本将需要访问ArcGIS许可证才能成功运行，但ArcGIS在脚本被安排运行时不需要打开和活动。
- en: Third, Python can be used to create completely custom geoprocessing tools. It
    is not limited to just the geoprocessing tools that you will find in ArcGIS Pro
    toolboxes.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第三，Python可以用来创建完全定制的地理处理工具。它不仅限于你在ArcGIS Pro工具箱中找到的地理处理工具。
- en: Now let's see the difference between tasks, geoprocessing tools, and Python
    scripts.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看看任务、地理处理工具和Python脚本之间的区别。
- en: What is the difference between the three?
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 这三个之间的区别是什么？
- en: Now that you have a much better understanding of what tasks, geoprocessing models,
    and Python scripts are, you will be able to properly understand the differences
    between them. Each can serve a purpose in standardizing and automating common
    workflows and processes.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你对任务、地理处理模型和Python脚本有了更深入的理解，你将能够正确地理解它们之间的区别。每个都可以在标准化和自动化常见的工作流程和过程中发挥作用。
- en: 'The following table will provide a clearer understanding of the differences
    between the three:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的表格将提供对这三个之间区别的更清晰理解：
- en: '| **Parameters** | **Task** | **Geoprocessing model** | **Python script** |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| **参数** | **任务** | **地理处理模型** | **Python脚本** |'
- en: '| Run a single geoprocessing tool automatically | Yes, it can run a single
    tool automatically as part of a step. | Yes | Yes |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| 自动运行单个地理处理工具 | 是，它可以作为步骤的一部分自动运行单个工具。 | 是 | 是 |'
- en: '| Allow users to provide input to tools before running | Yes | Yes | Yes |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| 允许用户在运行工具之前提供输入 | 是 | 是 | 是 |'
- en: '| Run multiple geoprocessing tasks automatically and in sequence | No | Yes
    | Yes |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| 自动按顺序运行多个地理处理任务 | 否 | 是 | 是 |'
- en: '| Be included in a task | No | Yes | Yes |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| 包含在任务中 | 否 | 是 | 是 |'
- en: '| Be included in a geoprocessing model | No | Yes | Yes |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| 包含在地理处理模型中 | 否 | 是 | 是 |'
- en: '| Provides a documented workflow | Yes | Yes | No |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| 提供了文档化的工作流程 | 是 | 是 | 否 |'
- en: '| Run from outside (externally) of ArcGIS Pro | No | No | Yes |'
  id: totrans-44
  prefs: []
  type: TYPE_TB
  zh: '| 从ArcGIS Pro外部（外部）运行 | 否 | 否 | 是 |'
- en: '| Integrate with other applications | No | No | Yes |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '| 与其他应用程序集成 | 否 | 否 | 是 |'
- en: '| Be scheduled to run at specific times and days | No | No | Yes |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '| 安排在特定的时间和日期运行 | 否 | 否 | 是 |'
- en: '| Requires knowledge of programming language | No | No | Yes |'
  id: totrans-47
  prefs: []
  type: TYPE_TB
  zh: '| 需要编程语言知识 | 否 | 否 | 是 |'
- en: So, as you can now see from the preceding table, there is a good bit of difference
    between tasks, geoprocessing models, and Python scripts. Tasks are for defining
    workflows that include several steps. A task might include the use of a geoprocessing
    model or a Python script, but a geoprocessing model or a Python script cannot
    reference a task.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，正如您现在可以从前面的表中看到的那样，任务、地理处理模型和Python脚本之间存在很大的差异。任务用于定义包含多个步骤的工作流程。一个任务可能包括使用地理处理模型或Python脚本，但地理处理模型或Python脚本不能引用任务。
- en: Now that you have an understanding of the differences between tasks, geoprocessing
    models, and Python scripts, we will start exploring how to create a geoprocessing
    model.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 既然您已经了解了任务、地理处理模型和Python脚本之间的区别，我们将开始探索如何创建一个地理处理模型。
- en: Creating geoprocessing models
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建地理处理模型
- en: As mentioned earlier, geoprocessing models are custom tools that you create
    from within ModelBuilder. ModelBuilder provides the graphical interface for building
    models as well as allowing you to access additional model-only tools, iterators,
    environmental settings, and model properties.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，地理处理模型是从ModelBuilder内部创建的自定义工具。ModelBuilder提供了构建模型的图形界面，同时允许您访问仅适用于模型的额外工具、迭代器、环境设置和模型属性。
- en: Models are created for several reasons. The first and most common reason is
    to automate repeated processes performed in ArcGIS Pro. If you have an analysis,
    a conversion, or another process that you perform on a regular basis, then a model
    can be used to automate it.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 创建模型的原因有很多。第一个也是最常见的原因是自动化在ArcGIS Pro中执行的重复过程。如果您有一个定期执行的分析、转换或其他过程，则可以使用模型来自动化它。
- en: Secondly, you can use a model to think through and create a flow chart process
    within ArcGIS Pro. This can help you ensure that you have considered all the tools
    and data that you will need to complete a process. Once completed, the model then
    provides the tool for completing that process as well as the visual and textual
    documentation that explains how the process was performed.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，您可以使用模型在ArcGIS Pro中思考和创建流程图过程。这可以帮助您确保您已经考虑了完成过程所需的所有工具和数据。一旦完成，该模型将提供完成该过程的工具，以及解释如何执行该过程的视觉和文本文档。
- en: You can share models with those in your organization so that they can use it
    to perform the process. This can reduce your workload and allow you to concentrate
    on other tasks that require higher knowledge and skill levels. Because a model
    runs the geoprocessing tools contained within it automatically, you can create
    a model that is easy for other less **Geographic Information System** (**GIS**)-savvy
    members of your organization to run by themselves without needing a full understanding
    of ArcGIS Pro. This also helps standardize our methodologies, ensuring that everything
    is done in a consistent and approved manner.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以将模型与组织内的其他人共享，以便他们可以使用它来执行该过程。这可以减少您的工作量，让您能够专注于其他需要更高知识和技能水平的工作。由于模型会自动运行其中包含的地理处理工具，您可以通过创建一个易于其他不太熟悉**地理信息系统**（**GIS**）的成员独立运行的模型来简化操作，而无需完全理解ArcGIS
    Pro。这也有助于标准化我们的方法，确保一切都在一致和批准的方式下完成。
- en: All of this helps to save us time and money through increased efficiency, which
    is ultimately the main power of ModelBuilder. Like tasks, models consist of multiple
    components and have their own terminology associated with them. We will learn
    about this in the next section.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些都有助于通过提高效率来节省我们时间和金钱，这是ModelBuilder的主要力量。与任务一样，模型由多个组件组成，并与其相关的术语相关联。我们将在下一节中了解这些内容。
- en: Understanding model components and terminology
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解模型组件和术语
- en: Before you can create a model, you need to understand the pieces and parts that
    form them. Models include a series of connected processes. Each process includes
    a tool that can be a geoprocessing tool, another model, or a Python script. Each
    tool has variables that serve as inputs or outputs.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在您能够创建模型之前，您需要了解构成它们的各个部分。模型包括一系列连接的过程。每个过程都包含一个工具，可以是地理处理工具、另一个模型或Python脚本。每个工具都有变量作为输入或输出。
- en: 'The following diagram shows you two connected processes:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表显示了两个连接的过程：
- en: '![](img/6490b18d-de6d-441e-bf72-61295b79815f.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6490b18d-de6d-441e-bf72-61295b79815f.png)'
- en: As you can see in the preceding diagram, the model contains two processes built
    around the Buffer and Union tools. Each of these tools has a number of variables
    feeding into it. Variables are identified by the blue and green ovals. Notice
    that the two processes are sharing a variable – Street_Buffer. This variable is
    an output of the Buffer tool and also an input for the Union tool.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如前图所示，该模型包含围绕缓冲区和联合工具构建的两个过程。这些工具中的每一个都有许多变量输入。变量通过蓝色和绿色的椭圆形来识别。请注意，两个过程正在共享一个变量
    - Street_Buffer。这个变量是缓冲区工具的输出，也是联合工具的输入。
- en: 'There are three basic types of variables that are included in a model. They
    are as follows:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 模型中包含三种基本的变量类型。如下所示：
- en: '**Data variables**: These variables are existing data that is used as an input
    to a tool, script, or model. These can be layers in a map, standalone tables,
    text files, feature classes, shapefiles, and more.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据变量**：这些变量是作为工具、脚本或模型输入的现有数据。这些可以是地图中的图层、独立的表格、文本文件、要素类、shapefile等。'
- en: '**Value variables**: These variables are additional information that a tool
    may use to run. In the case of the Buffer tool, the distance used to create the
    buffer is considered a value variable as are the options to dissolve, end type,
    and the other parameters found that appear when you run the Buffer tool normally
    in the Geoprocessing pane.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**值变量**：这些变量是工具可能使用的附加信息，以运行。在缓冲区工具的情况下，用于创建缓冲区的距离被视为值变量，以及溶解、端类型和其他参数，这些参数在您在地理处理窗格中正常运行缓冲区工具时出现。'
- en: '**Derived variables**: These variables are the outputs of a process. Again,
    this can be a new layer, feature class, table, raster, or more depending on the
    tool used in the process.'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**派生变量**：这些变量是过程的输出。同样，这可以是一个新的图层、要素类、表格、栅格或更多，具体取决于过程中使用的工具。'
- en: 'The following diagram shows you an example of the three types of basic variables
    in a model:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 下图展示了模型中三种基本变量的一个示例：
- en: '![](img/584078c6-6b5a-4350-ab2f-811e8e51f088.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/584078c6-6b5a-4350-ab2f-811e8e51f088.png)'
- en: Since ModelBuilder is a visual programming language, as you can see from the
    preceding diagram, you can distinguish the types of variables based on their colors.
    While you can adjust these settings by default, Data Variable is a darker blue.
    Value Variable is a lighter blue and Derived Variable is green.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 由于ModelBuilder是一种可视化编程语言，如前图所示，您可以根据它们的颜色区分变量的类型。虽然您可以通过默认设置调整这些设置，但数据变量是较深的蓝色。值变量是较浅的蓝色，派生变量是绿色。
- en: Next, we will learn how to save a model that you have created.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将学习如何保存您创建的模型。
- en: Saving a model
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 保存模型
- en: If you wish to save a model that you created so that you can use it again or
    share it with others, you must save it in a custom toolbox that you will create.
    Models cannot be saved in a system toolbox that is automatically included with
    ArcGIS Pro when it is installed.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望保存您创建的模型以便再次使用或与他人共享，您必须将其保存在您将创建的自定义工具箱中。模型不能保存在ArcGIS Pro安装时自动包含的系统工具箱中。
- en: 'When you create a new project, ArcGIS Pro automatically creates a custom toolbox
    for that project. It is stored in the `Project` folder as a `.tbx` file. This
    provides you with an easy to use place to store your models. This toolbox is also
    automatically linked to your project and accessible in the Catalog pane, as follows:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 当您创建一个新的项目时，ArcGIS Pro会自动为该项目创建一个自定义工具箱。它存储在`项目`文件夹中，作为一个`.tbx`文件。这为您提供了一个易于使用的地方来存储您的模型。此工具箱还自动链接到您的项目，并在以下方式中在目录窗格中可访问：
- en: '![](img/bbe96687-4f50-41bb-a16d-4dd35e918985.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/bbe96687-4f50-41bb-a16d-4dd35e918985.png)'
- en: 'You can also create custom toolboxes within a geodatabase so that along with
    it, your models and Python scripts are stored as well with your GIS data, as illustrated
    in the following screenshot (this is a good option if the models or tools that
    you save to the toolbox will be used in multiple ArcGIS Pro projects):'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以在地理数据库中创建自定义工具箱，以便与它一起，您的模型和Python脚本也存储在您的GIS数据中，如下面的截图所示（如果要将保存到工具箱中的模型或工具用于多个ArcGIS
    Pro项目，这是一个不错的选择）：
- en: '![](img/2c270ca5-a880-4877-b30c-06b7cce77c03.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/2c270ca5-a880-4877-b30c-06b7cce77c03.png)'
- en: 'You can also create other custom `.tbx` files besides the one that is automatically
    created with a new project. Using a custom `.tbx` file is perfect if the tool
    and models you save to it will not only be used with multiple projects but also
    across multiple databases or in the case of consultants and multiple clients.
    The following screenshot shows you an example of a custom toolbox file located
    in a folder:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以创建除自动与新建项目一起创建的`.tbx`文件之外的其他自定义`.tbx`文件。如果您要保存的工具和模型不仅将在多个项目中使用，而且还将跨多个数据库使用，或者是在咨询人员和多个客户的情况下使用，那么使用自定义`.tbx`文件是完美的。以下屏幕截图显示了位于文件夹中的自定义工具箱文件示例：
- en: '![](img/a9013ffa-7706-4a0e-9ddd-cc372e4e0972.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/a9013ffa-7706-4a0e-9ddd-cc372e4e0972.png)'
- en: Using custom `.tbx` files to store models also makes it easier to share them
    with others since they are smaller than a geodatabase, which also includes all
    the GIS data. The `.tbx` files can easily be emailed, uploaded to **File Transfer
    Protocol** (**FTP**) sites, or placed in your ArcGIS Online account.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 使用自定义`.tbx`文件存储模型也使得与他人共享它们变得更加容易，因为它们比地理数据库小，而且还包括所有GIS数据。`.tbx`文件可以轻松地通过电子邮件发送、上传到**文件传输协议**（**FTP**）站点，或者放置在您的ArcGIS
    Online账户中。
- en: Now that you have a good general understanding of what a model is, its components,
    and how to save one, it is time to put that knowledge to use.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经对模型有了很好的总体理解，包括其组件以及如何保存模型，现在是时候将知识付诸实践了。
- en: Exercise 12A – Creating a model
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习12A – 创建模型
- en: A new ordinance was just passed to protect the streams in the Trippville area.
    It requires all new building or improvement projects to take place at least 150
    feet from the centerline of all creeks or streams. This will hopefully protect
    the banks from erosion and reduce polluted runoff from reaching them.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 最近刚刚通过了一项新法规，以保护Trippville地区的溪流。该法规要求所有新的建筑或改善项目至少在所有溪流或溪流的中心线150英尺以外进行。这有望保护河岸不受侵蚀，并减少污染径流到达它们。
- en: The community and economic development director has asked you to calculate the
    total area of each parcel that is inside the non-disturb area and how much of
    each parcel is out. Since you will need to update this analysis anytime a new
    subdivision or commercial development is added, for this, you have decided to
    create a model that you can run every time you need to perform these calculations.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 社区和经济发展主任要求您计算每个地块在非扰动区域内的总面积以及每个地块有多少面积在外。由于您需要随时在添加新的分区或商业开发时更新此分析，因此您决定创建一个模型，每次您需要执行这些计算时都可以运行该模型。
- en: In this exercise, you will create a simple model that will calculate how much
    of each parcel is inside and outside a non-disturb buffer area around the streams.
    This model will include a couple of geoprocessing tools and their associated variables.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，您将创建一个简单的模型，该模型将计算每个地块在溪流周围非扰动缓冲区内部和外部各占多少面积。此模型将包括几个地理处理工具及其相关变量。
- en: Step 1 – Opening the project and the ModelBuilder window
  id: totrans-83
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第1步 – 打开项目和ModelBuilder窗口
- en: 'The first step is to open the project and then the ModelBuilder window so that
    you can begin creating the model:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是打开项目然后打开ModelBuilder窗口，这样您就可以开始创建模型：
- en: Start ArcGIS Pro and open the `Ex12.aprx` project found in `C:\Student\IntroArcPro\Chapter12`.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动ArcGIS Pro并打开位于`C:\Student\IntroArcPro\Chapter12`的`Ex12.aprx`项目。
- en: When the project opens, expand the `Toolboxes` folder in the Catalog pane.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当项目启动时，请在目录窗格中展开`Toolboxes`文件夹。
- en: Right-click on the Ex12 toolbox that you see on your screen.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击您屏幕上看到的Ex12工具箱。
- en: 'Select the New | Model option, as illustrated in the following screenshot:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“新建 | 模型”选项，如图所示：
- en: '![](img/f7b8dc79-96db-4a5f-98ae-ef4f41d470ec.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f7b8dc79-96db-4a5f-98ae-ef4f41d470ec.png)'
- en: 'ModelBuilder should now be open and the ModelBuilder tab should have appeared
    in the ribbon. The ModelBuilder window and tab are used together to create or
    edit models. As you can see in the following screenshot, the ModelBuilder tab
    contains tools for saving the model, navigating in the ModelBuilder window, and
    adding content to the model:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: ModelBuilder现在应该已经打开，并且ModelBuilder选项卡应该已经出现在功能区中。ModelBuilder窗口和选项卡一起使用来创建或编辑模型。正如您在以下屏幕截图中所见，ModelBuilder选项卡包含用于保存模型、在ModelBuilder窗口中导航以及向模型添加内容的工具：
- en: '![](img/1deb5a84-6d48-4b0a-8e25-0288690e63c3.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/1deb5a84-6d48-4b0a-8e25-0288690e63c3.png)'
- en: You will now begin using these tools to create your model.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在将开始使用这些工具来创建您的模型。
- en: Step 2 – Adding model components
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 – 添加模型组件
- en: 'In this step, you will begin adding tools and variables to your model. You
    will explore some of the different methods that can be used here. You will start
    by adding the process that will generate the non-disturb buffers around the streams:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步，你将开始向你的模型添加工具和变量。你将探索可以在这里使用的一些不同方法。你将首先添加生成流周围非干扰缓冲区的过程：
- en: Click on the Tools button on the Insert group on the ModelBuilder tab in the
    ribbon. This opens the Geoprocessing pane on the right side of the interface.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在工具栏的模型构建器选项卡上的插入组中单击工具按钮。这将在界面的右侧打开地理处理面板。
- en: Click on the Toolboxes tab at the top of the pane to expose the various toolboxes
    within ArcGIS Pro. These toolboxes will be your system toolboxes.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在面板顶部单击工具箱选项卡以显示ArcGIS Pro中的各种工具箱。这些工具箱将是你的系统工具箱。
- en: Expand the Analysis Tools toolbox and then the Proximity toolset.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开分析工具工具箱，然后展开邻近工具集。
- en: 'Drag and drop the Buffer tool from the toolbox into the ModelBuilder window
    so that it looks like this:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从工具箱中将缓冲工具拖放到模型构建器窗口中，使其看起来像这样：
- en: '![](img/14d7435a-c302-4f12-8475-f9af08011a53.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/14d7435a-c302-4f12-8475-f9af08011a53.png)'
- en: 'You have just added your first process to a model. Model processes will exist
    in one of three states: **not ready to run**, **ready to run**, and **have been
    run**. The process that you just added is in the **not ready to run** state.'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 你刚刚将第一个过程添加到了模型中。模型过程将存在于三种状态之一：**未准备好运行**、**准备好运行**和**已运行**。你刚刚添加的过程处于**未准备好运行**状态。
- en: 'ArcGIS Pro indicates that visually by displaying the tools and variables in
    gray. A process will be in the **not ready to run** state until all required variables
    have been defined. In the case of the **Buffer** tool, you have not yet defined
    the three variables required: **input feature class**, **buffer distance**, and
    **output feature class**. You will now do that.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: ArcGIS Pro通过以灰色显示工具和变量来直观地表示。一个过程将在所有必需的变量都定义之前处于**未准备好运行**状态。在**缓冲**工具的情况下，你尚未定义所需的三个变量：**输入要素类**、**缓冲距离**和**输出要素类**。你现在将这样做。
- en: 'The input feature class for the Buffer tool used in the model will be the Streams
    layer in your map. So, you will now add that layer as a variable to the model.
    Select the Streams layer in the Contents pane and drag it into the ModelBuilder
    window. It will be added as a blue oval, as shown in the following screenshot:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型中使用的缓冲工具的输入要素类将是你的地图中的流层。因此，你现在需要将这个层作为变量添加到模型中。在内容窗格中选择流层，并将其拖入模型构建器窗口。它将以蓝色椭圆形添加，如下面的截图所示：
- en: '![](img/ca994cf6-9f5e-443d-beb5-31c8064a16a0.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ca994cf6-9f5e-443d-beb5-31c8064a16a0.png)'
- en: Click somewhere within the blank space in ModelBuilder to deselect the Streams
    variable.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型构建器中的空白区域内单击以取消选择流变量。
- en: You now need to connect the Streams variable that you just added to the Buffer
    tool. Click on the Streams variable and with your left mouse button still depressed,
    move your mouse pointer until it is over the Buffer tool. Then, release your mouse
    button.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你需要将你刚刚添加的流变量连接到缓冲工具。单击流变量，然后按住鼠标左键，将鼠标指针移动到缓冲工具上。然后，释放鼠标按钮。
- en: A small pop-up menu should appear; select Input Features. You have just defined
    the input feature class for the **Buffer** tool.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 应该出现一个小弹出菜单；选择输入要素。你刚刚为**缓冲**工具定义了输入要素类。
- en: Now double-click on the Buffer tool in the ModelBuilder window. This will open
    the Tools dialog window in ModelBuilder so that you can define additional variables.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，在模型构建器窗口中双击缓冲工具。这将打开模型构建器中的工具对话框，以便你可以定义其他变量。
- en: The output should automatically be set to Streams_Buffer, which is being saved
    to `C:\Student\IntroArcPro\Chapter12\Ex12.gdb\`. Verify whether this is true by
    hovering your mouse over the output feature class name. This will be fine for
    this exercise so that you will leave it as is without changing it.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出应自动设置为Streams_Buffer，它正在保存到`C:\Student\IntroArcPro\Chapter12\Ex12.gdb\`。通过将鼠标悬停在输出要素类名称上验证这是否正确。对于这个练习来说，这将很好，所以你将保持不变，不进行更改。
- en: In the Distance [value or field], type `150`, and verify that the units are
    Feet.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在距离[值或字段]中输入`150`，并验证单位是英尺。
- en: 'Since the director has not indicated that retaining any of the stream attributes
    in the new buffer layer is important for the calculations, you will have the resulting
    buffers dissolve. Click on the drop-down arrow under Dissolve Type and select
    Dissolve all output features into a single feature:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于导演没有指出保留任何流属性在新缓冲层中对于计算很重要，因此您将得到的结果缓冲区将溶解。单击“溶解类型”下的下拉箭头，然后选择将所有输出要素溶解为单个要素：
- en: '![](img/6f80d283-3947-4f18-9cf1-eed0fd20cff3.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/6f80d283-3947-4f18-9cf1-eed0fd20cff3.png)'
- en: The Buffer tool window should now look similar to the preceding screenshot.
    Depending on what you may have done previously, the name of the input feature
    may be slightly different.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 缓冲工具窗口现在应该看起来与前面的截图相似。根据您之前可能执行的操作，输入要素的名称可能略有不同。
- en: Click OK once you have verified your settings.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在验证了您的设置后，单击“确定”。
- en: Click on the Auto Layout button on the ModelBuilder tab.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型构建器选项卡上单击自动布局按钮。
- en: 'Your model should now include a single completed process that is in the **ready
    to run** state. You can tell it is ready to run because the tool and all lined
    variables are now displayed with a colored fill that is not gray, as shown in
    the following screenshot:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 您的模型现在应包含一个单个完成流程，该流程处于**就绪运行**状态。您可以通过工具和所有连线变量的彩色填充（非灰色）来判断它是否就绪运行，如下面的截图所示：
- en: '![](img/75c5b39e-0ae6-42a8-987f-2bf5fd5527d6.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/75c5b39e-0ae6-42a8-987f-2bf5fd5527d6.png)'
- en: Now let's save your model to ensure your hard work is not lost in case something
    happens.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们保存您的模型，以确保在发生意外情况时您的工作不会丢失。
- en: Click on the Properties button in the Model group on the ModelBuilder tab.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型构建器选项卡上的模型组中单击“属性”按钮。
- en: 'Fill in the following details in the respective properties:'
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在相应的属性中填写以下详细信息：
- en: Type `ParcelsStreamProtectionBuffer` in Name field.
  id: totrans-120
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在名称字段中键入`ParcelsStreamProtectionBuffer`。
- en: Type `Parcels Stream Protection Buffer Analysis` in the Label field.
  id: totrans-121
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在标签字段中键入`Parcels Stream Protection Buffer Analysis`。
- en: Leave all other properties with default settings.
  id: totrans-122
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将所有其他属性保留为默认设置。
- en: 'Verify that your Tool Properties window looks like the following screenshot
    and then click OK:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认您的工具属性窗口看起来与以下截图相似，然后单击“确定”：
- en: '![](img/5895063b-98c4-4e8b-bb09-9ab2b436e864.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/5895063b-98c4-4e8b-bb09-9ab2b436e864.png)'
- en: Click the Save button located in the Model group on the ModelBuilder tab to
    save the model. If you still have the Catalog pane open, you should see the name
    of the model change from model to the label that you entered previously.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型构建器选项卡上的模型组中单击“保存”按钮以保存模型。如果您仍然打开了目录窗格，您应该看到模型的名称从“模型”更改为您之前输入的标签。
- en: The name for a model cannot contain spaces or other special characters with
    the exception of underscores. The label can be much more descriptive and does
    not have the same restrictions.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 模型的名称不能包含空格或其他特殊字符，除了下划线。标签可以更加详细，没有相同的限制。
- en: The process that you just created in the model will generate the buffer areas
    around the streams. Now you need to add another process that will calculate how
    much of each parcel is inside and outside that buffer area.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 您在模型中创建的流程将生成流周围的缓冲区。现在您需要添加另一个流程来计算每个包裹在缓冲区内的数量。
- en: You will use the **Union** tool to union the parcels with the newly created
    stream buffer. This will create a new feature class that will split each parcel
    where it is overlapped by the stream buffer, thus allowing you to determine how
    much is inside and outside the buffer.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 您将使用**联合**工具将包裹与新建的流缓冲区联合。这将创建一个新的要素类，它将在流缓冲区重叠的地方分割每个包裹，从而让您确定缓冲区内外的数量。
- en: Step 3 – Adding another process
  id: totrans-129
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第3步 - 添加另一个流程
- en: 'In this step, you will add another process to your model. This process will
    include the **Union** tool. You will then link this new process to the one that
    you created in the previous step:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 在此步骤中，您将向模型中添加另一个流程。此流程将包括**联合**工具。然后，您将此新流程链接到您在上一步骤中创建的流程：
- en: Click on the Tools button in the ModelBuilder tab again to open the Geoprocessing
    pane.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次在模型构建器选项卡上单击工具按钮以打开地理处理窗格。
- en: Expand the Overlay toolset in the Analysis toolbox.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在分析工具箱中展开叠加工具集。
- en: Add the Union tool to your model by right-clicking on the tool and selecting
    Add to model.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在工具上右键单击并选择将工具添加到模型中，将联合工具添加到您的模型中。
- en: If required, using your scroll wheel, zoom out in the ModelBuilder window until
    you have room to see both the Union tool and the Buffer tool.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，使用您的滚轮在模型构建器窗口中向外缩放，直到您有足够的空间看到联合工具和缓冲工具。
- en: 'With the Union tool and the Output Feature Class variable selected, use your
    mouse to move them so that they are located below the Buffer tool, as shown in
    the following screenshot:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选择**合并工具**和**输出要素类变量**后，使用您的鼠标将它们移动到缓冲工具下方，如图所示：
- en: '![](img/a73e4311-24f1-41f2-bb1b-4da04eec2bdc.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/a73e4311-24f1-41f2-bb1b-4da04eec2bdc.png)'
- en: You have now added the Union tool to the model. Now you need to link it to the
    output from the Buffer tool and define the rest of its required variables.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已将合并工具添加到模型中。现在您需要将其链接到缓冲工具的输出，并定义其余所需变量。
- en: Double-click on the Union tool to open the tool window.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击合并工具以打开工具窗口。
- en: In the Union tool window, click on the small arrow next to Input Features, and
    then select Parcels from the list that displays.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在合并工具窗口中，单击“输入要素”旁边的小箭头，然后从显示的列表中选择“地块”。
- en: Repeat this same process to select Streams_Buffer located under Model Variables.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重复此过程以选择位于模型变量下的**Streams_Buffer**。
- en: Set the output to `C:\Student\IntroArcPro\Chapter12\Ex12.gdb\Parcels_StreamBuff_Union`.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将输出设置为`C:\Student\IntroArcPro\Chapter12\Ex12.gdb\Parcels_StreamBuff_Union`。
- en: 'Verify that your Union tool settings match the following screenshot and click
    OK:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认您的合并工具设置与以下截图匹配，然后单击“确定”：
- en: '![](img/4c89db7d-b017-4b69-8096-f9d33216a280.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4c89db7d-b017-4b69-8096-f9d33216a280.png)'
- en: 'Your entire model should now be in the **ready to run** state and look similar
    to this:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 您的整个模型现在应处于**就绪运行**状态，看起来类似于以下：
- en: '![](img/7e2426f8-5fc1-40cd-b0fd-d0aea0bb77e7.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/7e2426f8-5fc1-40cd-b0fd-d0aea0bb77e7.png)'
- en: As compared to the preceding diagram, your layout may be different. That is
    acceptable as long as the proper connections are made, and the processes are in
    the **ready to run** state.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 与前面的图相比，您的布局可能不同。只要正确连接，并且进程处于**就绪运行**状态，这是可以接受的。
- en: Save your model and your project.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存您的模型和项目。
- en: You may close ArcGIS Pro or leave it open if you plan to continue.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以选择关闭ArcGIS Pro或保持打开状态，如果您计划继续使用。
- en: You have learned how to create a model and have understood its components. After
    creating a model, of course, you will want to run it. There are many ways to run
    a model. So, we will look at how to run a model in the next section.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 您已经学会了如何创建模型，并理解了其组件。创建模型后，当然，您会想要运行它。运行模型的方法有很多，所以我们将查看如何在下一节中运行模型。
- en: Running a model
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运行模型
- en: You can run the entire model and the processes in the **ready to run** state
    or just a single process in the model. In this section, you will explore the different
    ways you can run a model you create in ModelBuilder.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以运行整个模型和处于**就绪运行**状态的进程，或者只运行模型中的单个进程。在本节中，您将探索在模型构建器中创建的模型的不同运行方式。
- en: If you wish to run the entire model, the easiest way to do that is simply double-click
    on it, from the toolbox it is stored in. This will run all processes in the model
    that are in the **ready to run** or **have been run** state. If you have allowed
    the users to provide values for some of the variables within the model, they will
    be prompted to enter those before the model is run.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望运行整个模型，最简单的方法是双击它，从存储的工具箱中运行。这将运行模型中所有处于**就绪运行**或**已运行**状态的进程。如果您允许用户为模型中的某些变量提供值，他们将在模型运行之前被提示输入这些值。
- en: Otherwise, if you did not allow for user input, the model will just indicate
    that there are no parameters in the geoprocessing window and all you need to do
    is click the Run button. You will learn how to make a model interactive a little
    later in this chapter.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 否则，如果您没有允许用户输入，模型将只指示地理处理窗口中没有参数，您只需单击“运行”按钮即可。您将在本章稍后学习如何使模型交互。
- en: You can also choose to run the model or processes in the model from the **ModelBuilder**
    window. Clicking on the Run button in the **ModelBuilder** tab will run all ready
    to run processes within the model. It will not run processes that are in the **have
    been run** or **not ready to run** state. This allows you to build and test a
    model as you go without being required to run the entire model.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 您也可以选择从**模型构建器**窗口运行模型或模型中的进程。在**模型构建器**选项卡中单击“运行”按钮将运行模型中所有准备就绪的进程。它不会运行处于**已运行**或**未就绪**状态的进程。这允许您在构建和测试模型的同时，无需运行整个模型。
- en: Now that you know a little more about how to run a model, you will get to put
    that knowledge into practice.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经对如何运行模型有了更多的了解，您将有机会将所学知识付诸实践。
- en: Exercise 12B – Running a model
  id: totrans-156
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习12B – 运行模型
- en: In this exercise, you will first run your model from within ModelBuilder. Then,
    you will get to run it directly from the toolbox so that you can see what your
    users will experience when they run the model.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，你将首先在ModelBuilder中运行你的模型。然后，你将直接从工具箱中运行它，这样你就可以看到当用户运行模型时会经历什么。
- en: Step 1 – Running the model from ModelBuilder
  id: totrans-158
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第1步 – 从ModelBuilder运行模型
- en: 'In this step, you will run the model that you created in *Exercise 12A* in
    [Chapter 12](7747c679-b20b-47b2-946d-a1f8c5a9ded0.xhtml), *Automating Processes
    with ModelBuilder and Python*, from within ModelBuilder. You will also explore
    how to run individual processes so that you can test your model as you create
    it:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步，你将在第12章的*练习12A*，*使用ModelBuilder和Python自动化流程*中，从ModelBuilder内部运行你在[第12章](7747c679-b20b-47b2-946d-a1f8c5a9ded0.xhtml)创建的模型。你还将探索如何运行单个过程，这样你可以在创建模型的同时测试你的模型：
- en: If you closed ArcGIS Pro after the last exercise, start ArcGIS Pro and open
    the `Ex12.aprx` project.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你在上一个练习后关闭了ArcGIS Pro，请启动ArcGIS Pro并打开`Ex12.aprx`项目。
- en: Expand the Toolboxes folder in the Catalog pane and then expand the Ex12 toolbox.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录窗格中展开工具箱文件夹，然后展开Ex12工具箱。
- en: Right-click on the model that you created in *Exercise 12A* and select Edit
    from the displayed context menu. This will open the ModelBuilder window.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击你在*练习12A*中创建的模型，并从显示的上下文菜单中选择编辑。这将打开ModelBuilder窗口。
- en: If you created your model successfully in the last exercise and saved it, all
    processes should be in the **ready to run** state. This is indicated by all tools
    and variables having a solid color fill applied. If any are filled with gray or
    empty, then you need to go back to *Exercise 12A*in [Chapter 12](7747c679-b20b-47b2-946d-a1f8c5a9ded0.xhtml),
    *Automating Processes with ModelBuilder and Python*, and work back through the
    exercise.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在上一个练习中成功创建了模型并保存了它，所有进程都应该处于**就绪运行**状态。这可以通过所有工具和变量都应用了实心填充色来表示。如果有任何填充灰色或为空，那么你需要回到第12章的*练习12A*，*使用ModelBuilder和Python自动化流程*，并重新完成练习。
- en: 'Right-click on the Buffer tool in ModelBuilder. Select Run to run the **Buffer**
    tool with the connected variables that you defined in the model. A small window
    will pop up inside ModelBuilder that displays the progress of the **Buffer** tool
    and will let you know when it completes. When the tool is finished, notice what
    happens to the graphics for the **Buffer** tool and its associated variables,
    as shown in the following screenshot:'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在ModelBuilder中右键单击缓冲工具。选择运行以使用在模型中定义的连接变量运行**缓冲**工具。ModelBuilder内部将弹出一个小窗口，显示**缓冲**工具的进度，并告诉你何时完成。当工具完成时，注意**缓冲**工具及其相关变量的图形发生了什么，如下面的截图所示：
- en: '![](img/ea3eb701-b45a-4785-9f03-419b59691b1d.png)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ea3eb701-b45a-4785-9f03-419b59691b1d.png)'
- en: The **Buffer** tool process is now in the **has been run** state. This means
    you have successfully run that process in the model.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '**缓冲**工具进程现在处于**已运行**状态。这意味着你已经在模型中成功运行了该进程。'
- en: 'Question: *How have the graphics for the **Buffer** tool and its associated
    variables changed?*'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：*缓冲工具及其相关变量的图形是如何变化的？*
- en: As you are beginning to learn, the state of a process will impact how it runs.
    Now that this process is in the **has been run** state, it will not run again
    if you click the Run button in the ribbon. The Run button will only run those
    processes that are in the **ready to run** state. Let's verify that, though.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你开始学习的那样，进程的状态将影响其运行方式。现在这个进程处于**已运行**状态，如果你在功能区点击运行按钮，它将不会再次运行。运行按钮只会运行处于**就绪运行**状态的进程。让我们验证一下。
- en: Close the pop-up window that appeared when you ran the Buffer tool by clicking
    on the x located in the upper right corner.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击右上角的x关闭运行缓冲工具时出现的弹出窗口。
- en: Click the Run button in the Run group on the ModelBuilder tab. Watch what happens
    to the model as it is run.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在ModelBuilder选项卡上的运行组中点击运行按钮。观察模型运行时发生了什么。
- en: 'Question: *Did the model try to re-run the **Buffer** tool? What tool or tools
    did the model run when you clicked on the **Run** button and why?*'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：*模型是否尝试重新运行**缓冲**工具？当你点击**运行**按钮时，模型运行了哪些工具或工具，为什么？*
- en: We will now move on to the next step about how to reset the run state.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将进入下一步，关于如何重置运行状态。
- en: Step 2 – Resetting the run state
  id: totrans-173
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 – 重置运行状态
- en: 'In this step, you will learn how to reset the run state of all the processes
    in the model that are in the **have been run** state back to the **ready to run**
    state:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步，你将学习如何将模型中所有处于**已运行**状态的过程的运行状态重置为**准备运行**状态：
- en: 'Click on the Validate button in the Run group on the ModelBuilder tab in the
    ribbon as illustrated in the following screenshot:'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在工具栏的ModelBuilder选项卡中，点击运行组中的验证按钮，如图所示：
- en: '![](img/0408ab86-0fe4-41f9-93e1-48d69fce0ae7.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/0408ab86-0fe4-41f9-93e1-48d69fce0ae7.png)'
- en: 'Question: *What happens to all the processes in the model that were in the
    **have been run** state?*'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：*模型中所有处于**已运行**状态的过程会发生什么？*
- en: Click the Run button on the ribbon and watch how your model runs this time.
    All the processes will run this time because all of them are in the **ready to
    run** state.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击工具栏上的运行按钮，观察这次模型是如何运行的。所有过程这次都会运行，因为它们都处于**准备运行**状态。
- en: Now you will actually verify that your model ran and created the feature classes
    that it was supposed to in the project database.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你将实际验证你的模型是否运行，并在项目数据库中创建了它应该创建的特征类。
- en: Expand the Databases folder in the Catalog pane and then expand the Ex12 geodatabase.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录窗格中展开数据库文件夹，然后展开Ex12地理数据库。
- en: If you do not see anything in the geodatabase, then you may need to right-click
    on it and select Refresh. That should allow it to display the new feature classes
    that your model has created.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有在地理数据库中看到任何内容，你可能需要右键单击它并选择刷新。这应该允许它显示模型创建的新要素类。
- en: 'Question: *What do you see in this database?*'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：*你在数据库中看到了什么？*
- en: Right-click on each feature class that you see in the Ex12 geodatabase and select
    Delete until the database is empty. If you are asked whether you are sure that
    you want to permanently delete these items, select Yes. Deleting these feature
    classes will allow you to verify the model runs properly when you run it directly
    from the toolbox in the next step.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击你在Ex12地理数据库中看到的每个要素类，然后选择删除，直到数据库为空。如果你被问及是否确定要永久删除这些项目，请选择是。删除这些要素类将允许你在下一步直接从工具箱运行模型时验证模型是否正确运行。
- en: Close the **ModelBuilder** window. If asked to save the model, do so.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭**ModelBuilder**窗口。如果被要求保存模型，请保存。
- en: We will now move onto the next step about how to run the model from a toolbox.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将进入下一步，关于如何从工具箱运行模型。
- en: Step 3 – Running the model from a toolbox
  id: totrans-186
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第3步 – 从工具箱运行模型
- en: 'In this step, you will now run the model directly from the toolbox. This will
    be how most users will access and run models that you create. Running the model
    using this method will allow you to have the same experience that your users will
    have when they run the model:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步，你现在将直接从工具箱运行模型。这将是大多数用户访问和运行你创建的模型的方式。使用这种方法运行模型将允许你拥有与用户运行模型时相同的体验：
- en: Make sure the Map view is active by clicking on the Map tab at the top of the
    view area.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保地图视图是活动的，通过点击视图区域顶部的地图选项卡。
- en: In the Catalog pane, expand the Toolboxes | Ex12 toolbox.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录窗格中，展开工具箱 | Ex12工具箱。
- en: 'Double-click on the Parcels Streams Protection Buffer Analysis model you created,
    as shown in the following screenshot:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击你创建的Parcels Streams Protection Buffer Analysis模型，如图所示：
- en: '![](img/3a95511d-8ed3-45fc-9f65-2b0082978d2f.png)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/3a95511d-8ed3-45fc-9f65-2b0082978d2f.png)'
- en: When you double-click on your model, it should open in the Geoprocessing pane.
    It will state that there are no parameters. This is expected because you have
    not defined any variables as parameters that will accept user input. Click the
    Run button at the bottom of the Geoprocessing pane.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当你双击你的模型时，它应该在地理处理窗格中打开。它将声明没有参数。这是预期的，因为你没有定义任何作为参数的变量，这些变量将接受用户输入。点击地理处理窗格底部的运行按钮。
- en: When the model is finished, return to the Catalog pane.
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当模型完成后，返回到目录窗格。
- en: Go to Databases | Ex12 geodatabase again.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次转到数据库 | Ex12地理数据库。
- en: 'Question: *What feature class is now in the Ex12 geodatabase and how does that
    compare to when you ran the model from inside ModelBuilder?*'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 问题：*现在在Ex12地理数据库中的要素类是什么，它与你在ModelBuilder内部运行模型时有什么不同？*
- en: When you ran the model from inside ModelBuilder, it produced two different feature
    classes within the Ex12 geodatabase. However, when you ran it from the toolbox,
    it only produced one. *Why is that?*
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 当你在ModelBuilder内部运行模型时，它会在Ex12地理数据库内产生两个不同的要素类。然而，当你从工具箱运行它时，它只产生了一个。*这是为什么？*
- en: The answer is the feature class that was created by the **Buffer** tool in the
    model is considered **intermediate data**. Intermediate data is any feature class
    or table that is created within a model that is then used by other tools and is
    not a final result of a series of linked processes.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 答案是模型中由**缓冲区**工具创建的特征类被认为是**中间数据**。中间数据是指任何在模型内部创建并随后被其他工具使用，但不是一系列链接过程最终结果的要素类或表。
- en: When you run a model from a toolbox, it will automatically clean up after itself.
    This means it automatically deletes the intermediate data that is created as the
    model runs. The only data it leaves is the final results of any processes in the
    model, which is not intermediate data. The end result is that you have the data
    that you need without also being left with a lot of partial datasets or layers
    that can clutter your database.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 当你从一个工具箱中运行模型时，它会自动清理。这意味着它会自动删除模型运行过程中创建的中间数据。它留下的唯一数据是模型中任何过程的最终结果，这不是中间数据。最终结果是，你得到了你需要的数据，而没有留下大量可能使你的数据库变得杂乱无章的局部数据集或图层。
- en: Save your project and close ArcGIS Pro.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存你的项目并关闭ArcGIS Pro。
- en: You have now learned how to run your model using various methods depending on
    where you are within the application. While creating or editing your model, you
    now know how to run individual processes that are included in the model. You also
    learned how to run your model from ModelBuilder and from a toolbox.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你已经学会了如何根据你在应用程序中的位置使用不同的方法来运行你的模型。在创建或编辑模型时，你现在知道如何运行模型中包含的各个过程。你还学会了如何从ModelBuilder和工具箱中运行你的模型。
- en: Now that you have created and run your first model, you can now run this model
    anytime you need to update the calculations for the areas of each parcel in and
    outside a floodplain.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经创建并运行了你的第一个模型，你现在可以随时运行这个模型来更新洪水平原内外每个地块的计算。
- en: We will learn how to make our model more interactive for the user in the next
    section.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将学习如何使我们的模型对用户更加交互式。
- en: Making a model interactive
  id: totrans-203
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 制作一个交互式模型
- en: So, you have created your first model. It is a very efficient tool that will
    help you quickly update information. However, *what happens if the buffer distance
    changes or the director wants to look at different layers such as land use or
    just the commercial properties?* In this section, you will explore different ways
    you can allow users to provide input for specified parameters included within
    your model.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，你已经创建了你的第一个模型。这是一个非常高效的工具，可以帮助你快速更新信息。然而，*如果缓冲区距离发生变化或主管想要查看不同的图层，如土地利用或仅商业地产，会发生什么？*
    在本节中，你将探索不同的方法，允许用户为模型中包含的指定参数提供输入。
- en: Right now, the model you created is hardcoded to a specific set of variables.
    If something changes, you will be forced to edit the model before it can be used.
    *Wouldn't it be more effective to allow others to specify different values for
    the variables in the model when they run it?* You can allow that. It simply requires
    you to designate a variable as a parameter within the model. This allows the user
    to provide a value before they run the model.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，你创建的模型是针对一组特定变量硬编码的。如果有什么变化，你将不得不在模型可以使用之前编辑它。*难道不是更有效，允许其他人在运行模型时为变量指定不同的值吗？*
    你可以做到这一点。这只需要你将变量指定为模型内的参数。这样，用户在运行模型之前就可以提供值。
- en: 'To designate a variable as a parameter so that a user can specify a value when
    it is run, you simply right-click on the variable in ModelBuilder and select Parameter.
    When you do that, a small capital P will appear next to the variable indicating
    that it is now a model parameter, as illustrated in the following diagram:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 要将变量指定为参数，以便用户在运行时指定值，你只需在ModelBuilder中右键单击变量并选择参数。当你这样做时，一个小的大写P将出现在变量旁边，表明它现在是一个模型参数，如下面的图所示：
- en: '![](img/5399ebfe-9777-4942-95bd-7ee473a4339d.png)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5399ebfe-9777-4942-95bd-7ee473a4339d.png)'
- en: In the preceding diagram, you can see that the Parcels and Parcels_ StreamBuff_Union
    variables are both marked as parameters. This will allow the user to select the
    values that they wish to use for those variables. This means they will be able
    to union the stream buffers with another layer besides just the parcels layer
    and control where the results are saved to and the name they are given.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的图中，你可以看到Parcels和Parcels_ StreamBuff_Union变量都被标记为参数。这将允许用户选择他们希望用于这些变量的值。这意味着他们除了可以将溪流缓冲区与地块图层联合外，还可以控制结果保存的位置和名称。
- en: Making a model interactive can greatly increase its functionality. It will allow
    the model to be used in different scenarios and with different datasets. The downside
    is that the more interactive you make a model, the greater the chance of introducing
    operator error. Users may select the wrong input layer for a tool or forget where
    they set the final results to be saved. This can result in more problems than
    the model was designed to solve. So, it is always a balancing act between flexibility
    and hard coding to eliminate error sources.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 使模型交互式可以大大增加其功能。它将允许模型在不同的场景和不同的数据集中使用。缺点是，你使模型越交互式，引入操作员错误的机会就越大。用户可能会为工具选择错误的输入层或忘记他们设置最终结果保存的位置。这可能导致比模型设计解决的问题更多。因此，灵活性硬编码之间总是需要平衡，以消除错误来源。
- en: Now let's give you an opportunity to make your model interactive.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们给你一个机会使你的模型交互式。
- en: Exercise 12C – Allowing users to provide inputs to run models
  id: totrans-211
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习12C – 允许用户输入运行模型
- en: The director was impressed with the model that you created. It allowed them
    to easily calculate the area of each parcel that was in and out of the stream
    protection area. The council is considering changing the buffer distance for the
    non-disturb area and the director wants to look at the impact of several different
    distances. So, they will need to be able to run the model in a way that allows
    them to specify different buffer distances and save the overall results with different
    names so that they can review the results of the different distances.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 导演对你的模型印象深刻。它使他们能够轻松地计算出流保护区内外每一块地的面积。委员会正在考虑改变非干扰区的缓冲距离，而导演希望查看不同距离的影响。因此，他们需要能够以允许他们指定不同缓冲距离并使用不同名称保存整体结果的方式运行模型。
- en: In this exercise, you will make the previous model you created interactive to
    those users and provide their own values to variables within the model. You will
    allow users to specify the buffer distance that they want to use and the final
    output of the model.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，你将使你之前创建的模型对用户交互式，并允许他们为模型内的变量提供自己的值。你将允许用户指定他们想要使用的缓冲距离以及模型的最终输出。
- en: Step 1 – Marking variables as parameters
  id: totrans-214
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第1步 – 标记变量为参数
- en: 'In this step, you will learn how to designate variables as parameters within
    a model. You will make the buffer distance and the output of the **Union** tool
    parameters within your model:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步中，你将学习如何在模型内指定变量为参数。你将使缓冲距离和**联合**工具的输出在你的模型中成为参数：
- en: Open ArcGIS Pro and the `Ex12.aprx` project.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开ArcGIS Pro和`Ex12.aprx`项目。
- en: Expand the Toolboxes folder in the Catalog pane.
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录窗格中展开工具箱文件夹。
- en: Expand the Ex12 toolbox and right-click on the Parcels stream. Right-click on
    the Protection Buffer Analysis model you created in the previous exercise. Select
    Edit to open it in ModelBuilder.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录窗格中展开Ex12工具箱，然后右键单击Parcels流。右键单击在上一练习中创建的保护缓冲分析模型。选择编辑以在模型构建器中打开它。
- en: 'Right-click on the Output Variable for the Union tool and select Parameter.
    A small P should appear beside the variable, as shown in the following screenshot:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击联合工具的输出变量并选择参数。变量旁边应出现一个小P，如图所示：
- en: '![](img/0489c8d2-b0f9-4957-904a-ddc9a6b56b10.png)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/0489c8d2-b0f9-4957-904a-ddc9a6b56b10.png)'
- en: Then, save your model.
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，保存你的模型。
- en: By making the output of the **Union** tool a model parameter, users will now
    be able to choose where they will save the final output of the model and what
    it will be named. This is one of the two requirements that the director asked
    for. Now you need to allow users to specify a buffer distance.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将**联合**工具的输出作为模型参数，用户现在将能够选择他们将在哪里保存模型的最终输出以及它将被命名为什么。这是导演要求的两个要求之一。现在你需要允许用户指定一个缓冲距离。
- en: The buffer distance is currently hardcoded into the model. You need to make
    it a parameter as you did the output of the **Union** tool. However, the buffer
    variable is hidden. So, first, you will need to make it visible within the model
    and then designate it as a parameter.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 缓冲距离目前是硬编码在模型中的。你需要像对**联合**工具的输出那样将其作为参数。然而，缓冲变量是隐藏的。因此，首先，你需要使它在模型中可见，然后将其指定为参数。
- en: Step 2 – Exposing hidden variables
  id: totrans-224
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 – 暴露隐藏变量
- en: 'In this step, you will expose the distance variable for the **Buffer** tool
    so that you can make it a parameter:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步中，你将暴露**缓冲**工具的距离变量，以便你可以将其作为参数：
- en: Right-click on the Buffer tool in ModelBuilder.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型构建器中右键单击缓冲工具。
- en: Select the Create Variable | From Parameter option. This will display a list
    of all the hidden variables associated with the **Buffer** tool.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择创建变量 | 从参数选项。这将显示与**缓冲**工具相关联的所有隐藏变量的列表。
- en: 'Select Distance [value or field], as shown in the next screenshot:'
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择距离[值或字段]，如图所示的下个屏幕截图：
- en: '![](img/4925b4a4-012d-4e3b-b9df-1fa9ae3f46ae.png)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/4925b4a4-012d-4e3b-b9df-1fa9ae3f46ae.png)'
- en: The **Distance** variable should now be visible in your model. Now that it is
    visible you will be able to designate it as a parameter.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '**距离**变量现在应该在你的模型中可见。现在它可见后，你将能够将其指定为一个参数。'
- en: 'Move your mouse pointer so that it is over the Distance variable that you just
    added to our model. When your pointer changes to two crossed arrows, indicating
    that it is now in move mode, drag the Distance variable so it is above the Buffer
    tool, as shown in the following screenshot:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将鼠标指针移动到刚刚添加到我们模型中的距离变量上。当指针变为两个交叉箭头时，表示现在处于移动模式，拖动距离变量使其位于缓冲工具上方，如图所示的下一个屏幕截图：
- en: '![](img/ca7a5a76-d90f-492c-94f8-9d59f305f7de.png)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/ca7a5a76-d90f-492c-94f8-9d59f305f7de.png)'
- en: Right-click on the Distance variable and select Parameter. The small capital
    P should now appear next to the Distance variable, indicating it is now a model
    parameter.
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击距离变量并选择参数。现在应该在小写字母P旁边出现，表示它现在是一个模型参数。
- en: Save your model.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存你的模型。
- en: 'Your model should now look very similar to this:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 你的模型现在应该看起来非常类似于这个：
- en: '![](img/3d6bece0-9a84-4e53-a962-6135d86cc6eb.png)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/3d6bece0-9a84-4e53-a962-6135d86cc6eb.png)'
- en: The model shown in the preceding screenshot should now meet the requirements
    that the director asked for. They will now be able to use different distances
    from the streams and see the impact that it will have on the parcels. The director
    can save the result to a different name and location each time they run the model.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 前一个屏幕截图所示的模型现在应该满足导演提出的要求。他们现在可以使用不同的距离从溪流中看到它对地块的影响。导演可以在每次运行模型时将结果保存到不同的名称和位置。
- en: The last step is to verify your work. You need to test run the model to see
    whether it allows users to specify a distance and the output values.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步是验证你的工作。你需要测试运行模型以查看它是否允许用户指定距离和输出值。
- en: Step 3 – Running the model
  id: totrans-239
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第3步 – 运行模型
- en: 'In this step, you will run the model from the toolbox to make sure it will
    allow the director to input a distance and specify where the output will be saved.
    Since you have not changed the overall logic or functionality of the model, there
    is no need to test the processes inside the model again:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步，你将从工具箱中运行模型以确保它允许导演输入距离并指定输出保存的位置。由于你没有更改模型的总体逻辑或功能，因此不需要再次测试模型内部的过程：
- en: Close the ModelBuilder view.
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭模型构建器视图。
- en: If needed, expand the Toolboxes folder and the Ex12 toolbox in the Catalog pane.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，在目录窗格中展开工具箱文件夹和Ex12工具箱。
- en: Double-click on the model that you created to open it in the Geoprocessing pane.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击你创建的模型以在地理处理窗格中打开它。
- en: Notice that this time when you open the model in the Geoprocessing pane, it
    looks different. Instead of saying no parameters, it is asking for user input.
    The user can provide values for the two variables that you designated as parameters.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 注意这次当你打开模型在地理处理窗格中时，它看起来不同。不再是说没有参数，而是要求用户提供你指定的两个变量的值。
- en: Change the value for the Parcels_Stream_Union variable to `C:\Student\IntroArcPro\Chapter12\Ex12.gdb\***%Your
    Name%_Results***` (that is, `Tripp_Results`).
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Parcels_Stream_Union变量的值更改为`C:\Student\IntroArcPro\Chapter12\Ex12.gdb\***%Your
    Name%_Results***`（即`Tripp_Results`）。
- en: Change the Distance value to any value that you wish that is not 150 feet. You
    can even change the units if you desire.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将距离值更改为任何你想要的不是150英尺的值。如果你愿意，甚至可以更改单位。
- en: After you are done changing the values of the variables, click the Run button
    at the bottom of the Geoprocessing pane.
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你更改变量的值完成后，点击地理处理窗格底部的运行按钮。
- en: Once the model has finished running, close the Geoprocessing pane.
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦模型运行完成，关闭地理处理窗格。
- en: In the Catalog pane, verify that the resulting output feature class is in `Ex12.gdb`.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录窗格中，验证生成的输出要素类位于`Ex12.gdb`。
- en: Save your project and close ArcGIS Pro.
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存你的项目并关闭ArcGIS Pro。
- en: You have now created your first interactive model. This model provides more
    flexibility for the user, allowing them to investigate different scenarios. Next,
    you will be introduced to Python, which is the primary scripting language for
    the ArcGIS platform. You can use Python scripts to automate processes and then
    schedule them to run at specific times. Python scripts can also be used to help
    integrate ArcGIS with other applications. This makes the Python scripting language
    a powerful tool for increasing the effectiveness of your GIS.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已经创建了您的第一个交互式模型。此模型为用户提供更多灵活性，使他们能够调查不同的场景。接下来，您将了解 Python，它是 ArcGIS 平台的主要脚本语言。您可以使用
    Python 脚本来自动化流程，然后安排它们在特定时间运行。Python 脚本还可以用于帮助将 ArcGIS 与其他应用程序集成。这使得 Python 脚本语言成为提高您
    GIS 效率的有力工具。
- en: Learning about Python
  id: totrans-252
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 学习 Python
- en: Python is the primary scripting language for the ArcGIS platform. It has replaced
    others, such as **Visual Basic** (**VB**). **ArcGIS Pro 2.5** is currently compatible
    with **Python 3.6.9**, which is automatically installed when you install ArcGIS
    Pro.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: Python 是 ArcGIS 平台的主要脚本语言。它已取代了其他语言，如 **Visual Basic** (**VB**)。**ArcGIS Pro
    2.5** 目前与 **Python 3.6.9** 兼容，当您安装 ArcGIS Pro 时，它会自动安装。
- en: Python has been fully integrated with the ArcGIS Geoprocessing **Application
    Programming Interface** (**API**) via the `ArcPy` module. This means you can use
    the geoprocessing tools from within ArcGIS Pro within your scripts, allowing you
    to automate and schedule tasks.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: Python 已通过 `ArcPy` 模块完全集成到 ArcGIS 地理处理 **应用程序编程接口** (**API**) 中。这意味着您可以在 ArcGIS
    Pro 中使用地理处理工具，并在您的脚本中自动化和安排任务。
- en: Unlike ModelBuilder, Python is not limited to just the ArcGIS platform. It is
    used to create scripts that access functions in other applications, the operating
    system, and the computer. This gives you the ability to create scripts that extend
    and integrate ArcGIS Pro's functionality across platforms and applications. As
    a result, Python is a very versatile tool in the GIS developer's arsenal.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 与 ModelBuilder 不同，Python 不限于仅限于 ArcGIS 平台。它用于创建访问其他应用程序、操作系统和计算机中函数的脚本。这使得您能够创建扩展和集成
    ArcGIS Pro 功能的脚本，跨越平台和应用程序。因此，Python 是 GIS 开发者工具箱中一个非常灵活的工具。
- en: Python scripts can be stored within ArcGIS Toolboxes or in standalone folders
    as `.py` files. Unlike other programming languages such as **C++** or VB, creating
    Python scripts doesn't require special application development software. You can
    use simple text editors such as **Notepad** or **WordPad**. There are several
    free **Integrated Development Environment** (**IDE**) applications for Python,
    such as **PythonWin** or **IDLE**. IDE applications provide a better development
    environment over text editors because they include automatic coding hints and
    debugging tools. When you install ArcGIS, it automatically installs Python and
    IDLE.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: Python 脚本可以存储在 ArcGIS 工具箱或独立的文件夹中，以 `.py` 文件的形式。与 **C++** 或 VB 等其他编程语言不同，创建
    Python 脚本不需要特殊的应用程序开发软件。您可以使用简单的文本编辑器，如 **记事本** 或 **写字板**。Python 有几个免费的 **集成开发环境**
    (**IDE**) 应用程序，例如 **PythonWin** 或 **IDLE**。IDE 应用程序比文本编辑器提供了更好的开发环境，因为它们包括自动编码提示和调试工具。当您安装
    ArcGIS 时，它将自动安装 Python 和 IDLE。
- en: ArcGIS Pro also includes a Python window that can be used to write Python scripts,
    run tools using Python, and load Python scripts to view code. New Python developers
    often find the Python window helpful because of its integrated interface and its
    autosuggest function, which helps guide proper syntax.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: ArcGIS Pro 还包括一个 Python 窗口，可以用来编写 Python 脚本、使用 Python 运行工具以及将 Python 脚本加载到视图中查看代码。新
    Python 开发者通常会发现 Python 窗口很有帮助，因为它具有集成界面和自动建议功能，这有助于指导正确的语法。
- en: Let's look at some Python basics first.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先看看一些 Python 基础知识。
- en: Understanding Python basics
  id: totrans-259
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解 Python 基础
- en: Since this is your first introduction to Python, it is a good time to introduce
    some fundamentals and best practices. These will serve you well as you begin to
    write your own scripts.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这是您对 Python 的第一次介绍，现在是介绍一些基础知识和最佳实践的好时机。这些知识将帮助您开始编写自己的脚本。
- en: Commenting and documenting your scripts
  id: totrans-261
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注释和记录您的脚本
- en: When you begin creating a Python script, it is considered a best practice to
    include documentation within the code that will help other developers understand
    what is happening within the code and the purpose-specific parts of the script.
    This can also prove helpful for yourself if you have to come back to a script
    that you wrote some time ago and need to make changes.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 当您开始创建 Python 脚本时，包含代码中的文档被认为是一种最佳实践，这有助于其他开发者理解代码中的内容以及脚本特定部分的目的。这也有助于您在将来需要回到您很久以前编写的脚本并需要做出更改时。
- en: 'This in-code documentation is traditionally accomplished using commenting.
    Think of commenting code as a form of metadata stored within the code itself.
    It provides users and other programmers with the *who*, *what*, *where*, *when*,
    and *why* data. They may need this data to successfully use, integrate, or edit
    a script that you create. Different programming languages use different methods
    to comment code. Python uses the **pound sign** (#) to identify comment lines
    within its code, as illustrated in the following screenshot:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 这种代码内文档通常使用注释来完成。将注释代码视为存储在代码本身中的元数据形式。它为用户和其他程序员提供了 *who*、*what*、*where*、*when*
    和 *why* 数据。他们可能需要这些数据来成功使用、集成或编辑您创建的脚本。不同的编程语言使用不同的方法来注释代码。Python 使用 **井号** (#)
    来标识其代码中的注释行，如下面的截图所示：
- en: '![](img/8050c8a6-a570-4579-a5b5-e9caac60ad86.png)'
  id: totrans-264
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/8050c8a6-a570-4579-a5b5-e9caac60ad86.png)'
- en: 'As you can see in the preceding screenshot, anytime Python encounters a line
    that starts with a #, it ignores that line and moves to the next. It will keep
    ignoring lines until it encounters one that does not have a # at the beginning.'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: '如您在前面的截图中所见，每当 Python 遇到以 # 开头的行时，它会忽略该行并移动到下一行。它将继续忽略带有 # 的行，直到遇到一个开头不是 #
    的行。'
- en: Traditionally, the first group of lines in a Python script is used to provide
    basic information about the script, such as its purpose, who created it, when
    was it created, what ArcGIS version it was created for, and so on. Providing this
    basic information is considered an industry best practice.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，Python 脚本中的前几行用于提供有关脚本的基本信息，例如其目的、谁创建了它、何时创建的、为哪个 ArcGIS 版本创建的，等等。提供这些基本信息被认为是行业最佳实践。
- en: Now let's learn about the variables that we use in Python.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们了解我们在 Python 中使用的变量。
- en: Learning about variables
  id: totrans-268
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Learning about variables
- en: Like a model, a Python script can contain variables. When you define a variable
    in Python, you give it a name and a value. Also similar to a model, the value
    assigned to a variable can be hardcoded, can reference the result of another process,
    or can be a function of `ArcPy` or another module.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 就像模型一样，Python 脚本可以包含变量。在 Python 中定义变量时，您给它一个名称和一个值。同样，与模型类似，分配给变量的值可以是硬编码的，可以引用另一个过程的结果，或者可以是
    `ArcPy` 或另一个模块的函数。
- en: 'For example, you could define a variable that would be used as an input for
    the **Buffer** tool as follows:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，您可以定义一个变量，该变量将被用作 **Buffer** 工具的输入如下：
- en: '[PRE1]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'This variable would then be used by the **Buffer** tool in a Python script
    as follows:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 这个变量随后将在 Python 脚本中使用 **Buffer** 工具如下：
- en: '[PRE2]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: You can see from the preceding sample code, the use of the defined variable
    has been highlighted. In an actual script, you would not *embolden* the variable.
    That was just done in this example to help you see the use of the variable more
    easily.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从前面的示例代码中看到，已定义变量的使用已被突出显示。在实际脚本中，您不会将变量**加粗**。这只是在这个例子中为了帮助您更容易地看到变量的使用。
- en: Another particularly important thing to keep in mind when writing scripts is
    that Python is case sensitive. This means a variable named `Mapsize` is not the
    same as one named `mapsize`. To Python, those are two different and distinct objects.
    This is one of the most common causes of problems when writing and running Python
    scripts.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 在编写脚本时，需要特别注意的另一件特别重要的事情是 Python 是区分大小写的。这意味着名为 `Mapsize` 的变量与名为 `mapsize` 的变量不同。对
    Python 来说，这些都是两个不同且独立的对象。这是编写和运行 Python 脚本时最常见的问题之一。
- en: 'Python also has other restrictions when defining a variable within a script:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: Python 在脚本中定义变量时还有其他限制：
- en: Variable names must start with a letter. They cannot start with a number.
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 变量名必须以字母开头。它们不能以数字开头。
- en: Variable names cannot include spaces or other special characters. The one exception
    is an underscore ( *_* ).
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 变量名不能包含空格或其他特殊字符。一个例外是下划线（_*_*）。
- en: 'Variable names cannot include reserved keywords such as the following:'
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 变量名不能包含以下保留关键字：
- en: Class
  id: totrans-280
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Class
- en: If
  id: totrans-281
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: If
- en: For
  id: totrans-282
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: For
- en: While
  id: totrans-283
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: While
- en: Return
  id: totrans-284
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Return
- en: Now let's move on to learning about data paths used in Python.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们继续学习 Python 中使用的数据路径。
- en: Understanding data paths
  id: totrans-286
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 理解数据路径
- en: Often when you define a variable, access data, or save the results of a tool,
    you need to reference a specific file or data path. In a traditional **Windows**
    environment, this typically requires you to define the path using backslashes.
    For example, you have been accessing the data and exercises for this book by going
    to `C:\Student\IntroArcPro`. This is an example of a path.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，当你定义变量、访问数据或保存工具的结果时，你需要引用特定的文件或数据路径。在传统的 **Windows** 环境中，这通常需要你使用反斜杠定义路径。例如，你通过访问
    `C:\Student\IntroArcPro` 来获取这本书的数据和练习。这是一个路径的例子。
- en: 'Unfortunately, you cannot use this common method of defining a path within
    a Python script. Backslashes are reserved characters within Python that are used
    to indicate an escape or line continuation. So, when specifying a data path, you
    must use a different method. Python supports three methods for defining a path:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，你无法在 Python 脚本中使用这种常见的定义路径的方法。反斜杠在 Python 中是保留字符，用于表示转义或行续行。因此，在指定数据路径时，你必须使用不同的方法。Python
    支持三种定义路径的方法：
- en: 'Double backslashes: `C:**\\**Student**\\**IntroArcPro`'
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 双反斜杠：`C:**\\**Student**\\**IntroArcPro`
- en: 'Single forward slash: `C:**/**Student**/**IntroArcPro`'
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单个正斜杠：`C:**/**Student**/**IntroArcPro`
- en: 'Single backslash with an `r` in front of it: `r"C:\Student\IntroArcPro"`'
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带有前缀 `r` 的单个反斜杠：`r"C:\Student\IntroArcPro"`
- en: You can use either of the preceding methods when creating your own scripts.
    While it is acceptable to use any of these within a single script, it is recommended
    that you try to use the same method throughout the entire script. This will help
    you locate possible errors and fix them more quickly.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建自己的脚本时，你可以使用上述任何一种方法。虽然在一个脚本中使用这些方法是可接受的，但建议你尝试在整个脚本中始终使用相同的方法。这将帮助你更快地定位可能的错误并修复它们。
- en: Let's learn about the `ArcPy` module in the next section.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将学习 `ArcPy` 模块。
- en: Learning about the ArcPy module
  id: totrans-294
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 学习 ArcPy 模块
- en: The `ArcPy` module is a Python site package that allows Python access to ArcGIS
    functionality. The level of functionality is limited to the ArcGIS Pro license
    level and extensions available to the user running the script.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: '`ArcPy` 模块是一个 Python 站点包，它允许 Python 访问 ArcGIS 功能。功能级别受限于运行脚本的 ArcGIS Pro 许可证级别和用户可用的扩展。'
- en: Through the `ArcPy` module, Python can not only be used to perform geoprocessing
    tasks using tools in ArcGIS Pro system toolboxes or other custom tools, but it
    can also execute other functions, such as listing available datasets within a
    given location or describing an existing dataset. It can also create objects,
    such as points, lines, polygons, extents, and more.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 通过 `ArcPy` 模块，Python 不仅可以使用 ArcGIS Pro 系统工具箱中的工具或其他自定义工具执行地理处理任务，还可以执行其他功能，例如列出给定位置内的可用数据集或描述现有数据集。它还可以创建对象，如点、线、多边形、范围等。
- en: 'The `ArcPy` module contains several sub-modules. These sub-modules are specific
    purpose libraries containing functions and classes. These sub-modules include
    the following:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: '`ArcPy` 模块包含几个子模块。这些子模块是特定目的的库，包含函数和类。这些子模块包括以下内容：'
- en: Data access module (`arcpy.da`)
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据访问模块 (`arcpy.da`)
- en: Mapping module (`arcpy.mp`)
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 映射模块 (`arcpy.mp`)
- en: Spatial Analyst module (`arcpy.sa`)
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 空间分析师模块 (`arcpy.sa`)
- en: Network Analyst module (`arcpy.na`)
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络分析师模块 (`arcpy.na`)
- en: The Spatial Analyst and Network Analyst modules require access to ArcGIS extensions
    of the same name.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 空间分析师和网络分析师模块需要访问同名的 ArcGIS 扩展。
- en: 'The `ArcPy` module must be loaded into a script in order for Python to access
    ArcGIS Pro functionality. This is typically done at the very beginning of a new
    script using the following syntax:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: '`ArcPy` 模块必须被加载到脚本中，以便 Python 可以访问 ArcGIS Pro 的功能。这通常是在新脚本的开头使用以下语法完成的：'
- en: '[PRE3]'
  id: totrans-304
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: This one line allows Python to access ArcGIS Pro tools and functions. Additional
    modules can also be loaded using that same line, such as the operating system
    (`os`) or system (`sys`) modules.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 这一行允许 Python 访问 ArcGIS Pro 工具和函数。也可以使用相同的行加载其他模块，例如操作系统 (`os`) 或系统 (`sys`) 模块。
- en: Now that you have a very basic understanding of the `ArcPy` module, *how do
    you know the proper syntax for using geoprocessing tools in a Python script?*
    In the next section, you will find out how to locate the proper syntax for the
    various geoprocessing tools included in ArcGIS Pro.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经对 `ArcPy` 模块有了非常基本的了解，*你如何知道在 Python 脚本中使用地理处理工具的正确语法呢？* 在下一节中，你将了解到如何找到
    ArcGIS Pro 中包含的各种地理处理工具的正确语法。
- en: Locating Python syntax for a geoprocessing tool
  id: totrans-307
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 查找地理处理工具的 Python 语法
- en: Finding the Python code needed to execute a specific geoprocessing tool is as
    easy as opening the help information for the tool. Esri has included sample Python
    code for all the geoprocessing tools in ArcGIS Pro and its extensions.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 找到执行特定地理处理工具所需的 Python 代码就像打开该工具的帮助信息一样简单。Esri 在 ArcGIS Pro 及其扩展中为所有地理处理工具提供了示例
    Python 代码。
- en: 'This includes the proper syntax to use within a script along with a description
    of the variables that can be used with the tool. Help for a specific tool can
    be accessed in the Geoprocessing pane when the tool is opened by clicking on the
    small blue question mark located on the upper right side of the pane, as shown
    in the following screenshot:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 这包括在脚本中使用的正确语法以及可以与工具一起使用的变量描述。当通过单击面板右上角的小蓝色问号打开工具时，可以在地理处理面板中访问特定工具的帮助。如下面的截图所示：
- en: '![](img/05b9e33b-6182-40b9-984e-cbd8cd46ad2a.png)'
  id: totrans-310
  prefs: []
  type: TYPE_IMG
  zh: '![](img/05b9e33b-6182-40b9-984e-cbd8cd46ad2a.png)'
- en: 'The Syntax page in the help information will show you the proper format for
    the code along with a description of the possible variables that may be included.
    The following screenshot shows an example of the syntax for the **Union** tool
    from the Esri help:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 帮助信息中的语法页面将显示代码的正确格式，以及可能包含的可能变量的描述。以下截图显示了来自 Esri 帮助的 **Union** 工具语法的示例：
- en: '![](img/068ffa7e-fca3-4787-bd07-4580319d8033.png)'
  id: totrans-312
  prefs: []
  type: TYPE_IMG
  zh: '![](img/068ffa7e-fca3-4787-bd07-4580319d8033.png)'
- en: Help for all tools in ArcGIS Pro can be accessed from the ArcGIS Pro help online
    via the Tool Reference. The address to access it is [http://pro.arcgis.com/en/pro-app/tool-reference/main/arcgis-pro-tool-reference.htm](http://pro.arcgis.com/en/pro-app/tool-reference/main/arcgis-pro-tool-reference.htm).
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过 ArcGIS Pro 在线帮助中的工具参考访问 ArcGIS Pro 中所有工具的帮助。访问地址为 [http://pro.arcgis.com/en/pro-app/tool-reference/main/arcgis-pro-tool-reference.htm](http://pro.arcgis.com/en/pro-app/tool-reference/main/arcgis-pro-tool-reference.htm)。
- en: 'The help will also include code sample snippets that help put the syntax into
    context with a larger process. It is often possible to copy the sample code from
    the help and then paste it into your script; then, you can easily adjust the copied
    code to meet your needs, as shown in the following screenshot:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 帮助信息还将包括代码示例片段，帮助将语法与更大的过程联系起来。通常可以将帮助中的示例代码复制并粘贴到你的脚本中；然后，你可以轻松调整复制的代码以满足你的需求，如下面的截图所示：
- en: '![](img/0e134394-ee9a-4cab-a917-66ac3fd77d0b.png)'
  id: totrans-315
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0e134394-ee9a-4cab-a917-66ac3fd77d0b.png)'
- en: The preceding screenshot is an example of a sample code snippet for the Union
    tool that is found in the help. As you can see, it provides an understandable
    example of the code in a real-world context. This provides a much better understanding
    of how the tool can be used within a custom script you might create. Notice the
    comments included within the code sample and how they help to provide a better
    understanding of the purpose of the various parts of the code.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 上述截图是来自帮助的 Union 工具示例代码片段。正如你所见，它提供了一个在现实世界环境中代码的可理解示例。这为你提供了一个更好的理解，了解该工具如何在自定义脚本中使用。注意代码示例中的注释以及它们如何帮助更好地理解代码各部分的目的。
- en: 'If you would like to explore the relationship between ArcGIS and Python in
    more detail, you might find this link helpful and informative: [https://pro.arcgis.com/en/pro-app/arcpy/get-started/installing-python-for-arcgis-pro.htm](https://pro.arcgis.com/en/pro-app/arcpy/get-started/installing-python-for-arcgis-pro.htm)'
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想要更详细地探索 ArcGIS 和 Python 之间的关系，你可能发现这个链接有帮助和参考价值：[https://pro.arcgis.com/en/pro-app/arcpy/get-started/installing-python-for-arcgis-pro.htm](https://pro.arcgis.com/en/pro-app/arcpy/get-started/installing-python-for-arcgis-pro.htm)
- en: Now it is time for you to try your hand at writing a simple Python script.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是你尝试编写一个简单的 Python 脚本的时候了。
- en: Exercise 12D – Creating a Python script
  id: totrans-319
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习 12D – 创建 Python 脚本
- en: The city of Trippville operates a GIS web application that allows citizens and
    elected officials to access parcel data. This GIS web application combines data
    from the city with other data layers from ArcGIS Online and **Google Maps**. As
    a result, the parcels must be projected from the local state plane coordinate
    system to the **WGS 84 Web Mercator** (**Auxiliary Sphere**) **system**. This
    is the common coordinate system used by **Esri**, **Google**, and **Bing** for
    GIS web applications and data.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: Trippville 市运营一个 GIS 网络应用，允许市民和选举官员访问地块数据。这个 GIS 网络应用结合了来自城市的其他数据层和 ArcGIS Online
    以及 **Google Maps** 的数据。因此，地块必须从本地州平面坐标系投影到 **WGS 84 Web Mercator** （**辅助球面**）
    **系统**。这是 Esri、**Google** 和 **Bing** 用于 GIS 网络应用和数据的常用坐标系。
- en: You can also update the **Acres** field as new parcels that are added or combined
    before the new data is added to the web application. You can use the **Calculate
    Field** tool to accomplish this with an expression that converts the Shape_Length
    field, which is in feet, to acres.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以在将新数据添加到网络应用之前更新 **Acres** 字段，以添加或合并的新地块。你可以使用 **Calculate Field** 工具通过将
    Shape_Length 字段（以英尺为单位）转换为英亩来完成此操作。
- en: In the past, you have manually performed these operations. However, you will
    be going on vacation and the director wants the parcel data to still be updated
    regularly while you are gone. They can copy the data to the web application but
    do not know how to perform the other operations. So, they want you to create an
    automated routine that can perform these operations automatically on a regular
    schedule.
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去，你手动执行了这些操作。然而，你将要去度假，导演希望在你离开期间地块数据仍然定期更新。他们可以将数据复制到网络应用中，但不知道如何执行其他操作。因此，他们希望你创建一个可以定期自动执行这些操作的自动化程序。
- en: Since the director wants this routine to run on an automated schedule, you will
    need to write a Python script. A model will not work in this case. In this exercise,
    you will write a basic Python script that will calculate the acreage of each parcel,
    update the **Acres** field, and then project the data from the state plane coordinate
    system that is currently in the WGS 84 Web Mercator (Auxiliary Sphere).
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 由于导演希望这个程序按自动化日程运行，你需要编写一个 Python 脚本。在这种情况下，模型不起作用。在这个练习中，你将编写一个基本的 Python 脚本，该脚本将计算每个地块的面积，更新
    **Acres** 字段，然后将数据从当前在 WGS 84 Web Mercator （辅助球面）坐标系中的州平面坐标系投影过来。
- en: Step 1 – Opening IDLE
  id: totrans-324
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第 1 步 – 打开 IDLE
- en: 'In this step, you will open the IDLE application so that you can begin creating
    your script:'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一步，你将打开 IDLE 应用程序，以便你可以开始创建你的脚本：
- en: Click on your Start button. This is normally located in the lower-left corner
    of your screen in your taskbar. In **Windows 8.1** or **Windows 10,** it appears
    as just four white squares.
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击你的开始按钮。这通常位于屏幕左下角的任务栏中。在 **Windows 8.1** 或 **Windows 10** 中，它显示为四个白色方块。
- en: In Windows 8.1 or 10, click the small downward-pointing arrow to access all
    installed programs or apps.
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Windows 8.1 或 10 中，点击小向下的箭头以访问所有已安装的程序或应用。
- en: Navigate to the ArcGIS program group in the list of all programs. In **Windows
    XP** or **Windows 7**, you may need to expand the group to see the programs inside.
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在所有程序列表中导航到 ArcGIS 程序组。在 **Windows XP** 或 **Windows 7** 中，你可能需要展开组以查看其中的程序。
- en: Locate the IDLE (Python GUI) application and click on it to launch the program.
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位 IDLE （Python GUI）应用程序，并点击它以启动程序。
- en: You have now opened the Python IDLE application. You will write your script
    within this application. It will open with the shell window.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在已经打开了 Python IDLE 应用程序。你将在该应用程序中编写你的脚本。它将以壳窗口打开。
- en: The shell window displays messages and errors generated by a script when it
    is run from IDLE. You do not actually write scripts within this window. You will
    need to open a new code window to begin writing the script.
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 壳窗口显示从 IDLE 运行脚本时生成的消息和错误。你实际上不会在这个窗口中编写脚本。你需要打开一个新的代码窗口来开始编写脚本。
- en: 'Click the File | New File option. This will open the code window that you will
    use to write your script. You should now be able to see something like this:'
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击文件 | 新文件选项。这将打开你将用于编写脚本的代码窗口。你现在应该能看到类似以下内容：
- en: '![](img/29da58a3-f7c7-4f74-94f7-c8c47c81ffa2.png)'
  id: totrans-333
  prefs: []
  type: TYPE_IMG
  zh: '![](img/29da58a3-f7c7-4f74-94f7-c8c47c81ffa2.png)'
- en: Click Options in the top menu and select Configure IDLE. You can do this in
    either of the IDLE windows.
  id: totrans-334
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在顶部菜单中点击选项并选择配置 IDLE。你可以在 IDLE 的任意窗口中这样做。
- en: 'Click on the General tab and set Default Source Encoding to UTF-8 as shown
    in the following screenshot:'
  id: totrans-335
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击常规选项卡，并将默认源编码设置为UTF-8，如以下截图所示：
- en: '![](img/d6b06a04-cfc5-4606-8fd9-123a9855f612.png)'
  id: totrans-336
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/d6b06a04-cfc5-4606-8fd9-123a9855f612.png)'
- en: Click Apply and Ok.
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击应用和确定。
- en: Now that you have configured your IDLE options, it is time to start writing
    a script.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经配置了IDLE选项，是时候开始编写脚本了。
- en: Step 2 – Writing the script
  id: totrans-339
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第2步 - 编写脚本
- en: 'Now you will begin writing the script that you need to accomplish the tasks
    you performed manually before. To start, you will insert some basic information
    concerning your script in accordance with best practices. Then, you will import
    the `ArcPy` module, and lastly, you will write the code for the script:'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你将开始编写脚本，以完成之前手动执行的各项任务。首先，你将根据最佳实践在脚本中插入一些基本信息。然后，你将导入`ArcPy`模块，最后，你将编写脚本的代码：
- en: First, you will save your empty script, so that it has a name. In the Untitled
    window, click on the File | Save option.
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，你将保存你的空脚本，以便给它一个名字。在未命名的窗口中，点击文件 | 保存选项。
- en: In the Save As window, navigate to `C:\Student\IntroArcPro\Chapter12`, name
    your file `AcresWebProject.py`, and click Save.
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在另存为窗口中，导航到`C:\Student\IntroArcPro\Chapter12`，将你的文件命名为`AcresWebProject.py`，然后点击保存。
- en: You have just saved your empty script. You should see the new name and path
    shown at the top of the code window.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 你刚刚保存了你的空脚本。你应该在代码窗口的顶部看到新的名称和路径。
- en: 'Now you will add the general information at the beginning of the script as
    comments. Remember that `#` identifies a comment within Python code. Type the
    following example code into the IDLE code window (the `Purpose` part should all
    be typed on a single line; if you split it on to multiple lines, you will need
    to place `#` at the start of each line):'
  id: totrans-344
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你将在脚本的开头添加一些通用信息作为注释。记住，`#`在Python代码中标识注释。将以下示例代码输入到IDLE代码窗口中（`目的`部分应全部在一行中输入；如果你将其拆分成多行，你需要在每行的开头放置`#`）：
- en: '[PRE4]'
  id: totrans-345
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Now you need to add the code line that imports the `ArcPy` module so that the
    script can access the ArcGIS Pro tools. Add the following code to your script
    in the code window:'
  id: totrans-346
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你需要添加导入`ArcPy`模块的代码行，以便脚本可以访问ArcGIS Pro工具。在代码窗口中添加以下代码到你的脚本中：
- en: '[PRE5]'
  id: totrans-347
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Save your script by clicking File and then Save. If you get a warning, just
    click OK.
  id: totrans-348
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击文件并保存来保存你的脚本。如果你收到警告，只需点击确定。
- en: Now you will define some variables within your script that specify the location
    of the parcels data and where to save the results of the **Project** tool.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你将在脚本中定义一些变量，指定地块数据的存储位置以及`投影`工具结果保存的位置。
- en: 'Type the following code after the `import` statement in the code window:'
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在代码窗口中`import`语句之后，输入以下代码：
- en: '[PRE6]'
  id: totrans-351
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-352
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The preceding code you have just added to your Python script starts with two
    lines of comments which explain what the next lines do. As you have learned, comment
    lines are indicated with the `#` symbol. The next two lines define two variables.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 你刚刚添加到Python脚本中的前几行代码以两条注释开始，解释了下一行做什么。正如你所学的，注释行由`#`符号标识。接下来的两行定义了两个变量。
- en: The first is `Parcels`. This variable points to the location of the `Parcels`
    feature class, that is stored in the **Base** feature dataset within the Trippville_GIS
    geodatabase. The second variable you have defined in this code is `Parcels_Web`.
    It references the `Parcels_Web` feature class in the Ex12 geodatabase.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个是`Parcels`。这个变量指向存储在Trippville_GIS地理数据库中的**基础**要素数据集中的`Parcels`要素类。在这段代码中定义的第二个变量是`Parcels_Web`。它引用Ex12地理数据库中的`Parcels_Web`要素类。
- en: Save your script.
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存你的脚本。
- en: Now you need to begin adding the code for the tools that you will need to run
    in the script. You will use the ArcGIS Pro help to get the proper syntax for the
    **Calculate Field** and **Project** tools. Then, modify it so that it works properly
    in your script.
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你需要开始添加脚本中需要运行的工具的代码。你将使用ArcGIS Pro帮助获取`计算字段`和`投影`工具的正确语法。然后，修改它以便在脚本中正确运行。
- en: Open ArcGIS Pro and `Ex12.aprx`.
  id: totrans-357
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开ArcGIS Pro和`Ex12.aprx`。
- en: Click on the Analysis tab and the Tools button to open the Geoprocessing pane.
  id: totrans-358
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击分析选项卡和工具按钮以打开地理处理面板。
- en: In the Geoprocessing pane, click on Toolboxes located near the top of the pane.
  id: totrans-359
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在地理处理面板中，点击面板顶部附近的工具箱。
- en: Expand the Data Management Tools toolbox and the Fields toolset.
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开数据管理工具箱和字段工具集。
- en: Select the Calculate Field tool.
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择计算字段工具。
- en: Click on the Help button. It is the blue question mark in the upper right corner.
  id: totrans-362
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击帮助按钮。它位于右上角的蓝色问号。
- en: You have opened the online tool reference for this tool; click on Syntax.
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你已经打开了此工具的在线工具参考；点击语法。
- en: 'Highlight and copy the syntax for the tool. It should read as follows:'
  id: totrans-364
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 高亮并复制工具的语法。它应该如下所示：
- en: '[PRE8]'
  id: totrans-365
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Active the IDLE code window and paste the copied syntax onto a line below the
    variables that you defined earlier.
  id: totrans-366
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 激活IDLE代码窗口，并将复制的语法粘贴到之前定义的变量下面的行。
- en: Add a comment above the code that you just pasted into the script that says
    `calculates the area in acres for each parcel and updates the acres field`.
  id: totrans-367
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你刚刚粘贴到脚本中的代码上方添加一条注释，说明`计算每个地块的英亩数并更新英亩字段`。
- en: 'Now edit the code sample syntax that you just pasted into the script as follows:'
  id: totrans-368
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在编辑你刚刚粘贴到脚本中的代码样本语法如下：
- en: '[PRE9]'
  id: totrans-369
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: You have now defined the `CalculateField` tool within a Python script, so it
    includes all the variables it needs to run; save your script.
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在已经在Python脚本中定义了`CalculateField`工具，因此它包含了运行所需的全部变量；保存你的脚本。
- en: Now you need to add the **Project** tool to the script and define its syntax
    properly. Using the same process that you used for the **Calculate Field** tool,
    open the help for the **Project** tool and copy the syntax into your script. The
    **Project** tool is located in the same toolbox but is in the Projections and
    Transformations toolset.
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你需要将**项目**工具添加到脚本中，并正确定义其语法。使用与**计算字段**工具相同的流程，打开**项目**工具的帮助，并将语法复制到你的脚本中。**项目**工具位于同一个工具箱中，但在投影和变换工具集中。
- en: Add an appropriate comment to the script that is above the code for the project
    tool, which will let others know its purpose similar to the comment that you added
    for the **Calculate Field** tool.
  id: totrans-372
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在项目工具的代码上方添加一个适当的注释，让其他人知道它的目的，类似于你为**计算字段**工具添加的注释。
- en: 'Modify the **Project** tool code as follows (to make things easier you can
    copy the syntax from the `Project Tool Sample.txt` file in the `Chapter12` folder):'
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 修改**项目**工具代码如下（为了方便，你可以从`Chapter12`文件夹中的`Project Tool Sample.txt`文件中复制语法）：
- en: '[PRE10]'
  id: totrans-374
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The preceding code seems extremely complicated, and to some extent it is. It
    contains all the parameters required to define two coordinate systems. The first
    is the coordinate system for the `Parcels` feature class. The second is the coordinate
    system used by the output feature class, `Parcels_Web`.
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码看起来非常复杂，在某种程度上确实如此。它包含了定义两个坐标系统所需的所有参数。第一个是`Parcels`要素类的坐标系统。第二个是输出要素类`Parcels_Web`使用的坐标系统。
- en: Save your script.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存你的脚本。
- en: 'Your script should look like this on your screen:'
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 你的脚本在你的屏幕上应该看起来像这样：
- en: '![](img/e29618ca-af92-4767-a2eb-88e8df31dab7.png)'
  id: totrans-378
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e29618ca-af92-4767-a2eb-88e8df31dab7.png)'
- en: Once you have verified your script and saved it, close IDLE.
  id: totrans-379
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你验证了你的脚本并保存了它，关闭IDLE。
- en: We'll now move on to the next step.
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将进入下一步。
- en: Step 3 – Adding the script to ArcGIS Pro and running it
  id: totrans-381
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 第3步 – 将脚本添加到ArcGIS Pro并运行
- en: 'Now that you have created a Python script, you need to add it to ArcGIS Pro
    and test it. In this step, you will add the script you just created to a toolbox
    in your project and then run it:'
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经创建了一个Python脚本，需要将其添加到ArcGIS Pro中并测试它。在这一步中，你将把你刚刚创建的脚本添加到项目中的工具箱中，然后运行它：
- en: If necessary, start ArcGIS Pro and open `Ex12.aprx`.
  id: totrans-383
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，启动ArcGIS Pro并打开`Ex12.aprx`。
- en: In the Catalog pane, expand the Toolboxes folder.
  id: totrans-384
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目录窗格中，展开工具箱文件夹。
- en: Right-click on the Ex12 toolbox and select New>Script from the menu.
  id: totrans-385
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击Ex12工具箱，从菜单中选择新建>脚本。
- en: 'Fill out the information for the new script as follows:'
  id: totrans-386
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照以下信息填写新脚本：
- en: Type `CalcAcresProject` in theNamefield.
  id: totrans-387
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在名称字段中输入`CalcAcresProject`。
- en: Type `Calculate Parcel Acres and Project to Web Mercator` in the Label field.
  id: totrans-388
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在标签字段中输入`计算地块英亩数并投影到Web Mercator`。
- en: 'Click on the Browse button located next to the Script File cell, then navigate
    to `C:\Student\IntroArcPro\Chapter12`, and select the `AcresWebProject.py` script
    that you just created. Your window should now look like this:'
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于脚本文件单元格旁边的浏览按钮，然后导航到`C:\Student\IntroArcPro\Chapter12`，并选择你刚刚创建的`AcresWebProject.py`脚本。你的窗口现在应该看起来像这样：
- en: '![](img/8688cb20-4644-4d75-879c-58a7fa27a2ff.png)'
  id: totrans-390
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8688cb20-4644-4d75-879c-58a7fa27a2ff.png)'
- en: Click OK once you have verified everything is set correctly.
  id: totrans-391
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认一切设置正确后，点击确定。
- en: The script will appear in the Ex12 toolbox. This means you can now run it in
    ArcGIS Pro. You must add all Python scripts that you create to a toolbox before
    they are able to be used in ArcGIS Pro. For those with experience with ArcGIS
    for Desktop, it should be noted that ArcGIS Pro does not support Python add-ins
    yet. That functionality should be added to a future version.
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 脚本将出现在Ex12工具箱中。这意味着你现在可以在ArcGIS Pro中运行它。你必须将你创建的所有Python脚本添加到工具箱中，然后它们才能在ArcGIS
    Pro中使用。对于那些有ArcGIS for Desktop经验的人，应该注意的是，ArcGIS Pro目前还不支持Python插件。该功能应该添加到未来的版本中。
- en: Now you will need to run the script to test and make sure it works as expected.
  id: totrans-393
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你需要运行脚本以测试并确保它按预期工作。
- en: Double-click on the Python script that you just added to the toolbox. This will
    open it in the Geoprocessing pane. Since you hardcoded all the variables into
    the script, it has no parameters that the user needs to define.
  id: totrans-394
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击你刚刚添加到工具箱中的Python脚本。这将它在地理处理窗格中打开。由于你将所有变量硬编码到脚本中，它没有用户需要定义的参数。
- en: Click the Run button at the bottom of the Geoprocessing pane.
  id: totrans-395
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击地理处理窗格底部的运行按钮。
- en: Once the script has completed running, return to the Catalog pane.
  id: totrans-396
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦脚本运行完成，返回到目录窗格。
- en: Expand the Databases folder and expand `Ex12.gdb`. If the script ran successfully,
    you should see a new feature class named `Parcels_Web`. You may need to right-click
    on the Ex12 geodatabase and refresh in order to see the new feature class that
    was created.
  id: totrans-397
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开数据库文件夹，并展开`Ex12.gdb`。如果脚本运行成功，你应该会看到一个名为`Parcels_Web`的新要素类。你可能需要右键单击Ex12地理数据库并刷新，以便看到创建的新要素类。
- en: If you do see the new feature class, congratulations! You have just created
    and run your first Python script. If your script did not run successfully, you
    may wish to compare it to the sample included in the `Python Sample` folder located
    in `C:\Student\IntroArcPro\Chapter12\`.
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你确实看到了新的要素类，恭喜！你刚刚创建并运行了你的第一个Python脚本。如果你的脚本没有成功运行，你可能希望将其与位于`C:\Student\IntroArcPro\Chapter12\`的`Python
    Sample`文件夹中的示例进行比较。
- en: Save your project and close ArcGIS Pro along with IDLE, if it is still open.
  id: totrans-399
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存你的项目并关闭ArcGIS Pro以及IDLE（如果它仍然打开）。
- en: You have just created your first Python script, which projects data from one
    coordinate system to another. Since this is a Python script, you could use the
    scheduling functionality found in your operating system to schedule this script
    to run at a specified frequency automatically so you do not have to worry about
    it. This can reduce your overall workload and ensure that required functions run
    on a regular schedule.
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 你刚刚创建了你第一个Python脚本，它将数据从一个坐标系统投影到另一个坐标系统。由于这是一个Python脚本，你可以使用操作系统中找到的调度功能来安排此脚本以指定频率自动运行，这样你就不必担心它。这可以减少你的整体工作量并确保所需功能定期运行。
- en: Summary
  id: totrans-401
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned that ArcGIS Pro contains two methods for automating
    and streamlining tasks; that is, you can create a model or a Python script. Which
    one will work best will largely depend on your skills and how they will be used.
    You have gained the skills to create and run your own model.
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你了解到ArcGIS Pro包含两种自动化和简化任务的方法；也就是说，你可以创建一个模型或Python脚本。哪一个将工作得最好将主要取决于你的技能以及它们将如何被使用。你已经获得了创建和运行自己模型的能力。
- en: We learned that models are created in ModelBuilder, which provides a graphical
    interface for creating tools that will automate a series of processes required
    to accomplish an analysis or other workflow. Each model will contain a series
    of processes. Each process will include a tool that can be a geoprocessing tool,
    script, or another model, along with their associated variables. As you create
    a model, you can choose to make it interactive by designating variables as parameters.
    The biggest limitation of models is that they can only be run from inside of ArcGIS
    Pro. This means they cannot be scheduled to run automatically.
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 我们了解到模型是在模型构建器中创建的，它提供了一个图形界面，用于创建将自动化完成分析或其他工作流程所需的一系列过程的工具。每个模型将包含一系列过程。每个过程将包括一个工具，可以是地理处理工具、脚本或另一个模型，以及它们相关的变量。当你创建模型时，你可以选择通过指定变量为参数来使其交互式。模型的最大的局限性是它们只能在ArcGIS
    Pro内部运行。这意味着它们不能被安排自动运行。
- en: Python scripts can be used to automate processes that can then be scheduled
    to run at specified times and dates. Unlike the case with models, creating Python
    scripts does require knowledge of the Python language and the ability to write
    code.
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: Python 脚本可以用来自动化流程，这些流程可以随后被安排在指定的时间和日期运行。与模型的情况不同，创建 Python 脚本确实需要了解 Python
    语言以及编写代码的能力。
- en: In addition to the ability of Python scripts to be run on a schedule, they can
    also be used to access functionality from other applications other than ArcGIS
    Pro. Through this chapter, you have gained the skills to create scripts that can
    integrate the functionality of several different applications into a single automated
    script.
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 除了 Python 脚本可以按计划运行的能力之外，它们还可以用来访问 ArcGIS Pro 以外的其他应用程序的功能。通过本章，你已经获得了创建可以将多个不同应用程序的功能集成到单个自动化脚本中的脚本的技能。
- en: In the next chapter, you will learn how you can share the various maps and data
    you create in ArcGIS Pro with others on your computer network and those that are
    not on your network. You will also learn ways to share your GIS content with others
    that do not have GIS software.
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，你将学习如何将你在 ArcGIS Pro 中创建的各种地图和数据与他人共享，无论是位于你的计算机网络上还是不在你的网络上。你还将学习如何与没有
    GIS 软件的人共享你的 GIS 内容。
- en: Further reading
  id: totrans-407
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: If you would like to learn more about creating Python scripts for ArcGIS, you
    might want to get *Programming ArcGIS with Python Cookbook* by Eric Pimpler.
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想了解更多关于为 ArcGIS 创建 Python 脚本的信息，你可能想获取 Eric Pimpler 编著的《使用 Python 编程 ArcGIS
    烹饪书》。
