- en: Leveraging Advanced Analytics
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 利用高级分析
- en: This chapter focuses on advanced self-service analytics. Self-service analytics
    can be seen as a form of business intelligence, where people in a business are
    encouraged to execute queries on datasets themselves, instead of placing requests
    for queries in a backlog with their IT team. Then, query analysis can be done,
    which should lead to more insights and data-driven decision-making. But how do
    you start creating useful self-service dashboards if it’s your first time doing
    so? How do you go from a dataset to a product? Have you ever asked yourself how
    other people start working on a dashboard, how they clean data, and how they come
    up with a dashboard design? If so, this is the right chapter for you! I want to
    share three use cases with you, written as a train of thought in order to give
    you an idea about how I work. Please note that this is just my personal experience;
    there are many different ways to reach your goal.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章重点介绍高级自助分析。自助分析可以看作是一种商业智能形式，企业中的人员被鼓励自己在数据集上执行查询，而不是将查询请求提交到IT团队的待办事项中。然后，可以进行查询分析，这将有助于产生更多的洞察力和数据驱动的决策。那么，如果这是你第一次做自助分析，你如何开始创建有用的自助仪表板呢？你如何从一个数据集到一个产品呢？你是否曾问自己，其他人是如何开始做仪表板的，如何清理数据，以及如何设计仪表板的？如果是这样，那么本章正是为你准备的！我想和你分享三个使用案例，它们以思维列车的方式写成，目的是让你了解我是如何工作的。请注意，这仅仅是我的个人经验；有很多不同的方法可以实现你的目标。
- en: 'We will cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将覆盖以下主题：
- en: Visualizing world indices correlations
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可视化世界指数相关性
- en: Geo-spatial analytics with Chicago traffic violations
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用芝加哥交通违规数据进行地理空间分析
- en: Extending geo-spatial analytics with distance measures
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用距离度量扩展地理空间分析
- en: Now that we have had this introduction, we are good to go and can start with
    the first use case.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经进行了介绍，可以开始处理第一个使用案例。
- en: Visualizing world indices correlations
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可视化世界指数相关性
- en: 'Imagine you are working on the world indices dataset and your line manager
    gives you the following task:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，你正在处理世界指数数据集，而你的直属经理给你以下任务：
- en: Create a dashboard for me in which I can easily spot all correlated world indices
    and their distribution. I need it by tomorrow morning.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 为我创建一个仪表板，能够轻松地显示所有相关的世界指数及其分布。我需要它在明天早上之前完成。
- en: Now, take a few minutes before you continue reading and think about how you
    would tackle this task. The dataset contains 67 columns with various indices,
    like birth registrations or emission values, exports and imports, and forest areas,
    divided into 188 rows, where each row represents one country.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，在继续阅读之前，花几分钟时间思考一下你将如何处理这个任务。数据集包含67列不同的指数，比如出生登记、排放值、进出口和森林面积，分为188行，每一行代表一个国家。
- en: Write down your planned steps, open the workbook related to this chapter from
    [https://public.tableau.com/profile/marleen.meier](https://public.tableau.com/profile/marleen.meier),
    and follow your steps; time it in order to get a better feel for time estimates
    when working with Tableau. This way, you can make sure that you can deliver on
    time and manage expectations if you are ever asked how long it will take to build
    a certain dashboard.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 写下你计划的步骤，打开与本章相关的工作簿，来自[https://public.tableau.com/profile/marleen.meier](https://public.tableau.com/profile/marleen.meier)，并按照你的步骤执行；为自己设定时间，以便更好地掌握在使用Tableau时的时间估算。这样，你可以确保按时交付，并在被问及需要多长时间构建某个仪表板时，能够管理预期。
- en: Plotting a scattergraph
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 绘制散点图
- en: 'And now, I will illustrate one way I could imagine solving this task:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我将展示我可能想象的解决这个任务的一种方式：
- en: First, I open the `world-indices` file in Tableau Prep Builder in order to get
    more details on the dataset itself; this will help me to describe the data but
    also to spot obvious data flaws like null values, duplicate entries, and so on:![](img/B18435_12_01.png)
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我在Tableau Prep Builder中打开`world-indices`文件，以便更详细地了解数据集本身；这将帮助我描述数据，并且能够发现明显的数据缺陷，比如空值、重复条目等：![](img/B18435_12_01.png)
- en: 'Figure 12.1: Tableau Prep Builder'
  id: totrans-15
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.1：Tableau Prep Builder
- en: With this dataset, I actually didn’t spot any obvious data quality issues in
    Prep Builder, nor a need to further prepare the data. It’s 1 row per country—which
    you can see in the evenly distributed bars in the **ID** column—and 65 columns
    for the different indices per country. Since no data preparation is needed, I
    decide to continue directly with Tableau Desktop. I close Tableau Prep Builder
    and open Tableau Desktop.
  id: totrans-16
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于这个数据集，我实际上没有在Prep Builder中发现任何明显的数据质量问题，也没有进一步准备数据的需求。每个国家有1行数据——你可以在**ID**列中看到均匀分布的条形图——并且每个国家有65列不同的指标。由于不需要数据准备，我决定直接使用Tableau
    Desktop。于是，我关闭了Tableau Prep Builder并打开了Tableau Desktop。
- en: 'My next thought is, how can I visualize all correlations at once, yet not have
    it be too much information? I have 65 different columns, which makes for 4,225
    possible combinations. No, I decide that displaying everything won’t work. The
    task is very generic; therefore, I decide to go for a two-parameter approach,
    which will enable my end user to select each of the index combinations themselves.
    I start sketching what the dashboard might look like and come up with the following:'
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我的下一个想法是，如何一次性可视化所有的相关性，同时又不至于信息过载？我有65个不同的列，这意味着有4,225种可能的组合。不，我决定显示所有内容是行不通的。这个任务非常通用，因此我决定采用两参数的方法，这样最终用户就可以选择各自的指标组合。我开始草拟仪表板的外观，并设计出以下内容：
- en: '![](img/B18435_12_02.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_02.png)'
- en: 'Figure 12.2: Sketch'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.2：草图
- en: In order to execute my plan, I first create two parameters, which I name **X-Axis**
    and **Y-Axis**, which will be used to define the respective axes *x* and *y*.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了执行我的计划，我首先创建了两个参数，命名为**X-Axis**和**Y-Axis**，它们将用于定义各自的*X*轴和*Y*轴。
- en: 'I define both parameters as **String** and paste all field names from the clipboard
    into both of the parameters. To do this, I open the input file in Excel, transpose
    the header row to a column, and press *Ctrl* + *C*. The data can now be pasted
    into the parameter via the **Paste from Clipboard** option. This saves time and
    is less error-prone:'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我将两个参数都定义为**字符串**类型，并将剪贴板中的所有字段名粘贴到这两个参数中。为此，我在Excel中打开输入文件，将标题行转置为一列，然后按*Ctrl*
    + *C*。现在可以通过**从剪贴板粘贴**选项将数据粘贴到参数中。这节省了时间并且减少了出错的可能：
- en: '![](img/B18435_12_03.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_03.png)'
- en: 'Figure 12.3: Paste to parameter'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.3：粘贴到参数
- en: 'I also want the parameters to be visible on the dashboard, so I select **Show
    Parameter**:'
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我还希望参数能在仪表板上显示出来，因此我选择了**显示参数**：
- en: '![](img/B18435_12_04.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_04.png)'
- en: 'Figure 12.4: Show Parameter'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.4：显示参数
- en: 'If you were to test the parameter now, nothing would happen. We need a calculated
    field that defines that if a selection from the parameter has been made, Tableau
    will select the appropriate field. I create the following calculated field to
    achieve this (this field has been made part of the `Starter` and `Solution` workbooks
    to make your life easier):'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你现在测试参数，什么也不会发生。我们需要一个计算字段，定义当从参数中做出选择时，Tableau会选择相应的字段。我创建了以下计算字段来实现这一点（该字段已包含在`Starter`和`Solution`工作簿中，便于你使用）：
- en: '![](img/B18435_12_05.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_05.png)'
- en: 'Figure 12.5: Calculated field'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.5：计算字段
- en: Now we will do the same thing for the **Y-Axis** parameter.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们将对**Y-Axis**参数执行相同的操作。
- en: In order to create the calculated field for **Y-Axis** quicker, copy and paste
    the **X-Axis** calculated field into Excel and find and replace `[Parameters].[X-Axis]`
    with `[Parameters].[Y-Axis]`.
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 为了更快速地创建**Y-Axis**的计算字段，将**X-Axis**的计算字段复制粘贴到Excel中，并用`[Parameters].[Y-Axis]`替换`[Parameters].[X-Axis]`。
- en: Drag the **X-Axis** calculated field to **Columns** and **Y-Axis** to **Rows**.
    Also, put the **ID** field on the **Detail** shelf.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**X-Axis**计算字段拖到**列**上，将**Y-Axis**拖到**行**上。同时，将**ID**字段放到**详细信息**架上。
- en: 'In order to see the correlation analytics from Tableau, drag **Trend Line**
    onto the sheet:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了查看Tableau的相关性分析，将**趋势线**拖到工作表上：
- en: '![](img/B18435_12_06.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_06.png)'
- en: 'Figure 12.6: Trend Line'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.6：趋势线
- en: The sheet with the trend line looks as follows. When hovering over the trend
    line, you will see the equation of the line, the **R-Squared** value, and the
    value for **P-value**:![](img/B18435_12_07.png)
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 带有趋势线的工作表如下所示。当你将鼠标悬停在趋势线上时，你将看到该线的方程式、**R平方**值以及**P值**：![](img/B18435_12_07.png)
- en: 'Figure 12.7: Trend line values'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.7：趋势线值
- en: The **Y-Axis** equation means that, for each point on the *x*-axis, the *y*-axis
    value will increase by 17.9717, starting at point 0 on the *x*-axis and point
    -4.33685 on the *y*-axis. Thus, overall the *y*-term increases faster than the
    (also increasing) *x*-term. The **R-Squared** value explains how much variance
    is explained by the trend line (80.81%), and lastly, **P-value** explains the
    significance of the model. A **P-value** value smaller than 0.05 is considered
    significant and means there is a 5% chance that the data is following the trend
    line randomly. The trend line in the preceding figure has a **P-value** of less
    than 0.01%. We can safely assume, therefore, that there is a real relationship
    between the two variables.
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**Y轴**方程意味着，对于每个*X*轴上的点，*Y*轴的值将增加17.9717，从*X*轴的0点和*Y*轴的-4.33685点开始。因此，整体而言，*Y*项的增加速度比（同样增加的）*X*项快。**R平方**值解释了趋势线所解释的方差比例（80.81%），最后，**P值**解释了模型的显著性。**P值**小于0.05被认为是显著的，这意味着数据随机符合趋势线的概率为5%。前面图中的趋势线**P值**小于0.01%。因此，我们可以安全地假设这两个变量之间存在真实的关系。'
- en: To see more coefficients, right-click on the line and select **Describe Trend
    Line…**:![](img/B18435_12_08.png)
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要查看更多系数，右键点击线条并选择**描述趋势线…**：![](img/B18435_12_08.png)
- en: 'Figure 12.8: Describe Trend Line…'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.8：描述趋势线…
- en: 'The following window will appear:'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 以下窗口将会出现：
- en: '![](img/B18435_12_09.png)'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](img/B18435_12_09.png)'
- en: 'Figure 12.9: Trend line information'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.9：趋势线信息
- en: Alternatively, you can select the **Describe Trend Model…** option and you will
    see this:![](img/B18435_12_10.png)
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 另外，你可以选择**描述趋势模型…**选项，你将看到以下内容：![](img/B18435_12_10.png)
- en: 'Figure 12.10: Trend model information'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.10：趋势模型信息
- en: 'If you want to learn more about interpreting trend lines, you can read the
    following article: [https://onlinehelp.tableau.com/current/pro/desktop/en-us/trendlines_add.htm](https://onlinehelp.tableau.com/current/pro/desktop/en-us/trendlines_add.htm).'
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你想了解更多关于解释趋势线的内容，可以阅读以下文章：[https://onlinehelp.tableau.com/current/pro/desktop/en-us/trendlines_add.htm](https://onlinehelp.tableau.com/current/pro/desktop/en-us/trendlines_add.htm)。
- en: 'I get a bit distracted by the grid lines, so I decide to remove them by right-clicking
    on the screen and selecting **Format…**:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我有点分心于网格线，所以我决定通过右键点击屏幕并选择**格式…**来去除它们：
- en: '![](img/B18435_12_11.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_11.png)'
- en: 'Figure 12.11: Formatting'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.11：格式化
- en: 'I select the fifth option in the **Format** window, the lines, and set the
    **Grid Lines** value to **None**:'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我在**格式**窗口中选择第五个选项——网格线，并将**网格线**值设置为**无**：
- en: '![](img/B18435_12_12.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_12.png)'
- en: 'Figure 12.12: Removing grid lines'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.12：移除网格线
- en: I also change **Marks** from **Automatic** to **Circle** and change the color
    to black.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我还将**Marks**从**自动**更改为**圆形**并将颜色更改为黑色。
- en: 'Now, I think it would be helpful to show on the scatterplot which country each
    point represents, so I change the **ID** field from **Detail** to **Label** in
    the **Marks** card; however, this looks a bit too chaotic:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我认为在散点图上显示每个点代表的国家会很有帮助，因此我将**ID**字段从**详细信息**更改为**标签**，但是这看起来有些混乱：
- en: '![](img/B18435_12_13.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_13.png)'
- en: 'Figure 12.13: ID to text'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.13：ID转文本
- en: 'I click on the undo arrow and add a highlighter function by right-clicking
    on **ID** and selecting **Show Highlighter**. Now, the end user will be able to
    search for a country and that point will be highlighted in the scatterplot:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我点击撤销箭头，并通过右键点击**ID**并选择**显示高亮**功能来添加高亮功能。现在，最终用户可以搜索某个国家，并且该点将在散点图中被高亮显示：
- en: '![](img/B18435_12_14.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_14.png)'
- en: 'Figure 12.14: Show Highlighter'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.14：显示高亮
- en: I also want the country name to be shown clearly in red when hovering over any
    points, and I achieve this by changing the **ID** color in **Edit Tooltip** to
    red and increasing the size:![](img/B18435_12_15.png)
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我还希望当悬停在任何点上时，国家名称能清晰地以红色显示，我通过在**编辑工具提示**中将**ID**颜色更改为红色并增加字体大小来实现：![](img/B18435_12_15.png)
- en: 'Figure 12.15: Tooltip'
  id: totrans-61
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.15：工具提示
- en: 'The result looks as follows:'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 结果如下所示：
- en: '![](img/B18435_12_16.png)'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](img/B18435_12_16.png)'
- en: 'Figure 12.16: Hovering over a point'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.16：悬停在某个点上
- en: 'I have already added the trend line, and I now want to show the **Pearson R**,
    also called **R-Squared**, value in the view such that the user knows if two indices
    are correlated; however, it is not possible to set the **Describe Trend Line**
    or **Describe Trend Model** option to always be shown. Hence, I will calculate
    the value myself in a new field; I use the `CORR()` function to do this:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我已经添加了趋势线，现在我想在视图中显示**Pearson R**，也叫**R 平方**值，这样用户就知道两个指标是否相关；然而，无法设置**描述趋势线**或**描述趋势模型**选项为始终显示。因此，我将自己在新字段中计算该值；我使用`CORR()`函数来做到这一点：
- en: '![](img/B18435_12_17.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_17.png)'
- en: 'Figure 12.17: Pearson R'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '图 12.17: Pearson R'
- en: 'But I want to show some text that indicates if two variables are correlated
    or not instead of the value itself because I want to make my dashboard clear.
    Therefore, I create another calculated field called `Correlation yes or no` with
    the following code:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 但我想显示一些文本，指示两个变量是否相关，而不是显示值本身，因为我希望让仪表板更加清晰。因此，我创建了另一个名为`是否相关`的计算字段，代码如下：
- en: '[PRE0]'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'This being done, I create a new sheet and place **Correlation yes or no** on
    the **Text** shelf. The sheet looks very simple, as you can see:'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成这一步后，我创建了一个新工作表并将**是否相关**放到**文本**架上。该工作表看起来非常简单，如下所示：
- en: '![](img/B18435_12_18.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_18.png)'
- en: 'Figure 12.18: Correlation on text'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '图 12.18: 文本相关性'
- en: I right-click on the title and choose **Hide Title**.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我右击标题并选择**隐藏标题**。
- en: Finally, almost everything is ready to build the dashboard from the sketch at
    the beginning of this section. Only the distributions for each of the two axes
    are still missing.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，几乎所有内容都准备好了，可以根据本节开头的草图构建仪表板。只缺少每个轴的分布。
- en: Adding axis distributions
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加坐标轴分布
- en: 'We have made a start, but now I want to add the distribution plots for the
    *x-* and *y*-axes next to the scatterplot. I take the following steps:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经开始了，但现在我想将*x*轴和*y*轴的分布图添加到散点图旁边。我按照以下步骤进行：
- en: I start with the *x*-axis, open another worksheet, and drag **X-Axis** to **Rows**.
    Next, I click on the just-added **green pill X-Axis** andselect **Measure** |
    **Count**. Now right-click on **X-Axis** in the data pane and select **Create**
    | **Bins…**. In the pop-up, hit **OK**. Lastly, I drag the new dimension **X-Axis
    (bin)** to **Columns**.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我从*x*轴开始，打开另一个工作表，并将**X 轴**拖到**行**中。接着，我点击刚刚添加的**绿色药丸 X 轴**并选择**度量** | **计数**。现在，在数据窗格中右击**X
    轴**并选择**创建** | **区间...**。在弹出窗口中，点击**确定**。最后，我将新的维度**X 轴（区间）**拖到**列**中。
- en: After I close the **Edit Axis [X-Axis]** window, I right-click on **X-Axis**
    and deselect **Show Header** to not show the header anymore.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭**编辑坐标轴 [X 轴]**窗口后，我右击**X 轴**并取消选择**显示标题**，以不再显示标题。
- en: I continue with **Y-Axis** on another new worksheet and drag **Y-Axis** to **Columns**.
    Next, I change the **Y-Axis** on **Columns** by clicking on it and selecting **Measure**
    | **Count**. Now, right-click on **Y-Axis** in the data pane and select **Create**
    | **Bins…**. In the pop-up, I hit **OK**.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我继续在另一个新的工作表中使用**Y 轴**，并将**Y 轴**拖到**列**中。接着，我通过点击它并选择**度量** | **计数**来更改**列**中的**Y
    轴**。现在，在数据窗格中右击**Y 轴**并选择**创建** | **区间...**。在弹出窗口中，点击**确定**。
- en: '![](img/B18435_12_19.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_19.png)'
- en: 'Figure 12.19: Bins'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '图 12.19: 区间'
- en: Lastly, I drag the new dimension **Y-Axis (bin)** to **Rows**.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我将新的维度**Y 轴（区间）**拖到**行**中。
- en: I change the color to gray in the **Marks** card and select **Entire View**
    at the top of the page.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我在**标记**卡中将颜色更改为灰色，并在页面顶部选择**整个视图**。
- en: The *y*-axis distribution should be aligned with the scatterplot; therefore,
    I click on **Y-Axis (bin)** | **Sort** | **Descending**. Next, I right-click on
    **Y-Axis** and deselect **Show Header** to not show the header anymore.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '*y*轴的分布应该与散点图对齐；因此，我点击**Y 轴（区间）** | **排序** | **降序**。接着，我右击**Y 轴**并取消选择**显示标题**，以不再显示标题。'
- en: In order to put everything together, I open a dashboard page and call it `Distribution`,
    then I put the `Scatterplot` worksheet at the bottom of the page and the `Correlation`
    worksheet at the top of the dashboard canvas.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了将所有内容结合在一起，我打开一个仪表板页面并命名为`分布`，然后将`散点图`工作表放在页面底部，将`相关性`工作表放在仪表板画布顶部。
- en: I add the distribution worksheets to the related sides of the scatterplot (`Y-Axis`
    to the *y*-axis and `X-Axis` to the *x*-axis).
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我将分布工作表添加到散点图的相关位置（`Y 轴`到*y*轴，`X 轴`到*x*轴）。
- en: I also add a blank in the lower left-hand corner to align the distribution with
    the scatterplot edges:![](img/B18435_12_20.png)
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我还在左下角添加了一个空白，以使分布与散点图的边缘对齐：![](img/B18435_12_20.png)
- en: 'Figure 12.20: Adding a blank'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.20：添加空白
- en: 'The final layout looks like this:'
  id: totrans-89
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 最终的布局如下所示：
- en: '![](img/B18435_12_21.png)'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](img/B18435_12_21.png)'
- en: 'Figure 12.21: Final layout'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.21：最终布局
- en: 'I want to give the distribution more meaning and add an action that will highlight
    the country in both distribution plots. I do this so the user can see where a
    country is located in the range of all countries within one index because it can
    be hard to see in the scatterplot sometimes. The scatterplot, on the other hand,
    can be used to get more insights into the relationship between the two indices.
    For the **Highlight** action, I need to set the parameters as follows:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我想赋予分布更多的意义，并添加一个动作，使其能够在两个分布图中突出显示国家。我这样做是为了让用户能够看到某个国家在某个指标的所有国家范围中的位置，因为有时在散点图中很难看到。另一方面，散点图可以用来获得更多关于两个指标之间关系的见解。对于**高亮**动作，我需要将参数设置如下：
- en: '![](img/B18435_12_22.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_22.png)'
- en: 'Figure 12.22: Highlight'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.22：高亮
- en: And in order for the highlighter to work on the **X-Axis** and **Y-Axis** sheets,
    please add **ID** to the **Detail** shelf in both worksheets.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了使高亮功能在**X轴**和**Y轴**的工作表中生效，请在两个工作表中的**Detail**栏中添加**ID**。
- en: '![](img/B18435_12_23.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_23.png)'
- en: 'Figure 12.23: Adding ID'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.23：添加ID
- en: 'Now, look at the following screenshot:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，看看下面的截图：
- en: '![](img/B18435_12_24.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_24.png)'
- en: 'Figure 12.24: Correlation'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.24：相关性
- en: I selected `Public health expenditure percentage of GDP 2013` on the **X-Axis**
    and `Mean years of schooling – Years` on the **Y-Axis**. I had to resize the **X-Axis
    bin** in the **Data** pane by right-clicking | **Edit** | **Suggest Bin Size**
    | **OK**. I can see that the overall correlation between these two measures is
    positively moderate at a correlation coefficient of 0.359\. But by hovering over
    the dots, you can now investigate which countries have what effect on this correlation.
    For countries close to the trend line, the correlation coefficient is closer to
    the true factor. For example, the United States in the top-right corner has a
    value of 16.8 for the *x*-axis (health expenditure) and 12.76 for the *y*-axis
    (years of schooling). If you multiply 12.76 by 0.359 (correlation coefficient),
    you get 4.581, which is almost exactly the difference between 12.76 and 16.8\.
    Now, if you search for Sierra Leone (bottom-right), you get *x* and *y* values
    of 11.4 and 2.9\. Here, the multiplication with the correlation coefficient won’t
    explain the relationship as well. This can be easily seen in the scatterplot because
    Sierra Leone is far away from the trend line. I really like this dashboard because
    it simplifies relationships between variables and can help novices as well as
    senior users understand data.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 我在**X轴**上选择了`Public health expenditure percentage of GDP 2013`，在**Y轴**上选择了`Mean
    years of schooling – Years`。我必须通过右键点击**数据**面板中的**X轴桶**，选择| **编辑** | **建议桶大小**
    | **确定**来调整**X轴桶**的大小。我看到这两个衡量标准之间的总体相关性是正相关的，相关系数为0.359。但通过悬停在点上，现在可以调查哪些国家对这种相关性有影响。对于靠近趋势线的国家，相关系数更接近实际因素。例如，位于右上角的美国，其**x**轴（健康支出）值为16.8，**y**轴（受教育年限）值为12.76。如果将12.76乘以0.359（相关系数），得到4.581，这几乎正好是12.76与16.8之间的差距。现在，如果你搜索塞拉利昂（右下方），你会看到**x**和**y**值分别为11.4和2.9。在这里，将相关系数相乘并不能很好地解释这种关系。这一点可以在散点图中清楚地看到，因为塞拉利昂远离趋势线。我非常喜欢这个仪表板，因为它简化了变量之间的关系，可以帮助新手和高级用户理解数据。
- en: Adding a correlation matrix
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加相关矩阵
- en: 'After clicking through the dashboard and testing the functionality, I realize
    that it’s hard to remember which combinations I have already tried, and also,
    I wish I could filter for highly correlated combinations. To address this, I want
    to add one more dashboard to this workbook: a correlation matrix with all combinations,
    color-coded, and with an option to filter:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在点击仪表板并测试功能后，我意识到很难记住我已经尝试过哪些组合，并且我希望能够筛选出高度相关的组合。为了解决这个问题，我想在这个工作簿中添加一个新的仪表板：一个包含所有组合的相关矩阵，并用颜色编码，同时提供筛选选项：
- en: 'First, I go back to my **Data Source** tab and add the same dataset again,
    but with a new name: `World Indices Correlation Matrix`. I even add it twice because
    I need every index correlated against every other index:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我回到**数据源**选项卡，再次添加相同的数据集，但使用一个新的名称：`World Indices Correlation Matrix`。我甚至添加了两次，因为我需要将每个指标与其他所有指标进行关联：
- en: '![](img/B18435_12_25.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_25.png)'
- en: 'Figure 12.25: World Indices Correlation Matrix'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.25：世界指标相关矩阵
- en: 'The key used is **ID**:'
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用的关键字段是**ID**：
- en: '![](img/B18435_12_26.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_26.png)'
- en: 'Figure 12.26: ID as a key'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.26：ID作为关键字段
- en: 'Then, I need to pivot both tables because instead of having one column per
    index, I need one column with all index names and a second column with all values
    in order to create a table with each of them. I select all fields except **ID**
    and use **Pivot**:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我需要对两个表进行透视，因为我需要一个列来显示所有指标名称，另一个列显示所有值，而不是每个指标对应一列。我选择除**ID**外的所有字段，并使用**透视**：
- en: '![](img/B18435_12_27.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_27.png)'
- en: 'Figure 12.27: Pivoting'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.27：透视
- en: 'This results in three columns. I rename **Pivot Field Values** to **Value Index
    A** and **Pivot Field Names** to **Index A**:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这样就得到了三列。我将**Pivot Field Values**重命名为**Value Index A**，将**Pivot Field Names**重命名为**Index
    A**：
- en: '![](img/B18435_12_28.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_28.png)'
- en: 'Figure 12.28: Renaming columns'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.28：重命名列
- en: Now I do this again with the second table and rename the columns **Index B**
    and **Value Index B**.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我再次对第二个表格进行操作，并将列重命名为**Index B**和**Value Index B**。
- en: I open a new worksheet and place **Index B** on **Columns**, and **Index A**
    on **Rows**. I create a calculated field named **Pearson R** with the code `CORR([Value
    Index B], [Value Index A])` and place it on **Filters**, **Color**, and **Text**.
    After right-clicking on **Pearson R** in the **Filters** shelf, I select **Show
    Filter**:![](img/B18435_12_29.png)
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我打开一个新的工作表，将**Index B**放置在**列**上，将**Index A**放置在**行**上。我创建一个名为**Pearson R**的计算字段，代码为`CORR([Value
    Index B], [Value Index A])`，并将其放置在**过滤器**、**颜色**和**文本**中。右键点击**Pearson R**字段，选择**显示过滤器**：![](img/B18435_12_29.png)
- en: 'Figure 12.29: Correlation matrix'
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.29：相关矩阵
- en: The colors can be adjusted as you like; I chose a 5-stepped color scheme from
    red to black, indicating that red fields are negatively correlated and black ones
    positively correlated.
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 颜色可以根据个人喜好调整；我选择了从红色到黑色的五色渐变，表示红色字段为负相关，黑色字段为正相关。
- en: 'I open a new dashboard tab and place the worksheet on it. Try adjusting the
    filter such that you only see the highly correlated range 0.89–0.99, just to have
    a smaller dataset to work with for now:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我打开一个新的仪表板标签，并将工作表放置其中。尝试调整过滤器，使其仅显示高度相关的范围 0.89–0.99，这样就能更小的数据集来操作：
- en: '![](img/B18435_12_30.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_30.png)'
- en: 'Figure 12.30: Filter correlation matrix'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.30：过滤器相关矩阵
- en: This section helped us create a heatmap of all possible combinations, and we
    color-coded the correlation value and added a filter to focus on points of interest.
    In the preceding screenshot, you can see the highly correlated indices.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 本节帮助我们创建了所有可能组合的热力图，我们通过颜色编码相关值并添加了过滤器来聚焦于感兴趣的点。在前面的截图中，你可以看到高度相关的指标。
- en: Finalizing the dashboard
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 完成仪表板
- en: 'To avoid any confusion, I want to explain the **Pearson R** filter for the
    user and finalize the dashboard:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免混淆，我想向用户解释**皮尔逊R**过滤器，并完成仪表板：
- en: 'I start by adding the text field `Pearson R ranges explained` to the dashboard.
    Given more time, I could make it a drop-down parameter just like the **X-Axis**
    and **Y-Axis** fields:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我开始将文本字段`Pearson R ranges explained`添加到仪表板。如果有更多时间，我可以将其做成像**X轴**和**Y轴**字段那样的下拉参数：
- en: '![](img/B18435_12_31.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_31.png)'
- en: 'Figure 12.31: Adding text about Pearson R'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.31：添加关于 Pearson R 的文本
- en: To finalize everything, three actions are needed. First, two **Parameter** actions
    are needed to enable clicking on the correlation matrix to change the values for
    the **X-Axis** and **Y-Axis** parameters, the first of which should be customized
    as follows:![](img/B18435_12_32.png)
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了完成所有操作，需要三个步骤。首先，需要两个**参数**操作，以便通过点击相关矩阵来更改**X轴**和**Y轴**参数的值，第一个操作应该按如下方式进行定制：![](img/B18435_12_32.png)
- en: 'Figure 12.32: Parameter action 1'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.32：参数操作 1
- en: The action in the preceding screenshot will change the **X-Axis** parameter
    to the value from **Index A**.
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述截图中的操作将会把**X轴**参数改为**Index A**中的值。
- en: Now, I edit the second **Parameter** action as follows:![](img/B18435_12_33.png)
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我按如下方式编辑第二个**参数**操作：![](img/B18435_12_33.png)
- en: 'Figure 12.33: Parameter action 2'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.33：参数操作 2
- en: The action in the preceding figure will change the **Y-Axis** parameter to the
    value from **Index B**.
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述图中的操作将会把**Y轴**参数改为**Index B**中的值。
- en: Lastly, I add a **Sheet Navigation** action called **GoToScatterplot**, which
    allows the user to change the dashboard after selecting an index combination:![](img/B18435_12_34.png)
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我添加了一个名为**GoToScatterplot**的**Sheet Navigation**操作，允许用户在选择指数组合后更改仪表板：![](img/B18435_12_34.png)
- en: 'Figure 12.34: Sheet Navigation action'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图12.34：Sheet Navigation操作
- en: The preceding action will show a menu to go to the trend line dashboard.
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前面的操作将显示一个菜单以转到趋势线仪表板。
- en: 'The user can now select a value and click on it. In the background, the parameters
    **X-Axis** and **Y-Axis** will be adjusted to the two indices that relate to that
    same field. For example, for **Mean years of schooling** and **Human Development
    Index**, a hyperlink appears:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户现在可以选择一个值并点击它。在背景中，**X轴**和**Y轴**参数将调整为与该字段相关的两个指标。例如，对于**平均学年**和**人类发展指数**，会显示一个超链接：
- en: '![](img/B18435_12_35.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_35.png)'
- en: 'Figure 12.35: Menu'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.35：菜单
- en: 'The user will be redirected to the dashboard with a trend line that is now
    prefiltered and shows the same two indices: **Mean years of schooling** and **Human
    Development Index**:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用户将被重定向到带有现在已预过滤的趋势线和相同两个指标的仪表板：**平均学年**和**人类发展指数**：
- en: '![](img/B18435_12_36.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_36.png)'
- en: 'Figure 12.36: Filtered visualization'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.36：过滤可视化
- en: From this, we can see that the two selected indices are positively correlated
    by 89.9%. We can also see the distribution per index on the *x*- and *y*-axes.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 从中可以看出，选择的两个指数正相关性为89.9%。我们还可以看到*x*轴和*y*轴上每个指数的分布。
- en: 'This was a lengthy exercise, but I wanted to present you with my full thought
    process and look at dashboard creation. With more time, I would definitely add
    some more insights, for instance:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个冗长的练习，但我想向你展示我完整的思维过程，并看看仪表板的创建。如果有更多时间，我肯定会添加更多见解，例如：
- en: Add an explanation for each index
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对每个指数添加解释。
- en: Add a more thorough explanation for the correlation
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对相关性添加更详细的解释。
- en: Add the p-value or other coefficients to the analysis and change the text accordingly
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加p值或其他系数到分析中，并相应地更改文本。
- en: And don’t forget to get feedback and check with your stakeholders if you are
    on the right track. Some people use sketches, then work on a draft, and then ask
    for feedback again, until the product is finalized. I tend to ask my stakeholders
    questions to better understand what they need and let them walk me through the
    process they want to replace or change with the Tableau dashboard. Then, I present
    a full version or intermediate version, depending on the complexity and timelines.
    You should avoid spending hours or days on something that is not what the stakeholder
    wants.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 不要忘记收集反馈并与利益相关者核对你是否在正确的方向上。有些人会使用草图，然后制作草稿，再次征求反馈，直到产品最终确定。我倾向于向利益相关者提问，以更好地理解他们的需求，并让他们指导我完成用Tableau仪表板替换或更改的过程。然后，我会呈现完整版本或中间版本，具体取决于复杂性和时间安排。你应该避免花费数小时或数天在不符合利益相关者期望的事物上。
- en: But now, let us have a look at a second, shorter use case that incorporates
    geo-spatial data.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们看一个第二个更短的用例，它包含地理空间数据。
- en: Geo-spatial analytics with Chicago traffic violations
  id: totrans-151
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 芝加哥交通违规的地理空间分析
- en: It’s Wednesday morning; your manager comes into your office wanting to check
    the red-light violations in the last year in Chicago. They ask if you can build
    a dashboard for that purpose. In particular, you’re asked to highlight where the
    most violations happen and whether there is an overall trend in Chicago traffic
    light violations over the last few years. You are given two datasets, one with
    the camera locations and one with the violations, and are told that the dashboard
    is needed within the next hour. What do you do?
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 这是星期三早上；你的经理走进你的办公室，想要检查芝加哥去年的红灯违规情况。他们询问你是否可以为此目的制作一个仪表板。特别是，你被要求突出显示违规最多发生的地点，并查看近几年芝加哥交通信号违规的总体趋势。你被提供了两个数据集，一个带有摄像机位置，另一个带有违规信息，并被告知需要在下一个小时内完成仪表板。你会怎么做？
- en: Before you continue reading, think about how you would approach this problem.
    Take five minutes, think about the steps you would take, and sketch a dashboard
    design.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续阅读之前，请考虑如何解决这个问题。花五分钟，思考你将采取的步骤，并草绘一个仪表板设计。
- en: 'The following is an overview of how I would do it:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我如何操作的概述：
- en: Open the datasets in Tableau Prep Builder.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Tableau Prep Builder中打开数据集。
- en: Join the two datasets.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接这两个数据集。
- en: Clean the data if needed.
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如有需要，清理数据。
- en: Open the output in Tableau.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Tableau中打开输出。
- en: Use a map to visualize the locations of cameras, if possible.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果可能，使用地图来可视化相机的位置。
- en: Add the number of violations per camera.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加每个相机的违规次数。
- en: Establish whether there is a monthly trend.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定是否存在按月趋势。
- en: 'What follows is a rough sketch of how I would design the dashboard:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是我设计仪表盘的粗略草图：
- en: '![](img/B18435_12_37.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_37.png)'
- en: 'Figure 12.37: Sketch'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.37：草图
- en: 'Up next is a step-by-step description of what I would do. The corresponding
    Tableau dashboard can be downloaded from Tableau Public, the Tableau Prep Builder
    file is available on GitHub ([https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter12](https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter12)),
    and the dataset itself is publicly available here: [https://data.cityofchicago.org/Transportation/Red-Light-Camera-Violations/spqx-js37](https://data.cityofchicago.org/Transportation/Red-Light-Camera-Violations/spqx-js37).'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是我将要执行的逐步描述。相应的Tableau仪表盘可以从Tableau Public下载，Tableau Prep Builder文件可以从GitHub获得（[https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter12](https://github.com/PacktPublishing/Mastering-Tableau-2023-Fourth-Edition/tree/main/Chapter12)），数据集本身可以在这里公开获取：[https://data.cityofchicago.org/Transportation/Red-Light-Camera-Violations/spqx-js37](https://data.cityofchicago.org/Transportation/Red-Light-Camera-Violations/spqx-js37)。
- en: Preparing the data
  id: totrans-166
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备数据
- en: 'After loading both files into Tableau Prep Builder, I see that a join on **LONGITUDE**
    and **LATITUDE** doesn’t get me anywhere because almost all records are mismatches:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 在将两个文件加载到Tableau Prep Builder中后，我发现通过**LONGITUDE**和**LATITUDE**连接无法得到任何结果，因为几乎所有记录都是不匹配的：
- en: '![](img/B18435_12_38.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_38.png)'
- en: 'Figure 12.38: Join I'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.38：连接 I
- en: 'I try a different approach: a join on the intersections. This results, again,
    in **0** joined rows, but this time I see why. In one dataset, the **INTERSECTION**
    values are separated by dashes (**-**), and in the other dataset, it’s **AND**;
    also, one uses capital letters, and the other one doesn’t:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 我尝试另一种方法：在交集上进行连接。这再次导致**0**个连接的行，但这次我知道原因了。在一个数据集中，**INTERSECTION**值是由短横线（**-**）分隔的，而在另一个数据集中是**AND**；此外，一个使用大写字母，另一个没有：
- en: '![](img/B18435_12_39.png)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_39.png)'
- en: 'Figure 12.39: Join II'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.39：连接 II
- en: 'I could add a cleaning step to make all the letters uppercase and split the
    intersections into two parts. I can execute **Custom Split…** on **-** as well
    as on **AND**:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 我可以添加一个清理步骤，将所有字母转换为大写，并将交叉口拆分成两部分。我可以在**-**以及**AND**上执行**自定义拆分...**：
- en: '![](img/B18435_12_40.png)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_40.png)'
- en: 'Figure 12.40: Data prepping'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.40：数据准备
- en: Then, I notice that the intersection order is different; for example, `Ashland-71st`
    and `71ST AND ASHLAND`. I might consider restructuring the datasets and creating
    a loop that would put the two streets in alphabetical order in the two splits,
    but I don’t have time for this now.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我注意到交叉口的顺序不同；例如，`Ashland-71st`和`71ST AND ASHLAND`。我可能会考虑重新构建数据集并创建一个循环，将两个街道按字母顺序排列在两个拆分中，但现在我没有时间做这个。
- en: Another solution is to first join split 1 and split 1 as well as split 2 and
    split 2\. In a second join, I could join split 1 and split 2 as well as split
    2 and split 1\. Afterward, I could union the two joins and create an output file
    (or directly load the Prep Builder dataset into Tableau Desktop). With this approach,
    I would still not include all the data, but I would have 380,000 rows out of 444,000\.
    This could be enough to get a rough idea of patterns. If I have any time left,
    I can continue mapping the remaining mismatches.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种解决方案是先将split 1和split 1以及split 2和split 2连接起来。接着，在第二次连接中，我可以将split 1和split
    2以及split 2和split 1连接。之后，我可以将两个连接的结果合并并创建输出文件（或者直接将Prep Builder数据集加载到Tableau Desktop中）。通过这种方法，我仍然不会包括所有数据，但我将会有从444,000行中筛选出的380,000行数据。这应该足以获得一个大致的模式。如果我还有时间，我可以继续映射剩余的不匹配项。
- en: However, I instead decide to drop the locations dataset altogether and just
    use the violations dataset because I realize that I would only miss locations
    in which no violation has happened yet. The locations of violations are sufficient
    for now. If you were, however, to determine if a traffic light control stopped
    working, you have to use both datasets.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，我最终决定完全放弃位置数据集，仅使用违规数据集，因为我意识到我只会错过那些尚未发生违规行为的位置。违规行为的发生地点已经足够。如果你需要确定交通信号灯控制是否失效，你必须使用两个数据集。
- en: Building a map of intersections
  id: totrans-179
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建交叉口的地图
- en: 'I continue by opening the violations dataset in Tableau:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 我继续在Tableau中打开违规数据集：
- en: 'Longitude and latitude values are not automatically recognized, so I have to
    change both to **Number (decimal)** by clicking on the data type icon:'
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 经度和纬度值没有自动识别，所以我必须点击数据类型图标将两者都更改为**Number (decimal)**：
- en: '![](img/B18435_12_41.png)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_41.png)'
- en: 'Figure 12.41: Change data type'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.41：更改数据类型
- en: Then, I change the **Longitude** and **Latitude** fields to **Measure** by clicking
    on the drop-down arrow on the field as shown in the preceding figure and selecting
    **Convert to Measure**.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我通过点击字段上的下拉箭头（如前图所示）并选择**Convert to Measure**，将**Longitude**和**Latitude**字段更改为**Measure**。
- en: 'Now I can click on the data type icon again and change the two fields to **Latitude**
    and **Longitude**:'
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我可以再次点击数据类型图标，并将两个字段更改为**Latitude**和**Longitude**：
- en: '![](img/B18435_12_42.png)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_42.png)'
- en: 'Figure 12.42: Changing the geographic role'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.42：更改地理角色
- en: 'By dragging **Longitude** to **Columns**, **Latitude** to **Rows**, and **Intersection**
    to the **Text** shelf, I visualize the red-light locations—at least the ones that
    have ever had a violation:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**Longitude**拖放到**Columns**，**Latitude**拖放到**Rows**，并将**Intersection**放到**Text**货架上，我可视化了红灯位置——至少是曾经发生过违规的位置：
- en: '![](img/B18435_12_43.png)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_43.png)'
- en: 'Figure 12.43: Intersections in Chicago'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.43：芝加哥的交叉点
- en: The name of the worksheet will be `Intersection`, and since I am looking at
    violations, I change the color in the **Marks** card to red. Lastly, I don’t need
    to see the intersection name, so I change **Intersection** from **Text** to **Detail**.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 工作表的名称将是`Intersection`，由于我正在查看违规情况，我将**Marks**卡片中的颜色更改为红色。最后，我不需要看到交叉点名称，所以我将**Intersection**从**Text**更改为**Detail**。
- en: Next, I like the map better when it shows a few more details, so I use **Background
    Layers…** to select some more options:![](img/B18435_12_44.png)
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我更喜欢地图显示一些细节，所以我使用**Background Layers…**选择了更多的选项：![](img/B18435_12_44.png)
- en: 'Figure 12.44: Background Layers…'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.44：背景图层…
- en: 'Select all the layers you want to see on the map:'
  id: totrans-194
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 选择要在地图上显示的所有图层：
- en: '![](img/B18435_12_45.png)'
  id: totrans-195
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](img/B18435_12_45.png)'
- en: 'Figure 12.45: Map of Chicago'
  id: totrans-196
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.45：芝加哥地图
- en: Another nice functionality of Tableau is that you can add **Data Layer** to
    your view. You can see the option in the bottom-left corner of the preceding screenshot.
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Tableau的另一个好功能是，你可以向视图添加**Data Layer**。你可以在前面截图的左下角看到该选项。
- en: I use the **Population** layer by **Census Tract**, as I hope it will give me
    some details on whether more or fewer violations happen in densely populated areas:![](img/B18435_12_46.png)
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我使用**人口普查区**的**人口**层，希望它能为我提供一些关于密集人口区域是否发生更多或更少违规行为的详细信息：![](img/B18435_12_46.png)
- en: 'Figure 12.46: Data layers'
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.46：数据层
- en: 'In the following screenshot, you can see how it looks—note that the darker
    the red, the denser the area is populated:'
  id: totrans-200
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在下面的截图中，你可以看到它的样子——请注意，红色越深，区域的人口密度越高：
- en: '![](img/B18435_12_47.png)'
  id: totrans-201
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](img/B18435_12_47.png)'
- en: 'Figure 12.47: Intersection visualization'
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.47：交叉点可视化
- en: 'I add **MONTH(Violation Date)** to **Pages**; that way, my boss can play with
    the months and see where and when the number of violations changes:'
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我将**MONTH(Violation Date)**添加到**Pages**；这样，我的老板可以调整月份，查看违规数量何时何地变化：
- en: '![](img/B18435_12_48.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_48.png)'
- en: 'Figure 12.48: Pages'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.48：页面
- en: 'Of course, I need to add the **Violations** field to make **Pages** work properly.
    I decide to use the **Density** feature of Tableau, using red as the color:'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当然，我需要添加**Violations**字段以使**Pages**正常工作。我决定使用Tableau的**Density**功能，并以红色为颜色：
- en: '![](img/B18435_12_49.png)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_49.png)'
- en: 'Figure 12.49: Density visualization'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.49：密度可视化
- en: Adding a corresponding heatmap worksheet
  id: totrans-209
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加相应的热力图工作表
- en: 'After clicking on the **Pages** play button, I notice a pattern for some months.
    I want to take a closer look, so I open a new worksheet:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 点击**Pages**播放按钮后，我注意到某些月份有模式。我想更仔细地观察，所以我打开了一个新的工作表：
- en: I call the new worksheet **Heatmap** and place **MONTH(Violation Date)** on
    **Columns** and **YEAR(Violation Date)** on **Rows**. Then, I drag **Violations**
    to the **Color** shelf and select red-gold to get the following:![](img/B18435_12_50.png)
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我将新工作表命名为**Heatmap**，并将**MONTH(Violation Date)**放到**Columns**，**YEAR(Violation
    Date)**放到**Rows**。然后，我将**Violations**拖放到**Color**货架上，并选择红金色得到以下结果：![](img/B18435_12_50.png)
- en: 'Figure 12.50: Heatmap'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.50：热力图
- en: There are definitely more red-light violations in the summertime, and 2016 and
    2020 show the most violations.
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 夏季肯定有更多的红灯违规行为，2016年和2020年显示了最多的违规行为。
- en: 'Last but not least, I add a new worksheet called `Trend?`. I drag **MONTH(Violation
    Date)** and drop it on the **Columns** shelf. The **Violations** field should
    be placed on **Rows**. I make sure that both measures are **Continuous (green)**.
    From the **Analytics** pane, I drag the linear **Trend Line** onto the worksheet.
    Next, I drag **Forecast** into the view:'
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我添加了一个名为`Trend?`的新工作表。我将**MONTH(Violation Date)**拖动并放到**Columns**架上。**Violations**字段应放在**Rows**上。我确保这两个度量都是**连续型（绿色）**。在**Analytics**面板中，我将线性**趋势线**拖到工作表上。接下来，我将**预测**拖到视图中：
- en: '![](img/B18435_12_51.png)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_51.png)'
- en: 'Figure 12.51: Line chart'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.51：折线图
- en: In the preceding figure, you can see that the overall trend of red-light violations
    increases slightly over the years. The forecast shows us that the seasonality
    of there being more red-light violations in the summertime will probably continue
    in 2021.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的图中，你可以看到红灯违章的整体趋势在多年间略有上升。预测显示，夏季出现更多红灯违章的季节性特征可能会持续到2021年。
- en: Feel free to check by the end of 2021 how good Tableau’s forecast model was!
    The City of Chicago datasets are continuously refreshed.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 欢迎在2021年底查看Tableau的预测模型表现如何！芝加哥市的数据集会不断更新。
- en: Finalizing the dashboard
  id: totrans-219
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 完成仪表板
- en: 'The hour is almost over and I am just placing the three worksheets onto a dashboard,
    calling it **Red-Light Violations**, and formatting it a bit; it looks as follows:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 时间差不多了，我正在将这三个工作表放到一个仪表板上，命名为**红灯违章**，并稍作格式调整；它的样子如下：
- en: '![](img/B18435_12_52.png)'
  id: totrans-221
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_52.png)'
- en: 'Figure 12.52: Final dashboard'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.52：最终仪表板
- en: 'You can find the final dashboard in the Tableau workbook associated with this
    chapter on Tableau Public, here: [https://public.tableau.com/profile/marleen.meier/](https://public.tableau.com/profile/marleen.meier/).'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在Tableau Public上找到与本章相关的Tableau工作簿中的最终仪表板，地址是：[https://public.tableau.com/profile/marleen.meier/](https://public.tableau.com/profile/marleen.meier/)。
- en: Can the dashboard be improved? Yes, it always can. But after this first iteration,
    my boss can let me know if anything needs to be adjusted and I can do so. I am
    sure that I could spend many more hours improving it, but most of the time, dashboarding
    is more about prompt delivery. And a full production model is a different story
    compared to an ad hoc question or a one-off exercise, especially if you work in
    an agile manner, split your work into deliverables, get feedback, and continue
    working on it.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 仪表板可以改进吗？是的，永远可以改进。但在这个第一次迭代之后，我的老板可以告诉我是否需要调整，我会进行调整。我确信我可以花更多时间改进它，但大多数时候，仪表板制作更重要的是快速交付。而且，完整的生产模型与临时问题或一次性练习是不同的，特别是当你以敏捷方式工作，将工作分割为交付物，获取反馈并继续改进时。
- en: Extending geo-spatial analytics with distance measures
  id: totrans-225
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 扩展地理空间分析与距离度量
- en: 'Our last use case is also geo-spatial analysis on the same Chicago traffic
    dataset, but this time, we will add another component. We will look to rent a
    new place but with the requirement that there are no more than *n* intersections
    in a radius of *x* and Navy Pier should be at most *y* miles away. The variables
    *n*, *x*, and *y* should be interactive in order for us to make changes and have
    a very flexible dashboard experience. The questions to ask about this task are:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的最后一个用例也是针对相同的芝加哥交通数据集进行的地理空间分析，但这次我们将添加另一个组件。我们打算租一个新地方，但要求该地方周围的半径*X*范围内没有超过*n*个交叉路口，而且海军码头距离最多为*y*英里。变量*n*、*x*和*y*应该是互动的，以便我们可以进行更改并拥有非常灵活的仪表板体验。关于这个任务，问题如下：
- en: How can we add any given location in Chicago to our dataset? It is currently
    only showing intersections and violations.
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们如何将芝加哥的任何一个位置添加到我们的数据集中？目前它只显示交叉路口和违章数据。
- en: How can we make the *n*, *x*, and *y* variables?
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们如何生成*n*、*x*和*y*这三个变量？
- en: How can we add a radius indicator to any given point on the map?
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们如何在地图上的任意点添加半径指示器？
- en: How can we measure the distance between two variable points?
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们如何衡量两个变量点之间的距离？
- en: 'All those questions will be answered in the following steps:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤将解答这些问题：
- en: Go back to the workbook related to this chapter.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回与本章相关的工作簿。
- en: Right-click on the worksheet called **Intersection** and click on **Duplicate**.
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击名为**Intersection**的工作表，点击**复制**。
- en: Rename the new worksheet `Rental`.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将新的工作表重命名为`Rental`。
- en: 'Remove **MONTH(Violation Date)** from **Pages** and **SUM(Violations)** from
    the **Color** shelf and the red text (sub-heading) from the title to make the
    worksheet look like this:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**页面**中移除**月份(违章日期)**，从**颜色**架中移除**违章次数的总和**，并从标题中删除红色文本（子标题），使工作表看起来像这样：
- en: '![](img/B18435_12_53.png)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_53.png)'
- en: 'Figure 12.53: Intersections'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.53：交叉点
- en: Change the **Marks** type to **Map**.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**标记**类型更改为**地图**。
- en: 'Click on **Map** | **Map Layer** and change **Data Layer** to **No Data Layer**:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**地图** | **地图图层**，将**数据图层**更改为**无数据图层**：
- en: '![](img/B18435_12_54.png)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_54.png)'
- en: 'Figure 12.54: Map layer'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.54：地图层
- en: Place **Violation Date** on the **Filters** shelf and select the year **2020**.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**违章日期**放到**筛选器**架上，并选择年份**2020**。
- en: 'Drag **Violations** onto the **Color** shelf and select the **Red** color palette:'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**违章次数**拖到**颜色**架上，并选择**红色**配色方案：
- en: '![](img/B18435_12_55.png)'
  id: totrans-244
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_55.png)'
- en: 'Figure 12.55: Edit colors'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.55：编辑颜色
- en: We now have a map of Chicago in front of us, on which each point represents
    an intersection at which violations have happened in 2020\. The darker the dot,
    the more violations there are that were registered at that intersection.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们面前有一张芝加哥的地图，其中每个点代表2020年发生违章的交叉口。点的颜色越深，表示该交叉口登记的违章次数越多。
- en: Adding measure points to the map
  id: totrans-247
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将测量点添加到地图上
- en: 'Next, we have to add functionality that will allow us to set a mark on the
    map and start measuring from there. This can be achieved by creating longitude
    and latitude parameters and using them in a calculated field:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们需要添加一个功能，允许我们在地图上设置一个标记并从那里开始测量。可以通过创建经度和纬度参数，并在计算字段中使用它们来实现：
- en: 'Create the following parameters, `Lat` and `Long`:'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建以下参数，`纬度`和`经度`：
- en: '**![](img/B18435_12_56.png)**'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: '**![](img/B18435_12_56.png)**'
- en: 'Figure 12.56: Parameters'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.56：参数
- en: Right-click each of the parameters and select **Show Parameter**.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击每个参数并选择**显示参数**。
- en: 'Create a calculated field called `Address manual`:'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`地址手动输入`的计算字段：
- en: '[PRE1]'
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Drag **Address manual** onto the map, on top of the **Add a Marks Layer** pop-up:'
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**地址手动输入**拖到地图上，放置在**添加标记层**弹出窗口上方：
- en: '![](img/B18435_12_57.png)'
  id: totrans-256
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_57.png)'
- en: 'Figure 12.57: Add a layer'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.57：添加一个图层
- en: Change the **Marks** type of the new layer to **Map**.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将新图层的**标记**类型更改为**地图**。
- en: 'After these steps, we have a map with intersections, color-coded numbers of
    violations, and a point that we can change by using the `Lat` and `Long` parameters.
    The user can use, for example, Google Maps to find the latitude and longitude;
    simply select a point on Google Maps that represents a rental home location:'
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成这些步骤后，我们就得到了一个带有交叉点的地图，显示了颜色编码的违章次数，并且有一个点可以通过使用`纬度`和`经度`参数来更改。用户可以使用例如Google
    Maps来找到纬度和经度；只需在Google Maps上选择一个代表出租房位置的点：
- en: '![](img/B18435_12_58.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_58.png)'
- en: 'Figure 12.58: Google Maps'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.58：Google Maps
- en: 'The latitude and longitude will show in the URL and at the bottom of the page.
    Type them into the `Lat` and `Long` parameters and the same points will appear
    on our Tableau map:'
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 纬度和经度将在URL中以及页面底部显示。将它们输入到`纬度`和`经度`参数中，相同的点将出现在我们的Tableau地图上：
- en: '![](img/B18435_12_59.png)'
  id: totrans-263
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_59.png)'
- en: 'Figure 12.59: Latitude and longitude'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 图 12.59：纬度和经度
- en: Adding the distance line
  id: totrans-265
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加距离线
- en: 'In the next steps, we will add a radius and a distance line starting at Navy
    Pier:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的步骤中，我们将添加一个半径和一条从海军码头开始的距离线：
- en: Create another parameter called `Radius in miles` and set the current value
    to `1.1`.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`英里半径`的参数，并将当前值设置为`1.1`。
- en: Right-click on the `Radius in miles` parameter and select **Show Parameter**.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击`英里半径`参数并选择**显示参数**。
- en: 'Create a calculated field called `Buffer`, which will be used as our radius
    around the **Address manual** point:'
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个名为`缓冲区`的计算字段，用作我们围绕**地址手动输入**点的半径：
- en: '[PRE2]'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Drag the **Buffer** field onto the map just like we did with the **Address manual**
    field, on top of the **Add a Marks Layer** pop-up.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**缓冲区**字段拖到地图上，就像我们之前将**地址手动输入**字段拖到**添加标记层**弹出窗口上一样。
- en: Change the **Marks** type of this new layer to **Map**.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将此新层的**标记**类型更改为**地图**。
- en: Click on **Color**, change the opacity to **50%**, and choose a gray color:![](img/B18435_12_60.png)
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**颜色**，将不透明度更改为**50%**，并选择灰色：![](img/B18435_12_60.png)
- en: 'Figure 12.60: Map with radius'
  id: totrans-274
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.60：带有半径的地图
- en: 'The **Navy Pier** coordinates are shown in the URL in the following figure
    (41.8859088,-87.6064094):'
  id: totrans-275
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**海军码头**的坐标显示在以下图中的URL中（41.8859088,-87.6064094）：'
- en: '![](img/B18435_12_61.png)'
  id: totrans-276
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](img/B18435_12_61.png)'
- en: 'Figure 12.61: Navy Pier'
  id: totrans-277
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 12.61：海军码头
- en: 'Create a calculated field as follows:'
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建如下计算字段：
- en: '[PRE3]'
  id: totrans-279
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Drag the **Navy Pier** field onto the map on top of the **Add a Marks Layer**
    pop-up.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**Navy Pier**字段拖放到顶部的**添加标记层**弹出窗口上的地图上。
- en: Change the **Marks** type to **Map**.
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**标记**类型更改为**地图**。
- en: 'In order to connect **Navy Pier** to our **Address manual** point and measure
    the distance, create another calculated field called `Line`:'
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了连接**Navy Pier**和我们的**地址手动**点并测量距离，请创建另一个名为`Line`的计算字段：
- en: '[PRE4]'
  id: totrans-283
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'To measure the distance between the two, create a `Distance` field with the
    following code:'
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要测量两者之间的距离，请使用以下代码创建一个`Distance`字段：
- en: '[PRE5]'
  id: totrans-285
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Place the **Line** field onto the map on top of the **Add a Marks Layer** pop-up.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**Line**字段放置在顶部的**添加标记层**弹出窗口上的地图上。
- en: Change the **Marks** type in the new layer to **Map**.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将新图层中的**标记**类型更改为**地图**。
- en: 'Place **Distance** on the **Label** shelf, change the measure to **Average**,
    and click on **Label** to add the text `miles`:'
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**Distance**放置在**标签**架上，将测量值更改为**平均值**，然后单击**标签**以添加文本`miles`：
- en: '![](img/B18435_12_62.png)'
  id: totrans-289
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_62.png)'
- en: 'Figure 12.62: Edit label'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.62：编辑标签
- en: 'Our dashboard now looks as follows:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的仪表板现在如下所示：
- en: '![](img/B18435_12_63.png)'
  id: totrans-292
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B18435_12_63.png)'
- en: 'Figure 12.63: Final dashboard'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 图12.63：最终仪表板
- en: And this makes it complete. The radius clearly shows how many intersections
    are within a certain distance; you can see the number of intersection violations
    by hovering over the points. The line from Navy Pier to our current location **Address
    manual** tells us how far away those two points are from each other.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 这使其完整。 半径清楚地显示了某一距离内有多少个交点； 悬停在点上可以看到交点违规的数量。 从Navy Pier到我们当前位置的**地址手动**告诉我们这两个点相距多远。
- en: 'To answer our questions from the beginning:'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 回答我们一开始的问题：
- en: '*How can we add any given location in Chicago to our dataset?* *It is currently
    only showing intersections and violations*. By using the `Makepoint()` function
    in a calculated field.'
  id: totrans-296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*如何将芝加哥的任何给定位置添加到我们的数据集中？* *目前仅显示交点和违规*。 通过在计算字段中使用`Makepoint()`函数。'
- en: '*How can we make the n, x, and y variables?* By using parameters.'
  id: totrans-297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*如何制作n、x和y变量？* 通过使用参数。'
- en: '*How can we add a radius to any given point on the map?* By using the `Buffer()`
    function.'
  id: totrans-298
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*如何在地图上的任意给定点添加半径？* 通过使用`Buffer()`函数。'
- en: '*How can we measure the distance between two variable points?* By using the
    `Distance()` function; by adding the `MakeLine()` function, a line will be drawn.'
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*如何测量两个可变点之间的距离？* 通过使用`Distance()`函数；通过添加`MakeLine()`函数，将绘制一条线。'
- en: This use case can be recreated for the number of supermarkets in an area, schools,
    public transport points, and so on. Be creative and feel free to upload your dashboards
    to Tableau Public, and don’t forget to add the **#MasteringTableau** tag!
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 此用例可以重新创建为某一区域内的超市数量、学校、公共交通点等。 保持创造性，随时将您的仪表板上传到Tableau Public，并不要忘记添加**#MasteringTableau**标签！
- en: 'If you work a lot with spatial data, I would also recommend that you check
    out these links:'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您经常使用空间数据，我还建议您查看这些链接：
- en: '[https://www.tableau.com/about/blog/2019/6/geospatial-analysis-made-easy-two-new-spatial-functions-makepoint-and-makeline](https://www.tableau.com/about/blog/2019/6/geospatial-analysis-made-easy-two-new-spatial-functions-makepoint-and-makeline)'
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.tableau.com/about/blog/2019/6/geospatial-analysis-made-easy-two-new-spatial-functions-makepoint-and-makeline](https://www.tableau.com/about/blog/2019/6/geospatial-analysis-made-easy-two-new-spatial-functions-makepoint-and-makeline)'
- en: '[https://www.tableau.com/about/blog/2020/3/seeing-and-understanding-proximity-made-easy-buffer-calculations](https://www.tableau.com/about/blog/2020/3/seeing-and-understanding-proximity-made-easy-buffer-calculations)'
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.tableau.com/about/blog/2020/3/seeing-and-understanding-proximity-made-easy-buffer-calculations](https://www.tableau.com/about/blog/2020/3/seeing-and-understanding-proximity-made-easy-buffer-calculations)'
- en: Summary
  id: totrans-304
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 概要
- en: In this chapter, we explored the fascinating world of advanced self-service
    analytics. We began by understanding the concept of self-service analytics as
    a form of business intelligence, empowering individuals to directly query datasets
    and unlock valuable insights. Throughout our journey, we uncovered three captivating
    use cases that showcased the power of self-service analytics. We unraveled the
    intricate correlations between world indices, gaining a deeper understanding of
    global market dynamics. We then delved into the realm of Chicago traffic violations,
    using geo-spatial analytics to uncover patterns and potential areas for improvement.
    Lastly, we extended our geo-spatial analysis, utilizing distance measures to determine
    the optimal radius for housing locations based on key variables.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们探索了自助式高级分析的迷人世界。我们首先理解了自助式分析作为一种商业智能形式的概念，它使个人能够直接查询数据集并获取有价值的见解。在我们的旅程中，我们发现了三个引人入胜的应用案例，展示了自助式分析的强大力量。我们揭示了世界指数之间复杂的相关性，深入理解了全球市场动态。接着，我们进入了芝加哥交通违规领域，运用地理空间分析揭示了潜在的模式和改进的领域。最后，我们扩展了地理空间分析，利用距离度量来确定基于关键变量的住房位置的最佳半径。
- en: 'Amidst these diverse scenarios, one key lesson resonated throughout: a well-structured
    approach is paramount when embarking on a self-service analytics project. By carefully
    planning our work, familiarizing ourselves with the data, employing descriptive
    statistics, and adapting our plans based on intermediate results, we paved the
    way for success.'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些不同的场景中，有一个关键的教训始终贯穿其中：当开始一个自助式分析项目时，结构化的方法至关重要。通过精心规划工作、熟悉数据、运用描述性统计，并根据中期结果调整计划，我们为成功铺平了道路。
- en: 'And remember, a dashboard is never really finished: you can always change things;
    your audience might change; and stakeholder wishes might differ. Deliver a working
    visualization with basic functionality and continue to develop after you get feedback.
    Depending on your backlog or other circumstances, the minimum viable product might
    be just what you need.'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 还要记住，仪表板永远不会真正完成：你总是可以修改内容；你的受众可能会改变；利益相关者的需求也可能不同。交付一个具有基本功能的可用可视化，并在收到反馈后继续改进。根据你的待办事项或其他情况，最小可行产品可能正是你所需要的。
- en: As we conclude this chapter, I urge you to reflect on the insights gained and
    consider how these principles can be applied to your own self-service analytics
    endeavors. Remember, while my experiences have served as a guide, there are various
    paths that can lead you to your goals. Embrace the power of self-service analytics,
    empower yourself with data, and unlock a world of possibilities in your quest
    for informed decision-making. While doing this, give your IT team a rest and let
    them focus on the heavier implementations that are out of scope for you.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们结束本章时，我敦促你反思所获得的见解，并考虑如何将这些原则应用于你自己的自助式分析工作。记住，尽管我的经验可以作为指导，但有许多不同的路径可以帮助你实现目标。拥抱自助式分析的力量，用数据赋能自己，并在寻求数据驱动决策的过程中，开启无限的可能性。同时，给你的
    IT 团队一些休息时间，让他们专注于那些超出你范围的更复杂的实施工作。
- en: The next chapter will be all about improving performance. With more and more
    data, performance is key and could mean the difference between success and failure.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将专注于提高性能。随着数据量的不断增加，性能至关重要，它可能意味着成功与失败之间的差距。
- en: Learn more on Discord
  id: totrans-310
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 Discord 上了解更多
- en: 'To join the Discord community for this book – where you can share feedback,
    ask questions to the author, and learn about new releases – follow the QR code
    below:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 要加入本书的 Discord 社区——你可以在这里分享反馈、向作者提问并了解新版本——请扫描下面的二维码：
- en: '[https://packt.link/tableau](https://packt.link/tableau)'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://packt.link/tableau](https://packt.link/tableau)'
- en: '![](img/QR_Code2044012316175764640.png)'
  id: totrans-313
  prefs: []
  type: TYPE_IMG
  zh: '![](img/QR_Code2044012316175764640.png)'
