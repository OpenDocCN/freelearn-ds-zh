- en: '*Chapter 5*: Letting the Machines Do the Model Training'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第 5 章*：让机器来训练模型'
- en: In this chapter, you will create your first **Automated Machine Learning** (**Automated
    ML** or **AutoML**) experiment. AutoML refers to the process of trying multiple
    modeling techniques and selecting the model that produces the best predictions
    against the training dataset you specify. First, you will navigate through the
    AutoML wizard that is part of the Azure Machine Learning Studio web experience
    and understand the different options that need to be configured. You will then
    learn how to monitor the progress of an AutoML experiment and how to deploy the
    best-produced model as a web service hosted in an **Azure Container Instance**
    (**ACI**) to be able to make real-time inferences.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将创建你的第一个 **自动化机器学习**（**自动化 ML** 或 **AutoML**）实验。AutoML 是指尝试多种建模技术并选择在你指定的训练数据集上产生最佳预测结果的模型的过程。首先，你将浏览
    Azure 机器学习工作室 Web 体验中的 AutoML 向导，并了解需要配置的不同选项。然后，你将学习如何监控 AutoML 实验的进度，以及如何将最佳模型作为
    Web 服务部署到 **Azure 容器实例**（**ACI**）中，从而能够进行实时推断。
- en: The best way to go through this chapter is by sitting in front of a computer
    with this book by you. By using your Azure subscription and this book together,
    you can start your journey through AutoML.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 通过坐在电脑前并带着这本书，你可以顺利完成本章内容。通过结合使用你的 Azure 订阅和本书，你可以开始你的 AutoML 之旅。
- en: 'In this chapter, we''re going to cover the following main topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将覆盖以下主要内容：
- en: Configuring an AutoML experiment
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置 AutoML 实验
- en: Monitoring execution of an experiment
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控实验的执行
- en: Deploying best model as a web service
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将最佳模型部署为 Web 服务
- en: Technical requirements
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: You will need to have access to an Azure subscription. Within that subscription,
    you will need a `packt-azureml-rg`. You will need to have either a `Contributor`
    or `Owner` `packt-learning-mlw`, as described in [*Chapter 2*](B16777_02_Final_VK_ePub.xhtml#_idTextAnchor026),
    *Deploying Azure Machine Learning Workspace Resources*.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要访问 Azure 订阅。在该订阅中，你需要一个 `packt-azureml-rg`。你需要拥有 `Contributor` 或 `Owner`
    权限的 `packt-learning-mlw`，如 [*第 2 章*](B16777_02_Final_VK_ePub.xhtml#_idTextAnchor026)
    中所述，*部署 Azure 机器学习工作区资源*。
- en: Configuring an AutoML experiment
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置 AutoML 实验
- en: If you were asked to train a model to make predictions against a dataset, you
    would need to do a couple of things, including normalizing the dataset, splitting
    it into train and validation data, running multiple experiments to understand
    which algorithm is performing best against the dataset, and then finetuning the
    best model. Automated machine learning shortens this process by fully automating
    the time-consuming, iterative tasks. It allows all users, from normal PC users
    to experienced data scientists, to build multiple machine learning models against
    a target dataset and select the model that performs the best, based on a metric
    you select.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你被要求训练一个模型来对数据集进行预测，你需要做几件事，包括数据集的归一化、将数据集拆分为训练数据和验证数据、运行多个实验以了解哪种算法在数据集上的表现最佳，然后对最佳模型进行微调。自动化机器学习通过完全自动化耗时的迭代任务，缩短了这个过程。它允许所有用户，从普通
    PC 用户到经验丰富的数据科学家，都可以针对目标数据集构建多个机器学习模型，并根据你选择的度量标准选择表现最好的模型。
- en: 'This process consists of the following steps:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 该过程包括以下步骤：
- en: '**Preparing the experiment**: Select the dataset you are going to use for training,
    select the column that you are trying to predict, and configure the experiment''s
    parameters. This is the configuration phase you will read about in this section.'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**准备实验**：选择你将用于训练的数据集，选择你要预测的列，并配置实验的参数。这是你将在本节中阅读到的配置阶段。'
- en: '**Data guardrails**: This is the first step of executing the experiment. It
    performs basic data guardrails on top of the provided training dataset. AutoML
    tries to identify potential issues with your data; for example, all the training
    data must have the same values in the column you are trying to predict.'
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**数据保护措施**：这是执行实验的第一步。它对提供的训练数据集进行基本的数据保护措施。AutoML 尝试识别数据中的潜在问题；例如，你要预测的列中所有的训练数据必须具有相同的值。'
- en: '**Training multiple models**: Train multiple combinations of data normalization
    and algorithms to find the best model that optimizes (maximizes or minimizes)
    the desired metric. This process continues until one of the exit criteria is met,
    either a time constraint or a specified model performance target.'
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**训练多个模型**：训练多种数据规范化和算法的组合，以找到最佳模型，从而优化（最大化或最小化）所需的度量标准。这个过程将一直持续，直到满足退出标准：时间限制或指定的模型性能目标。'
- en: '**Creating an ensemble model**: Here, you train a model that combines the results
    of the best models trained so far and produces a potentially improved inference.'
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**创建集成模型**：在这里，你训练一个模型，它结合了到目前为止训练的最佳模型的结果，并生成一个可能改进的推断。'
- en: '**Selecting the best model**: The best model is selected based on the metric
    you specified.'
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**选择最佳模型**：根据你指定的度量标准，选择最佳模型。'
- en: Azure Machine Learning provides a web-based wizard that allows you to configure
    such an experiment. In [*Chapter 3*](B16777_03_Final_VK_ePub.xhtml#_idTextAnchor045),
    *Azure Machine Learning Studio Components*, you explored the **Azure Machine Learning
    Studio** \ web experience.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: Azure 机器学习提供了一个基于网页的向导，允许你配置这样的实验。在[*第 3 章*](B16777_03_Final_VK_ePub.xhtml#_idTextAnchor045)中，*Azure
    机器学习工作室组件*，你探讨了**Azure 机器学习工作室**网页体验。
- en: 'In this chapter, you will create an AutoML classification model that will predict
    whether a customer will churn or not. This model will be able to predict whether
    a customer will continue being a loyal customer or whether they will terminate
    their active mobile phone contract. You will use a fabricated dataset from a fictional
    telecom company. The dataset shows, for each customer, information about how long
    they have been with the company and how much they are using their active subscription.
    Let''s get started:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一章中，你将创建一个自动化机器学习分类模型，该模型将预测一个客户是否会流失。这个模型能够预测客户是否会继续成为忠实客户，或者他们是否会终止他们的活动手机合同。你将使用来自一个虚构电信公司的虚构数据集。数据集显示了每个客户与公司合作的时长以及他们的活动订阅使用情况。让我们开始吧：
- en: To start the AutoML experiment, you will need to open a browser and navigate
    to the Azure Machine Learning Studio. You will land on the home page, as shown
    in the following screenshot:![Figure 5.1 – Azure Machine Learning Studio home
    screen
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要开始 AutoML 实验，你需要打开浏览器并导航到 Azure 机器学习工作室。你将进入首页，如下图所示：![图 5.1 – Azure 机器学习工作室首页
- en: '](img/B16777_05_001.jpg)'
  id: totrans-20
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_001.jpg)'
- en: Figure 5.1 – Azure Machine Learning Studio home screen
  id: totrans-21
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.1 – Azure 机器学习工作室首页
- en: On the Azure Machine Learning Studio home screen, navigate to the **Author**
    | **Automated ML** section by clicking the **Start now** button under **Automated
    ML**, as highlighted in the preceding screenshot. This will open the **Automated
    ML** home screen, as shown here:![Figure 5.2 – The Automated ML home screen
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Azure 机器学习工作室的首页上，通过点击**自动化机器学习**下方的**立即开始**按钮，进入**作者** | **自动化机器学习**部分，如前面截图所示。这将打开**自动化机器学习**首页，如下图所示：![图
    5.2 – 自动化机器学习首页
- en: '](img/B16777_05_002.jpg)'
  id: totrans-23
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_002.jpg)'
- en: Figure 5.2 – The Automated ML home screen
  id: totrans-24
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.2 – 自动化机器学习首页
- en: On this home screen, you can find the recently executed Automated ML experiments.
    Since this is the first time you are using this workspace, you shouldn't find
    any runs listed here.
  id: totrans-25
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在这个首页上，你可以找到最近执行的自动化机器学习实验。由于这是你第一次使用这个工作区，你应该不会看到任何运行记录。
- en: 'By pressing the **New Automated ML Run** button, you will start the **Create
    a New Automated ML** wizard, as shown here:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击**新建自动化机器学习运行**按钮，你将启动**创建新自动化机器学习**向导，如下所示：
- en: '![Figure 5.3 – Starting the Automated ML wizard'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.3 – 启动自动化机器学习向导'
- en: '](img/B16777_05_003.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16777_05_003.jpg)'
- en: Figure 5.3 – Starting the Automated ML wizard
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.3 – 启动自动化机器学习向导
- en: In this first step of the wizard, named **Select dataset**, you can either select
    an existing dataset or create a new one. From this list, you will be able to see
    the two datasets that you registered in [*Chapter 4*](B16777_04_Final_VK_ePub.xhtml#_idTextAnchor053),
    *Configuring the Workspace*. You will not need those datasets. In the next section,
    you will learn how to create a new dataset to use for the Automated ML experiment
    you are about to perform.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在向导的第一步，名为**选择数据集**，你可以选择一个现有数据集或创建一个新的数据集。从这个列表中，你将能够看到在[*第 4 章*](B16777_04_Final_VK_ePub.xhtml#_idTextAnchor053)中注册的两个数据集，*配置工作区*。你不需要这些数据集。在下一节中，你将学习如何创建一个新的数据集，以便用于即将执行的自动化机器学习实验。
- en: Registering the dataset
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 注册数据集
- en: 'In the **Select dataset** step of the **Automated ML** wizard, you can register
    a new dataset to be used for the AutoML experimentation. Follow these steps to
    register the fabricated churn dataset:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在**自动化机器学习**向导的**选择数据集**步骤中，你可以注册一个新的数据集，用于AutoML实验。按照以下步骤注册虚构的客户流失数据集：
- en: Click on **Create dataset** on the top of the screen.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击屏幕顶部的**创建数据集**。
- en: Select **From web files** from the drop-down menu that appears. This will start
    the **Create dataset from web files** wizard shown in the following screenshot.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从出现的下拉菜单中选择**来自网页文件**。这将启动**从网页文件创建数据集**向导，见下图。
- en: On the first page of the wizard (`churn-dataset`.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向导的第一页（`churn-dataset`）。
- en: c) `Tabular`. This is an option that you cannot change since AutoML currently
    only supports tabular datasets.
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) `表格型`。这是一个无法更改的选项，因为AutoML目前只支持表格型数据集。
- en: 'd) `Dataset to train a model that predicts customer churn`:'
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) `用于训练预测客户流失模型的数据集`：
- en: '![Figure 5.4 – Basic info when creating a dataset from web files'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.4 – 从网页文件创建数据集时的基本信息'
- en: '](img/B16777_05_004.jpg)'
  id: totrans-39
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_004.jpg)'
- en: Figure 5.4 – Basic info when creating a dataset from web files
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.4 – 从网页文件创建数据集时的基本信息
- en: Once you've filled everything in, press **Next**. It will take a while to download
    and parse the file. The wizard will move to the **Settings and preview** screen:![Figure
    5.5 – The Settings and preview screen of the Create dataset from web files wizard
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 填写完所有内容后，点击**下一步**。下载和解析文件需要一段时间。向导将转到**设置和预览**屏幕：![图 5.5 – 从网页文件创建数据集向导的设置和预览屏幕
- en: '](img/B16777_05_005.jpg)'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_005.jpg)'
- en: Figure 5.5 – The Settings and preview screen of the Create dataset from web
    files wizard
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.5 – 从网页文件创建数据集向导的设置和预览屏幕
- en: The steps shown in the preceding screenshot provide important information for
    the demo dataset. The file format of the sample file is automatically detected
    to be the **Parquet** file format. You can modify the selection if needed.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前面截图中显示的步骤提供了演示数据集的重要信息。样本文件的文件格式被自动检测为**Parquet**格式。如果需要，你可以修改选择。
- en: 'The demo dataset consists of seven columns:'
  id: totrans-45
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 演示数据集包含七列：
- en: '**ld** is a sequential record number that is not part of the original Parquet
    file. Auto ML generates this sequence number to let you validate the data you
    can see in the preview window. This column will not be part of the registered
    dataset.'
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ld**是一个顺序记录号，不属于原始Parquet文件。AutoML生成此序列号，以便你验证预览窗口中看到的数据。此列将不包含在注册数据集中。'
- en: '**id** is a string that uniquely identifies each customer in the dataset.'
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**id**是一个字符串，唯一标识数据集中的每个客户。'
- en: '**customer_tenure** is an integer value telling us how long each customer has
    been with the fictional telecom company. The value represents months.'
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**customer_tenure**是一个整数值，告诉我们每个客户在虚构的电信公司服务了多长时间。该值表示月份。'
- en: '**product_tenure** is an integer value that tells us how long a customer has
    owned the currently active subscription. It is measured in months.'
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**product_tenure**是一个整数值，告诉我们客户当前活跃订阅的时长，单位为月。'
- en: '**activity_last_6_month** tells us how many hours the customer has talked on
    the phone over the last 6 months.'
  id: totrans-50
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**activity_last_6_month**告诉我们客户在过去6个月里通话的小时数。'
- en: '**activity_last_12_month** tells us how many hours the customer has talked
    on the phone over the last 12 months.'
  id: totrans-51
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**activity_last_12_month**告诉我们客户在过去12个月里通话的小时数。'
- en: '**churned** is a flag that informs us whether the customer renewed the subscription
    or terminated the active contract. This is the column you will be trying to predict.'
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**churned**是一个标志，告诉我们客户是否续订了订阅或终止了活跃的合同。这是你将要预测的列。'
- en: From this fabricated dataset, the most relevant features for the classification
    model you are trying to build are **customer_tenure**, **product_tenure**, **activity_last_6_month**,
    and **activity_last_12_month**. The **churned** column is the **target** for the
    model you are trying to build. The **id** column allows you to link a model's
    prediction back to the actual customer who may churn.
  id: totrans-53
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 从这个虚构的数据集中，构建你所尝试的分类模型的最相关特征是**customer_tenure**、**product_tenure**、**activity_last_6_month**和**activity_last_12_month**。**churned**列是你试图构建的模型的**目标**。**id**列允许你将模型的预测结果与可能流失的实际客户关联。
- en: Pressing `Date` as the type of a column, you will be able to select whether
    this column is a timestamp, something that will mark the dataset as a time series
    one. `Date` as the column's type. This allows you to define the date pattern that
    should be used to parse the specific column. For example, you can use `%Y-%m-%d`
    to specify that the date is stored in a year-month-day format.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`Date`作为列的类型，你可以选择此列是否为时间戳，这将使数据集标记为时间序列数据集。将`Date`作为列的类型后，你可以定义用于解析特定列的日期模式。例如，你可以使用`%Y-%m-%d`来指定日期的存储格式为年-月-日。
- en: Once you've finished exploring the wizard's **Schema** screen, press **Next**.
    The wizard's **Confirm details** screen provides you with an overview of the new
    dataset you want to register in your workspace, as shown here:![Figure 5.7 – The
    Confirm details page
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成探索向导的**模式**屏幕后，按下**下一步**。向导的**确认详情**页面提供了你想要在工作区中注册的新数据集的概览，如下所示：![图 5.7 –
    确认详情页面
- en: '](img/B16777_05_007.jpg)'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_007.jpg)'
- en: Figure 5.7 – The Confirm details page
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.7 – 确认详情页面
- en: This screen summarizes the dataset information you read about in the *Working
    with datasets* section of [*Chapter 4*](B16777_04_Final_VK_ePub.xhtml#_idTextAnchor053),
    *Configuring the Workspace*. If you select the **Profile this dataset after creation**
    checkbox, you can select a compute target to generate the profile of the newly
    created dataset. You do not need to generate the profile for this dataset since
    it only has 6,720 rows and Azure ML will automatically provide a full profile
    for you.
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此页面总结了你在[*第 4 章*](B16777_04_Final_VK_ePub.xhtml#_idTextAnchor053) *配置工作区*节中阅读的数据集信息。如果你选择了**创建后配置此数据集**复选框，你可以选择一个计算目标来生成新创建的数据集的配置文件。由于该数据集仅有
    6,720 行，Azure ML 会自动为你提供完整的配置文件，因此无需手动生成。
- en: Click the **Create** button to complete the wizard.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建**按钮以完成向导。
- en: Now that you have registered `churn-dataset`, you can continue with the AutoML
    wizard, where you will select the newly registered dataset, configure the experiment
    parameters, and kick off the AutoML process, something you will do in the next
    section.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经注册了`churn-dataset`，可以继续进行 AutoML 向导，在此步骤中，你将选择新注册的数据集、配置实验参数并启动 AutoML
    过程，这将在下一节进行。
- en: Returning to the AutoML wizard
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 返回到 AutoML 向导
- en: 'Now that you have created `churn-dataset`, you can continue with the AutoML
    wizard. The wizard contains three steps, as shown in the following diagram:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经创建了`churn-dataset`，可以继续进行 AutoML 向导。向导包含三个步骤，如下图所示：
- en: '![Figure 5.8 – AutoML wizard steps'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.8 – AutoML 向导步骤'
- en: '](img/B16777_05_008.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16777_05_008.jpg)'
- en: Figure 5.8 – AutoML wizard steps
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.8 – AutoML 向导步骤
- en: Let's begin with the steps!
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始步骤吧！
- en: As the first step, select `churn-dataset`, which you created in the previous
    section, *Registering the dataset*, and click **Next**, as shown here:![Figure
    5.9 – The Select dataset step of the Create a new Automated ML run wizard
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，选择在上一节*注册数据集*中创建的`churn-dataset`，然后点击**下一步**，如图所示：![图 5.9 – 创建新的自动化 ML 运行向导的选择数据集步骤
- en: '](img/B16777_05_009.jpg)'
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_009.jpg)'
- en: Figure 5.9 – The Select dataset step of the Create a new Automated ML run wizard
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.9 – 创建新自动化 ML 运行向导的选择数据集步骤
- en: In the `churn-automl-experiment` for `churned` column. Based on the type of
    the target column, the wizard will automatically select the best task for this
    column, as you will see in the next wizard step.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`churn-automl-experiment`中，选择`churned`列。根据目标列的类型，向导将自动选择该列的最佳任务，如你将在下一个向导步骤中看到的。
- en: '`gpu-cluster` here, which you created in the *Compute clusters* section of
    [*Chapter 4*](B16777_04_Final_VK_ePub.xhtml#_idTextAnchor053), *Configuring the
    Workspace*. If you don''t have a cluster registered in your workspace, you can
    use a compute instance or you can start the dedicated wizard by clicking on the
    `gpu-cluster`. By default, free trial subscriptions do not allow you to provision
    GPU computes. For this experiment, you can select CPU-based clusters instead of
    GPU-based ones.'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这里是`gpu-cluster`，你在[*第 4 章*](B16777_04_Final_VK_ePub.xhtml#_idTextAnchor053)
    *配置工作区*节中创建的集群。如果你在工作区中没有注册集群，可以使用计算实例，或者通过点击`gpu-cluster`启动专用向导。默认情况下，免费试用订阅不允许配置
    GPU 计算资源。对于此实验，你可以选择基于 CPU 的集群，而非基于 GPU 的集群。
- en: Once you have configured the run details, click on the **Next** button.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置运行详情后，点击**下一步**按钮。
- en: The next page of the wizard is the **Select task and settings** page, as shown
    here:![Figure 5.11 – The Create a new Automated ML run wizard – Select task type
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向导的下一页是**选择任务和设置**页面，如下图所示：![图 5.11 – 创建新的自动化机器学习运行向导 – 选择任务类型
- en: '](img/B16777_05_011.jpg)'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_011.jpg)'
- en: Figure 5.11 – The Create a new Automated ML run wizard – Select task type
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.11 – 创建新的自动化机器学习运行向导 – 选择任务类型
- en: 'In this step, you can configure the following:'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此步骤中，你可以配置以下内容：
- en: 'a) **Select task type**: AutoML currently supports three types of tasks:'
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) **选择任务类型**：AutoML 当前支持三种类型的任务：
- en: '**Classification**: The produced model can predict the category a record belongs
    to. A category can be anything, such as a yes or no **Boolean** value or a blue,
    green, or yellow color value. In our case, you are trying to predict if the customer
    is going to churn, which can be answered with a yes or a no.'
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分类**：生成的模型可以预测记录所属的类别。类别可以是任何东西，例如是或否的**布尔**值，或者蓝色、绿色或黄色的颜色值。在我们的例子中，你正在尝试预测客户是否会流失，这个问题可以通过“是”或“否”来回答。'
- en: '**Regression**: Use regression models when you want to predict a numeric value,
    such as the price of an apartment or the diabetes disease level. We will look
    at this in [*Chapter 8*](B16777_08_Final_VK_ePub.xhtml#_idTextAnchor117), *Experimenting
    with Python Code*.'
  id: totrans-79
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**回归**：当你想预测一个数值时，比如公寓的价格或糖尿病的疾病水平，可以使用回归模型。我们将在[*第 8 章*](B16777_08_Final_VK_ePub.xhtml#_idTextAnchor117)，*使用
    Python 代码进行实验*中详细讨论。'
- en: '**Time series forecasting**: You usually use this type of model to predict
    time series values such as a stock''s price while considering the progress of
    the value over time. This type of model is a specialization on top of the regression
    models. This means that all regression models can be used, but there are also
    a couple of more specialized algorithms such as Facebook''s **Prophet** algorithm
    or the **Auto-Regressive Integrated Moving Average** (**ARIMA**) technique.'
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**时间序列预测**：通常使用这种类型的模型来预测时间序列值，比如股票的价格，同时考虑值随时间的变化。这种类型的模型是回归模型的一个专项扩展。这意味着所有回归模型都可以使用，但也有一些更专业的算法，比如
    Facebook 的**Prophet**算法或**自回归积分滑动平均**（**ARIMA**）技术。'
- en: Depending on the target column you selected, the wizard will automatically guess
    the task you are trying to perform. In our case, it selected **Classification**.
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 根据你选择的目标列，向导将自动猜测你要执行的任务。在我们的例子中，它选择了**分类**。
- en: 'b) **View additional configuration settings**: Depending on the task type you
    selected, you can configure various settings, including the target metric to be
    used to evaluate the models and the exit criteria that will terminate the search
    for the best model. Depending on the task''s type, the options on that wizard
    page change. You can see some of these options in the following diagram. You will
    visit this part of the wizard in *Step 5*:'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) **查看额外的配置设置**：根据你选择的任务类型，你可以配置各种设置，包括用于评估模型的目标指标以及终止模型搜索的退出标准。根据任务类型的不同，向导页面上的选项会有所变化。你可以在下图中看到一些选项。你将在*步骤
    5*中访问这一部分：
- en: '![Figure 5.12 – Configuration settings depending on the selected task type.'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.12 – 根据选择的任务类型配置设置'
- en: '](img/B16777_05_012.jpg)'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_012.jpg)'
- en: Figure 5.12 – Configuration settings depending on the selected task type.
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.12 – 根据选择的任务类型配置设置
- en: 'c) **View featurization settings**: This allows you to configure various operations
    regarding the features that the model will use to make its prediction. In this
    section, you can exclude features such as row unique ID or irrelevant information
    to speed up the training process and reduce the size of the final model. You can
    also specify the type of each feature and the imputation function, which takes
    care of the missing values in the dataset. You will visit this section of the
    wizard in *Step 6*.'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) **查看特征化设置**：这允许你配置与模型预测相关的特征操作。在此部分，你可以排除一些特征，比如行唯一 ID 或无关信息，以加快训练过程并减小最终模型的大小。你还可以指定每个特征的类型和插补函数，后者负责处理数据集中的缺失值。你将在*步骤
    6*中访问此部分。
- en: By clicking on `auto` in most cases unless you have a reason to modify it. By
    default, 10-folds cross-validation is used if you have fewer than 1,000 rows,
    3-folds is used if you have more than 1,000 and fewer than 20,000 rows, and if
    you have more than 20,000 rows, the dataset is split into 90% training data and
    10% validation data.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 除非有理由修改，否则通常可以点击`auto`。默认情况下，如果行数少于1,000，则使用10折交叉验证；如果行数在1,000和20,000之间，则使用3折交叉验证；如果行数超过20,000，则数据集会被划分为90%的训练数据和10%的验证数据。
- en: '`0.5`, which is half an hour or 30 minutes. You can leave the rest of the options
    as is, as shown in the preceding screenshot. Click **Save** and return to the
    **Select task type** page of the wizard you saw in *Step 4*.'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`0.5`，即半小时或30分钟。你可以保留其余选项不变，如前面的截图所示。点击**保存**，返回到你在*步骤 4*中看到的**选择任务类型**页面。'
- en: By clicking on **View featurization settings**, the **Featurization** screen
    will open, as shown here:![Figure 5.14 – The Featurization view on the create
    AutoML wizard
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**查看特征化设置**，将打开**特征化**屏幕，如下所示：![图5.14 – 创建AutoML向导中的特征化视图
- en: '](img/B16777_05_014.jpg)'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_014.jpg)'
- en: Figure 5.14 – The Featurization view on the create AutoML wizard
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图5.14 – 创建AutoML向导中的特征化视图
- en: 'On this screen, you can define actions that influence the data preparation
    phase for the training process. The following options can be configured:'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此屏幕上，你可以定义影响训练过程数据准备阶段的操作。可以配置以下选项：
- en: '**Included**: You can exclude columns that should not be considered by the
    algorithm. The target column cannot be excluded.'
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**包含**：你可以排除不应被算法考虑的列。目标列无法排除。'
- en: '**Feature type**: By default, the **Auto** value is selected, which will automatically
    detect the type of each column you have in the dataset. It can be one of the following
    types: **Numeric**, **DateTime**, **Categorical**, **Categorical hash**, or **Text**.
    If you want, you can manually configure a column to be one of the available types.'
  id: totrans-94
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**特征类型**：默认情况下，选择了**自动**值，它会自动检测数据集中每一列的类型。类型可以是以下之一：**数值型**、**日期时间型**、**类别型**、**类别哈希型**或**文本型**。如果你愿意，也可以手动配置某一列为可用的类型之一。'
- en: '**Impute with**: If you have missing values in your dataset, this option will
    do in-place imputation based on the selected methodology. The options you can
    choose from are **Auto**, which is the default one, **Most frequent**, and **Fill
    with constant**. Especially for **Numeric** features, you can also use the **Mean**
    or the **Median** imputation strategy.'
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用填充**：如果数据集中有缺失值，该选项将根据所选方法进行就地填充。你可以选择的选项有**自动**（默认选项）、**最常见值**和**填充常数**。特别是对于**数值型**特征，你还可以使用**均值**或**中位数**填充策略。'
- en: Important note
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: Imagine that you had a product ID feature that explicitly mentioned the subscription
    product each customer is registered for. This feature would have numeric values,
    such as 1,055 and 1,060\. This feature could accidentally be marked as a numeric
    feature, even though it is a categorical one. If you were missing values in the
    training dataset, the automatic approach may have imputed missing values with
    the average product ID, which doesn't make any sense. AutoML is smart enough to
    understand that if a numeric feature only has a few unique values repeating, this
    feature may be a categorical one, but you can explicitly assist the machine learning
    models by marking them as **Categorical** regarding **Feature type**.
  id: totrans-97
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: 假设你有一个产品ID特征，明确说明每个客户注册的订阅产品。该特征将具有诸如1,055和1,060之类的数值。即使该特征实际上是类别型的，它可能会被错误地标记为数值型特征。如果训练数据集中缺少某些值，自动方法可能会用平均产品ID填充缺失值，这显然没有意义。AutoML足够智能，能够理解如果一个数值型特征只有几个唯一值重复出现，则该特征可能是类别型的，但你可以通过将其标记为**类别型**来明确协助机器学习模型进行**特征类型**配置。
- en: On this wizard page, you should exclude the **id** feature. The **id** feature
    provides information on who the actual customer is. It doesn't provide any relevant
    information to the classification problem, so it should be excluded to save on
    computational resources. Click **Save** to return to the **Select task type**
    page of the wizard you saw in *Step 4*.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个向导页面上，你应该排除**id**特征。**id**特征提供了有关实际客户的信息，但它与分类问题无关，因此应该排除，以节省计算资源。点击**保存**，返回到你在*步骤
    4*中看到的**选择任务类型**页面。
- en: By clicking **Finish**, as shown in *Figure 5.11*, you can finalize the configuration
    of your AutoML experiment, and the run will automatically start. The browser will
    redirect you to the AutoML run execution page, which allows you to monitor the
    AutoML training process and review the training results. You are going to explore
    that page in the next section.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 通过点击**完成**，如*图 5.11*所示，你可以完成 AutoML 实验的配置，运行将自动开始。浏览器将重定向到 AutoML 运行执行页面，你可以在该页面监控
    AutoML 训练过程并查看训练结果。在下一节中，你将探讨该页面。
- en: Monitoring the execution of the experiment
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控实验执行
- en: 'In the previous section, *Configuring an Automated ML experiment*, you submitted
    an AutoML experiment to execute on a remote compute cluster. Once you have submitted
    the job, your browser should redirect you to a page similar to the following:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在前一节中，*配置自动化 ML 实验*，你提交了一个 AutoML 实验以在远程计算集群上执行。一旦你提交了作业，浏览器应该会将你重定向到一个类似于以下的页面：
- en: '![Figure 5.15 – Running a new Automated ML run for the first time since the
    run finished'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.15 – 自运行完成以来第一次运行新的自动化 ML 实验'
- en: '](img/B16777_05_015.jpg)'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16777_05_015.jpg)'
- en: Figure 5.15 – Running a new Automated ML run for the first time since the run
    finished
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.15 – 自运行完成以来第一次运行新的自动化 ML 实验
- en: 'At the top of the page, the name of the run of the experiment is autogenerated.
    In the preceding screenshot, it is called `AutoML_05558d1d-c8ab-48a5-b652-4d47dc102d29`.
    By clicking the pencil icon, you can edit this name and make it something more
    memorable. Change the name to `my-first-experiment-run`. Right below the run''s
    name, you can click on one of the following commands:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在页面顶部，实验运行的名称是自动生成的。在前面的截图中，名称是`AutoML_05558d1d-c8ab-48a5-b652-4d47dc102d29`。点击铅笔图标，你可以编辑此名称并将其更改为更易记的名称。将名称更改为`my-first-experiment-run`。在运行名称下方，你可以点击以下命令之一：
- en: '**Refresh**: This will refresh the information provided on the page. While
    running an experiment, you can get the latest and greatest information.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**刷新**：这将刷新页面上提供的信息。在运行实验时，你可以获得最新的、最准确的信息。'
- en: '**Generate notebook**: This will create a notebook with all the Python code
    that is needed to run the same experiment using the Azure ML SDK. You will learn
    more about the code needed to run an AutoML experiment through code in [*Chapter
    8*](B16777_08_Final_VK_ePub.xhtml#_idTextAnchor117), *Experimenting with Python
    Code*.'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生成笔记本**：这将创建一个包含所有所需 Python 代码的笔记本，用于使用 Azure ML SDK 运行相同的实验。你将在[*第8章*](B16777_08_Final_VK_ePub.xhtml#_idTextAnchor117)《使用
    Python 代码实验》中了解更多关于运行 AutoML 实验所需代码的内容。'
- en: '**Cancel**: This will cancel the current run. This option is only available
    if the experiment is still running.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**取消**：这将取消当前的运行。仅当实验仍在运行时，此选项才可用。'
- en: Important note
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: When you cancel a run, it may take a while until the run is canceled. By clicking
    on the **Refresh** button, you can check the progress of the cancelation process.
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当你取消运行时，可能需要一段时间才能完成取消操作。你可以点击**刷新**按钮，查看取消过程的进度。
- en: '**Delete**: This deletes the selected run. It is only enabled if the run has
    been canceled or has finished executing.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**删除**：这将删除所选的运行记录。仅在运行已取消或已完成执行时才可启用。'
- en: 'The run experiment page provides a lot of information regarding the entire
    process and is structured using tabs. By default, you start from the tab called
    **Details**. In this tab, you will find the following important information:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 运行实验页面提供了关于整个过程的大量信息，并通过标签进行结构化。默认情况下，你将从名为**详细信息**的标签开始。在此标签中，你将找到以下重要信息：
- en: 'On the **Properties** box, which is located on the left of the preceding screenshot,
    the most important information is located in the following fields:'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在前面截图左侧的**属性**框中，最重要的信息位于以下字段：
- en: a) **Status**, which describes the state of the current run. This can be running,
    canceled, errored, or completed.
  id: totrans-114
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) **状态**，描述当前运行的状态。可以是正在运行、已取消、出错或已完成。
- en: b) **Compute target** is where the run is executed.
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) **计算目标**是运行所在的计算位置。
- en: c) **Raw JSON** is a link that allows you to review all the configuration information
    of the current run in a machine-readable format.
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) **原始 JSON** 是一个链接，允许你以机器可读格式查看当前运行的所有配置信息。
- en: In the **Run summary** box on the right, you will find **Task type**, which
    is the type of model you are training. By clicking on **View configuration settings**,
    you can get a summary of the configuration parameters for the current experiment.
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在右侧的**运行摘要**框中，您将找到**任务类型**，即您正在训练的模型类型。点击**查看配置设置**，您可以查看当前实验的配置参数摘要。
- en: The **Description** box allows you to document the hypothesis you are evaluating
    in the current experiment. By clicking the pencil icon, you can add a description
    of your experiment run, information that will allow you to recollect what you
    were looking for with this experiment and what the outcome was.
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**描述**框允许您记录当前实验中正在评估的假设。点击铅笔图标，您可以添加实验运行的描述信息，这些信息将帮助您回忆在此实验中要寻找的内容以及结果。'
- en: The second tab of the run page is named **Data guardrails**. This tab provides
    you with detailed qualitative and quantitative information on the dataset you
    are using in your experiment. Depending on the task type, you will have different
    types of validation being performed. The status of each validation is **Passed**
    if everything was OK, **Failed** if your dataset has an issue that needs to be
    resolved, or **Done** if AutoML found an issue with your dataset and fixed it
    for you. In the **Done** cases, you will be able to see additional information
    on what was fixed in your dataset by clicking on the **+View additional details**
    button.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 运行页面的第二个选项卡名为**数据防护**。此选项卡提供关于您在实验中使用的数据集的详细定性和定量信息。根据任务类型，您将执行不同类型的验证。如果一切正常，则每个验证的状态为**已通过**；如果数据集存在需要解决的问题，则为**已失败**；如果AutoML发现数据集问题并已为您修复，则为**已完成**。在**已完成**的情况下，您可以通过点击**+查看详细信息**按钮查看AutoML修复数据集时的附加信息。
- en: 'The third tab is called **Model** and contains a list of all the models AutoML
    has trained so far, as seen in *Figure 5.16*. The model with the best metric score
    will be listed at the top. The table shows **Algorithm name**, the specific model''s
    explanation results (if they are available) (**Explained**), the model''s score
    (**Accuracy**, in this case), the percentage of the data used to train the model
    (**Sampling**), and information regarding when the model was trained and how long
    it took (the **Created** and **Duration** columns). If you select a model from
    the list, the following three commands will be enabled:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 第三个选项卡称为**模型**，其中包含AutoML迄今为止训练的所有模型列表，如*图5.16*所示。具有最佳指标分数的模型将列在顶部。表格显示**算法名称**、特定模型的解释结果（如果有）（**已解释**）、模型的分数（此处为**准确率**）、用于训练模型的数据百分比（**采样**）、以及模型训练的时间和持续时间信息（**创建**和**持续时间**列）。如果您从列表中选择一个模型，将启用以下三个命令：
- en: '**Deploy** initiates the deployment of the selected model, which you will learn
    about in the next section.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**部署**启动选定模型的部署，您将在下一节了解有关部署的内容。'
- en: '`model.pkl`, which includes the actual trained model and all supporting files
    needed to perform inference.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model.pkl`，其中包含实际训练的模型和执行推理所需的所有支持文件。'
- en: '**Explain model** kicks off the **Explanations** wizard, where you need to
    select a **compute cluster** to calculate the model explanations for the specific
    model. By default, AutoML will explain the best model, but you may want to explain
    additional models to compare them. Once the explanations have been calculated,
    you can view them by clicking on **View explanation** in the **Explained** column.
    This will open the **Explanations** tab of the selected model, which has populated
    the report. You will learn more about model interpretability in [*Chapter 10*](B16777_10_Final_VK_ePub.xhtml#_idTextAnchor147),
    *Understanding Model Results*.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**解释模型**启动**解释**向导，在该向导中，您需要选择一个**计算集群**来计算特定模型的解释。默认情况下，AutoML将解释最佳模型，但您可能希望解释额外的模型以进行比较。一旦计算出解释，您可以通过点击**查看解释**在**已解释**列中查看它们。这将打开所选模型的**解释**选项卡，其中会显示报告。您将通过[*第10章*](B16777_10_Final_VK_ePub.xhtml#_idTextAnchor147)《理解模型结果》进一步了解模型可解释性。'
- en: The fourth tab on the main page, called **Outputs + logs**, displays the outputs
    and log of the specific run in a simple files explorer. These logs are the ones
    of the overall AutoML process. If you want to view the logs of a specific model
    training process, you will need to select the model from the **Models** tab and
    then visit the **Outputs + logs** section of that child run. The files explorer
    that's available in this tab allows you to navigate through the folder structure
    on the left-hand side. If you select a file, its contents will be displayed on
    the right-hand side.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 主页面上的第四个标签页，称为**输出 + 日志**，以简单的文件浏览器显示特定运行的输出和日志。这些日志是整个AutoML过程的日志。如果你想查看特定模型训练过程的日志，你需要从**模型**标签页中选择该模型，然后访问该子运行的**输出
    + 日志**部分。该标签页中的文件浏览器允许你浏览左侧的文件夹结构。如果选择了一个文件，其内容将在右侧显示。
- en: So far, you have managed to train a couple of models and see the best model
    to predict whether a customer will churn or not. In the next section, you will
    learn how to operationalize this model with only a couple of clicks.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，你已经成功训练了一些模型，并查看了最佳模型来预测客户是否会流失。在下一节中，你将学习如何仅通过几个点击操作将此模型投入使用。
- en: Deploying the best model as a web service
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将最佳模型作为 Web 服务进行部署
- en: 'In the previous section, you navigated around the run experiment page while
    reviewing the information related to the run execution and the results of the
    exploration, which are the trained models. In this section, we will revisit the
    **Models** tabs and start deploying the best model as a web service to be able
    to make real-time inferences. Navigate to the run''s details page, as shown in
    *Figure 5.15*. Let''s get started:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，你浏览了运行实验页面，回顾了与运行执行相关的信息以及探索结果，即经过训练的模型。在本节中，我们将重新访问**模型**标签页，并开始将最佳模型作为
    Web 服务进行部署，以便进行实时推理。导航到运行的详情页面，如*图 5.15*所示。让我们开始吧：
- en: Click on the **Models** tab. You should see a page similar to the one shown
    here:![Figure 5.16 – The Models tab as a starting point for deploying a model
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**模型**标签页。你应该会看到类似于这里显示的页面：![图 5.16 – 模型标签页作为部署模型的起点
- en: '](img/B16777_05_016.jpg)'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_016.jpg)'
- en: Figure 5.16 – The Models tab as a starting point for deploying a model
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.16 – 模型标签页作为部署模型的起点
- en: In this list, you can select any model you want to deploy. Select the row with
    the best model, as shown in the preceding screenshot. Click the **Deploy** command
    at the top of the list. The **Deploy a model** dialog will appear, as shown here:![Figure
    5.17 – The Deploy a model dialogue
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此列表中，你可以选择任何你想要部署的模型。选择包含最佳模型的行，如前面的截图所示。点击列表顶部的**部署**命令。将出现**部署模型**对话框，如此处所示：![图
    5.17 – 部署模型对话框
- en: '](img/B16777_05_017.jpg)'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_017.jpg)'
- en: Figure 5.17 – The Deploy a model dialogue
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.17 – 部署模型对话框
- en: In the `myfirstmlwebservice`.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`myfirstmlwebservice`中。
- en: '**Compute type**: There are two types you can choose from:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**计算类型**：你可以选择两种类型：'
- en: '**Azure Kubernetes Cluster** (**AKS**): This option should be selected when
    you want to deploy your model for a production workload and are handling multiple
    requests in parallel. This option allows for both key-based and token based authentications
    if you want to protect the endpoint. It also supports using **Field Programmable
    Gate Arrays** (**FPGAs**) for even faster model inferences. In this case you would
    also need to specify the **Compute name** property of the AKS cluster where you
    want to deploy the model. The list should contain all inference clusters you may
    have registered in [*Chapter 4*](B16777_04_Final_VK_ePub.xhtml#_idTextAnchor053),
    *Configuring the Workspace*.'
  id: totrans-136
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure Kubernetes 集群**（**AKS**）：当你想为生产工作负载部署模型并且处理多个并行请求时，应该选择此选项。该选项支持基于密钥和基于令牌的身份验证，如果你想保护端点，可以使用它。如果你希望更快地进行模型推理，它还支持使用**现场可编程门阵列**（**FPGAs**）。在这种情况下，你还需要指定要部署模型的
    AKS 集群的**计算名称**属性。该列表应包含你在[*第 4 章*](B16777_04_Final_VK_ePub.xhtml#_idTextAnchor053)
    *配置工作区*中可能注册的所有推理集群。'
- en: '**Azure Container Instance**: If you plan to do functional testing or you want
    to deploy a model for the development environments, you can deploy the web service
    as a single Azure Container Instance. This compute type is cheaper, but it doesn''t
    scale and it only supports key-based authentication. For this book, you can select
    this type to deploy the model.'
  id: totrans-137
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Azure 容器实例**：如果你计划进行功能测试，或者想在开发环境中部署模型，你可以将 Web 服务作为单一的 Azure 容器实例进行部署。这种计算类型较为便宜，但不支持扩展，并且只支持基于密钥的认证。对于本书内容，你可以选择这种类型来部署模型。'
- en: By pressing **Deploy**, you can start deploying the model.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击**部署**，你可以开始部署模型。
- en: 'In the top-right corner of your browser, a popup window will appear, as shown
    in the following screenshot, letting you know that your model has started being
    deployed:'
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在浏览器的右上角，将会出现一个弹出窗口，如下图所示，告知你模型已开始部署：
- en: '![Figure 5.18 – Endpoint deployment window – deployment InProgress'
  id: totrans-140
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 5.18 – 端点部署窗口 – 部署进行中'
- en: '](img/B16777_05_018.jpg)'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_018.jpg)'
- en: Figure 5.18 – Endpoint deployment window – deployment InProgress
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.18 – 端点部署窗口 – 部署进行中
- en: The pop-up window will quickly disappear, but you can revisit it by clicking
    on the notification **bell** icon in the top-right corner, as shown here:![Figure
    5.19 – Azure Machine Learning Studio taskbar in the top-right corner
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 弹出窗口会迅速消失，但你可以通过点击右上角的通知**铃铛**图标重新查看，如下图所示：![图 5.19 – Azure 机器学习工作室右上角的任务栏
- en: '](img/B16777_05_019.jpg)'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_019.jpg)'
- en: Figure 5.19 – Azure Machine Learning Studio taskbar in the top-right corner
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.19 – Azure 机器学习工作室右上角的任务栏
- en: The model will take a couple of minutes to deploy. By looking at your notifications,
    you can check the progress of your deployment. If the notification turns green,
    as shown in the following screenshot, then the deployment is completed:![Figure
    5.20 – Endpoint deployment window – deployment Completed
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型部署需要几分钟时间。你可以查看通知来检查部署进度。如果通知变为绿色，如下图所示，则表示部署已完成：![图 5.20 – 端点部署窗口 – 部署完成
- en: '](img/B16777_05_020.jpg)'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_020.jpg)'
- en: Figure 5.20 – Endpoint deployment window – deployment Completed
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.20 – 端点部署窗口 – 部署完成
- en: By clicking on the **Deploy details** link in the notification, your browser
    will redirect you to the endpoint page of the deployed model, as shown here:![Figure
    5.21 – Endpoint page of the deployed model
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击通知中的**部署详情**链接，浏览器将会把你重定向到已部署模型的端点页面，如下图所示：![图 5.21 – 已部署模型的端点页面
- en: '](img/B16777_05_021.jpg)'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_021.jpg)'
- en: Figure 5.21 – Endpoint page of the deployed model
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.21 – 已部署模型的端点页面
- en: Important note
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: There are multiple ways you can reach the endpoint page of your model. For example,
    you can see a list of all the published endpoints by going to the **Assets** |
    **Endpoints** menu in Azure ML Studio. To reach the same page, select the endpoint
    you want to inspect.
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 有多种方法可以访问模型的端点页面。例如，你可以通过进入 Azure ML Studio 中的 **资产** | **端点** 菜单来查看所有已发布的端点列表。要到达相同的页面，请选择你要检查的端点。
- en: 'The endpoint page of the deployed model has a similar tab-based structure to
    the run experiment page. The first tab is called **Details** and provides information
    regarding the deployment of the model. Out of them, the most important ones are
    located in the **Attributes** box shown in the preceding screenshot. They are
    as follows:'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 已部署模型的端点页面与实验运行页面类似，采用基于标签的结构。第一个标签叫做 **详情**，提供有关模型部署的信息。其中，最重要的信息位于前面截图中的 **属性**
    区域，具体如下：
- en: '**Service ID** is the name of the service you specified in *Step 3* of the
    deployment wizard.'
  id: totrans-155
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**服务 ID** 是你在部署向导的 *步骤 3* 中指定的服务名称。'
- en: '**Deployment state** provides the state of the deployed or to-be-deployed model.
    There are five states the endpoint can be in. You can find more information regarding
    states and potential issues in the *Further reading* section of this chapter.'
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**部署状态** 显示已部署或待部署模型的状态。端点可以处于五种状态。你可以在本章的 *进一步阅读* 部分找到更多关于状态及潜在问题的信息。'
- en: '**Rest endpoint** is the link you can copy into an application''s code to call
    the deployed model via a REST API.'
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**REST 端点**是你可以复制到应用程序代码中的链接，用来通过 REST API 调用已部署的模型。'
- en: The second tab is called **Test** and allows you to test the deployed model.
    By default, you get the **Fields** mode, which is a form containing all the inputs
    your model is expecting, as shown here:![Figure 5.22 – The endpoint page of the
    deployed model
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第二个标签页叫做**测试**，允许你测试已部署的模型。默认情况下，你会看到**字段**模式，这是一个表单，包含模型期望的所有输入，如下所示：![图 5.22
    – 已部署模型的端点页面
- en: '](img/B16777_05_022.jpg)'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_022.jpg)'
- en: Figure 5.22 – The endpoint page of the deployed model
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.22 – 已部署模型的端点页面
- en: If you want to perform a mini-batch inference, meaning that you want to send
    multiple records at once, you can switch to **CSV** from the top-right corner.
    In that mode, you can copy the contents of a CSV file into the text box that will
    appear and hit the **Test** button.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你想执行小批量推理，即一次发送多个记录，你可以从右上角切换到**CSV**模式。在此模式下，你可以将 CSV 文件的内容复制到将出现的文本框中，然后点击**测试**按钮。
- en: In either mode, once you hit the **Test** button, the input data will be submitted
    to the REST API and results will be provided.
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在任意模式下，一旦你点击**测试**按钮，输入数据将被提交到 REST API，并且会返回结果。
- en: The third tab of the endpoint page is called `swagger.json`, which is automatically
    generated in the endpoint. This file describes the expected inputs and outputs
    of the REST APIs and is commonly used by web developers to provide documentation
    on the REST endpoints they produce.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 端点页面的第三个标签页叫做`swagger.json`，它是自动生成的，位于端点中。这个文件描述了 REST API 的预期输入和输出，通常由 web
    开发人员使用来提供有关他们生产的 REST 端点的文档。
- en: Finally, the **Deployment logs** tab shows a detailed log of the deployment
    of the model. You can troubleshoot potential deployment issues using this tab.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，**部署日志**标签页展示了模型部署的详细日志。你可以使用这个标签页来排查潜在的部署问题。
- en: Congratulations – you have successfully deployed your very own real-time endpoint
    that makes inferences on whether a customer will churn or not! In the next section,
    you will learn about the artifacts that are created when your model is deployed.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜你 – 你已经成功部署了自己的实时端点，用于推断客户是否会流失！在下一节中，你将了解模型部署时创建的工件。
- en: Understanding the deployment of the model
  id: totrans-166
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解模型的部署
- en: In the previous section, you deployed a model as a REST endpoint. In this section,
    you will understand what happened behind the scenes and discover the artifacts
    that were generated in the process.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一节中，你将模型作为 REST 端点进行部署。在这一节中，你将了解幕后发生了什么，并发现部署过程中生成的工件。
- en: 'You started from the list of models that the AutoML process has trained. In
    that list, you selected a model and clicked on the **Deploy** command. By doing
    that, you registered the selected model in the Azure ML workspace and once that
    was done, the process continued with deploying the endpoint, as shown in the following
    diagram:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 你从 AutoML 训练出的模型列表开始。在这个列表中，你选择了一个模型并点击了**部署**命令。通过这样做，你将选定的模型注册到了 Azure ML
    工作区，并且一旦完成，过程就继续进行，部署端点，正如下图所示：
- en: '![Figure 5.23 – From AutoML model list to endpoint deployment'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.23 – 从 AutoML 模型列表到端点部署'
- en: '](img/B16777_05_023.jpg)'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16777_05_023.jpg)'
- en: Figure 5.23 – From AutoML model list to endpoint deployment
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.23 – 从 AutoML 模型列表到端点部署
- en: 'Model registration creates a versioned record within the Azure ML workspace
    that allows you to keep track of what datasets were used to train the specific
    model and where the specific model was deployed. You will learn more about model
    registration in [*Chapter 12*](B16777_12_Final_VK_ePub.xhtml#_idTextAnchor171),
    *Operationalizing Models with Code*. Let''s take a look:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 模型注册在 Azure ML 工作区内创建了一个版本化记录，允许你跟踪用于训练特定模型的数据集以及该模型部署的位置。你将在[*第 12 章*](B16777_12_Final_VK_ePub.xhtml#_idTextAnchor171)，“*用代码实现模型运作*”中了解更多有关模型注册的信息。让我们来看看：
- en: To see this model registration, in Azure ML Studio, navigate to **Assets** |
    **Models**. You will end up on the **Model List** page, as shown here:![Figure
    5.24 – The Model List page
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要查看这个模型注册，在 Azure ML Studio 中，导航至**资产** | **模型**。你将进入**模型列表**页面，如下所示：![图 5.24
    – 模型列表页面
- en: '](img/B16777_05_024.jpg)'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_024.jpg)'
- en: Figure 5.24 – The Model List page
  id: totrans-175
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.24 – 模型列表页面
- en: The **Model List** page lists all registered models within the Azure ML workspace.
    These are the models that are being tracked by the workspace. Each model has a
    unique name. You can have multiple versions of the same model, something that
    automatically happens when you try to register a model with the same name. The
    model list allows you to select a model and perform various actions on it, such
    as deleting and deploying it.
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**模型列表**页面列出了 Azure ML 工作区中所有注册的模型。这些是由工作区跟踪的模型。每个模型都有一个唯一名称。您可以拥有同一模型的多个版本，当您尝试注册具有相同名称的模型时，这将自动发生。模型列表允许您选择一个模型并对其执行各种操作，如删除和部署它。'
- en: Important note
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要提示
- en: You can only delete a registered model if it is not being used by any endpoint.
  id: totrans-178
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 只有当注册的模型没有被任何端点使用时，您才能删除它。
- en: By clicking on the **Name** property of a model, you will end up on the details
    page of the selected registered model, as shown here:![Figure 5.25 – Registered
    model details page
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击模型的**名称**属性后，您将进入所选注册模型的详细信息页面，如下所示：![图 5.25 – 注册模型详细信息页面
- en: '](img/B16777_05_025.jpg)'
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_025.jpg)'
- en: Figure 5.25 – Registered model details page
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.25 – 注册模型详细信息页面
- en: Here, you can get the general details regarding the model, such as which run
    trained the specific model, what framework was used, and the experiment name where
    this run is registered. Note that since this model was trained using AutoML, the
    framework is the generic AutoML one. In [*Chapter 12*](B16777_12_Final_VK_ePub.xhtml#_idTextAnchor171),
    *Operationalizing Models with Code*, you will be able to register your own models
    and specify the framework you used to train the model.
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在这里，您可以获取有关模型的一般信息，比如是哪个运行训练了特定模型，使用了什么框架，以及该运行注册的实验名称。请注意，由于该模型是使用 AutoML 训练的，因此其框架是通用的
    AutoML 框架。在[*第 12 章*](B16777_12_Final_VK_ePub.xhtml#_idTextAnchor171)，《通过代码实现模型运营》中，您将能够注册自己的模型，并指定您用来训练模型的框架。
- en: In the **Artifacts** tab, you will find the **model.pkl** file, which contains
    the trained model. In the **Explanations** and **Fairness** tabs, you can view
    the interpretability results, if they have been generated for the specific model.
    You will learn more about model interpretability in [*Chapter 10*](B16777_10_Final_VK_ePub.xhtml#_idTextAnchor147),
    *Understanding Model Results*. In the **Datasets** tab, you can see a reference
    to the specific version of the dataset that you used while configuring the AutoML
    experiment. This allows you to have lineage between the dataset that was used
    for training and the models you have deployed.
  id: totrans-183
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在**工件**标签中，您将找到**model.pkl**文件，其中包含训练好的模型。在**解释**和**公平性**标签中，如果已经为特定模型生成了解释性结果，您可以查看这些结果。您将在[*第
    10 章*](B16777_10_Final_VK_ePub.xhtml#_idTextAnchor147)，《理解模型结果》中深入了解模型解释性。在**数据集**标签中，您可以看到用于配置
    AutoML 实验时使用的特定版本数据集的引用。这使得您可以在训练数据集与已部署的模型之间建立传承关系。
- en: Once the model has been registered, the deployment wizard creates an endpoint.
    Back in Azure ML Studio, click on the **Assets** | **Endpoint** menu item. This
    will bring you to the **Endpoints** page shown here:![Figure 5.26 – The Endpoints
    page
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦模型被注册，部署向导将创建一个端点。返回到 Azure ML Studio，点击**资产** | **端点**菜单项。这将带您进入如下所示的**端点**页面：![图
    5.26 – 端点页面
- en: '](img/B16777_05_026.jpg)'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_026.jpg)'
- en: Figure 5.26 – The Endpoints page
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.26 – 端点页面
- en: This list shows all real-time endpoints you have deployed from this Azure ML
    workspace. You will notice the **myfirstmlwebservice** endpoint, which you deployed
    in the previous section. By clicking on its name, you will end up on the endpoint's
    page, which you saw in *Figure 5.21*.
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 该列表显示了您从此 Azure ML 工作区部署的所有实时端点。您会注意到**myfirstmlwebservice**端点，这是您在上一节中部署的。点击其名称，您将进入端点页面，这个页面您在*图
    5.21*中已经看过。
- en: Behind the scenes, this endpoint is a container instance that was deployed in
    the `packt-azureml-rg`, right next to your Azure ML workspace resource. Navigate
    to the Azure portal and open the `packt-azureml-rg`. You should have resources
    similar to the ones shown here:![Figure 5.27 – The resources in the packt-azureml-rg
    resource group of the Azure portal
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在幕后，这个端点是一个部署在`packt-azureml-rg`中的容器实例，紧邻您的 Azure ML 工作区资源。导航至 Azure 门户并打开`packt-azureml-rg`。您应该能看到与这里展示的资源类似的内容：![图
    5.27 – Azure 门户中 packt-azureml-rg 资源组的资源
- en: '](img/B16777_05_027.jpg)'
  id: totrans-189
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](img/B16777_05_027.jpg)'
- en: Figure 5.27 – The resources in the packt-azureml-rg resource group of the Azure
    portal
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 5.27 – Azure 门户中 packt-azureml-rg 资源组的资源
- en: Here, you will see that a **Container instance** has been deployed named **myfirstmllwebservice-<random
    id>**, which is the name of the endpoint you saw in *Figure 5.26*. This is the
    engine that is hosting the REST API you deployed in the previous section.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，你将看到一个名为**myfirstmllwebservice-<random id>**的**容器实例**已被部署，这是你在*图 5.26*中看到的端点的名称。这是托管你在上一节中部署的
    REST API 的引擎。
- en: Important note
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 重要说明
- en: Never delete Azure ML workspace artifacts directly from the resource group.
    This will leave orphan registrations in your workspace, such as an endpoint that
    points to a deleted container instance.
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 切勿直接从资源组删除 Azure ML 工作区的工件。这将导致工作区中出现孤立的注册项，如指向已删除容器实例的端点。
- en: In this section, you saw what happens behind the scenes when you deploy a model
    from AutoML. In the next section, you are going to delete the endpoint you deployed
    to avoid spending money on a real-time endpoint you don't need.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你了解了从 AutoML 部署模型时发生的幕后过程。在下一节中，你将删除已部署的端点，以避免为不需要的实时端点支付费用。
- en: Cleaning up the model deployment
  id: totrans-195
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 清理模型部署
- en: In this section, you will clean up the deployed model. You should remove the
    deployments of the models that you are not planning to use. Otherwise, you will
    be paying for unused provisioned resources.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你将清理已部署的模型。你应该删除那些不打算使用的模型部署。否则，你将为未使用的已配置资源付费。
- en: 'Navigate to Azure ML Studio. Click on the `myfirstmlwebservice` endpoint and
    click on the **Delete** command. Confirm your desire to delete the endpoint by
    clicking **Delete** in the pop-up window shown here:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 导航到 Azure ML Studio。点击`myfirstmlwebservice`端点并点击**删除**命令。在弹出的窗口中点击**删除**以确认你要删除该端点：
- en: '![Figure 5.28 – Delete real-time endpoint pop-up window'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.28 – 删除实时端点弹窗'
- en: '](img/B16777_05_028.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B16777_05_028.jpg)'
- en: Figure 5.28 – Delete real-time endpoint pop-up window
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.28 – 删除实时端点弹窗
- en: After the confirmation, the endpoint and the container instance you saw back
    in the Azure portal will get deleted. If you like, you can verify this by visiting
    the `packt-azureml-rg` **resource group**.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在确认后，你在 Azure 门户中看到的端点和容器实例将被删除。如果你愿意，可以通过访问`packt-azureml-rg` **资源组**来验证此操作。
- en: Summary
  id: totrans-202
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, you learned how to configure an AutoML process to discover
    the best model that can predict whether a customer will churn or not. First, you
    used the AutoML wizard of the Azure Machine Learning Studio web experience to
    configure the experiment. Then, you monitored the execution of the run in the
    **Experiments** section of the studio interface. Once the training was completed,
    you reviewed the trained models and saw the information that had been stored regarding
    the best model. Then, you deployed that machine learning model in an Azure Container
    Instance and tested that the real-time endpoint performs the requested inferences.
    In the end, you deleted the deployment to avoid incurring costs in your Azure
    subscription.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了如何配置 AutoML 过程，以发现能够预测客户是否会流失的最佳模型。首先，你使用 Azure 机器学习工作室的 AutoML 向导来配置实验。然后，你在工作室界面的**实验**部分监控运行的执行。一旦训练完成，你查看了训练好的模型，并查看了存储的关于最佳模型的信息。接着，你在
    Azure 容器实例中部署了该机器学习模型，并测试了实时端点是否能够执行所请求的推断。最后，你删除了部署，以避免在 Azure 订阅中产生费用。
- en: In the next chapter, you will continue exploring the no-code/low code aspects
    of the Azure Machine Learning Studio experience by looking at the designer, which
    allows you to graphically design a training pipeline and operationalize the produced
    model.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，你将继续探索 Azure 机器学习工作室体验中的无代码/低代码部分，通过查看设计器，设计器允许你图形化地设计训练管道并实现生成的模型。
- en: Question
  id: totrans-205
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: You need to train a classification model but only consider linear models during
    the AutoML process. Which of the following allows you to do that in the Azure
    Machine Learning Studio experience?
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要训练一个分类模型，但在 AutoML 过程中只考虑线性模型。以下哪项可以让你在 Azure 机器学习工作室体验中实现这一点？
- en: a) Add all algorithms other than linear ones to the blocked algorithms list.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: a) 将所有非线性算法添加到阻止算法列表中。
- en: b) Set the Exit criterion option to a metric score threshold.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: b) 将退出标准选项设置为度量得分阈值。
- en: c) Disable the automatic featurization option.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: c) 禁用自动特征化选项。
- en: d) Disable the deep learning option on the classification task.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: d) 在分类任务中禁用深度学习选项。
- en: Further reading
  id: totrans-211
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'This section offers additional content as useful web resources:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 本节提供了作为有用的网络资源的额外内容：
- en: 'Basic concepts regarding AutoML:'
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于AutoML的基本概念：
- en: '[https://docs.microsoft.com/azure/machine-learning/concept-automated-ml](https://docs.microsoft.com/en-us/azure/machine-learning/concept-automated-ml).'
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://docs.microsoft.com/azure/machine-learning/concept-automated-ml](https://docs.microsoft.com/en-us/azure/machine-learning/concept-automated-ml)。'
- en: 'Deep dive into how to use AutoML: [https://docs.microsoft.com/azure/machine-learning/how-to-use-automated-ml-for-ml-models](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-use-automated-ml-for-ml-models).'
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 深入了解如何使用AutoML：[https://docs.microsoft.com/azure/machine-learning/how-to-use-automated-ml-for-ml-models](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-use-automated-ml-for-ml-models)。
- en: 'Cross-validation in sklearn: [https://scikit-learn.org/stable/modules/cross_validation.html](https://scikit-learn.org/stable/modules/cross_validation.html).'
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: sklearn中的交叉验证：[https://scikit-learn.org/stable/modules/cross_validation.html](https://scikit-learn.org/stable/modules/cross_validation.html)。
- en: 'Understanding the service state of an endpoint: [https://docs.microsoft.com/azure/machine-learning/how-to-deploy-and-where?tabs=azcli#understanding-service-state](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-deploy-and-where?tabs=azcli#understanding-service-state).'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解端点的服务状态：[https://docs.microsoft.com/azure/machine-learning/how-to-deploy-and-where?tabs=azcli#understanding-service-state](https://docs.microsoft.com/en-us/azure/machine-learning/how-to-deploy-and-where?tabs=azcli#understanding-service-state)。
- en: 'Generating client SDKs from `swagger.json` files: [https://swagger.io/tools/swagger-codegen/](https://swagger.io/tools/swagger-codegen/).'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从`swagger.json`文件生成客户端SDK：[https://swagger.io/tools/swagger-codegen/](https://swagger.io/tools/swagger-codegen/)。
